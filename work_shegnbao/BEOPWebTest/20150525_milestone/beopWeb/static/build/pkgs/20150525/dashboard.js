function tofixed(str){return parseFloat(str).toFixed(2)}var ModalBase=function(){function ModalBase(parent,entity,_funcRender,_funcUpdate,_funcConfigMode){parent&&(this.screen=parent,this.entity=entity,this.container=void 0,this.chart=void 0,this.spinner=void 0,this.executeRender=_funcRender,this.executeConfigMode=_funcConfigMode,this.executeUpdate=_funcUpdate,this.initContainer())}return ModalBase.prototype={UNIT_WIDTH:8.3,UNIT_HEIGHT:16.5,initContainer:function(replacedElementId){var divParent=document.getElementById("divContainer_"+this.entity.id),isNeedCreateDivParent=!1;if(!divParent||replacedElementId)var isNeedCreateDivParent=!0;if(isNeedCreateDivParent&&(divParent=document.createElement("div"),divParent.id="divContainer_"+this.entity.id),replacedElementId){var $old=$("#divContainer_"+replacedElementId);$(divParent).insertAfter($old),$old.remove()}else isNeedCreateDivParent&&this.screen.container.appendChild(divParent);return divParent.className="springContainer",AppConfig.isMobile?(divParent.style.height=this.UNIT_HEIGHT*this.entity.spanR*2+"%",divParent.style.width=this.UNIT_WIDTH*this.entity.spanC*2+"%"):(divParent.style.height=this.UNIT_HEIGHT*this.entity.spanR+"%",divParent.style.width=this.UNIT_WIDTH*this.entity.spanC+"%"),this.entity.modal.title?divParent.innerHTML='<div class="panel panel-default">\r\n                    <div class="panel-heading springHead">\r\n                        <h3 class="panel-title" style="font-weight: bold;">'+this.entity.modal.title+'</h3>\r\n                    </div>\r\n                    <div class="panel-body springContent"></div>\r\n                </div>':divParent.innerHTML='<div class="panel panel-default" style="background: none;">\r\n                    <div class="panel-body springContent" style="height:100%;"></div>\r\n                </div>',this.container=divParent.getElementsByClassName("springContent")[0],this.spinner=new LoadingSpinner({color:"#00FFFF"}),this.spinner.spin(this.container),this},render:function(){this.executeRender(),this.chart&&this.chart.on("resize",function(param){this.resize()})},update:function(options){options&&0!=options.length&&(this.executeUpdate(options),this.spinner&&this.spinner.stop())},configure:function(){function btnConfig_clickEvent(e){$(".springSel").removeClass("springSel"),$(e.target).parents(".springContainer").addClass("springSel"),_this.modalInit()}this.spinner.stop();var _this=this;this.chart&&this.chart.resize(),this.divResizeByMouseInit();var divMask=document.createElement("div");if(divMask.className="springConfigMask",!this.screen.isForReport){var btnConfig=document.createElement("span");btnConfig.className="glyphicon glyphicon-cog springConfigBtn grow",btnConfig.title="Options",btnConfig.onclick=btnConfig_clickEvent,divMask.appendChild(btnConfig)}var btnRemove=document.createElement("span");btnRemove.className="glyphicon glyphicon-remove-circle springConfigRemoveBtn grow",btnRemove.title="Remove",btnRemove.onclick=function(e){_this.chart&&_this.chart.clear(),_this.screen.removeEntity(_this.entity.id),$("#divContainer_"+_this.entity.id).remove(),_this=null},divMask.appendChild(btnRemove);var btnHeightResize=document.createElement("div"),maxHeight=this.optionTemplate.maxHeight,maxWidth=this.optionTemplate.maxWidth,minHeight=this.optionTemplate.minHeight,minWidth=this.optionTemplate.minWidth;btnHeightResize.className="divResize divHeightResize",btnHeightResize.innerHTML='<label for="heightResize" >H: </label><input type="range" class="inputResize" id="heightResize" name="points" step="0.5" min="'+minHeight+'" max="'+maxHeight+'" value="'+_this.entity.spanR+'"/><h5 class="rangeVal">'+_this.entity.spanR+' /6</h5><input type="text" class="rangeChange" value="'+_this.entity.spanR+'"/>',divMask.appendChild(btnHeightResize);var btnWidthResize=document.createElement("div");btnWidthResize.className="divResize divWidthResize",btnWidthResize.innerHTML='<label for="widthResize" >W: </label><input type="range" class="inputResize" id="widthResize" name="points" step="0.5" min="'+minWidth+'" max="'+maxWidth+'" value="'+_this.entity.spanC+'"/><h5 class="rangeVal">'+_this.entity.spanC+' /12</h5><input type="text" class="rangeChange" value="'+_this.entity.spanC+'"/>',divMask.appendChild(btnWidthResize);var inputChartTitle=document.createElement("input");inputChartTitle.style.display="none",inputChartTitle.className="form-control chartTitle",inputChartTitle.value=this.entity.modal.title,inputChartTitle.setAttribute("type","text"),divMask.appendChild(inputChartTitle);var chartTitleShow=document.createElement("p");chartTitleShow.innerHTML=inputChartTitle.value,chartTitleShow.className="chartTitleShow",divMask.appendChild(chartTitleShow),chartTitleShow.onclick=function(){chartTitleShow.style.display="none",inputChartTitle.style.display="block",inputChartTitle.focus()},inputChartTitle.onblur=function(){inputChartTitle.style.display="none",chartTitleShow.innerHTML=inputChartTitle.value,_this.entity.modal.title=inputChartTitle.value,chartTitleShow.style.display="block"},this.container.parentNode.appendChild(divMask),this.divResizeByToolInit();var divContainer=$(this.container).closest(".springContainer")[0];divMask.ondragstart=function(e){e.dataTransfer.setData("id",$(e.target).closest(".springContainer").get(0).id.replace("divContainer_",""))},divMask.ondragover=function(e){e.preventDefault()},divMask.ondragleave=function(e){e.preventDefault()},divContainer.ondrop=function(e){e.preventDefault();var sourceId=e.dataTransfer.getData("id");if(sourceId){var targetId=$(e.target).closest(".springContainer").get(0).id.replace("divContainer_","");_this.screen.replaceEntity(sourceId,targetId)}},this.executeConfigMode()},setModalOption:function(option){},modalInit:function(){var option,_this=this,dataItem=[{dsId:[],dsType:"",dsName:[]}];if(void 0!=_this.entity.modal.points)for(var i=0;i<_this.entity.modal.points.length;i++)dataItem[0].dsId.push(_this.entity.modal.points[i]),dataItem[0].dsName.push(AppConfig.datasource.getDSItemById(_this.entity.modal.points[i]).alias);if("custom"===_this.optionTemplate.mode)return void _this.showConfigModal();var tempOptionPara;tempOptionPara=_this.entity.modal.option?_this.entity.modal.option:{},tempOptionPara.dataItem=dataItem,option={modeUsable:_this.optionTemplate.mode,allDataNeed:!0,rowDataType:[I18n.resource.analysis.paneConfig.DATA_TYPE_DEFAULT],dataTypeMaxNum:[_this.optionTemplate.maxNum],templateType:_this.optionTemplate.type,optionPara:tempOptionPara},0==dataItem[0].dsId.length?_this.screen.modalConfigPane.showModalInit(!0,option,_this):_this.screen.modalConfigPane.showModalInit(!1,option,_this)},divResizeByToolInit:function(){{var _this=this,$divContainer=$("#divContainer_"+_this.entity.id);$(".divResize"),$(".inputResize")}$divContainer.find("#heightResize").mousedown(function(e){$(e.target).mousemove(function(e){$(e.target).parents(".springContainer").css("height",$(e.target).val()*_this.UNIT_HEIGHT+"%"),_this.entity.spanR=Number($(e.target).val()),$(e.target).next().text($(e.target).val()+" /6"),_this.screen.setEntity(_this.entity)})}).mouseup(function(e){$(e.target).off("mousemove"),_this.chart&&_this.chart.resize()}),$divContainer.find("#widthResize").mousedown(function(e){$(e.target).mousemove(function(e){$(e.target).parents(".springContainer").css("width",$(e.target).val()*_this.UNIT_WIDTH+"%"),_this.entity.spanC=Number($(e.target).val()),$(e.target).next().text($(e.target).val()+" /12"),_this.screen.setEntity(_this.entity)})}).mouseup(function(e){$(e.target).off("mousemove"),_this.chart&&_this.chart.resize()}),$divContainer.find(".rangeVal").click(function(e){e.stopPropagation();var valueCurrent=Number($(e.target).prev().val()),valuePre=$(e.target).prev().val(),valueMax=Number($(e.target).prevAll(".inputResize").attr("max")),valueMin=Number($(e.target).prevAll(".inputResize").attr("min"));$(e.target).nextAll(".rangeChange").css("display","inline-block").focus().off("blur").blur(function(e){valueCurrent=Number($(e.target).val()),valueMax>=valueCurrent&&valueCurrent>=valueMin?($(e.target).prevAll(".inputResize").val(valueCurrent.toString()),"widthResize"==$(e.target).prevAll(".inputResize").attr("id")?($(e.target).parents(".springContainer").css("width",$(e.target).val()*_this.UNIT_WIDTH+"%"),_this.entity.spanC=Number($(e.target).val()),_this.screen.setEntity(_this.entity),$(e.target).prev().text($(e.target).val()+" /12"),_this.chart&&_this.chart.resize()):($(e.target).parents(".springContainer").css("height",$(e.target).val()*_this.UNIT_HEIGHT+"%"),_this.entity.spanR=Number($(e.target).val()),_this.screen.setEntity(_this.entity),$(e.target).prev().text($(e.target).val()+" /6"),_this.chart&&_this.chart.resize()),$(e.target).css("display","none")):valueCurrent>valueMax?(new Alert($("#resizeAlert"),"danger","<strong>"+I18n.resource.dashboard.resize.ERR1+"</strong>").show().close(),$(e.target).val(valuePre).css("display","none")):valueMin>valueCurrent?(new Alert($("#resizeAlert"),"danger","<strong>"+I18n.resource.dashboard.resize.ERR2+"</strong>").show().close(),$(e.target).val(valuePre).css("display","none")):(""!=$(e.target).val()&&new Alert($("#resizeAlert"),"danger","<strong>"+I18n.resource.dashboard.resize.ERR3+"</strong>").show().close(),$(e.target).val(valuePre).css("display","none"))})})},divResizeByMouseInit:function(){function doResizeOnRight(e){var oEvent=e||event,l=oEvent.clientX-mouseStart.x+rightStart.x;w=l+resizeOnCorner.offsetWidth,w<resizeOnCorner.offsetWidth?w=resizeOnCorner.offsetWidth:w>document.documentElement.clientWidth-divContainer.offsetLeft&&(w=document.documentElement.clientWidth-divContainer.offsetLeft-2),divContainer.style.width=w+"px"}function stopResizeOnRight(e){resizeOnRight.releaseCapture?(tempSpanC=parseInt(100*w/(divContainer.parentNode.clientWidth*_this.UNIT_WIDTH)),rangeJudge(),$widthResize.val(tempSpanC.toString()),$widthResize.next().text(tempSpanC.toString()+" /12"),$widthResize.next().next().val(tempSpanC.toString()),divContainer.style.width=tempSpanC*_this.UNIT_WIDTH+"%",_this.entity.spanC=tempSpanC,resizeOnRight.onmousemove=null,resizeOnRight.onmouseup=null,resizeOnRight.releaseCapture(),_this.chart&&_this.chart.resize()):(tempSpanC=parseInt(100*w/(divContainer.parentNode.clientWidth*_this.UNIT_WIDTH)),rangeJudge(),$widthResize.val(tempSpanC.toString()),$widthResize.next().text(tempSpanC.toString()+" /12"),$widthResize.next().next().val(tempSpanC.toString()),divContainer.style.width=tempSpanC*_this.UNIT_WIDTH+"%",_this.entity.spanC=tempSpanC,document.removeEventListener("mousemove",doResizeOnRight,!0),document.removeEventListener("mouseup",stopResizeOnRight,!0),_this.chart&&_this.chart.resize())}function doResizeOnBottom(e){var oEvent=e||event,t=oEvent.clientY-mouseStart.y+bottomStart.y;h=t+resizeOnCorner.offsetHeight,h<resizeOnCorner.offsetHeight?h=resizeOnCorner.offsetHeight:h>document.documentElement.clientHeight-divContainer.offsetTop&&(h=document.documentElement.clientHeight-divContainer.offsetTop-2),divContainer.style.height=h+"px"}function stopResizeOnBottom(e){resizeOnBottom.releaseCapture?(tempSpanR=parseInt(100*h/(divContainer.parentNode.clientHeight*_this.UNIT_HEIGHT)),rangeJudge(),$heightResize.val(tempSpanR.toString()),$heightResize.next().text(tempSpanR.toString()+" /6"),$heightResize.next().next().val(tempSpanR.toString()),divContainer.style.height=tempSpanR*_this.UNIT_HEIGHT+"%",_this.entity.spanR=tempSpanR,resizeOnBottom.onmousemove=null,resizeOnBottom.onmouseup=null,resizeOnBottom.releaseCapture(),_this.chart&&_this.chart.resize()):(tempSpanR=parseInt(100*h/(divContainer.parentNode.clientHeight*_this.UNIT_HEIGHT)),rangeJudge(),$heightResize.val(tempSpanR.toString()),$heightResize.next().text(tempSpanR.toString()+" /6"),$heightResize.next().next().val(tempSpanR.toString()),divContainer.style.height=tempSpanR*_this.UNIT_HEIGHT+"%",_this.entity.spanR=tempSpanR,document.removeEventListener("mousemove",doResizeOnBottom,!0),document.removeEventListener("mouseup",stopResizeOnBottom,!0),_this.chart&&_this.chart.resize())}function doResizeOnCorner(e){var oEvent=e||event,l=oEvent.clientX-mouseStart.x+divStart.x,t=oEvent.clientY-mouseStart.y+divStart.y;w=l+resizeOnCorner.offsetWidth,h=t+resizeOnCorner.offsetHeight,w<resizeOnCorner.offsetWidth?w=resizeOnCorner.offsetWidth:w>document.documentElement.clientWidth-divContainer.offsetLeft&&(w=document.documentElement.clientWidth-divContainer.offsetLeft-2),h<resizeOnCorner.offsetHeight?h=resizeOnCorner.offsetHeight:h>document.documentElement.clientHeight-divContainer.offsetTop&&(h=document.documentElement.clientHeight-divContainer.offsetTop-2),divContainer.style.width=w+"px",divContainer.style.height=h+"px"}function stopResizeOnCorner(e){resizeOnCorner.releaseCapture?(tempSpanC=parseInt(100*w/(divContainer.parentNode.clientWidth*_this.UNIT_WIDTH)),tempSpanR=parseInt(100*h/(divContainer.parentNode.clientHeight*_this.UNIT_HEIGHT)),rangeJudge(),$widthResize.val(tempSpanC.toString()).get(0).setAttribute("value",tempSpanC.toString()),$widthResize.next().text(tempSpanC.toString()+" /12"),$widthResize.next().next().val(tempSpanC.toString()),$heightResize.val(tempSpanR.toString()).get(0).setAttribute("value",tempSpanR.toString()),$heightResize.next().text(tempSpanR.toString()+" /6"),$heightResize.next().next().val(tempSpanR.toString()),divContainer.style.width=tempSpanC*_this.UNIT_WIDTH+"%",divContainer.style.height=tempSpanR*_this.UNIT_HEIGHT+"%",_this.entity.spanC=tempSpanC,_this.entity.spanR=tempSpanR,resizeOnCorner.onmousemove=null,resizeOnCorner.onmouseup=null,resizeOnCorner.releaseCapture(),_this.chart&&_this.chart.resize()):(tempSpanC=parseInt(100*w/(divContainer.parentNode.clientWidth*_this.UNIT_WIDTH)),tempSpanR=parseInt(100*h/(divContainer.parentNode.clientHeight*_this.UNIT_HEIGHT)),rangeJudge(),$widthResize.val(tempSpanC.toString()),$widthResize.next().text(tempSpanC.toString()+" /12"),$widthResize.next().next().val(tempSpanC.toString()),$heightResize.val(tempSpanR.toString()),$heightResize.next().text(tempSpanR.toString()+" /6"),$heightResize.next().next().val(tempSpanR.toString()),divContainer.style.width=tempSpanC*_this.UNIT_WIDTH+"%",divContainer.style.height=tempSpanR*_this.UNIT_HEIGHT+"%",_this.entity.spanC=tempSpanC,_this.entity.spanR=tempSpanR,document.removeEventListener("mousemove",doResizeOnCorner,!0),document.removeEventListener("mouseup",stopResizeOnCorner,!0),_this.chart&&_this.chart.resize())}function rangeJudge(){tempSpanC>_this.optionTemplate.maxWidth?tempSpanC=_this.optionTemplate.maxWidth:tempSpanC<_this.optionTemplate.minWidth&&(tempSpanC=_this.optionTemplate.minWidth),tempSpanR>_this.optionTemplate.maxHeight?tempSpanR=_this.optionTemplate.maxHeight:tempSpanR<_this.optionTemplate.minHeight&&(tempSpanR=_this.optionTemplate.minHeight)}var $widthResize,$heightResize,_this=this,divContainer=$("#divContainer_"+_this.entity.id).get(0),resizeOnRight=document.createElement("div");resizeOnRight.className="resizeOnRight",divContainer.appendChild(resizeOnRight);var resizeOnBottom=document.createElement("div");resizeOnBottom.className="resizeOnBottom",divContainer.appendChild(resizeOnBottom);var resizeOnCorner=document.createElement("div");resizeOnCorner.className="resizeOnCorner",divContainer.appendChild(resizeOnCorner);var w,h,tempSpanR,tempSpanC,mouseStart={},divStart={},rightStart={},bottomStart={};resizeOnRight.onmousedown=function(e){$widthResize=$(e.target).parent().find("#widthResize");var oEvent=e||event;mouseStart.x=oEvent.clientX,mouseStart.y=oEvent.clientY,rightStart.x=resizeOnRight.offsetLeft,doResizeOnRight(e),resizeOnRight.setCapture?(resizeOnRight.onmousemove=doResizeOnRight,resizeOnRight.onmouseup=stopResizeOnRight,resizeOnRight.setCapture()):(document.addEventListener("mousemove",doResizeOnRight,!0),document.addEventListener("mouseup",stopResizeOnRight,!0))},resizeOnBottom.onmousedown=function(e){$heightResize=$(e.target).parent().find("#heightResize");var oEvent=e||event;mouseStart.x=oEvent.clientX,mouseStart.y=oEvent.clientY,bottomStart.y=resizeOnBottom.offsetTop,doResizeOnBottom(e),resizeOnBottom.setCapture?(resizeOnBottom.onmousemove=doResizeOnBottom,resizeOnBottom.onmouseup=stopResizeOnBottom,resizeOnBottom.setCapture()):(document.addEventListener("mousemove",doResizeOnBottom,!0),document.addEventListener("mouseup",stopResizeOnBottom,!0))},resizeOnCorner.onmousedown=function(e){$widthResize=$(e.target).parent().find("#widthResize"),$heightResize=$(e.target).parent().find("#heightResize");var oEvent=e||event;mouseStart.x=oEvent.clientX,mouseStart.y=oEvent.clientY,divStart.x=resizeOnCorner.offsetLeft,divStart.y=resizeOnCorner.offsetTop,doResizeOnCorner(e),resizeOnCorner.setCapture?(resizeOnCorner.onmousemove=doResizeOnCorner,resizeOnCorner.onmouseup=stopResizeOnCorner,resizeOnCorner.setCapture()):(document.addEventListener("mousemove",doResizeOnCorner,!0),document.addEventListener("mouseup",stopResizeOnCorner,!0))}}},ModalBase}(),ModalNone=function(){function ModalNone(screen,entityParams){ModalBase.call(this,screen,entityParams,this.renderModal,null,null)}return ModalNone.prototype=new ModalBase,ModalNone.prototype.optionTemplate={name:"",mode:["realTime"],maxNum:1,title:"",minHeight:1,minWidth:1,maxHeight:6,maxWidth:12,type:"ModalNone"},ModalNone.prototype.renderModal=function(){I18n.fillArea($("#coalSaveName").parent()),this.spinner.stop()},ModalNone.prototype.configure=function(){var _this=this,divAdd=document.createElement("span");divAdd.className="glyphicon glyphicon-plus-sign springConfigBtn",this.container.appendChild(divAdd);var $divParent=$(this.container).closest(".springContent")[0];$divParent.ondragover=function(e){e.preventDefault()},$divParent.ondragleave=function(e){e.preventDefault()},$divParent.ondrop=function(e){_this.screen.rebornEntity(_this.entity,e.dataTransfer.getData("type"),e.dataTransfer.getData("title"))}},ModalNone}(),ModalAnalysis=function(){function ModalAnalysis(screen,entityParams){ModalBase.call(this,screen,entityParams,this.renderModal,this.updateModal,this.showConfigMode),_this=this,this.curModal=this.entity.modal.option.option,this.entityAnalysis=void 0,this.saveModalJudge=$.Deferred()}var _this=void 0;return ModalAnalysis.prototype=new ModalBase,ModalAnalysis.prototype.optionTemplate={name:"toolBox.modal.TRANSIT",parent:2,mode:["realTimeWithoutRange"],maxNum:1,title:"",minHeight:1,minWidth:1,maxHeight:6,maxWidth:12,type:"ModalAnalysis"},ModalAnalysis.prototype.renderModal=function(){var modalClass=this.screen.factoryIoCAnalysis.getModel(this.entity.modal.option.type);this.screen.curModal=this.curModal,this.entityAnalysis=new modalClass(this.container,null,this),this.entityAnalysis.paneChart=this.container,this.entityAnalysis.chartAnimationDuration=10,this.entityAnalysis.show()},ModalAnalysis.prototype.updateModal=function(points){},ModalAnalysis.prototype.showConfigMode=function(){},ModalAnalysis.prototype.setModalOption=function(option){},ModalAnalysis.prototype.alertNoData=function(){},ModalAnalysis.prototype.spinnerStop=function(){},ModalAnalysis.prototype.saveModal=function(){},ModalAnalysis}(),ModalChart=function(){function ModalChart(screen,entityParams){entityParams&&ModalBase.call(this,screen,entityParams,this.renderModal,this.updateModal,this.showConfigMode)}return ModalChart.prototype=new ModalBase,ModalChart.prototype.optionTemplate={name:"toolBox.modal.REAL_TIME_CHART",parent:0,mode:["realTime"],maxNum:10,title:"",minHeight:1,minWidth:1,maxHeight:6,maxWidth:12,type:"ModalChart"},ModalChart.prototype.optionDefault={tooltip:{trigger:"axis"},toolbox:{show:!1,feature:{mark:{show:!0},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},calculable:!0},ModalChart.prototype.renderModal=function(){this.chart=echarts.init(this.container).setOption(this.options)},ModalChart.prototype.updateModal=function(pointName,pointValue){},ModalChart.prototype.showConfigMode=function(){},ModalChart}(),ModalRealtimePie=function(){function ModalRealtimePie(screen,entityParams){entityParams&&ModalBase.call(this,screen,entityParams,this.renderModal,this.updateModal,this.showConfigMode)}return ModalRealtimePie.prototype=new ModalBase,ModalRealtimePie.prototype.optionTemplate={name:"",parent:0,mode:["realTimeDashboard"],maxNum:10,title:"",minHeight:2,minWidth:3,maxHeight:6,maxWidth:12},ModalRealtimePie.prototype.optionDefault={tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",x:"left",y:"center"},toolbox:{show:!1,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["pie","funnel"],option:{funnel:{x:"25%",width:"50%",funnelAlign:"center",max:1548}}},restore:{show:!0},saveAsImage:{show:!0}}},calculable:!0,color:["#e84c3d","#293949","#1abc9c","#f1c40f"],series:[{type:"pie",radius:["50%","70%"],center:["60%","50%"],itemStyle:{normal:{label:{show:!0,formatter:"{d}%"},labelLine:{show:!0}},emphasis:{label:{show:!0,position:"center",textStyle:{fontSize:"20",fontWeight:"bold"}}}}}]},ModalRealtimePie.prototype.renderModal=function(){this.chart=echarts.init(this.container).setOption($.extend(!0,{},this.optionDefault,this.option))},ModalRealtimePie.prototype.updateModal=function(points){},ModalRealtimePie.prototype.showConfigMode=function(){},ModalRealtimePie.prototype.dealWithData=function(points,len){for(var arr=[],arrLegend=[],arrSeries=[],i=0;i<points.length;i++){var temp=points[i],pointAlias=AppConfig.datasource.getDSItemById(temp.dsItemId).alias;arrLegend.push(pointAlias);var seriesData={value:tofixed(temp.data),name:pointAlias};arrSeries.push(seriesData)}return arr.push(arrLegend),arr.push(arrSeries),arr},ModalRealtimePie.prototype.setModalOption=function(option){this.entity.modal.interval=5},ModalRealtimePie}(),ModalRealtimeLine=function(){function ModalRealtimeLine(screen,entityParams){entityParams&&ModalBase.call(this,screen,entityParams,this.renderModal,this.updateModal,this.showConfigMode)}return ModalRealtimeLine.prototype=new ModalBase,ModalRealtimeLine.prototype.optionTemplate={name:"",parent:0,mode:["realTimeDashboard"],maxNum:10,title:"",minHeight:2,minWidth:3,maxHeight:6,maxWidth:12},ModalRealtimeLine.prototype.optionDefault={tooltip:{trigger:"axis"},legend:{orient:"vertical",x:"right",y:"top"},grid:{x:70,x2:10,y2:24},toolbox:{show:!1,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},calculable:!0,color:["#e84c3d","#1abc9c","#B5C334","#FCCE10","#E87C25","#27727B","#FE8463","#9BCA63","#FAD860","#F3A43B","#60C0DD","#D7504B","#C6E579","#F4E001","#F0805A","#26C0C0"],xAxis:[{type:"category",boundaryGap:!0,splitLine:{show:!1},splitArea:{show:!1},axisTick:{show:!1}}],yAxis:[{type:"value",scale:!0,splitArea:{show:!1}}],series:[{type:"line",symbol:"emptyCircle",smooth:!0}]},ModalRealtimeLine.prototype.renderModal=function(){this.chart=echarts.init(this.container).setOption($.extend(!0,{},this.optionDefault,this.option))},ModalRealtimeLine.prototype.updateModal=function(points){},ModalRealtimeLine.prototype.showConfigMode=function(){},ModalRealtimeLine.prototype.dealWithData=function(points,len){for(var arr=[],arrLegend=[],arrSeries=[],i=0;i<points.list.length;i++){var key=points.list[i].dsItemId,pointAlias=AppConfig.datasource.getDSItemById(key).alias;arrLegend.push(pointAlias);var series={name:pointAlias,type:"line",symbol:"emptyCircle",smooth:!0,data:points.list[i].data};arrSeries.push(series)}return arr.push(arrLegend),arr.push(arrSeries),arr},ModalRealtimeLine.prototype.dealWithAddData=function(points,len){for(var arr=[],i=0;i<points.length;i++){var temp=[i,tofixed(points[i].data),!1,!0];arr.push(temp)}return arr},ModalRealtimeLine.prototype.setModalOption=function(option){this.entity.modal.interval=5},ModalRealtimeLine}(),modalRealtimeBar=function(){function modalRealtimeBar(screen,entityParams){entityParams&&ModalBase.call(this,screen,entityParams,this.renderModal,this.updateModal,this.showConfigMode)}return modalRealtimeBar.prototype=new ModalBase,modalRealtimeBar.prototype.optionTemplate={name:"",parent:0,mode:["realTimeDashboard"],maxNum:10,title:"",minHeight:2,minWidth:3,maxHeight:6,maxWidth:12},modalRealtimeBar.prototype.optionDefault={tooltip:{trigger:"item"},calculable:!0,grid:{borderWidth:0,x:70,x2:10,y2:24},xAxis:[{type:"category",show:!0,splitLine:{show:!1},splitArea:{show:!1},axisTick:{show:!1}}],yAxis:[{type:"value",splitArea:{show:!1}}],series:[{type:"bar",itemStyle:{normal:{color:function(params){var colorList=["#C1232B","#B5C334","#FCCE10","#E87C25","#27727B","#FE8463","#9BCA63","#FAD860","#F3A43B","#60C0DD","#D7504B","#C6E579","#F4E001","#F0805A","#26C0C0"];return colorList[params.dataIndex]},label:{show:!1,position:"top",formatter:"{b}\n{c}"},barBorderRadius:[5,5,0,0]}}}]},modalRealtimeBar.prototype.renderModal=function(){this.chart=echarts.init(this.container).setOption($.extend(!0,{},this.optionDefault,this.option))},modalRealtimeBar.prototype.updateModal=function(points){},modalRealtimeBar.prototype.showConfigMode=function(){},modalRealtimeBar.prototype.setModalOption=function(option){this.entity.modal.interval=5},modalRealtimeBar}(),modalRealtimeBarEnegBrkd=function(){function modalRealtimeBarEnegBrkd(screen,entityParams,_renderModal,_updateModal,_showConfigMode){if(screen){var renderModal=_renderModal?_renderModal:this.renderModal,updateModal=_updateModal?_updateModal:this.updateModal,showConfigMode=_showConfigMode?_showConfigMode:this.showConfigMode;modalRealtimeBar.call(this,screen,entityParams,renderModal,updateModal,showConfigMode)}}return modalRealtimeBarEnegBrkd.prototype=new modalRealtimeBar,modalRealtimeBarEnegBrkd.prototype.optionTemplate={name:"toolBox.modal.REAL_TIME_CHART_BAR_ENERGY",parent:0,mode:["realTimeDashboard"],maxNum:10,title:"",minHeight:2,minWidth:3,maxHeight:6,maxWidth:12,type:"modalRealtimeBarEnegBrkd"},modalRealtimeBarEnegBrkd.prototype.renderModal=function(){this.isFirstRender=!0},modalRealtimeBarEnegBrkd.prototype.updateModal=function(points){function dealWithData(points,len){for(var temp,arr=[],arrXAxis=[],arrData=[],arrMpData=[],i=0;i<points.length;i++){temp=points[i];var pointAlias=AppConfig.datasource.getDSItemById(temp.dsItemId).alias;arrXAxis.push(pointAlias),arrData.push(tofixed(temp.data)),arrMpData.push({xAxis:i,yAxis:tofixed(temp.data),value:tofixed(temp.data),name:pointAlias,symbolSize:32})}return arr.push(arrXAxis),arr.push(arrData),arr.push(arrMpData),arr}if(!(points.length<1)){var entityItem=dealWithData(points,4);if(this.isFirstRender){var entityData={grid:{x:70,x2:10,y2:24},xAxis:[{data:entityItem[0]}],series:[{data:entityItem[1],markPoint:{data:entityItem[2]}}]};this.chart=echarts.init(this.container,"macarons").setOption($.extend(!0,{},this.optionDefault,entityData)),this.isFirstRender=!1}else this.chart.setSeries([{type:"bar",itemStyle:{normal:{color:function(params){var colorList=["#C1232B","#B5C334","#FCCE10","#E87C25","#27727B","#FE8463","#9BCA63","#FAD860","#F3A43B","#60C0DD","#D7504B","#C6E579","#F4E001","#F0805A","#26C0C0"];return colorList[params.dataIndex]}}},data:entityItem[1],markPoint:{data:entityItem[2]}}])}},modalRealtimeBarEnegBrkd.prototype.setModalOption=function(option){this.entity.modal.interval=5},modalRealtimeBarEnegBrkd}(),ModalRealtimePieEnegBrkd=function(){function ModalRealtimePieEnegBrkd(screen,entityParams,_renderModal,_updateModal,_showConfigMode){if(screen){var renderModal=_renderModal?_renderModal:this.renderModal,updateModal=_updateModal?_updateModal:this.updateModal,showConfigMode=_showConfigMode?_showConfigMode:this.showConfigMode;ModalRealtimePie.call(this,screen,entityParams,renderModal,updateModal,showConfigMode)}}return ModalRealtimePieEnegBrkd.prototype=new ModalRealtimePie,ModalRealtimePieEnegBrkd.prototype.optionTemplate={name:"toolBox.modal.REAL_TIME_CHART_PIE_ENERGY",parent:0,mode:["realTimeDashboard"],maxNum:10,title:"",minHeight:2,minWidth:3,maxHeight:6,maxWidth:12,type:"ModalRealtimePieEnegBrkd"},ModalRealtimePieEnegBrkd.prototype.renderModal=function(){this.isFirstRender=!0},ModalRealtimePieEnegBrkd.prototype.updateModal=function(points){if(!(points.length<1))if(this.isFirstRender){var entityItem=this.dealWithData(points,4),entityData={legend:{data:entityItem[0]},series:[{data:entityItem[1]}]};this.chart=echarts.init(this.container).setOption($.extend(!0,{},this.optionDefault,entityData)),this.isFirstRender=!1}else{var seriesData=function(points,len){for(var arr=[],i=0;i<points.length;i++)arr.push({value:tofixed(points[i].data),name:AppConfig.datasource.getDSItemById(points[i].dsItemId).alias});return arr}(points,4);this.chart.setSeries([{type:"pie",radius:["50%","70%"],itemStyle:{normal:{label:{show:!0,formatter:"{d}%"},labelLine:{show:!0}},emphasis:{label:{show:!0,formatter:"{d}%",position:"center",textStyle:{fontSize:"20",fontWeight:"bold"}}}},data:seriesData}],!0)}},ModalRealtimePieEnegBrkd.prototype.setModalOption=function(option){this.entity.modal.interval=5},ModalRealtimePieEnegBrkd}(),ModalRealtimePieDataRoom=function(){function ModalRealtimePieDataRoom(screen,entityParams,_renderModal,_updateModal,_showConfigMode){if(screen){var renderModal=_renderModal?_renderModal:this.renderModal,updateModal=_updateModal?_updateModal:this.updateModal,showConfigMode=_showConfigMode?_showConfigMode:this.showConfigMode;ModalRealtimePie.call(this,screen,entityParams,renderModal,updateModal,showConfigMode)}}return ModalRealtimePieDataRoom.prototype=new ModalRealtimePie,ModalRealtimePieDataRoom.prototype.optionTemplate={name:"toolBox.modal.REAL_TIME_CHART_PIE_DATAROOM",parent:0,mode:["realTimeDashboard"],maxNum:10,title:"",minHeight:2,minWidth:3,maxHeight:6,maxWidth:12,type:"ModalRealtimePieDataRoom"},ModalRealtimePieDataRoom.prototype.renderModal=function(){this.isFirstRender=!0},ModalRealtimePieDataRoom.prototype.updateModal=function(points){if(!(points.length<1)){var entityItem=this.dealWithData(points,3);if(this.isFirstRender){var entityData={legend:{data:entityItem[0]},series:[{type:"pie",radius:["50%","70%"],itemStyle:{normal:{label:{show:!0,formatter:"{d}%"},labelLine:{show:!0}},emphasis:{label:{show:!0,position:"center",textStyle:{fontSize:"20",fontWeight:"bold"}}}},data:entityItem[1]}]};this.chart=echarts.init(this.container).setOption($.extend(!0,{},this.optionDefault,entityData)),this.isFirstRender=!1}else this.chart.setSeries([{type:"pie",radius:["50%","70%"],itemStyle:{normal:{label:{show:!0,formatter:"{d}%"},labelLine:{show:!0}},emphasis:{label:{show:!0,position:"center",textStyle:{fontSize:"20",fontWeight:"bold"}}}},data:entityItem[1]}],!0)}},ModalRealtimePieDataRoom.prototype.setModalOption=function(option){this.entity.modal.interval=5},ModalRealtimePieDataRoom}(),ModalRealtimeLineOutdoor=function(){function ModalRealtimeLineOutdoor(screen,entityParams,_renderModal,_updateModal,_showConfigMode){if(screen){{var renderModal=_renderModal?_renderModal:this.renderModal,updateModal=_updateModal?_updateModal:this.updateModal;_showConfigMode?_showConfigMode:this.showConfigMode}ModalRealtimeLine.call(this,screen,entityParams,renderModal,updateModal,null)}}return ModalRealtimeLineOutdoor.prototype=new ModalRealtimeLine,ModalRealtimeLineOutdoor.prototype.optionTemplate={name:"toolBox.modal.REAL_TIME_CHART_LINE_OUTDOOR",parent:0,mode:["realTimeDashboard"],maxNum:10,title:"",minHeight:2,minWidth:3,maxHeight:6,maxWidth:12,type:"ModalRealtimeLineOutdoor"},ModalRealtimeLineOutdoor.prototype.renderModal=function(){this.isFirstRender=!0},ModalRealtimeLineOutdoor.prototype.updateModal=function(points){if(!(points.length<1)){var _this=this;if(this.isFirstRender){var pointNameList=function(points){for(var arr=[],i=0;i<points.length;i++)arr.push(points[i].dsItemId);return arr}(points),endTime=(new Date).format("yyyy-MM-dd HH:mm:ss"),startTime=endTime.split(" ")[0]+" 01:00:00";WebAPI.post("/analysis/startWorkspaceDataGenHistogram",{dsItemIds:pointNameList,timeStart:startTime,timeEnd:endTime,timeFormat:"h1"}).done(function(result){var dataSrc=JSON.parse(result);if(!(void 0==dataSrc||dataSrc.length<=0)){var entityItem=_this.dealWithData(dataSrc,2),entityData={
legend:{data:entityItem[0]},xAxis:[{data:["01:00","02:00","03:00","04:00","05:00","06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00","24:00"]}],series:entityItem[1]};_this.chart=echarts.init(_this.container,"macarons").setOption($.extend(!0,{},_this.optionDefault,entityData)),_this.isFirstRender=!1}}).error(function(e){}).always(function(e){})}else{var crtHour=(new Date).getHours();points&&points.length>0&&this.chart.getSeries()[0].data.length<crtHour&&this.chart.addData(this.dealWithAddData(points,2)),this.chart.getSeries()[0].data.length>23&&(this.isFirstRender=!0)}}},ModalRealtimeLineOutdoor.prototype.setModalOption=function(option){this.entity.modal.interval=5},ModalRealtimeLineOutdoor}(),ModalRealtimeLinePUE=function(){function ModalRealtimeLinePUE(screen,entityParams,_renderModal,_updateModal,_showConfigMode){if(screen){var renderModal=_renderModal?_renderModal:this.renderModal,updateModal=_updateModal?_updateModal:this.updateModal,showConfigMode=_showConfigMode?_showConfigMode:this.showConfigMode;ModalRealtimeLine.call(this,screen,entityParams,renderModal,updateModal,showConfigMode)}}return ModalRealtimeLinePUE.prototype=new ModalRealtimeLine,ModalRealtimeLinePUE.prototype.optionTemplate={name:"toolBox.modal.REAL_TIME_CHART_LINE_PUE",parent:0,mode:["realTimeDashboard"],maxNum:10,title:"",minHeight:2,minWidth:3,maxHeight:6,maxWidth:12,type:"ModalRealtimeLinePUE"},ModalRealtimeLinePUE.prototype.renderModal=function(){this.isFirstRender=!0},ModalRealtimeLinePUE.prototype.updateModal=function(points){if(!(points.length<1)){var _this=this;if(this.isFirstRender){var pointNameList=function(points){for(var arr=[],i=0;1>i;i++)arr.push(points[i].dsItemId);return arr}(points),endTime=(new Date).format("yyyy-MM-dd HH:mm:ss"),startTime=endTime.split(" ")[0]+" 01:00:00";WebAPI.post("/analysis/startWorkspaceDataGenHistogram",{dsItemIds:pointNameList,timeStart:startTime,timeEnd:endTime,timeFormat:"h1"}).done(function(result){var dataSrc=JSON.parse(result);if(!(void 0==dataSrc||dataSrc.length<=0)){var entityItem=_this.dealWithData(dataSrc,1),entityData={legend:{data:entityItem[0]},xAxis:[{data:["01:00","02:00","03:00","04:00","05:00","06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00","24:00"]}],series:entityItem[1]};_this.chart=echarts.init(_this.container,"macarons").setOption($.extend(!0,{},_this.optionDefault,entityData)),_this.isFirstRender=!1}}).error(function(e){}).always(function(e){})}else{var crtHour=(new Date).getHours();points&&points.length>0&&this.chart.getSeries()[0].data.length<crtHour&&this.chart.addData(this.dealWithAddData(points,1)),this.chart.getSeries()[0].data.length>23&&(this.isFirstRender=!0)}}},ModalRealtimeLinePUE.prototype.setModalOption=function(option){this.entity.modal.interval=5},ModalRealtimeLinePUE}(),ModalRealtimeGauge=function(){function ModalRealtimeGauge(screen,entityParams,_renderModal,_updateModal,_showConfigMode){if(screen){var renderModal=_renderModal?_renderModal:this.renderModal,updateModal=_updateModal?_updateModal:this.updateModal,showConfigMode=_showConfigMode?_showConfigMode:this.showConfigMode;ModalBase.call(this,screen,entityParams,renderModal,updateModal,showConfigMode),this.entityOption=entityParams.modal.option}}return ModalRealtimeGauge.prototype=new ModalBase,ModalRealtimeGauge.prototype.optionTemplate={name:"toolBox.modal.REAL_TIME_CHART_GAUGE",parent:0,mode:["gauge"],maxNum:1,title:"",minHeight:2,minWidth:3,maxHeight:6,maxWidth:12,type:"ModalRealtimeGauge"},ModalRealtimeGauge.prototype.optionDefault={tooltip:{formatter:"{c}"},series:[{name:"PUE",type:"gauge",splitNumber:10,axisLine:{show:!0,lineStyle:{width:8}},radius:[0,"90%"],axisTick:{show:!0,splitNumber:5,length:15,lineStyle:{width:1,type:"solid",color:"auto"}},axisLabel:{textStyle:{color:"auto"},formatter:function(v){return v.toFixed(2)}},splitLine:{show:!0,length:20,lineStyle:{color:"auto"}},pointer:{width:5},detail:{formatter:"{value}"}}]},ModalRealtimeGauge.prototype.renderModal=function(){},ModalRealtimeGauge.prototype.updateModal=function(points){if(!(points.length<1)){var _this=this,scaleList=_this.entityOption.scaleList,colorList=["#1abc9c","#3598db","#e84c3d"];scaleList[scaleList.length-1]<scaleList[0]&&(scaleList.reverse(),colorList=["#e84c3d","#3598db","#1abc9c"]),this.optionDefault.series[0].max=scaleList[scaleList.length-1],this.optionDefault.series[0].min=scaleList[0],this.optionDefault.series[0].data=[{value:parseFloat(points[0].data).toFixed(2)}],this.optionDefault.series[0].axisLine.lineStyle.color=function(option){for(var arr=[],colorIndex=0,i=0;i<option.length;i++)0!=i&&(arr.push([((option[i]-option[0])/(_this.optionDefault.series[0].max-_this.optionDefault.series[0].min)).toFixed(3),colorList[colorIndex]]),colorIndex++);return arr}(scaleList),this.chart?this.chart.setOption(this.optionDefault):this.chart=echarts.init(this.container).setOption(this.optionDefault)}},ModalRealtimeGauge.prototype.showConfigMode=function(){},ModalRealtimeGauge.prototype.setModalOption=function(option){this.entity.modal.option={},this.entity.modal.option.scaleList=option.scaleList,this.entity.modal.interval=5},ModalRealtimeGauge}(),ModalRealtimeLineEnegBrkd=function(){function ModalRealtimeLineEnegBrkd(screen,entityParams,_renderModal,_updateModal,_showConfigMode){if(screen){var renderModal=_renderModal?_renderModal:this.renderModal,updateModal=_updateModal?_updateModal:this.updateModal,showConfigMode=_showConfigMode?_showConfigMode:this.showConfigMode;ModalRealtimeLine.call(this,screen,entityParams,renderModal,updateModal,showConfigMode)}}return ModalRealtimeLineEnegBrkd.prototype=new ModalRealtimeLine,ModalRealtimeLineEnegBrkd.prototype.optionTemplate={name:"toolBox.modal.REAL_TIME_CHART_LINE_ENERGY",parent:0,mode:["realTimeDashboard"],maxNum:10,title:"",minHeight:2,minWidth:3,maxHeight:6,maxWidth:12,type:"ModalRealtimeLineEnegBrkd"},ModalRealtimeLineEnegBrkd.prototype.renderModal=function(){this.isFirstRender=!0},ModalRealtimeLineEnegBrkd.prototype.updateModal=function(points){if(!(points.length<1)){var _this=this;if(this.isFirstRender){var pointNameList=function(points){for(var arr=[],i=0;i<points.length;i++)arr.push(points[i].dsItemId);return arr}(points),endTime=(new Date).format("yyyy-MM-dd HH:mm:ss"),startTime=endTime.split(" ")[0]+" 01:00:00";WebAPI.post("/analysis/startWorkspaceDataGenHistogram",{dsItemIds:pointNameList,timeStart:startTime,timeEnd:endTime,timeFormat:"h1"}).done(function(result){var dataSrc=JSON.parse(result);if(!(void 0==dataSrc||dataSrc.length<=0)){var entityItem=_this.dealWithData(dataSrc,4),entityData={legend:{data:entityItem[0]},xAxis:[{data:["01:00","02:00","03:00","04:00","05:00","06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00","24:00"]}],series:entityItem[1]};_this.chart=echarts.init(_this.container,"macarons").setOption($.extend(!0,{},_this.optionDefault,entityData)),_this.isFirstRender=!1}}).error(function(e){}).always(function(e){})}else{var crtHour=(new Date).getHours();points&&points.length>0&&this.chart.getSeries()[0].data.length<crtHour&&this.chart.addData(this.dealWithAddData(points,4)),this.chart.getSeries()&&this.chart.getSeries()[0].data.length>23&&(this.isFirstRender=!0)}}},ModalRealtimeLineEnegBrkd.prototype.setModalOption=function(option){this.entity.modal.interval=5},ModalRealtimeLineEnegBrkd}(),ModalHistoryChart=function(){function ModalHistoryChart(screen,entityParams,_renderModal,_updateModal,_showConfigMode){if(screen){var renderModal=_renderModal?_renderModal:this.renderModal,updateModal=_updateModal?_updateModal:this.updateModal,showConfigMode=_showConfigMode?_showConfigMode:this.showConfigMode;ModalBase.call(this,screen,entityParams,renderModal,updateModal,showConfigMode)}}return ModalHistoryChart.prototype=new ModalBase,ModalHistoryChart.prototype.optionTemplate={name:"toolBox.modal.HIS_CHART",parent:1,mode:["easyHistory"],maxNum:5,title:"",minHeight:2,minWidth:3,maxHeight:6,maxWidth:12,type:"ModalHistoryChart"},ModalHistoryChart.prototype.optionDefault={tooltip:{trigger:"axis"},toolbox:{show:!1,feature:{dataView:{show:!1,readOnly:!0},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},calculable:!1,dataZoom:{show:!0},grid:{x:70,x2:10,y2:24},xAxis:[{type:"time",splitLine:{show:!1}}],yAxis:[{type:"value",splitArea:{show:!1}}]},ModalHistoryChart.prototype.renderModal=function(){var timeType,_this=this,hourMilSec=36e5,dayMilSec=864e5,weekMilSec=6048e5+dayMilSec,startDate=new Date,endDate=new Date;if("hour"==_this.entity.modal.option.timeType&&(timeType="m5",startDate.setTime(endDate.getTime()-hourMilSec)),"day"==_this.entity.modal.option.timeType)timeType="h1",startDate.setTime(endDate.getTime()-dayMilSec);else if("week"==_this.entity.modal.option.timeType)timeType="d1",startDate.setTime(endDate.getTime()-weekMilSec);else if("month"==_this.entity.modal.option.timeType){timeType="d1";var year=endDate.getFullYear(),month=endDate.getMonth();0==month?(startDate.setFullYear(year-1),startDate.setMonth(11)):startDate.setMonth(month-1)}else{if("year"!=_this.entity.modal.option.timeType)return;timeType="M1",startDate.setFullYear(endDate.getFullYear()-1)}var optPtName=_this.entity.modal.points;WebAPI.post("/analysis/startWorkspaceDataGenHistogram",{dsItemIds:optPtName,timeStart:startDate.format("yyyy-MM-dd HH:mm:ss"),timeEnd:endDate.format("yyyy-MM-dd HH:mm:ss"),timeFormat:timeType}).done(function(result){var dataSrc=JSON.parse(result);if(!(void 0==dataSrc||0>=dataSrc)){var option=_this.initOption(dataSrc);_this.chart.setOption($.extend(!0,{},_this.optionDefault,option))}}).error(function(e){}).always(function(e){_this.spinner.stop()})},ModalHistoryChart.prototype.updateModal=function(options){},ModalHistoryChart.prototype.showConfigMode=function(){},ModalHistoryChart}(),ModalHistoryChartNormal=function(){function ModalHistoryChartNormal(screen,entityParams,_renderModal,_updateModal,_showConfigMode){if(screen){var renderModal=_renderModal?_renderModal:this.renderModal,updateModal=_updateModal?_updateModal:this.updateModal,showConfigMode=_showConfigMode?_showConfigMode:this.showConfigMode;ModalHistoryChart.call(this,screen,entityParams,renderModal,updateModal,showConfigMode),this.chart=echarts.init(this.container,"macarons"),this.spinner.spin(this.container)}}var m_color=["#e74a37","#ff8050","#1abd9b","#3499da","#3e72ac"],m_colorLen=m_color.length;return ModalHistoryChartNormal.prototype=new ModalHistoryChart,ModalHistoryChartNormal.prototype.optionTemplate={name:"toolBox.modal.HIS_CHART_ENERGY_LINE",parent:1,mode:["easyHistory"],maxNum:5,title:"",minHeight:2,minWidth:3,maxHeight:6,maxWidth:12,type:"ModalHistoryChartNormal"},ModalHistoryChartNormal.prototype.initOption=function(dataSrc){if(void 0!=dataSrc&&void 0!=dataSrc.list[0].data){var xAxis,xLen=dataSrc.timeShaft.length,arrXAxis=[];if("month"==this.entity.modal.option.timeType)for(var i=0;xLen>i;i++)arrXAxis.push(new Date(dataSrc.timeShaft[i]).format("MM-dd"));else if("week"==this.entity.modal.option.timeType)for(var i=0;xLen>i;i++)arrXAxis.push(new Date(dataSrc.timeShaft[i]).format("yyyy-MM-dd"));else if("day"==this.entity.modal.option.timeType)for(var i=0;xLen>i;i++)arrXAxis.push(new Date(dataSrc.timeShaft[i]).format("MM-dd HH:00"));xAxis=[{type:"category",data:arrXAxis}];for(var dataName=[],arrSeries=[],i=0,showColor="#1abd9b",i=0;i<dataSrc.list.length;i++){var key=dataSrc.list[i].dsItemId;dataSrc.list.length>1&&(showColor=m_color[i%m_colorLen]),dataName.push(AppConfig.datasource.getDSItemById(key).alias),arrSeries.push({name:dataName[i],type:this.entity.modal.option.showType,data:dataSrc.list[i].data,markPoint:{data:[{type:"max",name:I18n.resource.dashboard.modalHistoryChart.MAXIMUM},{type:"min",name:I18n.resource.dashboard.modalHistoryChart.MINIMUM}]},itemStyle:{normal:{color:showColor,barBorderRadius:[5,5,0,0]},emphasis:{color:showColor,barBorderRadius:[5,5,0,0]}}}),i++}return dataOption={title:{text:"",subtext:""},legend:{data:dataName},dataZoom:{show:!1},grid:{x:70,x2:20,y2:24},xAxis:xAxis,series:arrSeries},dataOption}},ModalHistoryChartNormal.prototype.setModalOption=function(option){this.entity.modal.option={},this.entity.modal.option.showType="bar",this.entity.modal.option.timeType=option.timeType},ModalHistoryChartNormal}(),ModalHistoryChartEnergyConsume=function(){function ModalHistoryChartEnergyConsume(screen,entityParams,_renderModal,_updateModal,_showConfigMode){if(screen){var renderModal=_renderModal?_renderModal:this.renderModal,updateModal=_updateModal?_updateModal:this.updateModal,showConfigMode=_showConfigMode?_showConfigMode:this.showConfigMode;ModalHistoryChart.call(this,screen,entityParams,renderModal,updateModal,showConfigMode),this.chart=echarts.init(this.container,"macarons"),this.spinner.spin(this.container)}}var m_color=["#e74a37","#ff8050","#1abd9b","#3499da","#3e72ac"],m_colorLen=m_color.length;return ModalHistoryChartEnergyConsume.prototype=new ModalHistoryChart,ModalHistoryChartEnergyConsume.prototype.optionTemplate={name:"toolBox.modal.HIS_CHART_ENERGY_BAR",parent:1,mode:["easyHistory"],maxNum:5,title:"",minHeight:2,minWidth:3,maxHeight:6,maxWidth:12,type:"ModalHistoryChartEnergyConsume"},ModalHistoryChartEnergyConsume.prototype.initOption=function(dataSrc){if(void 0!=dataSrc&&void 0!=dataSrc.list&&void 0!=dataSrc.list[0].data){var xAxis,showColor,xLen=dataSrc.timeShaft.length,arrXAxis=[];if("week"==this.entity.modal.option.timeType){for(var i=0;xLen-1>i;i++){var dayNum=new Date(dataSrc.timeShaft[i]).getDay();arrXAxis.push(i18n_resource.dataSource.WEEK[dayNum])}showColor="#3499da"}else if("month"==this.entity.modal.option.timeType){for(var i=0;xLen-1>i;i++)arrXAxis.push(new Date(dataSrc.timeShaft[i]).format("MM-dd"));showColor=m_color[0]}else if("year"==this.entity.modal.option.timeType){for(var i=0;xLen-1>i;i++){var monthNum=new Date(dataSrc.timeShaft[i]).getMonth();arrXAxis.push(i18n_resource.dataSource.MONTH[monthNum])}showColor="#3e72ac"}else if("day"==this.entity.modal.option.timeType){for(var i=0;xLen-1>i;i++)arrXAxis.push(new Date(dataSrc.timeShaft[i]).format("MM-dd HH:00"));showColor="#3e72ac"}xAxis=[{type:"category",data:arrXAxis}];for(var dataName=[],arrSeries=[],i=0,i=0;i<dataSrc.list.length;i++){var key=dataSrc.list[i].dsItemId;dataSrc.list.length>1&&(showColor=m_color[i%m_colorLen]),dataName.push(AppConfig.datasource.getDSItemById(key).alias);for(var defVal,arrData=[],hisLen=dataSrc.list[0].data.length,fixNum=0,j=1;hisLen>j;j++){var preVal=dataSrc.list[0].data[j-1];0!=preVal?(defVal=dataSrc.list[0].data[j]-preVal,2>defVal&&(fixNum=2),arrData.push(parseFloat(defVal.toFixed(fixNum)))):arrData.push(0)}arrSeries.push({name:dataName[i],type:this.entity.modal.option.showType,data:arrData,markPoint:{data:[{type:"max",name:I18n.resource.dashboard.modalHistoryChart.MAXIMUM},{type:"min",name:I18n.resource.dashboard.modalHistoryChart.MINIMUM}]},itemStyle:{normal:{color:showColor,barBorderRadius:[5,5,5,5]},emphasis:{color:showColor,barBorderRadius:[5,5,5,5]}}}),i++}return dataOption={title:{text:"",subtext:""},legend:{show:!1,data:dataName},dataZoom:{show:!1},grid:{x:70,x2:10,y2:24},xAxis:xAxis,series:arrSeries},dataOption}},ModalHistoryChartEnergyConsume.prototype.setModalOption=function(option){this.entity.modal.option={},this.entity.modal.option.showType="bar",this.entity.modal.option.timeType=option.timeType},ModalHistoryChartEnergyConsume}(),ModalHistoryChartYearOnYearLine=function(){function ModalHistoryChartYearOnYearLine(screen,entityParams,_renderModal,_updateModal,_showConfigMode){if(screen){var renderModal=_renderModal?_renderModal:this.renderModal,updateModal=_updateModal?_updateModal:this.updateModal,showConfigModal=_showConfigMode?_showConfigMode:this.showConfigMode;ModalBase.call(this,screen,entityParams,renderModal,updateModal,showConfigModal),this.option=entityParams.option,this.chart=echarts.init(this.container,"macarons"),this.spinner.spin(this.container)}}return ModalHistoryChartYearOnYearLine.prototype=new ModalBase,ModalHistoryChartYearOnYearLine.prototype.optionTemplate={name:"toolBox.modal.HIS_CHART_YEAR_LINE",parent:1,mode:["easyCompare"],maxNum:1,title:"",minHeight:2,minWidth:3,maxHeight:6,maxWidth:12,type:"ModalHistoryChartYearOnYearLine"},ModalHistoryChartYearOnYearLine.prototype.optionDefault={tooltip:{trigger:"axis"},toolbox:{show:!1,feature:{dataView:{show:!1,readOnly:!0},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},calculable:!1,dataZoom:{show:!1},grid:{x:70,x2:20,y2:24},xAxis:[{type:"time",splitLine:{show:!1}}],yAxis:[{type:"value",splitArea:{show:!1}}]},ModalHistoryChartYearOnYearLine.prototype.renderModal=function(){var timeType,_this=this,hourMilSec=36e5,dayMilSec=864e5,startDate=new Date,endDate=new Date,tmFlag=new Date;if("hour"==_this.entity.modal.option.timeType&&(timeType="m5",startDate.setTime(endDate.getTime()-hourMilSec),startDate.setMinutes(0),startDate.setSeconds(0),tmFlag.setTime(endDate.getTime()),tmFlag.setMinutes(0),tmFlag.setSeconds(0)),"day"==_this.entity.modal.option.timeType){timeType="h1",startDate.setTime(endDate.getTime()-dayMilSec),startDate.setHours(0),startDate.setMinutes(0),startDate.setSeconds(0),tmFlag.setTime(endDate.getTime()),tmFlag.setHours(0),tmFlag.setMinutes(0),tmFlag.setSeconds(0);var optPtName=_this.entity.modal.points;WebAPI.post("/analysis/startWorkspaceDataGenHistogram",{dsItemIds:optPtName,timeStart:startDate.format("yyyy-MM-dd HH:mm:ss"),timeEnd:endDate.format("yyyy-MM-dd HH:mm:ss"),timeFormat:timeType}).done(function(result){var dataSrc=JSON.parse(result);if(void 0!=dataSrc&&void 0!=dataSrc.list[0].data){var arrXAxis=[],flagCount=0,len=dataSrc.timeShaft.length;for(flagCount=0;len>flagCount&&!(new Date(dataSrc.timeShaft[flagCount])>=tmFlag);flagCount++);for(var setVal,fixNum=0,dataName=[],arrSeries=[],k=0,lenK=dataSrc.timeShaft.length;lenK>k;k++)flagCount>k&&arrXAxis.push(new Date(dataSrc.timeShaft[k]).format("HH:mm"));for(var currentCount=0,n=0;n<dataSrc.list.length;n++){key=dataSrc.list[n].dsItemId;var dataSrc1=[],dataSrc2=[],eachName=[];1==dataSrc.list.length?(dataName.push(I18n.resource.dataSource.TIME_YESTERDAY),dataName.push(I18n.resource.dataSource.TIME_TODAY),eachName.push(I18n.resource.dataSource.TIME_YESTERDAY),eachName.push(I18n.resource.dataSource.TIME_TODAY)):(dataName.push(key+"_"+I18n.resource.dataSource.TIME_YESTERDAY),dataName.push(key+"_"+I18n.resource.dataSource.TIME_TODAY),eachName.push(key+"_"+I18n.resource.dataSource.TIME_YESTERDAY),eachName.push(key+"_"+I18n.resource.dataSource.TIME_TODAY));for(var j=0,len=dataSrc.list[n].data.length;len>j;j++)setVal=Number(dataSrc.list[n].data[j]),100>setVal&&(fixNum=2),setVal=setVal.toFixed(fixNum),flagCount>j?dataSrc1.push(setVal):dataSrc2.push(setVal);for(var showColor,showData,showMark,i=0;2>i;i++){if(0==i)showColor=0==currentCount?"#1abd9b":echarts.config.color[2*currentCount],showData=dataSrc1,showMark={data:[{type:"max",name:I18n.resource.dashboard.modalHistoryChart.MAXIMUM},{type:"min",name:I18n.resource.dashboard.modalHistoryChart.MINIMUM}]};else if(1==i){showColor=0==currentCount?"#e74a37":echarts.config.color[2*currentCount+1],showData=dataSrc2;var lastCntX=dataSrc2.length-1,lastCntY=Number(dataSrc2[lastCntX]);showMark={symbol:"emptyCircle",symbolSize:10,effect:{show:!0,shadowBlur:0},itemStyle:{normal:{label:{show:!1}},emphasis:{label:{position:"top"}}},data:[{name:"",value:lastCntY,xAxis:lastCntX,yAxis:lastCntY}]}}arrSeries.push({name:eachName[i],type:"line",data:showData,markPoint:showMark,itemStyle:{normal:{color:showColor,barBorderRadius:[5,5,0,0]},emphasis:{color:showColor,barBorderRadius:[5,5,0,0]}},symbolSize:3}),showColor=""}currentCount++}var xAxis=[{type:"category",boundaryGap:!1,data:arrXAxis}],option={title:{text:"",subtext:""},dataZoom:{show:!1},legend:{data:dataName},xAxis:xAxis,series:arrSeries};_this.chart.setOption($.extend(!0,{},_this.optionDefault,option))}}).error(function(e){}).always(function(e){_this.spinner.stop()})}},ModalHistoryChartYearOnYearLine.prototype.updateModal=function(options){if(!(void 0===options||options.length<1||void 0===options[0])){for(var _this=this,addParam=[],i=0,len=options.length;len>i;i++){var item=[1,options[i].data,!1,!0];addParam.push(item)}_this.chart.addData(addParam),_this.chart.delMarkPoint(1,"");var dataSeries=_this.chart.getOption().series;if(!(dataSeries.length<2)){var temp=dataSeries[1].data,lastCntX=temp.length-1,lastCntY=Number(temp[lastCntX]),showMark={symbol:"emptyCircle",symbolSize:10,effect:{show:!0,shadowBlur:0},itemStyle:{normal:{label:{show:!1}},emphasis:{label:{position:"top"}}},data:[{name:"",value:lastCntY,xAxis:lastCntX,yAxis:lastCntY}]};_this.chart.addMarkPoint(1,showMark)}}},ModalHistoryChartYearOnYearLine.prototype.showConfigMode=function(){},ModalHistoryChartYearOnYearLine.prototype.setModalOption=function(option){this.entity.modal.option={},this.entity.modal.option.showType="line",this.entity.modal.option.timeType=option.timeType},ModalHistoryChartYearOnYearLine}(),ModalHistoryChartYearOnYearBar=function(){function ModalHistoryChartYearOnYearBar(screen,entityParams,_renderModal,_updateModal,_showConfigMode){if(screen){var renderModal=_renderModal?_renderModal:this.renderModal,updateModal=_updateModal?_updateModal:this.updateModal,showConfigModal=_showConfigMode?_showConfigMode:this.showConfigMode;ModalBase.call(this,screen,entityParams,renderModal,updateModal,showConfigModal),this.option=entityParams.option,this.chart=echarts.init(this.container,"macarons"),this.spinner.spin(this.container)}}var m_color=["#e74a37","#ff8050","#1abd9b","#3499da","#3e72ac"];return ModalHistoryChartYearOnYearBar.prototype=new ModalBase,ModalHistoryChartYearOnYearBar.prototype.optionTemplate={name:"toolBox.modal.HIS_CHART_YEAR_BAR",parent:1,mode:["easyCompare"],maxNum:1,title:"",minHeight:2,minWidth:3,maxHeight:6,maxWidth:12,type:"ModalHistoryChartYearOnYearBar"},ModalHistoryChartYearOnYearBar.prototype.optionDefault={tooltip:{trigger:"axis"},toolbox:{show:!1,feature:{dataView:{show:!1,readOnly:!0},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},calculable:!1,dataZoom:{show:!1},grid:{x:70,x2:10,y2:24},xAxis:[{type:"category",splitLine:{show:!1}}],yAxis:[{type:"value",splitArea:{show:!1}}]},ModalHistoryChartYearOnYearBar.prototype.renderModal=function(){var timeType,_this=this,dayMilSec=864e5,startDate=new Date,endDate=new Date,startDateZero=new Date,endDateZero=new Date;if("day"==_this.entity.modal.option.timeType){timeType="h1",startDate.setTime(endDate.getTime()-dayMilSec),startDateZero.setTime(startDate.getTime()),startDateZero.setHours(0),startDateZero.setMinutes(0),startDateZero.setSeconds(0),endDateZero.setTime(endDate.getTime()),endDateZero.setHours(0),endDateZero.setMinutes(0),endDateZero.setSeconds(0);var optPtName=_this.entity.modal.points;optPtName.length>1||WebAPI.post("/analysis/startWorkspaceDataGenHistogram",{dsItemIds:optPtName,timeStart:startDateZero.format("yyyy-MM-dd HH:mm:ss"),timeEnd:endDate.format("yyyy-MM-dd HH:mm:ss"),timeFormat:timeType}).done(function(result){var dataSrc=JSON.parse(result);if(void 0!=dataSrc&&void 0!=dataSrc.list[0].data){for(var flag1,flag2,len=dataSrc.timeShaft.length,i=0;len>i;i++)if(new Date(dataSrc.timeShaft[i])>=startDate){flag1=i;break}for(var i=0;len>i;i++)if(new Date(dataSrc.timeShaft[i])>=endDateZero){flag2=i;break}for(var arrVal1=[],arrVal2=[],val1=0,val2=0,fixNum1=0,fixNum2=0,i=0;i<dataSrc.list.length;i++){key=dataSrc.list[i].dsItemId;for(var j=0,len=dataSrc.list[i].data.length;len>j;j++)j==flag1?val1=Number(dataSrc.list[i].data[j])-Number(dataSrc.list[i].data[0]):j==flag2&&(val2=Number(dataSrc.list[i].data[len-1])-Number(dataSrc.list[i].data[j]));100>val1&&(fixNum1=2),100>val2&&(fixNum2=2),arrVal1.push(val1.toFixed(fixNum1)),arrVal2.push(val2.toFixed(fixNum2));break}var xAxis=[{type:"category",show:!1,boundaryGap:!0,data:optPtName}],dataName=[];dataName.push(I18n.resource.dataSource.TIME_YESTERDAY),dataName.push(I18n.resource.dataSource.TIME_TODAY);var arrSeries=[{name:dataName[0],type:"bar",data:arrVal1,itemStyle:{normal:{color:m_color[2],barBorderRadius:[5,5,0,0]},emphasis:{color:m_color[2],barBorderRadius:[5,5,0,0]}},markPoint:{data:[{type:"max",name:I18n.resource.dashboard.modalHistoryChart.EnergyConsumption}]}},{name:dataName[1],type:"bar",data:arrVal2,itemStyle:{normal:{color:m_color[1],barBorderRadius:[5,5,0,0]},emphasis:{color:m_color[1],barBorderRadius:[5,5,0,0]}},markPoint:{data:[{type:"max",name:I18n.resource.dashboard.modalHistoryChart.EnergyConsumption}]}}],option={title:{text:"",subtext:""},dataZoom:{show:!1},legend:{data:dataName},xAxis:xAxis,series:arrSeries};_this.chart.setOption($.extend(!0,{},_this.optionDefault,option))}}).error(function(e){}).always(function(e){_this.spinner.stop()})}},ModalHistoryChartYearOnYearBar.prototype.updateModal=function(options){},ModalHistoryChartYearOnYearBar.prototype.showConfigMode=function(){},ModalHistoryChartYearOnYearBar.prototype.setModalOption=function(option){this.entity.modal.option={},this.entity.modal.option.showType="bar",this.entity.modal.option.timeType=option.timeType},ModalHistoryChartYearOnYearBar}(),ModalCarbonFootprint=function(){function ModalCarbonFootprint(containerId,entityParams){ModalBase.call(this,containerId,entityParams,this.renderModal,this.updateModal,this.showConfigMode),this.isFirstTime=!0,this.widthRuler=void 0,this.$elMask=void 0,this.elPaneValue=void 0,this.elPaneTitle=void 0,this.maxValue=void 0}return ModalCarbonFootprint.prototype=new ModalBase,ModalCarbonFootprint.prototype.optionTemplate={name:"toolBox.modal.REAL_TIME_CARBON_FOOTPRINT",parent:0,mode:["realTimeDashboard"],maxNum:1,title:"",minHeight:3,minWidth:4,maxHeight:6,maxWidth:12,type:"ModalCarbonFootprint"},ModalCarbonFootprint.prototype.renderModal=function(){this.isFirstTime&&this.init()},ModalCarbonFootprint.prototype.init=function(){var _this=this;WebAPI.get("/static/scripts/spring/entities/modalCarbonFootprint.html").done(function(resultHTML){_this.container.innerHTML=resultHTML,_this.initStandard(),_this.isFirstTime=!1,I18n.fillArea($(".divCFTitle").parent())})},ModalCarbonFootprint.prototype.initStandard=function(){$divMain=$(this.container),this.widthRuler=$divMain.find(".cfProcessScale").width(),this.$elMask=$divMain.find(".cfProcessMask"),this.elPaneValue=document.getElementById("cfFootprintDashboardCurrent"),this.elPaneTitle=document.getElementById("divCFTitle");var unitValue=this.entity.modal.option.valueStandard/4;this.maxValue=5*unitValue;for(var tdScaleNums=this.container.getElementsByClassName("cfProcessScaleNum"),i=0,len=tdScaleNums.length;len>i;i++)tdScaleNums[i].textContent=parseInt(unitValue*i).toString();$divMain.find(".cfLegendBarWarning").animate({width:.2*this.widthRuler+"px"},1e3),document.getElementById("cfFootprintDashboardStandard").textContent=this.entity.modal.option.valueStandard},ModalCarbonFootprint.prototype.updateModal=function(points){var value=parseFloat(points[0].data).toFixed(1).toString();this.elPaneValue.textContent=value,this.elPaneTitle.textContent=value,this.$elMask.animate({width:this.widthRuler-value*this.widthRuler/this.maxValue+"px"},1e3)},ModalCarbonFootprint.prototype.showConfigMode=function(){},ModalCarbonFootprint.prototype.setModalOption=function(option){this.entity.modal.option={},this.entity.modal.option.valueStandard=3500},ModalCarbonFootprint}(),ModalWeather=function(){function ModalWeather(screen,entityParams,_renderModal,_updateModal,_showConfigMode){if(screen){var renderModal=_renderModal?_renderModal:this.renderModal,updateModal=_updateModal?_updateModal:this.updateModal,showConfigMode=_showConfigMode?_showConfigMode:this.showConfigMode;ModalBase.call(this,screen,entityParams,renderModal,updateModal,showConfigMode)}}ModalWeather.prototype=new ModalBase,ModalWeather.prototype.optionTemplate={name:"toolBox.modal.REAL_TIME_WEATHER",parent:0,mode:["weather"],maxNum:0,title:"",minHeight:2,minWidth:4,maxHeight:6,maxWidth:12,type:"ModalWeather"};var yin='<svg x="0px" y="0px" width="110px" height="76px" viewBox="0 0 110 96" enable-background="new 0 0 110 96" xml:space="preserve">\r\n                <path fill="#009FE3" d="M75.291,34.467C70.5,26.344,61.767,21.32,52.311,21.32c-12.728,0-23.524,8.832-26.105,21.158  c-6.569,2.188-11.324,8.382-11.324,15.676c0,9.111,7.414,16.525,16.526,16.525c3.289,0,6.415-0.945,9.119-2.745  c3.647,1.8,7.688,2.745,11.785,2.745c4.251,0,8.451-1.029,12.205-2.966c3.149,1.939,6.733,2.966,10.492,2.966  c11.089,0,20.11-9.021,20.11-20.109C95.118,43.577,86.249,34.621,75.291,34.467z M75.007,69.104c-3.247,0-6.315-1.046-8.877-3.023  c-1.219-0.941-2.969-0.716-3.91,0.503c-0.018,0.021-0.027,0.047-0.045,0.07c-3.019,1.6-6.42,2.45-9.865,2.45  c-3.653,0-7.255-0.947-10.41-2.74c-0.795-0.451-1.713-0.461-2.488-0.123c-0.447,0.072-0.883,0.245-1.263,0.542  c-1.94,1.519-4.271,2.32-6.744,2.32c-6.038,0-10.95-4.911-10.95-10.949s4.912-10.951,10.95-10.951c3.048,0,5.979,1.285,8.048,3.521  c1.044,1.132,2.809,1.201,3.938,0.157c1.131-1.045,1.202-2.809,0.157-3.938c-2.941-3.187-7.042-5.088-11.354-5.296  C34.91,32.951,42.94,26.893,52.31,26.893c6.688,0,12.931,3.178,16.885,8.443c-2.639,0.797-5.108,2.118-7.232,3.93  c-1.171,0.999-1.311,2.761-0.313,3.932c1,1.172,2.762,1.31,3.932,0.31c2.624-2.239,5.973-3.472,9.428-3.472  c8.014,0,14.535,6.52,14.535,14.534C89.542,62.584,83.021,69.104,75.007,69.104z"/>\r\n                </svg>',dayu='<svg x="0px" y="0px" width="110px" height="76px" viewBox="0 0 110 96" enable-background="new 0 0 110 96" xml:space="preserve">\r\n                <g>\r\n                    <path fill="#009FE3" d="M75.293,23.69c-4.791-8.123-13.525-13.147-22.981-13.147c-12.726,0-23.525,8.832-26.107,21.159   c-6.568,2.188-11.323,8.381-11.323,15.675c0,9.112,7.414,16.526,16.525,16.526c3.289,0,6.415-0.945,9.119-2.744   c3.648,1.797,7.689,2.744,11.786,2.744c4.25,0,8.452-1.029,12.206-2.966c3.149,1.938,6.732,2.966,10.492,2.966   c11.088,0,20.108-9.021,20.108-20.11C95.118,32.798,86.251,23.841,75.293,23.69z M75.01,58.326c-3.246,0-6.315-1.045-8.877-3.023   c-1.22-0.941-2.971-0.717-3.91,0.503c-0.019,0.021-0.027,0.047-0.043,0.069c-3.021,1.601-6.422,2.451-9.867,2.451   c-3.656,0-7.256-0.947-10.411-2.74c-0.794-0.453-1.713-0.461-2.491-0.123c-0.444,0.074-0.879,0.244-1.26,0.543   c-1.938,1.52-4.271,2.32-6.743,2.32c-6.038,0-10.951-4.912-10.951-10.95c0-6.038,4.913-10.951,10.951-10.951   c3.045,0,5.979,1.285,8.047,3.523c1.047,1.131,2.81,1.202,3.939,0.156c1.131-1.045,1.201-2.81,0.156-3.938   c-2.942-3.185-7.043-5.086-11.354-5.294c2.718-8.697,10.748-14.755,20.117-14.755c6.69,0,12.929,3.177,16.885,8.443   c-2.64,0.797-5.109,2.118-7.233,3.93c-1.17,0.999-1.311,2.76-0.312,3.931c0.999,1.172,2.759,1.311,3.931,0.311   c2.624-2.239,5.973-3.472,9.43-3.472c8.014,0,14.533,6.52,14.533,14.534C89.544,51.806,83.023,58.326,75.01,58.326z"/>\r\n                    <path fill="#009FE3" d="M44.751,79.875c0,3.084-2.5,5.582-5.583,5.582s-5.583-2.498-5.583-5.582s5.583-11.408,5.583-11.408   S44.751,76.791,44.751,79.875z"/>\r\n                    <path fill="#009FE3" d="M59.557,79.875c0,3.084-2.5,5.582-5.582,5.582c-3.084,0-5.583-2.498-5.583-5.582s5.583-11.408,5.583-11.408   S59.557,76.791,59.557,79.875z"/>\r\n                    <path fill="#009FE3" d="M74.362,79.875c0,3.084-2.499,5.582-5.583,5.582c-3.083,0-5.583-2.498-5.583-5.582   s5.583-11.408,5.583-11.408S74.362,76.791,74.362,79.875z"/>\r\n                </g>\r\n                </svg>',baoyu='<svg x="0px" y="0px" width="110px" height="76px" viewBox="0 0 110 96" enable-background="new 0 0 110 96" xml:space="preserve">\r\n                <g>\r\n                    <path fill="#009FE3" d="M75.292,23.756c-4.791-8.123-13.524-13.146-22.98-13.146c-12.729,0-23.527,8.832-26.107,21.159   c-6.569,2.187-11.324,8.381-11.324,15.675c0,9.112,7.414,16.526,16.526,16.526c3.29,0,6.416-0.946,9.118-2.745   c3.648,1.799,7.69,2.745,11.787,2.745c4.25,0,8.452-1.03,12.206-2.967c3.148,1.939,6.731,2.967,10.492,2.967   c11.088,0,20.109-9.021,20.109-20.11C95.119,32.865,86.25,23.909,75.292,23.756z M75.008,58.394c-3.246,0-6.316-1.046-8.878-3.024   c-1.219-0.94-2.969-0.716-3.909,0.503c-0.019,0.021-0.027,0.047-0.045,0.07c-3.02,1.6-6.421,2.451-9.865,2.451   c-3.655,0-7.256-0.948-10.412-2.741c-0.795-0.451-1.713-0.461-2.49-0.122c-0.445,0.074-0.881,0.244-1.261,0.542   c-1.94,1.519-4.271,2.321-6.743,2.321c-6.038,0-10.951-4.912-10.951-10.95s4.913-10.951,10.951-10.951   c3.046,0,5.979,1.285,8.047,3.522c1.044,1.132,2.808,1.2,3.938,0.156c1.132-1.045,1.202-2.809,0.157-3.938   c-2.94-3.187-7.042-5.087-11.354-5.295c2.717-8.697,10.748-14.755,20.118-14.755c6.688,0,12.928,3.177,16.884,8.442   c-2.641,0.797-5.11,2.118-7.234,3.931c-1.171,0.999-1.31,2.76-0.313,3.931c1,1.172,2.762,1.31,3.932,0.31   c2.623-2.238,5.973-3.472,9.428-3.472c8.016,0,14.535,6.521,14.535,14.534C89.543,51.872,83.021,58.394,75.008,58.394z"/>\r\n                    <path fill="#009FE3" d="M30.448,85.391c-0.531,0-1.067-0.149-1.543-0.47c-1.281-0.854-1.628-2.584-0.773-3.864l9.026-13.539   c0.854-1.28,2.584-1.629,3.865-0.772c1.281,0.854,1.627,2.584,0.773,3.865L32.77,84.151C32.232,84.955,31.348,85.391,30.448,85.391   z"/>\r\n                    <path fill="#009FE3" d="M45.313,85.391c-0.53,0-1.067-0.149-1.543-0.47c-1.281-0.854-1.627-2.584-0.772-3.864l9.026-13.539   c0.854-1.28,2.585-1.629,3.865-0.772c1.281,0.854,1.627,2.584,0.773,3.865l-9.026,13.541   C47.099,84.955,46.214,85.391,45.313,85.391z"/>\r\n                    <path fill="#009FE3" d="M60.182,85.391c-0.53,0-1.067-0.149-1.543-0.47c-1.283-0.854-1.627-2.584-0.772-3.864l9.024-13.539   c0.854-1.28,2.586-1.629,3.867-0.772c1.279,0.854,1.627,2.584,0.772,3.865l-9.027,13.541   C61.967,84.955,61.083,85.391,60.182,85.391z"/>\r\n                </g>\r\n                </svg>',duoyun='<svg x="0px" y="0px" width="110px" height="76px" viewBox="0 0 110 96" enable-background="new 0 0 110 96" xml:space="preserve">\r\n                    <g>\r\n                        <g>\r\n                            <path fill="#009FE3" d="M59.271,34.332c-4.592-8.123-12.961-13.146-22.021-13.146c-12.197,0-22.546,8.832-25.019,21.159    C5.936,44.531,1.379,50.726,1.379,58.02c0,9.111,7.104,16.525,15.836,16.525c3.152,0,6.148-0.945,8.739-2.745    c3.495,1.8,7.368,2.745,11.295,2.745c4.074,0,8.098-1.029,11.696-2.966c3.017,1.939,6.451,2.966,10.053,2.966    c10.627,0,19.271-9.021,19.271-20.109C78.271,43.441,69.772,34.485,59.271,34.332z M58.998,68.97    c-3.109,0-6.051-1.047-8.506-3.024c-1.168-0.94-2.845-0.715-3.747,0.503c-0.017,0.021-0.025,0.047-0.042,0.07    c-2.893,1.601-6.153,2.452-9.453,2.452c-3.504,0-6.953-0.948-9.977-2.741c-0.759-0.45-1.639-0.46-2.384-0.123    c-0.428,0.074-0.846,0.244-1.211,0.542c-1.86,1.519-4.096,2.321-6.463,2.321c-5.787,0-10.494-4.912-10.494-10.95    s4.707-10.951,10.494-10.951c2.92,0,5.729,1.285,7.711,3.521c1.003,1.134,2.692,1.202,3.775,0.157    c1.084-1.045,1.15-2.809,0.147-3.938c-2.817-3.187-6.749-5.087-10.88-5.295c2.604-8.697,10.3-14.755,19.277-14.755    c6.411,0,12.39,3.177,16.181,8.442c-2.528,0.797-4.897,2.118-6.934,3.93c-1.121,0.999-1.254,2.761-0.296,3.932    c0.959,1.171,2.645,1.31,3.767,0.31c2.514-2.238,5.722-3.472,9.033-3.472c7.682,0,13.93,6.52,13.93,14.534    C72.928,62.448,66.68,68.97,58.998,68.97z"/>\r\n                            <g>\r\n                                <path fill="#009FE3" d="M93.438,42.01c-3.744-6.411-10.431-10.365-17.66-10.365c-3.071,0-6.082,0.715-8.819,2.063     c1.803,1.117,3.451,2.482,4.896,4.05c1.271-0.351,2.588-0.537,3.923-0.537c4.587,0,8.882,2.146,11.767,5.744     c-1.765,0.665-3.414,1.654-4.861,2.941c-1.121,1-1.254,2.759-0.297,3.931c0.957,1.17,2.644,1.312,3.767,0.313     c1.874-1.67,4.269-2.59,6.735-2.59c5.729,0,10.388,4.861,10.388,10.839c0,5.977-4.659,10.84-10.388,10.84     c-2.319,0-4.514-0.78-6.344-2.256c-1.148-0.927-2.791-0.718-3.701,0.452c-2.168,1.176-4.6,1.804-7.064,1.804     c-0.736,0-1.473-0.063-2.195-0.17c-1.275,1.733-2.77,3.286-4.441,4.603c2.129,0.752,4.373,1.145,6.638,1.145     c3.188,0,6.343-0.781,9.181-2.25c2.396,1.469,5.099,2.25,7.93,2.25c8.675,0,15.73-7.365,15.73-16.416     C108.619,49.538,101.856,42.316,93.438,42.01z"/>\r\n                            </g>\r\n                        </g>\r\n                        <path fill="#009FE3" d="M59.271,34.332c-4.592-8.123-12.961-13.146-22.021-13.146c-12.197,0-22.546,8.832-25.019,21.159   C5.936,44.531,1.379,50.726,1.379,58.02c0,9.111,7.104,16.525,15.836,16.525c3.152,0,6.148-0.945,8.739-2.745   c3.495,1.8,7.368,2.745,11.295,2.745c4.074,0,8.098-1.029,11.696-2.966c3.017,1.939,6.451,2.966,10.053,2.966   c10.627,0,19.271-9.021,19.271-20.109C78.271,43.441,69.772,34.485,59.271,34.332z M58.998,68.97c-3.109,0-6.051-1.047-8.506-3.024   c-1.168-0.94-2.845-0.715-3.747,0.503c-0.017,0.021-0.025,0.047-0.042,0.07c-2.893,1.601-6.153,2.452-9.453,2.452   c-3.504,0-6.953-0.948-9.977-2.741c-0.759-0.45-1.639-0.46-2.384-0.123c-0.428,0.074-0.846,0.244-1.211,0.542   c-1.86,1.519-4.096,2.321-6.463,2.321c-5.787,0-10.494-4.912-10.494-10.95s4.707-10.951,10.494-10.951   c2.92,0,5.729,1.285,7.711,3.521c1.003,1.134,2.692,1.202,3.775,0.157c1.084-1.045,1.15-2.809,0.147-3.938   c-2.817-3.187-6.749-5.087-10.88-5.295c2.604-8.697,10.3-14.755,19.277-14.755c6.411,0,12.39,3.177,16.181,8.442   c-2.528,0.797-4.897,2.118-6.934,3.93c-1.121,0.999-1.254,2.761-0.296,3.932c0.959,1.171,2.645,1.31,3.767,0.31   c2.514-2.238,5.722-3.472,9.033-3.472c7.682,0,13.93,6.52,13.93,14.534C72.928,62.448,66.68,68.97,58.998,68.97z"/>\r\n                    </g>\r\n                    </svg>',xiaoyu='<svg x="0px" y="0px" width="110px" height="76px" viewBox="0 0 110 96" enable-background="new 0 0 110 96" xml:space="preserve">\r\n                <g>\r\n                    <path fill="#009FE3" d="M75.293,23.69c-4.791-8.123-13.523-13.147-22.98-13.147c-12.727,0-23.526,8.831-26.107,21.159   c-6.567,2.188-11.323,8.382-11.323,15.675c0,9.112,7.414,16.526,16.525,16.526c3.289,0,6.415-0.945,9.119-2.744   c3.647,1.799,7.688,2.744,11.786,2.744c4.25,0,8.451-1.029,12.205-2.966c3.147,1.938,6.731,2.966,10.492,2.966   c11.09,0,20.108-9.021,20.108-20.11C95.118,32.798,86.25,23.842,75.293,23.69z M75.009,58.326c-3.246,0-6.316-1.047-8.877-3.023   c-1.22-0.941-2.971-0.717-3.91,0.501c-0.02,0.021-0.027,0.048-0.045,0.069c-2.15,1.142-4.495,1.896-6.912,2.238l-6.184-0.043   c-2.521-0.39-4.963-1.224-7.183-2.482c-0.795-0.453-1.716-0.463-2.493-0.121c-0.443,0.074-0.877,0.244-1.256,0.539   c-1.942,1.52-4.274,2.322-6.745,2.322c-6.038,0-10.951-4.912-10.951-10.951c0-6.038,4.913-10.951,10.951-10.951   c3.046,0,5.979,1.285,8.048,3.523c1.044,1.13,2.811,1.2,3.939,0.156c1.129-1.044,1.2-2.81,0.155-3.938   c-2.941-3.185-7.043-5.086-11.354-5.294c2.716-8.697,10.747-14.755,20.116-14.755c6.689,0,12.929,3.177,16.885,8.443   c-2.639,0.797-5.107,2.118-7.232,3.93c-1.173,1-1.313,2.76-0.313,3.931c0.997,1.17,2.758,1.312,3.93,0.313   c2.625-2.24,5.975-3.473,9.431-3.473c8.015,0,14.534,6.519,14.534,14.534C89.544,51.808,83.024,58.326,75.009,58.326z"/>\r\n                    <path fill="#009FE3" d="M59.558,79.875c0,3.084-2.5,5.582-5.583,5.582s-5.583-2.498-5.583-5.582s5.583-11.408,5.583-11.408   S59.558,76.791,59.558,79.875z"/>\r\n                </g>\r\n                </svg>',qing_duoyun='<svg x="0px" y="0px" width="110px" height="76px" viewBox="0 0 110 96" enable-background="new 0 0 110 96" xml:space="preserve">\r\n                <g>\r\n                    <g>\r\n                        <g>\r\n                            <path fill="#009FE3" d="M90.923,16.534c1.333,0.771,1.79,2.479,1.021,3.811l-3.938,6.816c-0.77,1.334-2.475,1.791-3.809,1.021     c-1.332-0.771-1.79-2.477-1.02-3.811l3.938-6.814C87.885,16.225,89.588,15.768,90.923,16.534z"/>\r\n                        </g>\r\n                        <g>\r\n                            <path fill="#009FE3" d="M103.951,29.564c0.771,1.334,0.313,3.039-1.021,3.809l-6.818,3.938c-1.332,0.771-3.039,0.313-3.809-1.02     c-0.77-1.336-0.314-3.039,1.02-3.811l6.818-3.938C101.477,27.773,103.18,28.232,103.951,29.564z"/>\r\n                        </g>\r\n                        <g>\r\n                            <path fill="#009FE3" d="M108.721,47.36c0,1.541-1.25,2.787-2.787,2.787h-7.873c-1.541,0.002-2.789-1.248-2.789-2.787     c0-1.541,1.248-2.785,2.789-2.787l7.873,0.002C107.471,44.575,108.719,45.819,108.721,47.36z"/>\r\n                        </g>\r\n                        <g>\r\n                            <path fill="#009FE3" d="M103.951,65.157c-0.77,1.334-2.475,1.789-3.809,1.021l-6.817-3.938c-1.333-0.77-1.79-2.475-1.021-3.807     c0.771-1.336,2.475-1.791,3.809-1.021l6.818,3.938C104.266,62.118,104.721,63.823,103.951,65.157z"/>\r\n                        </g>\r\n                        <path fill="#009FE3" d="M62.053,28.184c-1.332,0.77-3.037,0.313-3.808-1.021l-3.937-6.818c-0.771-1.332-0.314-3.035,1.02-3.809    c1.333-0.77,3.038-0.313,3.807,1.021l3.938,6.814C63.844,25.708,63.387,27.413,62.053,28.184z"/>\r\n                        <g>\r\n                            <path fill="#009FE3" d="M73.126,25.215c-1.541,0-2.788-1.247-2.788-2.787v-7.873c0-1.539,1.247-2.787,2.788-2.787     c1.54,0,2.787,1.248,2.787,2.787v7.873C75.913,23.969,74.666,25.215,73.126,25.215z"/>\r\n                        </g>\r\n                    </g>\r\n                    <g>\r\n                        <path fill="#009FE3" d="M61.691,44.021c-4.791-8.123-13.524-13.15-22.981-13.15c-12.727,0-23.525,8.83-26.105,21.16    C6.035,54.22,1.279,60.412,1.279,67.707c0,9.111,7.414,16.525,16.526,16.525c3.29,0,6.415-0.947,9.118-2.746    c3.648,1.799,7.691,2.746,11.787,2.746c4.251,0,8.451-1.031,12.205-2.965c3.15,1.938,6.732,2.965,10.493,2.965    c11.088,0,20.108-9.021,20.108-20.109C81.518,53.127,72.648,44.172,61.691,44.021z M61.406,78.654    c-3.247,0-6.317-1.045-8.879-3.025c-1.217-0.939-2.969-0.715-3.909,0.505c-0.017,0.022-0.027,0.048-0.046,0.067    c-3.02,1.604-6.42,2.453-9.864,2.453c-3.655,0-7.255-0.945-10.411-2.742c-0.792-0.449-1.71-0.457-2.485-0.121    c-0.447,0.074-0.884,0.244-1.266,0.541c-1.939,1.521-4.271,2.322-6.742,2.322c-6.038,0-10.951-4.912-10.951-10.949    c0-6.039,4.913-10.951,10.951-10.951c3.047,0,5.979,1.283,8.048,3.523c1.045,1.131,2.809,1.201,3.938,0.156    s1.201-2.809,0.156-3.939c-2.942-3.186-7.042-5.086-11.354-5.295c2.719-8.697,10.748-14.754,20.117-14.754    c6.688,0,12.929,3.176,16.884,8.441c-2.638,0.799-5.109,2.117-7.232,3.932c-1.17,0.998-1.312,2.76-0.312,3.93    s2.761,1.311,3.931,0.313c2.625-2.24,5.973-3.475,9.429-3.475c8.014,0,14.534,6.521,14.534,14.535    C75.941,72.134,69.421,78.654,61.406,78.654z"/>\r\n                        <g>\r\n                            <path fill="#009FE3" d="M91.902,47.586c0-10.354-8.422-18.775-18.775-18.775c-5.336,0.002-10.3,2.225-13.822,6.068     c1.295,1.174,2.498,2.453,3.584,3.846c2.557-2.959,6.254-4.684,10.238-4.686c7.469,0,13.544,6.076,13.544,13.547     c0,3.023-0.987,5.854-2.702,8.139c0.727,1.932,1.217,3.977,1.42,6.1C89.443,58.344,91.902,53.208,91.902,47.586z"/>\r\n                            <g>\r\n                                <path fill="#009FE3" d="M91.943,74.377l-3.938-6.816c-0.55-0.951-1.574-1.445-2.604-1.379c-0.172,2.033-0.6,3.998-1.25,5.855      l2.961,5.126c0.77,1.334,2.475,1.791,3.808,1.021C92.256,77.414,92.713,75.711,91.943,74.377z"/>\r\n                            </g>\r\n                        </g>\r\n                    </g>\r\n                    <path fill="#009FE3" d="M61.691,44.021c-4.791-8.123-13.524-13.15-22.981-13.15c-12.727,0-23.525,8.83-26.105,21.16   C6.035,54.22,1.279,60.412,1.279,67.707c0,9.111,7.414,16.525,16.526,16.525c3.29,0,6.415-0.947,9.118-2.746   c3.648,1.799,7.691,2.746,11.787,2.746c4.251,0,8.451-1.031,12.205-2.965c3.15,1.938,6.732,2.965,10.493,2.965   c11.088,0,20.108-9.021,20.108-20.109C81.518,53.127,72.648,44.172,61.691,44.021z M61.406,78.654   c-3.247,0-6.317-1.045-8.879-3.025c-1.217-0.939-2.969-0.715-3.909,0.505c-0.017,0.022-0.027,0.048-0.046,0.067   c-3.02,1.604-6.42,2.453-9.864,2.453c-3.655,0-7.255-0.945-10.411-2.742c-0.792-0.449-1.71-0.457-2.485-0.121   c-0.447,0.074-0.884,0.244-1.266,0.541c-1.939,1.521-4.271,2.322-6.742,2.322c-6.038,0-10.951-4.912-10.951-10.949   c0-6.039,4.913-10.951,10.951-10.951c3.047,0,5.979,1.283,8.048,3.523c1.045,1.131,2.809,1.201,3.938,0.156   s1.201-2.809,0.156-3.939c-2.942-3.186-7.042-5.086-11.354-5.295c2.719-8.697,10.748-14.754,20.117-14.754   c6.688,0,12.929,3.176,16.884,8.441c-2.638,0.799-5.109,2.117-7.232,3.932c-1.17,0.998-1.312,2.76-0.312,3.93   s2.761,1.311,3.931,0.313c2.625-2.24,5.973-3.475,9.429-3.475c8.014,0,14.534,6.521,14.534,14.535   C75.941,72.134,69.421,78.654,61.406,78.654z"/>\r\n                </g>\r\n                </svg>',qing='<svg  x="0px" y="0px" width="110px" height="76px" viewBox="0 0 110 96" enable-background="new 0 0 110 96" xml:space="preserve">\r\n				<g>\r\n					<path fill="#009FE3" d="M54.999,67c-10.354,0-18.776-8.424-18.776-18.774c0-10.354,8.425-18.776,18.776-18.776   c10.354,0,18.775,8.424,18.775,18.776C73.776,58.576,65.354,67,54.999,67z M54.999,34.681c-7.469,0-13.545,6.076-13.545,13.545   c0,7.47,6.076,13.545,13.545,13.545c7.468,0,13.545-6.075,13.545-13.545C68.544,40.756,62.468,34.681,54.999,34.681z"/>\r\n					<g>\r\n						<g>\r\n							<path fill="#009FE3" d="M43.927,67.176c1.333,0.771,1.79,2.479,1.021,3.811l-3.938,6.816c-0.769,1.332-2.476,1.791-3.808,1.023     c-1.334-0.773-1.791-2.479-1.021-3.813l3.938-6.818C40.889,66.865,42.594,66.408,43.927,67.176z"/>\r\n							<path fill="#009FE3" d="M72.796,17.174c1.333,0.771,1.79,2.476,1.021,3.81l-3.938,6.815c-0.771,1.334-2.476,1.791-3.808,1.022     c-1.334-0.77-1.791-2.475-1.021-3.809l3.938-6.818C69.758,16.861,71.462,16.404,72.796,17.174z"/>\r\n						</g>\r\n						<g>\r\n							<path fill="#009FE3" d="M35.821,59.07c0.771,1.334,0.313,3.039-1.021,3.811l-6.817,3.936c-1.334,0.77-3.039,0.313-3.81-1.02     c-0.771-1.334-0.313-3.036,1.021-3.809l6.816-3.938C33.346,57.281,35.052,57.738,35.821,59.07z"/>\r\n							<path fill="#009FE3" d="M85.825,30.204c0.77,1.334,0.313,3.039-1.021,3.807l-6.816,3.938c-1.334,0.77-3.039,0.313-3.811-1.021     c-0.77-1.336-0.313-3.039,1.021-3.809l6.816-3.938C83.351,28.413,85.054,28.87,85.825,30.204z"/>\r\n						</g>\r\n						<g>\r\n							<path fill="#009FE3" d="M32.854,48c0,1.539-1.246,2.785-2.787,2.785h-7.873c-1.539,0-2.787-1.248-2.787-2.785     c0-1.541,1.246-2.787,2.787-2.787l7.873-0.002C31.608,45.211,32.854,46.459,32.854,48z"/>\r\n							<path fill="#009FE3" d="M90.593,48c0,1.539-1.248,2.785-2.788,2.785h-7.872c-1.541,0.002-2.787-1.248-2.787-2.785     c0-1.541,1.246-2.787,2.787-2.789l7.872,0.002C89.345,45.213,90.593,46.459,90.593,48z"/>\r\n						</g>\r\n						<g>\r\n							<path fill="#009FE3" d="M35.821,36.926c-0.771,1.336-2.475,1.791-3.809,1.021l-6.816-3.938c-1.334-0.768-1.791-2.473-1.021-3.807     c0.771-1.334,2.477-1.791,3.809-1.021l6.817,3.938C36.134,33.89,36.591,35.595,35.821,36.926z"/>\r\n							<path fill="#009FE3" d="M85.825,65.797c-0.771,1.334-2.475,1.789-3.811,1.02l-6.816-3.936c-1.332-0.77-1.791-2.477-1.021-3.809     c0.771-1.334,2.476-1.791,3.81-1.021l6.817,3.937C86.137,62.758,86.594,64.463,85.825,65.797z"/>\r\n						</g>\r\n						<g>\r\n							<path fill="#009FE3" d="M43.927,28.822c-1.334,0.769-3.038,0.312-3.809-1.021l-3.938-6.817c-0.77-1.334-0.313-3.037,1.021-3.808     c1.332-0.771,3.037-0.313,3.808,1.021l3.938,6.818C45.717,26.349,45.26,28.054,43.927,28.822z"/>\r\n							<path fill="#009FE3" d="M72.796,78.824c-1.333,0.771-3.038,0.313-3.809-1.021l-3.938-6.815c-0.77-1.334-0.313-3.039,1.021-3.809     c1.332-0.77,3.037-0.313,3.808,1.021l3.938,6.816C74.586,76.35,74.129,78.053,72.796,78.824z"/>\r\n						</g>\r\n						<g>\r\n							<path fill="#009FE3" d="M54.999,25.854c-1.54,0-2.788-1.248-2.788-2.787v-7.873c0-1.538,1.248-2.786,2.788-2.786     c1.539,0,2.787,1.248,2.787,2.786v7.873C57.788,24.607,56.54,25.854,54.999,25.854z"/>\r\n							<path fill="#009FE3" d="M54.999,83.592c-1.54,0-2.788-1.246-2.788-2.787v-7.871c0-1.541,1.248-2.789,2.788-2.789     c1.539,0,2.787,1.248,2.787,2.789v7.871C57.788,82.346,56.54,83.592,54.999,83.592z"/>\r\n						</g>\r\n					</g>\r\n				</g>\r\n			</svg>',duoyun_zhenyu='<svg x="0px" y="0px" width="110px" height="76px" viewBox="0 0 110 96" enable-background="new 0 0 110 96" xml:space="preserve">\r\n                        <g>\r\n                            <g>\r\n                                <g>\r\n                                    <g>\r\n                                        <path fill="#009FE3" d="M90.924,5.36c1.334,0.771,1.791,2.476,1.021,3.81l-3.938,6.817c-0.77,1.334-2.475,1.791-3.809,1.021      c-1.332-0.771-1.789-2.476-1.021-3.81l3.939-6.815C87.885,5.049,89.59,4.592,90.924,5.36z"/>\r\n                                    </g>\r\n                                    <g>\r\n                                        <path fill="#009FE3" d="M103.953,18.39c0.77,1.334,0.313,3.039-1.021,3.807l-6.818,3.938c-1.332,0.771-3.037,0.313-3.809-1.021      c-0.77-1.334-0.313-3.039,1.021-3.809l6.818-3.938C101.477,16.599,103.18,17.056,103.953,18.39z"/>\r\n                                    </g>\r\n                                    <g>\r\n                                        <path fill="#009FE3" d="M108.721,36.187c0,1.541-1.248,2.787-2.787,2.787h-7.873c-1.543,0-2.787-1.248-2.787-2.787      c0-1.541,1.244-2.787,2.785-2.787h7.873C107.473,33.399,108.719,34.646,108.721,36.187z"/>\r\n                                    </g>\r\n                                    <g>\r\n                                        <path fill="#009FE3" d="M103.953,53.983c-0.771,1.334-2.477,1.789-3.811,1.021l-6.816-3.937      c-1.334-0.771-1.791-2.476-1.021-3.808c0.771-1.336,2.477-1.79,3.809-1.021l6.816,3.938      C104.264,50.944,104.721,52.649,103.953,53.983z"/>\r\n                                    </g>\r\n                                    <path fill="#009FE3" d="M62.053,17.008c-1.332,0.771-3.037,0.313-3.807-1.021l-3.938-6.818c-0.77-1.334-0.313-3.037,1.021-3.808     c1.332-0.771,3.037-0.313,3.807,1.021l3.939,6.815C63.844,14.534,63.387,16.239,62.053,17.008z"/>\r\n                                    <g>\r\n                                        <path fill="#009FE3" d="M73.127,14.041c-1.539,0-2.787-1.247-2.787-2.788V3.38c0-1.539,1.248-2.786,2.787-2.786      c1.541,0,2.789,1.247,2.789,2.786v7.873C75.916,12.794,74.668,14.041,73.127,14.041z"/>\r\n                                    </g>\r\n                                </g>\r\n                                <g>\r\n                                    <path fill="#009FE3" d="M61.691,32.845c-4.791-8.121-13.523-13.148-22.98-13.148c-12.729,0-23.527,8.83-26.107,21.16     C6.035,43.043,1.279,49.235,1.279,56.532c0,9.111,7.414,16.523,16.525,16.523c3.291,0,6.416-0.945,9.121-2.742     c3.646,1.797,7.689,2.742,11.785,2.742c4.252,0,8.453-1.031,12.207-2.966c3.148,1.938,6.73,2.966,10.492,2.966     c11.088,0,20.107-9.021,20.107-20.109C81.516,41.952,72.65,32.998,61.691,32.845z M61.408,67.48     c-3.246,0-6.316-1.045-8.879-3.025c-1.219-0.939-2.971-0.716-3.91,0.505c-0.018,0.021-0.027,0.047-0.043,0.067     c-3.02,1.604-6.422,2.453-9.867,2.453c-3.654,0-7.254-0.947-10.41-2.742c-0.793-0.449-1.711-0.459-2.488-0.121     c-0.445,0.074-0.883,0.244-1.264,0.541c-1.939,1.521-4.271,2.322-6.744,2.322c-6.039,0-10.951-4.912-10.951-10.949     c0-6.041,4.914-10.953,10.951-10.953c3.047,0,5.98,1.285,8.047,3.523c1.045,1.133,2.811,1.203,3.941,0.155     c1.131-1.043,1.199-2.808,0.154-3.938c-2.939-3.187-7.043-5.088-11.354-5.295c2.717-8.697,10.748-14.756,20.115-14.756     c6.689,0,12.93,3.178,16.885,8.442c-2.639,0.799-5.109,2.116-7.234,3.931c-1.172,1-1.311,2.76-0.311,3.932     c1,1.17,2.76,1.31,3.93,0.312c2.623-2.239,5.973-3.474,9.43-3.474c8.014,0,14.533,6.521,14.533,14.533S69.422,67.48,61.408,67.48     z"/>\r\n                                    <g>\r\n                                        <path fill="#009FE3" d="M91.904,36.411c0-10.354-8.424-18.773-18.777-18.773c-5.336,0-10.301,2.225-13.822,6.068      c1.295,1.173,2.498,2.453,3.584,3.846c2.557-2.96,6.254-4.684,10.238-4.686c7.469,0,13.547,6.076,13.547,13.545      c0,3.025-0.99,5.854-2.705,8.141c0.727,1.932,1.217,3.977,1.42,6.098C89.445,47.166,91.904,42.034,91.904,36.411z"/>\r\n                                        <g>\r\n                                            <path fill="#009FE3" d="M91.945,63.203l-3.939-6.819c-0.549-0.948-1.574-1.442-2.604-1.377c-0.174,2.034-0.6,3.998-1.248,5.856       l2.959,5.125c0.771,1.336,2.477,1.791,3.809,1.021C92.258,66.24,92.715,64.537,91.945,63.203z"/>\r\n                                        </g>\r\n                                    </g>\r\n                                </g>\r\n                                <path fill="#009FE3" d="M61.691,32.845c-4.791-8.121-13.523-13.148-22.98-13.148c-12.729,0-23.527,8.83-26.107,21.16    C6.035,43.043,1.279,49.235,1.279,56.532c0,9.111,7.414,16.523,16.525,16.523c3.291,0,6.416-0.945,9.121-2.742    c3.646,1.797,7.689,2.742,11.785,2.742c4.252,0,8.453-1.031,12.207-2.966c3.148,1.938,6.73,2.966,10.492,2.966    c11.088,0,20.107-9.021,20.107-20.109C81.516,41.952,72.65,32.998,61.691,32.845z M61.408,67.48c-3.246,0-6.316-1.045-8.879-3.025    c-1.219-0.939-2.971-0.716-3.91,0.505c-0.018,0.021-0.027,0.047-0.043,0.067c-3.02,1.604-6.422,2.453-9.867,2.453    c-3.654,0-7.254-0.947-10.41-2.742c-0.793-0.449-1.711-0.459-2.488-0.121c-0.445,0.074-0.883,0.244-1.264,0.541    c-1.939,1.521-4.271,2.322-6.744,2.322c-6.039,0-10.951-4.912-10.951-10.949c0-6.041,4.914-10.953,10.951-10.953    c3.047,0,5.98,1.285,8.047,3.523c1.045,1.133,2.811,1.203,3.941,0.155c1.131-1.043,1.199-2.808,0.154-3.938    c-2.939-3.187-7.043-5.088-11.354-5.295c2.717-8.697,10.748-14.756,20.115-14.756c6.689,0,12.93,3.178,16.885,8.442    c-2.639,0.799-5.109,2.116-7.234,3.931c-1.172,1-1.311,2.76-0.311,3.932c1,1.17,2.76,1.31,3.93,0.312    c2.623-2.239,5.973-3.474,9.43-3.474c8.014,0,14.533,6.521,14.533,14.533S69.422,67.48,61.408,67.48z"/>\r\n                            </g>\r\n                            <path fill="#009FE3" d="M39.525,89.822c0,3.086-2.5,5.584-5.582,5.584c-3.084,0-5.584-2.498-5.584-5.584   c0-3.082,5.584-11.406,5.584-11.406S39.525,86.74,39.525,89.822z"/>\r\n                            <path fill="#009FE3" d="M54.332,89.822c0,3.086-2.5,5.584-5.582,5.584c-3.084,0-5.584-2.498-5.584-5.584   c0-3.082,5.584-11.406,5.584-11.406S54.332,86.74,54.332,89.822z"/>\r\n                        </g>\r\n                        </svg>',dalei='<svg x="0px" y="0px" width="110px" height="76px" viewBox="0 0 110 96" enable-background="new 0 0 110 96" xml:space="preserve">\r\n                <g>\r\n                    <g>\r\n                        <path fill="#009FE3" d="M75.294,27.418c-4.791-8.121-13.525-13.146-22.98-13.146c-12.729,0-23.527,8.83-26.107,21.16    c-6.57,2.187-11.324,8.379-11.324,15.674c0,9.11,7.414,16.524,16.525,16.524c3.291,0,6.416-0.945,9.119-2.744    c0.365,0.181,0.738,0.347,1.111,0.508c0.352-0.805,1.945-5.232,1.945-5.232c-0.57-0.261-1.137-0.537-1.682-0.849    c-0.795-0.449-1.51-0.694-2.453-0.248c-0.445,0.073-0.918,0.37-1.301,0.67c-1.938,1.519-4.271,2.319-6.742,2.319    c-6.037,0-10.949-4.912-10.949-10.948c0-6.039,4.912-10.951,10.949-10.951c3.047,0,5.979,1.283,8.047,3.523    c1.047,1.131,2.811,1.201,3.939,0.156s1.199-2.808,0.156-3.938c-2.943-3.187-7.045-5.088-11.354-5.293    c2.717-8.699,10.746-14.756,20.115-14.756c6.689,0,12.93,3.176,16.887,8.441c-2.641,0.801-5.109,2.118-7.234,3.934    c-1.172,0.998-1.311,2.758-0.311,3.928c0.996,1.172,2.758,1.312,3.93,0.312c2.623-2.24,5.973-3.474,9.43-3.474    c8.014,0,14.535,6.521,14.535,14.535c0,8.015-6.521,14.532-14.535,14.532c-2.246,0-4.402-0.51-6.369-1.475    c-0.469,1.172-2.086,5.172-2.086,5.172c2.625,1.228,5.48,1.879,8.455,1.879c11.088,0,20.107-9.021,20.107-20.108    C95.118,36.528,86.251,27.571,75.294,27.418z"/>\r\n                    </g>\r\n                    <path fill="#009FE3" d="M56.185,45.789c0.055-0.529-0.09-0.57-0.32-0.093l-9.371,19.437c-0.23,0.479,0.016,0.871,0.545,0.871h6.012   c0.529,0,0.936,0.432,0.896,0.961l-1,14.333c-0.035,0.529,0.129,0.576,0.367,0.103l10.475-20.774c0.24-0.476,0-0.869-0.529-0.881   l-7.525-0.149c-0.527-0.011-0.92-0.451-0.863-0.979L56.185,45.789z"/>\r\n                </g>\r\n                </svg>',dalei_baoyu='<svg x="0px" y="0px" width="110px" height="76px" viewBox="0 0 110 96" enable-background="new 0 0 110 96" xml:space="preserve">\r\n                        <g>\r\n                            <g>\r\n                                <g>\r\n                                    <path fill="#009FE3" d="M75.293,20.978C70.502,12.855,61.768,7.832,52.311,7.832c-12.727,0-23.523,8.83-26.104,21.159     c-6.57,2.187-11.326,8.38-11.326,15.675c0,9.11,7.414,16.524,16.525,16.524c3.289,0,6.416-0.944,9.119-2.744     c0.365,0.181,0.738,0.345,1.111,0.509c0.35-0.806,1.947-5.234,1.947-5.234c-0.572-0.26-1.137-0.535-1.684-0.848     c-0.795-0.449-1.508-0.695-2.453-0.248c-0.445,0.073-0.918,0.373-1.301,0.668c-1.938,1.52-4.27,2.319-6.742,2.319     c-6.037,0-10.949-4.909-10.949-10.946c0-6.039,4.912-10.953,10.949-10.953c3.047,0,5.979,1.285,8.049,3.524     c1.047,1.132,2.809,1.201,3.938,0.156s1.201-2.809,0.156-3.938c-2.939-3.187-7.043-5.089-11.354-5.295     c2.719-8.697,10.748-14.755,20.115-14.755c6.691,0,12.932,3.175,16.887,8.441c-2.641,0.799-5.109,2.119-7.234,3.932     c-1.17,1-1.311,2.759-0.311,3.929c1,1.174,2.76,1.311,3.932,0.313c2.623-2.24,5.971-3.473,9.426-3.473     c8.016,0,14.535,6.521,14.535,14.535c0,8.012-6.521,14.53-14.535,14.53c-2.244,0-4.4-0.511-6.367-1.476     c-0.471,1.174-2.086,5.174-2.086,5.174c2.625,1.229,5.482,1.88,8.453,1.88c11.09,0,20.111-9.021,20.111-20.108     C95.119,30.088,86.252,21.131,75.293,20.978z"/>\r\n                                </g>\r\n                                <path fill="#009FE3" d="M56.182,39.349c0.055-0.529-0.09-0.57-0.32-0.092L46.49,58.693c-0.229,0.479,0.018,0.869,0.547,0.869    h6.012c0.531,0,0.936,0.435,0.896,0.961l-1,14.332c-0.035,0.529,0.129,0.576,0.365,0.104l10.479-20.774    c0.236-0.476,0-0.869-0.529-0.881l-7.525-0.15c-0.529-0.01-0.92-0.45-0.865-0.979L56.182,39.349z"/>\r\n                            </g>\r\n                            <path fill="#009FE3" d="M69.432,88.168c-0.484,0-0.979-0.127-1.426-0.396c-1.322-0.786-1.754-2.495-0.965-3.821l5.5-9.219   c0.787-1.322,2.502-1.753,3.82-0.968c1.322,0.793,1.756,2.502,0.967,3.824l-5.502,9.219C71.307,87.68,70.383,88.168,69.432,88.168z   "/>\r\n                            <path fill="#009FE3" d="M40.76,88.168c-0.486,0-0.98-0.127-1.426-0.396c-1.322-0.786-1.756-2.495-0.967-3.821l5.5-9.219   c0.789-1.322,2.502-1.753,3.822-0.968c1.322,0.793,1.756,2.502,0.967,3.824l-5.502,9.219C42.635,87.68,41.709,88.168,40.76,88.168z   "/>\r\n                            <path fill="#009FE3" d="M26.424,88.168c-0.486,0-0.979-0.127-1.426-0.396c-1.322-0.786-1.754-2.495-0.967-3.821l5.502-9.219   c0.789-1.322,2.502-1.753,3.82-0.968c1.322,0.793,1.756,2.502,0.967,3.824l-5.5,9.219C28.299,87.68,27.375,88.168,26.424,88.168z"/>\r\n                            <path fill="#009FE3" d="M55.096,88.168c-0.486,0-0.979-0.127-1.426-0.396c-1.322-0.786-1.754-2.495-0.967-3.821l5.5-9.219   c0.789-1.322,2.504-1.753,3.822-0.968c1.322,0.793,1.754,2.502,0.967,3.824l-5.502,9.219C56.971,87.68,56.047,88.168,55.096,88.168   z"/>\r\n                        </g>\r\n                        </svg>',daxue='<svg x="0px" y="0px" width="110px" height="76px" viewBox="0 0 110 96" enable-background="new 0 0 110 96" xml:space="preserve">\r\n                <g>\r\n                    <path fill="#009FE3" d="M75.294,18.086C70.503,9.963,61.771,4.94,52.313,4.94c-12.729,0-23.525,8.828-26.107,21.158   c-6.568,2.187-11.324,8.381-11.324,15.676c0,9.11,7.414,16.524,16.525,16.524c3.291,0,6.416-0.946,9.119-2.745   c3.648,1.797,7.689,2.745,11.787,2.745c4.25,0,8.451-1.032,12.205-2.967c3.146,1.938,6.73,2.967,10.492,2.967   c11.088,0,20.107-9.022,20.107-20.11C95.12,27.196,86.251,18.237,75.294,18.086z M75.011,52.721c-3.248,0-6.316-1.048-8.877-3.022   c-1.219-0.941-2.971-0.716-3.91,0.5c-0.02,0.022-0.027,0.049-0.045,0.073c-3.021,1.599-6.42,2.449-9.865,2.449   c-3.654,0-7.254-0.944-10.41-2.742c-0.795-0.45-1.715-0.461-2.492-0.123c-0.445,0.074-0.881,0.248-1.26,0.546   c-1.939,1.518-4.271,2.319-6.744,2.319c-6.037,0-10.951-4.912-10.951-10.946c0-6.041,4.914-10.955,10.951-10.955   c3.047,0,5.98,1.284,8.047,3.526c1.045,1.129,2.809,1.198,3.939,0.153c1.129-1.045,1.201-2.812,0.156-3.938   c-2.941-3.185-7.043-5.088-11.355-5.295c2.717-8.696,10.748-14.754,20.117-14.754c6.689,0,12.93,3.176,16.885,8.44   c-2.639,0.799-5.111,2.119-7.234,3.932c-1.172,1-1.311,2.763-0.311,3.932c1,1.17,2.76,1.313,3.93,0.313   c2.623-2.241,5.973-3.477,9.428-3.477c8.016,0,14.533,6.521,14.533,14.536C89.544,46.204,83.026,52.721,75.011,52.721z"/>\r\n                    <g>\r\n                        <g>\r\n                            <path fill="#009FE3" d="M45.401,65.618c0.529,0.918,0.217,2.09-0.701,2.621l-10.115,5.84c-0.918,0.528-2.09,0.215-2.617-0.703     c-0.529-0.918-0.217-2.088,0.699-2.619l10.117-5.84C43.7,64.387,44.872,64.702,45.401,65.618z"/>\r\n                        </g>\r\n                        <g>\r\n                            <path fill="#009FE3" d="M45.401,73.375c-0.529,0.918-1.701,1.232-2.619,0.703l-10.115-5.84c-0.918-0.531-1.229-1.703-0.701-2.621     c0.529-0.916,1.701-1.229,2.617-0.701l10.117,5.84C45.616,71.288,45.931,72.457,45.401,73.375z"/>\r\n                        </g>\r\n                        <g>\r\n                            <path fill="#009FE3" d="M38.683,77.255c-1.059,0-1.916-0.856-1.916-1.92v-11.68c0-1.059,0.857-1.918,1.916-1.918     s1.918,0.859,1.918,1.918v11.68C40.601,76.398,39.741,77.255,38.683,77.255z"/>\r\n                        </g>\r\n                    </g>\r\n                    <g>\r\n                        <g>\r\n                            <path fill="#009FE3" d="M76.196,65.618c0.529,0.918,0.215,2.09-0.701,2.621l-10.115,5.84c-0.918,0.528-2.09,0.215-2.619-0.701     c-0.529-0.92-0.215-2.09,0.701-2.621l10.115-5.84C74.495,64.387,75.667,64.702,76.196,65.618z"/>\r\n                        </g>\r\n                        <g>\r\n                            <path fill="#009FE3" d="M76.196,73.375c-0.529,0.918-1.701,1.232-2.617,0.703l-10.117-5.84c-0.916-0.531-1.23-1.703-0.701-2.621     c0.529-0.916,1.701-1.229,2.619-0.701l10.115,5.84C76.411,71.288,76.726,72.457,76.196,73.375z"/>\r\n                        </g>\r\n                        <g>\r\n                            <path fill="#009FE3" d="M69.479,77.255c-1.061,0-1.916-0.856-1.916-1.92v-11.68c0-1.059,0.855-1.918,1.916-1.918     c1.059,0,1.916,0.859,1.916,1.918v11.68C71.396,76.398,70.538,77.255,69.479,77.255z"/>\r\n                        </g>\r\n                    </g>\r\n                    <g>\r\n                        <g>\r\n                            <path fill="#009FE3" d="M60.798,79.425c0.529,0.916,0.217,2.089-0.701,2.615l-10.115,5.842c-0.916,0.527-2.088,0.218-2.619-0.7     c-0.529-0.916-0.215-2.091,0.703-2.619l10.115-5.839C59.097,78.192,60.269,78.505,60.798,79.425z"/>\r\n                        </g>\r\n                        <g>\r\n                            <path fill="#009FE3" d="M60.798,87.182c-0.527,0.918-1.701,1.229-2.617,0.7l-10.115-5.84c-0.918-0.528-1.232-1.701-0.703-2.617     c0.531-0.919,1.703-1.233,2.619-0.702l10.117,5.839C61.013,85.091,61.327,86.266,60.798,87.182z"/>\r\n                        </g>\r\n                        <g>\r\n                            <path fill="#009FE3" d="M54.079,91.06c-1.059,0-1.916-0.857-1.916-1.916V77.462c0-1.059,0.857-1.916,1.916-1.916     c1.061,0,1.918,0.857,1.918,1.916v11.682C55.997,90.202,55.138,91.06,54.079,91.06z"/>\r\n                        </g>\r\n                    </g>\r\n                </g>\r\n                </svg>',yujiaxue='<svg x="0px" y="0px" width="110px" height="76px" viewBox="0 0 110 96" enable-background="new 0 0 110 96" xml:space="preserve">\r\n                    <g>\r\n                        <path fill="#009FE3" d="M60.281,85.717c0,3.082-2.5,5.582-5.582,5.582c-3.084,0-5.584-2.5-5.584-5.582s5.584-11.406,5.584-11.406   S60.281,82.635,60.281,85.717z"/>\r\n                        <path fill="#009FE3" d="M75.291,17.851C70.5,9.728,61.766,4.701,52.311,4.701c-12.727,0-23.525,8.832-26.107,21.16   c-6.568,2.187-11.322,8.381-11.322,15.674c0,9.115,7.414,16.525,16.525,16.525c3.289,0,6.414-0.944,9.117-2.74   c3.648,1.796,7.691,2.74,11.787,2.74c4.252,0,8.451-1.028,12.205-2.964c3.15,1.939,6.734,2.964,10.494,2.964   c11.088,0,20.109-9.021,20.109-20.107C95.117,26.961,86.248,18.004,75.291,17.851z M75.006,52.488   c-3.246,0-6.316-1.048-8.877-3.025c-1.219-0.94-2.969-0.717-3.91,0.5c-0.018,0.022-0.029,0.049-0.045,0.074   c-3.02,1.598-6.42,2.451-9.865,2.451c-3.656,0-7.256-0.949-10.412-2.742c-0.795-0.453-1.713-0.463-2.492-0.123   c-0.441,0.074-0.879,0.246-1.258,0.543c-1.939,1.521-4.27,2.322-6.744,2.322c-6.037,0-10.951-4.913-10.951-10.954   c0-6.037,4.914-10.948,10.951-10.948c3.047,0,5.98,1.284,8.049,3.522c1.043,1.131,2.809,1.201,3.939,0.156   c1.131-1.045,1.201-2.81,0.158-3.938c-2.941-3.184-7.043-5.086-11.355-5.297c2.717-8.694,10.746-14.752,20.117-14.752   c6.689,0,12.928,3.176,16.883,8.441c-2.639,0.799-5.109,2.119-7.232,3.932c-1.17,1.002-1.311,2.76-0.311,3.928   c1,1.175,2.76,1.313,3.93,0.313c2.623-2.24,5.971-3.473,9.428-3.473c8.014,0,14.535,6.521,14.535,14.534   C89.543,45.969,83.021,52.488,75.006,52.488z"/>\r\n                        <g>\r\n                            <g>\r\n                                <path fill="#009FE3" d="M45.396,65.385c0.531,0.916,0.215,2.088-0.701,2.617L34.58,73.844c-0.918,0.529-2.09,0.213-2.619-0.7     c-0.529-0.918-0.215-2.091,0.701-2.621l10.115-5.838C43.695,64.154,44.869,64.469,45.396,65.385z"/>\r\n                            </g>\r\n                            <g>\r\n                                <path fill="#009FE3" d="M45.396,73.142c-0.529,0.913-1.701,1.229-2.619,0.7L32.662,68c-0.916-0.529-1.23-1.701-0.701-2.617     s1.701-1.229,2.617-0.701l10.117,5.839C45.611,71.053,45.928,72.223,45.396,73.142z"/>\r\n                            </g>\r\n                            <g>\r\n                                <path fill="#009FE3" d="M38.68,77.021c-1.061,0-1.918-0.858-1.918-1.918V63.42c0-1.057,0.857-1.918,1.918-1.918     c1.059,0,1.916,0.861,1.916,1.918v11.683C40.596,76.162,39.738,77.021,38.68,77.021z"/>\r\n                            </g>\r\n                        </g>\r\n                        <g>\r\n                            <g>\r\n                                <path fill="#009FE3" d="M76.191,65.383c0.531,0.918,0.217,2.09-0.699,2.619l-10.117,5.842c-0.918,0.529-2.09,0.213-2.619-0.7     c-0.529-0.918-0.215-2.091,0.701-2.621l10.117-5.838C74.492,64.154,75.666,64.469,76.191,65.383z"/>\r\n                            </g>\r\n                            <g>\r\n                                <path fill="#009FE3" d="M76.193,73.142c-0.529,0.913-1.701,1.229-2.617,0.7L63.459,68c-0.918-0.529-1.23-1.701-0.703-2.617     c0.529-0.916,1.701-1.229,2.619-0.701l10.117,5.839C76.408,71.053,76.723,72.223,76.193,73.142z"/>\r\n                            </g>\r\n                            <g>\r\n                                <path fill="#009FE3" d="M69.475,77.021c-1.061,0-1.916-0.858-1.916-1.918V63.42c0-1.057,0.855-1.918,1.916-1.918     s1.918,0.861,1.918,1.918v11.683C71.393,76.162,70.535,77.021,69.475,77.021z"/>\r\n                            </g>\r\n                        </g>\r\n                    </g>\r\n                    </svg>',leizhenyu='<svg x="0px" y="0px" width="110px" height="76px" viewBox="0 0 110 96" enable-background="new 0 0 110 96" xml:space="preserve">\r\n                <g>\r\n                    <path fill="#009FE3" d="M44.017,83.052c0,3.084-2.5,5.582-5.582,5.582c-3.084,0-5.582-2.498-5.582-5.582   c0-3.085,5.582-11.407,5.582-11.407S44.017,79.967,44.017,83.052z"/>\r\n                    <path fill="#009FE3" d="M61.212,83.052c0,3.084-2.5,5.582-5.584,5.582c-3.082,0-5.582-2.498-5.582-5.582   c0-3.085,5.582-11.407,5.582-11.407S61.212,79.967,61.212,83.052z"/>\r\n                    <path fill="#009FE3" d="M78.733,83.052c0,3.084-2.498,5.582-5.58,5.582c-3.084,0-5.584-2.498-5.584-5.582   c0-3.085,5.584-11.407,5.584-11.407S78.733,79.967,78.733,83.052z"/>\r\n                    <g>\r\n                        <g>\r\n                            <path fill="#009FE3" d="M48.616,38.884c0.053-0.528-0.09-0.569-0.32-0.091l-9.371,19.436c-0.23,0.479,0.016,0.869,0.545,0.869     h6.012c0.531,0,0.936,0.435,0.896,0.963l-1,14.336c-0.035,0.528,0.129,0.573,0.367,0.102l10.477-20.775     c0.238-0.474,0-0.869-0.529-0.881l-7.523-0.15c-0.529-0.011-0.92-0.449-0.865-0.979L48.616,38.884z"/>\r\n                        </g>\r\n                    </g>\r\n                    <g>\r\n                        <path fill="#009FE3" d="M48.616,38.884c0.053-0.528-0.09-0.569-0.32-0.091l-9.371,19.436c-0.23,0.479,0.016,0.869,0.545,0.869    h6.012c0.531,0,0.936,0.435,0.896,0.963l-1,14.336c-0.035,0.528,0.129,0.573,0.367,0.102l10.477-20.775    c0.238-0.474,0-0.869-0.529-0.881l-7.523-0.15c-0.529-0.011-0.92-0.449-0.865-0.979L48.616,38.884z"/>\r\n                    </g>\r\n                    <g>\r\n                        <g>\r\n                            <path fill="#009FE3" d="M68.927,38.884c0.055-0.528-0.092-0.569-0.32-0.091l-9.373,19.436c-0.23,0.479,0.016,0.869,0.545,0.869     h6.012c0.531,0,0.936,0.435,0.898,0.963l-1,14.336c-0.037,0.528,0.127,0.573,0.367,0.102L76.53,53.723     c0.238-0.474,0-0.869-0.531-0.881l-7.523-0.15c-0.531-0.011-0.92-0.449-0.865-0.979L68.927,38.884z"/>\r\n                        </g>\r\n                        <g>\r\n                            <path fill="#009FE3" d="M95.118,40.618c0-10.994-8.869-19.951-19.826-20.104c-4.791-8.123-13.523-13.148-22.98-13.148     c-12.727,0-23.523,8.834-26.105,21.157c-6.57,2.189-11.324,8.386-11.324,15.679c0,9.11,7.414,16.521,16.523,16.521     c1.021,0,2.023-0.098,3.008-0.273c-0.52-1.365-0.461-2.908,0.207-4.295l0.863-1.793c-1.283,0.514-2.654,0.788-4.078,0.788     c-6.039,0-10.949-4.911-10.949-10.948c0-6.041,4.91-10.953,10.949-10.953c3.045,0,5.98,1.285,8.049,3.524     c1.043,1.132,2.809,1.199,3.938,0.154c1.131-1.045,1.201-2.807,0.156-3.938c-2.941-3.184-7.043-5.086-11.354-5.293     c2.717-8.699,10.746-14.754,20.117-14.754c6.689,0,12.928,3.176,16.885,8.442c-2.641,0.797-5.111,2.115-7.236,3.928     c-1.17,1.002-1.309,2.761-0.309,3.933c1,1.17,2.76,1.311,3.93,0.311c2.623-2.242,5.973-3.475,9.428-3.475     c8.016,0,14.533,6.521,14.533,14.537c0,5.723-3.336,10.674-8.156,13.041c-0.041,0.752-0.23,1.506-0.588,2.213l-2.289,4.543     C87.935,58.754,95.118,50.512,95.118,40.618z"/>\r\n                        </g>\r\n                    </g>\r\n                    <g>\r\n                        <path fill="#009FE3" d="M68.927,38.884c0.055-0.528-0.092-0.569-0.32-0.091l-9.373,19.436c-0.23,0.479,0.016,0.869,0.545,0.869    h6.012c0.531,0,0.936,0.435,0.898,0.963l-1,14.336c-0.037,0.528,0.127,0.573,0.367,0.102L76.53,53.723    c0.238-0.474,0-0.869-0.531-0.881l-7.523-0.15c-0.531-0.011-0.92-0.449-0.865-0.979L68.927,38.884z"/>\r\n                    </g>\r\n                </g>\r\n                </svg>',ye_yin='<svg x="0px" y="0px" width="110px" height="76px" viewBox="0 0 110 96" enable-background="new 0 0 110 96" xml:space="preserve">\r\n                <g>\r\n                    <path fill="#009FE3" d="M77.502,43.357c-5.789-9.226-3.951-21.271,3.67-29.865c-2.723,0.771-5.41,1.939-7.963,3.545   C65.748,21.723,61.068,29,59.826,36.529c-4.893-4.662-11.439-7.381-18.389-7.381c-12.727,0-23.525,8.832-26.105,21.161   C8.764,52.496,4.008,58.689,4.008,65.982c0,9.109,7.414,16.525,16.525,16.525c3.287,0,6.416-0.949,9.117-2.744   c3.648,1.793,7.691,2.744,11.787,2.744c4.252,0,8.451-1.031,12.205-2.967c3.15,1.938,6.734,2.967,10.492,2.967   c10.787,0,19.611-8.535,20.088-19.205c5.082-0.135,10.33-1.639,15.113-4.643c2.555-1.604,4.775-3.51,6.656-5.631   C94.941,56.162,83.291,52.578,77.502,43.357z M64.137,76.932c-3.246,0-6.314-1.047-8.877-3.021c-1.219-0.943-2.969-0.717-3.91,0.5   c-0.018,0.021-0.025,0.049-0.043,0.068c-3.02,1.604-6.422,2.453-9.867,2.453c-3.654,0-7.256-0.945-10.41-2.74   c-0.795-0.451-1.713-0.459-2.488-0.123c-0.445,0.072-0.881,0.248-1.262,0.545c-1.941,1.518-4.273,2.318-6.744,2.318   c-6.037,0-10.949-4.91-10.949-10.949c0-6.037,4.912-10.949,10.949-10.949c3.047,0,5.979,1.283,8.049,3.521   c1.045,1.129,2.809,1.201,3.938,0.156s1.201-2.809,0.156-3.939c-2.943-3.184-7.045-5.086-11.354-5.297   c2.717-8.693,10.746-14.754,20.115-14.754c6.691,0,12.93,3.177,16.887,8.441c-2.639,0.799-5.109,2.117-7.234,3.932   c-1.17,1-1.313,2.758-0.313,3.93c0.998,1.172,2.758,1.311,3.932,0.313c2.625-2.24,5.973-3.475,9.428-3.475   c8.016,0,14.535,6.521,14.535,14.534C78.672,70.412,72.15,76.932,64.137,76.932z"/>\r\n                    <polygon fill="#009FE3" points="91.719,25.223 95.803,23.078 95.021,27.626 98.326,30.843 93.762,31.509 91.719,35.648    89.676,31.509 85.109,30.843 88.412,27.626 87.635,23.078  "/>\r\n                    <polygon fill="#009FE3" points="52.994,19.479 55.869,17.97 55.32,21.171 57.648,23.441 54.432,23.908 52.994,26.824    51.555,23.908 48.338,23.441 50.664,21.171 50.117,17.97  "/>\r\n                </g>\r\n                </svg>',ye_qing='<svg x="0px" y="0px" width="110px" height="76px" viewBox="0 0 110 96" enable-background="new 0 0 110 96" xml:space="preserve">\r\n                    <g>\r\n                        <polygon fill="#009FE3" points="64.13,36.086 68.216,33.936 67.435,38.487 70.739,41.709 66.173,42.369 64.13,46.507    62.087,42.369 57.522,41.709 60.825,38.487 60.046,33.936  "/>\r\n                        <polygon fill="#009FE3" points="68.909,51.216 71.786,49.707 71.237,52.91 73.565,55.179 70.347,55.645 68.909,58.559    67.472,55.645 64.253,55.179 66.581,52.91 66.032,49.707  "/>\r\n                        <g>\r\n                            <path fill="#009FE3" d="M61.856,77.953c-0.002,0-0.002,0-0.002,0c-11.102-0.002-21.279-5.582-27.236-14.936    c-4.629-7.266-6.15-15.896-4.283-24.311c1.865-8.414,6.896-15.594,14.162-20.224c0.977-0.623,2.24-0.575,3.17,0.119    c0.928,0.697,1.328,1.896,1.004,3.011c-0.043,0.15-4.369,15.786,4.723,29.371c8.965,13.393,24.672,16.801,24.828,16.83    c1.109,0.23,1.973,1.111,2.176,2.229c0.203,1.115-0.285,2.246-1.242,2.854C73.962,76.203,67.981,77.953,61.856,77.953z     M42.101,27.705c-3.113,3.405-5.299,7.582-6.324,12.209c-1.543,6.959-0.285,14.102,3.545,20.109    c4.926,7.734,13.35,12.352,22.533,12.352c0,0,0,0,0.002,0c2.838,0,5.639-0.453,8.309-1.332    c-6.154-2.521-15.107-7.549-21.402-16.953C42.384,44.563,41.64,34.421,42.101,27.705z"/>\r\n                        </g>\r\n                    </g>\r\n                    </svg>';

return ModalWeather.prototype.renderModal=function(){function formatTemp(temprt){return temprt.substring(temprt.indexOf("")+1)}function getWeatherPic(weathType,type){var resultPic;switch(weathType){case"":resultPic=yin,2==type&&(resultPic=ye_yin);break;case"":resultPic=dayu;break;case"":resultPic=baoyu;break;case"":resultPic=duoyun,2==type&&(resultPic=ye_yin);break;case"":resultPic=xiaoyu;break;case"":resultPic=qing_duoyun;break;case"":resultPic=qing,2==type&&(resultPic=ye_qing);break;case"":resultPic=duoyun_zhenyu;break;case"":resultPic=dalei;break;case"":resultPic=dalei_baoyu;break;case"":resultPic=daxue;break;case"":resultPic=yujiaxue;break;case"":resultPic=leizhenyu;break;default:resultPic=qing}return resultPic}function getWeatherStatus(){WebAPI.get("/dashboard/get_weather/1").done(function(result){var rslt=JSON.parse(result);if(rslt){var tempdata=rslt.data,weatherCrtCt="",weatherCrtPic="",tempday=tempdata.forecast[0].date,day=tempday.substring(tempday.indexOf("")),crtTemp=tempdata.wendu,crtDate=new Date,_date=crtDate.getMonth()+1+""+crtDate.getDate()+"",today=getWeatherPic(tempdata.forecast[0].type),todaytTemp=formatTemp(tempdata.forecast[0].high),tonight=getWeatherPic(tempdata.forecast[0].type,2),tonightTemp=formatTemp(tempdata.forecast[0].low);weatherCrtCt='<dl class="weathCrtDayCt" style="margin-left: 4%;"><dt class="weathCrtDay dtTop">'+day+'</dt><dd class="weathCrtTemprt">'+crtTemp+'</dd><dd class="ddBottom weatherDate"> '+_date+"</dd></dl>",weatherCrtPic='<dl class="weathCrtDayPic" style="left:42%;">\r\n                                        <dt class="weathCrtToday dtTop"> </dt>\r\n                                        <dd class="temprtIconBig">'+today+'</dd>\r\n                                        <dd class="ddBottom">'+todaytTemp+'</dd>\r\n                                    </dl>\r\n                                    <dl class="weathCrtDayPic" style="left:66%;">\r\n                                        <dt class="weathCrtToday dtTop"> </dt>\r\n                                        <dd class="temprtIconBig">'+tonight+'</dd>\r\n                                        <dd class="ddBottom">'+tonightTemp+"</dd>\r\n                                    </dl>";var weatherStatus="";for(var i in tempdata.forecast)if(0!=i){var _day=tempdata.forecast[i].date.substring(tempdata.forecast[i].date.indexOf("")+1),_tempArange=formatTemp(tempdata.forecast[i].high)+"/"+formatTemp(tempdata.forecast[i].low),temp='<dl class="weathFuture">\r\n                                        <dt>'+_day+"</dt>\r\n                                        <dd>"+qing+"</dd>\r\n                                        <dd> "+_tempArange+"</dd>\r\n                                    </dl>";weatherStatus+=temp}}if(_this.isFirstRender){if(_this.tempList=[],_this.xData=[],_this.chart=void 0,rslt.tempHistory.length>0){for(var i=rslt.tempHistory.length-1;i>0;i--)if(_this.xData.length<12){var time=rslt.tempHistory[i].time.replace(" GMT","");time=new Date(time).getHours(),time!=_this.xData[_this.xData.length-1]&&(_this.xData.unshift(parseInt(time)),_this.tempList.unshift(rslt.tempHistory[i].temp))}for(;_this.xData.length<12;){var xMax=_this.xData[_this.xData.length-1];(new Date).getHours()>xMax&&_this.tempList.push(crtTemp),_this.xData.push(xMax>23?0:_this.xData[_this.xData.length-1]+1)}_this.isFirstRender=!0}else{_this.tempList.push(crtTemp);for(var xDataFirst=(new Date).getHours(),tempXDataLen=_this.xData.length,i=0;12-tempXDataLen>i;i++)23>xDataFirst?_this.xData.push(xDataFirst++):(_this.xData.push(xDataFirst),xDataFirst=0);_this.isFirstRender=!1}crtContainer.innerHTML=getDaysWeather(weatherCrtCt,weatherCrtPic,weatherStatus),_this.optionChart={title:{text:I18n.resource.dashboard.modalWeather.REAL_TIME_TEMPERATURE,y:2,x:38,textStyle:{color:"#5c5e62",fontFamily:"Microsoft YaHei",fontSize:12}},tooltip:{trigger:"axis"},backgroundColor:"#f7f9fa",calculable:!1,color:["#1abc9c"],xAxis:[{type:"category",boundaryGap:!0,splitLine:{show:!1},axisTick:{show:!1},data:function(xData){for(var arr=[],i=0;i<xData.length;i++)arr.push(xData[i]<10?"0"+xData[i]+":00":xData[i]+":00");return arr}(_this.xData)}],yAxis:[{type:"value",splitNumber:5,scale:!0}],grid:{height:"56%",width:"86%",y:24,x:60},series:[{type:"line",symbol:"emptyCircle",smooth:!0,data:_this.tempList}]},_this.chart=echarts.init(document.getElementById("modalWeatherChart")).setOption(_this.optionChart)}else{$(".weatherWrap").html("<div>"+weatherCrtCt+weatherCrtPic+'</div><div style="width: 50%;right:0;position: absolute;top:0">'+weatherStatus+"</div>");var nowTime=(new Date).getHours();if(_this.xData[_this.tempList.length-1]<nowTime){if(_this.chart.getSeries()[0].data.length>11){var xDataLabel=_this.xData[_this.xData.length-1]+1;xDataLabel>23&&(xDataLabel=0),_this.xData.splice(0,1),_this.xData.push(xDataLabel);var xDataLabelFmt=xDataLabel+":00";10>xDataLabel&&(xDataLabelFmt="0"+xDataLabelFmt),_this.chart.addData([[0,rslt.data.wendu,!1,!1,xDataLabelFmt]]),_this.tempList.splice(0,1)}else _this.chart.addData([[0,rslt.data.wendu,!1,!0]]);_this.tempList.push(rslt.data.wendu)}}})}function getDaysWeather(weatherCrtCt,weatherCrtPic,weatherStatus){var str='\r\n                                                <style>\r\n                                                 .weatherWrap{\r\n                                                    background: #fff;border-radius: 4px;height: 100%;position:relative;\r\n                                                }\r\n                                                .weatherWrap dl{\r\n                                                    display: inline-block;font-family: "Microsoft YaHei";text-align: center;height: 100%;\r\n                                                }\r\n                                                .weathCrtDayCt{\r\n                                                    width: 33%;position: absolute;top: 0;\r\n                                                }\r\n                                                .weathCrtDayCt *{\r\n                                                    position: absolute;left: 23%;\r\n                                                }\r\n                                                @media screen and (max-width: 1920px) {\r\n                                                    .weathFuture{width: 22%;margin-top: 14.5%;}\r\n                                                    .weathCrtDay, .weathCrtToday{margin-top: 4%;}\r\n                                                    .weathCrtDayPic dd svg {\r\n                                                        width: 100%;height: 100%;\r\n                                                    }\r\n                                                    .temprtIconBig{position: relative;top: 24%;left: -30%;}\r\n                                                }\r\n                                                @media screen and (max-width: 1366px) {\r\n                                                    .weathFuture{width: 24%;margin-top: 11%; }\r\n                                                    .temprtIconBig{position: relative;top: 24%;  left: -24%;}\r\n                                                }\r\n                                                @media screen and (max-height: 768px) {\r\n                                                    .weathCrtTemprt{top: 30% !important;left: 20% !important; font-size: 3rem !important; transform: scaley(1.2) !important;}\r\n                                                }\r\n                                                .weathCrtDayCt, .weatherDate{\r\n                                                    color: #009fe3;font-weight: 800;font-size: 18px;font-family: "Microsoft YaHei";\r\n                                                }\r\n                                                .weatherDate{\r\n                                                      left: 23% !important;\r\n                                                }\r\n                                                .weathCrtTemprt{\r\n                                                    font-size: 3.5rem;color: #009fe3;  top: 33%;left: 20%;  transform: scaley(1.3);\r\n                                                }\r\n                                                .weathCrtToday{\r\n                                                    color: #5c5e62;font-size: 18px;font-weight: 300;\r\n                                                }\r\n                                                .weathFuture dd svg g path{\r\n                                                    fill: #626262;\r\n                                                }\r\n                                                .weathFuture dd svg {\r\n                                                    width: 70%;height: 100%\r\n                                                }\r\n                                                .weathFuture *{\r\n                                                    color: #5c5e62;font-size: 12px;font-family: "Microsoft YaHei";\r\n                                                }\r\n                                                .weathCrtDayPic{\r\n                                                    width: 30%;position: absolute;\r\n                                                }\r\n                                                .weathCrtDayPic > * {\r\n                                                    color: #5c5e62;font-size: 18px;font-family: "Microsoft YaHei";\r\n                                                }\r\n                                                .weatherWrap div{\r\n                                                    display: inline-block;width: 50%;position: relative;height:100%\r\n                                                }\r\n                                                .dtTop{  top:0; position: absolute;  }\r\n                                                .ddBottom{ bottom:0;  left: 5px;  position: absolute; }\r\n                                                </style>\r\n                                                <div style="width: 100%; height: 48%;">\r\n                                                <div class="weatherWrap">\r\n                                                    <div>'+weatherCrtCt+weatherCrtPic+'</div><div style="width: 50%;right:0;position: absolute;top:0">'+weatherStatus+'</div></div>\r\n                                                </div>\r\n                                                <div id="modalWeatherChart" style="width: 98%; height: 49%;margin: 1%;"></div>';return str}var timeTicket,crtContainer=this.container,_this=this;_this.isFirstRender=!0,_this.chart=void 0,getWeatherStatus(),timeTicket&&clearInterval(timeTicket),timeTicket=setInterval(getWeatherStatus,6e5),this.container.style.background="#fff",this.container.style.borderRadius="4px"},ModalWeather.prototype.showConfigMode=function(){},ModalWeather}(),ModalEnergySaveRate=function(){function ModalEnergySaveRate(screen,entityParams){ModalBase.call(this,screen,entityParams,this.renderModal,this.updateModal,this.showConfigMode)}return ModalEnergySaveRate.prototype=new ModalBase,ModalEnergySaveRate.prototype.optionTemplate={name:"toolBox.modal.REAL_TIME_ENERGY_SAVE_RATE",parent:0,mode:["realTimeDashboard"],maxNum:1,title:"",minHeight:1,minWidth:2,maxHeight:6,maxWidth:12,type:"ModalEnergySaveRate"},ModalEnergySaveRate.prototype.renderModal=function(){var _this=this;WebAPI.get("/static/scripts/spring/entities/modalEnergySaveRate.html").done(function(resultHtml){_this.container.innerHTML=resultHtml,I18n.fillArea($("#energySaveName").parent())})},ModalEnergySaveRate.prototype.updateModal=function(points){var show=parseFloat(points[0].data).toFixed(1).toString()+"%";$("#energySavePerVal").text(show),$("#progressItem").css("width",show)},ModalEnergySaveRate.prototype.showConfigMode=function(){},ModalEnergySaveRate.prototype.setModalOption=function(option){this.entity.modal.interval=5},ModalEnergySaveRate}(),ModalCoalSaveTotal=function(){function ModalCoalSaveTotal(screen,entityParams){ModalBase.call(this,screen,entityParams,this.renderModal,this.updateModal,this.showConfigMode)}ModalCoalSaveTotal.prototype=new ModalBase,ModalCoalSaveTotal.prototype.optionTemplate={name:"toolBox.modal.REAL_TIME_COAL_SAVE_TOTAL",parent:0,mode:["realTimeDashboard"],maxNum:1,title:"",minHeight:1,minWidth:2,maxHeight:6,maxWidth:12,type:"ModalCoalSaveTotal"},ModalCoalSaveTotal.prototype.renderModal=function(){this.container.innerHTML=template,I18n.fillArea($("#coalSaveName").parent())},ModalCoalSaveTotal.prototype.updateModal=function(points){var show=parseFloat(points[0].data).toFixed(1).toString()+" Ton";$("#coalSaveVal").text(show)},ModalCoalSaveTotal.prototype.showConfigMode=function(){},ModalCoalSaveTotal.prototype.setModalOption=function(option){this.entity.modal.interval=5};var template='<style type="text/css">\r\n        .frameCtl {position: relative;height: 100%;}\r\n        .imgBackground {position: absolute;width: 100%;height: 100%;right: 0;bottom: 0;top: 0;left: 0;z-index: -1;}\r\n        #coalSaveVal {position: absolute;left: 60px;top: 40px;width: 220px;font-size: 25px;font-weight: 500;color: #eeeeee;}\r\n        #coalSaveName {position: absolute;left: 60px;top: 80px;width: 220px;font-size: 25px;font-weight: 500;color: #eeeeee;}\r\n    </style>\r\n    <div class="frameCtl">\r\n        <img src="/static/images/spring/entities/modalCoalSaveTotal.png" class="imgBackground" alt="Background image">\r\n        <div id="coalSaveVal"> Ton</div>\r\n        <div id="coalSaveName" i18n="dashboard.carbonFootprint.STANDARD_COAL_SAVING"></div>\r\n    </div>';return ModalCoalSaveTotal}(),ModalCo2SaveTotal=function(){function ModalCo2SaveTotal(screen,entityParams){ModalBase.call(this,screen,entityParams,this.renderModal,this.updateModal,this.showConfigMode)}ModalCo2SaveTotal.prototype=new ModalBase,ModalCo2SaveTotal.prototype.optionTemplate={name:"toolBox.modal.REAL_TIME_CO2_SAVE_TOTAL",parent:0,mode:["realTimeDashboard"],maxNum:1,title:"",minHeight:1,minWidth:2,maxHeight:6,maxWidth:12,type:"ModalCo2SaveTotal"},ModalCo2SaveTotal.prototype.renderModal=function(){this.container.innerHTML=template,I18n.fillArea($("#co2Name").parent())},ModalCo2SaveTotal.prototype.updateModal=function(points){var show=parseFloat(points[0].data).toFixed(1).toString()+" Ton";$("#co2SaveVal").text(show)},ModalCo2SaveTotal.prototype.showConfigMode=function(){},ModalCo2SaveTotal.prototype.setModalOption=function(option){this.entity.modal.interval=5};var template='<style type="text/css">\r\n        .frameCtl {position: relative;height: 100%;}\r\n        .imgBackground {position: absolute;width: 100%;height: 100%;right: 0;bottom: 0;top: 0;left: 0;z-index: -1;}\r\n        #co2SaveVal {position: absolute;left: 60px;top: 40px;width: 220px;font-size: 25px;font-weight: 500;color: #eeeeee;}\r\n        #co2Name {position: absolute;left: 60px;top: 80px;width: 220px;font-size: 25px;font-weight: 500;color: #eeeeee;}\r\n    </style>\r\n    <div class="frameCtl">\r\n        <img src="/static/images/spring/entities/modalCo2SaveTotal.png" class="imgBackground" alt="Background image">\r\n        <div id="co2SaveVal"></div>\r\n        <div id="co2Name" i18n="dashboard.carbonFootprint.CO2_SAVING"></div>\r\n    </div>';return ModalCo2SaveTotal}(),ModalKPIConfig=function($,window,undefined){function ModalKPIConfig(options){_this=this,this.options=$.extend({},DEFAULTS,options),this.$wrap=null}var _this;ModalKPIConfig.prototype.show=function(){return $("#modalKPIConfigWrap").length>0?void this.$modal.modal("show"):void $.get("/static/views/observer/widgets/modalKPIConfig.html",function(html){_this.$wrap=$('<div class="modal-kpi-config-wrap" id="modalKPIConfigWrap">').appendTo(document.getElementById("paneContent")).html(html),_this.$modal=_this.$wrap.children(".modal"),_this.init(),_this.$modal.modal("show")})},ModalKPIConfig.prototype.init=function(){this.$formWrap=$("#formWrap"),this.$btnClose=$(".close"),this.$btnWarnMode=$("#btnWarnMode","#formWrap"),this.$ulWarnMode=$("#ulWarnMode","#formWrap"),this.$btnWarnTimeMode=$("#btnWarnTimeMode","#formWrap"),this.$ulWarnTimeMode=$("#ulWarnTimeMode","#formWrap"),this.$btnPreWarnMode=$("#btnPreWarnMode","#formWrap"),this.$ulPreWarnMode=$("#ulPreWarnMode","#formWrap"),this.$btnPreWarnTimeMode=$("#btnPreWarnTimeMode","#formWrap"),this.$ulPreWarnTimeMode=$("#ulPreWarnTimeMode","#formWrap"),this.$btnDataCycleMode=$("#btnDataCycleMode","#formWrap"),this.$ulDataCycleMode=$("#ulDataCycleMode","#formWrap"),this.$btnStartMonth=$("#btnStartMonth","#formWrap"),this.$ulStartMonth=$("#ulStartMonth","#formWrap"),this.$btnHistoryValUsage=$("#btnHistoryValUsage","#formWrap"),this.$ulHistoryValUsage=$("#ulHistoryValUsage","#formWrap"),this.$fgWarnRange=$("#fgWarnRange","#formWrap"),this.$fgWarnTime=$("#fgWarnTime","#formWrap"),this.$fgWarnTimeRange=$("#fgWarnTimeRange","#formWrap"),this.$fgPreWarnRange=$("#fgPreWarnRange","#formWrap"),this.$fgPreWarnTime=$("#fgPreWarnTime","#formWrap"),this.$fgPreWarnTimeRange=$("#fgPreWarnTimeRange","#formWrap"),this.$fgiStartMonth=$("#fgiStartMonth","#formWrap"),this.$iptChartName=$("#iptChartName","#formWrap"),this.$iptChartLowerLimit=$("#iptChartLowerLimit","#formWrap"),this.$iptChartUpperLimit=$("#iptChartUpperLimit","#formWrap"),this.$divTargetPoint=$("#divTargetPoint","#formWrap"),this.$divReferencePoint=$("#divReferencePoint","#formWrap"),this.$btnCondition=$("#btnCondition","#formWrap"),this.$iptConditionVal=$("#iptConditionVal","#formWrap"),this.$btnIsShowRC=$("#btnIsShowRC","#formWrap"),this.$iptLowerWarnVal=$("#iptLowerWarnVal","#formWrap"),this.$iptUpperWarnVal=$("#iptUpperWarnVal","#formWrap"),this.$iptPreGreaterThan=$("#iptPreGreaterThan","#formWrap"),this.$iptPreLessThan=$("#iptPreLessThan","#formWrap"),this.$iptWarnTimeRangeStart=$("#iptWarnTimeRangeStart","#formWrap"),this.$iptPreWarnTimeRangeStart=$("#iptPreWarnTimeRangeStart","#formWrap"),this.$dropArea=$(".drop-area","#formWrap"),this.$btnSubmit=$("#btnSubmit"),this.attachEvents(),this.initValidator(),$(".datetime").datetimepicker({format:"yyyy-mm-dd",autoclose:!0,todayBtn:!0,startView:"year",minView:"month",pickerPosition:"top-right"})},ModalKPIConfig.prototype.initValidator=function(){},ModalKPIConfig.prototype.displayField=function(animArr){for(var showLen,$all,$animWrap=animArr[0].$ele.parent(".optional"),actionGroup={$show:$(),$hide:$()},curShowLen=$animWrap.children(".on").length,i=0,len=animArr.length;len>i;i++)actionGroup["$"+animArr[i].action]=actionGroup["$"+animArr[i].action].add(animArr[i].$ele);showLen=actionGroup.$show.length,$all=actionGroup.$hide.add(actionGroup.$show).filter(".on"),$all.filter(".on").eq(0).one("transitionend",function(e){e=e.originalEvent,"opacity"===e.propertyName&&($all.css("display","none"),showLen!==curShowLen?($animWrap.height(49*showLen),$animWrap.off("transitionend").on("transitionend",function(e){e=e.originalEvent,"height"===e.propertyName&&(actionGroup.$show.css("display",""),window.setTimeout(function(){actionGroup.$show.addClass("on")},0)),e.stopPropagation()})):(actionGroup.$show.css("display",""),window.setTimeout(function(){actionGroup.$show.addClass("on")},0))),e.stopPropagation()}),$all.removeClass("on")},ModalKPIConfig.prototype.reset=function(name){name="string"==typeof name?[name]:name,this.$iptChartName.val(""),this.$iptChartLowerLimit.val(""),this.$iptChartUpperLimit.val(""),this.$divTargetPoint.html('<span class="glyphicon glyphicon-plus"></span>'),this.$iptLowerWarnVal.val(""),this.$iptUpperWarnVal.val(""),this.$iptPreGreaterThan.val(""),this.$iptPreLessThan.val(""),(!name||name.indexOf("warn-time")>-1)&&(this.$btnWarnTimeMode.attr("data-value",0),this.$btnWarnTimeMode.children("span").eq(0).text("From User Input"),this.$btnHistoryValUsage.attr("data-value",0),this.$btnHistoryValUsage.children("span").eq(0).text("Use As Lower Limit")),(!name||name.indexOf("start-month")>-1)&&(this.$btnStartMonth.attr("data-value",""),this.$btnStartMonth.children("span").eq(0).text("Start Month")),(!name||name.indexOf("pre-warn-time")>-1)&&(this.$btnPreWarnTimeMode.attr("data-value",0),this.$btnPreWarnTimeMode.children("span").eq(0).text("From User Input"))},ModalKPIConfig.prototype.recoverForm=function(form){var name;form&&(this.$iptChartName.val(form.chartName),this.$iptChartLowerLimit.val(form.chartLowerLimit),this.$iptChartUpperLimit.val(form.chartUpperLimit),name=AppConfig.datasource.getDSItemById(form.targetPointId).alias,this.$divTargetPoint.attr({"data-value":form.targetPointId,title:name}).html("<span>"+name+"</span>"),this.$btnDataCycleMode.attr("data-value",form.dataCycleMode).children("span").eq(0).text(form.dataCycleModeName),this.$btnWarnMode.attr("data-value",form.warnMode).children("span").eq(0).text(form.warnModeName),this.$btnIsShowRC.attr("data-value",form.isShowRC).children("span").eq(0).text(form.isShowRCName),this.$iptLowerWarnVal.val(form.warnLowerLimit),this.$iptUpperWarnVal.val(form.warnUpperLimit),this.$btnPreWarnMode.attr("data-value",form.preWarnMode).children("span").eq(0).text(form.preWarnModeName),this.$iptPreGreaterThan.val(form.preGreaterThan),this.$iptPreLessThan.val(form.preLessThan))},ModalKPIConfig.prototype.setOptions=function(options){this.options=$.extend({},this.options,options)},ModalKPIConfig.prototype.attachEvents=function(){$(".dropdown-menu").off("click.selected").on("click.selected","a",function(e){var $this=$(this),$btn=$this.parents(".dropdown-wrap").children("button"),value=$this.attr("data-value"),text=$this.text();$btn.attr("data-value",value),$btn.children("span").eq(0).text(text),e.preventDefault()}),this.$modal.off("show.bs.modal").on("show.bs.modal",function(e){var $rightCt;return"bs.modal"!==e.namespace?!0:($rightCt=$("#rightCt"),_this.recoverForm(_this.options.modalIns.entity.modal.option),void($rightCt.hasClass("rightCtOpen")||$rightCt.click()))}),this.$modal.off("hide.bs.modal").on("hide.bs.modal",function(e){var $rightCt;return"bs.modal"!==e.namespace?!0:($rightCt=$("#rightCt"),_this.reset(),void($rightCt.hasClass("rightCtOpen")&&$rightCt.click()))}),this.$ulWarnMode.find("a").off().on("click",function(e){var value=parseInt($(this).attr("data-value")),lastValue=parseInt(_this.$btnWarnMode.attr("data-value")),animArr=[];value!==lastValue&&(_this.$btnWarnMode.attr("data-value",value),0===value?(animArr.push({$ele:_this.$fgWarnRange,action:"show"}),animArr.push({$ele:_this.$fgWarnTime,action:"hide"}),animArr.push({$ele:_this.$fgWarnTimeRange,action:"hide"})):(_this.reset(["warn-time"]),animArr.push({$ele:_this.$fgWarnRange,action:"hide"}),animArr.push({$ele:_this.$fgWarnTime,action:"show"}),animArr.push({$ele:_this.$fgWarnTimeRange,action:"show"})),_this.displayField(animArr))}),this.$ulWarnTimeMode.find("a").off().on("click",function(e){var value=parseInt($(this).attr("data-value")),lastValue=parseInt(_this.$btnWarnTimeMode.attr("data-value")),animArr=[];value!==lastValue&&(_this.$btnWarnTimeMode.attr("data-value",value),0===value?(animArr.push({$ele:_this.$fgWarnRange,action:"hide"}),animArr.push({$ele:_this.$fgWarnTime,action:"show"}),animArr.push({$ele:_this.$fgWarnTimeRange,action:"show"})):(animArr.push({$ele:_this.$fgWarnRange,action:"hide"}),animArr.push({$ele:_this.$fgWarnTime,action:"show"}),animArr.push({$ele:_this.$fgWarnTimeRange,action:"hide"})),_this.displayField(animArr))}),this.$ulPreWarnMode.find("a").off().on("click",function(e){var value=parseInt($(this).attr("data-value")),lastValue=parseInt(_this.$btnPreWarnMode.attr("data-value")),animArr=[];value!==lastValue&&(_this.$btnPreWarnMode.attr("data-value",value),0===value?(animArr.push({$ele:_this.$fgPreWarnRange,action:"show"}),animArr.push({$ele:_this.$fgPreWarnTime,action:"hide"}),animArr.push({$ele:_this.$fgPreWarnTimeRange,action:"hide"})):(_this.reset("pre-warn-time"),animArr.push({$ele:_this.$fgPreWarnRange,action:"hide"}),animArr.push({$ele:_this.$fgPreWarnTime,action:"show"}),animArr.push({$ele:_this.$fgPreWarnTimeRange,action:"show"})),_this.displayField(animArr))}),this.$ulPreWarnTimeMode.find("a").off().on("click",function(e){var value=parseInt($(this).attr("data-value")),lastValue=parseInt(_this.$btnPreWarnTimeMode.attr("data-value")),animArr=[];value!==lastValue&&(_this.$btnPreWarnTimeMode.attr("data-value",value),0===value?(animArr.push({$ele:_this.$fgPreWarnRange,action:"hide"}),animArr.push({$ele:_this.$fgPreWarnTime,action:"show"}),animArr.push({$ele:_this.$fgPreWarnTimeRange,action:"show"})):(animArr.push({$ele:_this.$fgPreWarnRange,action:"hide"}),animArr.push({$ele:_this.$fgPreWarnTime,action:"show"}),animArr.push({$ele:_this.$fgPreWarnTimeRange,action:"hide"})),_this.displayField(animArr))}),this.$ulDataCycleMode.find("a").off().on("click",function(e){var lastMonth,lastMonth2,nowMonth,lang,value=parseInt($(this).attr("data-value")),lastValue=parseInt(_this.$btnDataCycleMode.attr("data-value")),arrHtml=[],liTmpl='<li><a href="javascript:;" data-value="{0}">{1}</a></li>';value!==lastValue&&(_this.$btnDataCycleMode.attr("data-value",value),0===value?_this.$fgiStartMonth.removeClass("on"):(lang=I18n.type,nowMonth=DateUtil.getNextMonth((new Date).getMonth()),lastMonth=DateUtil.getLastMonth(nowMonth),lastMonth2=DateUtil.getLastMonth(lastMonth),arrHtml.push(liTmpl.format(lastMonth2,DateUtil.getMonthNameShort(lastMonth2-1,lang))),arrHtml.push(liTmpl.format(lastMonth,DateUtil.getMonthNameShort(lastMonth-1,lang))),arrHtml.push(liTmpl.format(nowMonth,DateUtil.getMonthNameShort(nowMonth-1,lang))),_this.$ulStartMonth.html(arrHtml.join("")),_this.reset("start-month"),_this.$fgiStartMonth.addClass("on")))}),this.$dropArea.off("dragover").on("dragover",function(e){e.preventDefault()}),this.$dropArea.off("dragenter").on("dragenter",function(e){$(e.target).addClass("on"),e.preventDefault(),e.stopPropagation()}),this.$dropArea.off("dragleave").on("dragleave",function(e){$(e.target).removeClass("on"),e.stopPropagation()}),this.$dropArea.off("drop").on("drop",function(e){var name,transfer=e.originalEvent.dataTransfer,itemId=transfer.getData("dsItemId"),$target=$(e.target);itemId&&($target.removeClass("on"),name=AppConfig.datasource.getDSItemById(itemId).alias,$target.attr({"data-value":itemId,title:name}),$target.html("<span>"+name+"</span>"),e.stopPropagation())}),this.$btnSubmit.off().click(function(){var form={};form.chartName=_this.$iptChartName.val(),form.chartLowerLimit=parseInt(_this.$iptChartLowerLimit.val()),form.chartUpperLimit=parseInt(_this.$iptChartUpperLimit.val()),form.targetPointId=_this.$divTargetPoint.attr("data-value"),form.referencePointId=_this.$divReferencePoint.attr("data-value"),form.referenceCondition=parseInt(_this.$btnCondition.attr("data-value"))||"",form.referenceConditionVal=parseInt(_this.$iptConditionVal.val())||"",form.dataCycleMode=parseInt(_this.$btnDataCycleMode.attr("data-value")),form.dataCycleModeName=_this.$btnDataCycleMode.children("span").eq(0).text(),form.btnStartMonth=_this.$btnStartMonth.attr("data-value"),form.warnMode=parseInt(_this.$btnWarnMode.attr("data-value")),form.warnModeName=_this.$btnWarnMode.children("span").eq(0).text(),form.isShowRC=parseInt(_this.$btnIsShowRC.attr("data-value")),form.isShowRCName=_this.$btnIsShowRC.children("span").eq(0).text(),form.warnLowerLimit=parseInt(_this.$iptLowerWarnVal.val()),form.warnUpperLimit=parseInt(_this.$iptUpperWarnVal.val()),form.warnTimeMode=parseInt(_this.$btnWarnTimeMode.attr("data-value")),form.warnTimeModeName=_this.$btnWarnTimeMode.children("span").eq(0).text(),form.historyValUsage=parseInt(_this.$btnHistoryValUsage.attr("data-value")),form.warnTimeRangeStart=_this.$iptWarnTimeRangeStart.val(),form.preWarnMode=parseInt(_this.$btnPreWarnMode.attr("data-value")),form.preWarnModeName=_this.$btnPreWarnMode.children("span").eq(0).text(),form.preGreaterThan=parseInt(_this.$iptPreGreaterThan.val()),form.preLessThan=parseInt(_this.$iptPreLessThan.val()),form.preWarnTimeMode=parseInt(_this.$btnPreWarnTimeMode.attr("data-value")),form.preWarnTimeRangeStart=_this.$iptPreWarnTimeRangeStart.val(),_this.options.onSubmit.call(_this.options.modalIns,form),_this.$btnClose.trigger("click")})},ModalKPIConfig.prototype.detachEvents=function(){},ModalKPIConfig.prototype.destroy=function(){this.detachEvents(),this.$wrap.remove()};var DEFAULTS={};return ModalKPIConfig}(jQuery,window),ModalKPIChart=function($){function ModalKPIChart(screen,entityParams){ModalBase.call(this,screen,entityParams,this._render,this._update,this._showConfig),this.options=$.extend(!0,{},DEFAULTS),this.historyChartOptions=$.extend(!0,{},HISTORY_CHART_DEFAULTS),this.startline=null,this.endline=null,this.indicators={},this.historyChart=null}ModalKPIChart.prototype=Object.create(ModalBase.prototype),ModalKPIChart.prototype.constructor=ModalKPIChart,ModalKPIChart.prototype.optionTemplate={name:"toolBox.modal.REAL_TIME_KPI_CHART",parent:0,mode:"custom",maxNum:1,title:"",minHeight:3,minWidth:4,maxHeight:6,maxWidth:12,type:"ModalKPIChart"},ModalKPIChart.prototype._render=function(){{var _this=this,option=this.entity.modal.option,min=option.chartLowerLimit||0,max=option.chartUpperLimit||100,len=max-min,warnLower=option.warnLowerLimit,warnUpper=option.warnUpperLimit,preWarnLower=warnLower+option.preGreaterThan,preWarnUpper=warnUpper-option.preLessThan,targetPointId=option.targetPointId,period=(option.referencePointId,option.dataCycleMode,this.getTimePeriod(option.dataCycleMode,option.startMonth)),postData=[{dsItemIds:[targetPointId],timeStart:period.nowStart,timeEnd:period.nowEnd,timeFormat:"m5"}];new Date}this.setDeadline();var axisColor=this.options.series[0].axisLine.lineStyle.color;void 0!==warnLower&&warnLower-min>0&&(axisColor.push([(warnLower-min)/len,"#ff4500"]),this.historyChartOptions.series[0].markLine.data.push([{name:"Lower Warn Line",value:warnLower,xAxis:0,yAxis:warnLower,itemStyle:{normal:{color:"#ff4500",lineStyle:{type:"solid"}}}},{xAxis:this.deadline,yAxis:warnLower}])),void 0!==preWarnLower&&preWarnLower-min>0&&(axisColor.push([(preWarnLower-min)/len,"orange"]),this.historyChartOptions.series[0].markLine.data.push([{name:"Lower Pre-Warn Line",value:preWarnLower,xAxis:0,yAxis:preWarnLower,itemStyle:{normal:{color:"orange",lineStyle:{type:"solid"}}}},{xAxis:this.deadline,yAxis:preWarnLower}])),void 0!==preWarnUpper&&preWarnUpper-min>0&&(axisColor.push([(preWarnUpper-min)/len,"lightgreen"]),this.historyChartOptions.series[0].markLine.data.push([{name:"Upper Pre-Warn Line",value:preWarnUpper,xAxis:0,yAxis:preWarnUpper,itemStyle:{normal:{color:"orange",lineStyle:{type:"solid"}}}},{xAxis:this.deadline,yAxis:preWarnUpper}])),void 0!==warnUpper&&warnUpper-min>0&&(axisColor.push([(warnUpper-min)/len,"orange"]),this.historyChartOptions.series[0].markLine.data.push([{name:"Upper Warn Line",value:warnUpper,xAxis:0,yAxis:warnUpper,itemStyle:{normal:{color:"#ff4500",lineStyle:{type:"solid"}}}},{xAxis:this.deadline,yAxis:warnUpper}])),axisColor.push([1,"#ff4500"]),this.initHistoryModal(),this.options.series[0].data[0].value=min,this.options.series[0].min=min,this.options.series[0].max=max,this.historyChartOptions.yAxis[0].min=min,this.historyChartOptions.yAxis[0].max=max,this.options.tooltip.formatter=function(p){return p.seriesName+": <strong>"+p.value.toFixed(2)+"</strong><br/>From: "+_this.store.timeShaft[0]+"<br/>To: "+_this.store.timeShaft[_this.store.timeShaft.length-1]},this.chart=echarts.init(_this.container,"macarons").setOption(this.options),this.spinner.spin(this.container),WebAPI.post("/analysis/startWorkspaceDataGenHistogramMulti",postData).done(function(rs){rs=JSON.parse(rs),rs=rs[0],_this.store=rs,_this.initIndicators(_this.store,option.targetPointId),_this.options.series[0].data[0].value=_this.indicators.average,_this.reloadChart(),_this.setFullTimeShaftM5()}).always(function(){_this.spinner.stop(),console.log("finish")})},ModalKPIChart.prototype.setAnimation=function(){var option=this.entity.modal.option,warnLower=option.warnLowerLimit,warnUpper=option.warnUpperLimit,preWarnLower=warnLower+option.preGreaterThan,preWarnUpper=warnUpper-option.preLessThan,$parent=$(this.container).parents(".panel"),curVal=this.indicators.average;

switch($parent.removeClass("warn-anim pre-warn-anim"),!0){case preWarnLower>curVal:$parent.addClass("pre-warn-anim");break;case warnLower>curVal:$parent.addClass("warn-anim");break;case preWarnUpper>curVal:break;case warnUpper>curVal:$parent.addClass("pre-warn-anim");break;default:$parent.addClass("warn-anim")}},ModalKPIChart.prototype.initHistoryModal=function(){var _this=this,$modalKPI=$("#modalKPIHistory");0===$modalKPI.length&&($modalKPI=$('\r\n            <div class="modal" id="modalKPIHistory">\r\n            <div class="modal-dialog" style="width: 1000px;margin-top: 110px;">\r\n                <div class="modal-content">\r\n                    <div class="modal-body">\r\n                        <div style="height: 550px;" id="divKPIHistoryPanel"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            </div>').appendTo(document.getElementById("paneContent"))),this.options.toolbox.feature.showHistory.onclick=function(){$modalKPI.one("shown.bs.modal",function(){_this.historyChartOptions.series[0].data=function(){for(var option=_this.entity.modal.option,targetPointId=option.targetPointId,list=_this.store.list,i=0,len=list.length;len>i;i++)if(list[i].dsItemId===targetPointId)return list[i].data;return[]}(),_this.historyChartOptions.xAxis[0].data=_this.store.fullTimeShaft,_this.historyChart=echarts.init(document.getElementById("divKPIHistoryPanel"),"macarons"),_this.historyChart.setOption(_this.historyChartOptions)}),window.setTimeout(function(){$modalKPI.modal("show")},0),$modalKPI.one("hiden.bs.modal",function(){_this.historyChart.dispose(),document.getElementById("divKPIHistoryPanel").innerHTML=""})}},ModalKPIChart.prototype._update=function(rs){var targetPointData,lastTick,nowTick,option=this.entity.modal.option,targetPointId=option.targetPointId;if(this.store){if(lastTick=this.store.timeShaft[this.store.timeShaft.length-1],lastTick=new Date(lastTick).valueOf()+3e5,nowTick=(new Date).valueOf(),lastTick>nowTick)return void console.log("time is not on!");for(var i=0,len=rs.length;len>i;i++)if(targetPointId===rs[i].dsItemId){targetPointData=parseFloat(rs[i].data);break}isNaN(targetPointData)||(this.appendData(targetPointData,targetPointId),this.options.series[0].data[0].value=this.indicators.average,this.reloadChart())}},ModalKPIChart.prototype.reloadChart=function(){this.chart.setSeries(this.options.series,!0),this.setAnimation()},ModalKPIChart.prototype._showConfig=function(){},ModalKPIChart.prototype.showConfigModal=function(container,options){this.configModal.setOptions({modalIns:this}),this.configModal.show()},ModalKPIChart.prototype.setOptions=function(options){this.options=$.extend({},this.opitons,options)},ModalKPIChart.prototype.destroy=function(){},ModalKPIChart.prototype.saveConfig=function(form){this.entity.modal.title=form.chartName,this.entity.modal.points=[form.targetPointId],this.entity.modal.option=form,this.entity.modal.interval=6e4},ModalKPIChart.prototype.configModal=new ModalKPIConfig({onSubmit:function(form){this.saveConfig(form)}}),ModalKPIChart.prototype.getTimePeriod=function(mode,startMonth){var now=new Date,period={};return 0===mode&&(period.nowStart=now.format("yyyy-MM-01 00:00:00"),period.nowEnd=now.format("yyyy-MM-dd HH:mm:ss"),period.lastyearStart=now.format("yyyy")-1+now.format("-MM"),period.lastyearEnd=period.lastyearStart+DateUtil.daysInMonth(new Date(period.lastyearStart))+" 23:59:59",period.lastyearStart+="-01 00:00:00"),period},ModalKPIChart.prototype.initIndicators=function(rs,dsId){for(var list=rs.list,data=null,average=0,i=0,len=list.length;len>i;i++)if(list[i].dsItemId===dsId){data=list[i].data;break}for(i=0,len=data.length;len>i;i++)average+=1*data[i];this.indicators.average=average/len},ModalKPIChart.prototype.appendData=function(value,dsId){var lastTick=this.store.timeShaft[this.store.timeShaft.length-1],list=this.store.list;this.store.timeShaft.push(new Date(new Date(lastTick).valueOf()+3e5).format("yyyy-MM-dd HH:mm:00"));for(var i=0,len=list.length;len>i;i++)if(list[i].dsItemId===dsId){data=list[i].data;break}data.push(value),this.indicators.average=(this.indicators.average*len+value)/(len+1)},ModalKPIChart.prototype.setDeadline=function(){var option=this.entity.modal.option,now=new Date;0===option.dataCycleMode&&(this.deadline=new Date(now.format("yyyy-MM-"+DateUtil.daysInMonth(now)+" 23:55:00")))},ModalKPIChart.prototype.setFullTimeShaftM5=function(){{var lastTick=new Date(this.store.timeShaft[this.store.timeShaft.length-1]).valueOf(),option=this.entity.modal.option,tick=lastTick+3e5;new Date}if(this.store.fullTimeShaft=this.store.timeShaft.concat(),0===option.dataCycleMode)for(;tick<=this.deadline;)tick+=3e5,this.store.fullTimeShaft.push(new Date(tick).format("yyyy-MM-dd HH:mm:ss"))};var DEFAULTS={tooltip:{formatter:function(p){return p.seriesName+": <strong>"+p.value+"</strong><br/>From: 2000-01-01 00:00:00<br/>To: 2000-01-02 00:00:00"}},toolbox:{show:!0,feature:{showHistory:{show:!0,title:"Show History Data"}}},series:[{name:"KPI Indicator",type:"gauge",precision:2,splitNumber:10,startAngle:140,endAngle:-140,axisLine:{show:!0,lineStyle:{width:30,color:[]}},axisTick:{show:!0,splitNumber:5,length:8,lineStyle:{color:"#eee",width:1,type:"solid"}},splitLine:{show:!0,length:30,lineStyle:{color:"#eee",width:2,type:"solid"}},pointer:{length:"80%",width:8},title:{show:!0,offsetCenter:["-65%",-20],textStyle:{color:"#333",fontSize:15}},detail:{offsetCenter:["-65%",-15],formatter:function(v){return v.toFixed(2)}},data:[{name:""}]}]},HISTORY_CHART_DEFAULTS={title:{text:"History Data"},calculable:!0,tooltip:{trigger:"axis"},dataZoom:{show:!1,realtime:!0,start:0,end:100},grid:{y2:80},xAxis:[{type:"category"}],yAxis:[{type:"value"}],series:[{type:"line",markLine:{data:[]}}]};return ModalKPIChart}(jQuery);