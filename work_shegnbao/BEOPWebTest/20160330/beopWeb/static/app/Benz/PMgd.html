<link rel="stylesheet" type="text/css" href="/static/scripts/lib/bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="/static/content/index.css">
<link rel="stylesheet" type="text/css" href="/static/content/index-black.css">
<link rel="stylesheet" type="text/css" href="/static/content/index-black.css">
<link rel="stylesheet" type="text/css" href="/static/app/Benz/env.css">
<script src="/static/scripts/lib/jquery-2.1.4.min.js"></script>
<script src="/static/scripts/lib/bootstrap/js/bootstrap.min.js"></script>
<script src="/static/scripts/lib/bootstrap/bootstrap-datetimepicker/bootstrap-datetimepicker.js"></script>

<body>

    <div id="totalContainer" class="clearfix" style="width:100%;height:100%">

        <div id="testCss" style="float:left;width: 20%;height:100%;" class="gray-scrollbar">
            <style>
                .btn-info {
                    height: 22px;
                    padding-top: 1px;
                }

                #testCss {
                    user-select: none;
                    overflow: auto;
                }

                    #testCss td, #testCss th {
                        vertical-align: middle;
                    }

                    #testCss tr {
                        cursor: pointer;
                    }



                        #testCss tr > td {
                            padding: 0;
                        }

                        #testCss tr.show-detail > td {
                            padding: 8px;
                        }

                    #testCss td > div > div {
                        padding: 0px;
                    }

                    #testCss .clearfix {
                        padding-left: 15px;
                        color: darkgray;
                        background-color: transparent;
                        font-size: initial;
                    }

                .oneEquipment {
                    float: left;
                    width: 100%;
                    margin: 10px;
                    transition: width 1s linear 2s;
                    /* Firefox 4 */
                    -moz-transition: width 1s linear 2s;
                    /* Safari and Chrome */
                    -webkit-transition: width 1s linear 2s;
                    /* Opera */
                    -o-transition: width 1s linear 2s;
                }

                    .oneEquipment:hover {
                        float: left;
                        width: 100%;
                        margin: 10px;
                        color: white;
                        background-color: transparent;
                        /*font-size: 18px;*/
                    }

                .oneEquipmentIcon {
                    float: left;
                }

                .running {
                    color: greenyellow;
                }

                .oneEquipmentInfo {
                    float: left;
                    margin-left: 5px;
                }

                .list-group-item {
                    background-color: rgb(49, 56, 70);
                    border-color: #888;
                    color: #eee;
                }

                a.list-group-item:hover {
                    opacity: .9;
                    background-color: transparent;
                    border-color: #888;
                }

                a.list-group-item {
                    color: #eee;
                }

                    a.list-group-item.active, a.list-group-item.active:hover {
                        background-color: rgb(25, 34, 52);
                        border-color: #aaa;
                        border-right: none;
                        color: orange;
                        border-bottom-right-radius: 0;
                        border-top-right-radius: 0;
                    }

                    a.list-group-item .list-group-item-heading {
                        color: #eee;
                        margin-bottom: 0;
                    }

                        a.list-group-item .list-group-item-heading:hover {
                            color: orange;
                        }

                .list-group-item .label {
                    display: inline-block;
                    margin-top: 4px;
                }

                .tbBody {
                    display: none;
                }

                    .tbBody.active {
                        display: table-row-group;
                    }

                .form-group {
                    margin-bottom: 10px !important;
                    width: 268px;
                }

                .PMlabel {
                    min-width: 56px;
                }

                .datetimepicker table {
                    color: #666;
                }

                #listNuantong li{
                    color: #eee;
                }
                    #listNuantong li.active{
                        color: #D6A263;
                    }
            </style>

            <div class="list-group" style="padding-right: 15px;">
                <a class="list-group-item" data-target="dianti">
                    <h4 class="list-group-item-heading">电梯系统</h4>
                </a>
                <a class="list-group-item" data-target="gipaishui">
                    <h4 class="list-group-item-heading">给排水系统</h4>
                </a>
                <a class="list-group-item" data-target="nuantong">
                    <h4 class="list-group-item-heading">暖通系统</h4>
                    <ul class="list-unstyled" id="listNuantong" style="padding-left: 20px;padding-top: 8px;margin-bottom: 0;">
                        <li data-sub="冷水机组">冷水机组</li>
                        <li data-sub="水处理">水处理</li>
                        <li data-sub="冷冻水泵">冷冻水泵</li>
                        <li data-sub="冷却水泵">冷却水泵</li>
                        <li data-sub="冷却塔">冷却塔</li>
                        <li data-sub="传感器等系统部件">传感器等系统部件</li>
                        <li data-sub="换热板交">换热板交</li>
                        <li data-sub="末端">末端</li>
                    </ul>
                </a>
                <a class="list-group-item" data-target="zhaoming">
                    <h4 class="list-group-item-heading">照明系统</h4>
                </a>
            </div>
        </div>




        <div id="rightContainer" style="float:left; width:80%; height:100%;">
            <div class="btn-toolbar" role="toolbar" style="padding-left: 10px; padding-top: 10px;">
                <button id="btnAddWf" type="button" class="btn btn-default btn-sm" data-toggle="modal" data-target="#myModal"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span> 新增</button>
            </div>
            <div class="table-responsive gray-scrollbar" style="height: calc(100% - 50px); overflow-x: hidden; overflow-y: auto;">
                <table class="table  table-hover">
                    <caption></caption>
                    <thead>
                        <tr>
                            <th>设备名称</th>
                            <th>保养项目</th>
                            <th>负责人</th>
                            <th>截止时间</th>
                            <th>维护周期</th>
                            <th>附件</th>
                        </tr>
                    </thead>
                    <tbody id="tbDianti" class="tbBody active"></tbody>
                    <tbody id="tbGipaishui" class="tbBody"></tbody>
                    <tbody id="tbNuantong" class="tbBody"></tbody>
                    <tbody id="tbZhaoming" class="tbBody"></tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- modal start -->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content" style="margin-top: 100px;">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel">新增PM</h4>
                </div>
                <div class="modal-body">
                    <div class="form-inline">
                        <div class="form-group">
                            <label for="" class="PMlabel">设备名称</label>
                            <input type="text" class="form-control divValue" id="equipmentName">
                        </div>
                        <div class="form-group">
                            <label for="" class="PMlabel">保养项目</label>
                            <select name="保养项目" class="form-control divValue" id="pmProject">
                                <option value='周保养'>周保养 </option>
                                <option value='月保养'>月保养 </option>
                                <option value='半年保养'>半年保养 </option>
                                <option value='年保养'>年保养 </option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="" class="PMlabel">保养详情</label>
                            <input type="text" class="form-control divValue" id="pmDetail">
                        </div>
                        <div class="form-group">
                            <label for="" class="PMlabel">负责人</label>
                            <select name="负责人" class="form-control divValue" id="personInCharge">
                                <option value='窦天鹏'>窦天鹏</option>
                                <option value='朱杰  '>朱杰   </option>
                                <option value='宋怀安'>宋怀安 </option>
                                <option value='阮小倩'>阮小倩 </option>
                                <option value='宋佳佳'>宋佳佳 </option>
                                <option value='顾峰  '>顾峰   </option>
                                <option value='徐林  '>徐林   </option>
                                <option value='沈春华'>沈春华 </option>
                                <option value='林倩茹'>林倩茹 </option>
                                <option value='贾远  '>贾远   </option>
                                <option value='白杜  '>白杜   </option>
                                <option value='袁晓磊'>袁晓磊 </option>
                                <option value='范东  '>范东   </option>
                                <option value='祝胜春'>祝胜春 </option>
                                <option value='李林峰'>李林峰 </option>
                                <option value='钱睿斌'>钱睿斌 </option>
                                <option value='邓悠悠'>邓悠悠 </option>
                                <option value='彭兵  '>彭兵   </option>
                                <option value='何山  '>何山   </option>
                                <option value='田嘉怡'>田嘉怡 </option>
                                <option value='刘人仁'>刘人仁 </option>
                                <option value='苏小强'>苏小强 </option>
                                <option value='金林  '>金林   </option>
                                <option value='孔德玉'>孔德玉 </option>
                                <option value='何春发'>何春发 </option>
                                <option value='于叶军'>于叶军 </option>
                                <option value='沈兰花'>沈兰花 </option>
                                <option value='褚丽琴'>褚丽琴 </option>
                                <option value='岳森  '>岳森   </option>
                                <option value='任石峰'>任石峰 </option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="" class="PMlabel">截止时间</label>
                            <input type="text" class="form-control divValue" id="endTime">
                        </div>
                        <div class="form-group">
                            <label for="" class="PMlabel">维护周期</label>
                            <select name="维护周期" class="form-control divValue" id="pmPeriod">
                                <option value='1周一次'>1周一次 </option>
                                <option value='1月一次'>1月一次 </option>
                                <option value='6个月一次'>6个月一次 </option>
                                <option value='一年一次'>一年一次 </option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="" class="PMlabel">提前发送时间</label>
                            <select name="提前发送时间" class="form-control divValue" id="advanceTime">
                                <option value='6小时'>6小时 </option>
                                <option value='1天'>1天 </option>
                                <option value='1周'>1周 </option>
                                <option value='1月'>1月 </option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="" class="PMlabel">审核人</label>
                            <select name="审核人" class="form-control divValue" id="reviewer">
                                <option value='窦天鹏'>窦天鹏</option>
                                <option value='朱杰  '>朱杰   </option>
                                <option value='宋怀安'>宋怀安 </option>
                                <option value='阮小倩'>阮小倩 </option>
                                <option value='宋佳佳' selected>宋佳佳 </option>
                                <option value='顾峰  '>顾峰   </option>
                                <option value='徐林  '>徐林   </option>
                                <option value='沈春华'>沈春华 </option>
                                <option value='林倩茹'>林倩茹 </option>
                                <option value='贾远  '>贾远   </option>
                                <option value='白杜  '>白杜   </option>
                                <option value='袁晓磊'>袁晓磊 </option>
                                <option value='范东  '>范东   </option>
                                <option value='祝胜春'>祝胜春 </option>
                                <option value='李林峰'>李林峰 </option>
                                <option value='钱睿斌'>钱睿斌 </option>
                                <option value='邓悠悠'>邓悠悠 </option>
                                <option value='彭兵  '>彭兵   </option>
                                <option value='何山  '>何山   </option>
                                <option value='田嘉怡'>田嘉怡 </option>
                                <option value='刘人仁'>刘人仁 </option>
                                <option value='苏小强'>苏小强 </option>
                                <option value='金林  '>金林   </option>
                                <option value='孔德玉'>孔德玉 </option>
                                <option value='何春发'>何春发 </option>
                                <option value='于叶军'>于叶军 </option>
                                <option value='沈兰花'>沈兰花 </option>
                                <option value='褚丽琴'>褚丽琴 </option>
                                <option value='岳森  '>岳森   </option>
                                <option value='任石峰'>任石峰 </option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="" class="PMlabel">相关人员</label>
                            <select name="相关人员" class="form-control divValue" id="relatedPerson">
                                <option value='窦天鹏'>窦天鹏</option>
                                <option value='朱杰  ' selected>朱杰   </option>
                                <option value='宋怀安'>宋怀安 </option>
                                <option value='阮小倩'>阮小倩 </option>
                                <option value='宋佳佳'>宋佳佳 </option>
                                <option value='顾峰  '>顾峰   </option>
                                <option value='徐林  '>徐林   </option>
                                <option value='沈春华'>沈春华 </option>
                                <option value='林倩茹'>林倩茹 </option>
                                <option value='贾远  '>贾远   </option>
                                <option value='白杜  '>白杜   </option>
                                <option value='袁晓磊'>袁晓磊 </option>
                                <option value='范东  '>范东   </option>
                                <option value='祝胜春'>祝胜春 </option>
                                <option value='李林峰'>李林峰 </option>
                                <option value='钱睿斌'>钱睿斌 </option>
                                <option value='邓悠悠'>邓悠悠 </option>
                                <option value='彭兵  '>彭兵   </option>
                                <option value='何山  '>何山   </option>
                                <option value='田嘉怡'>田嘉怡 </option>
                                <option value='刘人仁'>刘人仁 </option>
                                <option value='苏小强'>苏小强 </option>
                                <option value='金林  '>金林   </option>
                                <option value='孔德玉'>孔德玉 </option>
                                <option value='何春发'>何春发 </option>
                                <option value='于叶军'>于叶军 </option>
                                <option value='沈兰花'>沈兰花 </option>
                                <option value='褚丽琴'>褚丽琴 </option>
                                <option value='岳森  '>岳森   </option>
                                <option value='任石峰'>任石峰 </option>
                            </select>
                        </div>
                        <label style="width: 100%;">附件</label>
                        <div name="附件" class="form-control divValue" style="width: 100%; height:100px; font-size: 40px; color: rgba(30,30,30,0.4); text-align: center; padding-top: 16px;">
                            拖拽文件到这里
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                    <button type="button" class="btn btn-primary" id="btnSavePM">保存</button>
                </div>
            </div>
        </div>
    </div>
    <!-- modal end -->

    <div class="modal fade bs-example-modal-lg" id="dialogModalFJ" tabindex="-1" role="dialog" aria-labelledby="dialogModalFJ" style="top: 50px;">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">附件</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="assetName">合同</label>
                        <a href="http:\\images.rnbtech.com.hk/static/images/PM合同 - 副本.pdf" target="_blank" class="form-control divValue">PM合同.pdf</a>
                    </div>
                    <div class="form-group">
                        <label for="assetName">报价</label>
                        <a href="http:\\images.rnbtech.com.hk/static/images/PM报价1 - 副本.pdf" target="_blank" class="form-control divValue">PM报价1.pdf</a>
                        <a href="http:\\images.rnbtech.com.hk/static/images/PM报价2 - 副本.pdf" target="_blank" class="form-control divValue">PM报价2.pdf</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        var dianti = [{ "_id": 1, "保养项目": "1#电梯周保养", "设备名称": "--", "负责人": "彭兵", "截止时间": "2015/12/15", "维护周期": "1周一次" },
            { "_id": 2, "保养项目": "2#电梯周保养", "设备名称": "--", "负责人": "彭兵", "截止时间": "2015/12/15", "维护周期": "1周一次" },
            { "_id": 3, "保养项目": "3#电梯周保养", "设备名称": "--", "负责人": "彭兵", "截止时间": "2015/12/15", "维护周期": "1周一次" },
            { "_id": 4, "保养项目": "4#电梯周保养", "设备名称": "--", "负责人": "彭兵", "截止时间": "2015/12/15", "维护周期": "1周一次" },
            { "_id": 5, "保养项目": "1#电梯月保养", "设备名称": "--", "负责人": "彭兵", "截止时间": "2015/12/20", "维护周期": "1月一次" },
            { "_id": 6, "保养项目": "2#电梯月保养", "设备名称": "--", "负责人": "彭兵", "截止时间": "2015/12/20", "维护周期": "1月一次" },
            { "_id": 7, "保养项目": "3#电梯月保养", "设备名称": "--", "负责人": "彭兵", "截止时间": "2015/12/20", "维护周期": "1月一次" },
            { "_id": 8, "保养项目": "4#电梯月保养", "设备名称": "--", "负责人": "彭兵", "截止时间": "2015/12/20", "维护周期": "1月一次" },
            { "_id": 9, "保养项目": "1#电梯半年度保养", "设备名称": "--", "负责人": "彭兵", "截止时间": "2015/10/30", "维护周期": "6个月一次" },
            { "_id": 10, "保养项目": "2#电梯半年度保养", "设备名称": "--", "负责人": "彭兵", "截止时间": "2015/10/30", "维护周期": "6个月一次" },
            { "_id": 11, "保养项目": "3#电梯半年度保养", "设备名称": "--", "负责人": "彭兵", "截止时间": "2015/10/30", "维护周期": "6个月一次" },
            { "_id": 12, "保养项目": "4#电梯半年度保养", "设备名称": "--", "负责人": "彭兵", "截止时间": "2015/10/30", "维护周期": "6个月一次" },
            { "_id": 13, "保养项目": "1#电梯年度保养", "设备名称": "--", "负责人": "彭兵", "截止时间": "2015/7/10", "维护周期": "一年一次" },
            { "_id": 14, "保养项目": "2#电梯年度保养", "设备名称": "--", "负责人": "彭兵", "截止时间": "2015/7/10", "维护周期": "一年一次" },
            { "_id": 15, "保养项目": "3#电梯年度保养", "设备名称": "--", "负责人": "彭兵", "截止时间": "2015/7/10", "维护周期": "一年一次" }];

        var gipaishui = [{ "_id": 1, "保养项目": "生活水泵维保", "设备名称": "1#生活水泵", "负责人": "何山", "截止时间": "2015/12/20", "维护周期": "6个月一次" }, { "_id": 2, "保养项目": "生活水泵维保", "设备名称": "2#生活水泵", "负责人": "何山", "截止时间": "2015/12/20", "维护周期": "6个月一次" }, { "_id": 3, "保养项目": "生活水泵维保", "设备名称": "3#生活水泵", "负责人": "何山", "截止时间": "2015/12/20", "维护周期": "6个月一次" }, { "_id": 4, "保养项目": "生活水箱清洗及水质化验", "设备名称": "生活水箱", "负责人": "何山", "截止时间": "2015/12/20", "维护周期": "6个月一次" }, { "_id": 5, "保养项目": "污水泵保养", "设备名称": "1#污水泵", "负责人": "何山", "截止时间": "2015/12/20", "维护周期": "6个月一次" }, { "_id": 6, "保养项目": "污水泵保养", "设备名称": "2#污水泵", "负责人": "何山", "截止时间": "2015/12/20", "维护周期": "6个月一次" }, { "_id": 7, "保养项目": "排水系统疏通保养", "设备名称": "--", "负责人": "何山", "截止时间": "2015/12/20", "维护周期": "6个月一次" }, { "_id": 8, "保养项目": "生活用水消毒器保养", "设备名称": "--", "负责人": "何山", "截止时间": "2015/12/20", "维护周期": "6个月一次" }, { "_id": 9, "保养项目": "地漏清洗更换", "设备名称": "--", "负责人": "何山", "截止时间": "2015/12/20", "维护周期": "6个月一次" }, { "_id": 10, "保养项目": "集水坑清洗", "设备名称": "--", "负责人": "何山", "截止时间": "2015/12/20", "维护周期": "6个月一次" }, { "_id": 11, "保养项目": "污水井清洗", "设备名称": "--", "负责人": "何山", "截止时间": "2015/12/20", "维护周期": "6个月一次" }, { "_id": 12, "保养项目": "各种阀门检查更换", "设备名称": "--", "负责人": "何山", "截止时间": "2015/12/20", "维护周期": "6个月一次" }, { "_id": 13, "保养项目": "水泵房清洁", "设备名称": "--", "负责人": "何山", "截止时间": "2015/12/20", "维护周期": "6个月一次" }, { "_id": 14, "保养项目": "过滤器清洗", "设备名称": "--", "负责人": "何山", "截止时间": "2015/12/20", "维护周期": "6个月一次" }, { "_id": 15, "保养项目": "水表检查", "设备名称": "--", "负责人": "何山", "截止时间": "2015/12/20", "维护周期": "6个月一次" }];

        var nuantong = [{"_id":1,"保养项目":"冷水机组年度保养","设备名称":"1#冷机","负责人":"褚丽琴","截止时间":"2015/12/20","维护周期":"每年一次","SubType":"冷水机组"},
            {"_id":2,"保养项目":"冷水机组年度保养","设备名称":"2#冷机","负责人":"褚丽琴","截止时间":"2015/12/20","维护周期":"每年一次","SubType":"冷水机组"},
            {"_id":3,"保养项目":"冷水机组年度保养","设备名称":"3#冷机","负责人":"褚丽琴","截止时间":"2015/12/20","维护周期":"每年一次","SubType":"冷水机组"},
            {"_id":4,"保养项目":"冷冻水水处理","设备名称":"--","负责人":"褚丽琴","截止时间":"2015/12/20","维护周期":"6个月一次","SubType":"水处理"},
            {"_id":5,"保养项目":"采暖水水处理","设备名称":"--","负责人":"褚丽琴","截止时间":"2015/12/20","维护周期":"6个月一次","SubType":"水处理"},
            {"_id":6,"保养项目":"水泵设备保养","设备名称":"1#冷冻水泵","负责人":"褚丽琴","截止时间":"2015/12/20","维护周期":"每年一次","SubType":"冷冻水泵"},
            {"_id":7,"保养项目":"水泵设备保养","设备名称":"2#冷冻水泵","负责人":"褚丽琴","截止时间":"2015/12/20","维护周期":"每年一次","SubType":"冷冻水泵"},
            {"_id":8,"保养项目":"水泵设备保养","设备名称":"3#冷冻水泵","负责人":"褚丽琴","截止时间":"2015/12/20","维护周期":"每年一次","SubType":"冷冻水泵"},
            {"_id":9,"保养项目":"水泵设备保养","设备名称":"1#冷却水泵","负责人":"褚丽琴","截止时间":"2015/12/20","维护周期":"每年一次","SubType":"冷却水泵"},
            {"_id":10,"保养项目":"水泵设备保养","设备名称":"2#冷却水泵","负责人":"褚丽琴","截止时间":"2015/12/20","维护周期":"每年一次","SubType":"冷却水泵"},
            {"_id":11,"保养项目":"水泵设备保养","设备名称":"3#冷却水泵","负责人":"褚丽琴","截止时间":"2015/12/20","维护周期":"每年一次","SubType":"冷却水泵"},
            {"_id":12,"保养项目":"冷却塔设备保养","设备名称":"1#冷却塔","负责人":"褚丽琴","截止时间":"2015/12/20","维护周期":"每年一次","SubType":"冷却塔"},
            {"_id":13,"保养项目":"冷却塔设备保养","设备名称":"2#冷却塔","负责人":"褚丽琴","截止时间":"2015/12/20","维护周期":"每年一次","SubType":"冷却塔"},
            {"_id":14,"保养项目":"冷却塔设备保养","设备名称":"3#冷却塔","负责人":"褚丽琴","截止时间":"2015/12/20","维护周期":"每年一次","SubType":"冷却塔"},
            {"_id":15,"保养项目":"阀门设备保养","设备名称":"--","负责人":"褚丽琴","截止时间":"2015/12/20","维护周期":"6个月一次","SubType":"传感器等系统部件"},
            {"_id":16,"保养项目":"传感器仪表保养","设备名称":"--","负责人":"褚丽琴","截止时间":"2015/12/20","维护周期":"6个月一次","SubType":"传感器等系统部件"},
            {"_id":17,"保养项目":"换热器保养","设备名称":"--","负责人":"褚丽琴","截止时间":"2015/12/20","维护周期":"6个月一次","SubType":"换热板交"},
            {"_id":18,"保养项目":"暖气片保养","设备名称":"--","负责人":"褚丽琴","截止时间":"2015/12/20","维护周期":"6个月一次","SubType":"末端"},
            {"_id":19,"保养项目":"末端风机盘管保养","设备名称":"--","负责人":"褚丽琴","截止时间":"2015/12/20","维护周期":"6个月一次","SubType":"末端"},
            {"_id":20,"保养项目":"末端空气处理机保养","设备名称":"--","负责人":"褚丽琴","截止时间":"2015/12/20","维护周期":"6个月一次","SubType":"末端"},
            {"_id":21,"保养项目":"末端空调阀门保养","设备名称":"--","负责人":"褚丽琴","截止时间":"2015/12/20","维护周期":"6个月一次","SubType":"末端"},
            {"_id":22,"保养项目":"重要传感器校准","设备名称":"--","负责人":"褚丽琴","截止时间":"2015/12/20","维护周期":"6个月一次","SubType":"传感器等系统部件"},
            {"_id":23,"保养项目":"冷却水水处理","设备名称":"--","负责人":"褚丽琴","截止时间":"2015/12/20","维护周期":"6个月一次","SubType":"水处理"}];

        var zhaoming = [{ "_id": 1, "保养项目": "1-3F灯具巡检", "设备名称": "--", "负责人": "任石峰", "截止时间": "2015/12/15", "维护周期": "6个月一次" }, { "_id": 2, "保养项目": "4-8F灯具巡检", "设备名称": "--", "负责人": "任石峰", "截止时间": "2015/12/15", "维护周期": "6个月一次" }, { "_id": 3, "保养项目": "9-13F灯具巡检", "设备名称": "--", "负责人": "任石峰", "截止时间": "2015/12/15", "维护周期": "6个月一次" }, { "_id": 4, "保养项目": "14-18F灯具巡检", "设备名称": "--", "负责人": "任石峰", "截止时间": "2015/12/15", "维护周期": "6个月一次" }, { "_id": 5, "保养项目": "19-23F灯具巡检", "设备名称": "--", "负责人": "任石峰", "截止时间": "2015/12/15", "维护周期": "6个月一次" }, { "_id": 6, "保养项目": "地下车库灯具巡检", "设备名称": "--", "负责人": "任石峰", "截止时间": "2015/12/15", "维护周期": "6个月一次" }, { "_id": 7, "保养项目": "1-3F灯具清洁", "设备名称": "--", "负责人": "任石峰", "截止时间": "2015/12/20", "维护周期": "6个月一次" }, { "_id": 8, "保养项目": "4-8F灯具清洁", "设备名称": "--", "负责人": "任石峰", "截止时间": "2015/12/20", "维护周期": "6个月一次" }, { "_id": 9, "保养项目": "9-13F灯具清洁", "设备名称": "--", "负责人": "任石峰", "截止时间": "2015/12/20", "维护周期": "6个月一次" }, { "_id": 10, "保养项目": "14-18F灯具清洁", "设备名称": "--", "负责人": "任石峰", "截止时间": "2015/12/20", "维护周期": "6个月一次" }, { "_id": 11, "保养项目": "19-23F灯具清洁", "设备名称": "--", "负责人": "任石峰", "截止时间": "2015/12/20", "维护周期": "6个月一次" }, { "_id": 12, "保养项目": "地下车库灯具清洁", "设备名称": "--", "负责人": "任石峰", "截止时间": "2015/12/20", "维护周期": "6个月一次" }, { "_id": 13, "保养项目": "1-3F灯具配电箱检查", "设备名称": "--", "负责人": "任石峰", "截止时间": "2015/12/20", "维护周期": "6个月一次" }, { "_id": 14, "保养项目": "4-8F灯具配电箱检查", "设备名称": "--", "负责人": "任石峰", "截止时间": "2015/12/20", "维护周期": "6个月一次" }, { "_id": 15, "保养项目": "9-13F灯具配电箱检查", "设备名称": "--", "负责人": "任石峰", "截止时间": "2015/12/20", "维护周期": "6个月一次" }];

        attachEvent();

        //默认显示暖通
        $('.list-group-item:eq(2)').click();
        $('#listNuantong li:eq(0)').click();

        function renderData(data, $parent) {
            $parent.addClass('active').siblings().removeClass('active');
            var strHtml = '';
            for (var i = 0; i < data.length; i++) {
                strHtml += ('<tr class="" data-id="' + data[i]["_id"] + '" data-subtype="'+ data[i]["SubType"] +'">\
                            <td>'+ data[i]["设备名称"] + '</td>\
                            <td>'+ data[i]["保养项目"] + '</td>\
                            <td>'+ data[i]["负责人"] + '</td>\
                            <td>'+ data[i]["截止时间"] + '</td>\
                            <td>'+ data[i]["维护周期"] + '</td>\
                            <td><button class="btn btn-info" data-toggle="modal" data-target="#dialogModalFJ">' + '查看' + '</button></td>\
                        </tr>');
            }
            $parent.html(strHtml);
        }

        function attachEvent() {
            //初始化日历
            $('#endTime').datetimepicker({
                format: "yyyy/mm/dd",
                autoclose: true,
                todayBtn: true,
                pickerPosition: "bottom-left",
                minView: 'year'
            });
            //切换保养系统
            $('.list-group-item').off('click').on('click', function () {
                var target = this.dataset.target;
                $('.active').removeClass('active');
                $(this).addClass('active').siblings().removeClass('active');
                switch (target) {
                    case "dianti":
                        renderData(dianti, $('#tbDianti'));
                        break;
                    case "gipaishui":
                        renderData(gipaishui, $('#tbGipaishui'));
                        break;
                    case "nuantong":
                        renderData(nuantong, $('#tbNuantong'));
                        break;
                    case "zhaoming":
                        renderData(zhaoming, $('#tbZhaoming'));
                        break;
                    default:
                        renderData(dianti, $('#tbDianti'));
                        break;
                }
                attachEvent();
            });

            $('#listNuantong li').off('click').on('click', function(e){
                var sub = this.dataset.sub;
                e.stopPropagation();

                if(!$(this).closest('.list-group-item').hasClass('active')){
                    $('.list-group-item:eq(2)').click();
                }

                $(this).addClass('active').siblings().removeClass('active');
                $('#tbNuantong tr').hide();
                $('#tbNuantong tr[data-subtype="'+ sub +'"]').show();
            });

            //保存表单
            $('#btnSavePM').off('click').on('click', function () {
                var $myModal = $('#myModal');
                var pmProject = $('#pmProject').val();//保养项目
                var equipmentName = $('#equipmentName').val();//设备名称
                var pmDetail = $('#pmDetail').val();//保养详情
                var personInCharge = $('#personInCharge').val();//负责人
                var endTime = $('#endTime').val();//截止时间
                var pmPeriod = $('#pmPeriod').val();//维护周期
                var advanceTime = $('#advanceTime').val();//提前发送时间
                var reviewer = $('#reviewer').val();//审核人
                var relatedPerson = $('#relatedPerson').val();//相关人员

                //新的数据
                var newData = {
                    "_id": new Date().getTime(), "保养项目": pmProject, "设备名称": equipmentName, "负责人": personInCharge, "截止时间": endTime, "维护周期": pmPeriod
                }
                //判断数据添加位置
                var type = $('.list-group-item.active')[0].dataset.target;

                switch (type) {
                    case "dianti":
                        dianti.push(newData);
                        renderData(dianti, $('#tbDianti'));
                        break;
                    case "gipaishui":
                        gipaishui.push(newData);
                        renderData(gipaishui, $('#tbGipaishui'));
                        break;
                    case "nuantong":
                        nuantong.push(newData);
                        renderData(nuantong, $('#tbNuantong'));
                        break;
                    case "zhaoming":
                        zhaoming.push(newData);
                        renderData(zhaoming, $('#tbZhaoming'));
                        break;
                    default:
                        dianti.push(newData);
                        renderData(dianti, $('#tbDianti'));
                        break;
                }
                attachEvent();

                //清空表单
                $myModal.find('input').val('');
                $myModal.modal('hide');
            });
        }
    </script>
</body>
