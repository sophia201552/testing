<link rel="stylesheet" type="text/css" href="/static/scripts/lib/bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="/static/content/index.css">
<link rel="stylesheet" type="text/css" href="/static/content/index-black.css">
<link rel="stylesheet" type="text/css" href="/static/content/index-black.css">
<link rel="stylesheet" type="text/css" href="/static/app/Benz/env.css">
<script src="/static/scripts/lib/jquery-2.1.4.min.js"></script>
<script src="/static/scripts/lib/bootstrap/js/bootstrap.min.js"></script>


<body>

<style>
    .xungeng {
        margin: 10px auto;
    }

    div img {
        width: 75%;
    }

    table th, table tr {
        text-align: center;
    }

    table tbody tr {
        cursor: pointer;
    }

    table tr.active {
        background: rgb(37, 48, 70);
    }

    table tbody tr.logout td {
        color: #615D5D;
    }

    .pagination a.active {
        color: #fff !important;
    }

</style>

<div class="xungeng">
    <div class="row">

        <div class="btn-toolbar col-lg-3" role="toolbar">
            <button type="button" class="btn btn-default btn-sm" disabled><span class="glyphicon glyphicon-plus"
                                                                                aria-hidden="true"></span> 新增
            </button>
            <button type="button" class="btn btn-default btn-sm" disabled><span class="glyphicon glyphicon-pencil"
                                                                                aria-hidden="true"></span> 修改
            </button>
            <button type="button" class="btn btn-default btn-sm" disabled id="logout"><span
                    class="glyphicon glyphicon-remove"
                    aria-hidden="true"></span> 注销
            </button>
        </div>
        <div class="col-lg-3">
            <div class="input-group">
                <input type="text" class="form-control" placeholder="输入姓名.." id="search">
      <span class="input-group-btn">
        <button class="btn btn-default" type="button" id="searchBtn">搜索</button>
      </span>
            </div>
        </div>
    </div>
    <div>

        <div class="table-responsive" id="person-table-container"></div>
    </div>

    <nav>
        <ul class="pagination">
            <li>
                <a href="#" aria-label="Previous">
                    <span aria-hidden="true">&laquo;</span>
                </a>
            </li>
            <li><a>1</a></li>
            <li><a>2</a></li>
            <li><a>3</a></li>
            <li><a>4</a></li>
            <li><a>5</a></li>
            <li>
                <a href="#" aria-label="Next">
                    <span aria-hidden="true">&raquo;</span>
                </a>
            </li>
        </ul>
    </nav>
</div>

<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">二维码查看</h4>
            </div>
            <div class="modal-body">
                <img src="http://pic.baike.soso.com/p/20131211/20131211091752-393669037.jpg">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">打印</button>
                <button type="button" class="btn btn-primary">关闭</button>
            </div>
        </div>
    </div>
</div>

<script type="text/html" id="temp_person_table">
    <table class="table  table-hover">
        <caption></caption>
        <thead>
        <tr>
            <th>编号</th>
            <th>员工编号</th>
            <th>员工姓名</th>
            <th>员工代号</th>
            <th>员工性别</th>
            <th>员工部门</th>
            <th>巡更完成及时率</th>
            <th>状态</th>
        </tr>
        </thead>
        <tbody>
        <!data.forEach(function(item,index,array){!>
        <tr>
            <td>
                <input type="checkbox">
                <!=index!>
            </td>
            <td><!=item.number!></td>
            <td><!=item.name!></td>
            <td><!=item.code!></td>
            <td><!=item.sex!></td>
            <td><!=item.apartment!></td>
            <td><!=Number((Math.random() * 100).toFixed(2))!>%</td>
            <td style="width: 136px"></td>
        </tr>
        <!});!>
        </tbody>
    </table>
</script>
</body>
<script>
    (function (window) {
        if (!window.beopTmpl) {
            window.beopTmpl = function tmpl(str, data) {
                var fn = !/\W/.test(str) ?

                        tmpl(document.getElementById(str).innerHTML) :

                        new Function("obj",
                                "var p=[],print=function(){p.push.apply(p,arguments);};" +

                                "with(obj){p.push('" +

                                str
                                        .replace(/[\r\t\n]/g, " ")
                                        .split(/<!/).join("\t")
                                        .replace(/((^|!>)[^\t]*)'/g, "$1\r")
                                        .replace(/\t=(.*?)!>/g, "',$1,'")
                                        .split("\t").join("');")
                                        .split(/!>/).join("p.push('")
                                        .split("\r").join("\\'")
                                + "');}return p.join('');");

                return data ? fn(data) : fn;
            }
        }
    })(window);
    $(function () {
        var personData = [
            {"id": "1", "number": "TU-1-01", "name": "张丽云", "code": "liyun", "sex": "男", "apartment": "保安"}
            , {"id": "1", "number": "TU-1-01", "name": "程潼", "code": "liyun", "sex": "男", "apartment": "保安"}
            , {
                "id": "1",
                "number": "TU-1-01",
                "name": "徐广远",
                "code": "liyun",
                "sex": "男",
                "apartment": "保安"
            }
            , {
                "id": "1",
                "number": "TU-1-01",
                "name": "张旗",
                "code": "liyun",
                "sex": "男",
                "apartment": "保安"
            }, {
                "id": "1",
                "number": "TU-1-01",
                "name": "陈乾坤",
                "code": "liyun",
                "sex": "男",
                "apartment": "保洁"
            }, {"id": "1", "number": "TU-1-01", "name": "钱志沛", "code": "liyun", "sex": "女", "apartment": "保洁"}
            , {"id": "1", "number": "TU-1-01", "name": "袁振轩", "code": "liyun", "sex": "女", "apartment": "保洁"}
            , {"id": "1", "number": "TU-1-01", "name": "曹宽", "code": "liyun", "sex": "女", "apartment": "保洁"}
            , {"id": "1", "number": "TU-1-01", "name": "刘贤宇", "code": "liyun", "sex": "女", "apartment": "保洁"}
        ];

        var addData = function () {
            $('#person-table-container').html($(beopTmpl('temp_person_table', {
                        data: personData
                    })).fadeIn(300)
            );
        };
        addData();
        var search = function (value) {
            $('#person-table-container').find('tbody tr').show().each(function () {
                var $this = $(this);
                if ($.trim($this.find('td').eq(2).text()).indexOf(value) == -1) {
                    $this.hide();
                }
            })
        };
        $('#searchBtn').off().click(function () {
            search($.trim(($('#search').val())));
        });
        $('#search').off().on('keyup', function (ev) {
            var value = $.trim($(this).val());
            if (value) {
                if (ev.keyCode === 13) {
                    search(value);
                }
            } else {
                $('#person-table-container').find('tbody tr').show();
            }
        });
        $('.pagination').find('a[href!="#"]').off().click(function () {
            var $paginationA = $('.pagination').find('a');
            $paginationA.removeClass('active');
            $(this).addClass('active');
            $('#search').val('');
            addData();
        });
        $('#person-table-container').off().click('table tbody tr', function (ev) {
            var $this = $(ev.target).closest('tr'), $tr = $this.closest('tr');
            if ($this.hasClass('logout') || $this.parent().is('thead')) {
                return;
            }
            if ($this.hasClass('active')) {
                $tr.find('input[type="checkbox"]').prop('checked', false);
            } else {
                $tr.find('input[type="checkbox"]').prop('checked', true);
            }
            $this.toggleClass('active');
            var $trActive = $('#person-table-container').find('tbody tr.active');
            if ($trActive.length > 0) {
                $('#logout').prop('disabled', '').off().click(function () {
                    $trActive.addClass('logout');
                    $('#logout').prop('disabled', 'disabled');
                    var $logout = $('#person-table-container').find('tbody tr.logout');
                    $logout.removeClass('active').find('input[type="checkbox"]').prop('checked', false);
                    $logout.find('td:last').text('已注销')
                })
            } else {
                $('#logout').prop('disabled', 'disabled');
            }
        });
    });
</script>