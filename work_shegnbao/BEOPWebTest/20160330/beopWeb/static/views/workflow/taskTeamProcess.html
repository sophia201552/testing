<div id="taskTeamProcessContainer"></div>
<!--流程窗口开始-->
<script type="text/html" id="wf_task_process">
    <ul id="wf_team_process_ul" class="wf_team_process_ul">
        <li>
            <div class="fl w150">工单流程名称</div>
            <div class="fl w150">工作流图</div>
            <div class="fr">
                <span id="wf_add_process" class="btn btn-primary">新增流程</span>
            </div>
        </li>
        <!process.forEach(function(item){!>
        <li data-process-id="<!=item._id!>" data-template-id="<!=item.template_id!>">
            <div class="fl wf_team_process_title"><!=item.name!></div>
            <div class="fl">
                <span class="wf_team_process_item">
                    <span class="btn btn-success">发起</span>
                    <span class="glyphicon glyphicon-arrow-right"></span>
                </span>
                <!item.nodes.forEach(function(nodes){!>
                <span class="wf_team_process_item" data-node-type="<!=nodes.arch_type.type!>"
                      data-behaviour="<!=nodes.behaviour!>">

                    <span class="btn btn-default"><!=nodes.arch_type.name!>:
                        <! nodes.members.forEach(function(member){!>
                        <!=member.userfullname!>
                        <!});!>
                        <b i18n="workProcess.teamProcess.BEHAVIOR_TYPE_<!=nodes.behaviour!>"></b></span>
                </span>
                <span class="glyphicon glyphicon-arrow-right"></span>
                <!});!>
                <span class="wf_team_process_item">
                    <span class="btn btn-success">完成</span>
                </span>
            </div>
            <div class="fl wf_team_process_control">
                <i class="glyphicon glyphicon-pencil wf_team_process_edit" title="edit"></i>
                <i class="glyphicon glyphicon-remove wf_team_process_remove" title="remove"></i>
            </div>
        </li>
        <!});!>
    </ul>
</script>
<!--流程窗口结束-->

<!--添加流程窗口开始-->
<article id="wf_add_process_win" class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close closeProcessModal" aria-label="Close">x<span
                        aria-hidden="true"></span></button>
                <h4 class="modal-title" i18n="admin.panelManagement.PROMPT"></h4>
            </div>
            <div class="modal-body">
                <div id="wf_process_box" class="wf_process_box">
                    <div class="oh p10 ml10">
                        <label class="fl mt5" for="wf_process_name">
                            <span>流程名称</span>
                            <span>：</span>
                        </label>
                        <input type="text" value="" id="wf_process_name" class="form-control fl w150 ml10"
                               placeholder="请输入流程名称" autocomplete="off"
                               name="process_name"/>
                    </div>
                    <div id="wf_process_nodes" class="diamond">
                        <div class="tc">
                            <span class="btn btn-success w100 ml10" disabled="disabled">发起</span>
                            <span class="glyphicon glyphicon-plus-sign cp wf-add-process-item ml5"></span>
                        </div>
                        <div class="tc">
                            <span class="glyphicon glyphicon-arrow-down"></span>
                        </div>
                        <div class="tc oh">
                            <div class="wf-arrow-group ma">
                                <span class="glyphicon glyphicon-arrow-down fl pr wf-arrow-left-down"></span>

                                <div class="line fl"></div>
                                <span class="glyphicon glyphicon-arrow-down fl pr wf-arrow-right-down"></span>
                            </div>
                        </div>
                        <div id="wf_process_item_box" class="wf_process_item_box"></div>
                        <div class="tc">
                            <span class="btn btn-success w100" id="wf_process_create_finish">完成</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</article>
<!--添加流程窗口结束-->
<script type="text/html" id="tpl_wf_team_process_nodes">
    <!nodes.forEach(function(item){!>
    <div class="wf_process_item" data-process-item-id="<!=item.arch_id!>">
        <div class="oh">
            <label data-type="arch_type">
                <select class="form-control w150">
                    <option value="0" disabled="disabled">请选择人员类型</option>
                    <!teamProcessUserGroupRole.forEach(function(role,index,array){!>
                    <!if(item.arch_type.name === role.name){!>
                    <option value="<!=role.type!>" selected><!=role.name!></option>
                    <!}else{!>
                    <option value="<!=role.type!>"><!=role.name!></option>
                    <!}!>
                    <!});!>
                </select>
            </label>
            <span class="glyphicon glyphicon-arrow-right fl"></span>
            <label data-type="behaviour">
                <select class="form-control w150">
                    <option value="0" disabled="disabled">请选择人员行为</option>
                    <!if(item.behaviour == 1){!>
                    <option value="1">审核</option>
                    <!}else{!>
                    <option value="1" selected>审核</option>
                    <!};!>
                    <!if(item.behaviour == 2){!>
                    <option value="2" selected>执行</option>
                    <!}else{!>
                    <option value="2">执行</option>
                    <!};!>
                </select>
            </label>
            <span class="glyphicon glyphicon glyphicon-remove-circle  wf-delete-process-item fr mt10 cp"></span>
        </div>
        <div class="oh mt5 add-person-to-process-box">
            <span class="mr30 ml10 fl">指定到人</span>
            <div class="wf-added-user-list add-person-to-process">
                <!item.members.forEach(function(member){!>
                <div class="people" title="<!=member.userfullname!>" data-user-id="<!=member.id!>"><img
                        src="<!=member.userpic!>">
                    <div class="people-name ellipsis"><!=member.userfullname!></div>
                </div>
                <!});!>
            </div>
        </div>
        <span class="glyphicon glyphicon-edit cp wf-team-people-add add-people-to-process"></span>
    </div>
    <!});!>
</script>
<!--流程窗口添加某项流程开始-->
<script type="text/html" id="tpl_wf_add_process_one">
    <div class="wf_process_item">
        <div class="oh">
            <label data-type="arch_type">
                <select class="form-control w150">
                    <option value="0" disabled="disabled" selected>请选择人员类型</option>
                    <!teamProcessUserGroupRole.forEach(function(item,index,array){!>
                    <option value="<!=item.type!>"><!=item.name!></option>
                    <!});!>
                </select>
            </label>
            <span class="glyphicon glyphicon-arrow-right fl"></span>
            <label data-type="behaviour">
                <select class="form-control w150">
                    <option value="0" disabled="disabled" selected>请选择人员行为</option>
                    <!teamProcessUserBehaviorType.forEach(function(item,index,array){!>
                    <option value="<!=item!>"><!=I18n.resource.workProcess.teamProcess['BEHAVIOR_TYPE_'+item]!>
                    </option>
                    <!});!>
                </select>
            </label>
            <span class="glyphicon glyphicon-remove-circle wf-delete-process-item fr mt10 cp"></span>
        </div>
        <div class="oh mt5 add-person-to-process-box">
            <span class="mr30 ml10 fl">指定到人</span>
            <div class="wf-added-user-list add-person-to-process"></div>
            <span class="glyphicon glyphicon-edit cp wf-team-people-add add-people-to-process"></span>
        </div>
    </div>
</script>
<!--流程窗口添加某项流程结束-->