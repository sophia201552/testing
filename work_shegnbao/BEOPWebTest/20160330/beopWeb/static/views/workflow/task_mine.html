<style>
    #wf-task-tableWrapper {
        height: auto;
    }

    #wf-task-table tr {
        border: 1px solid #ccc;
    }

    #wf-task-table tbody tr:nth-of-type(even) {
        background: -moz-linear-gradient(top, rgba(240, 248, 255, 0.2) 0%, rgba(240, 248, 255, 0.8) 50%, rgba(168, 164, 164, 0.2) 100%);
        background: -webkit-linear-gradient(top, rgba(240, 248, 255, 0.2) 0%, rgba(240, 248, 255, 0.8) 50%, rgba(240, 248, 255, 0.2) 100%);
    }

    #wf-task-table th, #wf-task-table td {
        text-align: center;
        padding: 2px;
        border: none;
    }

    #wf-task-table th > a:hover, #wf-task-table td > a:hover {
        text-decoration: none;
    }

    #wf-task-table td a {
        color: inherit !important;
        display: block;
    }

    #wf-task-table td a:hover {
        text-decoration: none !important;
    }

    #wf-task-table thead tr th {
        background: #e5f3ff;
        cursor: pointer;
        font-weight: normal;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
    }

    #wf-task-filter-reset {
        vertical-align: top;
        width: 46px;
        height: 34px;
    }

    #wf-task-table tbody tr:hover {
        background: #e5f3ff;
        color: #333;
    }

    #task-pagination {
        margin-right: 0
    }

    .ellipsis_wf_title_name {
        display: inline-block;
        width: 320px;
        vertical-align: middle;
    }

    .ellipsis_wf_name {
        display: inline-block;
        width: 150px;
        vertical-align: middle;
    }

    .wf-task-filter {
        margin: 5px 0;
        overflow: hidden;
    }

    #wf-taskMine-content .pagination {
        margin: 15px 0 0 0;
    }
</style>
<div id="wf-taskMine-content">
    <div id="wf-task-filter"></div>
    <form class="clearfix">
        <div class="wf-task-filter dn">
            <label class="fl mr20 wf-lable">
                <span class="fl"><em i18n="workflow.task.FILTER"></em><i>：</i></span>
                <select class="form-control fl w150">
                    <option i18n="workflow.task.IN_PROGRESS"></option>
                    <option i18n="workflow.task.COMPLETED"></option>
                    <option i18n="workflow.task.STARING"></option>
                </select>
            </label>
        </div>
        <div id="wf-task-tableWrapper">
            <table id="wf-task-table" class="wf-table wf-record"></table>
        </div>
        <div>
            <div class="page-info fl"></div>
            <ul id="task-pagination" class="pagination fr"></ul>
        </div>
    </form>
</div>
<script type="text/html" id="tpl_TaskFilterDateTimePicker">
    <div class="wf-filter-custom-date-select" style="display: inline-flex;">
        <input type="text" name="startTIME" class="form-control" style="width: 150px !important;margin-right: 10px;"
               readonly
               i18n="placeholder=workflow.task.SELECTED_DUE_DATE_START_INFO"/>
        <input type="text" name="endTIME" class="form-control" style="width: 150px !important;margin-right: 10px;"
               readonly
               i18n="placeholder=workflow.task.SELECTED_DUE_DATE_INFO"/>
        <button type="button" class="btn btn-sm btn-success TaskFilterDateTimePickerBtn"
                i18n="workflow.main.SURE"></button>
    </div>
</script>
<script type="text/html" id="tpl_task_filter">
    <label data-filter-type="group">
        <select class="form-control w200">
            <option value="-1" selected i18n="workflow.task.TASK_GROUP"></option>
            <!groupList.forEach(function(item){!>
            <option value="<!=item.id!>" data-creator-id="<!=item.creatorId!>" data-creat-time="<!=item.createTime!>">
                <!=item.name!>
            </option>
            <!});!>
        </select>
    </label>
    <label data-filter-type="creator">
        <select class="form-control">
            <option value="-1" selected i18n="workflow.task.CREATED_PERSON">
            <option value="1" i18n="workflow.filter.CREATE_BY_ME"></option>
            <option value="2" i18n="workflow.filter.CREATE_BY_OTHERS"></option>
            </option>
        </select>
    </label>
    <label data-filter-type="urgency">
        <select class="form-control">
            <option value="-1" selected i18n="workflow.urgencyLevel.URGENCY_LEVEL">
            <option value="0" i18n="workflow.urgencyLevel.0"></option>
            <option value="1" i18n="workflow.urgencyLevel.1"></option>
            <option value="2" i18n="workflow.urgencyLevel.2"></option>
            </option>
        </select>
    </label>
    <label data-filter-type="status">
        <select class="form-control">
            <option value="-1" selected i18n="workflow.task.STATUS"></option>
            <option value="0" i18n="workflow.task.HAS_CREATED"></option>
            <option value="1" i18n="workflow.task.IN_DOING"></option>
            <option value="2" i18n="workflow.task.HAS_END"></option>
            <option value="3" i18n="workflow.task.COMPLETED"></option>
            <option value="4" i18n="workflow.taskStatus.4"></option>
            <option value="5" i18n="workflow.taskStatus.5"></option>
            <option value="6" i18n="workflow.taskStatus.6"></option>
            <option value="7" i18n="workflow.taskStatus.7"></option>
        </select>
    </label>
    <label data-filter-type="tags">
        <select class="form-control">
            <option value="-1" selected i18n="workflow.task.TAGS"></option>
            <!tagList.forEach(function(item){!>
            <option value="<!=item.id!>" data-creator-color="<!=item.color!>" data-creat-userId="<!=item.userId!>">
                <!=item.name!>
            </option>
            <!});!>
        </select>
    </label>
    <label data-filter-type="dueDate">
        <select class="form-control">
            <option value="-1" selected i18n="workflow.common.DEADLINE"></option>
            <option value="1" i18n="workflow.calendar.TODAY"></option>
            <option value="2" i18n="workflow.calendar.TOMORROW"></option>
            <option value="3" i18n="workflow.calendar.THIS_WEEK"></option>
            <option value="4" i18n="workflow.calendar.THIS_MONTH"></option>
            <option value="5" i18n="workflow.calendar.CUSTOM"></option>
        </select>
    </label>
    <button type="button" id="wf-task-filter-reset" class="btn btn-success btn-sm">
        重置
    </button>
</script>
<script type="text/html" id="tpl_wf_taskList_max">
    <thead>
    <tr>
        <th width="8%" data-order-property="id" class="order ellipsis"><span
                class="glyphicon glyphicon-sort-by-attributes-alt"></span><span
                i18n="workflow.task.SERIAL_NUMBER"></span></th>
        <th width="15%" data-order-property="title" class="order ellipsis"><span
                i18n="workflow.notice.ORDER"></span>
        </th>
        <th width="10%" data-order-property="executorID" class="order ellipsis"><span
                i18n="workflow.mine.EXECUTOR"></span></th>
        <th width="8%" data-order-property="creatorID" class="order ellipsis"><span
                i18n="workflow.task.CREATED_PERSON"></span></th>
        <th width="12%" data-order-property="dueDate" class="order ellipsis"
            style="text-align:center;"><span i18n="workflow.common.DEADLINE"></span></th>
        <th width="11%" data-order-property="groupID" class="order ellipsis"
            style="text-align:center;"><span i18n="workflow.task.TASK_GROUP"></span></th>
        <th width="12%" data-order-property="critical" class="order ellipsis"
            style="max-width: 100px;"><span
                i18n="workflow.urgencyLevel.URGENCY_LEVEL"></span></th>
        <th width="9%" data-order-property="statusId" class="order ellipsis"><span
                i18n="workflow.mine.STATUS"></span></th>
        <th width="7%">
            <div i18n="workflow.task.COLLECT" class="ellipsis"></div>
        </th>
    </tr>
    </thead>
    <tbody>
    <!if(transactions.length === 0){!>
    <tr style="background-color: #FFFFFF;">
        <td colspan="9"><img class="noActivities" src="static/images/workflow/emptyActivitys.gif" style="height: 100%;">
        </td>
    </tr>
    <!}!>
    <! var i,listTodayTaskLength=listTodayTasks.length,taskList=[];!>
    <! for(i=0;i< listTodayTaskLength;i++){!>
    <!taskList.push(listTodayTasks[i].id);!>
    <!}!>
    <! for(var m=0; m < transactions.length; m++){ !>
    <! var transaction = transactions[m]; !>
    <! if(taskList.indexOf(transaction.id) !== -1){!>
    <tr class="wf-today-task">
        <!}else{!>
    <tr>
        <!}!>
        <td width="8%" class="ellipsis">
            <a href="#page=workflow&type=transaction&transactionId=<!=transaction.id!>">
                <!=transaction.id!>
            </a>
        </td>
        <td width="15%" class="ellipsis"
            title="<!=transaction.title!>"
            style="text-align: center;">
            <a href="#page=workflow&type=transaction&transactionId=<!=transaction.id!>">
                <div class="ellipsis ellipsis_wf_title_name"><!=transaction.title!></div>
            </a>
        </td>
        <td width="10%" class="ellipsis"
            style="text-align: center">
            <a href="#page=workflow&type=transaction&transactionId=<!=transaction.id!>">
                <!=transaction.executorName!>
            </a>
        </td>
        <!if(transaction.creator_info && transaction.creator_info.userfullname){!>
        <td width="8%" class="ellipsis"><span>
            <a href="#page=workflow&type=transaction&transactionId=<!=transaction.id!>">
                <!=transaction.creator_info.userfullname!>
            </a>
        </span>
        </td>
        <!}else{!>
        <td width="8%"><span></span>
        </td>
        <!}!>
        <td width="12%" class="ellipsis"
            style="text-align:center;">
            <!var dueDate = transaction.dueDate.toDate().format('yyyy-MM-dd');!>
            <!if(!transaction.dueDate){!>
            <a href="#page=workflow&type=transaction&transactionId=<!=transaction.id!>">
                <!=''!>
            </a>
            <!}else if(parseInt(transaction.statusId) > 3){!>
            <a href="#page=workflow&type=transaction&transactionId=<!=transaction.id!>">
                <div class="ellipsis" style="width: 150px;margin: 0 auto;"><!=dueDate!></div>
            </a>
            <!}else if(moment(dueDate).diff(new Date().format('yyyy-MM-dd'), 'days') < 0){!>
            <a href="#page=workflow&type=transaction&transactionId=<!=transaction.id!>">
                <label class="label label-danger" title="<!=dueDate!>"><span i18n="workflow.task.OVERDUE"></span>
                    <!=Math.abs(moment(dueDate).diff(new Date().format('yyyy-MM-dd'), 'days'))!>
                    <span i18n="workflow.task.DAY"></span> </label>
            </a>
            <!}else if(moment(dueDate).diff(new Date().format('yyyy-MM-dd'), 'days') == 0){!>
            <a href="#page=workflow&type=transaction&transactionId=<!=transaction.id!>">
                <label class="label label-danger" title="<!=dueDate!>" i18n="workflow.calendar.TODAY"></label>
            </a>
            <!}else if(moment(dueDate).diff(new Date().format('yyyy-MM-dd'), 'days') == 1){!>
            <a href="#page=workflow&type=transaction&transactionId=<!=transaction.id!>">
                <label class="label label-warning" title="<!=dueDate!>" i18n="workflow.calendar.TOMORROW"></label>
            </a>
            <!}else{!>
            <div class="ellipsis" style="width: 150px;margin: 0 auto;">
                <a href="#page=workflow&type=transaction&transactionId=<!=transaction.id!>">
                    <!=dueDate!>
                </a>
            </div>
            <!}!>
        </td>
        <td width="11%" class="ellipsis"
            title="<!=transaction.groupName!>" style="text-align:center;">
            <span class="ellipsis ellipsis_wf_name">
                <a href="#page=workflow&type=transaction&transactionId=<!=transaction.id!>">
                    <!=transaction.groupName!>
                </a>
            </span>
        </td>
        <! if (typeof transaction.critical == 'number' ){!>
        <a href="#page=workflow&type=transaction&transactionId=<!=transaction.id!>">
            <td width="12%" class="ellipsis"
                i18n="workflow.urgencyLevel.<!=transaction.critical!>"></td>
        </a>
        <!}else{!>
        <a href="#page=workflow&type=transaction&transactionId=<!=transaction.id!>">
            <td width="12%" class="ellipsis"></td>
        </a>
        <!}!>
        <a href="#page=workflow&type=transaction&transactionId=<!=transaction.id!>">
            <td width="9%"
                i18n="title=workflow.taskStatus.<!=transaction.statusId!>">
                <div class="ellipsis" i18n="workflow.taskStatus.<!=transaction.statusId!>" style="width: 120px;"></div>
            </td>
        </a>
        <td width="7%" class="ellipsis" data-topic="wf-star-select" data-param="">
            <!if(transaction.star){!>
            <span class="glyphicon glyphicon-star wf-task-star cp hasEvents" trans_id="<!=transaction.id!>"
                  userId=""></span>
            <!}else{!>
            <span class="glyphicon glyphicon-star-empty wf-task-star cp hasEvents" trans_id="<!=transaction.id!>"
                  userId=""></span>
            <!}!>
        </td>
    </tr>
    <! } !>
    </tbody>
</script>
<script type="text/html" id="tpl_wf_taskList_min">
    <thead>
    <tr>
        <th data-order-property="id" class="order"><span
                class="glyphicon glyphicon-sort-by-attributes-alt"></span><span
                i18n="workflow.task.SERIAL_NUMBER"></span></th>
        <th data-order-property="title" class="order"><span
                i18n="workflow.notice.ORDER"></span>
        </th>
        <th data-order-property="executorID" class="order ellipsis"><span
                i18n="workflow.mine.EXECUTOR"></span></th>
        <th data-order-property="creatorID" class="order ellipsis"><span
                i18n="workflow.task.CREATED_PERSON"></span></th>
        <th data-order-property="dueDate" class="order"
            style="text-align:center;"><span i18n="workflow.common.DEADLINE"></span></th>
        <th data-order-property="critical" class="order"><span
                i18n="workflow.urgencyLevel.URGENCY_LEVEL"></span></th>
        <th data-order-property="statusId" class="order"><span
                i18n="workflow.mine.STATUS"></span></th>
    </tr>
    </thead>
    <tbody>
    <!if(transactions.length === 0){!>
    <tr style="background-color: #FFFFFF;">
        <td colspan="5"><img class="noActivities" src="static/images/workflow/emptyActivitys.gif" style="height: 100%;">
        </td>
    </tr>
    <!}!>
    <! var i,listTodayTaskLength=listTodayTasks.length,taskList=[];!>
    <! for(i=0;i< listTodayTaskLength;i++){!>
    <!taskList.push(listTodayTasks[i].id);!>
    <!}!>
    <! for(var m=0; m < transactions.length; m++){ !>
    <! var transaction = transactions[m]; !>
    <! if(taskList.indexOf(transaction.id) !== -1){!>
    <tr class="wf-today-task">
        <!}else{!>
    <tr>
        <!}!>
        <td class="ellipsis">
            <a href="#page=workflow&type=transaction&transactionId=<!=transaction.id!>">
                <!=transaction.id!>
            </a>
        </td>
        <td class="ellipsis"
            title="<!=transaction.title!>"
            style="text-align: center;">
            <div class="ellipsis ellipsis_wf_title_name">
                <a href="#page=workflow&type=transaction&transactionId=<!=transaction.id!>"><!=transaction.title!>
                </a></div>
        </td>
        <td class="ellipsis"
            style="text-align: center">
            <a href="#page=workflow&type=transaction&transactionId=<!=transaction.id!>">
                <!=transaction.executorName!>
            </a>
        </td>
        <!if(transaction.creator_info && transaction.creator_info.userfullname){!>
        <td class="ellipsis"><span>
            <a href="#page=workflow&type=transaction&transactionId=<!=transaction.id!>"><!=transaction.creator_info.userfullname!>
            </a></span>
        </td>
        <!}else{!>
        <td><span></span>
        </td>
        <!}!>
        <td class="ellipsis"
            style="text-align:center;">
            <!var dueDate = transaction.dueDate.toDate().format('yyyy-MM-dd');!>
            <!if(!transaction.dueDate){!>
            <!=''!>
            <!}else if(parseInt(transaction.statusId) > 3){!>
            <div><!=dueDate!></div>
            <!}else if(moment(dueDate).diff(new Date().format('yyyy-MM-dd'), 'days') < 0){!>

            <a href="#page=workflow&type=transaction&transactionId=<!=transaction.id!>">
                <label class="label label-danger" title="<!=dueDate!>"><span i18n="workflow.task.OVERDUE"></span>
                    <!=Math.abs(moment(dueDate).diff(new Date().format('yyyy-MM-dd'), 'days'))!> <span
                            i18n="workflow.task.DAY"></span> </label>
            </a>
            <!}else if(moment(dueDate).diff(new Date().format('yyyy-MM-dd'), 'days') == 0){!>
            <a href="#page=workflow&type=transaction&transactionId=<!=transaction.id!>">
                <label class="label label-danger" title="<!=dueDate!>" i18n="workflow.calendar.TODAY"></label>
            </a>
            <!}else if(moment(dueDate).diff(new Date().format('yyyy-MM-dd'), 'days') == 1){!>
            <a href="#page=workflow&type=transaction&transactionId=<!=transaction.id!>">
                <label class="label label-warning" title="<!=dueDate!>" i18n="workflow.calendar.TOMORROW"></label>
            </a>
            <!}else{!>
            <a href="#page=workflow&type=transaction&transactionId=<!=transaction.id!>">
                <div class="ellipsis ellipsis_wf_name"><!=dueDate!></div>
            </a>
            <!}!>
        </td>
        <! if (typeof transaction.critical == 'number'){!>
        <td class="ellipsis">
            <a href="#page=workflow&type=transaction&transactionId=<!=transaction.id!>"
               i18n="workflow.urgencyLevel.<!=transaction.critical!>">
            </a>
        </td>
        <!} else {!>
        <td class="ellipsis"></td>
        <!}!>
        <td
                i18n="title=workflow.taskStatus.<!=transaction.statusId!>">
            <a href="#page=workflow&type=transaction&transactionId=<!=transaction.id!>">
                <div i18n="workflow.taskStatus.<!=transaction.statusId!>"></div>
            </a>
        </td>
    </tr>
    <! } !>
    </tbody>
</script>


