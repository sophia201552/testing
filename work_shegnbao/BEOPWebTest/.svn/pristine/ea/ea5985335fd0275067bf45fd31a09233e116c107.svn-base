<style type="text/css">
    /*每一个人物框*/
    .wf-activity-person-box {
        border: 1px solid #e7eaec;
        background: #fff;
        margin-bottom: 15px;
    }

    .wf-activity-person-box .noActivities {
        height: 100%;
        display: block;
        margin: 0 auto;
    }

    /*下拉按钮*/
    .wf-activity-person-action {
        float: right;
        margin: 15px;
        margin-right: 0;
    }

    .btn-white {
        color: inherit;
        background: white;
        border: 1px solid #C8CBCD
    }

    .fa {
        display: inline-block;
        font: normal normal normal 14px/1 FontAwesome;
        font-size: inherit;
        text-rendering: auto;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        transform: translate(0, 0);
    }

    .fa-angle-down:before {
        content: "\f107";
    }

    /*avator*/
    .wf-activity-person-avatar {
        padding: 15px 0px 0 15px;
    }

    .wf-activity-person-avatar img {
        height: 40px;
        width: 40px;
        margin-right: 10px;
    }

    .wf-activity-person-avatar-body {
        padding: 15px 15px 0 0;
    }

    .wf-activity-person-avatar-body a {
        font-size: 14px;
        display: block;
        color: #337ab7;
        transition: 0.3s opacity 0s linear;
        width: 30%;
    }

    .wf-activity-person-avatar-body a:hover {
        opacity: 0.8;
        text-decoration: none;
    }

    .wf-activity-person-avatar-body small {
        color: #888888;
    }

    /*body*/

    .wf-activity-person-body {
        padding: 15px;
        overflow: hidden;
    }

    .wf-activity-person-body p {
        margin: 0 0 10px;
        color: #676a6c;
        font-size: 13px;
    }

    .wf-activity-person-footer {
        border-top: 1px solid #e7eaec;
        padding: 10px 15px;
        background: #f9f9f9;
    }

    /*评论*/
    .wf-activity-comment {
        margin-top: 30px;
    }

    .wf-activity-comment:first-child {
        margin-top: 0;
    }

    .wf-activity-comment a img {
        width: 32px;
        margin-right: 10px;
    }

    .form-control {
        background-color: #FFFFFF;
        background-image: none;
        border: 1px solid #e5e6e7;
        border-radius: 1px;
        color: inherit;
        display: block;
        padding: 6px 12px;
        transition: border-color 0.15s ease-in-out 0s, box-shadow 0.15s ease-in-out 0s;
        width: 100%;
        font-size: 14px;
    }

    .media-body {
        overflow: hidden;
        font-size: 12px;
        display: block;
        width: auto;
        color: #676a6c;
    }

    .reply-btn-wrapper {
        margin-top: 10px;
    }

    /*动态更新*/
    .wf-activity-active {
        display: none;
    }

    .feed-element {
        border-bottom: 1px solid #e7eaec;
        margin-top: 15px;
        padding: 10px 0;
    }

    .feed-element:first-child {
        margin-top: 0;
    }

    .feed-element img {
        width: 38px;
        height: 38px;
        border-radius: 50%;
    }

    .text-navy {
        color: #1ab394;
    }

    .wf-activity-comment textarea {
        resize: vertical;
    }

    #wf-content .recordContent a {
        text-decoration: none;
    }

    .historyEdit li {
        line-height: 25px;
    }

    .historyConTitle {
        color: #000;
        display: inline-block;
        width: 135px;
        text-align: right;
    }

    .oldName {
        color: #369;
        margin-right: 5px;
    }

    .newName {
        color: #369;
        margin-left: 5px;
    }

    .historyAction {
        color: #979797;
        font-weight: normal;
    }

    #wf-content {
        background: #fff;
        overflow-y: auto;
        overflow-x: hidden;
        left: 280px;
        width: calc(100% - 280px);
    }

    .wf-activity-empty {
        display: none;
    }

    .wf-activity-empty img {
        display: block;
        margin: 0 auto;
        background: transparent;
    }

    .wf-activity-container {
        position: relative;
    }

    .wf-activity-box {
        position: relative;
        padding: 10px;
        background: #fff;
    }

    .wf-activity-position {
        width: 100%;
        height: 50px;
        background: transparent;
        color: #a0a0a0;
        font-size: 17px;
        font-weight: 400;
        line-height: 50px;
    }

    .wf-activity-get-more {
        text-align: center;
        padding: 20px 0;
    }
</style>

<div class="wf-activity-container col-xs-12 col-lg-8 col-lg-offset-2">
    <div class="wf-activity-container-box" style="background: #fff;margin-top: 5px"></div>
    <div class="wf-activity-get-more dn">
        <button class="btn btn-success" type="button"
                i18n="workflow.task.GET_MORE;title=workflow.task.GET_MORE;value=workflow.task.GET_MORE"></button>
    </div>
</div>
<script type="text/html" id="tpl_wf_activity_empty">
    <div class="wf-activity-box">
        <!if(stateMap.activity_type == 'thisMonth'){!>
        <div class="wf-activity-position <!=showPosition ? '' : 'dn' !>" i18n="workflow.calendar.THIS_MONTH"></div>
        <!}else if(stateMap.activity_type == 'yesterday'){!>
        <div class="wf-activity-position <!=showPosition ? '' : 'dn' !>" i18n="workflow.calendar.YESTERDAY"></div>
        <!}else if(stateMap.activity_type == 'thisWeek'){!>
        <div class="wf-activity-position <!=showPosition ? '' : 'dn' !>" i18n="workflow.calendar.THIS_WEEK"></div>
        <!}else if(stateMap.activity_type == 'today'){!>
        <div class="wf-activity-position <!=showPosition ? '' : 'dn' !>" i18n="workflow.activities.TODAY"></div>
        <!}!>
        <section class="wf-activity-person-box">
            <img class="noActivities" src="static/images/workflow/emptyActivitys.gif"/>
        </section>
    </div>
</script>
<script type="text/html" id="tpl_wf_activity">
    <div class="wf-activity-box">

        <!if(stateMap.activity_type == 'thisMonth'){!>
        <div class="wf-activity-position <!=showPosition ? '' : 'dn' !>" i18n="workflow.calendar.THIS_MONTH"></div>
        <!}else if(stateMap.activity_type == 'yesterday'){!>
        <div class="wf-activity-position <!=showPosition ? '' : 'dn' !>" i18n="workflow.calendar.YESTERDAY"></div>
        <!}else if(stateMap.activity_type == 'thisWeek'){!>
        <div class="wf-activity-position <!=showPosition ? '' : 'dn' !>" i18n="workflow.calendar.THIS_WEEK"></div>
        <!}else if(stateMap.activity_type == 'today'){!>
        <div class="wf-activity-position <!=showPosition ? '' : 'dn' !>" i18n="workflow.activities.TODAY"></div>
        <!}!>
        <!try{var step= getActivitiesStepAmount ? getActivitiesStepAmount : activities.length;}catch(ex){}!>
        <!try{if(getActivitiesStepAmount > activities.length){!>
        <!step=activities.length}}catch(ex){}!>
        <! for(var m=0; m < step; m++){ !>
        <! var activity = activities[m]; !>
        <section class="wf-activity-person-box">
            <div>
                <a class="pull-left wf-activity-person-avatar" href="javascript:void (0)">
                    <!if(activity.userpic){!>
                    <img src="<!=activity.userpic!>"/>
                    <!}else{!>
                    <img src="" alt="no userpic"/>
                    <!}!>
                </a>

                <div class="wf-activity-person-avatar-body">
                    <a href="javascript:void (0)" class="task-user" data-user-id="<!=activity.userId!>"><!=activity.userName!></a>
                    <small title="<!=activity.opTime!>">
                        <!var opTimeMoment = moment(activity.opTime);!>
                        <!if(opTimeMoment.diff(new Date, 'days') < 5){!>
                        <!=opTimeMoment.fromNow()!>
                        <!}else{!>
                        <!=activity.opTime!>
                        <!}!>
                    </small>
                </div>
            </div>
            <div class="wf-activity-person-body">
                <div class="fl recordContent">
                <span class="content">
                    <!=WorkflowTool.translate(activity.op)!>:
                    <a href="javascript:void (0)" data-trans-id="<!=activity.linkToTransactionId!>" class="task-name"><!=activity.trans_title!></a>
                </span>
                    <!if(activity.op==='edit'){!>
                    <span class="content"><!=WorkflowTool.translate(activity.detail)!></span>
                    <!}!>
                </div>
            </div>
            <!if(activity.reply){!>
            <div class="wf-activity-person-footer">
                <! for(var n=0; n < activity.reply.length; n++){!>
                <! var reply = activity.reply[n]; !>
                <div class="wf-activity-comment">
                    <a class="pull-left">
                        <img src="<!=reply.userpic!>"/>
                    </a>

                    <div class="media-body">
                        <a href="javascript:void (0)" class="task-user" data-user-id="<!=reply.userId!>"><!=reply.userName!></a>
                        <span>:</span>
                        <!=reply.detail!>
                        <br>
                        <small class="text-muted" title="<!=reply.replyTime!>">
                            <!var replyTimeMoment = moment(reply.replyTime);!>
                            <!if(replyTimeMoment.diff(new Date, 'days') < 5){!>
                            <!=replyTimeMoment.fromNow()!>
                            <!}else{!>
                            <!=reply.replyTime!>
                            <!}!>
                        </small>
                    </div>
                </div>
                <! } !>
                <div class="wf-activity-comment clearfix">
                    <form action="javascript:void(0);" method="post" class="add-reply-form">
                        <div class="media-body">
                        <textarea class="form-control reply-text-area" i18n="placeholder=workflow.notice.COMMENTS"
                                  required
                                  name="detail"></textarea>
                        </div>
                        <input type="hidden" name="ofTransactionId"
                               value="<!=activity.linkToTransactionId!>">
                        <input type="hidden" name="replyToId" value="<!=activity.id!>">

                        <div class="dn pull-right reply-btn-wrapper">
                            <button class="btn btn-success" type="submit"
                                    i18n="workflow.activities.REVIEW;value=workflow.activities.REVIEW;title=workflow.activities.REVIEW"></button>
                        </div>
                    </form>
                </div>
            </div>
            <! }else { !>
            <div class="wf-activity-person-footer clearfix">
                <div class="wf-activity-comment">
                    <form action="javascript:void(0);" method="post" class="add-reply-form">
                        <a class="pull-left">
                            <img src="<!='http://images.rnbtech.com.hk/'+AppConfig.userProfile.picture!>"/>
                        </a>

                        <div class="media-body">
                        <textarea class="form-control reply-text-area" i18n="placeholder=workflow.notice.COMMENTS"
                                  required
                                  name="detail"></textarea>
                        </div>
                        <input type="hidden" name="ofTransactionId"
                               value="<!=activity.linkToTransactionId!>">
                        <input type="hidden" name="replyToId" value="<!=activity.id!>">

                        <div class="dn pull-right reply-btn-wrapper">
                            <button class="btn btn-success" type="submit"
                                    i18n="workflow.activities.REVIEW;value=workflow.activities.REVIEW;title=workflow.activities.REVIEW"></button>
                        </div>
                    </form>
                </div>
            </div>
            <! } !>
        </section>
        <! } !>
    </div>
</script>