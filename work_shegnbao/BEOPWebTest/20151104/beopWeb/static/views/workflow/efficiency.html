<style>
    .recordCon {
        overflow: hidden;
        height: 37px;
        line-height: 36px;
    }

    .group-row {
        padding: 5px;
        border-bottom: 1px inset #ccc;
    }

    #GroupStatics {
        -webkit-user-select: none;
    }

    .divUserStatics {
        margin: 10px 0px 0px;
        padding: 15px 5px 5px;
        border-top-width: 1px;
        border-top-style: dashed;
        border-top-color: rgb(204, 204, 204);
        display: none;
    }

    .divUserStatics > div {
        height: 35px;
    }

    .percent {
        text-align: center;
    }

    .username {
        text-indent: 10px;
    }
</style>
<div class="col-xs-12 vertical-roll">
    <div class="panel col-xs-offset-1 col-xs-10 workflow-container" id="workflow-efficiency"
         style="padding: 20px 50px 0 50px;">
        <div class="row" style="text-align: center;">
            <h1 class="col-xs-12"><span i18n="workflow.efficiency.TOTAL_TASK_EFFICIENCY_STATISTICS"></span></h1>
        </div>
        <div class="row" style="text-align: center;margin:5px 0 30px 0;">
            <button type="button" class="btn btn-default" id="thisMonth" i18n="workflow.efficiency.THIS_MONTH"></button>
            <button type="button" class="btn btn-success" id="cumulative" i18n="workflow.efficiency.TOTAL"
                    style="cursor: default;"></button>
            <button type="button" class="btn btn-default" id="lastMonth" i18n="workflow.efficiency.LAST_MONTH"></button>
        </div>
        <div class="row workflow-efficiency-row" id="GroupStatics">
            <div class="col-xs-12">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <div class="row">
                            <div class="col-xs-3">
                                <div i18n="workflow.efficiency.GATHER_ALL;title=workflow.efficiency.GATHER_ALL"
                                     class="ellipsis" style="margin-left: 3px;"></div>
                            </div>
                            <div class="col-xs-2">
                                <div i18n="workflow.efficiency.TOTAL_QUANTITY_OF_TASK_2;title=workflow.efficiency.TOTAL_QUANTITY_OF_TASK_2"
                                     class="ellipsis"></div>
                            </div>
                            <div class="col-xs-2">
                                <div i18n="workflow.efficiency.DELAY_QUANTITY_OF_TASK_2;title=workflow.efficiency.DELAY_QUANTITY_OF_TASK_2"
                                     class="ellipsis"></div>
                            </div>
                            <div class="col-xs-2">
                                <div i18n="workflow.efficiency.DELAY_RATE_2;title=workflow.efficiency.DELAY_RATE_2"
                                     class="ellipsis"></div>
                            </div>
                            <div class="col-xs-2"></div>
                        </div>
                    </div>
                    <div class="panel-body workflow-efficiency-table-body" id="divGroupStatics">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script type="text/html" id="efficiencyMainTmpl">
    <!for(var groupId in groups){!>
    <! var group = groups[groupId];!>
        <div class="row group-row">
            <div class="recordCon">
                <div class="col-xs-3 ellipsis" title="<!=group.groupName!>"><!=group.groupName!></div>
                <div class="col-xs-2"><!=group.totalCount!></div>
                <div class="col-xs-2"><!=group.delayedCount!></div>
                <div class="col-xs-2"><!=group.totalCount ? ((group.delayedCount / group.totalCount)*100).toFixed(2) :
                    (0).toFixed(2)!>%
                </div>
                <div class="col-xs-2" style="text-align:center;">
                    <button type="button" class="btn btn-primary isSeeChart" i18n="workflow.efficiency.VIEW"
                            data-group-id="<!=group.groupId!>"></button>
                </div>
            </div>
            <div class="row divUserStatics"></div>
        </div>
    <!}!>
</script>

<script type="text/html" id="efficiencyMemeberTmpl">
    <!for(var n=0; n < users.length; n++){!>
        <! var user = users[n]; !>
        <div class="col-xs-3 username"><!=user.userfullname!></div>
        <!if(user.totalCount){!>
            <div class="col-xs-6">
                <div class="progress" style="width: <!=user.countPercent!>%;">
                    <! var finished = ((user.finishedCount / user.totalCount)*100).toFixed(2);!>
                    <! var unfinishedWithoutDelayed = (((user.unFinishedCount - user.delayedCount) / user.totalCount)*100).toFixed(2);!>
                    <! var delayed = 100 - finished - unfinishedWithoutDelayed;!>
                    <div class="progress-bar progress-bar-success"
                         style="width:<!=finished!>%;">
                        <span><!=user.finishedCount!></span>
                    </div>
                    <div class="progress-bar progress-bar-warning"
                         style="width:<!=unfinishedWithoutDelayed!>%;">
                        <span><!=user.unFinishedCount-user.delayedCount!></span>
                    </div>
                    <div class="progress-bar progress-bar-danger progress-bar-striped"
                         style="width:<!=delayed!>%;">
                        <span><!=user.delayedCount!></span>
                    </div>
                </div>
            </div>
            <div class="col-xs-2 percent"><!=((user.delayedCount / user.totalCount)*100).toFixed(2)!>%
            </div>
        <!}!>
    <!}!>
</script>