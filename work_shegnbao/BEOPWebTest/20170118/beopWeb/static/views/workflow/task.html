<style>
    #workflow-task {
        padding-left: 42px;
        background-color: #f6f6f6 !important;
        color: #505050 !important;
        font-family: "Microsoft YaHei", Helvetica;
        font-size: 14px;
        padding-right: 50px;
    }

    #workflow-task .breadcrumb {
        display: inline-block;
        margin-top: 12px;
    }

    #workflow-task .operationIcon {
            margin-top: 12px;
    }

    #workflow-task .operationIcon {
        padding: 5px 6px;
        border: 1px solid #dcdcdc;
        border-radius: 6px;
        margin-right: 20px;
        cursor: pointer;
        background-color: #ffffff;
    }

    #workflow-task .operationIcon span:first-child {
        padding-right: 5px;
    }

    #workflow-task .operationIcon span {
        margin-right: 5px;
    }

    #taskContent {
        border: 1px solid #DCDCDC;
        border-radius: 2px;
        margin-right: 0.5%;
    }

    #workflow-task .fixTop {
        left: 0;
        right: 0;
        position: relative;
        background-color: #eeeeee;
        border-bottom: 2px solid #CCCCCC;
        padding: 0 10px;
        z-index: 100;
        min-height: 60px;
    }

    #taskBack {
        float: left;
    }

    #taskContent [class*='col-md-'] {
        padding: 0;
        margin: 0;
    }

    #taskContent .form-group {
        margin: 0;
    }

    #taskContent .padValue {
        padding: 5px 6px;
        border: 1px solid #DCDCDC;
        font-size: 14px;
        font-family: "Microsoft YaHei", Helvetica;
        font-weight: normal;
    }

    #taskContent .bgColor {
        background-color: #e8e8e8;
    }

    #taskContent .minH {
        min-height: 50px;
    }

    #taskContent .cent {
        text-align: right;
    }

    #taskProcess {
        margin: 0 0 20px 0;
    }

    #taskComplete {
        background-color: #29bc4f;
        border-color: #29bc4f;
    }

    #operation {
        margin: 12px 0;
    }

    #operation .btn {
        margin-right: 15px;
    }

    #workflow_task_content {
        height: 800px;
        overflow-y: auto;
    }

    @media (max-width: 1366px) {
        #taskContent .padValue {
            font-size: 13px;
        }

        .row {
            margin-right: 0;
        }

        #workflow-task {
            padding-right: 30px;
        }

        #workflow-task .operationIcon:first-child {
            margin-left: 12px;
        }

        #workflow_task_content {
            height: 600px;
            overflow-y: auto;
        }
    }

    /*新建工单附件start*/
    #wf-attachment-labelWrapper #wf-attachment .wf-attachment-body {
        line-height: normal;
        color: #666666;
        background-color: #e8e8e8 !important;
    }

    #wf-attachment-labelWrapper #wf-attachment-add-btn {
        color: #666666;
    }

    #wf-attachment-labelWrapper span#wf-attachment-add-btn:after {
        border: 2px solid #666;
    }

    #wf-attachment-labelWrapper .wf-attachment-add-btn-words {
        color: #999;
        font-size: 13px;
    }

    #wf-attachment-labelWrapper .wf-attachment-list .wf-attachment-add.wf-attachment-item p {
        color: #666666;
        font-size: 12px;
        white-space: normal;
    }

    #wf-attachment-labelWrapper .wf-attachment-item .wf-attachment-content {
        border: 1px solid #d8d8d8;
        background-color: #fafafa;
        border-radius: 2px;
    }

    #wf-attachment-labelWrapper .wf-attachment-item .wf-attachment-delete-btn {
        color: #ffffff;
    }

    #wf-attachment-labelWrapper .wf-attachment-item .wf-attachment-delete-btn-circle {
        border: 1px solid #666;
        background-color: #ff0000;
    }

    #wf-attachment-labelWrapper .wf-attachment-body .wf-attachment-list li p {
        text-overflow: ellipsis;
        white-space: nowrap;
        overflow: hidden;
    }

    /*新建工单附件end*/

    .recordTime {
        display: inline-block;
    }

    .recordContent {
        display: inline-block;
    }
</style>
<div id="workflow-task" class="scrollbar wf-manager-change-work-group">
    <div class="fixTop">
        <div class="mb10 operationIcon" id="taskBack" i18n="title=common.BACK">
            <span class="icon iconfont cp">&#xe7ec;</span>
            <span i18n="common.BACK"></span>
        </div>

        <div class="mb10 taskEditSection fr" id="operation">
            <button type="submit" id="taskSave" class="btn btn-primary"
                    i18n="workflow.insert.CONFIRM;value=workflow.insert.CONFIRM;title=workflow.insert.CONFIRM">
            </button>
        </div>

        <div class="mb10 operationIcon fr dn" id="taskDelete" i18n="title=common.DELETE">
            <span class="icon iconfont cp" taskId="">&#xe6b4;</span>
            <span i18n="common.DELETE"></span>
        </div>

        <div class="mb10 operationIcon fr dn" id="taskReSave" i18n="title=common.SAVE">
            <span class="icon iconfont cp">&#xe7e3;</span>
            <span i18n="common.SAVE"></span>
        </div>
        <div class="mb10 operationIcon fr dn" id="taskModify" i18n="title=common.EDIT">
            <span class="icon iconfont cp">&#xe710;</span>
            <span i18n="common.EDIT"></span>
        </div>


        <ol class="breadcrumb" style="margin-bottom: 0;">
            <li i18n="workflow.mine.TASK_GROUP"></li>
            <li class="active" i18n="workflow.mine.MY_TASK"></li>
        </ol>
    </div>

    <div class="scrollbar" id="workflow_task_content">
        <div id="wfOperateBtnBox" class="mb10 ml20 dn"></div>
        <form class="form-horizontal container-fluid" id="taskContent" action="javascript:void(0);"
              method="post"></form>
        <div id="wf-detail-funWrapper" style="padding: 0 10px;"></div>
    </div>
</div>

<!--@formatter:off-->
<script type="text/html" id="tpl_operate_btn">
    <!if(type === "show"){!>
        <span id="taskEdit" class="icon iconfont cp">&#xe710;</span>
    <!}else if(type === "edit"){!>
        <span id="taskReturn" class="icon iconfont cp">&#xe7ec;</span>
    <!}!>
</script>
<script type="text/html" id="tpl_detail_edit">
    <div class="row" id="taskGroupProcess"></div>
    <div class="row taskEditSection" id="taskBasic">
        <div class="col-md-4">
            <div class="form-group">
                <label class="col-md-3 control-label minH padValue bgColor cent" i18n="workflow.mine.WORK_ORDER_NAME"></label>

                <div class="col-md-9 minH padValue">
                    <input type="text" id="taskTitle" i18n="placeholder=workflow.mine.WORK_ORDER_NAME" class="form-control"
                           name="title">
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="form-group">
                <label class="col-md-3 control-label minH padValue bgColor cent" i18n="workflow.notice.DEADLINE"></label>

                <div class="col-md-9 minH padValue">
                    <input type="text" id="taskDueTime" name="dueDate" class="form-control"
                           autocomplete="off" i18n="placeholder=workflow.task.SELECTED_DUE_DATE_INFO"/>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="form-group">
                <label class="col-md-3 control-label minH padValue bgColor cent" i18n="workflow.urgencyLevel.URGENCY_LEVEL"></label>

                <div class="col-md-9 minH padValue">
                    <select id="taskCritical" class="form-control" name="critical">
                        <option value="0" i18n="workflow.urgencyLevel.0"></option>
                        <option value="1" i18n="workflow.urgencyLevel.1"></option>
                        <option value="2" i18n="workflow.urgencyLevel.2"></option>
                    </select>
                </div>
            </div>
        </div>
    </div>
    <div class="row taskEditSection dn" id="taskTemplateFields"></div>
    <div class="row taskEditSection" id="taskDetail">
        <div class="col-md-12" style="background-color: #e8e8e8;">
            <label style="border-bottom: none;" class="col-md-1 control-label padValue minH bgColor cent" i18n="workflow.main.WORKFLOW_DETAIL"></label>

            <div class="col-md-11" style="background-color: #f6f6f6">
                <textarea class="form-control padValue minH" id="wfDetail" name="detail" maxlength="1500"
                          style="resize: vertical;height: 200px;" i18n="placeholder=workflow.task.CHECK_TASK_INFO"></textarea>
            </div>
        </div>
    </div>
    <div class="row taskEditSection" id="taskTags">
        <div class="col-md-12" style="background-color: #e8e8e8;">
            <label style="border-bottom: none;" class="col-md-1 control-label padValue minH bgColor cent" i18n="workflow.main.TAGS_NAME"></label>

            <div class="col-md-11 padValue minH" style="background-color: #f6f6f6;">
                <div id="wf-labelWrapper" class="fl" style="padding-top: 8px"></div>
                <label>
                    <select class="form-control mr10" id="wf-labelNames"></select>
                </label>
                <span id="wf-labelName-error-message" class="dn" i18n="workflow.task.ADD_TAGS_INFO"></span>
            </div>
        </div>
    </div>
    <div class="row taskEditSection" id="taskAttachments" style="background-color: #e8e8e8;">
        <label style="min-height: 163px; border-bottom: none" class="col-md-1 control-label pr0 minH padValue bgColor cent" i18n="workflow.task.ATTACHMENT"></label>

        <div class="col-md-11 minH padValue" style="background-color: #f6f6f6;">
            <div id="wf-attachment-labelWrapper" class="mr10 fl" style="padding-left: 10px;">
                <ul class="wf-attachment-nav" id="wf-attachment-list-container"></ul>
                <div class="files file-add-btn">
                    <section class="file-type">
                        <span id="wf-attachment-input-btn">
                            +
                        </span>
                    </section>
                    <section class="file-info">
                        <p class="file-time" i18n="workflow.task.ATTACHMENT_INFO"
                           style="line-height: 40px;"></p>
                    </section>
                </div>
            </div>
        </div>
    </div>
    <div class="row taskEditSection dn" id="fault-curve-box" style="height:325px; background-color: #e8e8e8;">
        <label class="col-md-1 padValue bgColor cent" i18n="workflow.task.FAULT_CURVE" style="border-bottom: none"></label>
        <div class="col-md-11" style="background-color: #fafafa; padding-top: 25px; margin: 0; height:325px">
            <div class="fault-curve" style="height: 100%"></div>
        </div>
    </div>
    <div class="row taskEditSection" style=" background-color: #e8e8e8;">
        <label style="margin:0; border-bottom: none;" class="col-md-1 tr pr0 padValue minH bgColor cent" i18n="workflow.task.WATCHERS"></label>

            <div class="col-md-11 padValue minH" id="taskWatchers" style="padding-left: 15px; background-color: #f6f6f6;">
                <div class="wf-manager-people">
                    <div class="wf-added-user-list" id="wf-watchers-add"></div>
                    <span id="wfWatchersAdd" class="glyphicon glyphicon-edit wf-people-add"></span>
                </div>
            </div>
        </div>
    </div>
    <div class="row taskEditSection">
        <label style="height: 96px;" class="col-md-1 tr pr0 padValue minH cent bgColor" i18n="workflow.team.TEAM_PROCESS"></label>
        <div class="col-md-11 padValue minH" id="taskProcess"></div>
    </div>

</script>

<script type="text/html" id="tpl_detail_progress">
    <span id="wf-detail-verticalLine" class="pa"></span>
    <!for(var i=0;i < data.length; i++){!>
    <!var progress = data[i],senderInfo=progress.sender && progress.sender.senderInfo; !>
    <li>
        <div class="recordTime pr">
            <img src="<!=senderInfo.userpic!>"
                 title="<!=senderInfo.userfullname +'\n' +( progress.useremail && senderInfo.useremail !='undefined' ? progress.useremail : '')!>"
                 class="glyphicon glyphicon-record mr10 timeLineIcon"/>
            <span class="pa horizontalLine"></span>
            <span title="<!=progress.task.optime!>" style="margin: 0 5px;top: 3px;position: relative;height: 25px;">
                <!var opTimeMoment = moment(progress.task.optime);!>
                <!if(opTimeMoment.diff(new Date, 'days') > -5){!>
                    <!=opTimeMoment.fromNow()!>
                <!}else{!>
                    <!=progress.task.optime!>
                <!}!>
            </span>
        </div>
        <div class="recordContent">
            <span class="contentTitle"><!=WorkflowTool.translate(progress.task.op)!></span>
            <!if(progress.task.op==='edit' || progress.task.op==='forward'){!>
            <span class="content"><!=WorkflowTool.translate(progress.detail)!></span>
            <!}!>
        </div>
    </li>
    <!}!>
</script>
<script type="text/html" id="tpl_task_comment_progress">
    <ul id="wf-detail-funUl" class="wf-ul">
        <li id="wf-detail-comment-nav" class="active hasEvent mr5" data-param="comment"><span
                class="glyphicon glyphicon-comment" aria-hidden="true"></span><span
                i18n="workflow.activities.REVIEW"></span>
        </li>
        <li id="wf-detail-progress-nav" class="hasEvent" data-param="progress">
            <span class="glyphicon glyphicon-list-alt" aria-hidden="true"></span>
            <span i18n="workflow.task.TASK_PROGRESS"></span></li>
    </ul>
    <div id="task-reply-list"></div>
    <ul id="wf-detail-progress" class="dn timeLine"></ul>
</script>
<script type="text/html" id="tpl_operation_2">
        <button type="submit" id="taskComplete" class="btn btn-primary" i18n="workflow.main.COMPLETE_TASK"></button>
</script>
<script type="text/html" id="tpl_operation_1">
        <button type="submit" id="taskNoPass" class="btn btn-danger">不通过</button>
        <button type="submit" id="taskPass" class="btn btn-success">  通过</button>
</script>


<script type="text/html" id="tpl_wf_task_detail">
    <div class="col-md-12" style="background-color: #e8e8e8; ">
        <div class="form-group">
            <label style="border-bottom: none;" class="col-md-1 control-label padValue minH bgColor cent" i18n="workflow.main.WORKFLOW_DETAIL"></label>

            <div class="col-md-11 padValue minH" style="background-color: #f6f6f6; min-height: 55px;">
                <pre class="wf-task-detail"><!=fields.detail!></pre>
            </div>
        </div>
    </div>
</script>


<script type="text/html" id="tpl_wf_task_process">
    <div class="wf_add_process_people fl">
        <div class="disabled wf-manager-people">
            <div class="item-peoples-box">
                <div class="teamPeople oh mAuto">
                    <img src="<!=creator.userpic!>"/>
                    <div class="people-name ellipsis" title="<!=creator.userfullname!>"><!=creator.userfullname!></div>
                </div>
                <div style="margin-top: 10px;">
                    <span class="chevron-content peopleName" style="background: #5cb95c; color: #ffffff;">
                        <!=I18n.resource.workflow.common.CREATOR!>
                    </span>
                </div>
                <span class="fuLineBox">
                    <span class="fuLine"></span>
                </span>
            </div>
        </div>
    </div>
    <!for(var m=0; m < nodes.length; m++){!>

        <!
            var node = nodes[m];
            var nodeStatusKey = 'ADD_PROCESS_BEHAVIOR_TYPE_';
            var nodeStatus = '';
            if(status != 2 && node_index == m){
                var cls = 'info';
                nodeStatusKey = 'ADD_PROCESSING_BEHAVIOR_TYPE_'
            }else{
                if(node.action && (node.action == 'complete' || node.action == 'pass')){
                    var cls = 'success';
                }else if(node.action && (node.action == 'noPass')){
                    var cls = 'danger';
                    nodeStatus = I18n.resource.workflow.task.VERIFIERS_NOT_PASS;
                }else{
                    var cls = 'default';
                }
            }
            if(!nodeStatus){
                nodeStatus = I18n.resource.workflow.team[nodeStatusKey + node.behaviour];
            }
        !>

        <div class="color-<!=cls!> wf_add_process_people fl"  data-id="<!=node._id!>">
            <div class="disabled wf-manager-people">
                <!if(m > node_index && status < 2){!>
                    <div class="item-peoples-box noImplement">
                <!}else{!>
                    <div class="item-peoples-box">
                <!}!>
                    <!if(node.archType == beop.constants.archType.ALL_MEMBERS && node.members.length !== 1){!>
                        <div class="teamPeople oh mAuto">
                            <img  class="imgColor" src="/static/images/avatar/user/default_group.png"/>
                            <div class="people-name ellipsis" title="<!=node.archName!>"><!=I18n.resource.workflow.process.ALL_MEMBERS!></div>
                        </div>
                        <span class="glyphicon glyphicon-play ionPosition process-people-show cp" data-index="<!=m!>"></span>
                    <!}else{!>
                        <!if(node.members.length){!>
                            <!if(node.members.length == 1){!>
                                <div class="teamPeople oh mAuto" >
                                    <img  class="imgColor" src="<!=node.members[0].userpic!>"/>
                                    <div class="people-name ellipsis" title="<!=node.members[0].userfullname!>"><!=node.members[0].userfullname!></div>
                                </div>
                                <!stateMap.processMember[node._id] = node.members;!>
                            <!}else{!>
                                <div class="teamPeople oh mAuto">
                                    <img  class="imgColor" src="/static/images/avatar/user/default_group.png"/>
                                    <div class="people-name ellipsis" title="<!=node.archName!>"><!=node.archName!></div>
                                </div>
                                <!if(m >= node_index){!>
                                    <span class="glyphicon glyphicon-play ionPosition process-people-show cp" data-index="<!=m!>"></span>
                                <!}!>
                            <!}!>
                        <!}else{!>
                            <div class="teamPeople oh mAuto">
                                <img  class="imgColor" src="/static/images/avatar/user/default_group.png"/>
                                <div class="people-name ellipsis" title="<!=node.archName!>"><!=node.archName!></div>
                            </div>
                        <!}!>
                    <!}!>

                    <span class="fuLineBox">
                        <!if(m > node_index && status < 2){!>
                            <span style="background: #737373;" class="fuLine"></span>
                        <!}else{!>
                            <span class="fuLine"></span>
                        <!}!>
                    </span>
                    <div style="margin-top: 10px;">
                        <!if(node.behaviour){!>
                            <span class="chevron-content peopleName"><!=nodeStatus!></span>
                        <!}!>
                    </div>
                </div>
            </div>
        </div>
    <!}!>

    <!if(status == 2){!>
        <!var complete_color = 'success'; !>
    <!}else{!>
        <!var complete_color = 'default'; !>
    <!}!>
    <div class="color-<!=complete_color!> wf_add_process_people fl">
         <div class="disabled wf-manager-people">
            <div class="item-peoples-box">
                <div class="teamPeople oh mAuto completed">
                    <div i18n="workflow.main.FINISH"></div>
                </div>
            </div>
        </div>
    </div>
</script>

<script type="text/html" id="tpl_wf_task_basic">
    <div class="col-md-12">
        <label class="col-md-1 control-label padValue minH bgColor cent" i18n="workflow.mine.WORK_ORDER_NAME"></label>
        <div class="col-md-11 padValue minH"><!=fields['title']!></div>
    </div>
    <div class="col-md-4">
        <label class="col-md-3 control-label padValue minH bgColor cent" i18n="workflow.notice.CREATE_TIME"></label>
        <div class="col-md-9 padValue minH"><!=createTime!></div>
    </div>
    <div class="col-md-4">
        <label class="col-md-3 control-label padValue minH bgColor cent" i18n="workflow.notice.DEADLINE"></label>
        <div class="col-md-9 padValue minH"><!=fields['dueDate']!></div>
    </div>
    <div class="col-md-4">
        <label class="col-md-3 control-label padValue minH bgColor cent" i18n="workflow.urgencyLevel.URGENCY_LEVEL"></label>
        <div class="col-md-9 padValue minH"><!=I18n.resource.workflow.urgencyLevel[fields['critical']]!></div>
    </div>
</script>

<script type="text/html" id="tpl_wf_task_group_process">
    <div class="oh">
        <div class="col-md-12 minH">
            <div class="form-group">
                <label class="col-md-1 control-label minH bgColor padValue cent" i18n="workflow.mine.TASK_GROUP"></label>

                <div class="col-md-11 minH padValue">
                    <!try{if(taskGroup){}}catch(e){taskGroup={}}!>
                    <!if(taskGroup && !$.isArray(taskGroup)){!>
                        <!if(taskGroup.type == beop.constants.fieldType.DEFAULT){!>
                            <!=I18n.resource.workflow.main.DEFAULT_GROUP!>
                        <!}else{!>
                            <!=taskGroup.name!>
                        <!}!>
                        <input type="hidden" name="taskGroup" value="<!=beop.model.stateMap.currentGroupId!>">
                    <!}else{!>
                        <!var taskGroupName='';!>
                        <!if(beop.model.stateMap.selectedGroupId){!>
                            <!
                                if(taskGroup){
                                    for(var m = 0; m < taskGroup.length; m++){
                                        if(beop.model.stateMap.currentGroupId == taskGroup[m]._id){
                                            if(taskGroup[m].type == beop.constants.fieldType.DEFAULT){
                                                taskGroupName = I18n.resource.workflow.main.DEFAULT_GROUP;
                                            }else{
                                                taskGroupName = taskGroup[m].name;
                                            }
                                            break;
                                        }
                                    }
                                }
                                beop.model.stateMap.selectedGroupId = null;
                            !>
                            <!=taskGroupName!>
                            <input type="hidden" name="taskGroup" value="<!=beop.model.stateMap.currentGroupId!>">
                        <!}else{!>
                            <!if(taskGroup){!>
                                <select class="form-control" name="taskGroup" id="taskGroupSelector">
                                    <option disabled i18n="workflow.mine.TASK_GROUP_CHANGE"></option>
                                    <!for(var m = 0; m < taskGroup.length; m++){!>
                                        <! var groupName = taskGroup[m].name;
                                            if(taskGroup[m].type == beop.constants.fieldType.DEFAULT){
                                                groupName = I18n.resource.workflow.main.DEFAULT_GROUP;
                                            }
                                        !>
                                        <!if(beop.model.stateMap.currentGroupId == taskGroup[m]._id){!>
                                            <option value="<!=taskGroup[m]._id!>" selected><!=groupName!></option>
                                        <!}else{!>
                                            <option value="<!=taskGroup[m]._id!>"><!=groupName!></option>
                                        <!}!>
                                    <!}!>
                                </select>
                            <!}!>
                        <!}!>
                    <!}!>
                </div>
            </div>
        </div>
    </div>
    <div class="oh">
       <div class="col-md-12 minH">
            <div class="form-group">
                <label class="col-md-1 control-label minH bgColor padValue cent" i18n="workflow.mine.WORKFLOW_WATER"></label>
                <div class="col-md-11 minH padValue">
                    <!if(process && $.isArray(process)){!>
                        <select class="form-control" name="process" id="taskProcessSelector">
                            <!for(var m = 0; m < process.length; m++){!>
                                <!var processName = process[m].type == beop.constants.fieldType.DEFAULT ? I18n.resource.workflow.process.DEFAULT_PROCESS : process[m].name;!>
                                <option value="<!=process[m]._id!>"><!=processName!></option>
                            <!}!>
                        </select>
                    <!}else{!>
                        <!=process.type == beop.constants.fieldType.DEFAULT ? I18n.resource.workflow.process.DEFAULT_PROCESS : process.name!>
                    <!}!>
                </div>
            </div>
        </div>
    </div>
</script>

<script type="text/html" id="tpl_wf_task_process_option">
    <!for(var m = 0; m < process.length; m++){!>
        <option value="<!=process[m]._id!>"><!=process[m].type == beop.constants.fieldType.DEFAULT ? I18n.resource.workflow.process.DEFAULT_PROCESS : process[m].name!></option>
    <!}!>
</script>
<script type="text/html" id="tpl_wf_labels">
    <!for(var t=0; t < tags.length;t++){!>
        <!var tag = tags[t];!>
        <span class="pr wf-tag-wrapper">
            <! if (enableEdit){!>
                <i class="pa wf-detail-tag-delete glyphicon glyphicon-remove" style="right:0;" data-id="<!=tag.id!>"></i>
            <!};!>
            <span class="glyphicon glyphicon-tag"></span>
            <span class="wf-task-label"><!=tag.name!></span>
            <input type="hidden" value="<!=tag.id!>" name="tags[]"/>
        </span>
    <!}!>
</script>
<script type="text/html" id="tpl_wf_labels_select">
        <option value="-1"><!=I18n.resource.workflow.task.SELECT_TAG_NAME_INFO!></option>
        <! for(var t=0; t < tags.length;t++){ !>
            <option value=<!=tags[t].id!>><!=tags[t].name!></option>
        <! }; !>
</script>
<script type="text/html" id="tpl_wf_task_template">
    <input type="hidden" value="<!=template._id!>" name="template_id">
    <!if(template.fields){!>
        <!for(var m=0, n = template.fields.length; m < n; m++){!>
            <div class="col-md-4">
                <div class="form-group">
                    <label class="col-md-3 control-label padValue minH bgColor cent"><!=template.fields[m].name!></label>
                    <!if(fields){!>
                        <! var value = fields[template.fields[m].name] || 'N/A'; !>
                    <!}else{!>
                        <! var value = ''; !>
                    <!}!>

                    <div class="col-md-9 padValue minH">
                        <!if(value){!>
                            <!if(fields[template.fields[m].style]){!>
                                <span style="<!=fields[template.fields[m].style]!>"><!=value!></span>
                            <!}else{!>
                                <span><!=value!></span>
                            <!}!>
                        <!}else{!>
                            <!if(template.fields[m].type == 'text'){!>
                                <input type="text" class="form-control" name="<!=template.fields[m].name!>" placeholder="<!=template.fields[m].name!>">
                            <!}else if(template.fields[m].type == 'checkbox'){!>
                                <!for(var i=0, j=template.fields[m].values.length;i < j; i++){!>
                                    <div class="col-md-6">
                                        <label>
                                            <input type="checkbox" name="<!=template.fields[m].name!>" value="<!=template.fields[m].values[i]!>">
                                            <!=template.fields[m].values[i]!>
                                        </label>
                                    </div>
                                <!}!>
                            <!}else if(template.fields[m].type == 'radio'){!>
                                <!for(var i=0, j=template.fields[m].values.length;i < j; i++){!>
                                    <div class="col-md-6">
                                        <label>
                                            <input type="radio" name="<!=template.fields[m].name!>" value="<!=template.fields[m].values[i]!>">
                                            <!=template.fields[m].values[i]!>
                                        </label>
                                    </div>
                                <!}!>
                            <!}else if(template.fields[m].type == 'select'){!>
                                <select class="form-control" name="<!=template.fields[m].name!>">
                                    <!for(var i=0, j=template.fields[m].values.length;i < j; i++){!>
                                        <option value="<!=template.fields[m].values[i]!>"><!=template.fields[m].values[i]!></option>
                                    <!}!>
                                </select>
                            <!}else if(template.fields[m].type == 'date'){!>
                                <input class="form-control template-date" name="<!=template.fields[m].name!>" placeholder="<!=template.fields[m].name!>">
                            <!}!>
                        <!}!>

                        <!if(template.fields[m].note){!>
                            <span class="help-block"><!=template.fields[m].note!></span>
                        <!}!>
                    </div>
                </div>
            </div>
        <!}!>
    <!}!>
</script>

<script type="text/html" id="tpl_wf_added_member">
    <!for(var m=0; m < members.length; m++){!>
        <!var member = members[m];!>
        <div class="people" title="<!=member.userfullname!>" data-user-id="<!=member.id!>">
            <img src="<!=member.userpic!>">
            <div class="people-name ellipsis"><!=member.userfullname!></div>
            <input type="hidden" name="watchers[]" value="<!=member.id!>">
        </div>
    <!}!>
</script>

<script type="text/html" id="tpl_wf_change_user">
    <div class="teamPeople oh mAuto" title="<!=member.username ? member.username: member.userfullname!>" data-user-id="<!=member.id!>">
        <img class="imgColor" src="<!=member.userpic!>"/>
        <div class="people-name ellipsis" title="<!=member.userfullname!>"><!=member.userfullname!></div>
        <input type="hidden" name="addedUsers[]" value="<!=member.id!>">
    </div>
</script>

<!--@formatter:on-->
