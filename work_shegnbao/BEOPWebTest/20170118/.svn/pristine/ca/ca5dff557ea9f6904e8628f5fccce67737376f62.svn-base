<script src="/static/scripts/lib/select2/js/select2.min.js"></script>
<script src="/static/scripts/lib/select2/js/i18n/zh-CN.js"></script>
<script src="/static/scripts/lib/select2/js/i18n/en.js"></script>
<link href="/static/scripts/lib/select2/css/select2.min.css" type="text/css" rel="stylesheet"/>
<div id="permissionManage">
    <div class="oh p20">
        <div class="bg1 p15 oh mb20">
            <select class="form-control w200 fl" id="selectProject">
                <option value="all" i18n="admin.panelManagement.ALL_ITEMS"></option>
            </select>

            <div id="addProject" class="fr cp" permission="PRoot">
                <em class="ic1">+</em><span id="addProjectTxt" i18n="admin.panelManagement.ADD_ITEMS"></span>
            </div>
        </div>
        <ul id="projectCon"></ul>
        <input type="hidden" id="dragObj" value=""/>
    </div>
</div>

<!--员工列表浮动窗口开始-->
<article id="staffList" class="pa dn">
    <div id="searchWrapper" class="pr">
        <input type="text" id="searchProjectUser" class="form-control" placeholder="" maxlength="12"
               i18n="placeholder=admin.panelManagement.ENTER_A_QUERY"/>
        <ul id="userList"></ul>
    </div>
</article>
<!--员工列表浮动窗口结束-->

<!--确认是否删除角色浮动窗口开始-->
<article id="isDelWin" class="modal fade confirmWin">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" i18n="admin.panelManagement.PROMPT">：</h4>
            </div>
            <div class="modal-body">
                <p class="infoPrompt" i18n="admin.panelManagement.DELETE_IT">?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal"
                        i18n="admin.panelManagement.CANCEL"></button>
                <button type="button" class="btn btn-primary" i18n="admin.panelManagement.CONFIRM"></button>
            </div>
        </div>
    </div>
</article>
<!--确认是否删除角色浮动窗口结束-->

<!--确认是否删除用户浮动窗口开始-->
<article id="isDelUserWin" class="modal fade confirmWin">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" i18n="admin.panelManagement.PROMPT">：</h4>
            </div>
            <div class="modal-body">
                <p class="infoPrompt" i18n="admin.panelManagement.DELETE_IT">?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal"
                        i18n="admin.panelManagement.CANCEL"></button>
                <button type="button" class="btn btn-primary" i18n="admin.panelManagement.CONFIRM"></button>
            </div>
        </div>
    </div>
</article>
<!--确认是否删除用户浮动窗口结束-->

<!--确认框开始-->
<article id="PromptPermissionWin" class="modal fade promptWin">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" i18n="admin.panelManagement.PROMPT">：</h4>
            </div>
            <div class="modal-body">
                <p id="PromptPermissionInfo" class="infoPrompt" style="text-align:center"></p>
            </div>
        </div>
    </div>
</article>
<!--确认框结束-->

<!--添加分组浮动窗口开始-->
<article id="addGroupWin" class="modal fade confirmWin">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" i18n="admin.panelManagement.PROMPT">：</h4>
            </div>
            <div class="modal-body">
                <label for="groupName">
                    <span style="position: relative; top: 5px;" i18n="admin.panelManagement.GROUP_NAME">：</span>
                    <input style="float: right; width: 140px; vertical-align: middle;" class="form-control"
                           id="groupName" name="groupName" placeholder="" maxlength="12" type="text"
                           i18n="placeholder=admin.panelManagement.ENTER_GROUP_NAME"/>
                </label>
                <br/>
                <span class="infoPrompt ml20 dn" id="groupNameInfo"
                      i18n="admin.panelManagement.GROUP_NAME_NOTNULL"></span>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal"
                        i18n="admin.panelManagement.CANCEL"></button>
                <button type="button" class="btn btn-primary addGroupWinOK"
                        i18n="admin.panelManagement.CONFIRM"></button>
            </div>
        </div>
    </div>
</article>
<!--添加分组浮动窗口结束-->

<!--页面配置浮动窗口开始-->
<div class="modal fade" id="pageSet" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="exampleModalLabel" i18n="admin.panelManagement.PAGE_CONFIGURATION"></h4>
            </div>
            <div class="modal-body">
                <div class="winCon tree well">
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal"
                        i18n="admin.panelManagement.CANCEL"></button>
                <button type="button" class="btn btn-primary" id="savePageMenu" data-loading-text=""
                        i18n="admin.panelManagement.CONFIRM;data-loading-text=admin.panelManagement.SAVEING"></button>
            </div>
        </div>
    </div>
</div>
<!--页面配置浮动窗口结束-->


<!--权限配置浮动窗口开始-->
<div class="modal fade" id="setPermissionWin">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="" i18n="admin.panelManagement.PERMISSION_MANAGE"></h4>
            </div>
            <div class="modal-body">
                <p class="oh">
                    <label>
                        <input type="checkbox" value="" id="dashboardEditPermission" class="vt"/>
                        <span i18n="admin.panelManagement.DASHBOARD_PERMISSION"></span>
                    </label>
                </p>

                <p class="oh">
                    <label>
                        <input type="checkbox" value="" id="menuEditPermission" class="vt"/>
                        <span i18n="admin.panelManagement.MENU_PERMISSION"></span>
                    </label>
                </p>

                <p class="oh">
                    <label>
                        <input type="checkbox" value="" id="debugToolsPermission" class="vt"/>
                        <span i18n="admin.panelManagement.DEBUG_TOOL_PERMISSION"></span>
                    </label>
                </p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal"
                        i18n="admin.panelManagement.CANCEL"></button>
                <button type="button" class="btn btn-primary" id="savePermissionSetBtn" data-loading-text=""
                        i18n="admin.panelManagement.CONFIRM;data-loading-text=admin.panelManagement.SAVEING"></button>
            </div>
        </div>
    </div>
</div>
<!--权限配置浮动窗口结束-->

<!--@formatter:off-->
<!--模版开始-->
<script type="text/html" id="userListTmpl">
    <! for(var i=0;i < userList.length;i++){!>
        <li userId="<!=userList[i].id!>" userPic="<!=userList[i].userpic!>"
            title="<!=userList[i].userfullname || userList[i].username!>">
            <div class="media">
                <div class="media-left media-middle">
                    <img class="media-object userMiniPic" alt="userMiniPic"
                         src="<!=userList[i].userpic!>" title="<!=userList[i].userfullname || userList[i].username!>">
                </div>
                <div class="media-body ellipsis listName">
                    <h4 class="media-heading"><!=userList[i].userfullname || userList[i].username!></h4>

                    <p><!=userList[i].username!></p>
                </div>
            </div>
        </li>
    <!}!>
</script>
<script type="text/html" id="tpl_project_manage">
    <li class="proCompany" id="<!=project.id!>">
        <ul>
            <li class="oh">
                <h3 class="project-name">
                    <span class="mr10">
                        <!if(localStorage.getItem('language') === 'zh'){!>
                            <!=project.projectName!>
                        <!}else{!>
                            <!=project.projectName_en!>
                        <!}!>
                    </span>
                    <span>
                        <span>(ID:</span>
                        <span><!=project.id!></span>
                        <span>)</span>
                    </span>
                </h3>
                <button class="btn btn-default modify-btn" data-project-id="<!=project.id!>" i18n="admin.panelManagement.MODIFIED_PROJECT" permission="PRoot;2265"></button>
                <button class="btn btn-default delete-btn" data-project-id="<!=project.id!>" i18n="admin.panelManagement.DELETE_PROJECT" permission="PRoot"></button>
            </li>
            <! for(var j=0; j < project.roles.length; j++){!>
                <!if(!project.roles[j].id){continue;}!>
                <li class="oh proListWrapper">
                    <div class="proList" roleId="<!=project.roles[j].id!>">
                        <div class="h40">
                            <span class="ml20 fb role"><!=project.roles[j].name!></span>
                            <!if(AppConfig.userProfile.isManager == 1){!>
                                <button type="button" class="btn btn-default delCon fr" data-dismiss="modal"
                                        data-projectid="<!=project.id!>" data-roleid="<!=project.roles[j].id!>"
                                        i18n="admin.panelManagement.DELETE">
                                </button>
                                <button type="button" class="btn btn-default setPage fr mr20" data-dismiss="modal"
                                        data-projectid="<!=project.id!>" data-roleid="<!=project.roles[j].id!>"
                                        i18n="admin.panelManagement.CONFIGURATION_PAGE">
                                </button>
                            <!}!>
                        </div>
                        <article class="userList">
                            <! for(var k=0; k < project.roles[j].users.length;k++){!>
                                <!if(project.roles[j].users[k].id){!>
                                    <dl class="proUser pr" userId="<!=project.roles[j].users[k].id!>"
                                        userName="<!=project.roles[j].users[k].name!>" draggable="true">
                                        <dt>
                                            <!if(project.roles[j].users[k].userpic){!>
                                                <img class="media-object" src="<!=project.roles[j].users[k].userpic!>">
                                            <!}else{!>
                                                <img class="media-object" src="/static/images/avatar/default/1.png">
                                            <!}!>
                                        </dt>
                                        <dd><em class="closed dn" userId="<!=project.roles[j].users[k].id!>"
                                                roleId="<!=project.roles[j].id!>">X</em></dd>
                                        <dd class="userName" title="<!=project.roles[j].users[k].name!>">
                                            <!=project.roles[j].users[k].name!>
                                        </dd>
                                    </dl>
                                <!}!>
                            <!}!>
                        </article>
                    </div>
                </li>
            <!}!>
        </ul>
        <!if(AppConfig.userProfile.isManager == 1){!>
            <div class="oh addGroupWrapper">
                <span class="cp addGroup" i18n="admin.panelManagement.ADD_GROUPING"><em class="ic2">+</em></span>
            </div>
        <!}!>
    </li>
</script>

<script type="text/html" id="proUserTmpl">
    <dl class="proUser pr" userid="<!=userId!>" roleid="<!=roleId!>">
        <dt><img class="media-object" src="<!=userPic!>"></dt>
        <dd><em class="closed dn" style="display: none;" userid="<!=userId!>" roleid="<!=roleId!>">X</em></dd>
        <dd class="userId ellipsis userName" userid="<!=userId!>"><!=userName!></dd>
    </dl>
</script>

<script type="text/html" id="menuTreeItemTmpl">
    <li>
        <span>
            <!if(obj.type === 'DropDownList'){!>
                <i class="glyphicon glyphicon-minus-sign"></i>
            <!}!>
            <label class="checkbox-inline fl">
                <!if(obj.topNavChecked){!>
                    <input type="checkbox" class="topNav" value="<!=obj._id!>" checked><!=obj.text!>
                <!} else{!>
                    <input type="checkbox" class="topNav" value="<!=obj._id!>"><!=obj.text!>
                <!}!>
            </label>
        </span>
    </li>
</script>

<script type="text/html" id="benchmarkMenuTreeItemTmpl">
    <li>
        <span>
            <!if(obj.children && obj.children.length > 0){!>
                <i class="glyphicon glyphicon-minus-sign"></i>
                <label class="checkbox-inline">
                    <!if(obj.benchmarkChecked){!>
                        <input type="checkbox" class="benchmarkNav" value="<!=obj._id!>" checked><!=obj.name!>
                    <!} else{!>
                        <input type="checkbox" class="benchmarkNav" value="<!=obj._id!>"><!=obj.name!>
                    <!}!>
                </label>
            <!} else{!>
                <label class="checkbox-inline fl">
                    <!if(obj.benchmarkChecked){!>
                        <input type="checkbox" class="benchmarkNav" value="<!=obj._id!>" checked><!=obj.name!>
                    <!} else{!>
                        <input type="checkbox" class="benchmarkNav" value="<!=obj._id!>"><!=obj.name!>
                    <!}!>
                </label>
            <!}!>
        </span>
    </li>
</script>

<script type="text/html" id="projectRoleTmpl">
    <div class="proList" roleid="<!=obj.id!>">
        <div class="h40">
            <span class="ml20 fb"><!=obj.roleName!></span>
            <button type="button" class="btn btn-default delCon fr" data-dismiss="modal"
                    data-projectid="<!=obj.projectId!>" data-roleid="<!=obj.id!>" i18n="admin.panelManagement.DELETE">
            </button>
            <button type="button" class="btn btn-default setPage fr mr20" data-dismiss="modal"
                    data-projectid="<!=obj.projectId!>" data-roleid="<!=obj.id!>"
                    i18n="admin.panelManagement.CONFIGURATION_PAGE">
            </button>
        </div>
        <article class="userList"></article>
    </div>
</script>
<!--模版结束-->
<!--@formatter:on-->