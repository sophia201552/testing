!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l=a.document,m="2.1.4",n=function(a,b){return new n.fn.init(a,b)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return n.each(this,a,b)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(n.isPlainObject(d)||(e=n.isArray(d)))?(e?(e=!1,f=c&&n.isArray(c)?c:[]):f=c&&n.isPlainObject(c)?c:{},g[b]=n.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===n.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return!n.isArray(a)&&a-parseFloat(a)+1>=0},isPlainObject:function(a){return"object"!==n.type(a)||a.nodeType||n.isWindow(a)?!1:a.constructor&&!j.call(a.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=n.trim(a),a&&(1===a.indexOf("use strict")?(b=l.createElement("script"),b.text=a,l.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=s(a);if(c){if(g){for(;f>e;e++)if(d=b.apply(a[e],c),d===!1)break}else for(e in a)if(d=b.apply(a[e],c),d===!1)break}else if(g){for(;f>e;e++)if(d=b.call(a[e],e,a[e]),d===!1)break}else for(e in a)if(d=b.call(a[e],e,a[e]),d===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(o,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:g.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,h=s(a),i=[];if(h)for(;g>f;f++)d=b(a[f],f,c),null!=d&&i.push(d);else for(f in a)d=b(a[f],f,c),null!=d&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(c=a[b],b=a,a=c),n.isFunction(a)?(e=d.call(arguments,2),f=function(){return a.apply(b||this,e.concat(d.call(arguments)))},f.guid=a.guid=a.guid||n.guid++,f):void 0},now:Date.now,support:k}),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});function s(a){var b="length"in a&&a.length,c=n.type(a);return"function"===c||n.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ha(),z=ha(),A=ha(),B=function(a,b){return a===b&&(l=!0),0},C=1<<31,D={}.hasOwnProperty,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N=M.replace("w","w#"),O="\\["+L+"*("+M+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+L+"*\\]",P=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+O+")*)|.*)\\)|)",Q=new RegExp(L+"+","g"),R=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),S=new RegExp("^"+L+"*,"+L+"*"),T=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),U=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),V=new RegExp(P),W=new RegExp("^"+N+"$"),X={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+O),PSEUDO:new RegExp("^"+P),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,_=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,aa=/[+~]/,ba=/'|\\/g,ca=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),da=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},ea=function(){m()};try{H.apply(E=I.call(v.childNodes),v.childNodes),E[v.childNodes.length].nodeType}catch(fa){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function ga(a,b,d,e){var f,h,j,k,l,o,r,s,w,x;if((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,d=d||[],k=b.nodeType,"string"!=typeof a||!a||1!==k&&9!==k&&11!==k)return d;if(!e&&p){if(11!==k&&(f=_.exec(a)))if(j=f[1]){if(9===k){if(h=b.getElementById(j),!h||!h.parentNode)return d;if(h.id===j)return d.push(h),d}else if(b.ownerDocument&&(h=b.ownerDocument.getElementById(j))&&t(b,h)&&h.id===j)return d.push(h),d}else{if(f[2])return H.apply(d,b.getElementsByTagName(a)),d;if((j=f[3])&&c.getElementsByClassName)return H.apply(d,b.getElementsByClassName(j)),d}if(c.qsa&&(!q||!q.test(a))){if(s=r=u,w=b,x=1!==k&&a,1===k&&"object"!==b.nodeName.toLowerCase()){o=g(a),(r=b.getAttribute("id"))?s=r.replace(ba,"\\$&"):b.setAttribute("id",s),s="[id='"+s+"'] ",l=o.length;while(l--)o[l]=s+ra(o[l]);w=aa.test(a)&&pa(b.parentNode)||b,x=o.join(",")}if(x)try{return H.apply(d,w.querySelectorAll(x)),d}catch(y){}finally{r||b.removeAttribute("id")}}}return i(a.replace(R,"$1"),b,d,e)}function ha(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ia(a){return a[u]=!0,a}function ja(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ka(a,b){var c=a.split("|"),e=a.length;while(e--)d.attrHandle[c[e]]=b}function la(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function na(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function oa(a){return ia(function(b){return b=+b,ia(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function pa(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=ga.support={},f=ga.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=ga.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=g.documentElement,e=g.defaultView,e&&e!==e.top&&(e.addEventListener?e.addEventListener("unload",ea,!1):e.attachEvent&&e.attachEvent("onunload",ea)),p=!f(g),c.attributes=ja(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ja(function(a){return a.appendChild(g.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=$.test(g.getElementsByClassName),c.getById=ja(function(a){return o.appendChild(a).id=u,!g.getElementsByName||!g.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ca,da);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ca,da);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=$.test(g.querySelectorAll))&&(ja(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\f]' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+L+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+L+"*(?:value|"+K+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ja(function(a){var b=g.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+L+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=$.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ja(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",P)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=$.test(o.compareDocumentPosition),t=b||$.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===g||a.ownerDocument===v&&t(v,a)?-1:b===g||b.ownerDocument===v&&t(v,b)?1:k?J(k,a)-J(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,h=[a],i=[b];if(!e||!f)return a===g?-1:b===g?1:e?-1:f?1:k?J(k,a)-J(k,b):0;if(e===f)return la(a,b);c=a;while(c=c.parentNode)h.unshift(c);c=b;while(c=c.parentNode)i.unshift(c);while(h[d]===i[d])d++;return d?la(h[d],i[d]):h[d]===v?-1:i[d]===v?1:0},g):n},ga.matches=function(a,b){return ga(a,null,null,b)},ga.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(U,"='$1']"),!(!c.matchesSelector||!p||r&&r.test(b)||q&&q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return ga(b,n,null,[a]).length>0},ga.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},ga.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},ga.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},ga.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=ga.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=ga.selectors={cacheLength:50,createPseudo:ia,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ca,da),a[3]=(a[3]||a[4]||a[5]||"").replace(ca,da),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||ga.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&ga.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return X.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&V.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ca,da).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=ga.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(Q," ")+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){k=q[u]||(q[u]={}),j=k[a]||[],n=j[0]===w&&j[1],m=j[0]===w&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(1===l.nodeType&&++m&&l===b){k[a]=[w,n,m];break}}else if(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===w)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:1===l.nodeType)&&++m&&(s&&((l[u]||(l[u]={}))[a]=[w,m]),l===b))break;return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||ga.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ia(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=J(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ia(function(a){var b=[],c=[],d=h(a.replace(R,"$1"));return d[u]?ia(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ia(function(a){return function(b){return ga(a,b).length>0}}),contains:ia(function(a){return a=a.replace(ca,da),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ia(function(a){return W.test(a||"")||ga.error("unsupported lang: "+a),a=a.replace(ca,da).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Z.test(a.nodeName)},input:function(a){return Y.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:oa(function(){return[0]}),last:oa(function(a,b){return[b-1]}),eq:oa(function(a,b,c){return[0>c?c+b:c]}),even:oa(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:oa(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:oa(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:oa(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=ma(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=na(b);function qa(){}qa.prototype=d.filters=d.pseudos,d.setFilters=new qa,g=ga.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){(!c||(e=S.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=T.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(R," ")}),h=h.slice(c.length));for(g in d.filter)!(e=X[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?ga.error(a):z(a,i).slice(0)};function ra(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function sa(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(i=b[u]||(b[u]={}),(h=i[d])&&h[0]===w&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function ta(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function ua(a,b,c){for(var d=0,e=b.length;e>d;d++)ga(a,b[d],c);return c}function va(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function wa(a,b,c,d,e,f){return d&&!d[u]&&(d=wa(d)),e&&!e[u]&&(e=wa(e,f)),ia(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||ua(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:va(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=va(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?J(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=va(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)})}function xa(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=sa(function(a){return a===b},h,!0),l=sa(function(a){return J(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];f>i;i++)if(c=d.relative[a[i].type])m=[sa(ta(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return wa(i>1&&ta(m),i>1&&ra(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(R,"$1"),c,e>i&&xa(a.slice(i,e)),f>e&&xa(a=a.slice(e)),f>e&&ra(a))}m.push(c)}return ta(m)}function ya(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,m,o,p=0,q="0",r=f&&[],s=[],t=j,u=f||e&&d.find.TAG("*",k),v=w+=null==t?1:Math.random()||.1,x=u.length;for(k&&(j=g!==n&&g);q!==x&&null!=(l=u[q]);q++){if(e&&l){m=0;while(o=a[m++])if(o(l,g,h)){i.push(l);break}k&&(w=v)}c&&((l=!o&&l)&&p--,f&&r.push(l))}if(p+=q,c&&q!==p){m=0;while(o=b[m++])o(r,s,g,h);if(f){if(p>0)while(q--)r[q]||s[q]||(s[q]=F.call(i));s=va(s)}H.apply(i,s),k&&!f&&s.length>0&&p+b.length>1&&ga.uniqueSort(i)}return k&&(w=v,j=t),r};return c?ia(f):f}return h=ga.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=xa(b[c]),f[u]?d.push(f):e.push(f);f=A(a,ya(e,d)),f.selector=a}return f},i=ga.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(ca,da),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=X.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(ca,da),aa.test(j[0].type)&&pa(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&ra(j),!a)return H.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,aa.test(a)&&pa(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ja(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ja(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ka("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ja(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ka("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ja(function(a){return null==a.getAttribute("disabled")})||ka(K,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),ga}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=n.expr.match.needsContext,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;function x(a,b,c){if(n.isFunction(b))return n.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return n.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(w.test(b))return n.filter(b,a,c);b=n.filter(b,a)}return n.grep(a,function(a){return g.call(b,a)>=0!==c})}n.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(n(a).filter(function(){for(b=0;c>b;b++)if(n.contains(e[b],this))return!0}));for(b=0;c>b;b++)n.find(a,e[b],d);return d=this.pushStack(c>1?n.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(x(this,a||[],!1))},not:function(a){return this.pushStack(x(this,a||[],!0))},is:function(a){return!!x(this,"string"==typeof a&&u.test(a)?n(a):a||[],!1).length}});var y,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=n.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:z.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||y).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:l,!0)),v.test(c[1])&&n.isPlainObject(b))for(c in b)n.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}return d=l.getElementById(c[2]),d&&d.parentNode&&(this.length=1,this[0]=d),this.context=l,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?"undefined"!=typeof y.ready?y.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))};A.prototype=n.fn,y=n(l);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};n.extend({dir:function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&n(a).is(c))break;d.push(a)}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),n.fn.extend({has:function(a){var b=n(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(n.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=u.test(a)||"string"!=typeof a?n(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?n.unique(f):f)},index:function(a){return a?"string"==typeof a?g.call(n(a),this[0]):g.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.unique(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function D(a,b){while((a=a[b])&&1!==a.nodeType);return a}n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return n.dir(a,"parentNode")},parentsUntil:function(a,b,c){return n.dir(a,"parentNode",c)},next:function(a){return D(a,"nextSibling")},prev:function(a){return D(a,"previousSibling")},nextAll:function(a){return n.dir(a,"nextSibling")},prevAll:function(a){return n.dir(a,"previousSibling")},nextUntil:function(a,b,c){return n.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return n.dir(a,"previousSibling",c)},siblings:function(a){return n.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return n.sibling(a.firstChild)},contents:function(a){return a.contentDocument||n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=n.filter(d,e)),this.length>1&&(C[a]||n.unique(e),B.test(a)&&e.reverse()),this.pushStack(e)}});var E=/\S+/g,F={};function G(a){var b=F[a]={};return n.each(a.match(E)||[],function(a,c){b[c]=!0}),b}n.Callbacks=function(a){a="string"==typeof a?F[a]||G(a):n.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(b=a.memory&&l,c=!0,g=e||0,e=0,f=h.length,d=!0;h&&f>g;g++)if(h[g].apply(l[0],l[1])===!1&&a.stopOnFalse){b=!1;break}d=!1,h&&(i?i.length&&j(i.shift()):b?h=[]:k.disable())},k={add:function(){if(h){var c=h.length;!function g(b){n.each(b,function(b,c){var d=n.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&g(c)})}(arguments),d?f=h.length:b&&(e=c,j(b))}return this},remove:function(){return h&&n.each(arguments,function(a,b){var c;while((c=n.inArray(b,h,c))>-1)h.splice(c,1),d&&(f>=c&&f--,g>=c&&g--)}),this},has:function(a){return a?n.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],f=0,this},disable:function(){return h=i=b=void 0,this},disabled:function(){return!h},lock:function(){return i=void 0,b||k.disable(),this},locked:function(){return!i},fireWith:function(a,b){return!h||c&&!i||(b=b||[],b=[a,b.slice?b.slice():b],d?i.push(b):j(b)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!c}};return k},n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&n.isFunction(a.promise)?e:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(e>1)for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++)c[b]&&n.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f;return f||g.resolveWith(k,c),g.promise()}});var H;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){(a===!0?--n.readyWait:n.isReady)||(n.isReady=!0,a!==!0&&--n.readyWait>0||(H.resolveWith(l,[n]),n.fn.triggerHandler&&(n(l).triggerHandler("ready"),n(l).off("ready"))))}});function I(){l.removeEventListener("DOMContentLoaded",I,!1),a.removeEventListener("load",I,!1),n.ready()}n.ready.promise=function(b){return H||(H=n.Deferred(),"complete"===l.readyState?setTimeout(n.ready):(l.addEventListener("DOMContentLoaded",I,!1),a.addEventListener("load",I,!1))),H.promise(b)},n.ready.promise();var J=n.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===n.type(c)){e=!0;for(h in c)n.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(n(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f};n.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function K(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=n.expando+K.uid++}K.uid=1,K.accepts=n.acceptData,K.prototype={key:function(a){if(!K.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=K.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,n.extend(a,b)}}return this.cache[c]||(this.cache[c]={}),c},set:function(a,b,c){var d,e=this.key(a),f=this.cache[e];if("string"==typeof b)f[b]=c;else if(n.isEmptyObject(f))n.extend(this.cache[e],b);else for(d in b)f[d]=b[d];return f},get:function(a,b){var c=this.cache[this.key(a)];return void 0===b?c:c[b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,n.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=this.key(a),g=this.cache[f];if(void 0===b)this.cache[f]={};else{n.isArray(b)?d=b.concat(b.map(n.camelCase)):(e=n.camelCase(b),b in g?d=[b,e]:(d=e,d=d in g?[d]:d.match(E)||[])),c=d.length;while(c--)delete g[d[c]]}},hasData:function(a){return!n.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var L=new K,M=new K,N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;function P(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(O,"-$1").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:N.test(c)?n.parseJSON(c):c}catch(e){}M.set(a,b,c)}else c=void 0;return c}n.extend({hasData:function(a){return M.hasData(a)||L.hasData(a)},data:function(a,b,c){return M.access(a,b,c)},removeData:function(a,b){M.remove(a,b)},_data:function(a,b,c){return L.access(a,b,c)},_removeData:function(a,b){L.remove(a,b)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=M.get(f),1===f.nodeType&&!L.get(f,"hasDataAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=n.camelCase(d.slice(5)),P(f,d,e[d])));L.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){M.set(this,a)}):J(this,function(b){var c,d=n.camelCase(a);if(f&&void 0===b){if(c=M.get(f,a),void 0!==c)return c;if(c=M.get(f,d),void 0!==c)return c;if(c=P(f,d,void 0),void 0!==c)return c}else this.each(function(){var c=M.get(this,d);M.set(this,d,b),-1!==a.indexOf("-")&&void 0!==c&&M.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){M.remove(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=L.get(a,b),c&&(!d||n.isArray(c)?d=L.access(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return L.get(a,c)||L.access(a,c,{empty:n.Callbacks("once memory").add(function(){L.remove(a,[b+"queue",c])})})}}),n.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=L.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var Q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,R=["Top","Right","Bottom","Left"],S=function(a,b){return a=b||a,"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)},T=/^(?:checkbox|radio)$/i;!function(){var a=l.createDocumentFragment(),b=a.appendChild(l.createElement("div")),c=l.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),k.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var U="undefined";k.focusinBubbles="onfocusin"in a;var V=/^key/,W=/^(?:mouse|pointer|contextmenu)|click/,X=/^(?:focusinfocus|focusoutblur)$/,Y=/^([^.]*)(?:\.(.+)|)$/;function Z(){return!0}function $(){return!1}function _(){try{return l.activeElement}catch(a){}}n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=L.get(a);if(r){c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=n.guid++),(i=r.events)||(i=r.events={}),(g=r.handle)||(g=r.handle=function(b){return typeof n!==U&&n.event.triggered!==b.type?n.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(E)||[""],j=b.length;while(j--)h=Y.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o&&(l=n.event.special[o]||{},o=(e?l.delegateType:l.bindType)||o,l=n.event.special[o]||{},k=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(".")},f),(m=i[o])||(m=i[o]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,p,g)!==!1||a.addEventListener&&a.addEventListener(o,g,!1)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),n.event.global[o]=!0)}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=L.hasData(a)&&L.get(a);if(r&&(i=r.events)){b=(b||"").match(E)||[""],j=b.length;while(j--)if(h=Y.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=i[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],!e&&q!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||n.removeEvent(a,o,r.handle),delete i[o])}else for(o in i)n.event.remove(a,o+b[j],c,d,!0);n.isEmptyObject(i)&&(delete r.handle,L.remove(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,m,o,p=[d||l],q=j.call(b,"type")?b.type:b,r=j.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||l,3!==d.nodeType&&8!==d.nodeType&&!X.test(q+n.event.triggered)&&(q.indexOf(".")>=0&&(r=q.split("."),q=r.shift(),r.sort()),k=q.indexOf(":")<0&&"on"+q,b=b[n.expando]?b:new n.Event(q,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=r.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:n.makeArray(c,[b]),o=n.event.special[q]||{},e||!o.trigger||o.trigger.apply(d,c)!==!1)){if(!e&&!o.noBubble&&!n.isWindow(d)){for(i=o.delegateType||q,X.test(i+q)||(g=g.parentNode);g;g=g.parentNode)p.push(g),h=g;h===(d.ownerDocument||l)&&p.push(h.defaultView||h.parentWindow||a)}f=0;while((g=p[f++])&&!b.isPropagationStopped())b.type=f>1?i:o.bindType||q,m=(L.get(g,"events")||{})[b.type]&&L.get(g,"handle"),m&&m.apply(g,c),m=k&&g[k],m&&m.apply&&n.acceptData(g)&&(b.result=m.apply(g,c),b.result===!1&&b.preventDefault());return b.type=q,e||b.isDefaultPrevented()||o._default&&o._default.apply(p.pop(),c)!==!1||!n.acceptData(d)||k&&n.isFunction(d[q])&&!n.isWindow(d)&&(h=d[k],h&&(d[k]=null),n.event.triggered=q,d[q](),n.event.triggered=void 0,h&&(d[k]=h)),b.result}},dispatch:function(a){a=n.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(L.get(this,"events")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=n.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,c=0;while((g=f.handlers[c++])&&!a.isImmediatePropagationStopped())(!a.namespace_re||a.namespace_re.test(g.namespace))&&(a.handleObj=g,a.data=g.data,e=((n.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==e&&(a.result=e)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!==this;i=i.parentNode||this)if(i.disabled!==!0||"click"!==a.type){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?n(e,this).index(i)>=0:n.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||l,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},fix:function(a){if(a[n.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=W.test(e)?this.mouseHooks:V.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new n.Event(f),b=d.length;while(b--)c=d[b],a[c]=f[c];return a.target||(a.target=l),3===a.target.nodeType&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==_()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===_()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&n.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=n.extend(new n.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?n.event.trigger(e,null,b):n.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},n.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)},n.Event=function(a,b){return this instanceof n.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?Z:$):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),void(this[n.expando]=!0)):new n.Event(a,b)},n.Event.prototype={isDefaultPrevented:$,isPropagationStopped:$,isImmediatePropagationStopped:$,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=Z,a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=Z,a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=Z,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!n.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),k.focusinBubbles||n.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a),!0)};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=L.access(d,b);e||d.addEventListener(a,c,!0),L.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=L.access(d,b)-1;e?L.access(d,b,e):(d.removeEventListener(a,c,!0),L.remove(d,b))}}}),n.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(g in a)this.on(g,b,c,a[g],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=$;else if(!d)return this;return 1===e&&(f=d,d=function(a){return n().off(a),f.apply(this,arguments)},d.guid=f.guid||(f.guid=n.guid++)),this.each(function(){n.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,n(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=$),this.each(function(){n.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?n.event.trigger(a,b,c,!0):void 0}});var aa=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ba=/<([\w:]+)/,ca=/<|&#?\w+;/,da=/<(?:script|style|link)/i,ea=/checked\s*(?:[^=]|=\s*.checked.)/i,fa=/^$|\/(?:java|ecma)script/i,ga=/^true\/(.*)/,ha=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ia={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ia.optgroup=ia.option,ia.tbody=ia.tfoot=ia.colgroup=ia.caption=ia.thead,ia.th=ia.td;function ja(a,b){return n.nodeName(a,"table")&&n.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function ka(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function la(a){var b=ga.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function ma(a,b){for(var c=0,d=a.length;d>c;c++)L.set(a[c],"globalEval",!b||L.get(b[c],"globalEval"))}function na(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(L.hasData(a)&&(f=L.access(a),g=L.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)n.event.add(b,e,j[e][c])}M.hasData(a)&&(h=M.access(a),i=n.extend({},h),M.set(b,i))}}function oa(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&n.nodeName(a,b)?n.merge([a],c):c}function pa(a,b){var c=b.nodeName.toLowerCase();"input"===c&&T.test(a.type)?b.checked=a.checked:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}n.extend({clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=n.contains(a.ownerDocument,a);if(!(k.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(g=oa(h),f=oa(a),d=0,e=f.length;e>d;d++)pa(f[d],g[d]);if(b)if(c)for(f=f||oa(a),g=g||oa(h),d=0,e=f.length;e>d;d++)na(f[d],g[d]);else na(a,h);return g=oa(h,"script"),g.length>0&&ma(g,!i&&oa(a,"script")),h},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k=b.createDocumentFragment(),l=[],m=0,o=a.length;o>m;m++)if(e=a[m],e||0===e)if("object"===n.type(e))n.merge(l,e.nodeType?[e]:e);else if(ca.test(e)){f=f||k.appendChild(b.createElement("div")),g=(ba.exec(e)||["",""])[1].toLowerCase(),h=ia[g]||ia._default,f.innerHTML=h[1]+e.replace(aa,"<$1></$2>")+h[2],j=h[0];while(j--)f=f.lastChild;n.merge(l,f.childNodes),f=k.firstChild,f.textContent=""}else l.push(b.createTextNode(e));k.textContent="",m=0;while(e=l[m++])if((!d||-1===n.inArray(e,d))&&(i=n.contains(e.ownerDocument,e),f=oa(k.appendChild(e),"script"),i&&ma(f),c)){j=0;while(e=f[j++])fa.test(e.type||"")&&c.push(e)}return k},cleanData:function(a){for(var b,c,d,e,f=n.event.special,g=0;void 0!==(c=a[g]);g++){if(n.acceptData(c)&&(e=c[L.expando],e&&(b=L.cache[e]))){if(b.events)for(d in b.events)f[d]?n.event.remove(c,d):n.removeEvent(c,d,b.handle);L.cache[e]&&delete L.cache[e]}delete M.cache[c[M.expando]]}}}),n.fn.extend({text:function(a){return J(this,function(a){return void 0===a?n.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=a)})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=ja(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=ja(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?n.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||n.cleanData(oa(c)),c.parentNode&&(b&&n.contains(c.ownerDocument,c)&&ma(oa(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(n.cleanData(oa(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return J(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!da.test(a)&&!ia[(ba.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(aa,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(n.cleanData(oa(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,n.cleanData(oa(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,l=this.length,m=this,o=l-1,p=a[0],q=n.isFunction(p);if(q||l>1&&"string"==typeof p&&!k.checkClone&&ea.test(p))return this.each(function(c){var d=m.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(l&&(c=n.buildFragment(a,this[0].ownerDocument,!1,this),d=c.firstChild,1===c.childNodes.length&&(c=d),d)){for(f=n.map(oa(c,"script"),ka),g=f.length;l>j;j++)h=c,j!==o&&(h=n.clone(h,!0,!0),g&&n.merge(f,oa(h,"script"))),b.call(this[j],h,j);if(g)for(i=f[f.length-1].ownerDocument,n.map(f,la),j=0;g>j;j++)h=f[j],fa.test(h.type||"")&&!L.access(h,"globalEval")&&n.contains(i,h)&&(h.src?n._evalUrl&&n._evalUrl(h.src):n.globalEval(h.textContent.replace(ha,"")))}return this}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(a){for(var c,d=[],e=n(a),g=e.length-1,h=0;g>=h;h++)c=h===g?this:this.clone(!0),n(e[h])[b](c),f.apply(d,c.get());return this.pushStack(d)}});var qa,ra={};function sa(b,c){var d,e=n(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:n.css(e[0],"display");return e.detach(),f}function ta(a){var b=l,c=ra[a];return c||(c=sa(a,b),"none"!==c&&c||(qa=(qa||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=qa[0].contentDocument,b.write(),b.close(),c=sa(a,b),qa.detach()),ra[a]=c),c}var ua=/^margin/,va=new RegExp("^("+Q+")(?!px)[a-z%]+$","i"),wa=function(b){return b.ownerDocument.defaultView.opener?b.ownerDocument.defaultView.getComputedStyle(b,null):a.getComputedStyle(b,null)};function xa(a,b,c){var d,e,f,g,h=a.style;return c=c||wa(a),c&&(g=c.getPropertyValue(b)||c[b]),c&&(""!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),va.test(g)&&ua.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function ya(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}!function(){var b,c,d=l.documentElement,e=l.createElement("div"),f=l.createElement("div");if(f.style){f.style.backgroundClip="content-box",f.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===f.style.backgroundClip,e.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",e.appendChild(f);function g(){f.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",f.innerHTML="",d.appendChild(e);var g=a.getComputedStyle(f,null);b="1%"!==g.top,c="4px"===g.width,d.removeChild(e)}a.getComputedStyle&&n.extend(k,{pixelPosition:function(){return g(),b},boxSizingReliable:function(){return null==c&&g(),c},reliableMarginRight:function(){var b,c=f.appendChild(l.createElement("div"));return c.style.cssText=f.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",f.style.width="1px",d.appendChild(e),b=!parseFloat(a.getComputedStyle(c,null).marginRight),d.removeChild(e),f.removeChild(c),b}})}}(),n.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var za=/^(none|table(?!-c[ea]).+)/,Aa=new RegExp("^("+Q+")(.*)$","i"),Ba=new RegExp("^([+-])=("+Q+")","i"),Ca={position:"absolute",visibility:"hidden",display:"block"},Da={letterSpacing:"0",fontWeight:"400"},Ea=["Webkit","O","Moz","ms"];function Fa(a,b){if(b in a)return b;var c=b[0].toUpperCase()+b.slice(1),d=b,e=Ea.length;while(e--)if(b=Ea[e]+c,b in a)return b;return d}function Ga(a,b,c){var d=Aa.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Ha(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=n.css(a,c+R[f],!0,e)),d?("content"===c&&(g-=n.css(a,"padding"+R[f],!0,e)),"margin"!==c&&(g-=n.css(a,"border"+R[f]+"Width",!0,e))):(g+=n.css(a,"padding"+R[f],!0,e),"padding"!==c&&(g+=n.css(a,"border"+R[f]+"Width",!0,e)));return g}function Ia(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=wa(a),g="border-box"===n.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=xa(a,b,f),(0>e||null==e)&&(e=a.style[b]),va.test(e))return e;d=g&&(k.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Ha(a,b,c||(g?"border":"content"),d,f)+"px"}function Ja(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=L.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&S(d)&&(f[g]=L.access(d,"olddisplay",ta(d.nodeName)))):(e=S(d),"none"===c&&e||L.set(d,"olddisplay",e?c:n.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=xa(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;return b=n.cssProps[h]||(n.cssProps[h]=Fa(i,h)),g=n.cssHooks[b]||n.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=Ba.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(n.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||n.cssNumber[h]||(c+="px"),k.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=Fa(a.style,h)),g=n.cssHooks[b]||n.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=xa(a,b,d)),"normal"===e&&b in Da&&(e=Da[b]),""===c||c?(f=parseFloat(e),c===!0||n.isNumeric(f)?f||0:e):e}}),n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?za.test(n.css(a,"display"))&&0===a.offsetWidth?n.swap(a,Ca,function(){return Ia(a,b,d)}):Ia(a,b,d):void 0},set:function(a,c,d){var e=d&&wa(a);return Ga(a,c,d?Ha(a,b,d,"border-box"===n.css(a,"boxSizing",!1,e),e):0)}}}),n.cssHooks.marginRight=ya(k.reliableMarginRight,function(a,b){return b?n.swap(a,{display:"inline-block"},xa,[a,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+R[d]+b]=f[d]||f[d-2]||f[0];return e}},ua.test(a)||(n.cssHooks[a+b].set=Ga)}),n.fn.extend({css:function(a,b){return J(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=wa(a),e=b.length;e>g;g++)f[b[g]]=n.css(a,b[g],!1,d);return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length>1)},show:function(){return Ja(this,!0)},hide:function(){return Ja(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){S(this)?n(this).show():n(this).hide()})}});function Ka(a,b,c,d,e){return new Ka.prototype.init(a,b,c,d,e)}n.Tween=Ka,Ka.prototype={constructor:Ka,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?"":"px")},cur:function(){var a=Ka.propHooks[this.prop];return a&&a.get?a.get(this):Ka.propHooks._default.get(this)},run:function(a){var b,c=Ka.propHooks[this.prop];return this.options.duration?this.pos=b=n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Ka.propHooks._default.set(this),this}},Ka.prototype.init.prototype=Ka.prototype,Ka.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=n.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[n.cssProps[a.prop]]||n.cssHooks[a.prop])?n.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Ka.propHooks.scrollTop=Ka.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},n.fx=Ka.prototype.init,n.fx.step={};var La,Ma,Na=/^(?:toggle|show|hide)$/,Oa=new RegExp("^(?:([+-])=|)("+Q+")([a-z%]*)$","i"),Pa=/queueHooks$/,Qa=[Va],Ra={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=Oa.exec(b),f=e&&e[3]||(n.cssNumber[a]?"":"px"),g=(n.cssNumber[a]||"px"!==f&&+d)&&Oa.exec(n.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,n.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function Sa(){return setTimeout(function(){La=void 0}),La=n.now()}function Ta(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=R[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function Ua(a,b,c){for(var d,e=(Ra[b]||[]).concat(Ra["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function Va(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},o=a.style,p=a.nodeType&&S(a),q=L.get(a,"fxshow");c.queue||(h=n._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,n.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=n.css(a,"display"),k="none"===j?L.get(a,"olddisplay")||ta(a.nodeName):j,"inline"===k&&"none"===n.css(a,"float")&&(o.display="inline-block")),c.overflow&&(o.overflow="hidden",l.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],Na.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}m[d]=q&&q[d]||n.style(a,d)}else j=void 0;if(n.isEmptyObject(m))"inline"===("none"===j?ta(a.nodeName):j)&&(o.display=j);else{q?"hidden"in q&&(p=q.hidden):q=L.access(a,"fxshow",{}),f&&(q.hidden=!p),p?n(a).show():l.done(function(){n(a).hide()}),l.done(function(){var b;L.remove(a,"fxshow");for(b in m)n.style(a,b,m[b])});for(d in m)g=Ua(p?q[d]:0,d,l),d in q||(q[d]=g.start,p&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function Wa(a,b){var c,d,e,f,g;for(c in a)if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=n.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function Xa(a,b,c){var d,e,f=0,g=Qa.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=La||Sa(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:La||Sa(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(Wa(k,j.opts.specialEasing);g>f;f++)if(d=Qa[f].call(j,a,k,j.opts))return d;return n.map(k,Ua,j),n.isFunction(j.opts.start)&&j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}n.Animation=n.extend(Xa,{tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],Ra[c]=Ra[c]||[],Ra[c].unshift(b)},prefilter:function(a,b){b?Qa.unshift(a):Qa.push(a)}}),n.speed=function(a,b,c){var d=a&&"object"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};return d.duration=n.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(S).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=Xa(this,n.extend({},a),f);(e||L.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=L.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&Pa.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&n.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=L.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),n.each(["toggle","show","hide"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(Ta(b,!0),a,d,e)}}),n.each({slideDown:Ta("show"),slideUp:Ta("hide"),slideToggle:Ta("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=0,c=n.timers;for(La=n.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||n.fx.stop(),La=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){Ma||(Ma=setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){clearInterval(Ma),Ma=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(a,b){return a=n.fx?n.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a=l.createElement("input"),b=l.createElement("select"),c=b.appendChild(l.createElement("option"));a.type="checkbox",k.checkOn=""!==a.value,k.optSelected=c.selected,b.disabled=!0,k.optDisabled=!c.disabled,a=l.createElement("input"),a.value="t",a.type="radio",k.radioValue="t"===a.value}();var Ya,Za,$a=n.expr.attrHandle;n.fn.extend({attr:function(a,b){return J(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===U?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),d=n.attrHooks[b]||(n.expr.match.bool.test(b)?Za:Ya)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=n.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void n.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(E);if(f&&1===a.nodeType)while(c=f[e++])d=n.propFix[c]||c,n.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!k.radioValue&&"radio"===b&&n.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),Za={set:function(a,b,c){return b===!1?n.removeAttr(a,c):a.setAttribute(c,c),c}},n.each(n.expr.match.bool.source.match(/\w+/g),function(a,b){var c=$a[b]||n.find.attr;$a[b]=function(a,b,d){var e,f;return d||(f=$a[b],$a[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,$a[b]=f),e}});var _a=/^(?:input|select|textarea|button)$/i;n.fn.extend({prop:function(a,b){return J(this,n.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[n.propFix[a]||a]})}}),n.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!n.isXMLDoc(a),f&&(b=n.propFix[b]||b,e=n.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||_a.test(a.nodeName)||a.href?a.tabIndex:-1}}}}),k.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this});var ab=/[\t\r\n\f]/g;n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h="string"==typeof a&&a,i=0,j=this.length;if(n.isFunction(a))return this.each(function(b){n(this).addClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ab," "):" ")){f=0;while(e=b[f++])d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=n.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0===arguments.length||"string"==typeof a&&a,i=0,j=this.length;if(n.isFunction(a))return this.each(function(b){n(this).removeClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ab," "):"")){f=0;while(e=b[f++])while(d.indexOf(" "+e+" ")>=0)d=d.replace(" "+e+" "," ");g=a?n.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(n.isFunction(a)?function(c){n(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c){var b,d=0,e=n(this),f=a.match(E)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else(c===U||"boolean"===c)&&(this.className&&L.set(this,"__className__",this.className),this.className=this.className||a===!1?"":L.get(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(ab," ").indexOf(b)>=0)return!0;return!1}});var bb=/\r/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,n(this).val()):a,null==e?e="":"number"==typeof e?e+="":n.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(bb,""):null==c?"":c)}}}),n.extend({valHooks:{option:{get:function(a){var b=n.find.attr(a,"value");return null!=b?b:n.trim(n.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(k.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&n.nodeName(c.parentNode,"optgroup"))){if(b=n(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=n.makeArray(b),g=e.length;while(g--)d=e[g],(d.selected=n.inArray(d.value,f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)>=0:void 0}},k.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var cb=n.now(),db=/\?/;n.parseJSON=function(a){return JSON.parse(a+"")},n.parseXML=function(a){var b,c;if(!a||"string"!=typeof a)return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(d){b=void 0}return(!b||b.getElementsByTagName("parsererror").length)&&n.error("Invalid XML: "+a),b};var eb=/#.*$/,fb=/([?&])_=[^&]*/,gb=/^(.*?):[ \t]*([^\r\n]*)$/gm,hb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ib=/^(?:GET|HEAD)$/,jb=/^\/\//,kb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,lb={},mb={},nb="*/".concat("*"),ob=a.location.href,pb=kb.exec(ob.toLowerCase())||[];function qb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(E)||[];if(n.isFunction(c))while(d=f[e++])"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function rb(a,b,c,d){var e={},f=a===mb;function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function sb(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&n.extend(!0,a,d),a}function tb(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function ub(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ob,type:"GET",isLocal:hb.test(pb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":nb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?sb(sb(a,n.ajaxSettings),b):sb(n.ajaxSettings,a)},ajaxPrefilter:qb(lb),ajaxTransport:qb(mb),ajax:function(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=n.ajaxSetup({},b),l=k.context||k,m=k.context&&(l.nodeType||l.jquery)?n(l):n.event,o=n.Deferred(),p=n.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!f){f={};while(b=gb.exec(e))f[b[1].toLowerCase()]=b[2]}b=f[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?e:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return c&&c.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||ob)+"").replace(eb,"").replace(jb,pb[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=n.trim(k.dataType||"*").toLowerCase().match(E)||[""],null==k.crossDomain&&(h=kb.exec(k.url.toLowerCase()),k.crossDomain=!(!h||h[1]===pb[1]&&h[2]===pb[2]&&(h[3]||("http:"===h[1]?"80":"443"))===(pb[3]||("http:"===pb[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=n.param(k.data,k.traditional)),rb(lb,k,b,v),2===t)return v;i=n.event&&k.global,i&&0===n.active++&&n.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!ib.test(k.type),d=k.url,k.hasContent||(k.data&&(d=k.url+=(db.test(d)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=fb.test(d)?d.replace(fb,"$1_="+cb++):d+(db.test(d)?"&":"?")+"_="+cb++)),k.ifModified&&(n.lastModified[d]&&v.setRequestHeader("If-Modified-Since",n.lastModified[d]),n.etag[d]&&v.setRequestHeader("If-None-Match",n.etag[d])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+nb+"; q=0.01":""):k.accepts["*"]);for(j in k.headers)v.setRequestHeader(j,k.headers[j]);if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t))return v.abort();u="abort";for(j in{success:1,error:1,complete:1})v[j](k[j]);if(c=rb(mb,k,b,v)){v.readyState=1,i&&m.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,c.send(r,x)}catch(w){if(!(2>t))throw w;x(-1,w)}}else x(-1,"No Transport");function x(a,b,f,h){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),c=void 0,e=h||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,f&&(u=tb(k,v,f)),u=ub(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(n.lastModified[d]=w),w=v.getResponseHeader("etag"),w&&(n.etag[d]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,i&&m.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),i&&(m.trigger("ajaxComplete",[v,k]),--n.active||n.event.trigger("ajaxStop")))}return v},getJSON:function(a,b,c){return n.get(a,b,c,"json")},getScript:function(a,b){return n.get(a,void 0,b,"script")}}),n.each(["get","post"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(a){var b;return n.isFunction(a)?this.each(function(b){n(this).wrapAll(a.call(this,b))}):(this[0]&&(b=n(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return this.each(n.isFunction(a)?function(b){n(this).wrapInner(a.call(this,b))}:function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0},n.expr.filters.visible=function(a){return!n.expr.filters.hidden(a)};var vb=/%20/g,wb=/\[\]$/,xb=/\r?\n/g,yb=/^(?:submit|button|image|reset|file)$/i,zb=/^(?:input|select|textarea|keygen)/i;function Ab(a,b,c,d){var e;if(n.isArray(b))n.each(b,function(b,e){c||wb.test(a)?d(a,e):Ab(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==n.type(b))d(a,b);else for(e in b)Ab(a+"["+e+"]",b[e],c,d)}n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,function(){e(this.name,this.value)});else for(c in a)Ab(c,a[c],b,e);return d.join("&").replace(vb,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&zb.test(this.nodeName)&&!yb.test(a)&&(this.checked||!T.test(a))}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(xb,"\r\n")}}):{name:b.name,value:c.replace(xb,"\r\n")}}).get()}}),n.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var Bb=0,Cb={},Db={0:200,1223:204},Eb=n.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var a in Cb)Cb[a]()}),k.cors=!!Eb&&"withCredentials"in Eb,k.ajax=Eb=!!Eb,n.ajaxTransport(function(a){var b;return k.cors||Eb&&!a.crossDomain?{send:function(c,d){var e,f=a.xhr(),g=++Bb;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)f.setRequestHeader(e,c[e]);b=function(a){return function(){b&&(delete Cb[g],b=f.onload=f.onerror=null,"abort"===a?f.abort():"error"===a?d(f.status,f.statusText):d(Db[f.status]||f.status,f.statusText,"string"==typeof f.responseText?{text:f.responseText}:void 0,f.getAllResponseHeaders()))}},f.onload=b(),f.onerror=b("error"),b=Cb[g]=b("abort");try{f.send(a.hasContent&&a.data||null)}catch(h){if(b)throw h}},abort:function(){b&&b()}}:void 0}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return n.globalEval(a),a}}}),n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),n.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=n("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),l.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Fb=[],Gb=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Fb.pop()||n.expando+"_"+cb++;return this[a]=!0,a}}),n.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Gb.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Gb.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Gb,"$1"+e):b.jsonp!==!1&&(b.url+=(db.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||n.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Fb.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),n.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||l;var d=v.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=n.buildFragment([a],b,e),e&&e.length&&n(e).remove(),n.merge([],d.childNodes))};var Hb=n.fn.load;n.fn.load=function(a,b,c){if("string"!=typeof a&&Hb)return Hb.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=n.trim(a.slice(h)),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&n.ajax({url:a,type:e,dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?n("<div>").append(n.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,f||[a.responseText,b,a])}),this},n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};var Ib=a.document.documentElement;function Jb(a){return n.isWindow(a)?a:9===a.nodeType&&a.defaultView}n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,"position"),l=n(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=n.css(a,"top"),i=n.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(f)return b=f.documentElement,n.contains(b,d)?(typeof d.getBoundingClientRect!==U&&(e=d.getBoundingClientRect()),c=Jb(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===n.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],"html")||(d=a.offset()),d.top+=n.css(a[0],"borderTopWidth",!0),d.left+=n.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-n.css(c,"marginTop",!0),left:b.left-d.left-n.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||Ib;while(a&&!n.nodeName(a,"html")&&"static"===n.css(a,"position"))a=a.offsetParent;return a||Ib})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var d="pageYOffset"===c;n.fn[b]=function(e){return J(this,function(b,e,f){var g=Jb(b);return void 0===f?g?g[c]:b[e]:void(g?g.scrollTo(d?a.pageXOffset:f,d?f:a.pageYOffset):b[e]=f)},b,e,arguments.length,null)}}),n.each(["top","left"],function(a,b){n.cssHooks[b]=ya(k.pixelPosition,function(a,c){return c?(c=xa(a,b),va.test(c)?n(a).position()[b]+"px":c):void 0})}),n.each({Height:"height",Width:"width"},function(a,b){n.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return J(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),n.fn.size=function(){return this.length},n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var Kb=a.jQuery,Lb=a.$;return n.noConflict=function(b){return a.$===n&&(a.$=Lb),b&&a.jQuery===n&&(a.jQuery=Kb),n},typeof b===U&&(a.jQuery=a.$=n),n});
!function($){function UTCDate(){return new Date(Date.UTC.apply(Date,arguments));}
function UTCToday(){var today=new Date();return UTCDate(today.getUTCFullYear(),today.getUTCMonth(),today.getUTCDate(),today.getUTCHours(),today.getUTCMinutes(),today.getUTCSeconds(),0);}
var extend={monthAbbreviation:false};var Datetimepicker=function(element,options){var that=this;this.element=$(element);this.container=options.container||'body';this.language=options.language||this.element.data('date-language')||"en";this.language=this.language in dates?this.language:"en";this.isRTL=dates[this.language].rtl||false;if(options.monthAbbreviation){extend.monthAbbreviation=true;}
this.formatType=options.formatType||this.element.data('format-type')||'standard';this.format=DPGlobal.parseFormat(options.format||this.element.data('date-format')||dates[this.language].format||DPGlobal.getDefaultFormat(this.formatType,'input'),this.formatType);this.isInline=false;this.isVisible=false;this.isInput=this.element.is('input');this.bootcssVer=this.isInput?(this.element.is('.form-control')?3:2):(this.bootcssVer=this.element.is('.input-group')?3:2);this.component=this.element.is('.date')?(this.bootcssVer==3?this.element.find('.input-group-addon .glyphicon-th, .input-group-addon .glyphicon-time, .input-group-addon .glyphicon-calendar').parent():this.element.find('.add-on .icon-th, .add-on .icon-time, .add-on .icon-calendar').parent()):false;this.componentReset=this.element.is('.date')?(this.bootcssVer==3?this.element.find('.input-group-addon .glyphicon-remove').parent():this.element.find('.add-on .icon-remove').parent()):false;this.hasInput=this.component&&this.element.find('input').length;if(this.component&&this.component.length===0){this.component=false;}
this.linkField=options.linkField||this.element.data('link-field')||false;this.linkFormat=DPGlobal.parseFormat(options.linkFormat||this.element.data('link-format')||DPGlobal.getDefaultFormat(this.formatType,'link'),this.formatType);this.minuteStep=options.minuteStep||this.element.data('minute-step')||5;this.pickerPosition=options.pickerPosition||this.element.data('picker-position')||'bottom-right';this.showMeridian=options.showMeridian||this.element.data('show-meridian')||false;this.initialDate=options.initialDate||new Date();this._attachEvents();this.formatViewType="datetime";if('formatViewType'in options){this.formatViewType=options.formatViewType;}else if('formatViewType'in this.element.data()){this.formatViewType=this.element.data('formatViewType');}
this.minView=0;if('minView'in options){this.minView=options.minView;}else if('minView'in this.element.data()){this.minView=this.element.data('min-view');}
this.minView=DPGlobal.convertViewMode(this.minView);this.showWeek=options.showWeek,this.weeklyString=null,this.dataNOW=null,this.currentTR=null||false;if(this.showWeek){var oldVal=this.element.val();var oldDate=new Date(oldVal);var nowWeek=this.iso8601Week(oldDate);this.element.val(oldDate.getFullYear()+'-'+nowWeek+'-week');}
this.maxView=DPGlobal.modes.length-1;if('maxView'in options){this.maxView=options.maxView;}else if('maxView'in this.element.data()){this.maxView=this.element.data('max-view');}
this.maxView=DPGlobal.convertViewMode(this.maxView);this.wheelViewModeNavigation=false;if('wheelViewModeNavigation'in options){this.wheelViewModeNavigation=options.wheelViewModeNavigation;}else if('wheelViewModeNavigation'in this.element.data()){this.wheelViewModeNavigation=this.element.data('view-mode-wheel-navigation');}
this.wheelViewModeNavigationInverseDirection=false;if('wheelViewModeNavigationInverseDirection'in options){this.wheelViewModeNavigationInverseDirection=options.wheelViewModeNavigationInverseDirection;}else if('wheelViewModeNavigationInverseDirection'in this.element.data()){this.wheelViewModeNavigationInverseDirection=this.element.data('view-mode-wheel-navigation-inverse-dir');}
this.wheelViewModeNavigationDelay=100;if('wheelViewModeNavigationDelay'in options){this.wheelViewModeNavigationDelay=options.wheelViewModeNavigationDelay;}else if('wheelViewModeNavigationDelay'in this.element.data()){this.wheelViewModeNavigationDelay=this.element.data('view-mode-wheel-navigation-delay');}
this.startViewMode=2;if('startView'in options){this.startViewMode=options.startView;}else if('startView'in this.element.data()){this.startViewMode=this.element.data('start-view');}
this.startViewMode=DPGlobal.convertViewMode(this.startViewMode);this.viewMode=this.startViewMode;this.viewSelect=this.minView;if('viewSelect'in options){this.viewSelect=options.viewSelect;}else if('viewSelect'in this.element.data()){this.viewSelect=this.element.data('view-select');}
this.viewSelect=DPGlobal.convertViewMode(this.viewSelect);this.forceParse=true;if('forceParse'in options){this.forceParse=options.forceParse;}else if('dateForceParse'in this.element.data()){this.forceParse=this.element.data('date-force-parse');}
this.picker=$((this.bootcssVer==3)?DPGlobal.templateV3:DPGlobal.template).appendTo(this.isInline?this.element:this.container).on({click:$.proxy(this.click,this),mousedown:$.proxy(this.mousedown,this)});if(this.wheelViewModeNavigation){if($.fn.mousewheel){this.picker.on({mousewheel:$.proxy(this.mousewheel,this)});}else{console.log("Mouse Wheel event is not supported. Please include the jQuery Mouse Wheel plugin before enabling this option");}}
if(this.isInline){this.picker.addClass('datetimepicker-inline');}else{this.picker.addClass('datetimepicker-dropdown-'+this.pickerPosition+' dropdown-menu');}
if(this.isRTL){this.picker.addClass('datetimepicker-rtl');if(this.bootcssVer==3){this.picker.find('.prev span, .next span').toggleClass('glyphicon-arrow-left glyphicon-arrow-right');}else{this.picker.find('.prev i, .next i').toggleClass('icon-arrow-left icon-arrow-right');};}
$(document).on('mousedown',function(e){if($(e.target).closest('.datetimepicker').length===0){that.hide();}});this.autoclose=false;if('autoclose'in options){this.autoclose=options.autoclose;}else if('dateAutoclose'in this.element.data()){this.autoclose=this.element.data('date-autoclose');}
this.keyboardNavigation=true;if('keyboardNavigation'in options){this.keyboardNavigation=options.keyboardNavigation;}else if('dateKeyboardNavigation'in this.element.data()){this.keyboardNavigation=this.element.data('date-keyboard-navigation');}
this.todayBtn=(options.todayBtn||this.element.data('date-today-btn')||false);this.todayHighlight=(options.todayHighlight||this.element.data('date-today-highlight')||false);this.weekStart=((options.weekStart||this.element.data('date-weekstart')||dates[this.language].weekStart||0)%7);this.weekEnd=((this.weekStart+6)%7);this.startDate=-Infinity;this.endDate=Infinity;this.daysOfWeekDisabled=[];this.setStartDate(options.startDate||this.element.data('date-startdate'));this.setEndDate(options.endDate||this.element.data('date-enddate'));this.setDaysOfWeekDisabled(options.daysOfWeekDisabled||this.element.data('date-days-of-week-disabled'));this.fillDow();this.fillMonths();this.update();this.showMode();if(this.isInline){this.show();}};Datetimepicker.prototype={constructor:Datetimepicker,_events:[],_attachEvents:function(){this._detachEvents();if(this.isInput){this._events=[[this.element,{focus:$.proxy(this.show,this),keyup:$.proxy(this.update,this),keydown:$.proxy(this.keydown,this)}]];}
else if(this.component&&this.hasInput){this._events=[[this.element.find('input'),{focus:$.proxy(this.show,this),keyup:$.proxy(this.update,this),keydown:$.proxy(this.keydown,this)}],[this.component,{click:$.proxy(this.show,this)}]];if(this.componentReset){this._events.push([this.componentReset,{click:$.proxy(this.reset,this)}]);}}
else if(this.element.is('div')){this.isInline=true;}
else{this._events=[[this.element,{click:$.proxy(this.show,this)}]];}
for(var i=0,el,ev;i<this._events.length;i++){el=this._events[i][0];ev=this._events[i][1];el.on(ev);}},_detachEvents:function(){for(var i=0,el,ev;i<this._events.length;i++){el=this._events[i][0];ev=this._events[i][1];el.off(ev);}
this._events=[];},show:function(e){this.picker.show();this.height=this.component?this.component.outerHeight():this.element.outerHeight();if(this.forceParse){this.update();}
this.place();$(window).on('resize',$.proxy(this.place,this));if(e){e.stopPropagation();e.preventDefault();}
this.isVisible=true;this.element.trigger({type:'show',date:this.date});},hide:function(e){if(!this.isVisible)return;if(this.isInline)return;this.picker.hide();$(window).off('resize',this.place);this.viewMode=this.startViewMode;this.showMode();if(!this.isInput){$(document).off('mousedown',this.hide);}
if(this.forceParse&&(this.isInput&&this.showWeek?this.dataNOW:this.element.val()||this.hasInput&&this.showWeek?this.dataNOW:this.element.find('input').val()))
this.setValue();this.isVisible=false;this.element.trigger({type:'hide',date:this.date});},remove:function(){this._detachEvents();this.picker.remove();delete this.picker;delete this.element.data().datetimepicker;},getDate:function(){var d=this.getUTCDate();return new Date(d.getTime()+(d.getTimezoneOffset()*60000));},getUTCDate:function(){return this.date;},setDate:function(d){this.setUTCDate(new Date(d.getTime()-(d.getTimezoneOffset()*60000)));},setUTCDate:function(d){if(d>=this.startDate&&d<=this.endDate){this.date=d;this.setValue();this.viewDate=this.date;this.fill();}else{this.element.trigger({type:'outOfRange',date:d,startDate:this.startDate,endDate:this.endDate});}},setFormat:function(format){this.format=DPGlobal.parseFormat(format,this.formatType);var element;if(this.isInput){element=this.element;}else if(this.component){element=this.element.find('input');}
if(element&&element.val()){this.setValue();}},setValue:function(){var formatted=this.getFormattedDate();if(this.showWeek){this.dataNOW=formatted;}
if(!this.isInput){if(this.component){if(this.showWeek){if(this.weeklyString){this.element.find('input').val(this.weeklyString);}}else{this.element.find('input').val(formatted);}}
this.element.data('date',formatted);}else{if(this.showWeek){this.element.val(this.weeklyString)}else{this.element.val(formatted);}}
if(this.linkField){$('#'+this.linkField).val(this.getFormattedDate(this.linkFormat));}},getFormattedDate:function(format){if(format==undefined)format=this.format;return DPGlobal.formatDate(this.date,format,this.language,this.formatType);},setStartDate:function(startDate){this.startDate=startDate||-Infinity;if(this.startDate!==-Infinity){this.startDate=DPGlobal.parseDate(this.startDate,this.format,this.language,this.formatType);}
this.update();this.updateNavArrows();},setEndDate:function(endDate){this.endDate=endDate||Infinity;if(this.endDate!==Infinity){this.endDate=DPGlobal.parseDate(this.endDate,this.format,this.language,this.formatType);}
this.update();this.updateNavArrows();},setDaysOfWeekDisabled:function(daysOfWeekDisabled){this.daysOfWeekDisabled=daysOfWeekDisabled||[];if(!$.isArray(this.daysOfWeekDisabled)){this.daysOfWeekDisabled=this.daysOfWeekDisabled.split(/,\s*/);}
this.daysOfWeekDisabled=$.map(this.daysOfWeekDisabled,function(d){return parseInt(d,10);});this.update();this.updateNavArrows();},place:function(){if(this.isInline)return;var index_highest=0;$('div').each(function(){var index_current=parseInt($(this).css("zIndex"),10);if(index_current>index_highest){index_highest=index_current;}});var zIndex=index_highest+10;var offset,top,left,containerOffset;if(this.container instanceof $){containerOffset=this.container.offset();}else{containerOffset=$(this.container).offset();}
if(this.component){offset=this.component.offset();left=offset.left;if(this.pickerPosition=='bottom-left'||this.pickerPosition=='top-left'){left+=this.component.outerWidth()-this.picker.outerWidth();}}else{offset=this.element.offset();left=offset.left;}
if(left+220>document.body.clientWidth){left=document.body.clientWidth-220;}
if(this.pickerPosition=='top-left'||this.pickerPosition=='top-right'){top=offset.top-this.picker.outerHeight();}else{top=offset.top+this.height;}
top=top-containerOffset.top;left=left-containerOffset.left;this.picker.css({top:top,left:left,zIndex:zIndex});},update:function(){var date,fromArgs=false;if(arguments&&arguments.length&&(typeof arguments[0]==='string'||arguments[0]instanceof Date)){date=arguments[0];fromArgs=true;}else{date=(this.isInput?this.showWeek?this.dataNOW:this.element.val():this.showWeek?this.dataNOW:this.element.find('input').val())||this.element.data('date')||this.initialDate;if(typeof date=='string'||date instanceof String){date=date.replace(/^\s+|\s+$/g,'');}}
if(!date){date=new Date();fromArgs=false;}
this.date=DPGlobal.parseDate(new Date(date),this.format,this.language,this.formatType);if(fromArgs)this.setValue();if(this.date<this.startDate){this.viewDate=new Date(this.startDate);}else if(this.date>this.endDate){this.viewDate=new Date(this.endDate);}else{this.viewDate=new Date(this.date);}
this.fill();},fillDow:function(){var dowCnt=this.weekStart,html=this.showWeek?'<tr><th class="ui-week">WK</th>':html='<tr>';while(dowCnt<this.weekStart+7){html+='<th class="dow">'+dates[this.language].daysMin[(dowCnt++)%7]+'</th>';}
html+='</tr>';this.picker.find('.datetimepicker-days thead').append(html);},iso8601Week:function(date){var addOneDayDate=new Date(new Date(date).getTime()+24*60*60*1000);var time,checkDate=new Date(addOneDayDate.getTime());checkDate.setDate(checkDate.getDate()+4-(checkDate.getDay()||7));time=checkDate.getTime();checkDate.setMonth(0);checkDate.setDate(1);return Math.floor(Math.round((time-checkDate)/86400000)/7)+1;},fillMonths:function(){var html='',i=0;while(i<12){html+='<span class="month">'+dates[this.language].monthsShort[i++]+'</span>';}
this.picker.find('.datetimepicker-months td').html(html);},fill:function(){if(this.date==null||this.viewDate==null){return;}
var d=new Date(this.viewDate),year=d.getUTCFullYear(),month=d.getUTCMonth(),dayMonth=d.getUTCDate(),hours=d.getUTCHours(),minutes=d.getUTCMinutes(),startYear=this.startDate!==-Infinity?this.startDate.getUTCFullYear():-Infinity,startMonth=this.startDate!==-Infinity?this.startDate.getUTCMonth():-Infinity,endYear=this.endDate!==Infinity?this.endDate.getUTCFullYear():Infinity,endMonth=this.endDate!==Infinity?this.endDate.getUTCMonth():Infinity,currentDate=(new UTCDate(this.date.getUTCFullYear(),this.date.getUTCMonth(),this.date.getUTCDate())).valueOf(),today=new Date();this.picker.find('.datetimepicker-days thead th:eq(1)').text(dates[this.language].months[month]+' '+year);if(this.formatViewType=="time"){var hourConverted=hours%12?hours%12:12;var hoursDisplay=(hourConverted<10?'0':'')+hourConverted;var minutesDisplay=(minutes<10?'0':'')+minutes;var meridianDisplay=dates[this.language].meridiem[hours<12?0:1];this.picker.find('.datetimepicker-hours thead th:eq(1)').text(hoursDisplay+':'+minutesDisplay+' '+(meridianDisplay?meridianDisplay.toUpperCase():''));this.picker.find('.datetimepicker-minutes thead th:eq(1)').text(hoursDisplay+':'+minutesDisplay+' '+(meridianDisplay?meridianDisplay.toUpperCase():''));}else{this.picker.find('.datetimepicker-hours thead th:eq(1)').text(dayMonth+' '+dates[this.language].months[month]+' '+year);this.picker.find('.datetimepicker-minutes thead th:eq(1)').text(dayMonth+' '+dates[this.language].months[month]+' '+year);}
if(this.showWeek){this.picker.find('tfoot th.today').text(dates[this.language].week).toggle(this.todayBtn!==false);}else{this.picker.find('tfoot th.today').text(dates[this.language].today).toggle(this.todayBtn!==false);}
this.updateNavArrows();this.fillMonths();var prevMonth=UTCDate(year,month-1,28,0,0,0,0),day=DPGlobal.getDaysInMonth(prevMonth.getUTCFullYear(),prevMonth.getUTCMonth());prevMonth.setUTCDate(day);prevMonth.setUTCDate(day-(prevMonth.getUTCDay()-this.weekStart+7)%7);var nextMonth=new Date(prevMonth);nextMonth.setUTCDate(nextMonth.getUTCDate()+42);nextMonth=nextMonth.valueOf();var html=[];var clsName;while(prevMonth.valueOf()<nextMonth){if(prevMonth.getUTCDay()==this.weekStart){this.showWeek?html.push('<tr class="ui-week-tr"><td class="ui-week-col">'+(this.iso8601Week(new Date(prevMonth.valueOf())))+'</td>'):html.push('<tr>');}
clsName='';if(prevMonth.getUTCFullYear()<year||(prevMonth.getUTCFullYear()==year&&prevMonth.getUTCMonth()<month)){clsName+=' old';}else if(prevMonth.getUTCFullYear()>year||(prevMonth.getUTCFullYear()==year&&prevMonth.getUTCMonth()>month)){clsName+=' new';}
if(this.todayHighlight&&prevMonth.getUTCFullYear()==today.getFullYear()&&prevMonth.getUTCMonth()==today.getMonth()&&prevMonth.getUTCDate()==today.getDate()){clsName+=' today';}
if(prevMonth.valueOf()==currentDate){if(!this.showWeek){clsName+=' active';}}
if((prevMonth.valueOf()+86400000)<=this.startDate||prevMonth.valueOf()>this.endDate||$.inArray(prevMonth.getUTCDay(),this.daysOfWeekDisabled)!==-1){clsName+=' disabled';}
html.push('<td class="day'+clsName+'">'+prevMonth.getUTCDate()+'</td>');if(prevMonth.getUTCDay()==this.weekEnd){html.push('</tr>');}
prevMonth.setUTCDate(prevMonth.getUTCDate()+1);}
this.picker.find('.datetimepicker-days tbody').empty().append(html.join(''));html=[];var txt='',meridian='',meridianOld='';for(var i=0;i<24;i++){var actual=UTCDate(year,month,dayMonth,i);clsName='';if((actual.valueOf()+3600000)<=this.startDate||actual.valueOf()>this.endDate){clsName+=' disabled';}else if(hours==i){clsName+=' active';}
if(this.showMeridian&&dates[this.language].meridiem.length==2){meridian=(i<12?dates[this.language].meridiem[0]:dates[this.language].meridiem[1]);if(meridian!=meridianOld){if(meridianOld!=''){html.push('</fieldset>');}
html.push('<fieldset class="hour"><legend>'+meridian.toUpperCase()+'</legend>');}
meridianOld=meridian;txt=(i%12?i%12:12);html.push('<span class="hour'+clsName+' hour_'+(i<12?'am':'pm')+'">'+txt+'</span>');if(i==23){html.push('</fieldset>');}}else{txt=i+':00';html.push('<span class="hour'+clsName+'">'+txt+'</span>');}}
this.picker.find('.datetimepicker-hours td').html(html.join(''));html=[];txt='',meridian='',meridianOld='';for(var i=0;i<60;i+=this.minuteStep){var actual=UTCDate(year,month,dayMonth,hours,i,0);clsName='';if(actual.valueOf()<this.startDate||actual.valueOf()>this.endDate){clsName+=' disabled';}else if(Math.floor(minutes/this.minuteStep)==Math.floor(i/this.minuteStep)){clsName+=' active';}
if(this.showMeridian&&dates[this.language].meridiem.length==2){meridian=(hours<12?dates[this.language].meridiem[0]:dates[this.language].meridiem[1]);if(meridian!=meridianOld){if(meridianOld!=''){html.push('</fieldset>');}
html.push('<fieldset class="minute"><legend>'+meridian.toUpperCase()+'</legend>');}
meridianOld=meridian;txt=(hours%12?hours%12:12);html.push('<span class="minute'+clsName+'">'+txt+':'+(i<10?'0'+i:i)+'</span>');if(i==59){html.push('</fieldset>');}}else{txt=i+':00';html.push('<span class="minute'+clsName+'">'+hours+':'+(i<10?'0'+i:i)+'</span>');}}
this.picker.find('.datetimepicker-minutes td').html(html.join(''));var currentYear=this.date.getUTCFullYear();var months=this.picker.find('.datetimepicker-months').find('th:eq(1)').text(year).end().find('span.month').removeClass('active');if(currentYear==year){months.eq(this.date.getMonth()).addClass('active');}
if(year<startYear||year>endYear){months.addClass('disabled');}
if(year==startYear){months.slice(0,startMonth).addClass('disabled');}
if(year==endYear){months.slice(endMonth+1).addClass('disabled');}
html='';year=parseInt(year/10,10)*10;var yearCont=this.picker.find('.datetimepicker-years').find('th:eq(1)').text(year+'-'+(year+9)).end().find('td');year-=1;for(var i=-1;i<11;i++){html+='<span class="year'+(i==-1||i==10?' old':'')+(currentYear==year?' active':'')+(year<startYear||year>endYear?' disabled':'')+'">'+year+'</span>';year+=1;}
yearCont.html(html);this.place();},updateNavArrows:function(){var d=new Date(this.viewDate),year=d.getUTCFullYear(),month=d.getUTCMonth(),day=d.getUTCDate(),hour=d.getUTCHours();switch(this.viewMode){case 0:if(this.startDate!==-Infinity&&year<=this.startDate.getUTCFullYear()&&month<=this.startDate.getUTCMonth()&&day<=this.startDate.getUTCDate()&&hour<=this.startDate.getUTCHours()){this.picker.find('.prev').css({visibility:'hidden'});}else{this.picker.find('.prev').css({visibility:'visible'});}
if(this.endDate!==Infinity&&year>=this.endDate.getUTCFullYear()&&month>=this.endDate.getUTCMonth()&&day>=this.endDate.getUTCDate()&&hour>=this.endDate.getUTCHours()){this.picker.find('.next').css({visibility:'hidden'});}else{this.picker.find('.next').css({visibility:'visible'});}
break;case 1:if(this.startDate!==-Infinity&&year<=this.startDate.getUTCFullYear()&&month<=this.startDate.getUTCMonth()&&day<=this.startDate.getUTCDate()){this.picker.find('.prev').css({visibility:'hidden'});}else{this.picker.find('.prev').css({visibility:'visible'});}
if(this.endDate!==Infinity&&year>=this.endDate.getUTCFullYear()&&month>=this.endDate.getUTCMonth()&&day>=this.endDate.getUTCDate()){this.picker.find('.next').css({visibility:'hidden'});}else{this.picker.find('.next').css({visibility:'visible'});}
break;case 2:if(this.startDate!==-Infinity&&year<=this.startDate.getUTCFullYear()&&month<=this.startDate.getUTCMonth()){this.picker.find('.prev').css({visibility:'hidden'});}else{this.picker.find('.prev').css({visibility:'visible'});}
if(this.endDate!==Infinity&&year>=this.endDate.getUTCFullYear()&&month>=this.endDate.getUTCMonth()){this.picker.find('.next').css({visibility:'hidden'});}else{this.picker.find('.next').css({visibility:'visible'});}
break;case 3:case 4:if(this.startDate!==-Infinity&&year<=this.startDate.getUTCFullYear()){this.picker.find('.prev').css({visibility:'hidden'});}else{this.picker.find('.prev').css({visibility:'visible'});}
if(this.endDate!==Infinity&&year>=this.endDate.getUTCFullYear()){this.picker.find('.next').css({visibility:'hidden'});}else{this.picker.find('.next').css({visibility:'visible'});}
break;}},mousewheel:function(e){e.preventDefault();e.stopPropagation();if(this.wheelPause){return;}
this.wheelPause=true;var originalEvent=e.originalEvent;var delta=originalEvent.wheelDelta;var mode=delta>0?1:(delta===0)?0:-1;if(this.wheelViewModeNavigationInverseDirection){mode=-mode;}
this.showMode(mode);setTimeout($.proxy(function(){this.wheelPause=false},this),this.wheelViewModeNavigationDelay);},click:function(e){e.stopPropagation();e.preventDefault();var target=$(e.target).closest('span, td, th, legend');if(target.is('.glyphicon')){target=$(target).parent().closest('span, td, th, legend');}
if(target.length==1){if(target.is('.disabled')){this.element.trigger({type:'outOfRange',date:this.viewDate,startDate:this.startDate,endDate:this.endDate});return;}
switch(target[0].nodeName.toLowerCase()){case'th':switch(target[0].className){case'switch':this.showMode(1);break;case'prev':case'next':var dir=DPGlobal.modes[this.viewMode].navStep*(target[0].className=='prev'?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveHour(this.viewDate,dir);break;case 1:this.viewDate=this.moveDate(this.viewDate,dir);break;case 2:this.viewDate=this.moveMonth(this.viewDate,dir);break;case 3:case 4:this.viewDate=this.moveYear(this.viewDate,dir);break;}
this.fill();this.element.trigger({type:target[0].className+':'+this.convertViewModeText(this.viewMode),date:this.viewDate,startDate:this.startDate,endDate:this.endDate});break;case'today':var date=new Date();if(this.showWeek){var week=this.iso8601Week(date);this.weeklyString=date.getFullYear()+'-'+week+'-'+'week';}
date=UTCDate(date.getFullYear(),date.getMonth(),date.getDate(),date.getHours(),date.getMinutes(),date.getSeconds(),0);if(date<this.startDate)date=this.startDate;else if(date>this.endDate)date=this.endDate;this.viewMode=this.startViewMode;this.showMode(0);this._setDate(date);this.fill();if(this.autoclose){this.hide();}
if(this.showWeek){this.element.trigger({type:'goToToday',date:this.viewDate,week:week,});this.picker.find('.datetimepicker-days').find('tr').removeClass('active');this.picker.find('.datetimepicker-days').find('td').each(function(){if($(this).text()==(week)){$(this).parent().addClass('active');}});}
break;}
break;case'span':if(!target.is('.disabled')){var year=this.viewDate.getUTCFullYear(),month=this.viewDate.getUTCMonth(),day=this.viewDate.getUTCDate(),hours=this.viewDate.getUTCHours(),minutes=this.viewDate.getUTCMinutes(),seconds=this.viewDate.getUTCSeconds();if(target.is('.month')){this.viewDate.setUTCDate(1);month=target.parent().find('span').index(target);day=this.viewDate.getUTCDate();this.viewDate.setUTCMonth(month);this.element.trigger({type:'changeMonth',date:this.viewDate});if(this.viewSelect>=3){this._setDate(UTCDate(year,month,day,hours,minutes,seconds,0));}}else if(target.is('.year')){this.viewDate.setUTCDate(1);year=parseInt(target.text(),10)||0;this.viewDate.setUTCFullYear(year);this.element.trigger({type:'changeYear',date:this.viewDate});if(this.viewSelect>=4){this._setDate(UTCDate(year,month,day,hours,minutes,seconds,0));}}else if(target.is('.hour')){hours=parseInt(target.text(),10)||0;if(target.hasClass('hour_am')||target.hasClass('hour_pm')){if(hours==12&&target.hasClass('hour_am')){hours=0;}else if(hours!=12&&target.hasClass('hour_pm')){hours+=12;}}
this.viewDate.setUTCHours(hours);this.element.trigger({type:'changeHour',date:this.viewDate});if(this.viewSelect>=1){this._setDate(UTCDate(year,month,day,hours,minutes,seconds,0));}}else if(target.is('.minute')){minutes=parseInt(target.text().substr(target.text().indexOf(':')+1),10)||0;this.viewDate.setUTCMinutes(minutes);this.element.trigger({type:'changeMinute',date:this.viewDate});if(this.viewSelect>=0){this._setDate(UTCDate(year,month,day,hours,minutes,seconds,0));}}
if(this.viewMode!=0){var oldViewMode=this.viewMode;this.showMode(-1);this.fill();if(oldViewMode==this.viewMode&&this.autoclose){this.hide();}}else{this.fill();if(this.autoclose){this.hide();}}}
break;case'td':if(target.is('.day')&&!target.is('.disabled')){var day=parseInt(target.text(),10)||1;var year=this.viewDate.getUTCFullYear(),month=this.viewDate.getUTCMonth(),hours=this.viewDate.getUTCHours(),minutes=this.viewDate.getUTCMinutes(),seconds=this.viewDate.getUTCSeconds();if(target.is('.old')){if(month===0){month=11;year-=1;}else{month-=1;}}else if(target.is('.new')){if(month==11){month=0;year+=1;}else{month+=1;}}
this.viewDate.setUTCFullYear(year);this.viewDate.setUTCMonth(month,day);this.currentTR=$(e.target).parent().index();if(this.showWeek){this.weeklyString=new Date(this.viewDate).getFullYear()+'-'+$(e.target).parent().find('td:first').text()+'-week';this.element.trigger({type:'changeDay',date:this.viewDate,week:$(e.target).parent().find('td:first').text(),target:e.target,weeklyString:this.weeklyString,currentTr:this.currentTR});}else{this.element.trigger({type:'changeDay',date:this.viewDate});}
if(this.viewSelect>=2){this._setDate(UTCDate(year,month,day,hours,minutes,seconds,0));}}
var oldViewMode=this.viewMode;this.showMode(-1);this.fill();if(oldViewMode==this.viewMode&&this.autoclose){this.hide();}
break;}}},_setDate:function(date,which){if(!which||which=='date')
this.date=date;if(!which||which=='view')
this.viewDate=date;this.fill();this.setValue();var element;if(this.isInput){element=this.element;}else if(this.component){element=this.element.find('input');}
if(element){element.change();if(this.autoclose&&(!which||which=='date')){}}
this.element.trigger({type:'changeDate',date:this.date});},moveMinute:function(date,dir){if(!dir)return date;var new_date=new Date(date.valueOf());new_date.setUTCMinutes(new_date.getUTCMinutes()+(dir*this.minuteStep));return new_date;},moveHour:function(date,dir){if(!dir)return date;var new_date=new Date(date.valueOf());new_date.setUTCHours(new_date.getUTCHours()+dir);return new_date;},moveDate:function(date,dir){if(!dir)return date;var new_date=new Date(date.valueOf());new_date.setUTCDate(new_date.getUTCDate()+dir);return new_date;},moveMonth:function(date,dir){if(!dir)return date;var new_date=new Date(date.valueOf()),day=new_date.getUTCDate(),month=new_date.getUTCMonth(),mag=Math.abs(dir),new_month,test;dir=dir>0?1:-1;if(mag==1){test=dir==-1?function(){return new_date.getUTCMonth()==month;}:function(){return new_date.getUTCMonth()!=new_month;};new_month=month+dir;new_date.setUTCMonth(new_month);if(new_month<0||new_month>11)
new_month=(new_month+12)%12;}else{for(var i=0;i<mag;i++)
new_date=this.moveMonth(new_date,dir);new_month=new_date.getUTCMonth();new_date.setUTCDate(day);test=function(){return new_month!=new_date.getUTCMonth();};}
while(test()){new_date.setUTCDate(--day);new_date.setUTCMonth(new_month);}
return new_date;},moveYear:function(date,dir){return this.moveMonth(date,dir*12);},dateWithinRange:function(date){return date>=this.startDate&&date<=this.endDate;},keydown:function(e){if(this.picker.is(':not(:visible)')){if(e.keyCode==27)
this.show();return;}
var dateChanged=false,dir,day,month,newDate,newViewDate;switch(e.keyCode){case 27:this.hide();e.preventDefault();break;case 37:case 39:if(!this.keyboardNavigation)break;dir=e.keyCode==37?-1:1;viewMode=this.viewMode;if(e.ctrlKey){viewMode+=2;}else if(e.shiftKey){viewMode+=1;}
if(viewMode==4){newDate=this.moveYear(this.date,dir);newViewDate=this.moveYear(this.viewDate,dir);}else if(viewMode==3){newDate=this.moveMonth(this.date,dir);newViewDate=this.moveMonth(this.viewDate,dir);}else if(viewMode==2){newDate=this.moveDate(this.date,dir);newViewDate=this.moveDate(this.viewDate,dir);}else if(viewMode==1){newDate=this.moveHour(this.date,dir);newViewDate=this.moveHour(this.viewDate,dir);}else if(viewMode==0){newDate=this.moveMinute(this.date,dir);newViewDate=this.moveMinute(this.viewDate,dir);}
if(this.dateWithinRange(newDate)){this.date=newDate;this.viewDate=newViewDate;this.setValue();this.update();e.preventDefault();dateChanged=true;}
break;case 38:case 40:if(!this.keyboardNavigation)break;dir=e.keyCode==38?-1:1;viewMode=this.viewMode;if(e.ctrlKey){viewMode+=2;}else if(e.shiftKey){viewMode+=1;}
if(viewMode==4){newDate=this.moveYear(this.date,dir);newViewDate=this.moveYear(this.viewDate,dir);}else if(viewMode==3){newDate=this.moveMonth(this.date,dir);newViewDate=this.moveMonth(this.viewDate,dir);}else if(viewMode==2){newDate=this.moveDate(this.date,dir*7);newViewDate=this.moveDate(this.viewDate,dir*7);}else if(viewMode==1){if(this.showMeridian){newDate=this.moveHour(this.date,dir*6);newViewDate=this.moveHour(this.viewDate,dir*6);}else{newDate=this.moveHour(this.date,dir*4);newViewDate=this.moveHour(this.viewDate,dir*4);}}else if(viewMode==0){newDate=this.moveMinute(this.date,dir*4);newViewDate=this.moveMinute(this.viewDate,dir*4);}
if(this.dateWithinRange(newDate)){this.date=newDate;this.viewDate=newViewDate;this.setValue();this.update();e.preventDefault();dateChanged=true;}
break;case 13:if(this.viewMode!=0){var oldViewMode=this.viewMode;this.showMode(-1);this.fill();if(oldViewMode==this.viewMode&&this.autoclose){this.hide();}}else{this.fill();if(this.autoclose){this.hide();}}
e.preventDefault();break;case 9:this.hide();break;}
if(dateChanged){var element;if(this.isInput){element=this.element;}else if(this.component){element=this.element.find('input');}
if(element){element.change();}
this.element.trigger({type:'changeDate',date:this.date});}},showMode:function(dir){if(dir){var newViewMode=Math.max(0,Math.min(DPGlobal.modes.length-1,this.viewMode+dir));if(newViewMode>=this.minView&&newViewMode<=this.maxView){this.element.trigger({type:'changeMode',date:this.viewDate,oldViewMode:this.viewMode,newViewMode:newViewMode});this.viewMode=newViewMode;}}
this.picker.find('>div').hide().filter('.datetimepicker-'+DPGlobal.modes[this.viewMode].clsName).css('display','block');this.updateNavArrows();},reset:function(e){this._setDate(null,'date');},convertViewModeText:function(viewMode){switch(viewMode){case 4:return'decade';case 3:return'year';case 2:return'month';case 1:return'day';case 0:return'hour';}}};$.fn.datetimepicker=function(option){var args=Array.apply(null,arguments);args.shift();var internal_return;this.each(function(){var $this=$(this),data=$this.data('datetimepicker'),options=typeof option=='object'&&option;if(!data){$this.data('datetimepicker',(data=new Datetimepicker(this,$.extend({},$.fn.datetimepicker.defaults,options))));}
if(typeof option=='string'&&typeof data[option]=='function'){internal_return=data[option].apply(data,args);if(internal_return!==undefined){return false;}}});if(internal_return!==undefined)
return internal_return;else
return this;};$.fn.datetimepicker.defaults={};$.fn.datetimepicker.Constructor=Datetimepicker;var dates=$.fn.datetimepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],meridiem:["am","pm"],suffix:["st","nd","rd","th"],today:"Today",week:"This Week"}};var DPGlobal={modes:[{clsName:'minutes',navFnc:'Hours',navStep:1},{clsName:'hours',navFnc:'Date',navStep:1},{clsName:'days',navFnc:'Month',navStep:1},{clsName:'months',navFnc:'FullYear',navStep:1},{clsName:'years',navFnc:'FullYear',navStep:10}],isLeapYear:function(year){return(((year%4===0)&&(year%100!==0))||(year%400===0))},getDaysInMonth:function(year,month){return[31,(DPGlobal.isLeapYear(year)?29:28),31,30,31,30,31,31,30,31,30,31][month]},getDefaultFormat:function(type,field){if(type=="standard"){if(field=='input')
return'yyyy-mm-dd hh:ii';else
return'yyyy-mm-dd hh:ii:ss';}else if(type=="php"){if(field=='input')
return'Y-m-d H:i';else
return'Y-m-d H:i:s';}else{throw new Error("Invalid format type.");}},validParts:function(type){if(type=="standard"){return/hh?|HH?|p|P|ii?|ss?|dd?|DD?|mm?|MM?|yy(?:yy)?/g;}else if(type=="php"){return/[dDjlNwzFmMnStyYaABgGhHis]/g;}else{throw new Error("Invalid format type.");}},nonpunctuation:/[^ -\/:-@\[-`{-~\t\n\rTZ]+/g,parseFormat:function(format,type){var separators=format.replace(this.validParts(type),'\0').split('\0');parts=format.match(this.validParts(type));if(extend.monthAbbreviation){parts[0]=='MM'?parts[0]='M':'';}
if(!separators||!separators.length||!parts||parts.length==0){throw new Error("Invalid date format.");}
return{separators:separators,parts:parts};},parseDate:function(date,format,language,type){if(date instanceof Date){var dateUTC=new Date(date.valueOf()-date.getTimezoneOffset()*60000);dateUTC.setMilliseconds(0);return dateUTC;}
if(/^\d{4}\-\d{1,2}\-\d{1,2}$/.test(date)){format=this.parseFormat('yyyy-mm-dd',type);}
if(/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}$/.test(date)){format=this.parseFormat('yyyy-mm-dd hh:ii',type);}
if(/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}\:\d{1,2}[Z]{0,1}$/.test(date)){format=this.parseFormat('yyyy-mm-dd hh:ii:ss',type);}
if(/^[-+]\d+[dmwy]([\s,]+[-+]\d+[dmwy])*$/.test(date)){var part_re=/([-+]\d+)([dmwy])/,parts=date.match(/([-+]\d+)([dmwy])/g),part,dir;date=new Date();for(var i=0;i<parts.length;i++){part=part_re.exec(parts[i]);dir=parseInt(part[1]);switch(part[2]){case'd':date.setUTCDate(date.getUTCDate()+dir);break;case'm':date=Datetimepicker.prototype.moveMonth.call(Datetimepicker.prototype,date,dir);break;case'w':date.setUTCDate(date.getUTCDate()+dir*7);break;case'y':date=Datetimepicker.prototype.moveYear.call(Datetimepicker.prototype,date,dir);break;}}
return UTCDate(date.getUTCFullYear(),date.getUTCMonth(),date.getUTCDate(),date.getUTCHours(),date.getUTCMinutes(),date.getUTCSeconds(),0);}
var parts=date&&date.match(this.nonpunctuation)||[],date=new Date(0,0,0,0,0,0,0),parsed={},setters_order=['hh','h','ii','i','ss','s','yyyy','yy','M','MM','m','mm','D','DD','d','dd','H','HH','p','P'],setters_map={hh:function(d,v){return d.setUTCHours(v);},h:function(d,v){return d.setUTCHours(v);},HH:function(d,v){return d.setUTCHours(v==12?0:v);},H:function(d,v){return d.setUTCHours(v==12?0:v);},ii:function(d,v){return d.setUTCMinutes(v);},i:function(d,v){return d.setUTCMinutes(v);},ss:function(d,v){return d.setUTCSeconds(v);},s:function(d,v){return d.setUTCSeconds(v);},yyyy:function(d,v){return d.setUTCFullYear(v);},yy:function(d,v){return d.setUTCFullYear(2000+v);},m:function(d,v){v-=1;while(v<0)v+=12;v%=12;d.setUTCMonth(v);while(d.getUTCMonth()!=v)
if(isNaN(d.getUTCMonth()))
return d;else
d.setUTCDate(d.getUTCDate()-1);return d;},d:function(d,v){return d.setUTCDate(v);},p:function(d,v){return d.setUTCHours(v==1?d.getUTCHours()+12:d.getUTCHours());}},val,filtered,part;setters_map['M']=setters_map['MM']=setters_map['mm']=setters_map['m'];setters_map['dd']=setters_map['d'];setters_map['P']=setters_map['p'];date=UTCDate(date.getFullYear(),date.getMonth(),date.getDate(),date.getHours(),date.getMinutes(),date.getSeconds());if(parts.length==format.parts.length){for(var i=0,cnt=format.parts.length;i<cnt;i++){val=parseInt(parts[i],10);part=format.parts[i];if(isNaN(val)){switch(part){case'MM':filtered=$(dates[language].months).filter(function(){var m=this.slice(0,parts[i].length),p=parts[i].slice(0,m.length);return m==p;});val=$.inArray(filtered[0],dates[language].months)+1;break;case'M':filtered=$(dates[language].monthsShort).filter(function(){var m=this.slice(0,parts[i].length),p=parts[i].slice(0,m.length);return m.toLowerCase()==p.toLowerCase();});val=$.inArray(filtered[0],dates[language].monthsShort)+1;break;case'p':case'P':val=$.inArray(parts[i].toLowerCase(),dates[language].meridiem);break;}}
parsed[part]=val;}
for(var i=0,s;i<setters_order.length;i++){s=setters_order[i];if(s in parsed&&!isNaN(parsed[s]))
setters_map[s](date,parsed[s])}}
return date;},formatDate:function(date,format,language,type){if(date==null){return'';}
var val;if(type=='standard'){val={yy:date.getUTCFullYear().toString().substring(2),yyyy:date.getUTCFullYear(),m:date.getUTCMonth()+1,M:dates[language].monthsShort[date.getUTCMonth()],MM:dates[language].months[date.getUTCMonth()],d:date.getUTCDate(),D:dates[language].daysShort[date.getUTCDay()],DD:dates[language].days[date.getUTCDay()],p:(dates[language].meridiem.length==2?dates[language].meridiem[date.getUTCHours()<12?0:1]:''),h:date.getUTCHours(),i:date.getUTCMinutes(),s:date.getUTCSeconds()};if(dates[language].meridiem.length==2){val.H=(val.h%12==0?12:val.h%12);}
else{val.H=val.h;}
val.HH=(val.H<10?'0':'')+val.H;val.P=val.p.toUpperCase();val.hh=(val.h<10?'0':'')+val.h;val.ii=(val.i<10?'0':'')+val.i;val.ss=(val.s<10?'0':'')+val.s;val.dd=(val.d<10?'0':'')+val.d;val.mm=(val.m<10?'0':'')+val.m;}else if(type=='php'){val={y:date.getUTCFullYear().toString().substring(2),Y:date.getUTCFullYear(),F:dates[language].months[date.getUTCMonth()],M:dates[language].monthsShort[date.getUTCMonth()],n:date.getUTCMonth()+1,t:DPGlobal.getDaysInMonth(date.getUTCFullYear(),date.getUTCMonth()),j:date.getUTCDate(),l:dates[language].days[date.getUTCDay()],D:dates[language].daysShort[date.getUTCDay()],w:date.getUTCDay(),N:(date.getUTCDay()==0?7:date.getUTCDay()),S:(date.getUTCDate()%10<=dates[language].suffix.length?dates[language].suffix[date.getUTCDate()%10-1]:''),a:(dates[language].meridiem.length==2?dates[language].meridiem[date.getUTCHours()<12?0:1]:''),g:(date.getUTCHours()%12==0?12:date.getUTCHours()%12),G:date.getUTCHours(),i:date.getUTCMinutes(),s:date.getUTCSeconds()};val.m=(val.n<10?'0':'')+val.n;val.d=(val.j<10?'0':'')+val.j;val.A=val.a.toString().toUpperCase();val.h=(val.g<10?'0':'')+val.g;val.H=(val.G<10?'0':'')+val.G;val.i=(val.i<10?'0':'')+val.i;val.s=(val.s<10?'0':'')+val.s;}else{throw new Error("Invalid format type.");}
var date=[],seps=$.extend([],format.separators);for(var i=0,cnt=format.parts.length;i<cnt;i++){if(seps.length){date.push(seps.shift());}
date.push(val[format.parts[i]]);}
if(seps.length){date.push(seps.shift());}
return date.join('');},convertViewMode:function(viewMode){switch(viewMode){case 4:case'decade':viewMode=4;break;case 3:case'year':viewMode=3;break;case 2:case'month':viewMode=2;break;case 1:case'day':viewMode=1;break;case 0:case'hour':viewMode=0;break;}
return viewMode;},headTemplate:'<thead>'+'<tr>'+'<th class="prev"><i class="icon-arrow-left"/></th>'+'<th colspan="5" class="switch"></th>'+'<th class="next"><i class="icon-arrow-right"/></th>'+'</tr>'+'</thead>',headTemplateV3:'<thead>'+'<tr>'+'<th class="prev"><span class="glyphicon glyphicon-arrow-left"></span> </th>'+'<th colspan="5" class="switch"></th>'+'<th class="next"><span class="glyphicon glyphicon-arrow-right"></span> </th>'+'</tr>'+'</thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr></tfoot>'};DPGlobal.template='<div class="datetimepicker">'+'<div class="datetimepicker-minutes">'+'<table class=" table-condensed">'+
DPGlobal.headTemplate+
DPGlobal.contTemplate+
DPGlobal.footTemplate+'</table>'+'</div>'+'<div class="datetimepicker-hours">'+'<table class=" table-condensed">'+
DPGlobal.headTemplate+
DPGlobal.contTemplate+
DPGlobal.footTemplate+'</table>'+'</div>'+'<div class="datetimepicker-days">'+'<table class=" table-condensed">'+
DPGlobal.headTemplate+'<tbody></tbody>'+
DPGlobal.footTemplate+'</table>'+'</div>'+'<div class="datetimepicker-months">'+'<table class="table-condensed">'+
DPGlobal.headTemplate+
DPGlobal.contTemplate+
DPGlobal.footTemplate+'</table>'+'</div>'+'<div class="datetimepicker-years">'+'<table class="table-condensed">'+
DPGlobal.headTemplate+
DPGlobal.contTemplate+
DPGlobal.footTemplate+'</table>'+'</div>'+'</div>';DPGlobal.templateV3='<div class="datetimepicker">'+'<div class="datetimepicker-minutes">'+'<table class=" table-condensed">'+
DPGlobal.headTemplateV3+
DPGlobal.contTemplate+
DPGlobal.footTemplate+'</table>'+'</div>'+'<div class="datetimepicker-hours">'+'<table class=" table-condensed">'+
DPGlobal.headTemplateV3+
DPGlobal.contTemplate+
DPGlobal.footTemplate+'</table>'+'</div>'+'<div class="datetimepicker-days">'+'<table class=" table-condensed">'+
DPGlobal.headTemplateV3+'<tbody></tbody>'+
DPGlobal.footTemplate+'</table>'+'</div>'+'<div class="datetimepicker-months">'+'<table class="table-condensed">'+
DPGlobal.headTemplateV3+
DPGlobal.contTemplate+
DPGlobal.footTemplate+'</table>'+'</div>'+'<div class="datetimepicker-years">'+'<table class="table-condensed">'+
DPGlobal.headTemplateV3+
DPGlobal.contTemplate+
DPGlobal.footTemplate+'</table>'+'</div>'+'</div>';$.fn.datetimepicker.DPGlobal=DPGlobal;$.fn.datetimepicker.noConflict=function(){$.fn.datetimepicker=old;return this;};$(document).on('focus.datetimepicker.data-api click.datetimepicker.data-api','[data-provide="datetimepicker"]',function(e){var $this=$(this);if($this.data('datetimepicker'))return;e.preventDefault();$this.datetimepicker('show');});$(function(){$('[data-provide="datetimepicker-inline"]').datetimepicker();});}(window.jQuery);(function($){var patterns={num_01:/^[0|1]*$/,num_02:/^[0-2]*$/,num_03:/^[0-3]*$/,num_19:/^[1-9]*$/,num_09:/^[0-9]*$/,num_08:/^[0-8]*$/,num_05:/^[0-5]*$/};var regDate=new RegExp('(([0-9]{3}[1-9]|[0-9]{2}[1-9][0-9]{1}|[0-9]{1}[1-9][0-9]{2}|[1-9][0-9]{3})(-|/|.)(((0[13578]|1[02])(-|/|.)(0[1-9]|[12][0-9]|3[01]))|((0[469]|11)(-|/|.)(0[1-9]|[12][0-9]|30))|(02(-|/|.)(0[1-9]|[1][0-9]|2[0-8]))))|((([0-9]{2})(0[48]|[2468][048]|[13579][26])|((0[48]|[2468][048]|[3579][26])00))(-|/|.)02(-|/|.)29)');var regDateYM=new RegExp('(([0-9]{3}[1-9]|[0-9]{2}[1-9][0-9]{1}|[0-9]{1}[1-9][0-9]{2}|[1-9][0-9]{3})(-|/|.)(((0[13578]|1[02]))|((0[469]|11))))|((([0-9]{2})(0[48]|[2468][048]|[13579][26])|((0[48]|[2468][048]|[3579][26])00)))');var regTime=/^(?:[01]\d|2[0-3])(?::[0-5]\d)$/;var arrKW=['y','M','d','H','m','h','i'];var _this;var InputDatetime=function(input,$dtp){this.input=input;this.$dtp=$dtp;_this=this;_this.input.pos=0;if(input.dataset.format)this.attachEvents();};InputDatetime.prototype={constructor:InputDatetime,init:function(){},remove:function(){this.$dtp.datetimepicker('remove');},_events:[],attachEvents:function(){this._detachEvents();this._events=[[this.input,{keydown:$.proxy(this.keydown,this),focus:$.proxy(this.focus,this),click:$.proxy(this.click,this),blur:$.proxy(this.blur,this),input:$.proxy(this.oninput,this),change:$.proxy(this.change,this)}]];for(var i=0,el,ev;i<this._events.length;i++){el=this._events[i][0];ev=this._events[i][1];$(el).on(ev);}},_detachEvents:function(){for(var i=0,el,ev;i<this._events.length;i++){el=this._events[i][0];ev=this._events[i][1];$(el).off(ev);}
this._events=[];},oninput:function(e){var inputVal=this.input.value;if(inputVal.length>this.input.dataset.format.length){$(this.input).val($(this.input).data('oldVal'));this.input.selectionStart=this.input.selectionEnd=this.input.pos;}},change:function(){if(this.input.dataset.format==='yyyy-mm-dd hh'){this.input.value=this.input.value+':00';}},keydown:function(e){var keyCode=e.which;var inputVal=this.input.value;var _that=this;$(this.input).popover('hide');if(keyCode>=48&&keyCode<=57)dealWithKey();if(keyCode>=96&&keyCode<=105)dealWithNumKey();if(keyCode==8||keyCode==46||keyCode==37||keyCode==39)dealWithDelete();return false;function dealWithKey(){var strPosF,strPosFNext,strKey,isMatch=false,strPrev,dIndex,month,strDate,dateTemp;if(_that.input.pos==_that.input.dataset.format.length)return false;strKey=String.fromCharCode(keyCode);strPosF=_that.input.dataset.format.substring(_that.input.pos,_that.input.pos+1);strPosFNext=_that.input.dataset.format.substring(_that.input.pos+1,_that.input.pos+2);strPrev=inputVal.substring(_that.input.pos-1,_that.input.pos);if(strPosF==='y'){isMatch=true;}else if(strPosF==='d'){dIndex=_that.input.dataset.format.indexOf('dd');month=inputVal.substring(dIndex-3,dIndex-1);if(strPosF==strPosFNext){if(strKey=='0'){isMatch=true;}else{strDate=_that.input.value.substring(0,dIndex)+strKey+'0';}}else{strDate=_that.input.value.substring(0,dIndex+1)+strKey;}
if(isMatch==false){dateTemp=new Date(strDate.replace(/\D/g,'-'));if(dateTemp.toString()==="Invalid Date"){isMatch=false;}else if(month!=(dateTemp.getMonth()+1)){isMatch=false}else{isMatch=true;}}}else if(strPosF==='H'||strPosF==='h'){if(strPosF==strPosFNext){isMatch=patterns.num_02.test(strKey);}else{if(strPrev=='0'){isMatch=patterns.num_09.test(strKey);}else if(strPrev=='2'){isMatch=patterns.num_03.test(strKey);}else{isMatch=patterns.num_09.test(strKey);}}}else if(strPosF==='i'){if(strPosF==strPosFNext){isMatch=patterns.num_05.test(strKey);}else{isMatch=patterns.num_09.test(strKey);}}else if(strPosF==='M'||strPosF==='m'){if(strPosF==strPosFNext){isMatch=patterns.num_01.test(strKey);}else{if(strPrev=='0'){isMatch=patterns.num_19.test(strKey);}else if(strPrev=='1'){isMatch=patterns.num_02.test(strKey);}}}
if(isMatch){_that.input.value=inputVal.substring(0,_that.input.pos)+strKey+inputVal.substring(_that.input.pos+1,inputVal.length);$(_that.input).data('oldVal',_that.input.value);_that.input.pos++;var strOfPos=_that.input.dataset.format.substring(_that.input.pos,_that.input.pos+1);while(strOfPos!=''&&$.inArray(strOfPos,arrKW)<0){_that.input.pos++;strOfPos=_that.input.dataset.format.substring(_that.input.pos,_that.input.pos+1);}
_this.moveCursor(_that.input);}
return false;}
function dealWithNumKey(){keyCode=keyCode-48;dealWithKey(keyCode);}
function dealWithDelete(){var strOfPos;if(keyCode==8||keyCode==46){if(_that.input.pos==_that.input.dataset.format.length&&keyCode==46)return false;if(_that.input.pos==0&&keyCode==8)return false;if(keyCode==8){_that.input.pos--;strOfPos=_that.input.dataset.format.substring(_that.input.pos,_that.input.pos+1);while(strOfPos!=''&&$.inArray(strOfPos,arrKW)<0){_that.input.pos--;strOfPos=_that.input.dataset.format.substring(_that.input.pos,_that.input.pos+1);}
_that.input.value=inputVal.substring(0,_that.input.pos)+strOfPos+inputVal.substring(_that.input.pos+1,inputVal.length);$(_that.input).data('oldVal',_that.input.value);}else if(keyCode==46&&/[0-9]/.test(_that.input.value.substring(_that.input.pos))){strOfPos=_that.input.dataset.format.substring(_that.input.pos,_that.input.pos+1);while(strOfPos!=''&&$.inArray(strOfPos,arrKW)<0){_that.input.pos++;strOfPos=_that.input.dataset.format.substring(_that.input.pos,_that.input.pos+1);}
_that.input.value=inputVal.substring(0,_that.input.pos)+strOfPos+inputVal.substring(_that.input.pos+1,inputVal.length);$(_that.input).data('oldVal',_that.input.value);_that.input.pos++;}}else{if(_that.input.pos==_that.input.dataset.format.length&&keyCode==39)return false;if(_that.input.pos==0&&keyCode==37)return false;if(keyCode==37){_that.input.pos--;}else if(keyCode==39){_that.input.pos++;}}
_this.moveCursor(_that.input);}},focus:function(){var inputVal=this.input.value.trim();if(inputVal==''){this.input.value=this.input.dataset.format;$(this.input).data('oldVal',this.input.value);$(this.input).popover({placement:'bottom',content:'',trigger:'focus'});}else{if(inputVal!==this.input.dataset.format&&!_this.isMatchReg(inputVal,this.input.dataset.format)){$(this.input).popover('show');}else{$(this.input).popover('hide');}}
_this.moveCursor(this.input);},moveCursor:function(input){setTimeout(function(){input.selectionStart=input.selectionEnd=input.pos;},50);},isMatchReg:function(inputVal,format){var isNotShow=false
if(/^(HH|hh):ii$/.test(format)){isNotShow=regTime.test(inputVal);}else if(/ (HH|hh):ii/.test(format)){isNotShow=regDate.test(inputVal.split(' ')[0])&&regTime.test(inputVal.split(' ')[1]);}else if(new RegExp('^yyyy(-|/|.)(mm|MM)$').test(format)){isNotShow=regDateYM.test(inputVal);}else{isNotShow=regDate.test(inputVal);}
return isNotShow;},click:function(){var strAfterCursor=this.input.value.substring(this.input.pos);if(!/[0-9]/.test(this.input.value)){this.input.selectionStart=this.input.selectionEnd=this.input.pos=0;}else if(!/[0-9]/.test(strAfterCursor)&&strAfterCursor!==''){this.input.selectionStart=this.input.selectionEnd=this.input.pos;}else{this.input.pos=this.input.selectionStart;}},blur:function(){var inputVal=this.input.value.trim();if(inputVal!==this.input.dataset.format&&!_this.isMatchReg(inputVal,this.input.dataset.format)&&$('.datetimepicker [class^="datetimepicker-"]').not(':hidden').length<1){$(this.input).css({border:'1px solid #d43f3a'});$(this.input).addClass('timeError');}else{$(this.input).css({border:''});$(this.input).removeClass('timeError');}}}
$.fn.datetime=function(option){var format,minView,startView,maxView,btn,optDTP,$dtp,data,internal_return;this.each(function(){var $this=$(this);var input=this.tagName=="INPUT"?this:(this.children[0].tagName=="INPUT"?this.children[0]:null);if(!input){console.log('not found input element');return;}
format=input.dataset.format;optDTP={format:format,autoclose:true,initialDate:new Date(),todayBtn:true};if(new RegExp('^yyyy(-|/|.)(mm|MM)(-|/|.)dd(.)* (HH|hh)(:|.)ii').test(format)){startView=4;minView=0;}else if(new RegExp('^yyyy(-|/|.)(mm|MM)(-|/|.)dd(.)* (HH|hh)').test(format)){startView=4;minView=1;}else if(new RegExp('^yyyy(-|/|.)(mm|MM)(-|/|.)dd(.)*').test(format)){startView=4;minView=2;}else if(new RegExp('^yyyy(-|/|.)(mm|MM)').test(format)){startView=4;minView=3;}else if(new RegExp('^(HH|hh):ii').test(format)){startView=maxView=1;minView=0;}
if(minView)optDTP.minView=minView;if(maxView)optDTP.maxView=maxView;if(startView)optDTP.startView=startView;if(typeof option=='object'&&!$.isEmptyObject(option)){optDTP=$.extend(true,optDTP,option);}
if(input.attributes.datetimepicker){$this.datetimepicker(optDTP);$dtp=$this;}else if(input.nextElementSibling&&input.nextElementSibling.tagName=='SPAN'&&input.nextElementSibling.classList.contains('add-on')){btn=input.nextElementSibling;if(!input.id||input.id.trim()==''){alert('input element must has a id');return;}
optDTP.linkField=input.id;optDTP.linkFormat=format;$(btn).datetimepicker(optDTP);$dtp=$(btn);}
data=$this.data('datetime');if(!data){$this.data('datetime',(data=new InputDatetime(input,$dtp)));}
if(typeof option=='string'&&typeof data[option]=='function'){internal_return=data[option].apply(data);if(internal_return!==undefined){return false;}}});}})(jQuery);;(function(e,d,a,f){var b=e.fn.twbsPagination;var c=function(j,h){this.$element=e(j);this.options=e.extend({},e.fn.twbsPagination.defaults,h);if(this.options.startPage<1||this.options.startPage>this.options.totalPages){throw new Error("Start page option is incorrect")}this.options.totalPages=parseInt(this.options.totalPages);if(isNaN(this.options.totalPages)){throw new Error("Total pages option is not correct!")}this.options.visiblePages=parseInt(this.options.visiblePages);if(isNaN(this.options.visiblePages)){throw new Error("Visible pages option is not correct!")}if(this.options.totalPages<this.options.visiblePages){this.options.visiblePages=this.options.totalPages}if(this.options.onPageClick instanceof Function){this.$element.first().bind("page",this.options.onPageClick)}if(this.options.href){var g,k=this.options.href.replace(/[-\/\\^$*+?.|[\]]/g,"\\$&");k=k.replace(this.options.hrefVariable,"(\\d+)");if((g=new RegExp(k,"i").exec(d.location.href))!=null){this.options.startPage=parseInt(g[1],10)}}var i=(typeof this.$element.prop==="function")?this.$element.prop("tagName"):this.$element.attr("tagName");if(i==="UL"){this.$listContainer=this.$element}else{this.$listContainer=e("<ul></ul>")}this.$listContainer.addClass(this.options.paginationClass);if(i!=="UL"){this.$element.append(this.$listContainer)}this.render(this.getPages(this.options.startPage));this.setupEvents();return this};c.prototype={constructor:c,destroy:function(){this.$element.empty();this.$element.removeData("twbs-pagination");this.$element.unbind("page");return this},show:function(g){if(g<1||g>this.options.totalPages){throw new Error("Page is incorrect.")}this.render(this.getPages(g));this.setupEvents();this.$element.trigger("page",g);return this},buildListItems:function(g){var j=e();if(this.options.first){j=j.add(this.buildItem("first",1))}if(this.options.prev){var l=g.currentPage>1?g.currentPage-1:this.options.loop?this.options.totalPages:1;j=j.add(this.buildItem("prev",l))}for(var h=0;h<g.numeric.length;h++){j=j.add(this.buildItem("page",g.numeric[h]))}if(this.options.next){var k=g.currentPage<this.options.totalPages?g.currentPage+1:this.options.loop?1:this.options.totalPages;j=j.add(this.buildItem("next",k))}if(this.options.last){j=j.add(this.buildItem("last",this.options.totalPages))}return j},buildItem:function(i,j){var h=e("<li></li>"),k=e("<a></a>"),g=null;switch(i){case"page":g=j;h.addClass(this.options.pageClass);break;case"first":g=this.options.first;h.addClass(this.options.firstClass);break;case"prev":g=this.options.prev;h.addClass(this.options.prevClass);break;case"next":g=this.options.next;h.addClass(this.options.nextClass);break;case"last":g=this.options.last;h.addClass(this.options.lastClass);break;default:break}h.data("page",j);h.data("page-type",i);h.append(k.attr("href",this.makeHref(j)).html(g));return h},getPages:function(j){var g=[];var k=Math.floor(this.options.visiblePages/2);var l=j-k+1-this.options.visiblePages%2;var h=j+k;if(l<=0){l=1;h=this.options.visiblePages}if(h>this.options.totalPages){l=this.options.totalPages-this.options.visiblePages+1;h=this.options.totalPages}var i=l;while(i<=h){g.push(i);i++}return{currentPage:j,numeric:g}},render:function(g){this.$listContainer.children().remove();this.$listContainer.append(this.buildListItems(g));var h=this.$listContainer.children();h.filter(function(){return e(this).data("page")===g.currentPage&&e(this).data("page-type")==="page"}).addClass(this.options.activeClass);h.filter(function(){return e(this).data("page-type")==="first"}).toggleClass(this.options.disabledClass,g.currentPage===1);h.filter(function(){return e(this).data("page-type")==="last"}).toggleClass(this.options.disabledClass,g.currentPage===this.options.totalPages);h.filter(function(){return e(this).data("page-type")==="prev"}).toggleClass(this.options.disabledClass,!this.options.loop&&g.currentPage===1);h.filter(function(){return e(this).data("page-type")==="next"}).toggleClass(this.options.disabledClass,!this.options.loop&&g.currentPage===this.options.totalPages)},setupEvents:function(){var g=this;this.$listContainer.find("li").each(function(){var h=e(this);h.off();if(h.hasClass(g.options.disabledClass)||h.hasClass(g.options.activeClass)){h.click(function(i){i.preventDefault()});return}h.click(function(i){!g.options.href&&i.preventDefault();g.show(parseInt(h.data("page"),10))})})},makeHref:function(g){return this.options.href?this.options.href.replace(this.options.hrefVariable,g):"#"}};e.fn.twbsPagination=function(i){var h=Array.prototype.slice.call(arguments,1);var k;var l=e(this);var j=l.data("twbs-pagination");var g=typeof i==="object"&&i;if(!j){l.data("twbs-pagination",(j=new c(this,g)))}if(typeof i==="string"){k=j[i].apply(j,h)}return(k===f)?l:k};e.fn.twbsPagination.defaults={totalPages:0,startPage:1,visiblePages:5,href:false,hrefVariable:"{{number}}",first:"First",prev:"Previous",next:"Next",last:"Last",loop:false,onPageClick:null,paginationClass:"pagination",nextClass:"next",prevClass:"prev",lastClass:"last",firstClass:"first",pageClass:"page",activeClass:"active",disabledClass:"disabled"};e.fn.twbsPagination.Constructor=c;e.fn.twbsPagination.noConflict=function(){e.fn.twbsPagination=b;return this}})(jQuery,window,document);
if(typeof jQuery=="undefined")throw new Error("Bootstrap's JavaScript requires jQuery");+function(n){"use strict";var t=n.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||t[0]==1&&t[1]==9&&t[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher");}(jQuery);+function(n){"use strict";function t(){var i=document.createElement("bootstrap"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var t in n)if(i.style[t]!==undefined)return{end:n[t]};return!1}n.fn.emulateTransitionEnd=function(t){var i=!1,u=this,r;n(this).one("bsTransitionEnd",function(){i=!0});return r=function(){i||n(u).trigger(n.support.transition.end)},setTimeout(r,t),this};n(function(){(n.support.transition=t(),n.support.transition)&&(n.event.special.bsTransitionEnd={bindType:n.support.transition.end,delegateType:n.support.transition.end,handle:function(t){if(n(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(jQuery);+function(n){"use strict";function u(i){return this.each(function(){var r=n(this),u=r.data("bs.alert");u||r.data("bs.alert",u=new t(this));typeof i=="string"&&u[i].call(r)})}var i='[data-dismiss="alert"]',t=function(t){n(t).on("click",i,this.close)},r;t.VERSION="3.3.5";t.TRANSITION_DURATION=150;t.prototype.close=function(i){function e(){r.detach().trigger("closed.bs.alert").remove()}var f=n(this),u=f.attr("data-target"),r;(u||(u=f.attr("href"),u=u&&u.replace(/.*(?=#[^\s]*$)/,"")),r=n(u),i&&i.preventDefault(),r.length||(r=f.closest(".alert")),r.trigger(i=n.Event("close.bs.alert")),i.isDefaultPrevented())||(r.removeClass("in"),n.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",e).emulateTransitionEnd(t.TRANSITION_DURATION):e())};r=n.fn.alert;n.fn.alert=u;n.fn.alert.Constructor=t;n.fn.alert.noConflict=function(){return n.fn.alert=r,this};n(document).on("click.bs.alert.data-api",i,t.prototype.close)}(jQuery);+function(n){"use strict";function i(i){return this.each(function(){var u=n(this),r=u.data("bs.button"),f=typeof i=="object"&&i;r||u.data("bs.button",r=new t(this,f));i=="toggle"?r.toggle():i&&r.setState(i)})}var t=function(i,r){this.$element=n(i);this.options=n.extend({},t.DEFAULTS,r);this.isLoading=!1},r;t.VERSION="3.3.5";t.DEFAULTS={loadingText:"loading..."};t.prototype.setState=function(t){var r="disabled",i=this.$element,f=i.is("input")?"val":"html",u=i.data();t+="Text";u.resetText==null&&i.data("resetText",i[f]());setTimeout(n.proxy(function(){i[f](u[t]==null?this.options[t]:u[t]);t=="loadingText"?(this.isLoading=!0,i.addClass(r).attr(r,r)):this.isLoading&&(this.isLoading=!1,i.removeClass(r).removeAttr(r))},this),0)};t.prototype.toggle=function(){var t=!0,i=this.$element.closest('[data-toggle="buttons"]'),n;i.length?(n=this.$element.find("input"),n.prop("type")=="radio"?(n.prop("checked")&&(t=!1),i.find(".active").removeClass("active"),this.$element.addClass("active")):n.prop("type")=="checkbox"&&(n.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),n.prop("checked",this.$element.hasClass("active")),t&&n.trigger("change")):(this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active"))};r=n.fn.button;n.fn.button=i;n.fn.button.Constructor=t;n.fn.button.noConflict=function(){return n.fn.button=r,this};n(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(t){var r=n(t.target);r.hasClass("btn")||(r=r.closest(".btn"));i.call(r,"toggle");n(t.target).is('input[type="radio"]')||n(t.target).is('input[type="checkbox"]')||t.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){n(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery);+function(n){"use strict";function i(i){return this.each(function(){var u=n(this),r=u.data("bs.carousel"),f=n.extend({},t.DEFAULTS,u.data(),typeof i=="object"&&i),e=typeof i=="string"?i:f.slide;r||u.data("bs.carousel",r=new t(this,f));typeof i=="number"?r.to(i):e?r[e]():f.interval&&r.pause().cycle()})}var t=function(t,i){this.$element=n(t);this.$indicators=this.$element.find(".carousel-indicators");this.options=i;this.paused=null;this.sliding=null;this.interval=null;this.$active=null;this.$items=null;this.options.keyboard&&this.$element.on("keydown.bs.carousel",n.proxy(this.keydown,this));this.options.pause!="hover"||"ontouchstart"in document.documentElement||this.$element.on("mouseenter.bs.carousel",n.proxy(this.pause,this)).on("mouseleave.bs.carousel",n.proxy(this.cycle,this))},u,r;t.VERSION="3.3.5";t.TRANSITION_DURATION=600;t.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0};t.prototype.keydown=function(n){if(!/input|textarea/i.test(n.target.tagName)){switch(n.which){case 37:this.prev();break;case 39:this.next();break;default:return}n.preventDefault()}};t.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(n.proxy(this.next,this),this.options.interval)),this};t.prototype.getItemIndex=function(n){return this.$items=n.parent().children(".item"),this.$items.index(n||this.$active)};t.prototype.getItemForDirection=function(n,t){var i=this.getItemIndex(t),f=n=="prev"&&i===0||n=="next"&&i==this.$items.length-1,r,u;return f&&!this.options.wrap?t:(r=n=="prev"?-1:1,u=(i+r)%this.$items.length,this.$items.eq(u))};t.prototype.to=function(n){var i=this,t=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(n>this.$items.length-1)&&!(n<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){i.to(n)}):t==n?this.pause().cycle():this.slide(n>t?"next":"prev",this.$items.eq(n))};t.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&n.support.transition&&(this.$element.trigger(n.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this};t.prototype.next=function(){if(!this.sliding)return this.slide("next")};t.prototype.prev=function(){if(!this.sliding)return this.slide("prev")};t.prototype.slide=function(i,r){var e=this.$element.find(".item.active"),u=r||this.getItemForDirection(i,e),l=this.interval,f=i=="next"?"left":"right",a=this,o,s,h,c;return u.hasClass("active")?this.sliding=!1:(o=u[0],s=n.Event("slide.bs.carousel",{relatedTarget:o,direction:f}),this.$element.trigger(s),s.isDefaultPrevented())?void 0:(this.sliding=!0,l&&this.pause(),this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),h=n(this.$indicators.children()[this.getItemIndex(u)]),h&&h.addClass("active")),c=n.Event("slid.bs.carousel",{relatedTarget:o,direction:f}),n.support.transition&&this.$element.hasClass("slide")?(u.addClass(i),u[0].offsetWidth,e.addClass(f),u.addClass(f),e.one("bsTransitionEnd",function(){u.removeClass([i,f].join(" ")).addClass("active");e.removeClass(["active",f].join(" "));a.sliding=!1;setTimeout(function(){a.$element.trigger(c)},0)}).emulateTransitionEnd(t.TRANSITION_DURATION)):(e.removeClass("active"),u.addClass("active"),this.sliding=!1,this.$element.trigger(c)),l&&this.cycle(),this)};u=n.fn.carousel;n.fn.carousel=i;n.fn.carousel.Constructor=t;n.fn.carousel.noConflict=function(){return n.fn.carousel=u,this};r=function(t){var o,r=n(this),u=n(r.attr("data-target")||(o=r.attr("href"))&&o.replace(/.*(?=#[^\s]+$)/,"")),e,f;u.hasClass("carousel")&&(e=n.extend({},u.data(),r.data()),f=r.attr("data-slide-to"),f&&(e.interval=!1),i.call(u,e),f&&u.data("bs.carousel").to(f),t.preventDefault())};n(document).on("click.bs.carousel.data-api","[data-slide]",r).on("click.bs.carousel.data-api","[data-slide-to]",r);n(window).on("load",function(){n('[data-ride="carousel"]').each(function(){var t=n(this);i.call(t,t.data())})})}(jQuery);+function(n){"use strict";function r(t){var i,r=t.attr("data-target")||(i=t.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return n(r)}function i(i){return this.each(function(){var u=n(this),r=u.data("bs.collapse"),f=n.extend({},t.DEFAULTS,u.data(),typeof i=="object"&&i);!r&&f.toggle&&/show|hide/.test(i)&&(f.toggle=!1);r||u.data("bs.collapse",r=new t(this,f));typeof i=="string"&&r[i]()})}var t=function(i,r){this.$element=n(i);this.options=n.extend({},t.DEFAULTS,r);this.$trigger=n('[data-toggle="collapse"][href="#'+i.id+'"],[data-toggle="collapse"][data-target="#'+i.id+'"]');this.transitioning=null;this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger);this.options.toggle&&this.toggle()},u;t.VERSION="3.3.5";t.TRANSITION_DURATION=350;t.DEFAULTS={toggle:!0};t.prototype.dimension=function(){var n=this.$element.hasClass("width");return n?"width":"height"};t.prototype.show=function(){var f,r,e,u,o,s;if(!this.transitioning&&!this.$element.hasClass("in")&&(r=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing"),!r||!r.length||(f=r.data("bs.collapse"),!f||!f.transitioning))&&(e=n.Event("show.bs.collapse"),this.$element.trigger(e),!e.isDefaultPrevented())){if(r&&r.length&&(i.call(r,"hide"),f||r.data("bs.collapse",null)),u=this.dimension(),this.$element.removeClass("collapse").addClass("collapsing")[u](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1,o=function(){this.$element.removeClass("collapsing").addClass("collapse in")[u]("");this.transitioning=0;this.$element.trigger("shown.bs.collapse")},!n.support.transition)return o.call(this);s=n.camelCase(["scroll",u].join("-"));this.$element.one("bsTransitionEnd",n.proxy(o,this)).emulateTransitionEnd(t.TRANSITION_DURATION)[u](this.$element[0][s])}};t.prototype.hide=function(){var r,i,u;if(!this.transitioning&&this.$element.hasClass("in")&&(r=n.Event("hide.bs.collapse"),this.$element.trigger(r),!r.isDefaultPrevented())){if(i=this.dimension(),this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1,u=function(){this.transitioning=0;this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")},!n.support.transition)return u.call(this);this.$element[i](0).one("bsTransitionEnd",n.proxy(u,this)).emulateTransitionEnd(t.TRANSITION_DURATION)}};t.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};t.prototype.getParent=function(){return n(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(n.proxy(function(t,i){var u=n(i);this.addAriaAndCollapsedClass(r(u),u)},this)).end()};t.prototype.addAriaAndCollapsedClass=function(n,t){var i=n.hasClass("in");n.attr("aria-expanded",i);t.toggleClass("collapsed",!i).attr("aria-expanded",i)};u=n.fn.collapse;n.fn.collapse=i;n.fn.collapse.Constructor=t;n.fn.collapse.noConflict=function(){return n.fn.collapse=u,this};n(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(t){var u=n(this);u.attr("data-target")||t.preventDefault();var f=r(u),e=f.data("bs.collapse"),o=e?"toggle":u.data();i.call(f,o)})}(jQuery);+function(n){"use strict";function r(t){var i=t.attr("data-target"),r;return i||(i=t.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,"")),r=i&&n(i),r&&r.length?r:t.parent()}function u(t){t&&t.which===3||(n(e).remove(),n(i).each(function(){var u=n(this),i=r(u),f={relatedTarget:this};i.hasClass("open")&&(t&&t.type=="click"&&/input|textarea/i.test(t.target.tagName)&&n.contains(i[0],t.target)||(i.trigger(t=n.Event("hide.bs.dropdown",f)),t.isDefaultPrevented())||(u.attr("aria-expanded","false"),i.removeClass("open").trigger("hidden.bs.dropdown",f)))}))}function o(i){return this.each(function(){var r=n(this),u=r.data("bs.dropdown");u||r.data("bs.dropdown",u=new t(this));typeof i=="string"&&u[i].call(r)})}var e=".dropdown-backdrop",i='[data-toggle="dropdown"]',t=function(t){n(t).on("click.bs.dropdown",this.toggle)},f;t.VERSION="3.3.5";t.prototype.toggle=function(t){var f=n(this),i,o,e;if(!f.is(".disabled, :disabled")){if(i=r(f),o=i.hasClass("open"),u(),!o){if("ontouchstart"in document.documentElement&&!i.closest(".navbar-nav").length)n(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(n(this)).on("click",u);if(e={relatedTarget:this},i.trigger(t=n.Event("show.bs.dropdown",e)),t.isDefaultPrevented())return;f.trigger("focus").attr("aria-expanded","true");i.toggleClass("open").trigger("shown.bs.dropdown",e)}return!1}};t.prototype.keydown=function(t){var e,o,s,h,f,u;if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)&&(e=n(this),t.preventDefault(),t.stopPropagation(),!e.is(".disabled, :disabled"))){if(o=r(e),s=o.hasClass("open"),!s&&t.which!=27||s&&t.which==27)return t.which==27&&o.find(i).trigger("focus"),e.trigger("click");(h=" li:not(.disabled):visible a",f=o.find(".dropdown-menu"+h),f.length)&&(u=f.index(t.target),t.which==38&&u>0&&u--,t.which==40&&u<f.length-1&&u++,~u||(u=0),f.eq(u).trigger("focus"))}};f=n.fn.dropdown;n.fn.dropdown=o;n.fn.dropdown.Constructor=t;n.fn.dropdown.noConflict=function(){return n.fn.dropdown=f,this};n(document).on("click.bs.dropdown.data-api",u).on("click.bs.dropdown.data-api",".dropdown form",function(n){n.stopPropagation()}).on("click.bs.dropdown.data-api",i,t.prototype.toggle).on("keydown.bs.dropdown.data-api",i,t.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",t.prototype.keydown)}(jQuery);+function(n){"use strict";function i(i,r){return this.each(function(){var f=n(this),u=f.data("bs.modal"),e=n.extend({},t.DEFAULTS,f.data(),typeof i=="object"&&i);u||f.data("bs.modal",u=new t(this,e));typeof i=="string"?u[i](r):e.show&&u.show(r)})}var t=function(t,i){this.options=i;this.$body=n(document.body);this.$element=n(t);this.$dialog=this.$element.find(".modal-dialog");this.$backdrop=null;this.isShown=null;this.originalBodyPad=null;this.scrollbarWidth=0;this.ignoreBackdropClick=!1;this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,n.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))},r;t.VERSION="3.3.5";t.TRANSITION_DURATION=300;t.BACKDROP_TRANSITION_DURATION=150;t.DEFAULTS={backdrop:!0,keyboard:!0,show:!0};t.prototype.toggle=function(n){return this.isShown?this.hide():this.show(n)};t.prototype.show=function(i){var r=this,u=n.Event("show.bs.modal",{relatedTarget:i});if(this.$element.trigger(u),!this.isShown&&!u.isDefaultPrevented()){this.isShown=!0;this.checkScrollbar();this.setScrollbar();this.$body.addClass("modal-open");this.escape();this.resize();this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',n.proxy(this.hide,this));this.$dialog.on("mousedown.dismiss.bs.modal",function(){r.$element.one("mouseup.dismiss.bs.modal",function(t){n(t.target).is(r.$element)&&(r.ignoreBackdropClick=!0)})});this.backdrop(function(){var f=n.support.transition&&r.$element.hasClass("fade"),u;r.$element.parent().length||r.$element.appendTo(r.$body);r.$element.show().scrollTop(0);r.adjustDialog();f&&r.$element[0].offsetWidth;r.$element.addClass("in");r.enforceFocus();u=n.Event("shown.bs.modal",{relatedTarget:i});f?r.$dialog.one("bsTransitionEnd",function(){r.$element.trigger("focus").trigger(u)}).emulateTransitionEnd(t.TRANSITION_DURATION):r.$element.trigger("focus").trigger(u)})}};t.prototype.hide=function(i){(i&&i.preventDefault(),i=n.Event("hide.bs.modal"),this.$element.trigger(i),this.isShown&&!i.isDefaultPrevented())&&(this.isShown=!1,this.escape(),this.resize(),n(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),n.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",n.proxy(this.hideModal,this)).emulateTransitionEnd(t.TRANSITION_DURATION):this.hideModal())};t.prototype.enforceFocus=function(){n(document).off("focusin.bs.modal").on("focusin.bs.modal",n.proxy(function(n){this.$element[0]===n.target||this.$element.has(n.target).length||this.$element.trigger("focus")},this))};t.prototype.escape=function(){if(this.isShown&&this.options.keyboard)this.$element.on("keydown.dismiss.bs.modal",n.proxy(function(n){n.which==27&&this.hide()},this));else this.isShown||this.$element.off("keydown.dismiss.bs.modal")};t.prototype.resize=function(){if(this.isShown)n(window).on("resize.bs.modal",n.proxy(this.handleUpdate,this));else n(window).off("resize.bs.modal")};t.prototype.hideModal=function(){var n=this;this.$element.hide();this.backdrop(function(){n.$body.removeClass("modal-open");n.resetAdjustments();n.resetScrollbar();n.$element.trigger("hidden.bs.modal")})};t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};t.prototype.backdrop=function(i){var e=this,f=this.$element.hasClass("fade")?"fade":"",r,u;if(this.isShown&&this.options.backdrop){r=n.support.transition&&f;this.$backdrop=n(document.createElement("div")).addClass("modal-backdrop "+f).prependTo(this.$element);this.$backdrop.on("click.dismiss.bs.modal",n.proxy(function(n){if(this.ignoreBackdropClick){this.ignoreBackdropClick=!1;return}n.target===n.currentTarget&&(this.options.backdrop=="static"?this.$element[0].focus():this.hide())},this));if(r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!i)return;r?this.$backdrop.one("bsTransitionEnd",i).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):i()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),u=function(){e.removeBackdrop();i&&i()},n.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",u).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):u()):i&&i()};t.prototype.handleUpdate=function(){this.adjustDialog()};t.prototype.adjustDialog=function(){var n=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&n?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!n?this.scrollbarWidth:""})};t.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})};t.prototype.checkScrollbar=function(){var n=window.innerWidth,t;n||(t=document.documentElement.getBoundingClientRect(),n=t.right-Math.abs(t.left));this.bodyIsOverflowing=document.body.clientWidth<n;this.scrollbarWidth=this.measureScrollbar()};t.prototype.setScrollbar=function(){var n=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"";this.bodyIsOverflowing&&this.$body.css("padding-right",n+this.scrollbarWidth)};t.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)};t.prototype.measureScrollbar=function(){var n=document.createElement("div"),t;return n.className="modal-scrollbar-measure",this.$body.append(n),t=n.offsetWidth-n.clientWidth,this.$body[0].removeChild(n),t};r=n.fn.modal;n.fn.modal=i;n.fn.modal.Constructor=t;n.fn.modal.noConflict=function(){return n.fn.modal=r,this};n(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var r=n(this),f=r.attr("href"),u=n(r.attr("data-target")||f&&f.replace(/.*(?=#[^\s]+$)/,"")),e=u.data("bs.modal")?"toggle":n.extend({remote:!/#/.test(f)&&f},u.data(),r.data());r.is("a")&&t.preventDefault();u.one("show.bs.modal",function(n){if(!n.isDefaultPrevented())u.one("hidden.bs.modal",function(){r.is(":visible")&&r.trigger("focus")})});i.call(u,e,this)})}(jQuery);+function(n){"use strict";function r(i){return this.each(function(){var u=n(this),r=u.data("bs.tooltip"),f=typeof i=="object"&&i;(r||!/destroy|hide/.test(i))&&(r||u.data("bs.tooltip",r=new t(this,f)),typeof i=="string"&&r[i]())})}var t=function(n,t){this.type=null;this.options=null;this.enabled=null;this.timeout=null;this.hoverState=null;this.$element=null;this.inState=null;this.init("tooltip",n,t)},i;t.VERSION="3.3.5";t.TRANSITION_DURATION=150;t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"><\/div><div class="tooltip-inner"><\/div><\/div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}};t.prototype.init=function(t,i,r){var f,e,u,o,s;if(this.enabled=!0,this.type=t,this.$element=n(i),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&n(n.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(f=this.options.trigger.split(" "),e=f.length;e--;)if(u=f[e],u=="click")this.$element.on("click."+this.type,this.options.selector,n.proxy(this.toggle,this));else if(u!="manual"){o=u=="hover"?"mouseenter":"focusin";s=u=="hover"?"mouseleave":"focusout";this.$element.on(o+"."+this.type,this.options.selector,n.proxy(this.enter,this));this.$element.on(s+"."+this.type,this.options.selector,n.proxy(this.leave,this))}this.options.selector?this._options=n.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()};t.prototype.getDefaults=function(){return t.DEFAULTS};t.prototype.getOptions=function(t){return t=n.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),t};t.prototype.getDelegateOptions=function(){var t={},i=this.getDefaults();return this._options&&n.each(this._options,function(n,r){i[n]!=r&&(t[n]=r)}),t};t.prototype.enter=function(t){var i=t instanceof this.constructor?t:n(t.currentTarget).data("bs."+this.type);if(i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),n(t.currentTarget).data("bs."+this.type,i)),t instanceof n.Event&&(i.inState[t.type=="focusin"?"focus":"hover"]=!0),i.tip().hasClass("in")||i.hoverState=="in"){i.hoverState="in";return}if(clearTimeout(i.timeout),i.hoverState="in",!i.options.delay||!i.options.delay.show)return i.show();i.timeout=setTimeout(function(){i.hoverState=="in"&&i.show()},i.options.delay.show)};t.prototype.isInStateTrue=function(){for(var n in this.inState)if(this.inState[n])return!0;return!1};t.prototype.leave=function(t){var i=t instanceof this.constructor?t:n(t.currentTarget).data("bs."+this.type);if(i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),n(t.currentTarget).data("bs."+this.type,i)),t instanceof n.Event&&(i.inState[t.type=="focusout"?"focus":"hover"]=!1),!i.isInStateTrue()){if(clearTimeout(i.timeout),i.hoverState="out",!i.options.delay||!i.options.delay.hide)return i.hide();i.timeout=setTimeout(function(){i.hoverState=="out"&&i.hide()},i.options.delay.hide)}};t.prototype.show=function(){var c=n.Event("show.bs."+this.type),l,p,e,w,h;if(this.hasContent()&&this.enabled){if(this.$element.trigger(c),l=n.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]),c.isDefaultPrevented()||!l)return;var u=this,r=this.tip(),a=this.getUID(this.type);this.setContent();r.attr("id",a);this.$element.attr("aria-describedby",a);this.options.animation&&r.addClass("fade");var i=typeof this.options.placement=="function"?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,v=/\s?auto?\s?/i,y=v.test(i);y&&(i=i.replace(v,"")||"top");r.detach().css({top:0,left:0,display:"block"}).addClass(i).data("bs."+this.type,this);this.options.container?r.appendTo(this.options.container):r.insertAfter(this.$element);this.$element.trigger("inserted.bs."+this.type);var f=this.getPosition(),o=r[0].offsetWidth,s=r[0].offsetHeight;y&&(p=i,e=this.getPosition(this.$viewport),i=i=="bottom"&&f.bottom+s>e.bottom?"top":i=="top"&&f.top-s<e.top?"bottom":i=="right"&&f.right+o>e.width?"left":i=="left"&&f.left-o<e.left?"right":i,r.removeClass(p).addClass(i));w=this.getCalculatedOffset(i,f,o,s);this.applyPlacement(w,i);h=function(){var n=u.hoverState;u.$element.trigger("shown.bs."+u.type);u.hoverState=null;n=="out"&&u.leave(u)};n.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",h).emulateTransitionEnd(t.TRANSITION_DURATION):h()}};t.prototype.applyPlacement=function(t,i){var r=this.tip(),l=r[0].offsetWidth,e=r[0].offsetHeight,o=parseInt(r.css("margin-top"),10),s=parseInt(r.css("margin-left"),10),h,f,u;isNaN(o)&&(o=0);isNaN(s)&&(s=0);t.top+=o;t.left+=s;n.offset.setOffset(r[0],n.extend({using:function(n){r.css({top:Math.round(n.top),left:Math.round(n.left)})}},t),0);r.addClass("in");h=r[0].offsetWidth;f=r[0].offsetHeight;i=="top"&&f!=e&&(t.top=t.top+e-f);u=this.getViewportAdjustedDelta(i,t,h,f);u.left?t.left+=u.left:t.top+=u.top;var c=/top|bottom/.test(i),a=c?u.left*2-l+h:u.top*2-e+f,v=c?"offsetWidth":"offsetHeight";r.offset(t);this.replaceArrow(a,r[0][v],c)};t.prototype.replaceArrow=function(n,t,i){this.arrow().css(i?"left":"top",50*(1-n/t)+"%").css(i?"top":"left","")};t.prototype.setContent=function(){var n=this.tip(),t=this.getTitle();n.find(".tooltip-inner")[this.options.html?"html":"text"](t);n.removeClass("fade in top bottom left right")};t.prototype.hide=function(i){function e(){u.hoverState!="in"&&r.detach();u.$element.removeAttr("aria-describedby").trigger("hidden.bs."+u.type);i&&i()}var u=this,r=n(this.$tip),f=n.Event("hide.bs."+this.type);if(this.$element.trigger(f),!f.isDefaultPrevented())return r.removeClass("in"),n.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",e).emulateTransitionEnd(t.TRANSITION_DURATION):e(),this.hoverState=null,this};t.prototype.fixTitle=function(){var n=this.$element;(n.attr("title")||typeof n.attr("data-original-title")!="string")&&n.attr("data-original-title",n.attr("title")||"").attr("title","")};t.prototype.hasContent=function(){return this.getTitle()};t.prototype.getPosition=function(t){t=t||this.$element;var u=t[0],r=u.tagName=="BODY",i=u.getBoundingClientRect();i.width==null&&(i=n.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var f=r?{top:0,left:0}:t.offset(),e={scroll:r?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},o=r?{width:n(window).width(),height:n(window).height()}:null;return n.extend({},i,e,o,f)};t.prototype.getCalculatedOffset=function(n,t,i,r){return n=="bottom"?{top:t.top+t.height,left:t.left+t.width/2-i/2}:n=="top"?{top:t.top-r,left:t.left+t.width/2-i/2}:n=="left"?{top:t.top+t.height/2-r/2,left:t.left-i}:{top:t.top+t.height/2-r/2,left:t.left+t.width}};t.prototype.getViewportAdjustedDelta=function(n,t,i,r){var f={top:0,left:0},e,u,o,s,h,c;return this.$viewport?(e=this.options.viewport&&this.options.viewport.padding||0,u=this.getPosition(this.$viewport),/right|left/.test(n)?(o=t.top-e-u.scroll,s=t.top+e-u.scroll+r,o<u.top?f.top=u.top-o:s>u.top+u.height&&(f.top=u.top+u.height-s)):(h=t.left-e,c=t.left+e+i,h<u.left?f.left=u.left-h:c>u.right&&(f.left=u.left+u.width-c)),f):f};t.prototype.getTitle=function(){var t=this.$element,n=this.options;return t.attr("data-original-title")||(typeof n.title=="function"?n.title.call(t[0]):n.title)};t.prototype.getUID=function(n){do n+=~~(Math.random()*1e6);while(document.getElementById(n));return n};t.prototype.tip=function(){if(!this.$tip&&(this.$tip=n(this.options.template),this.$tip.length!=1))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip};t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")};t.prototype.enable=function(){this.enabled=!0};t.prototype.disable=function(){this.enabled=!1};t.prototype.toggleEnabled=function(){this.enabled=!this.enabled};t.prototype.toggle=function(t){var i=this;t&&(i=n(t.currentTarget).data("bs."+this.type),i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),n(t.currentTarget).data("bs."+this.type,i)));t?(i.inState.click=!i.inState.click,i.isInStateTrue()?i.enter(i):i.leave(i)):i.tip().hasClass("in")?i.leave(i):i.enter(i)};t.prototype.destroy=function(){var n=this;clearTimeout(this.timeout);this.hide(function(){n.$element.off("."+n.type).removeData("bs."+n.type);n.$tip&&n.$tip.detach();n.$tip=null;n.$arrow=null;n.$viewport=null})};i=n.fn.tooltip;n.fn.tooltip=r;n.fn.tooltip.Constructor=t;n.fn.tooltip.noConflict=function(){return n.fn.tooltip=i,this}}(jQuery);+function(n){"use strict";function r(i){return this.each(function(){var u=n(this),r=u.data("bs.popover"),f=typeof i=="object"&&i;(r||!/destroy|hide/.test(i))&&(r||u.data("bs.popover",r=new t(this,f)),typeof i=="string"&&r[i]())})}var t=function(n,t){this.init("popover",n,t)},i;if(!n.fn.tooltip)throw new Error("Popover requires tooltip.js");t.VERSION="3.3.5";t.DEFAULTS=n.extend({},n.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"><\/div><h3 class="popover-title"><\/h3><div class="popover-content"><\/div><\/div>'});t.prototype=n.extend({},n.fn.tooltip.Constructor.prototype);t.prototype.constructor=t;t.prototype.getDefaults=function(){return t.DEFAULTS};t.prototype.setContent=function(){var n=this.tip(),i=this.getTitle(),t=this.getContent();n.find(".popover-title")[this.options.html?"html":"text"](i);n.find(".popover-content").children().detach().end()[this.options.html?typeof t=="string"?"html":"append":"text"](t);n.removeClass("fade top bottom left right in");n.find(".popover-title").html()||n.find(".popover-title").hide()};t.prototype.hasContent=function(){return this.getTitle()||this.getContent()};t.prototype.getContent=function(){var t=this.$element,n=this.options;return t.attr("data-content")||(typeof n.content=="function"?n.content.call(t[0]):n.content)};t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};i=n.fn.popover;n.fn.popover=r;n.fn.popover.Constructor=t;n.fn.popover.noConflict=function(){return n.fn.popover=i,this}}(jQuery);+function(n){"use strict";function t(i,r){this.$body=n(document.body);this.$scrollElement=n(i).is(document.body)?n(window):n(i);this.options=n.extend({},t.DEFAULTS,r);this.selector=(this.options.target||"")+" .nav li > a";this.offsets=[];this.targets=[];this.activeTarget=null;this.scrollHeight=0;this.$scrollElement.on("scroll.bs.scrollspy",n.proxy(this.process,this));this.refresh();this.process()}function i(i){return this.each(function(){var u=n(this),r=u.data("bs.scrollspy"),f=typeof i=="object"&&i;r||u.data("bs.scrollspy",r=new t(this,f));typeof i=="string"&&r[i]()})}t.VERSION="3.3.5";t.DEFAULTS={offset:10};t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)};t.prototype.refresh=function(){var t=this,i="offset",r=0;this.offsets=[];this.targets=[];this.scrollHeight=this.getScrollHeight();n.isWindow(this.$scrollElement[0])||(i="position",r=this.$scrollElement.scrollTop());this.$body.find(this.selector).map(function(){var f=n(this),u=f.data("target")||f.attr("href"),t=/^#./.test(u)&&n(u);return t&&t.length&&t.is(":visible")&&[[t[i]().top+r,u]]||null}).sort(function(n,t){return n[0]-t[0]}).each(function(){t.offsets.push(this[0]);t.targets.push(this[1])})};t.prototype.process=function(){var i=this.$scrollElement.scrollTop()+this.options.offset,f=this.getScrollHeight(),e=this.options.offset+f-this.$scrollElement.height(),t=this.offsets,r=this.targets,u=this.activeTarget,n;if(this.scrollHeight!=f&&this.refresh(),i>=e)return u!=(n=r[r.length-1])&&this.activate(n);if(u&&i<t[0])return this.activeTarget=null,this.clear();for(n=t.length;n--;)u!=r[n]&&i>=t[n]&&(t[n+1]===undefined||i<t[n+1])&&this.activate(r[n])};t.prototype.activate=function(t){this.activeTarget=t;this.clear();var r=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',i=n(r).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active"));i.trigger("activate.bs.scrollspy")};t.prototype.clear=function(){n(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var r=n.fn.scrollspy;n.fn.scrollspy=i;n.fn.scrollspy.Constructor=t;n.fn.scrollspy.noConflict=function(){return n.fn.scrollspy=r,this};n(window).on("load.bs.scrollspy.data-api",function(){n('[data-spy="scroll"]').each(function(){var t=n(this);i.call(t,t.data())})})}(jQuery);+function(n){"use strict";function r(i){return this.each(function(){var u=n(this),r=u.data("bs.tab");r||u.data("bs.tab",r=new t(this));typeof i=="string"&&r[i]()})}var t=function(t){this.element=n(t)},u,i;t.VERSION="3.3.5";t.TRANSITION_DURATION=150;t.prototype.show=function(){var t=this.element,f=t.closest("ul:not(.dropdown-menu)"),i=t.data("target"),u;if(i||(i=t.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var r=f.find(".active:last a"),e=n.Event("hide.bs.tab",{relatedTarget:t[0]}),o=n.Event("show.bs.tab",{relatedTarget:r[0]});(r.trigger(e),t.trigger(o),o.isDefaultPrevented()||e.isDefaultPrevented())||(u=n(i),this.activate(t.closest("li"),f),this.activate(u,u.parent(),function(){r.trigger({type:"hidden.bs.tab",relatedTarget:t[0]});t.trigger({type:"shown.bs.tab",relatedTarget:r[0]})}))}};t.prototype.activate=function(i,r,u){function o(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1);i.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0);e?(i[0].offsetWidth,i.addClass("in")):i.removeClass("fade");i.parent(".dropdown-menu").length&&i.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0);u&&u()}var f=r.find("> .active"),e=u&&n.support.transition&&(f.length&&f.hasClass("fade")||!!r.find("> .fade").length);f.length&&e?f.one("bsTransitionEnd",o).emulateTransitionEnd(t.TRANSITION_DURATION):o();f.removeClass("in")};u=n.fn.tab;n.fn.tab=r;n.fn.tab.Constructor=t;n.fn.tab.noConflict=function(){return n.fn.tab=u,this};i=function(t){t.preventDefault();r.call(n(this),"show")};n(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',i).on("click.bs.tab.data-api",'[data-toggle="pill"]',i)}(jQuery);+function(n){"use strict";function i(i){return this.each(function(){var u=n(this),r=u.data("bs.affix"),f=typeof i=="object"&&i;r||u.data("bs.affix",r=new t(this,f));typeof i=="string"&&r[i]()})}var t=function(i,r){this.options=n.extend({},t.DEFAULTS,r);this.$target=n(this.options.target).on("scroll.bs.affix.data-api",n.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",n.proxy(this.checkPositionWithEventLoop,this));this.$element=n(i);this.affixed=null;this.unpin=null;this.pinnedOffset=null;this.checkPosition()},r;t.VERSION="3.3.5";t.RESET="affix affix-top affix-bottom";t.DEFAULTS={offset:0,target:window};t.prototype.getState=function(n,t,i,r){var u=this.$target.scrollTop(),f=this.$element.offset(),e=this.$target.height();if(i!=null&&this.affixed=="top")return u<i?"top":!1;if(this.affixed=="bottom")return i!=null?u+this.unpin<=f.top?!1:"bottom":u+e<=n-r?!1:"bottom";var o=this.affixed==null,s=o?u:f.top,h=o?e:t;return i!=null&&u<=i?"top":r!=null&&s+h>=n-r?"bottom":!1};t.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(t.RESET).addClass("affix");var n=this.$target.scrollTop(),i=this.$element.offset();return this.pinnedOffset=i.top-n};t.prototype.checkPositionWithEventLoop=function(){setTimeout(n.proxy(this.checkPosition,this),1)};t.prototype.checkPosition=function(){var i,e,o;if(this.$element.is(":visible")){var s=this.$element.height(),r=this.options.offset,f=r.top,u=r.bottom,h=Math.max(n(document).height(),n(document.body).height());if(typeof r!="object"&&(u=f=r),typeof f=="function"&&(f=r.top(this.$element)),typeof u=="function"&&(u=r.bottom(this.$element)),i=this.getState(h,s,f,u),this.affixed!=i){if(this.unpin!=null&&this.$element.css("top",""),e="affix"+(i?"-"+i:""),o=n.Event(e+".bs.affix"),this.$element.trigger(o),o.isDefaultPrevented())return;this.affixed=i;this.unpin=i=="bottom"?this.getPinnedOffset():null;this.$element.removeClass(t.RESET).addClass(e).trigger(e.replace("affix","affixed")+".bs.affix")}i=="bottom"&&this.$element.offset({top:h-s-u})}};r=n.fn.affix;n.fn.affix=i;n.fn.affix.Constructor=t;n.fn.affix.noConflict=function(){return n.fn.affix=r,this};n(window).on("load",function(){n('[data-spy="affix"]').each(function(){var r=n(this),t=r.data();t.offset=t.offset||{};t.offsetBottom!=null&&(t.offset.bottom=t.offsetBottom);t.offsetTop!=null&&(t.offset.top=t.offsetTop);i.call(r,t)})})}(jQuery);(function(){var a,AbstractChosen,Chosen,SelectParser,b,c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};SelectParser=function(){function SelectParser(){this.options_index=0,this.parsed=[]}return SelectParser.prototype.add_node=function(a){return"OPTGROUP"===a.nodeName.toUpperCase()?this.add_group(a):this.add_option(a)},SelectParser.prototype.add_group=function(a){var b,c,d,e,f,g;for(b=this.parsed.length,this.parsed.push({array_index:b,group:!0,label:this.escapeExpression(a.label),title:a.title?a.title:void 0,children:0,disabled:a.disabled,classes:a.className}),f=a.childNodes,g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(this.add_option(c,b,a.disabled));return g},SelectParser.prototype.add_option=function(a,b,c){return"OPTION"===a.nodeName.toUpperCase()?(""!==a.text?(null!=b&&(this.parsed[b].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:a.value,text:a.text,html:a.innerHTML,title:a.title?a.title:void 0,selected:a.selected,disabled:c===!0?c:a.disabled,group_array_index:b,group_label:null!=b?this.parsed[b].label:null,classes:a.className,style:a.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},SelectParser.prototype.escapeExpression=function(a){var b,c;return null==a||a===!1?"":/[\&\<\>\"\'\`]/.test(a)?(b={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},c=/&(?!\w+;)|[\<\>\"\'\`]/g,a.replace(c,function(a){return b[a]||"&amp;"})):a},SelectParser}(),SelectParser.select_to_array=function(a){var b,c,d,e,f;for(c=new SelectParser,f=a.childNodes,d=0,e=f.length;e>d;d++)b=f[d],c.add_node(b);return c.parsed},AbstractChosen=function(){function AbstractChosen(a,b){this.form_field=a,this.options=null!=b?b:{},AbstractChosen.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers(),this.on_ready())}return AbstractChosen.prototype.set_default_values=function(){var a=this;return this.click_test_action=function(b){return a.test_active_click(b)},this.activate_action=function(b){return a.activate_field(b)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null!=this.options.enable_split_word_search?this.options.enable_split_word_search:!0,this.group_search=null!=this.options.group_search?this.options.group_search:!0,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null!=this.options.single_backstroke_delete?this.options.single_backstroke_delete:!0,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null!=this.options.display_selected_options?this.options.display_selected_options:!0,this.display_disabled_options=null!=this.options.display_disabled_options?this.options.display_disabled_options:!0,this.include_group_label_in_selected=this.options.include_group_label_in_selected||!1},AbstractChosen.prototype.set_default_text=function(){return this.default_text=this.form_field.getAttribute("data-placeholder")?this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||AbstractChosen.default_multiple_text:this.options.placeholder_text_single||this.options.placeholder_text||AbstractChosen.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||AbstractChosen.default_no_result_text},AbstractChosen.prototype.choice_label=function(a){return this.include_group_label_in_selected&&null!=a.group_label?"<b class='group-name'>"+a.group_label+"</b>"+a.html:a.html},AbstractChosen.prototype.mouse_enter=function(){return this.mouse_on_container=!0},AbstractChosen.prototype.mouse_leave=function(){return this.mouse_on_container=!1},AbstractChosen.prototype.input_focus=function(){var a=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return a.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},AbstractChosen.prototype.input_blur=function(){var a=this;return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(){return a.blur_test()},100))},AbstractChosen.prototype.results_option_build=function(a){var b,c,d,e,f;for(b="",f=this.results_data,d=0,e=f.length;e>d;d++)c=f[d],b+=c.group?this.result_add_group(c):this.result_add_option(c),(null!=a?a.first:void 0)&&(c.selected&&this.is_multiple?this.choice_build(c):c.selected&&!this.is_multiple&&this.single_set_selected_text(this.choice_label(c)));return b},AbstractChosen.prototype.result_add_option=function(a){var b,c;return a.search_match?this.include_option_in_results(a)?(b=[],a.disabled||a.selected&&this.is_multiple||b.push("active-result"),!a.disabled||a.selected&&this.is_multiple||b.push("disabled-result"),a.selected&&b.push("result-selected"),null!=a.group_array_index&&b.push("group-option"),""!==a.classes&&b.push(a.classes),c=document.createElement("li"),c.className=b.join(" "),c.style.cssText=a.style,c.setAttribute("data-option-array-index",a.array_index),c.innerHTML=a.search_text,a.title&&(c.title=a.title),this.outerHTML(c)):"":""},AbstractChosen.prototype.result_add_group=function(a){var b,c;return a.search_match||a.group_match?a.active_options>0?(b=[],b.push("group-result"),a.classes&&b.push(a.classes),c=document.createElement("li"),c.className=b.join(" "),c.innerHTML=a.search_text,a.title&&(c.title=a.title),this.outerHTML(c)):"":""},AbstractChosen.prototype.results_update_field=function(){return this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.results_build(),this.results_showing?this.winnow_results():void 0},AbstractChosen.prototype.reset_single_select_options=function(){var a,b,c,d,e;for(d=this.results_data,e=[],b=0,c=d.length;c>b;b++)a=d[b],a.selected?e.push(a.selected=!1):e.push(void 0);return e},AbstractChosen.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},AbstractChosen.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},AbstractChosen.prototype.winnow_results=function(){var a,b,c,d,e,f,g,h,i,j,k,l;for(this.no_results_clear(),d=0,f=this.get_search_text(),a=f.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),i=new RegExp(a,"i"),c=this.get_search_regex(a),l=this.results_data,j=0,k=l.length;k>j;j++)b=l[j],b.search_match=!1,e=null,this.include_option_in_results(b)&&(b.group&&(b.group_match=!1,b.active_options=0),null!=b.group_array_index&&this.results_data[b.group_array_index]&&(e=this.results_data[b.group_array_index],0===e.active_options&&e.search_match&&(d+=1),e.active_options+=1),b.search_text=b.group?b.label:b.html,(!b.group||this.group_search)&&(b.search_match=this.search_string_match(b.search_text,c),b.search_match&&!b.group&&(d+=1),b.search_match?(f.length&&(g=b.search_text.search(i),h=b.search_text.substr(0,g+f.length)+"</em>"+b.search_text.substr(g+f.length),b.search_text=h.substr(0,g)+"<em>"+h.substr(g)),null!=e&&(e.group_match=!0)):null!=b.group_array_index&&this.results_data[b.group_array_index].search_match&&(b.search_match=!0)));return this.result_clear_highlight(),1>d&&f.length?(this.update_results_content(""),this.no_results(f)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},AbstractChosen.prototype.get_search_regex=function(a){var b;return b=this.search_contains?"":"^",new RegExp(b+a,"i")},AbstractChosen.prototype.search_string_match=function(a,b){var c,d,e,f;if(b.test(a))return!0;if(this.enable_split_word_search&&(a.indexOf(" ")>=0||0===a.indexOf("["))&&(d=a.replace(/\[|\]/g,"").split(" "),d.length))for(e=0,f=d.length;f>e;e++)if(c=d[e],b.test(c))return!0},AbstractChosen.prototype.choices_count=function(){var a,b,c,d;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,d=this.form_field.options,b=0,c=d.length;c>b;b++)a=d[b],a.selected&&(this.selected_option_count+=1);return this.selected_option_count},AbstractChosen.prototype.choices_click=function(a){return a.preventDefault(),this.results_showing||this.is_disabled?void 0:this.results_show()},AbstractChosen.prototype.keyup_checker=function(a){var b,c;switch(b=null!=(c=a.which)?c:a.keyCode,this.search_field_scale(),b){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(a.preventDefault(),this.results_showing)return this.result_select(a);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},AbstractChosen.prototype.clipboard_event_checker=function(){var a=this;return setTimeout(function(){return a.results_search()},50)},AbstractChosen.prototype.container_width=function(){return null!=this.options.width?this.options.width:""+this.form_field.offsetWidth+"px"},AbstractChosen.prototype.include_option_in_results=function(a){return this.is_multiple&&!this.display_selected_options&&a.selected?!1:!this.display_disabled_options&&a.disabled?!1:a.empty?!1:!0},AbstractChosen.prototype.search_results_touchstart=function(a){return this.touch_started=!0,this.search_results_mouseover(a)},AbstractChosen.prototype.search_results_touchmove=function(a){return this.touch_started=!1,this.search_results_mouseout(a)},AbstractChosen.prototype.search_results_touchend=function(a){return this.touch_started?this.search_results_mouseup(a):void 0},AbstractChosen.prototype.outerHTML=function(a){var b;return a.outerHTML?a.outerHTML:(b=document.createElement("div"),b.appendChild(a),b.innerHTML)},AbstractChosen.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:/iP(od|hone)/i.test(window.navigator.userAgent)?!1:/Android/i.test(window.navigator.userAgent)&&/Mobile/i.test(window.navigator.userAgent)?!1:!0},AbstractChosen.default_multiple_text="Select Some Options",AbstractChosen.default_single_text="Select an Option",AbstractChosen.default_no_result_text="No results match",AbstractChosen}(),a=jQuery,a.fn.extend({chosen:function(b){return AbstractChosen.browser_is_supported()?this.each(function(){var c,d;c=a(this),d=c.data("chosen"),"destroy"===b&&d instanceof Chosen?d.destroy():d instanceof Chosen||c.data("chosen",new Chosen(this,b))}):this}}),Chosen=function(c){function Chosen(){return b=Chosen.__super__.constructor.apply(this,arguments)}return d(Chosen,c),Chosen.prototype.setup=function(){return this.form_field_jq=a(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},Chosen.prototype.set_up_html=function(){var b,c;return b=["chosen-container"],b.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&b.push(this.form_field.className),this.is_rtl&&b.push("chosen-rtl"),c={"class":b.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(c.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=a("<div />",c),this.is_multiple?this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>'):this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior()},Chosen.prototype.on_ready=function(){return this.form_field_jq.trigger("chosen:ready",{chosen:this})},Chosen.prototype.register_observers=function(){var a=this;return this.container.bind("touchstart.chosen",function(b){return a.container_mousedown(b),b.preventDefault()}),this.container.bind("touchend.chosen",function(b){return a.container_mouseup(b),b.preventDefault()}),this.container.bind("mousedown.chosen",function(b){a.container_mousedown(b)}),this.container.bind("mouseup.chosen",function(b){a.container_mouseup(b)}),this.container.bind("mouseenter.chosen",function(b){a.mouse_enter(b)}),this.container.bind("mouseleave.chosen",function(b){a.mouse_leave(b)}),this.search_results.bind("mouseup.chosen",function(b){a.search_results_mouseup(b)}),this.search_results.bind("mouseover.chosen",function(b){a.search_results_mouseover(b)}),this.search_results.bind("mouseout.chosen",function(b){a.search_results_mouseout(b)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(b){a.search_results_mousewheel(b)}),this.search_results.bind("touchstart.chosen",function(b){a.search_results_touchstart(b)}),this.search_results.bind("touchmove.chosen",function(b){a.search_results_touchmove(b)}),this.search_results.bind("touchend.chosen",function(b){a.search_results_touchend(b)}),this.form_field_jq.bind("chosen:updated.chosen",function(b){a.results_update_field(b)}),this.form_field_jq.bind("chosen:activate.chosen",function(b){a.activate_field(b)}),this.form_field_jq.bind("chosen:open.chosen",function(b){a.container_mousedown(b)}),this.form_field_jq.bind("chosen:close.chosen",function(b){a.input_blur(b)}),this.search_field.bind("blur.chosen",function(b){a.input_blur(b)}),this.search_field.bind("keyup.chosen",function(b){a.keyup_checker(b)}),this.search_field.bind("keydown.chosen",function(b){a.keydown_checker(b)}),this.search_field.bind("focus.chosen",function(b){a.input_focus(b)}),this.search_field.bind("cut.chosen",function(b){a.clipboard_event_checker(b)}),this.search_field.bind("paste.chosen",function(b){a.clipboard_event_checker(b)}),this.is_multiple?this.search_choices.bind("click.chosen",function(b){a.choices_click(b)}):this.container.bind("click.chosen",function(a){a.preventDefault()})},Chosen.prototype.destroy=function(){return a(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},Chosen.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},Chosen.prototype.container_mousedown=function(b){return this.is_disabled||(b&&"mousedown"===b.type&&!this.results_showing&&b.preventDefault(),null!=b&&a(b.target).hasClass("search-choice-close"))?void 0:(this.active_field?this.is_multiple||!b||a(b.target)[0]!==this.selected_item[0]&&!a(b.target).parents("a.chosen-single").length||(b.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),a(this.container[0].ownerDocument).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field())},Chosen.prototype.container_mouseup=function(a){return"ABBR"!==a.target.nodeName||this.is_disabled?void 0:this.results_reset(a)},Chosen.prototype.search_results_mousewheel=function(a){var b;return a.originalEvent&&(b=a.originalEvent.deltaY||-a.originalEvent.wheelDelta||a.originalEvent.detail),null!=b?(a.preventDefault(),"DOMMouseScroll"===a.type&&(b=40*b),this.search_results.scrollTop(b+this.search_results.scrollTop())):void 0},Chosen.prototype.blur_test=function(){return!this.active_field&&this.container.hasClass("chosen-container-active")?this.close_field():void 0},Chosen.prototype.close_field=function(){return a(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},Chosen.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},Chosen.prototype.test_active_click=function(b){var c;return c=a(b.target).closest(".chosen-container"),c.length&&this.container[0]===c[0]?this.active_field=!0:this.close_field()},Chosen.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=SelectParser.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},Chosen.prototype.result_do_highlight=function(a){var b,c,d,e,f;if(a.length){if(this.result_clear_highlight(),this.result_highlight=a,this.result_highlight.addClass("highlighted"),d=parseInt(this.search_results.css("maxHeight"),10),f=this.search_results.scrollTop(),e=d+f,c=this.result_highlight.position().top+this.search_results.scrollTop(),b=c+this.result_highlight.outerHeight(),b>=e)return this.search_results.scrollTop(b-d>0?b-d:0);if(f>c)return this.search_results.scrollTop(c)}},Chosen.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},Chosen.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results(),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}))},Chosen.prototype.update_results_content=function(a){return this.search_results.html(a)},Chosen.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},Chosen.prototype.set_tab_index=function(){var a;return this.form_field.tabIndex?(a=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=a):void 0},Chosen.prototype.set_label_behavior=function(){var b=this;return this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=a("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0?this.form_field_label.bind("click.chosen",function(a){return b.is_multiple?b.container_mousedown(a):b.activate_field()}):void 0},Chosen.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},Chosen.prototype.search_results_mouseup=function(b){var c;return c=a(b.target).hasClass("active-result")?a(b.target):a(b.target).parents(".active-result").first(),c.length?(this.result_highlight=c,this.result_select(b),this.search_field.focus()):void 0},Chosen.prototype.search_results_mouseover=function(b){var c;return c=a(b.target).hasClass("active-result")?a(b.target):a(b.target).parents(".active-result").first(),c?this.result_do_highlight(c):void 0},Chosen.prototype.search_results_mouseout=function(b){return a(b.target).hasClass("active-result")?this.result_clear_highlight():void 0},Chosen.prototype.choice_build=function(b){var c,d,e=this;return c=a("<li />",{"class":"search-choice"}).html("<span>"+this.choice_label(b)+"</span>"),b.disabled?c.addClass("search-choice-disabled"):(d=a("<a />",{"class":"search-choice-close","data-option-array-index":b.array_index}),d.bind("click.chosen",function(a){return e.choice_destroy_link_click(a)}),c.append(d)),this.search_container.before(c)},Chosen.prototype.choice_destroy_link_click=function(b){return b.preventDefault(),b.stopPropagation(),this.is_disabled?void 0:this.choice_destroy(a(b.target))},Chosen.prototype.choice_destroy=function(a){return this.result_deselect(a[0].getAttribute("data-option-array-index"))?(this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),a.parents("li").first().remove(),this.search_field_scale()):void 0},Chosen.prototype.results_reset=function(){return this.reset_single_select_options(),this.form_field.options[0].selected=!0,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},Chosen.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},Chosen.prototype.result_select=function(a){var b,c;return this.result_highlight?(b=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?b.removeClass("active-result"):this.reset_single_select_options(),b.addClass("result-selected"),c=this.results_data[b[0].getAttribute("data-option-array-index")],c.selected=!0,this.form_field.options[c.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(c):this.single_set_selected_text(this.choice_label(c)),(a.metaKey||a.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[c.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,a.preventDefault(),this.search_field_scale())):void 0},Chosen.prototype.single_set_selected_text=function(a){return null==a&&(a=this.default_text),a===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").html(a)},Chosen.prototype.result_deselect=function(a){var b;return b=this.results_data[a],this.form_field.options[b.options_index].disabled?!1:(b.selected=!1,this.form_field.options[b.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[b.options_index].value}),this.search_field_scale(),!0)},Chosen.prototype.single_deselect_control_build=function(){return this.allow_single_deselect?(this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")):void 0},Chosen.prototype.get_search_text=function(){return a("<div/>").text(a.trim(this.search_field.val())).html()},Chosen.prototype.winnow_results_set_highlight=function(){var a,b;return b=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),a=b.length?b.first():this.search_results.find(".active-result").first(),null!=a?this.result_do_highlight(a):void 0},Chosen.prototype.no_results=function(b){var c;return c=a('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),c.find("span").first().html(b),this.search_results.append(c),this.form_field_jq.trigger("chosen:no_results",{chosen:this})},Chosen.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},Chosen.prototype.keydown_arrow=function(){var a;return this.results_showing&&this.result_highlight?(a=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(a):void 0:this.results_show()},Chosen.prototype.keyup_arrow=function(){var a;return this.results_showing||this.is_multiple?this.result_highlight?(a=this.result_highlight.prevAll("li.active-result"),a.length?this.result_do_highlight(a.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},Chosen.prototype.keydown_backstroke=function(){var a;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(a=this.search_container.siblings("li.search-choice").last(),a.length&&!a.hasClass("search-choice-disabled")?(this.pending_backstroke=a,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},Chosen.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},Chosen.prototype.keydown_checker=function(a){var b,c;switch(b=null!=(c=a.which)?c:a.keyCode,this.search_field_scale(),8!==b&&this.pending_backstroke&&this.clear_backstroke(),b){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(a),this.mouse_on_container=!1;break;case 13:this.results_showing&&a.preventDefault();break;case 32:this.disable_search&&a.preventDefault();break;case 38:a.preventDefault(),this.keyup_arrow();break;case 40:a.preventDefault(),this.keydown_arrow()}},Chosen.prototype.search_field_scale=function(){var b,c,d,e,f,g,h,i,j;if(this.is_multiple){for(d=0,h=0,f="position:absolute; left: -1000px; top: -1000px; display:none;",g=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],i=0,j=g.length;j>i;i++)e=g[i],f+=e+":"+this.search_field.css(e)+";";return b=a("<div />",{style:f}),b.text(this.search_field.val()),a("body").append(b),h=b.width()+25,b.remove(),c=this.container.outerWidth(),h>c-10&&(h=c-10),this.search_field.css({width:h+"px"})}},Chosen}(AbstractChosen)}).call(this);(function(root,factory)
{'use strict';var moment;if(typeof exports==='object'){try{moment=require('moment');}catch(e){}
module.exports=factory(moment);}else if(typeof define==='function'&&define.amd){define(function(req)
{var id='moment';try{moment=req(id);}catch(e){}
return factory(moment);});}else{root.Pikaday=factory(root.moment);}}(this,function(moment)
{'use strict';var hasMoment=typeof moment==='function',hasEventListeners=!!window.addEventListener,document=window.document,sto=window.setTimeout,addEvent=function(el,e,callback,capture)
{if(hasEventListeners){el.addEventListener(e,callback,!!capture);}else{el.attachEvent('on'+e,callback);}},removeEvent=function(el,e,callback,capture)
{if(hasEventListeners){el.removeEventListener(e,callback,!!capture);}else{el.detachEvent('on'+e,callback);}},fireEvent=function(el,eventName,data)
{var ev;if(document.createEvent){ev=document.createEvent('HTMLEvents');ev.initEvent(eventName,true,false);ev=extend(ev,data);el.dispatchEvent(ev);}else if(document.createEventObject){ev=document.createEventObject();ev=extend(ev,data);el.fireEvent('on'+eventName,ev);}},trim=function(str)
{return str.trim?str.trim():str.replace(/^\s+|\s+$/g,'');},hasClass=function(el,cn)
{return(' '+el.className+' ').indexOf(' '+cn+' ')!==-1;},addClass=function(el,cn)
{if(!hasClass(el,cn)){el.className=(el.className==='')?cn:el.className+' '+cn;}},removeClass=function(el,cn)
{el.className=trim((' '+el.className+' ').replace(' '+cn+' ',' '));},isArray=function(obj)
{return(/Array/).test(Object.prototype.toString.call(obj));},isDate=function(obj)
{return(/Date/).test(Object.prototype.toString.call(obj))&&!isNaN(obj.getTime());},isWeekend=function(date)
{var day=date.getDay();return day===0||day===6;},isLeapYear=function(year)
{return year%4===0&&year%100!==0||year%400===0;},getDaysInMonth=function(year,month)
{return[31,isLeapYear(year)?29:28,31,30,31,30,31,31,30,31,30,31][month];},setToStartOfDay=function(date)
{if(isDate(date))date.setHours(0,0,0,0);},compareDates=function(a,b)
{return a.getTime()===b.getTime();},extend=function(to,from,overwrite)
{var prop,hasProp;for(prop in from){hasProp=to[prop]!==undefined;if(hasProp&&typeof from[prop]==='object'&&from[prop]!==null&&from[prop].nodeName===undefined){if(isDate(from[prop])){if(overwrite){to[prop]=new Date(from[prop].getTime());}}
else if(isArray(from[prop])){if(overwrite){to[prop]=from[prop].slice(0);}}else{to[prop]=extend({},from[prop],overwrite);}}else if(overwrite||!hasProp){to[prop]=from[prop];}}
return to;},adjustCalendar=function(calendar){if(calendar.month<0){calendar.year-=Math.ceil(Math.abs(calendar.month)/12);calendar.month+=12;}
if(calendar.month>11){calendar.year+=Math.floor(Math.abs(calendar.month)/12);calendar.month-=12;}
return calendar;},defaults={field:null,bound:undefined,position:'bottom left',reposition:true,format:'YYYY-MM-DD',defaultDate:null,setDefaultDate:false,firstDay:0,minDate:null,maxDate:null,yearRange:10,showWeekNumber:false,minYear:0,maxYear:9999,minMonth:undefined,maxMonth:undefined,startRange:null,endRange:null,isRTL:false,yearSuffix:'',showMonthAfterYear:false,numberOfMonths:1,mainCalendar:'left',container:undefined,i18n:{previousMonth:'Previous Month',nextMonth:'Next Month',months:['January','February','March','April','May','June','July','August','September','October','November','December'],weekdays:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],weekdaysShort:['Sun','Mon','Tue','Wed','Thu','Fri','Sat']},theme:null,onSelect:null,onOpen:null,onClose:null,onDraw:null},renderDayName=function(opts,day,abbr)
{day+=opts.firstDay;while(day>=7){day-=7;}
return abbr?opts.i18n.weekdaysShort[day]:opts.i18n.weekdays[day];},renderDay=function(opts)
{if(opts.isEmpty){return'<td class="is-empty"></td>';}
var arr=[];if(opts.isDisabled){arr.push('is-disabled');}
if(opts.isToday){arr.push('is-today');}
if(opts.isSelected){arr.push('is-selected');}
if(opts.isInRange){arr.push('is-inrange');}
if(opts.isStartRange){arr.push('is-startrange');}
if(opts.isEndRange){arr.push('is-endrange');}
return'<td data-day="'+opts.day+'" class="'+arr.join(' ')+'">'+'<button class="pika-button pika-day" type="button" '+'data-pika-year="'+opts.year+'" data-pika-month="'+opts.month+'" data-pika-day="'+opts.day+'">'+
opts.day+'</button>'+'</td>';},renderWeek=function(d,m,y){var onejan=new Date(y,0,1),weekNum=Math.ceil((((new Date(y,m,d)-onejan)/86400000)+onejan.getDay()+1)/7);return'<td class="pika-week">'+weekNum+'</td>';},renderRow=function(days,isRTL)
{return'<tr>'+(isRTL?days.reverse():days).join('')+'</tr>';},renderBody=function(rows)
{return'<tbody>'+rows.join('')+'</tbody>';},renderHead=function(opts)
{var i,arr=[];if(opts.showWeekNumber){arr.push('<th></th>');}
for(i=0;i<7;i++){arr.push('<th scope="col"><abbr title="'+renderDayName(opts,i)+'">'+renderDayName(opts,i,true)+'</abbr></th>');}
return'<thead>'+(opts.isRTL?arr.reverse():arr).join('')+'</thead>';},renderTitle=function(instance,c,year,month,refYear)
{var i,j,arr,opts=instance._o,isMinYear=year===opts.minYear,isMaxYear=year===opts.maxYear,html='<div class="pika-title">',monthHtml,yearHtml,prev=true,next=true;for(arr=[],i=0;i<12;i++){arr.push('<option value="'+(year===refYear?i-c:12+i-c)+'"'+
(i===month?' selected':'')+
((isMinYear&&i<opts.minMonth)||(isMaxYear&&i>opts.maxMonth)?'disabled':'')+'>'+
opts.i18n.months[i]+'</option>');}
monthHtml='<div class="pika-label">'+opts.i18n.months[month]+'<select class="pika-select pika-select-month" tabindex="-1">'+arr.join('')+'</select></div>';if(isArray(opts.yearRange)){i=opts.yearRange[0];j=opts.yearRange[1]+1;}else{i=year-opts.yearRange;j=1+year+opts.yearRange;}
for(arr=[];i<j&&i<=opts.maxYear;i++){if(i>=opts.minYear){arr.push('<option value="'+i+'"'+(i===year?' selected':'')+'>'+(i)+'</option>');}}
yearHtml='<div class="pika-label">'+year+opts.yearSuffix+'<select class="pika-select pika-select-year" tabindex="-1">'+arr.join('')+'</select></div>';if(opts.showMonthAfterYear){html+=yearHtml+monthHtml;}else{html+=monthHtml+yearHtml;}
if(isMinYear&&(month===0||opts.minMonth>=month)){prev=false;}
if(isMaxYear&&(month===11||opts.maxMonth<=month)){next=false;}
if(c===0){html+='<button class="pika-prev'+(prev?'':' is-disabled')+'" type="button">'+opts.i18n.previousMonth+'</button>';}
if(c===(instance._o.numberOfMonths-1)){html+='<button class="pika-next'+(next?'':' is-disabled')+'" type="button">'+opts.i18n.nextMonth+'</button>';}
return html+='</div>';},renderTable=function(opts,data)
{return'<table cellpadding="0" cellspacing="0" class="pika-table">'+renderHead(opts)+renderBody(data)+'</table>';},Pikaday=function(options)
{var self=this,opts=self.config(options);self._onMouseDown=function(e)
{if(!self._v){return;}
e=e||window.event;var target=e.target||e.srcElement;if(!target){return;}
if(!hasClass(target.parentNode,'is-disabled')){if(hasClass(target,'pika-button')&&!hasClass(target,'is-empty')){self.setDate(new Date(target.getAttribute('data-pika-year'),target.getAttribute('data-pika-month'),target.getAttribute('data-pika-day')));if(opts.bound){sto(function(){self.hide();if(opts.field){opts.field.blur();}},100);}
return;}
else if(hasClass(target,'pika-prev')){self.prevMonth();}
else if(hasClass(target,'pika-next')){self.nextMonth();}}
if(!hasClass(target,'pika-select')){if(e.preventDefault){e.preventDefault();}else{e.returnValue=false;return false;}}else{self._c=true;}};self._onChange=function(e)
{e=e||window.event;var target=e.target||e.srcElement;if(!target){return;}
if(hasClass(target,'pika-select-month')){self.gotoMonth(target.value);}
else if(hasClass(target,'pika-select-year')){self.gotoYear(target.value);}};self._onInputChange=function(e)
{var date;if(e.firedBy===self){return;}
if(hasMoment){date=moment(opts.field.value,opts.format);date=(date&&date.isValid())?date.toDate():null;}
else{date=new Date(Date.parse(opts.field.value));}
if(isDate(date)){self.setDate(date);}
if(!self._v){self.show();}};self._onInputFocus=function()
{self.show();};self._onInputClick=function()
{self.show();};self._onInputBlur=function()
{var pEl=document.activeElement;do{if(hasClass(pEl,'pika-single')){return;}}
while((pEl=pEl.parentNode));if(!self._c){self._b=sto(function(){self.hide();},50);}
self._c=false;};self._onClick=function(e)
{e=e||window.event;var target=e.target||e.srcElement,pEl=target;if(!target){return;}
if(!hasEventListeners&&hasClass(target,'pika-select')){if(!target.onchange){target.setAttribute('onchange','return;');addEvent(target,'change',self._onChange);}}
do{if(hasClass(pEl,'pika-single')||pEl===opts.trigger){return;}}
while((pEl=pEl.parentNode));if(self._v&&target!==opts.trigger&&pEl!==opts.trigger){self.hide();}};self.el=document.createElement('div');self.el.className='pika-single'+(opts.isRTL?' is-rtl':'')+(opts.theme?' '+opts.theme:'');addEvent(self.el,'ontouchend'in document?'touchend':'mousedown',self._onMouseDown,true);addEvent(self.el,'change',self._onChange);if(opts.field){if(opts.container){opts.container.appendChild(self.el);}else if(opts.bound){document.body.appendChild(self.el);}else{opts.field.parentNode.insertBefore(self.el,opts.field.nextSibling);}
addEvent(opts.field,'change',self._onInputChange);if(!opts.defaultDate){if(hasMoment&&opts.field.value){opts.defaultDate=moment(opts.field.value,opts.format).toDate();}else{opts.defaultDate=new Date(Date.parse(opts.field.value));}
opts.setDefaultDate=true;}}
var defDate=opts.defaultDate;if(isDate(defDate)){if(opts.setDefaultDate){self.setDate(defDate,true);}else{self.gotoDate(defDate);}}else{self.gotoDate(new Date());}
if(opts.bound){this.hide();self.el.className+=' is-bound';addEvent(opts.trigger,'click',self._onInputClick);addEvent(opts.trigger,'focus',self._onInputFocus);addEvent(opts.trigger,'blur',self._onInputBlur);}else{this.show();}};Pikaday.prototype={config:function(options)
{if(!this._o){this._o=extend({},defaults,true);}
var opts=extend(this._o,options,true);opts.isRTL=!!opts.isRTL;opts.field=(opts.field&&opts.field.nodeName)?opts.field:null;opts.theme=(typeof opts.theme)==='string'&&opts.theme?opts.theme:null;opts.bound=!!(opts.bound!==undefined?opts.field&&opts.bound:opts.field);opts.trigger=(opts.trigger&&opts.trigger.nodeName)?opts.trigger:opts.field;opts.disableWeekends=!!opts.disableWeekends;opts.disableDayFn=(typeof opts.disableDayFn)==='function'?opts.disableDayFn:null;var nom=parseInt(opts.numberOfMonths,10)||1;opts.numberOfMonths=nom>4?4:nom;if(!isDate(opts.minDate)){opts.minDate=false;}
if(!isDate(opts.maxDate)){opts.maxDate=false;}
if((opts.minDate&&opts.maxDate)&&opts.maxDate<opts.minDate){opts.maxDate=opts.minDate=false;}
if(opts.minDate){this.setMinDate(opts.minDate);}
if(opts.maxDate){setToStartOfDay(opts.maxDate);opts.maxYear=opts.maxDate.getFullYear();opts.maxMonth=opts.maxDate.getMonth();}
if(isArray(opts.yearRange)){var fallback=new Date().getFullYear()-10;opts.yearRange[0]=parseInt(opts.yearRange[0],10)||fallback;opts.yearRange[1]=parseInt(opts.yearRange[1],10)||fallback;}else{opts.yearRange=Math.abs(parseInt(opts.yearRange,10))||defaults.yearRange;if(opts.yearRange>100){opts.yearRange=100;}}
return opts;},toString:function(format)
{return!isDate(this._d)?'':hasMoment?moment(this._d).format(format||this._o.format):this._d.toDateString();},getMoment:function()
{return hasMoment?moment(this._d):null;},setMoment:function(date,preventOnSelect)
{if(hasMoment&&moment.isMoment(date)){this.setDate(date.toDate(),preventOnSelect);}},getDate:function()
{return isDate(this._d)?new Date(this._d.getTime()):null;},setDate:function(date,preventOnSelect)
{if(!date){this._d=null;if(this._o.field){this._o.field.value='';fireEvent(this._o.field,'change',{firedBy:this});}
return this.draw();}
if(typeof date==='string'){date=new Date(Date.parse(date));}
if(!isDate(date)){return;}
var min=this._o.minDate,max=this._o.maxDate;if(isDate(min)&&date<min){date=min;}else if(isDate(max)&&date>max){date=max;}
this._d=new Date(date.getTime());setToStartOfDay(this._d);this.gotoDate(this._d);if(this._o.field){this._o.field.value=this.toString();fireEvent(this._o.field,'change',{firedBy:this});}
if(!preventOnSelect&&typeof this._o.onSelect==='function'){this._o.onSelect.call(this,this.getDate());}},gotoDate:function(date)
{var newCalendar=true;if(!isDate(date)){return;}
if(this.calendars){var firstVisibleDate=new Date(this.calendars[0].year,this.calendars[0].month,1),lastVisibleDate=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),visibleDate=date.getTime();lastVisibleDate.setMonth(lastVisibleDate.getMonth()+1);lastVisibleDate.setDate(lastVisibleDate.getDate()-1);newCalendar=(visibleDate<firstVisibleDate.getTime()||lastVisibleDate.getTime()<visibleDate);}
if(newCalendar){this.calendars=[{month:date.getMonth(),year:date.getFullYear()}];if(this._o.mainCalendar==='right'){this.calendars[0].month+=1-this._o.numberOfMonths;}}
this.adjustCalendars();},adjustCalendars:function(){this.calendars[0]=adjustCalendar(this.calendars[0]);for(var c=1;c<this._o.numberOfMonths;c++){this.calendars[c]=adjustCalendar({month:this.calendars[0].month+c,year:this.calendars[0].year});}
this.draw();},gotoToday:function()
{this.gotoDate(new Date());},gotoMonth:function(month)
{if(!isNaN(month)){this.calendars[0].month=parseInt(month,10);this.adjustCalendars();}},nextMonth:function()
{this.calendars[0].month++;this.adjustCalendars();},prevMonth:function()
{this.calendars[0].month--;this.adjustCalendars();},gotoYear:function(year)
{if(!isNaN(year)){this.calendars[0].year=parseInt(year,10);this.adjustCalendars();}},setMinDate:function(value)
{setToStartOfDay(value);this._o.minDate=value;this._o.minYear=value.getFullYear();this._o.minMonth=value.getMonth();},setMaxDate:function(value)
{this._o.maxDate=value;},setStartRange:function(value)
{this._o.startRange=value;},setEndRange:function(value)
{this._o.endRange=value;},draw:function(force)
{if(!this._v&&!force){return;}
var opts=this._o,minYear=opts.minYear,maxYear=opts.maxYear,minMonth=opts.minMonth,maxMonth=opts.maxMonth,html='';if(this._y<=minYear){this._y=minYear;if(!isNaN(minMonth)&&this._m<minMonth){this._m=minMonth;}}
if(this._y>=maxYear){this._y=maxYear;if(!isNaN(maxMonth)&&this._m>maxMonth){this._m=maxMonth;}}
for(var c=0;c<opts.numberOfMonths;c++){html+='<div class="pika-lendar">'+renderTitle(this,c,this.calendars[c].year,this.calendars[c].month,this.calendars[0].year)+this.render(this.calendars[c].year,this.calendars[c].month)+'</div>';}
this.el.innerHTML=html;if(opts.bound){if(opts.field.type!=='hidden'){sto(function(){opts.trigger.focus();},1);}}
if(typeof this._o.onDraw==='function'){var self=this;sto(function(){self._o.onDraw.call(self);},0);}},adjustPosition:function()
{var field,pEl,width,height,viewportWidth,viewportHeight,scrollTop,left,top,clientRect;if(this._o.container)return;this.el.style.position='absolute';field=this._o.trigger;pEl=field;width=this.el.offsetWidth;height=this.el.offsetHeight;viewportWidth=window.innerWidth||document.documentElement.clientWidth;viewportHeight=window.innerHeight||document.documentElement.clientHeight;scrollTop=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop;if(typeof field.getBoundingClientRect==='function'){clientRect=field.getBoundingClientRect();left=clientRect.left+window.pageXOffset;top=clientRect.bottom+window.pageYOffset;}else{left=pEl.offsetLeft;top=pEl.offsetTop+pEl.offsetHeight;while((pEl=pEl.offsetParent)){left+=pEl.offsetLeft;top+=pEl.offsetTop;}}
if((this._o.reposition&&left+width>viewportWidth)||(this._o.position.indexOf('right')>-1&&left-width+field.offsetWidth>0)){left=left-width+field.offsetWidth;}
if((this._o.reposition&&top+height>viewportHeight+scrollTop)||(this._o.position.indexOf('top')>-1&&top-height-field.offsetHeight>0)){top=top-height-field.offsetHeight;}
this.el.style.left=left+'px';this.el.style.top=top+'px';},render:function(year,month)
{var opts=this._o,now=new Date(),days=getDaysInMonth(year,month),before=new Date(year,month,1).getDay(),data=[],row=[];setToStartOfDay(now);if(opts.firstDay>0){before-=opts.firstDay;if(before<0){before+=7;}}
var cells=days+before,after=cells;while(after>7){after-=7;}
cells+=7-after;for(var i=0,r=0;i<cells;i++)
{var dayConfig,day=new Date(year,month,1+(i-before)),isSelected=isDate(this._d)?compareDates(day,this._d):false,isToday=compareDates(day,now),isEmpty=i<before||i>=(days+before),isStartRange=opts.startRange&&compareDates(opts.startRange,day),isEndRange=opts.endRange&&compareDates(opts.endRange,day),isInRange=opts.startRange&&opts.endRange&&opts.startRange<day&&day<opts.endRange,isDisabled=(opts.minDate&&day<opts.minDate)||(opts.maxDate&&day>opts.maxDate)||(opts.disableWeekends&&isWeekend(day))||(opts.disableDayFn&&opts.disableDayFn(day)),dayConfig={day:1+(i-before),month:month,year:year,isSelected:isSelected,isToday:isToday,isDisabled:isDisabled,isEmpty:isEmpty,isStartRange:isStartRange,isEndRange:isEndRange,isInRange:isInRange};row.push(renderDay(dayConfig));if(++r===7){if(opts.showWeekNumber){row.unshift(renderWeek(i-before,month,year));}
data.push(renderRow(row,opts.isRTL));row=[];r=0;}}
return renderTable(opts,data);},isVisible:function()
{return this._v;},show:function()
{if(!this._v){removeClass(this.el,'is-hidden');this._v=true;this.draw();if(this._o.bound){addEvent(document,'click',this._onClick);this.adjustPosition();}
if(typeof this._o.onOpen==='function'){this._o.onOpen.call(this);}}},hide:function()
{var v=this._v;if(v!==false){if(this._o.bound){removeEvent(document,'click',this._onClick);}
this.el.style.position='static';this.el.style.left='auto';this.el.style.top='auto';addClass(this.el,'is-hidden');this._v=false;if(v!==undefined&&typeof this._o.onClose==='function'){this._o.onClose.call(this);}}},destroy:function()
{this.hide();removeEvent(this.el,'mousedown',this._onMouseDown,true);removeEvent(this.el,'change',this._onChange);if(this._o.field){removeEvent(this._o.field,'change',this._onInputChange);if(this._o.bound){removeEvent(this._o.trigger,'click',this._onInputClick);removeEvent(this._o.trigger,'focus',this._onInputFocus);removeEvent(this._o.trigger,'blur',this._onInputBlur);}}
if(this.el.parentNode){this.el.parentNode.removeChild(this.el);}}};return Pikaday;}));(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?module.exports=factory():typeof define==='function'&&define.amd?define(factory):global.moment=factory()}(this,function(){'use strict';var hookCallback;function utils_hooks__hooks(){return hookCallback.apply(null,arguments);}
function setHookCallback(callback){hookCallback=callback;}
function isArray(input){return Object.prototype.toString.call(input)==='[object Array]';}
function isDate(input){return input instanceof Date||Object.prototype.toString.call(input)==='[object Date]';}
function map(arr,fn){var res=[],i;for(i=0;i<arr.length;++i){res.push(fn(arr[i],i));}
return res;}
function hasOwnProp(a,b){return Object.prototype.hasOwnProperty.call(a,b);}
function extend(a,b){for(var i in b){if(hasOwnProp(b,i)){a[i]=b[i];}}
if(hasOwnProp(b,'toString')){a.toString=b.toString;}
if(hasOwnProp(b,'valueOf')){a.valueOf=b.valueOf;}
return a;}
function create_utc__createUTC(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,true).utc();}
function defaultParsingFlags(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false};}
function getParsingFlags(m){if(m._pf==null){m._pf=defaultParsingFlags();}
return m._pf;}
function valid__isValid(m){if(m._isValid==null){var flags=getParsingFlags(m);m._isValid=!isNaN(m._d.getTime())&&flags.overflow<0&&!flags.empty&&!flags.invalidMonth&&!flags.invalidWeekday&&!flags.nullInput&&!flags.invalidFormat&&!flags.userInvalidated;if(m._strict){m._isValid=m._isValid&&flags.charsLeftOver===0&&flags.unusedTokens.length===0&&flags.bigHour===undefined;}}
return m._isValid;}
function valid__createInvalid(flags){var m=create_utc__createUTC(NaN);if(flags!=null){extend(getParsingFlags(m),flags);}
else{getParsingFlags(m).userInvalidated=true;}
return m;}
var momentProperties=utils_hooks__hooks.momentProperties=[];function copyConfig(to,from){var i,prop,val;if(typeof from._isAMomentObject!=='undefined'){to._isAMomentObject=from._isAMomentObject;}
if(typeof from._i!=='undefined'){to._i=from._i;}
if(typeof from._f!=='undefined'){to._f=from._f;}
if(typeof from._l!=='undefined'){to._l=from._l;}
if(typeof from._strict!=='undefined'){to._strict=from._strict;}
if(typeof from._tzm!=='undefined'){to._tzm=from._tzm;}
if(typeof from._isUTC!=='undefined'){to._isUTC=from._isUTC;}
if(typeof from._offset!=='undefined'){to._offset=from._offset;}
if(typeof from._pf!=='undefined'){to._pf=getParsingFlags(from);}
if(typeof from._locale!=='undefined'){to._locale=from._locale;}
if(momentProperties.length>0){for(i in momentProperties){prop=momentProperties[i];val=from[prop];if(typeof val!=='undefined'){to[prop]=val;}}}
return to;}
var updateInProgress=false;function Moment(config){copyConfig(this,config);this._d=new Date(config._d!=null?config._d.getTime():NaN);if(updateInProgress===false){updateInProgress=true;utils_hooks__hooks.updateOffset(this);updateInProgress=false;}}
function isMoment(obj){return obj instanceof Moment||(obj!=null&&obj._isAMomentObject!=null);}
function absFloor(number){if(number<0){return Math.ceil(number);}else{return Math.floor(number);}}
function toInt(argumentForCoercion){var coercedNumber=+argumentForCoercion,value=0;if(coercedNumber!==0&&isFinite(coercedNumber)){value=absFloor(coercedNumber);}
return value;}
function compareArrays(array1,array2,dontConvert){var len=Math.min(array1.length,array2.length),lengthDiff=Math.abs(array1.length-array2.length),diffs=0,i;for(i=0;i<len;i++){if((dontConvert&&array1[i]!==array2[i])||(!dontConvert&&toInt(array1[i])!==toInt(array2[i]))){diffs++;}}
return diffs+lengthDiff;}
function Locale(){}
var locales={};var globalLocale;function normalizeLocale(key){return key?key.toLowerCase().replace('_','-'):key;}
function chooseLocale(names){var i=0,j,next,locale,split;while(i<names.length){split=normalizeLocale(names[i]).split('-');j=split.length;next=normalizeLocale(names[i+1]);next=next?next.split('-'):null;while(j>0){locale=loadLocale(split.slice(0,j).join('-'));if(locale){return locale;}
if(next&&next.length>=j&&compareArrays(split,next,true)>=j-1){break;}
j--;}
i++;}
return null;}
function loadLocale(name){var oldLocale=null;if(!locales[name]&&typeof module!=='undefined'&&module&&module.exports){try{oldLocale=globalLocale._abbr;require('./locale/'+name);locale_locales__getSetGlobalLocale(oldLocale);}catch(e){}}
return locales[name];}
function locale_locales__getSetGlobalLocale(key,values){var data;if(key){if(typeof values==='undefined'){data=locale_locales__getLocale(key);}
else{data=defineLocale(key,values);}
if(data){globalLocale=data;}}
return globalLocale._abbr;}
function defineLocale(name,values){if(values!==null){values.abbr=name;locales[name]=locales[name]||new Locale();locales[name].set(values);locale_locales__getSetGlobalLocale(name);return locales[name];}else{delete locales[name];return null;}}
function locale_locales__getLocale(key){var locale;if(key&&key._locale&&key._locale._abbr){key=key._locale._abbr;}
if(!key){return globalLocale;}
if(!isArray(key)){locale=loadLocale(key);if(locale){return locale;}
key=[key];}
return chooseLocale(key);}
var aliases={};function addUnitAlias(unit,shorthand){var lowerCase=unit.toLowerCase();aliases[lowerCase]=aliases[lowerCase+'s']=aliases[shorthand]=unit;}
function normalizeUnits(units){return typeof units==='string'?aliases[units]||aliases[units.toLowerCase()]:undefined;}
function normalizeObjectUnits(inputObject){var normalizedInput={},normalizedProp,prop;for(prop in inputObject){if(hasOwnProp(inputObject,prop)){normalizedProp=normalizeUnits(prop);if(normalizedProp){normalizedInput[normalizedProp]=inputObject[prop];}}}
return normalizedInput;}
function makeGetSet(unit,keepTime){return function(value){if(value!=null){get_set__set(this,unit,value);utils_hooks__hooks.updateOffset(this,keepTime);return this;}else{return get_set__get(this,unit);}};}
function get_set__get(mom,unit){return mom._d['get'+(mom._isUTC?'UTC':'')+unit]();}
function get_set__set(mom,unit,value){return mom._d['set'+(mom._isUTC?'UTC':'')+unit](value);}
function getSet(units,value){var unit;if(typeof units==='object'){for(unit in units){this.set(unit,units[unit]);}}else{units=normalizeUnits(units);if(typeof this[units]==='function'){return this[units](value);}}
return this;}
function zeroFill(number,targetLength,forceSign){var absNumber=''+Math.abs(number),zerosToFill=targetLength-absNumber.length,sign=number>=0;return(sign?(forceSign?'+':''):'-')+
Math.pow(10,Math.max(0,zerosToFill)).toString().substr(1)+absNumber;}
var formattingTokens=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;var localFormattingTokens=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g;var formatFunctions={};var formatTokenFunctions={};function addFormatToken(token,padded,ordinal,callback){var func=callback;if(typeof callback==='string'){func=function(){return this[callback]();};}
if(token){formatTokenFunctions[token]=func;}
if(padded){formatTokenFunctions[padded[0]]=function(){return zeroFill(func.apply(this,arguments),padded[1],padded[2]);};}
if(ordinal){formatTokenFunctions[ordinal]=function(){return this.localeData().ordinal(func.apply(this,arguments),token);};}}
function removeFormattingTokens(input){if(input.match(/\[[\s\S]/)){return input.replace(/^\[|\]$/g,'');}
return input.replace(/\\/g,'');}
function makeFormatFunction(format){var array=format.match(formattingTokens),i,length;for(i=0,length=array.length;i<length;i++){if(formatTokenFunctions[array[i]]){array[i]=formatTokenFunctions[array[i]];}else{array[i]=removeFormattingTokens(array[i]);}}
return function(mom){var output='';for(i=0;i<length;i++){output+=array[i]instanceof Function?array[i].call(mom,format):array[i];}
return output;};}
function formatMoment(m,format){if(!m.isValid()){return m.localeData().invalidDate();}
format=expandFormat(format,m.localeData());formatFunctions[format]=formatFunctions[format]||makeFormatFunction(format);return formatFunctions[format](m);}
function expandFormat(format,locale){var i=5;function replaceLongDateFormatTokens(input){return locale.longDateFormat(input)||input;}
localFormattingTokens.lastIndex=0;while(i>=0&&localFormattingTokens.test(format)){format=format.replace(localFormattingTokens,replaceLongDateFormatTokens);localFormattingTokens.lastIndex=0;i-=1;}
return format;}
var match1=/\d/;var match2=/\d\d/;var match3=/\d{3}/;var match4=/\d{4}/;var match6=/[+-]?\d{6}/;var match1to2=/\d\d?/;var match1to3=/\d{1,3}/;var match1to4=/\d{1,4}/;var match1to6=/[+-]?\d{1,6}/;var matchUnsigned=/\d+/;var matchSigned=/[+-]?\d+/;var matchOffset=/Z|[+-]\d\d:?\d\d/gi;var matchTimestamp=/[+-]?\d+(\.\d{1,3})?/;var matchWord=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i;var regexes={};function isFunction(sth){return typeof sth==='function'&&Object.prototype.toString.call(sth)==='[object Function]';}
function addRegexToken(token,regex,strictRegex){regexes[token]=isFunction(regex)?regex:function(isStrict){return(isStrict&&strictRegex)?strictRegex:regex;};}
function getParseRegexForToken(token,config){if(!hasOwnProp(regexes,token)){return new RegExp(unescapeFormat(token));}
return regexes[token](config._strict,config._locale);}
function unescapeFormat(s){return s.replace('\\','').replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(matched,p1,p2,p3,p4){return p1||p2||p3||p4;}).replace(/[-\/\\^$*+?.()|[\]{}]/g,'\\$&');}
var tokens={};function addParseToken(token,callback){var i,func=callback;if(typeof token==='string'){token=[token];}
if(typeof callback==='number'){func=function(input,array){array[callback]=toInt(input);};}
for(i=0;i<token.length;i++){tokens[token[i]]=func;}}
function addWeekParseToken(token,callback){addParseToken(token,function(input,array,config,token){config._w=config._w||{};callback(input,config._w,config,token);});}
function addTimeToArrayFromToken(token,input,config){if(input!=null&&hasOwnProp(tokens,token)){tokens[token](input,config._a,config,token);}}
var YEAR=0;var MONTH=1;var DATE=2;var HOUR=3;var MINUTE=4;var SECOND=5;var MILLISECOND=6;function daysInMonth(year,month){return new Date(Date.UTC(year,month+1,0)).getUTCDate();}
addFormatToken('M',['MM',2],'Mo',function(){return this.month()+1;});addFormatToken('MMM',0,0,function(format){return this.localeData().monthsShort(this,format);});addFormatToken('MMMM',0,0,function(format){return this.localeData().months(this,format);});addUnitAlias('month','M');addRegexToken('M',match1to2);addRegexToken('MM',match1to2,match2);addRegexToken('MMM',matchWord);addRegexToken('MMMM',matchWord);addParseToken(['M','MM'],function(input,array){array[MONTH]=toInt(input)-1;});addParseToken(['MMM','MMMM'],function(input,array,config,token){var month=config._locale.monthsParse(input,token,config._strict);if(month!=null){array[MONTH]=month;}else{getParsingFlags(config).invalidMonth=input;}});var defaultLocaleMonths='January_February_March_April_May_June_July_August_September_October_November_December'.split('_');function localeMonths(m){return this._months[m.month()];}
var defaultLocaleMonthsShort='Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_');function localeMonthsShort(m){return this._monthsShort[m.month()];}
function localeMonthsParse(monthName,format,strict){var i,mom,regex;if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[];}
for(i=0;i<12;i++){mom=create_utc__createUTC([2000,i]);if(strict&&!this._longMonthsParse[i]){this._longMonthsParse[i]=new RegExp('^'+this.months(mom,'').replace('.','')+'$','i');this._shortMonthsParse[i]=new RegExp('^'+this.monthsShort(mom,'').replace('.','')+'$','i');}
if(!strict&&!this._monthsParse[i]){regex='^'+this.months(mom,'')+'|^'+this.monthsShort(mom,'');this._monthsParse[i]=new RegExp(regex.replace('.',''),'i');}
if(strict&&format==='MMMM'&&this._longMonthsParse[i].test(monthName)){return i;}else if(strict&&format==='MMM'&&this._shortMonthsParse[i].test(monthName)){return i;}else if(!strict&&this._monthsParse[i].test(monthName)){return i;}}}
function setMonth(mom,value){var dayOfMonth;if(typeof value==='string'){value=mom.localeData().monthsParse(value);if(typeof value!=='number'){return mom;}}
dayOfMonth=Math.min(mom.date(),daysInMonth(mom.year(),value));mom._d['set'+(mom._isUTC?'UTC':'')+'Month'](value,dayOfMonth);return mom;}
function getSetMonth(value){if(value!=null){setMonth(this,value);utils_hooks__hooks.updateOffset(this,true);return this;}else{return get_set__get(this,'Month');}}
function getDaysInMonth(){return daysInMonth(this.year(),this.month());}
function checkOverflow(m){var overflow;var a=m._a;if(a&&getParsingFlags(m).overflow===-2){overflow=a[MONTH]<0||a[MONTH]>11?MONTH:a[DATE]<1||a[DATE]>daysInMonth(a[YEAR],a[MONTH])?DATE:a[HOUR]<0||a[HOUR]>24||(a[HOUR]===24&&(a[MINUTE]!==0||a[SECOND]!==0||a[MILLISECOND]!==0))?HOUR:a[MINUTE]<0||a[MINUTE]>59?MINUTE:a[SECOND]<0||a[SECOND]>59?SECOND:a[MILLISECOND]<0||a[MILLISECOND]>999?MILLISECOND:-1;if(getParsingFlags(m)._overflowDayOfYear&&(overflow<YEAR||overflow>DATE)){overflow=DATE;}
getParsingFlags(m).overflow=overflow;}
return m;}
function warn(msg){if(utils_hooks__hooks.suppressDeprecationWarnings===false&&typeof console!=='undefined'&&console.warn){console.warn('Deprecation warning: '+msg);}}
function deprecate(msg,fn){var firstTime=true;return extend(function(){if(firstTime){warn(msg+'\n'+(new Error()).stack);firstTime=false;}
return fn.apply(this,arguments);},fn);}
var deprecations={};function deprecateSimple(name,msg){if(!deprecations[name]){warn(msg);deprecations[name]=true;}}
utils_hooks__hooks.suppressDeprecationWarnings=false;var from_string__isoRegex=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/;var isoDates=[['YYYYYY-MM-DD',/[+-]\d{6}-\d{2}-\d{2}/],['YYYY-MM-DD',/\d{4}-\d{2}-\d{2}/],['GGGG-[W]WW-E',/\d{4}-W\d{2}-\d/],['GGGG-[W]WW',/\d{4}-W\d{2}/],['YYYY-DDD',/\d{4}-\d{3}/]];var isoTimes=[['HH:mm:ss.SSSS',/(T| )\d\d:\d\d:\d\d\.\d+/],['HH:mm:ss',/(T| )\d\d:\d\d:\d\d/],['HH:mm',/(T| )\d\d:\d\d/],['HH',/(T| )\d\d/]];var aspNetJsonRegex=/^\/?Date\((\-?\d+)/i;function configFromISO(config){var i,l,string=config._i,match=from_string__isoRegex.exec(string);if(match){getParsingFlags(config).iso=true;for(i=0,l=isoDates.length;i<l;i++){if(isoDates[i][1].exec(string)){config._f=isoDates[i][0];break;}}
for(i=0,l=isoTimes.length;i<l;i++){if(isoTimes[i][1].exec(string)){config._f+=(match[6]||' ')+isoTimes[i][0];break;}}
if(string.match(matchOffset)){config._f+='Z';}
configFromStringAndFormat(config);}else{config._isValid=false;}}
function configFromString(config){var matched=aspNetJsonRegex.exec(config._i);if(matched!==null){config._d=new Date(+matched[1]);return;}
configFromISO(config);if(config._isValid===false){delete config._isValid;utils_hooks__hooks.createFromInputFallback(config);}}
utils_hooks__hooks.createFromInputFallback=deprecate('moment construction falls back to js Date. This is '+'discouraged and will be removed in upcoming major '+'release. Please refer to '+'https://github.com/moment/moment/issues/1407 for more info.',function(config){config._d=new Date(config._i+(config._useUTC?' UTC':''));});function createDate(y,m,d,h,M,s,ms){var date=new Date(y,m,d,h,M,s,ms);if(y<1970){date.setFullYear(y);}
return date;}
function createUTCDate(y){var date=new Date(Date.UTC.apply(null,arguments));if(y<1970){date.setUTCFullYear(y);}
return date;}
addFormatToken(0,['YY',2],0,function(){return this.year()%100;});addFormatToken(0,['YYYY',4],0,'year');addFormatToken(0,['YYYYY',5],0,'year');addFormatToken(0,['YYYYYY',6,true],0,'year');addUnitAlias('year','y');addRegexToken('Y',matchSigned);addRegexToken('YY',match1to2,match2);addRegexToken('YYYY',match1to4,match4);addRegexToken('YYYYY',match1to6,match6);addRegexToken('YYYYYY',match1to6,match6);addParseToken(['YYYYY','YYYYYY'],YEAR);addParseToken('YYYY',function(input,array){array[YEAR]=input.length===2?utils_hooks__hooks.parseTwoDigitYear(input):toInt(input);});addParseToken('YY',function(input,array){array[YEAR]=utils_hooks__hooks.parseTwoDigitYear(input);});function daysInYear(year){return isLeapYear(year)?366:365;}
function isLeapYear(year){return(year%4===0&&year%100!==0)||year%400===0;}
utils_hooks__hooks.parseTwoDigitYear=function(input){return toInt(input)+(toInt(input)>68?1900:2000);};var getSetYear=makeGetSet('FullYear',false);function getIsLeapYear(){return isLeapYear(this.year());}
addFormatToken('w',['ww',2],'wo','week');addFormatToken('W',['WW',2],'Wo','isoWeek');addUnitAlias('week','w');addUnitAlias('isoWeek','W');addRegexToken('w',match1to2);addRegexToken('ww',match1to2,match2);addRegexToken('W',match1to2);addRegexToken('WW',match1to2,match2);addWeekParseToken(['w','ww','W','WW'],function(input,week,config,token){week[token.substr(0,1)]=toInt(input);});function weekOfYear(mom,firstDayOfWeek,firstDayOfWeekOfYear){var end=firstDayOfWeekOfYear-firstDayOfWeek,daysToDayOfWeek=firstDayOfWeekOfYear-mom.day(),adjustedMoment;if(daysToDayOfWeek>end){daysToDayOfWeek-=7;}
if(daysToDayOfWeek<end-7){daysToDayOfWeek+=7;}
adjustedMoment=local__createLocal(mom).add(daysToDayOfWeek,'d');return{week:Math.ceil(adjustedMoment.dayOfYear()/7),year:adjustedMoment.year()};}
function localeWeek(mom){return weekOfYear(mom,this._week.dow,this._week.doy).week;}
var defaultLocaleWeek={dow:0,doy:6};function localeFirstDayOfWeek(){return this._week.dow;}
function localeFirstDayOfYear(){return this._week.doy;}
function getSetWeek(input){var week=this.localeData().week(this);return input==null?week:this.add((input-week)*7,'d');}
function getSetISOWeek(input){var week=weekOfYear(this,1,4).week;return input==null?week:this.add((input-week)*7,'d');}
addFormatToken('DDD',['DDDD',3],'DDDo','dayOfYear');addUnitAlias('dayOfYear','DDD');addRegexToken('DDD',match1to3);addRegexToken('DDDD',match3);addParseToken(['DDD','DDDD'],function(input,array,config){config._dayOfYear=toInt(input);});function dayOfYearFromWeeks(year,week,weekday,firstDayOfWeekOfYear,firstDayOfWeek){var week1Jan=6+firstDayOfWeek-firstDayOfWeekOfYear,janX=createUTCDate(year,0,1+week1Jan),d=janX.getUTCDay(),dayOfYear;if(d<firstDayOfWeek){d+=7;}
weekday=weekday!=null?1*weekday:firstDayOfWeek;dayOfYear=1+week1Jan+7*(week-1)-d+weekday;return{year:dayOfYear>0?year:year-1,dayOfYear:dayOfYear>0?dayOfYear:daysInYear(year-1)+dayOfYear};}
function getSetDayOfYear(input){var dayOfYear=Math.round((this.clone().startOf('day')-this.clone().startOf('year'))/864e5)+1;return input==null?dayOfYear:this.add((input-dayOfYear),'d');}
function defaults(a,b,c){if(a!=null){return a;}
if(b!=null){return b;}
return c;}
function currentDateArray(config){var now=new Date();if(config._useUTC){return[now.getUTCFullYear(),now.getUTCMonth(),now.getUTCDate()];}
return[now.getFullYear(),now.getMonth(),now.getDate()];}
function configFromArray(config){var i,date,input=[],currentDate,yearToUse;if(config._d){return;}
currentDate=currentDateArray(config);if(config._w&&config._a[DATE]==null&&config._a[MONTH]==null){dayOfYearFromWeekInfo(config);}
if(config._dayOfYear){yearToUse=defaults(config._a[YEAR],currentDate[YEAR]);if(config._dayOfYear>daysInYear(yearToUse)){getParsingFlags(config)._overflowDayOfYear=true;}
date=createUTCDate(yearToUse,0,config._dayOfYear);config._a[MONTH]=date.getUTCMonth();config._a[DATE]=date.getUTCDate();}
for(i=0;i<3&&config._a[i]==null;++i){config._a[i]=input[i]=currentDate[i];}
for(;i<7;i++){config._a[i]=input[i]=(config._a[i]==null)?(i===2?1:0):config._a[i];}
if(config._a[HOUR]===24&&config._a[MINUTE]===0&&config._a[SECOND]===0&&config._a[MILLISECOND]===0){config._nextDay=true;config._a[HOUR]=0;}
config._d=(config._useUTC?createUTCDate:createDate).apply(null,input);if(config._tzm!=null){config._d.setUTCMinutes(config._d.getUTCMinutes()-config._tzm);}
if(config._nextDay){config._a[HOUR]=24;}}
function dayOfYearFromWeekInfo(config){var w,weekYear,week,weekday,dow,doy,temp;w=config._w;if(w.GG!=null||w.W!=null||w.E!=null){dow=1;doy=4;weekYear=defaults(w.GG,config._a[YEAR],weekOfYear(local__createLocal(),1,4).year);week=defaults(w.W,1);weekday=defaults(w.E,1);}else{dow=config._locale._week.dow;doy=config._locale._week.doy;weekYear=defaults(w.gg,config._a[YEAR],weekOfYear(local__createLocal(),dow,doy).year);week=defaults(w.w,1);if(w.d!=null){weekday=w.d;if(weekday<dow){++week;}}else if(w.e!=null){weekday=w.e+dow;}else{weekday=dow;}}
temp=dayOfYearFromWeeks(weekYear,week,weekday,doy,dow);config._a[YEAR]=temp.year;config._dayOfYear=temp.dayOfYear;}
utils_hooks__hooks.ISO_8601=function(){};function configFromStringAndFormat(config){if(config._f===utils_hooks__hooks.ISO_8601){configFromISO(config);return;}
config._a=[];getParsingFlags(config).empty=true;var string=''+config._i,i,parsedInput,tokens,token,skipped,stringLength=string.length,totalParsedInputLength=0;tokens=expandFormat(config._f,config._locale).match(formattingTokens)||[];for(i=0;i<tokens.length;i++){token=tokens[i];parsedInput=(string.match(getParseRegexForToken(token,config))||[])[0];if(parsedInput){skipped=string.substr(0,string.indexOf(parsedInput));if(skipped.length>0){getParsingFlags(config).unusedInput.push(skipped);}
string=string.slice(string.indexOf(parsedInput)+parsedInput.length);totalParsedInputLength+=parsedInput.length;}
if(formatTokenFunctions[token]){if(parsedInput){getParsingFlags(config).empty=false;}
else{getParsingFlags(config).unusedTokens.push(token);}
addTimeToArrayFromToken(token,parsedInput,config);}
else if(config._strict&&!parsedInput){getParsingFlags(config).unusedTokens.push(token);}}
getParsingFlags(config).charsLeftOver=stringLength-totalParsedInputLength;if(string.length>0){getParsingFlags(config).unusedInput.push(string);}
if(getParsingFlags(config).bigHour===true&&config._a[HOUR]<=12&&config._a[HOUR]>0){getParsingFlags(config).bigHour=undefined;}
config._a[HOUR]=meridiemFixWrap(config._locale,config._a[HOUR],config._meridiem);configFromArray(config);checkOverflow(config);}
function meridiemFixWrap(locale,hour,meridiem){var isPm;if(meridiem==null){return hour;}
if(locale.meridiemHour!=null){return locale.meridiemHour(hour,meridiem);}else if(locale.isPM!=null){isPm=locale.isPM(meridiem);if(isPm&&hour<12){hour+=12;}
if(!isPm&&hour===12){hour=0;}
return hour;}else{return hour;}}
function configFromStringAndArray(config){var tempConfig,bestMoment,scoreToBeat,i,currentScore;if(config._f.length===0){getParsingFlags(config).invalidFormat=true;config._d=new Date(NaN);return;}
for(i=0;i<config._f.length;i++){currentScore=0;tempConfig=copyConfig({},config);if(config._useUTC!=null){tempConfig._useUTC=config._useUTC;}
tempConfig._f=config._f[i];configFromStringAndFormat(tempConfig);if(!valid__isValid(tempConfig)){continue;}
currentScore+=getParsingFlags(tempConfig).charsLeftOver;currentScore+=getParsingFlags(tempConfig).unusedTokens.length*10;getParsingFlags(tempConfig).score=currentScore;if(scoreToBeat==null||currentScore<scoreToBeat){scoreToBeat=currentScore;bestMoment=tempConfig;}}
extend(config,bestMoment||tempConfig);}
function configFromObject(config){if(config._d){return;}
var i=normalizeObjectUnits(config._i);config._a=[i.year,i.month,i.day||i.date,i.hour,i.minute,i.second,i.millisecond];configFromArray(config);}
function createFromConfig(config){var res=new Moment(checkOverflow(prepareConfig(config)));if(res._nextDay){res.add(1,'d');res._nextDay=undefined;}
return res;}
function prepareConfig(config){var input=config._i,format=config._f;config._locale=config._locale||locale_locales__getLocale(config._l);if(input===null||(format===undefined&&input==='')){return valid__createInvalid({nullInput:true});}
if(typeof input==='string'){config._i=input=config._locale.preparse(input);}
if(isMoment(input)){return new Moment(checkOverflow(input));}else if(isArray(format)){configFromStringAndArray(config);}else if(format){configFromStringAndFormat(config);}else if(isDate(input)){config._d=input;}else{configFromInput(config);}
return config;}
function configFromInput(config){var input=config._i;if(input===undefined){config._d=new Date();}else if(isDate(input)){config._d=new Date(+input);}else if(typeof input==='string'){configFromString(config);}else if(isArray(input)){config._a=map(input.slice(0),function(obj){return parseInt(obj,10);});configFromArray(config);}else if(typeof(input)==='object'){configFromObject(config);}else if(typeof(input)==='number'){config._d=new Date(input);}else{utils_hooks__hooks.createFromInputFallback(config);}}
function createLocalOrUTC(input,format,locale,strict,isUTC){var c={};if(typeof(locale)==='boolean'){strict=locale;locale=undefined;}
c._isAMomentObject=true;c._useUTC=c._isUTC=isUTC;c._l=locale;c._i=input;c._f=format;c._strict=strict;return createFromConfig(c);}
function local__createLocal(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,false);}
var prototypeMin=deprecate('moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548',function(){var other=local__createLocal.apply(null,arguments);return other<this?this:other;});var prototypeMax=deprecate('moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548',function(){var other=local__createLocal.apply(null,arguments);return other>this?this:other;});function pickBy(fn,moments){var res,i;if(moments.length===1&&isArray(moments[0])){moments=moments[0];}
if(!moments.length){return local__createLocal();}
res=moments[0];for(i=1;i<moments.length;++i){if(!moments[i].isValid()||moments[i][fn](res)){res=moments[i];}}
return res;}
function min(){var args=[].slice.call(arguments,0);return pickBy('isBefore',args);}
function max(){var args=[].slice.call(arguments,0);return pickBy('isAfter',args);}
function Duration(duration){var normalizedInput=normalizeObjectUnits(duration),years=normalizedInput.year||0,quarters=normalizedInput.quarter||0,months=normalizedInput.month||0,weeks=normalizedInput.week||0,days=normalizedInput.day||0,hours=normalizedInput.hour||0,minutes=normalizedInput.minute||0,seconds=normalizedInput.second||0,milliseconds=normalizedInput.millisecond||0;this._milliseconds=+milliseconds+
seconds*1e3+
minutes*6e4+
hours*36e5;this._days=+days+
weeks*7;this._months=+months+
quarters*3+
years*12;this._data={};this._locale=locale_locales__getLocale();this._bubble();}
function isDuration(obj){return obj instanceof Duration;}
function offset(token,separator){addFormatToken(token,0,0,function(){var offset=this.utcOffset();var sign='+';if(offset<0){offset=-offset;sign='-';}
return sign+zeroFill(~~(offset/60),2)+separator+zeroFill(~~(offset)%60,2);});}
offset('Z',':');offset('ZZ','');addRegexToken('Z',matchOffset);addRegexToken('ZZ',matchOffset);addParseToken(['Z','ZZ'],function(input,array,config){config._useUTC=true;config._tzm=offsetFromString(input);});var chunkOffset=/([\+\-]|\d\d)/gi;function offsetFromString(string){var matches=((string||'').match(matchOffset)||[]);var chunk=matches[matches.length-1]||[];var parts=(chunk+'').match(chunkOffset)||['-',0,0];var minutes=+(parts[1]*60)+toInt(parts[2]);return parts[0]==='+'?minutes:-minutes;}
function cloneWithOffset(input,model){var res,diff;if(model._isUTC){res=model.clone();diff=(isMoment(input)||isDate(input)?+input:+local__createLocal(input))-(+res);res._d.setTime(+res._d+diff);utils_hooks__hooks.updateOffset(res,false);return res;}else{return local__createLocal(input).local();}}
function getDateOffset(m){return-Math.round(m._d.getTimezoneOffset()/15)*15;}
utils_hooks__hooks.updateOffset=function(){};function getSetOffset(input,keepLocalTime){var offset=this._offset||0,localAdjust;if(input!=null){if(typeof input==='string'){input=offsetFromString(input);}
if(Math.abs(input)<16){input=input*60;}
if(!this._isUTC&&keepLocalTime){localAdjust=getDateOffset(this);}
this._offset=input;this._isUTC=true;if(localAdjust!=null){this.add(localAdjust,'m');}
if(offset!==input){if(!keepLocalTime||this._changeInProgress){add_subtract__addSubtract(this,create__createDuration(input-offset,'m'),1,false);}else if(!this._changeInProgress){this._changeInProgress=true;utils_hooks__hooks.updateOffset(this,true);this._changeInProgress=null;}}
return this;}else{return this._isUTC?offset:getDateOffset(this);}}
function getSetZone(input,keepLocalTime){if(input!=null){if(typeof input!=='string'){input=-input;}
this.utcOffset(input,keepLocalTime);return this;}else{return-this.utcOffset();}}
function setOffsetToUTC(keepLocalTime){return this.utcOffset(0,keepLocalTime);}
function setOffsetToLocal(keepLocalTime){if(this._isUTC){this.utcOffset(0,keepLocalTime);this._isUTC=false;if(keepLocalTime){this.subtract(getDateOffset(this),'m');}}
return this;}
function setOffsetToParsedOffset(){if(this._tzm){this.utcOffset(this._tzm);}else if(typeof this._i==='string'){this.utcOffset(offsetFromString(this._i));}
return this;}
function hasAlignedHourOffset(input){input=input?local__createLocal(input).utcOffset():0;return(this.utcOffset()-input)%60===0;}
function isDaylightSavingTime(){return(this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset());}
function isDaylightSavingTimeShifted(){if(typeof this._isDSTShifted!=='undefined'){return this._isDSTShifted;}
var c={};copyConfig(c,this);c=prepareConfig(c);if(c._a){var other=c._isUTC?create_utc__createUTC(c._a):local__createLocal(c._a);this._isDSTShifted=this.isValid()&&compareArrays(c._a,other.toArray())>0;}else{this._isDSTShifted=false;}
return this._isDSTShifted;}
function isLocal(){return!this._isUTC;}
function isUtcOffset(){return this._isUTC;}
function isUtc(){return this._isUTC&&this._offset===0;}
var aspNetRegex=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/;var create__isoRegex=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;function create__createDuration(input,key){var duration=input,match=null,sign,ret,diffRes;if(isDuration(input)){duration={ms:input._milliseconds,d:input._days,M:input._months};}else if(typeof input==='number'){duration={};if(key){duration[key]=input;}else{duration.milliseconds=input;}}else if(!!(match=aspNetRegex.exec(input))){sign=(match[1]==='-')?-1:1;duration={y:0,d:toInt(match[DATE])*sign,h:toInt(match[HOUR])*sign,m:toInt(match[MINUTE])*sign,s:toInt(match[SECOND])*sign,ms:toInt(match[MILLISECOND])*sign};}else if(!!(match=create__isoRegex.exec(input))){sign=(match[1]==='-')?-1:1;duration={y:parseIso(match[2],sign),M:parseIso(match[3],sign),d:parseIso(match[4],sign),h:parseIso(match[5],sign),m:parseIso(match[6],sign),s:parseIso(match[7],sign),w:parseIso(match[8],sign)};}else if(duration==null){duration={};}else if(typeof duration==='object'&&('from'in duration||'to'in duration)){diffRes=momentsDifference(local__createLocal(duration.from),local__createLocal(duration.to));duration={};duration.ms=diffRes.milliseconds;duration.M=diffRes.months;}
ret=new Duration(duration);if(isDuration(input)&&hasOwnProp(input,'_locale')){ret._locale=input._locale;}
return ret;}
create__createDuration.fn=Duration.prototype;function parseIso(inp,sign){var res=inp&&parseFloat(inp.replace(',','.'));return(isNaN(res)?0:res)*sign;}
function positiveMomentsDifference(base,other){var res={milliseconds:0,months:0};res.months=other.month()-base.month()+
(other.year()-base.year())*12;if(base.clone().add(res.months,'M').isAfter(other)){--res.months;}
res.milliseconds=+other-+(base.clone().add(res.months,'M'));return res;}
function momentsDifference(base,other){var res;other=cloneWithOffset(other,base);if(base.isBefore(other)){res=positiveMomentsDifference(base,other);}else{res=positiveMomentsDifference(other,base);res.milliseconds=-res.milliseconds;res.months=-res.months;}
return res;}
function createAdder(direction,name){return function(val,period){var dur,tmp;if(period!==null&&!isNaN(+period)){deprecateSimple(name,'moment().'+name+'(period, number) is deprecated. Please use moment().'+name+'(number, period).');tmp=val;val=period;period=tmp;}
val=typeof val==='string'?+val:val;dur=create__createDuration(val,period);add_subtract__addSubtract(this,dur,direction);return this;};}
function add_subtract__addSubtract(mom,duration,isAdding,updateOffset){var milliseconds=duration._milliseconds,days=duration._days,months=duration._months;updateOffset=updateOffset==null?true:updateOffset;if(milliseconds){mom._d.setTime(+mom._d+milliseconds*isAdding);}
if(days){get_set__set(mom,'Date',get_set__get(mom,'Date')+days*isAdding);}
if(months){setMonth(mom,get_set__get(mom,'Month')+months*isAdding);}
if(updateOffset){utils_hooks__hooks.updateOffset(mom,days||months);}}
var add_subtract__add=createAdder(1,'add');var add_subtract__subtract=createAdder(-1,'subtract');function moment_calendar__calendar(time,formats){var now=time||local__createLocal(),sod=cloneWithOffset(now,this).startOf('day'),diff=this.diff(sod,'days',true),format=diff<-6?'sameElse':diff<-1?'lastWeek':diff<0?'lastDay':diff<1?'sameDay':diff<2?'nextDay':diff<7?'nextWeek':'sameElse';return this.format(formats&&formats[format]||this.localeData().calendar(format,this,local__createLocal(now)));}
function clone(){return new Moment(this);}
function isAfter(input,units){var inputMs;units=normalizeUnits(typeof units!=='undefined'?units:'millisecond');if(units==='millisecond'){input=isMoment(input)?input:local__createLocal(input);return+this>+input;}else{inputMs=isMoment(input)?+input:+local__createLocal(input);return inputMs<+this.clone().startOf(units);}}
function isBefore(input,units){var inputMs;units=normalizeUnits(typeof units!=='undefined'?units:'millisecond');if(units==='millisecond'){input=isMoment(input)?input:local__createLocal(input);return+this<+input;}else{inputMs=isMoment(input)?+input:+local__createLocal(input);return+this.clone().endOf(units)<inputMs;}}
function isBetween(from,to,units){return this.isAfter(from,units)&&this.isBefore(to,units);}
function isSame(input,units){var inputMs;units=normalizeUnits(units||'millisecond');if(units==='millisecond'){input=isMoment(input)?input:local__createLocal(input);return+this===+input;}else{inputMs=+local__createLocal(input);return+(this.clone().startOf(units))<=inputMs&&inputMs<=+(this.clone().endOf(units));}}
function diff(input,units,asFloat){var that=cloneWithOffset(input,this),zoneDelta=(that.utcOffset()-this.utcOffset())*6e4,delta,output;units=normalizeUnits(units);if(units==='year'||units==='month'||units==='quarter'){output=monthDiff(this,that);if(units==='quarter'){output=output/3;}else if(units==='year'){output=output/12;}}else{delta=this-that;output=units==='second'?delta/1e3:units==='minute'?delta/6e4:units==='hour'?delta/36e5:units==='day'?(delta-zoneDelta)/864e5:units==='week'?(delta-zoneDelta)/6048e5:delta;}
return asFloat?output:absFloor(output);}
function monthDiff(a,b){var wholeMonthDiff=((b.year()-a.year())*12)+(b.month()-a.month()),anchor=a.clone().add(wholeMonthDiff,'months'),anchor2,adjust;if(b-anchor<0){anchor2=a.clone().add(wholeMonthDiff-1,'months');adjust=(b-anchor)/(anchor-anchor2);}else{anchor2=a.clone().add(wholeMonthDiff+1,'months');adjust=(b-anchor)/(anchor2-anchor);}
return-(wholeMonthDiff+adjust);}
utils_hooks__hooks.defaultFormat='YYYY-MM-DDTHH:mm:ssZ';function toString(){return this.clone().locale('en').format('ddd MMM DD YYYY HH:mm:ss [GMT]ZZ');}
function moment_format__toISOString(){var m=this.clone().utc();if(0<m.year()&&m.year()<=9999){if('function'===typeof Date.prototype.toISOString){return this.toDate().toISOString();}else{return formatMoment(m,'YYYY-MM-DD[T]HH:mm:ss.SSS[Z]');}}else{return formatMoment(m,'YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]');}}
function format(inputString){var output=formatMoment(this,inputString||utils_hooks__hooks.defaultFormat);return this.localeData().postformat(output);}
function from(time,withoutSuffix){if(!this.isValid()){return this.localeData().invalidDate();}
return create__createDuration({to:this,from:time}).locale(this.locale()).humanize(!withoutSuffix);}
function fromNow(withoutSuffix){return this.from(local__createLocal(),withoutSuffix);}
function to(time,withoutSuffix){if(!this.isValid()){return this.localeData().invalidDate();}
return create__createDuration({from:this,to:time}).locale(this.locale()).humanize(!withoutSuffix);}
function toNow(withoutSuffix){return this.to(local__createLocal(),withoutSuffix);}
function locale(key){var newLocaleData;if(key===undefined){return this._locale._abbr;}else{newLocaleData=locale_locales__getLocale(key);if(newLocaleData!=null){this._locale=newLocaleData;}
return this;}}
var lang=deprecate('moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.',function(key){if(key===undefined){return this.localeData();}else{return this.locale(key);}});function localeData(){return this._locale;}
function startOf(units){units=normalizeUnits(units);switch(units){case'year':this.month(0);case'quarter':case'month':this.date(1);case'week':case'isoWeek':case'day':this.hours(0);case'hour':this.minutes(0);case'minute':this.seconds(0);case'second':this.milliseconds(0);}
if(units==='week'){this.weekday(0);}
if(units==='isoWeek'){this.isoWeekday(1);}
if(units==='quarter'){this.month(Math.floor(this.month()/3)*3);}
return this;}
function endOf(units){units=normalizeUnits(units);if(units===undefined||units==='millisecond'){return this;}
return this.startOf(units).add(1,(units==='isoWeek'?'week':units)).subtract(1,'ms');}
function to_type__valueOf(){return+this._d-((this._offset||0)*60000);}
function unix(){return Math.floor(+this/1000);}
function toDate(){return this._offset?new Date(+this):this._d;}
function toArray(){var m=this;return[m.year(),m.month(),m.date(),m.hour(),m.minute(),m.second(),m.millisecond()];}
function toObject(){var m=this;return{years:m.year(),months:m.month(),date:m.date(),hours:m.hours(),minutes:m.minutes(),seconds:m.seconds(),milliseconds:m.milliseconds()};}
function moment_valid__isValid(){return valid__isValid(this);}
function parsingFlags(){return extend({},getParsingFlags(this));}
function invalidAt(){return getParsingFlags(this).overflow;}
addFormatToken(0,['gg',2],0,function(){return this.weekYear()%100;});addFormatToken(0,['GG',2],0,function(){return this.isoWeekYear()%100;});function addWeekYearFormatToken(token,getter){addFormatToken(0,[token,token.length],0,getter);}
addWeekYearFormatToken('gggg','weekYear');addWeekYearFormatToken('ggggg','weekYear');addWeekYearFormatToken('GGGG','isoWeekYear');addWeekYearFormatToken('GGGGG','isoWeekYear');addUnitAlias('weekYear','gg');addUnitAlias('isoWeekYear','GG');addRegexToken('G',matchSigned);addRegexToken('g',matchSigned);addRegexToken('GG',match1to2,match2);addRegexToken('gg',match1to2,match2);addRegexToken('GGGG',match1to4,match4);addRegexToken('gggg',match1to4,match4);addRegexToken('GGGGG',match1to6,match6);addRegexToken('ggggg',match1to6,match6);addWeekParseToken(['gggg','ggggg','GGGG','GGGGG'],function(input,week,config,token){week[token.substr(0,2)]=toInt(input);});addWeekParseToken(['gg','GG'],function(input,week,config,token){week[token]=utils_hooks__hooks.parseTwoDigitYear(input);});function weeksInYear(year,dow,doy){return weekOfYear(local__createLocal([year,11,31+dow-doy]),dow,doy).week;}
function getSetWeekYear(input){var year=weekOfYear(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return input==null?year:this.add((input-year),'y');}
function getSetISOWeekYear(input){var year=weekOfYear(this,1,4).year;return input==null?year:this.add((input-year),'y');}
function getISOWeeksInYear(){return weeksInYear(this.year(),1,4);}
function getWeeksInYear(){var weekInfo=this.localeData()._week;return weeksInYear(this.year(),weekInfo.dow,weekInfo.doy);}
addFormatToken('Q',0,0,'quarter');addUnitAlias('quarter','Q');addRegexToken('Q',match1);addParseToken('Q',function(input,array){array[MONTH]=(toInt(input)-1)*3;});function getSetQuarter(input){return input==null?Math.ceil((this.month()+1)/3):this.month((input-1)*3+this.month()%3);}
addFormatToken('D',['DD',2],'Do','date');addUnitAlias('date','D');addRegexToken('D',match1to2);addRegexToken('DD',match1to2,match2);addRegexToken('Do',function(isStrict,locale){return isStrict?locale._ordinalParse:locale._ordinalParseLenient;});addParseToken(['D','DD'],DATE);addParseToken('Do',function(input,array){array[DATE]=toInt(input.match(match1to2)[0],10);});var getSetDayOfMonth=makeGetSet('Date',true);addFormatToken('d',0,'do','day');addFormatToken('dd',0,0,function(format){return this.localeData().weekdaysMin(this,format);});addFormatToken('ddd',0,0,function(format){return this.localeData().weekdaysShort(this,format);});addFormatToken('dddd',0,0,function(format){return this.localeData().weekdays(this,format);});addFormatToken('e',0,0,'weekday');addFormatToken('E',0,0,'isoWeekday');addUnitAlias('day','d');addUnitAlias('weekday','e');addUnitAlias('isoWeekday','E');addRegexToken('d',match1to2);addRegexToken('e',match1to2);addRegexToken('E',match1to2);addRegexToken('dd',matchWord);addRegexToken('ddd',matchWord);addRegexToken('dddd',matchWord);addWeekParseToken(['dd','ddd','dddd'],function(input,week,config){var weekday=config._locale.weekdaysParse(input);if(weekday!=null){week.d=weekday;}else{getParsingFlags(config).invalidWeekday=input;}});addWeekParseToken(['d','e','E'],function(input,week,config,token){week[token]=toInt(input);});function parseWeekday(input,locale){if(typeof input!=='string'){return input;}
if(!isNaN(input)){return parseInt(input,10);}
input=locale.weekdaysParse(input);if(typeof input==='number'){return input;}
return null;}
var defaultLocaleWeekdays='Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_');function localeWeekdays(m){return this._weekdays[m.day()];}
var defaultLocaleWeekdaysShort='Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_');function localeWeekdaysShort(m){return this._weekdaysShort[m.day()];}
var defaultLocaleWeekdaysMin='Su_Mo_Tu_We_Th_Fr_Sa'.split('_');function localeWeekdaysMin(m){return this._weekdaysMin[m.day()];}
function localeWeekdaysParse(weekdayName){var i,mom,regex;this._weekdaysParse=this._weekdaysParse||[];for(i=0;i<7;i++){if(!this._weekdaysParse[i]){mom=local__createLocal([2000,1]).day(i);regex='^'+this.weekdays(mom,'')+'|^'+this.weekdaysShort(mom,'')+'|^'+this.weekdaysMin(mom,'');this._weekdaysParse[i]=new RegExp(regex.replace('.',''),'i');}
if(this._weekdaysParse[i].test(weekdayName)){return i;}}}
function getSetDayOfWeek(input){var day=this._isUTC?this._d.getUTCDay():this._d.getDay();if(input!=null){input=parseWeekday(input,this.localeData());return this.add(input-day,'d');}else{return day;}}
function getSetLocaleDayOfWeek(input){var weekday=(this.day()+7-this.localeData()._week.dow)%7;return input==null?weekday:this.add(input-weekday,'d');}
function getSetISODayOfWeek(input){return input==null?this.day()||7:this.day(this.day()%7?input:input-7);}
addFormatToken('H',['HH',2],0,'hour');addFormatToken('h',['hh',2],0,function(){return this.hours()%12||12;});function meridiem(token,lowercase){addFormatToken(token,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),lowercase);});}
meridiem('a',true);meridiem('A',false);addUnitAlias('hour','h');function matchMeridiem(isStrict,locale){return locale._meridiemParse;}
addRegexToken('a',matchMeridiem);addRegexToken('A',matchMeridiem);addRegexToken('H',match1to2);addRegexToken('h',match1to2);addRegexToken('HH',match1to2,match2);addRegexToken('hh',match1to2,match2);addParseToken(['H','HH'],HOUR);addParseToken(['a','A'],function(input,array,config){config._isPm=config._locale.isPM(input);config._meridiem=input;});addParseToken(['h','hh'],function(input,array,config){array[HOUR]=toInt(input);getParsingFlags(config).bigHour=true;});function localeIsPM(input){return((input+'').toLowerCase().charAt(0)==='p');}
var defaultLocaleMeridiemParse=/[ap]\.?m?\.?/i;function localeMeridiem(hours,minutes,isLower){if(hours>11){return isLower?'pm':'PM';}else{return isLower?'am':'AM';}}
var getSetHour=makeGetSet('Hours',true);addFormatToken('m',['mm',2],0,'minute');addUnitAlias('minute','m');addRegexToken('m',match1to2);addRegexToken('mm',match1to2,match2);addParseToken(['m','mm'],MINUTE);var getSetMinute=makeGetSet('Minutes',false);addFormatToken('s',['ss',2],0,'second');addUnitAlias('second','s');addRegexToken('s',match1to2);addRegexToken('ss',match1to2,match2);addParseToken(['s','ss'],SECOND);var getSetSecond=makeGetSet('Seconds',false);addFormatToken('S',0,0,function(){return~~(this.millisecond()/100);});addFormatToken(0,['SS',2],0,function(){return~~(this.millisecond()/10);});addFormatToken(0,['SSS',3],0,'millisecond');addFormatToken(0,['SSSS',4],0,function(){return this.millisecond()*10;});addFormatToken(0,['SSSSS',5],0,function(){return this.millisecond()*100;});addFormatToken(0,['SSSSSS',6],0,function(){return this.millisecond()*1000;});addFormatToken(0,['SSSSSSS',7],0,function(){return this.millisecond()*10000;});addFormatToken(0,['SSSSSSSS',8],0,function(){return this.millisecond()*100000;});addFormatToken(0,['SSSSSSSSS',9],0,function(){return this.millisecond()*1000000;});addUnitAlias('millisecond','ms');addRegexToken('S',match1to3,match1);addRegexToken('SS',match1to3,match2);addRegexToken('SSS',match1to3,match3);var token;for(token='SSSS';token.length<=9;token+='S'){addRegexToken(token,matchUnsigned);}
function parseMs(input,array){array[MILLISECOND]=toInt(('0.'+input)*1000);}
for(token='S';token.length<=9;token+='S'){addParseToken(token,parseMs);}
var getSetMillisecond=makeGetSet('Milliseconds',false);addFormatToken('z',0,0,'zoneAbbr');addFormatToken('zz',0,0,'zoneName');function getZoneAbbr(){return this._isUTC?'UTC':'';}
function getZoneName(){return this._isUTC?'Coordinated Universal Time':'';}
var momentPrototype__proto=Moment.prototype;momentPrototype__proto.add=add_subtract__add;momentPrototype__proto.calendar=moment_calendar__calendar;momentPrototype__proto.clone=clone;momentPrototype__proto.diff=diff;momentPrototype__proto.endOf=endOf;momentPrototype__proto.format=format;momentPrototype__proto.from=from;momentPrototype__proto.fromNow=fromNow;momentPrototype__proto.to=to;momentPrototype__proto.toNow=toNow;momentPrototype__proto.get=getSet;momentPrototype__proto.invalidAt=invalidAt;momentPrototype__proto.isAfter=isAfter;momentPrototype__proto.isBefore=isBefore;momentPrototype__proto.isBetween=isBetween;momentPrototype__proto.isSame=isSame;momentPrototype__proto.isValid=moment_valid__isValid;momentPrototype__proto.lang=lang;momentPrototype__proto.locale=locale;momentPrototype__proto.localeData=localeData;momentPrototype__proto.max=prototypeMax;momentPrototype__proto.min=prototypeMin;momentPrototype__proto.parsingFlags=parsingFlags;momentPrototype__proto.set=getSet;momentPrototype__proto.startOf=startOf;momentPrototype__proto.subtract=add_subtract__subtract;momentPrototype__proto.toArray=toArray;momentPrototype__proto.toObject=toObject;momentPrototype__proto.toDate=toDate;momentPrototype__proto.toISOString=moment_format__toISOString;momentPrototype__proto.toJSON=moment_format__toISOString;momentPrototype__proto.toString=toString;momentPrototype__proto.unix=unix;momentPrototype__proto.valueOf=to_type__valueOf;momentPrototype__proto.year=getSetYear;momentPrototype__proto.isLeapYear=getIsLeapYear;momentPrototype__proto.weekYear=getSetWeekYear;momentPrototype__proto.isoWeekYear=getSetISOWeekYear;momentPrototype__proto.quarter=momentPrototype__proto.quarters=getSetQuarter;momentPrototype__proto.month=getSetMonth;momentPrototype__proto.daysInMonth=getDaysInMonth;momentPrototype__proto.week=momentPrototype__proto.weeks=getSetWeek;momentPrototype__proto.isoWeek=momentPrototype__proto.isoWeeks=getSetISOWeek;momentPrototype__proto.weeksInYear=getWeeksInYear;momentPrototype__proto.isoWeeksInYear=getISOWeeksInYear;momentPrototype__proto.date=getSetDayOfMonth;momentPrototype__proto.day=momentPrototype__proto.days=getSetDayOfWeek;momentPrototype__proto.weekday=getSetLocaleDayOfWeek;momentPrototype__proto.isoWeekday=getSetISODayOfWeek;momentPrototype__proto.dayOfYear=getSetDayOfYear;momentPrototype__proto.hour=momentPrototype__proto.hours=getSetHour;momentPrototype__proto.minute=momentPrototype__proto.minutes=getSetMinute;momentPrototype__proto.second=momentPrototype__proto.seconds=getSetSecond;momentPrototype__proto.millisecond=momentPrototype__proto.milliseconds=getSetMillisecond;momentPrototype__proto.utcOffset=getSetOffset;momentPrototype__proto.utc=setOffsetToUTC;momentPrototype__proto.local=setOffsetToLocal;momentPrototype__proto.parseZone=setOffsetToParsedOffset;momentPrototype__proto.hasAlignedHourOffset=hasAlignedHourOffset;momentPrototype__proto.isDST=isDaylightSavingTime;momentPrototype__proto.isDSTShifted=isDaylightSavingTimeShifted;momentPrototype__proto.isLocal=isLocal;momentPrototype__proto.isUtcOffset=isUtcOffset;momentPrototype__proto.isUtc=isUtc;momentPrototype__proto.isUTC=isUtc;momentPrototype__proto.zoneAbbr=getZoneAbbr;momentPrototype__proto.zoneName=getZoneName;momentPrototype__proto.dates=deprecate('dates accessor is deprecated. Use date instead.',getSetDayOfMonth);momentPrototype__proto.months=deprecate('months accessor is deprecated. Use month instead',getSetMonth);momentPrototype__proto.years=deprecate('years accessor is deprecated. Use year instead',getSetYear);momentPrototype__proto.zone=deprecate('moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779',getSetZone);var momentPrototype=momentPrototype__proto;function moment__createUnix(input){return local__createLocal(input*1000);}
function moment__createInZone(){return local__createLocal.apply(null,arguments).parseZone();}
var defaultCalendar={sameDay:'[Today at] LT',nextDay:'[Tomorrow at] LT',nextWeek:'dddd [at] LT',lastDay:'[Yesterday at] LT',lastWeek:'[Last] dddd [at] LT',sameElse:'L'};function locale_calendar__calendar(key,mom,now){var output=this._calendar[key];return typeof output==='function'?output.call(mom,now):output;}
var defaultLongDateFormat={LTS:'h:mm:ss A',LT:'h:mm A',L:'MM/DD/YYYY',LL:'MMMM D, YYYY',LLL:'MMMM D, YYYY h:mm A',LLLL:'dddd, MMMM D, YYYY h:mm A'};function longDateFormat(key){var format=this._longDateFormat[key],formatUpper=this._longDateFormat[key.toUpperCase()];if(format||!formatUpper){return format;}
this._longDateFormat[key]=formatUpper.replace(/MMMM|MM|DD|dddd/g,function(val){return val.slice(1);});return this._longDateFormat[key];}
var defaultInvalidDate='Invalid date';function invalidDate(){return this._invalidDate;}
var defaultOrdinal='%d';var defaultOrdinalParse=/\d{1,2}/;function ordinal(number){return this._ordinal.replace('%d',number);}
function preParsePostFormat(string){return string;}
var defaultRelativeTime={future:'in %s',past:'%s ago',s:'a few seconds',m:'a minute',mm:'%d minutes',h:'an hour',hh:'%d hours',d:'a day',dd:'%d days',M:'a month',MM:'%d months',y:'a year',yy:'%d years'};function relative__relativeTime(number,withoutSuffix,string,isFuture){var output=this._relativeTime[string];return(typeof output==='function')?output(number,withoutSuffix,string,isFuture):output.replace(/%d/i,number);}
function pastFuture(diff,output){var format=this._relativeTime[diff>0?'future':'past'];return typeof format==='function'?format(output):format.replace(/%s/i,output);}
function locale_set__set(config){var prop,i;for(i in config){prop=config[i];if(typeof prop==='function'){this[i]=prop;}else{this['_'+i]=prop;}}
this._ordinalParseLenient=new RegExp(this._ordinalParse.source+'|'+(/\d{1,2}/).source);}
var prototype__proto=Locale.prototype;prototype__proto._calendar=defaultCalendar;prototype__proto.calendar=locale_calendar__calendar;prototype__proto._longDateFormat=defaultLongDateFormat;prototype__proto.longDateFormat=longDateFormat;prototype__proto._invalidDate=defaultInvalidDate;prototype__proto.invalidDate=invalidDate;prototype__proto._ordinal=defaultOrdinal;prototype__proto.ordinal=ordinal;prototype__proto._ordinalParse=defaultOrdinalParse;prototype__proto.preparse=preParsePostFormat;prototype__proto.postformat=preParsePostFormat;prototype__proto._relativeTime=defaultRelativeTime;prototype__proto.relativeTime=relative__relativeTime;prototype__proto.pastFuture=pastFuture;prototype__proto.set=locale_set__set;prototype__proto.months=localeMonths;prototype__proto._months=defaultLocaleMonths;prototype__proto.monthsShort=localeMonthsShort;prototype__proto._monthsShort=defaultLocaleMonthsShort;prototype__proto.monthsParse=localeMonthsParse;prototype__proto.week=localeWeek;prototype__proto._week=defaultLocaleWeek;prototype__proto.firstDayOfYear=localeFirstDayOfYear;prototype__proto.firstDayOfWeek=localeFirstDayOfWeek;prototype__proto.weekdays=localeWeekdays;prototype__proto._weekdays=defaultLocaleWeekdays;prototype__proto.weekdaysMin=localeWeekdaysMin;prototype__proto._weekdaysMin=defaultLocaleWeekdaysMin;prototype__proto.weekdaysShort=localeWeekdaysShort;prototype__proto._weekdaysShort=defaultLocaleWeekdaysShort;prototype__proto.weekdaysParse=localeWeekdaysParse;prototype__proto.isPM=localeIsPM;prototype__proto._meridiemParse=defaultLocaleMeridiemParse;prototype__proto.meridiem=localeMeridiem;function lists__get(format,index,field,setter){var locale=locale_locales__getLocale();var utc=create_utc__createUTC().set(setter,index);return locale[field](utc,format);}
function list(format,index,field,count,setter){if(typeof format==='number'){index=format;format=undefined;}
format=format||'';if(index!=null){return lists__get(format,index,field,setter);}
var i;var out=[];for(i=0;i<count;i++){out[i]=lists__get(format,i,field,setter);}
return out;}
function lists__listMonths(format,index){return list(format,index,'months',12,'month');}
function lists__listMonthsShort(format,index){return list(format,index,'monthsShort',12,'month');}
function lists__listWeekdays(format,index){return list(format,index,'weekdays',7,'day');}
function lists__listWeekdaysShort(format,index){return list(format,index,'weekdaysShort',7,'day');}
function lists__listWeekdaysMin(format,index){return list(format,index,'weekdaysMin',7,'day');}
locale_locales__getSetGlobalLocale('en',{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(number){var b=number%10,output=(toInt(number%100/10)===1)?'th':(b===1)?'st':(b===2)?'nd':(b===3)?'rd':'th';return number+output;}});utils_hooks__hooks.lang=deprecate('moment.lang is deprecated. Use moment.locale instead.',locale_locales__getSetGlobalLocale);utils_hooks__hooks.langData=deprecate('moment.langData is deprecated. Use moment.localeData instead.',locale_locales__getLocale);var mathAbs=Math.abs;function duration_abs__abs(){var data=this._data;this._milliseconds=mathAbs(this._milliseconds);this._days=mathAbs(this._days);this._months=mathAbs(this._months);data.milliseconds=mathAbs(data.milliseconds);data.seconds=mathAbs(data.seconds);data.minutes=mathAbs(data.minutes);data.hours=mathAbs(data.hours);data.months=mathAbs(data.months);data.years=mathAbs(data.years);return this;}
function duration_add_subtract__addSubtract(duration,input,value,direction){var other=create__createDuration(input,value);duration._milliseconds+=direction*other._milliseconds;duration._days+=direction*other._days;duration._months+=direction*other._months;return duration._bubble();}
function duration_add_subtract__add(input,value){return duration_add_subtract__addSubtract(this,input,value,1);}
function duration_add_subtract__subtract(input,value){return duration_add_subtract__addSubtract(this,input,value,-1);}
function absCeil(number){if(number<0){return Math.floor(number);}else{return Math.ceil(number);}}
function bubble(){var milliseconds=this._milliseconds;var days=this._days;var months=this._months;var data=this._data;var seconds,minutes,hours,years,monthsFromDays;if(!((milliseconds>=0&&days>=0&&months>=0)||(milliseconds<=0&&days<=0&&months<=0))){milliseconds+=absCeil(monthsToDays(months)+days)*864e5;days=0;months=0;}
data.milliseconds=milliseconds%1000;seconds=absFloor(milliseconds/1000);data.seconds=seconds%60;minutes=absFloor(seconds/60);data.minutes=minutes%60;hours=absFloor(minutes/60);data.hours=hours%24;days+=absFloor(hours/24);monthsFromDays=absFloor(daysToMonths(days));months+=monthsFromDays;days-=absCeil(monthsToDays(monthsFromDays));years=absFloor(months/12);months%=12;data.days=days;data.months=months;data.years=years;return this;}
function daysToMonths(days){return days*4800/146097;}
function monthsToDays(months){return months*146097/4800;}
function as(units){var days;var months;var milliseconds=this._milliseconds;units=normalizeUnits(units);if(units==='month'||units==='year'){days=this._days+milliseconds/864e5;months=this._months+daysToMonths(days);return units==='month'?months:months/12;}else{days=this._days+Math.round(monthsToDays(this._months));switch(units){case'week':return days/7+milliseconds/6048e5;case'day':return days+milliseconds/864e5;case'hour':return days*24+milliseconds/36e5;case'minute':return days*1440+milliseconds/6e4;case'second':return days*86400+milliseconds/1000;case'millisecond':return Math.floor(days*864e5)+milliseconds;default:throw new Error('Unknown unit '+units);}}}
function duration_as__valueOf(){return(this._milliseconds+
this._days*864e5+
(this._months%12)*2592e6+
toInt(this._months/12)*31536e6);}
function makeAs(alias){return function(){return this.as(alias);};}
var asMilliseconds=makeAs('ms');var asSeconds=makeAs('s');var asMinutes=makeAs('m');var asHours=makeAs('h');var asDays=makeAs('d');var asWeeks=makeAs('w');var asMonths=makeAs('M');var asYears=makeAs('y');function duration_get__get(units){units=normalizeUnits(units);return this[units+'s']();}
function makeGetter(name){return function(){return this._data[name];};}
var milliseconds=makeGetter('milliseconds');var seconds=makeGetter('seconds');var minutes=makeGetter('minutes');var hours=makeGetter('hours');var days=makeGetter('days');var months=makeGetter('months');var years=makeGetter('years');function weeks(){return absFloor(this.days()/7);}
var round=Math.round;var thresholds={s:45,m:45,h:22,d:26,M:11};function substituteTimeAgo(string,number,withoutSuffix,isFuture,locale){return locale.relativeTime(number||1,!!withoutSuffix,string,isFuture);}
function duration_humanize__relativeTime(posNegDuration,withoutSuffix,locale){var duration=create__createDuration(posNegDuration).abs();var seconds=round(duration.as('s'));var minutes=round(duration.as('m'));var hours=round(duration.as('h'));var days=round(duration.as('d'));var months=round(duration.as('M'));var years=round(duration.as('y'));var a=seconds<thresholds.s&&['s',seconds]||minutes===1&&['m']||minutes<thresholds.m&&['mm',minutes]||hours===1&&['h']||hours<thresholds.h&&['hh',hours]||days===1&&['d']||days<thresholds.d&&['dd',days]||months===1&&['M']||months<thresholds.M&&['MM',months]||years===1&&['y']||['yy',years];a[2]=withoutSuffix;a[3]=+posNegDuration>0;a[4]=locale;return substituteTimeAgo.apply(null,a);}
function duration_humanize__getSetRelativeTimeThreshold(threshold,limit){if(thresholds[threshold]===undefined){return false;}
if(limit===undefined){return thresholds[threshold];}
thresholds[threshold]=limit;return true;}
function humanize(withSuffix){var locale=this.localeData();var output=duration_humanize__relativeTime(this,!withSuffix,locale);if(withSuffix){output=locale.pastFuture(+this,output);}
return locale.postformat(output);}
var iso_string__abs=Math.abs;function iso_string__toISOString(){var seconds=iso_string__abs(this._milliseconds)/1000;var days=iso_string__abs(this._days);var months=iso_string__abs(this._months);var minutes,hours,years;minutes=absFloor(seconds/60);hours=absFloor(minutes/60);seconds%=60;minutes%=60;years=absFloor(months/12);months%=12;var Y=years;var M=months;var D=days;var h=hours;var m=minutes;var s=seconds;var total=this.asSeconds();if(!total){return'P0D';}
return(total<0?'-':'')+'P'+
(Y?Y+'Y':'')+
(M?M+'M':'')+
(D?D+'D':'')+
((h||m||s)?'T':'')+
(h?h+'H':'')+
(m?m+'M':'')+
(s?s+'S':'');}
var duration_prototype__proto=Duration.prototype;duration_prototype__proto.abs=duration_abs__abs;duration_prototype__proto.add=duration_add_subtract__add;duration_prototype__proto.subtract=duration_add_subtract__subtract;duration_prototype__proto.as=as;duration_prototype__proto.asMilliseconds=asMilliseconds;duration_prototype__proto.asSeconds=asSeconds;duration_prototype__proto.asMinutes=asMinutes;duration_prototype__proto.asHours=asHours;duration_prototype__proto.asDays=asDays;duration_prototype__proto.asWeeks=asWeeks;duration_prototype__proto.asMonths=asMonths;duration_prototype__proto.asYears=asYears;duration_prototype__proto.valueOf=duration_as__valueOf;duration_prototype__proto._bubble=bubble;duration_prototype__proto.get=duration_get__get;duration_prototype__proto.milliseconds=milliseconds;duration_prototype__proto.seconds=seconds;duration_prototype__proto.minutes=minutes;duration_prototype__proto.hours=hours;duration_prototype__proto.days=days;duration_prototype__proto.weeks=weeks;duration_prototype__proto.months=months;duration_prototype__proto.years=years;duration_prototype__proto.humanize=humanize;duration_prototype__proto.toISOString=iso_string__toISOString;duration_prototype__proto.toString=iso_string__toISOString;duration_prototype__proto.toJSON=iso_string__toISOString;duration_prototype__proto.locale=locale;duration_prototype__proto.localeData=localeData;duration_prototype__proto.toIsoString=deprecate('toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)',iso_string__toISOString);duration_prototype__proto.lang=lang;addFormatToken('X',0,0,'unix');addFormatToken('x',0,0,'valueOf');addRegexToken('x',matchSigned);addRegexToken('X',matchTimestamp);addParseToken('X',function(input,array,config){config._d=new Date(parseFloat(input,10)*1000);});addParseToken('x',function(input,array,config){config._d=new Date(toInt(input));});utils_hooks__hooks.version='2.10.6';setHookCallback(local__createLocal);utils_hooks__hooks.fn=momentPrototype;utils_hooks__hooks.min=min;utils_hooks__hooks.max=max;utils_hooks__hooks.utc=create_utc__createUTC;utils_hooks__hooks.unix=moment__createUnix;utils_hooks__hooks.months=lists__listMonths;utils_hooks__hooks.isDate=isDate;utils_hooks__hooks.locale=locale_locales__getSetGlobalLocale;utils_hooks__hooks.invalid=valid__createInvalid;utils_hooks__hooks.duration=create__createDuration;utils_hooks__hooks.isMoment=isMoment;utils_hooks__hooks.weekdays=lists__listWeekdays;utils_hooks__hooks.parseZone=moment__createInZone;utils_hooks__hooks.localeData=locale_locales__getLocale;utils_hooks__hooks.isDuration=isDuration;utils_hooks__hooks.monthsShort=lists__listMonthsShort;utils_hooks__hooks.weekdaysMin=lists__listWeekdaysMin;utils_hooks__hooks.defineLocale=defineLocale;utils_hooks__hooks.weekdaysShort=lists__listWeekdaysShort;utils_hooks__hooks.normalizeUnits=normalizeUnits;utils_hooks__hooks.relativeTimeThreshold=duration_humanize__getSetRelativeTimeThreshold;var _moment=utils_hooks__hooks;return _moment;}));(function(window,undefined){"use strict";var _window=window,_document=_window.document,_navigator=_window.navigator,_setTimeout=_window.setTimeout,_clearTimeout=_window.clearTimeout,_setInterval=_window.setInterval,_clearInterval=_window.clearInterval,_getComputedStyle=_window.getComputedStyle,_encodeURIComponent=_window.encodeURIComponent,_ActiveXObject=_window.ActiveXObject,_Error=_window.Error,_parseInt=_window.Number.parseInt||_window.parseInt,_parseFloat=_window.Number.parseFloat||_window.parseFloat,_isNaN=_window.Number.isNaN||_window.isNaN,_now=_window.Date.now,_keys=_window.Object.keys,_defineProperty=_window.Object.defineProperty,_hasOwn=_window.Object.prototype.hasOwnProperty,_slice=_window.Array.prototype.slice,_unwrap=function(){var unwrapper=function(el){return el;};if(typeof _window.wrap==="function"&&typeof _window.unwrap==="function"){try{var div=_document.createElement("div");var unwrappedDiv=_window.unwrap(div);if(div.nodeType===1&&unwrappedDiv&&unwrappedDiv.nodeType===1){unwrapper=_window.unwrap;}}catch(e){}}
return unwrapper;}();var _args=function(argumentsObj){return _slice.call(argumentsObj,0);};var _extend=function(){var i,len,arg,prop,src,copy,args=_args(arguments),target=args[0]||{};for(i=1,len=args.length;i<len;i++){if((arg=args[i])!=null){for(prop in arg){if(_hasOwn.call(arg,prop)){src=target[prop];copy=arg[prop];if(target!==copy&&copy!==undefined){target[prop]=copy;}}}}}
return target;};var _deepCopy=function(source){var copy,i,len,prop;if(typeof source!=="object"||source==null||typeof source.nodeType==="number"){copy=source;}else if(typeof source.length==="number"){copy=[];for(i=0,len=source.length;i<len;i++){if(_hasOwn.call(source,i)){copy[i]=_deepCopy(source[i]);}}}else{copy={};for(prop in source){if(_hasOwn.call(source,prop)){copy[prop]=_deepCopy(source[prop]);}}}
return copy;};var _pick=function(obj,keys){var newObj={};for(var i=0,len=keys.length;i<len;i++){if(keys[i]in obj){newObj[keys[i]]=obj[keys[i]];}}
return newObj;};var _omit=function(obj,keys){var newObj={};for(var prop in obj){if(keys.indexOf(prop)===-1){newObj[prop]=obj[prop];}}
return newObj;};var _deleteOwnProperties=function(obj){if(obj){for(var prop in obj){if(_hasOwn.call(obj,prop)){delete obj[prop];}}}
return obj;};var _containedBy=function(el,ancestorEl){if(el&&el.nodeType===1&&el.ownerDocument&&ancestorEl&&(ancestorEl.nodeType===1&&ancestorEl.ownerDocument&&ancestorEl.ownerDocument===el.ownerDocument||ancestorEl.nodeType===9&&!ancestorEl.ownerDocument&&ancestorEl===el.ownerDocument)){do{if(el===ancestorEl){return true;}
el=el.parentNode;}while(el);}
return false;};var _getDirPathOfUrl=function(url){var dir;if(typeof url==="string"&&url){dir=url.split("#")[0].split("?")[0];dir=url.slice(0,url.lastIndexOf("/")+1);}
return dir;};var _getCurrentScriptUrlFromErrorStack=function(stack){var url,matches;if(typeof stack==="string"&&stack){matches=stack.match(/^(?:|[^:@]*@|.+\)@(?=http[s]?|file)|.+?\s+(?: at |@)(?:[^:\(]+ )*[\(]?)((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/);if(matches&&matches[1]){url=matches[1];}else{matches=stack.match(/\)@((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/);if(matches&&matches[1]){url=matches[1];}}}
return url;};var _getCurrentScriptUrlFromError=function(){var url,err;try{throw new _Error();}catch(e){err=e;}
if(err){url=err.sourceURL||err.fileName||_getCurrentScriptUrlFromErrorStack(err.stack);}
return url;};var _getCurrentScriptUrl=function(){var jsPath,scripts,i;if(_document.currentScript&&(jsPath=_document.currentScript.src)){return jsPath;}
scripts=_document.getElementsByTagName("script");if(scripts.length===1){return scripts[0].src||undefined;}
if("readyState"in scripts[0]){for(i=scripts.length;i--;){if(scripts[i].readyState==="interactive"&&(jsPath=scripts[i].src)){return jsPath;}}}
if(_document.readyState==="loading"&&(jsPath=scripts[scripts.length-1].src)){return jsPath;}
if(jsPath=_getCurrentScriptUrlFromError()){return jsPath;}
return undefined;};var _getUnanimousScriptParentDir=function(){var i,jsDir,jsPath,scripts=_document.getElementsByTagName("script");for(i=scripts.length;i--;){if(!(jsPath=scripts[i].src)){jsDir=null;break;}
jsPath=_getDirPathOfUrl(jsPath);if(jsDir==null){jsDir=jsPath;}else if(jsDir!==jsPath){jsDir=null;break;}}
return jsDir||undefined;};var _getDefaultSwfPath=function(){var jsDir=_getDirPathOfUrl(_getCurrentScriptUrl())||_getUnanimousScriptParentDir()||"";return jsDir+"ZeroClipboard.swf";};var _pageIsFramed=function(){return window.opener==null&&(!!window.top&&window!=window.top||!!window.parent&&window!=window.parent);}();var _flashState={bridge:null,version:"0.0.0",pluginType:"unknown",disabled:null,outdated:null,sandboxed:null,unavailable:null,degraded:null,deactivated:null,overdue:null,ready:null};var _minimumFlashVersion="11.0.0";var _zcSwfVersion;var _handlers={};var _currentElement;var _copyTarget;var _clipData={};var _clipDataFormatMap=null;var _flashCheckTimeout=0;var _swfFallbackCheckInterval=0;var _eventMessages={ready:"Flash communication is established",error:{"flash-disabled":"Flash is disabled or not installed. May also be attempting to run Flash in a sandboxed iframe, which is impossible.","flash-outdated":"Flash is too outdated to support ZeroClipboard","flash-sandboxed":"Attempting to run Flash in a sandboxed iframe, which is impossible","flash-unavailable":"Flash is unable to communicate bidirectionally with JavaScript","flash-degraded":"Flash is unable to preserve data fidelity when communicating with JavaScript","flash-deactivated":"Flash is too outdated for your browser and/or is configured as click-to-activate.\nThis may also mean that the ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity.\nMay also be attempting to run Flash in a sandboxed iframe, which is impossible.","flash-overdue":"Flash communication was established but NOT within the acceptable time limit","version-mismatch":"ZeroClipboard JS version number does not match ZeroClipboard SWF version number","clipboard-error":"At least one error was thrown while ZeroClipboard was attempting to inject your data into the clipboard","config-mismatch":"ZeroClipboard configuration does not match Flash's reality","swf-not-found":"The ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity"}};var _errorsThatOnlyOccurAfterFlashLoads=["flash-unavailable","flash-degraded","flash-overdue","version-mismatch","config-mismatch","clipboard-error"];var _flashStateErrorNames=["flash-disabled","flash-outdated","flash-sandboxed","flash-unavailable","flash-degraded","flash-deactivated","flash-overdue"];var _flashStateErrorNameMatchingRegex=new RegExp("^flash-("+_flashStateErrorNames.map(function(errorName){return errorName.replace(/^flash-/,"");}).join("|")+")$");var _flashStateEnabledErrorNameMatchingRegex=new RegExp("^flash-("+_flashStateErrorNames.slice(1).map(function(errorName){return errorName.replace(/^flash-/,"");}).join("|")+")$");var _globalConfig={swfPath:_getDefaultSwfPath(),trustedDomains:window.location.host?[window.location.host]:[],cacheBust:true,forceEnhancedClipboard:false,flashLoadTimeout:3e4,autoActivate:true,bubbleEvents:true,containerId:"global-zeroclipboard-html-bridge",containerClass:"global-zeroclipboard-container",swfObjectId:"global-zeroclipboard-flash-bridge",hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",forceHandCursor:false,title:null,zIndex:999999999};var _config=function(options){if(typeof options==="object"&&options!==null){for(var prop in options){if(_hasOwn.call(options,prop)){if(/^(?:forceHandCursor|title|zIndex|bubbleEvents)$/.test(prop)){_globalConfig[prop]=options[prop];}else if(_flashState.bridge==null){if(prop==="containerId"||prop==="swfObjectId"){if(_isValidHtml4Id(options[prop])){_globalConfig[prop]=options[prop];}else{throw new Error("The specified `"+prop+"` value is not valid as an HTML4 Element ID");}}else{_globalConfig[prop]=options[prop];}}}}}
if(typeof options==="string"&&options){if(_hasOwn.call(_globalConfig,options)){return _globalConfig[options];}
return;}
return _deepCopy(_globalConfig);};var _state=function(){_detectSandbox();return{browser:_pick(_navigator,["userAgent","platform","appName"]),flash:_omit(_flashState,["bridge"]),zeroclipboard:{version:ZeroClipboard.version,config:ZeroClipboard.config()}};};var _isFlashUnusable=function(){return!!(_flashState.disabled||_flashState.outdated||_flashState.sandboxed||_flashState.unavailable||_flashState.degraded||_flashState.deactivated);};var _on=function(eventType,listener){var i,len,events,added={};if(typeof eventType==="string"&&eventType){events=eventType.toLowerCase().split(/\s+/);}else if(typeof eventType==="object"&&eventType&&typeof listener==="undefined"){for(i in eventType){if(_hasOwn.call(eventType,i)&&typeof i==="string"&&i&&typeof eventType[i]==="function"){ZeroClipboard.on(i,eventType[i]);}}}
if(events&&events.length){for(i=0,len=events.length;i<len;i++){eventType=events[i].replace(/^on/,"");added[eventType]=true;if(!_handlers[eventType]){_handlers[eventType]=[];}
_handlers[eventType].push(listener);}
if(added.ready&&_flashState.ready){ZeroClipboard.emit({type:"ready"});}
if(added.error){for(i=0,len=_flashStateErrorNames.length;i<len;i++){if(_flashState[_flashStateErrorNames[i].replace(/^flash-/,"")]===true){ZeroClipboard.emit({type:"error",name:_flashStateErrorNames[i]});break;}}
if(_zcSwfVersion!==undefined&&ZeroClipboard.version!==_zcSwfVersion){ZeroClipboard.emit({type:"error",name:"version-mismatch",jsVersion:ZeroClipboard.version,swfVersion:_zcSwfVersion});}}}
return ZeroClipboard;};var _off=function(eventType,listener){var i,len,foundIndex,events,perEventHandlers;if(arguments.length===0){events=_keys(_handlers);}else if(typeof eventType==="string"&&eventType){events=eventType.split(/\s+/);}else if(typeof eventType==="object"&&eventType&&typeof listener==="undefined"){for(i in eventType){if(_hasOwn.call(eventType,i)&&typeof i==="string"&&i&&typeof eventType[i]==="function"){ZeroClipboard.off(i,eventType[i]);}}}
if(events&&events.length){for(i=0,len=events.length;i<len;i++){eventType=events[i].toLowerCase().replace(/^on/,"");perEventHandlers=_handlers[eventType];if(perEventHandlers&&perEventHandlers.length){if(listener){foundIndex=perEventHandlers.indexOf(listener);while(foundIndex!==-1){perEventHandlers.splice(foundIndex,1);foundIndex=perEventHandlers.indexOf(listener,foundIndex);}}else{perEventHandlers.length=0;}}}}
return ZeroClipboard;};var _listeners=function(eventType){var copy;if(typeof eventType==="string"&&eventType){copy=_deepCopy(_handlers[eventType])||null;}else{copy=_deepCopy(_handlers);}
return copy;};var _emit=function(event){var eventCopy,returnVal,tmp;event=_createEvent(event);if(!event){return;}
if(_preprocessEvent(event)){return;}
if(event.type==="ready"&&_flashState.overdue===true){return ZeroClipboard.emit({type:"error",name:"flash-overdue"});}
eventCopy=_extend({},event);_dispatchCallbacks.call(this,eventCopy);if(event.type==="copy"){tmp=_mapClipDataToFlash(_clipData);returnVal=tmp.data;_clipDataFormatMap=tmp.formatMap;}
return returnVal;};var _create=function(){var previousState=_flashState.sandboxed;_detectSandbox();if(typeof _flashState.ready!=="boolean"){_flashState.ready=false;}
if(_flashState.sandboxed!==previousState&&_flashState.sandboxed===true){_flashState.ready=false;ZeroClipboard.emit({type:"error",name:"flash-sandboxed"});}else if(!ZeroClipboard.isFlashUnusable()&&_flashState.bridge===null){var maxWait=_globalConfig.flashLoadTimeout;if(typeof maxWait==="number"&&maxWait>=0){_flashCheckTimeout=_setTimeout(function(){if(typeof _flashState.deactivated!=="boolean"){_flashState.deactivated=true;}
if(_flashState.deactivated===true){ZeroClipboard.emit({type:"error",name:"flash-deactivated"});}},maxWait);}
_flashState.overdue=false;_embedSwf();}};var _destroy=function(){ZeroClipboard.clearData();ZeroClipboard.blur();ZeroClipboard.emit("destroy");_unembedSwf();ZeroClipboard.off();};var _setData=function(format,data){var dataObj;if(typeof format==="object"&&format&&typeof data==="undefined"){dataObj=format;ZeroClipboard.clearData();}else if(typeof format==="string"&&format){dataObj={};dataObj[format]=data;}else{return;}
for(var dataFormat in dataObj){if(typeof dataFormat==="string"&&dataFormat&&_hasOwn.call(dataObj,dataFormat)&&typeof dataObj[dataFormat]==="string"&&dataObj[dataFormat]){_clipData[dataFormat]=dataObj[dataFormat];}}};var _clearData=function(format){if(typeof format==="undefined"){_deleteOwnProperties(_clipData);_clipDataFormatMap=null;}else if(typeof format==="string"&&_hasOwn.call(_clipData,format)){delete _clipData[format];}};var _getData=function(format){if(typeof format==="undefined"){return _deepCopy(_clipData);}else if(typeof format==="string"&&_hasOwn.call(_clipData,format)){return _clipData[format];}};var _focus=function(element){if(!(element&&element.nodeType===1)){return;}
if(_currentElement){_removeClass(_currentElement,_globalConfig.activeClass);if(_currentElement!==element){_removeClass(_currentElement,_globalConfig.hoverClass);}}
_currentElement=element;_addClass(element,_globalConfig.hoverClass);var newTitle=element.getAttribute("title")||_globalConfig.title;if(typeof newTitle==="string"&&newTitle){var htmlBridge=_getHtmlBridge(_flashState.bridge);if(htmlBridge){htmlBridge.setAttribute("title",newTitle);}}
var useHandCursor=_globalConfig.forceHandCursor===true||_getStyle(element,"cursor")==="pointer";_setHandCursor(useHandCursor);_reposition();};var _blur=function(){var htmlBridge=_getHtmlBridge(_flashState.bridge);if(htmlBridge){htmlBridge.removeAttribute("title");htmlBridge.style.left="0px";htmlBridge.style.top="-9999px";htmlBridge.style.width="1px";htmlBridge.style.height="1px";}
if(_currentElement){_removeClass(_currentElement,_globalConfig.hoverClass);_removeClass(_currentElement,_globalConfig.activeClass);_currentElement=null;}};var _activeElement=function(){return _currentElement||null;};var _isValidHtml4Id=function(id){return typeof id==="string"&&id&&/^[A-Za-z][A-Za-z0-9_:\-\.]*$/.test(id);};var _createEvent=function(event){var eventType;if(typeof event==="string"&&event){eventType=event;event={};}else if(typeof event==="object"&&event&&typeof event.type==="string"&&event.type){eventType=event.type;}
if(!eventType){return;}
eventType=eventType.toLowerCase();if(!event.target&&(/^(copy|aftercopy|_click)$/.test(eventType)||eventType==="error"&&event.name==="clipboard-error")){event.target=_copyTarget;}
_extend(event,{type:eventType,target:event.target||_currentElement||null,relatedTarget:event.relatedTarget||null,currentTarget:_flashState&&_flashState.bridge||null,timeStamp:event.timeStamp||_now()||null});var msg=_eventMessages[event.type];if(event.type==="error"&&event.name&&msg){msg=msg[event.name];}
if(msg){event.message=msg;}
if(event.type==="ready"){_extend(event,{target:null,version:_flashState.version});}
if(event.type==="error"){if(_flashStateErrorNameMatchingRegex.test(event.name)){_extend(event,{target:null,minimumVersion:_minimumFlashVersion});}
if(_flashStateEnabledErrorNameMatchingRegex.test(event.name)){_extend(event,{version:_flashState.version});}}
if(event.type==="copy"){event.clipboardData={setData:ZeroClipboard.setData,clearData:ZeroClipboard.clearData};}
if(event.type==="aftercopy"){event=_mapClipResultsFromFlash(event,_clipDataFormatMap);}
if(event.target&&!event.relatedTarget){event.relatedTarget=_getRelatedTarget(event.target);}
return _addMouseData(event);};var _getRelatedTarget=function(targetEl){var relatedTargetId=targetEl&&targetEl.getAttribute&&targetEl.getAttribute("data-clipboard-target");return relatedTargetId?_document.getElementById(relatedTargetId):null;};var _addMouseData=function(event){if(event&&/^_(?:click|mouse(?:over|out|down|up|move))$/.test(event.type)){var srcElement=event.target;var fromElement=event.type==="_mouseover"&&event.relatedTarget?event.relatedTarget:undefined;var toElement=event.type==="_mouseout"&&event.relatedTarget?event.relatedTarget:undefined;var pos=_getElementPosition(srcElement);var screenLeft=_window.screenLeft||_window.screenX||0;var screenTop=_window.screenTop||_window.screenY||0;var scrollLeft=_document.body.scrollLeft+_document.documentElement.scrollLeft;var scrollTop=_document.body.scrollTop+_document.documentElement.scrollTop;var pageX=pos.left+(typeof event._stageX==="number"?event._stageX:0);var pageY=pos.top+(typeof event._stageY==="number"?event._stageY:0);var clientX=pageX-scrollLeft;var clientY=pageY-scrollTop;var screenX=screenLeft+clientX;var screenY=screenTop+clientY;var moveX=typeof event.movementX==="number"?event.movementX:0;var moveY=typeof event.movementY==="number"?event.movementY:0;delete event._stageX;delete event._stageY;_extend(event,{srcElement:srcElement,fromElement:fromElement,toElement:toElement,screenX:screenX,screenY:screenY,pageX:pageX,pageY:pageY,clientX:clientX,clientY:clientY,x:clientX,y:clientY,movementX:moveX,movementY:moveY,offsetX:0,offsetY:0,layerX:0,layerY:0});}
return event;};var _shouldPerformAsync=function(event){var eventType=event&&typeof event.type==="string"&&event.type||"";return!/^(?:(?:before)?copy|destroy)$/.test(eventType);};var _dispatchCallback=function(func,context,args,async){if(async){_setTimeout(function(){func.apply(context,args);},0);}else{func.apply(context,args);}};var _dispatchCallbacks=function(event){if(!(typeof event==="object"&&event&&event.type)){return;}
var async=_shouldPerformAsync(event);var wildcardTypeHandlers=_handlers["*"]||[];var specificTypeHandlers=_handlers[event.type]||[];var handlers=wildcardTypeHandlers.concat(specificTypeHandlers);if(handlers&&handlers.length){var i,len,func,context,eventCopy,originalContext=this;for(i=0,len=handlers.length;i<len;i++){func=handlers[i];context=originalContext;if(typeof func==="string"&&typeof _window[func]==="function"){func=_window[func];}
if(typeof func==="object"&&func&&typeof func.handleEvent==="function"){context=func;func=func.handleEvent;}
if(typeof func==="function"){eventCopy=_extend({},event);_dispatchCallback(func,context,[eventCopy],async);}}}
return this;};var _getSandboxStatusFromErrorEvent=function(event){var isSandboxed=null;if(_pageIsFramed===false||event&&event.type==="error"&&event.name&&_errorsThatOnlyOccurAfterFlashLoads.indexOf(event.name)!==-1){isSandboxed=false;}
return isSandboxed;};var _preprocessEvent=function(event){var element=event.target||_currentElement||null;var sourceIsSwf=event._source==="swf";delete event._source;switch(event.type){case"error":var isSandboxed=event.name==="flash-sandboxed"||_getSandboxStatusFromErrorEvent(event);if(typeof isSandboxed==="boolean"){_flashState.sandboxed=isSandboxed;}
if(_flashStateErrorNames.indexOf(event.name)!==-1){_extend(_flashState,{disabled:event.name==="flash-disabled",outdated:event.name==="flash-outdated",unavailable:event.name==="flash-unavailable",degraded:event.name==="flash-degraded",deactivated:event.name==="flash-deactivated",overdue:event.name==="flash-overdue",ready:false});}else if(event.name==="version-mismatch"){_zcSwfVersion=event.swfVersion;_extend(_flashState,{disabled:false,outdated:false,unavailable:false,degraded:false,deactivated:false,overdue:false,ready:false});}
_clearTimeoutsAndPolling();break;case"ready":_zcSwfVersion=event.swfVersion;var wasDeactivated=_flashState.deactivated===true;_extend(_flashState,{disabled:false,outdated:false,sandboxed:false,unavailable:false,degraded:false,deactivated:false,overdue:wasDeactivated,ready:!wasDeactivated});_clearTimeoutsAndPolling();break;case"beforecopy":_copyTarget=element;break;case"copy":var textContent,htmlContent,targetEl=event.relatedTarget;if(!(_clipData["text/html"]||_clipData["text/plain"])&&targetEl&&(htmlContent=targetEl.value||targetEl.outerHTML||targetEl.innerHTML)&&(textContent=targetEl.value||targetEl.textContent||targetEl.innerText)){event.clipboardData.clearData();event.clipboardData.setData("text/plain",textContent);if(htmlContent!==textContent){event.clipboardData.setData("text/html",htmlContent);}}else if(!_clipData["text/plain"]&&event.target&&(textContent=event.target.getAttribute("data-clipboard-text"))){event.clipboardData.clearData();event.clipboardData.setData("text/plain",textContent);}
break;case"aftercopy":_queueEmitClipboardErrors(event);ZeroClipboard.clearData();if(element&&element!==_safeActiveElement()&&element.focus){element.focus();}
break;case"_mouseover":ZeroClipboard.focus(element);if(_globalConfig.bubbleEvents===true&&sourceIsSwf){if(element&&element!==event.relatedTarget&&!_containedBy(event.relatedTarget,element)){_fireMouseEvent(_extend({},event,{type:"mouseenter",bubbles:false,cancelable:false}));}
_fireMouseEvent(_extend({},event,{type:"mouseover"}));}
break;case"_mouseout":ZeroClipboard.blur();if(_globalConfig.bubbleEvents===true&&sourceIsSwf){if(element&&element!==event.relatedTarget&&!_containedBy(event.relatedTarget,element)){_fireMouseEvent(_extend({},event,{type:"mouseleave",bubbles:false,cancelable:false}));}
_fireMouseEvent(_extend({},event,{type:"mouseout"}));}
break;case"_mousedown":_addClass(element,_globalConfig.activeClass);if(_globalConfig.bubbleEvents===true&&sourceIsSwf){_fireMouseEvent(_extend({},event,{type:event.type.slice(1)}));}
break;case"_mouseup":_removeClass(element,_globalConfig.activeClass);if(_globalConfig.bubbleEvents===true&&sourceIsSwf){_fireMouseEvent(_extend({},event,{type:event.type.slice(1)}));}
break;case"_click":_copyTarget=null;if(_globalConfig.bubbleEvents===true&&sourceIsSwf){_fireMouseEvent(_extend({},event,{type:event.type.slice(1)}));}
break;case"_mousemove":if(_globalConfig.bubbleEvents===true&&sourceIsSwf){_fireMouseEvent(_extend({},event,{type:event.type.slice(1)}));}
break;}
if(/^_(?:click|mouse(?:over|out|down|up|move))$/.test(event.type)){return true;}};var _queueEmitClipboardErrors=function(aftercopyEvent){if(aftercopyEvent.errors&&aftercopyEvent.errors.length>0){var errorEvent=_deepCopy(aftercopyEvent);_extend(errorEvent,{type:"error",name:"clipboard-error"});delete errorEvent.success;_setTimeout(function(){ZeroClipboard.emit(errorEvent);},0);}};var _fireMouseEvent=function(event){if(!(event&&typeof event.type==="string"&&event)){return;}
var e,target=event.target||null,doc=target&&target.ownerDocument||_document,defaults={view:doc.defaultView||_window,canBubble:true,cancelable:true,detail:event.type==="click"?1:0,button:typeof event.which==="number"?event.which-1:typeof event.button==="number"?event.button:doc.createEvent?0:1},args=_extend(defaults,event);if(!target){return;}
if(doc.createEvent&&target.dispatchEvent){args=[args.type,args.canBubble,args.cancelable,args.view,args.detail,args.screenX,args.screenY,args.clientX,args.clientY,args.ctrlKey,args.altKey,args.shiftKey,args.metaKey,args.button,args.relatedTarget];e=doc.createEvent("MouseEvents");if(e.initMouseEvent){e.initMouseEvent.apply(e,args);e._source="js";target.dispatchEvent(e);}}};var _watchForSwfFallbackContent=function(){var maxWait=_globalConfig.flashLoadTimeout;if(typeof maxWait==="number"&&maxWait>=0){var pollWait=Math.min(1e3,maxWait/10);var fallbackContentId=_globalConfig.swfObjectId+"_fallbackContent";_swfFallbackCheckInterval=_setInterval(function(){var el=_document.getElementById(fallbackContentId);if(_isElementVisible(el)){_clearTimeoutsAndPolling();_flashState.deactivated=null;ZeroClipboard.emit({type:"error",name:"swf-not-found"});}},pollWait);}};var _createHtmlBridge=function(){var container=_document.createElement("div");container.id=_globalConfig.containerId;container.className=_globalConfig.containerClass;container.style.position="absolute";container.style.left="0px";container.style.top="-9999px";container.style.width="1px";container.style.height="1px";container.style.zIndex=""+_getSafeZIndex(_globalConfig.zIndex);return container;};var _getHtmlBridge=function(flashBridge){var htmlBridge=flashBridge&&flashBridge.parentNode;while(htmlBridge&&htmlBridge.nodeName==="OBJECT"&&htmlBridge.parentNode){htmlBridge=htmlBridge.parentNode;}
return htmlBridge||null;};var _embedSwf=function(){var len,flashBridge=_flashState.bridge,container=_getHtmlBridge(flashBridge);if(!flashBridge){var allowScriptAccess=_determineScriptAccess(_window.location.host,_globalConfig);var allowNetworking=allowScriptAccess==="never"?"none":"all";var flashvars=_vars(_extend({jsVersion:ZeroClipboard.version},_globalConfig));var swfUrl=_globalConfig.swfPath+_cacheBust(_globalConfig.swfPath,_globalConfig);container=_createHtmlBridge();var divToBeReplaced=_document.createElement("div");container.appendChild(divToBeReplaced);_document.body.appendChild(container);var tmpDiv=_document.createElement("div");var usingActiveX=_flashState.pluginType==="activex";tmpDiv.innerHTML='<object id="'+_globalConfig.swfObjectId+'" name="'+_globalConfig.swfObjectId+'" '+'width="100%" height="100%" '+(usingActiveX?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"':'type="application/x-shockwave-flash" data="'+swfUrl+'"')+">"+(usingActiveX?'<param name="movie" value="'+swfUrl+'"/>':"")+'<param name="allowScriptAccess" value="'+allowScriptAccess+'"/>'+'<param name="allowNetworking" value="'+allowNetworking+'"/>'+'<param name="menu" value="false"/>'+'<param name="wmode" value="transparent"/>'+'<param name="flashvars" value="'+flashvars+'"/>'+'<div id="'+_globalConfig.swfObjectId+'_fallbackContent">&nbsp;</div>'+"</object>";flashBridge=tmpDiv.firstChild;tmpDiv=null;_unwrap(flashBridge).ZeroClipboard=ZeroClipboard;container.replaceChild(flashBridge,divToBeReplaced);_watchForSwfFallbackContent();}
if(!flashBridge){flashBridge=_document[_globalConfig.swfObjectId];if(flashBridge&&(len=flashBridge.length)){flashBridge=flashBridge[len-1];}
if(!flashBridge&&container){flashBridge=container.firstChild;}}
_flashState.bridge=flashBridge||null;return flashBridge;};var _unembedSwf=function(){var flashBridge=_flashState.bridge;if(flashBridge){var htmlBridge=_getHtmlBridge(flashBridge);if(htmlBridge){if(_flashState.pluginType==="activex"&&"readyState"in flashBridge){flashBridge.style.display="none";(function removeSwfFromIE(){if(flashBridge.readyState===4){for(var prop in flashBridge){if(typeof flashBridge[prop]==="function"){flashBridge[prop]=null;}}
if(flashBridge.parentNode){flashBridge.parentNode.removeChild(flashBridge);}
if(htmlBridge.parentNode){htmlBridge.parentNode.removeChild(htmlBridge);}}else{_setTimeout(removeSwfFromIE,10);}})();}else{if(flashBridge.parentNode){flashBridge.parentNode.removeChild(flashBridge);}
if(htmlBridge.parentNode){htmlBridge.parentNode.removeChild(htmlBridge);}}}
_clearTimeoutsAndPolling();_flashState.ready=null;_flashState.bridge=null;_flashState.deactivated=null;_zcSwfVersion=undefined;}};var _mapClipDataToFlash=function(clipData){var newClipData={},formatMap={};if(!(typeof clipData==="object"&&clipData)){return;}
for(var dataFormat in clipData){if(dataFormat&&_hasOwn.call(clipData,dataFormat)&&typeof clipData[dataFormat]==="string"&&clipData[dataFormat]){switch(dataFormat.toLowerCase()){case"text/plain":case"text":case"air:text":case"flash:text":newClipData.text=clipData[dataFormat];formatMap.text=dataFormat;break;case"text/html":case"html":case"air:html":case"flash:html":newClipData.html=clipData[dataFormat];formatMap.html=dataFormat;break;case"application/rtf":case"text/rtf":case"rtf":case"richtext":case"air:rtf":case"flash:rtf":newClipData.rtf=clipData[dataFormat];formatMap.rtf=dataFormat;break;default:break;}}}
return{data:newClipData,formatMap:formatMap};};var _mapClipResultsFromFlash=function(clipResults,formatMap){if(!(typeof clipResults==="object"&&clipResults&&typeof formatMap==="object"&&formatMap)){return clipResults;}
var newResults={};for(var prop in clipResults){if(_hasOwn.call(clipResults,prop)){if(prop==="errors"){newResults[prop]=clipResults[prop]?clipResults[prop].slice():[];for(var i=0,len=newResults[prop].length;i<len;i++){newResults[prop][i].format=formatMap[newResults[prop][i].format];}}else if(prop!=="success"&&prop!=="data"){newResults[prop]=clipResults[prop];}else{newResults[prop]={};var tmpHash=clipResults[prop];for(var dataFormat in tmpHash){if(dataFormat&&_hasOwn.call(tmpHash,dataFormat)&&_hasOwn.call(formatMap,dataFormat)){newResults[prop][formatMap[dataFormat]]=tmpHash[dataFormat];}}}}}
return newResults;};var _cacheBust=function(path,options){var cacheBust=options==null||options&&options.cacheBust===true;if(cacheBust){return(path.indexOf("?")===-1?"?":"&")+"noCache="+_now();}else{return"";}};var _vars=function(options){var i,len,domain,domains,str="",trustedOriginsExpanded=[];if(options.trustedDomains){if(typeof options.trustedDomains==="string"){domains=[options.trustedDomains];}else if(typeof options.trustedDomains==="object"&&"length"in options.trustedDomains){domains=options.trustedDomains;}}
if(domains&&domains.length){for(i=0,len=domains.length;i<len;i++){if(_hasOwn.call(domains,i)&&domains[i]&&typeof domains[i]==="string"){domain=_extractDomain(domains[i]);if(!domain){continue;}
if(domain==="*"){trustedOriginsExpanded.length=0;trustedOriginsExpanded.push(domain);break;}
trustedOriginsExpanded.push.apply(trustedOriginsExpanded,[domain,"//"+domain,_window.location.protocol+"//"+domain]);}}}
if(trustedOriginsExpanded.length){str+="trustedOrigins="+_encodeURIComponent(trustedOriginsExpanded.join(","));}
if(options.forceEnhancedClipboard===true){str+=(str?"&":"")+"forceEnhancedClipboard=true";}
if(typeof options.swfObjectId==="string"&&options.swfObjectId){str+=(str?"&":"")+"swfObjectId="+_encodeURIComponent(options.swfObjectId);}
if(typeof options.jsVersion==="string"&&options.jsVersion){str+=(str?"&":"")+"jsVersion="+_encodeURIComponent(options.jsVersion);}
return str;};var _extractDomain=function(originOrUrl){if(originOrUrl==null||originOrUrl===""){return null;}
originOrUrl=originOrUrl.replace(/^\s+|\s+$/g,"");if(originOrUrl===""){return null;}
var protocolIndex=originOrUrl.indexOf("//");originOrUrl=protocolIndex===-1?originOrUrl:originOrUrl.slice(protocolIndex+2);var pathIndex=originOrUrl.indexOf("/");originOrUrl=pathIndex===-1?originOrUrl:protocolIndex===-1||pathIndex===0?null:originOrUrl.slice(0,pathIndex);if(originOrUrl&&originOrUrl.slice(-4).toLowerCase()===".swf"){return null;}
return originOrUrl||null;};var _determineScriptAccess=function(){var _extractAllDomains=function(origins){var i,len,tmp,resultsArray=[];if(typeof origins==="string"){origins=[origins];}
if(!(typeof origins==="object"&&origins&&typeof origins.length==="number")){return resultsArray;}
for(i=0,len=origins.length;i<len;i++){if(_hasOwn.call(origins,i)&&(tmp=_extractDomain(origins[i]))){if(tmp==="*"){resultsArray.length=0;resultsArray.push("*");break;}
if(resultsArray.indexOf(tmp)===-1){resultsArray.push(tmp);}}}
return resultsArray;};return function(currentDomain,configOptions){var swfDomain=_extractDomain(configOptions.swfPath);if(swfDomain===null){swfDomain=currentDomain;}
var trustedDomains=_extractAllDomains(configOptions.trustedDomains);var len=trustedDomains.length;if(len>0){if(len===1&&trustedDomains[0]==="*"){return"always";}
if(trustedDomains.indexOf(currentDomain)!==-1){if(len===1&&currentDomain===swfDomain){return"sameDomain";}
return"always";}}
return"never";};}();var _safeActiveElement=function(){try{return _document.activeElement;}catch(err){return null;}};var _addClass=function(element,value){var c,cl,className,classNames=[];if(typeof value==="string"&&value){classNames=value.split(/\s+/);}
if(element&&element.nodeType===1&&classNames.length>0){if(element.classList){for(c=0,cl=classNames.length;c<cl;c++){element.classList.add(classNames[c]);}}else if(element.hasOwnProperty("className")){className=" "+element.className+" ";for(c=0,cl=classNames.length;c<cl;c++){if(className.indexOf(" "+classNames[c]+" ")===-1){className+=classNames[c]+" ";}}
element.className=className.replace(/^\s+|\s+$/g,"");}}
return element;};var _removeClass=function(element,value){var c,cl,className,classNames=[];if(typeof value==="string"&&value){classNames=value.split(/\s+/);}
if(element&&element.nodeType===1&&classNames.length>0){if(element.classList&&element.classList.length>0){for(c=0,cl=classNames.length;c<cl;c++){element.classList.remove(classNames[c]);}}else if(element.className){className=(" "+element.className+" ").replace(/[\r\n\t]/g," ");for(c=0,cl=classNames.length;c<cl;c++){className=className.replace(" "+classNames[c]+" "," ");}
element.className=className.replace(/^\s+|\s+$/g,"");}}
return element;};var _getStyle=function(el,prop){var value=_getComputedStyle(el,null).getPropertyValue(prop);if(prop==="cursor"){if(!value||value==="auto"){if(el.nodeName==="A"){return"pointer";}}}
return value;};var _getElementPosition=function(el){var pos={left:0,top:0,width:0,height:0};if(el.getBoundingClientRect){var elRect=el.getBoundingClientRect();var pageXOffset=_window.pageXOffset;var pageYOffset=_window.pageYOffset;var leftBorderWidth=_document.documentElement.clientLeft||0;var topBorderWidth=_document.documentElement.clientTop||0;var leftBodyOffset=0;var topBodyOffset=0;if(_getStyle(_document.body,"position")==="relative"){var bodyRect=_document.body.getBoundingClientRect();var htmlRect=_document.documentElement.getBoundingClientRect();leftBodyOffset=bodyRect.left-htmlRect.left||0;topBodyOffset=bodyRect.top-htmlRect.top||0;}
pos.left=elRect.left+pageXOffset-leftBorderWidth-leftBodyOffset;pos.top=elRect.top+pageYOffset-topBorderWidth-topBodyOffset;pos.width="width"in elRect?elRect.width:elRect.right-elRect.left;pos.height="height"in elRect?elRect.height:elRect.bottom-elRect.top;}
return pos;};var _isElementVisible=function(el){if(!el){return false;}
var styles=_getComputedStyle(el,null);var hasCssHeight=_parseFloat(styles.height)>0;var hasCssWidth=_parseFloat(styles.width)>0;var hasCssTop=_parseFloat(styles.top)>=0;var hasCssLeft=_parseFloat(styles.left)>=0;var cssKnows=hasCssHeight&&hasCssWidth&&hasCssTop&&hasCssLeft;var rect=cssKnows?null:_getElementPosition(el);var isVisible=styles.display!=="none"&&styles.visibility!=="collapse"&&(cssKnows||!!rect&&(hasCssHeight||rect.height>0)&&(hasCssWidth||rect.width>0)&&(hasCssTop||rect.top>=0)&&(hasCssLeft||rect.left>=0));return isVisible;};var _clearTimeoutsAndPolling=function(){_clearTimeout(_flashCheckTimeout);_flashCheckTimeout=0;_clearInterval(_swfFallbackCheckInterval);_swfFallbackCheckInterval=0;};var _reposition=function(){var htmlBridge;if(_currentElement&&(htmlBridge=_getHtmlBridge(_flashState.bridge))){var pos=_getElementPosition(_currentElement);_extend(htmlBridge.style,{width:pos.width+"px",height:pos.height+"px",top:pos.top+"px",left:pos.left+"px",zIndex:""+_getSafeZIndex(_globalConfig.zIndex)});}};var _setHandCursor=function(enabled){if(_flashState.ready===true){if(_flashState.bridge&&typeof _flashState.bridge.setHandCursor==="function"){_flashState.bridge.setHandCursor(enabled);}else{_flashState.ready=false;}}};var _getSafeZIndex=function(val){if(/^(?:auto|inherit)$/.test(val)){return val;}
var zIndex;if(typeof val==="number"&&!_isNaN(val)){zIndex=val;}else if(typeof val==="string"){zIndex=_getSafeZIndex(_parseInt(val,10));}
return typeof zIndex==="number"?zIndex:"auto";};var _detectSandbox=function(doNotReassessFlashSupport){var effectiveScriptOrigin,frame,frameError,previousState=_flashState.sandboxed,isSandboxed=null;doNotReassessFlashSupport=doNotReassessFlashSupport===true;if(_pageIsFramed===false){isSandboxed=false;}else{try{frame=window.frameElement||null;}catch(e){frameError={name:e.name,message:e.message};}
if(frame&&frame.nodeType===1&&frame.nodeName==="IFRAME"){try{isSandboxed=frame.hasAttribute("sandbox");}catch(e){isSandboxed=null;}}else{try{effectiveScriptOrigin=document.domain||null;}catch(e){effectiveScriptOrigin=null;}
if(effectiveScriptOrigin===null||frameError&&frameError.name==="SecurityError"&&/(^|[\s\(\[@])sandbox(es|ed|ing|[\s\.,!\)\]@]|$)/.test(frameError.message.toLowerCase())){isSandboxed=true;}}}
_flashState.sandboxed=isSandboxed;if(previousState!==isSandboxed&&!doNotReassessFlashSupport){_detectFlashSupport(_ActiveXObject);}
return isSandboxed;};var _detectFlashSupport=function(ActiveXObject){var plugin,ax,mimeType,hasFlash=false,isActiveX=false,isPPAPI=false,flashVersion="";function parseFlashVersion(desc){var matches=desc.match(/[\d]+/g);matches.length=3;return matches.join(".");}
function isPepperFlash(flashPlayerFileName){return!!flashPlayerFileName&&(flashPlayerFileName=flashPlayerFileName.toLowerCase())&&(/^(pepflashplayer\.dll|libpepflashplayer\.so|pepperflashplayer\.plugin)$/.test(flashPlayerFileName)||flashPlayerFileName.slice(-13)==="chrome.plugin");}
function inspectPlugin(plugin){if(plugin){hasFlash=true;if(plugin.version){flashVersion=parseFlashVersion(plugin.version);}
if(!flashVersion&&plugin.description){flashVersion=parseFlashVersion(plugin.description);}
if(plugin.filename){isPPAPI=isPepperFlash(plugin.filename);}}}
if(_navigator.plugins&&_navigator.plugins.length){plugin=_navigator.plugins["Shockwave Flash"];inspectPlugin(plugin);if(_navigator.plugins["Shockwave Flash 2.0"]){hasFlash=true;flashVersion="2.0.0.11";}}else if(_navigator.mimeTypes&&_navigator.mimeTypes.length){mimeType=_navigator.mimeTypes["application/x-shockwave-flash"];plugin=mimeType&&mimeType.enabledPlugin;inspectPlugin(plugin);}else if(typeof ActiveXObject!=="undefined"){isActiveX=true;try{ax=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");hasFlash=true;flashVersion=parseFlashVersion(ax.GetVariable("$version"));}catch(e1){try{ax=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");hasFlash=true;flashVersion="6.0.21";}catch(e2){try{ax=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");hasFlash=true;flashVersion=parseFlashVersion(ax.GetVariable("$version"));}catch(e3){isActiveX=false;}}}}
_flashState.disabled=hasFlash!==true;_flashState.outdated=flashVersion&&_parseFloat(flashVersion)<_parseFloat(_minimumFlashVersion);_flashState.version=flashVersion||"0.0.0";_flashState.pluginType=isPPAPI?"pepper":isActiveX?"activex":hasFlash?"netscape":"unknown";};_detectFlashSupport(_ActiveXObject);_detectSandbox(true);var ZeroClipboard=function(){if(!(this instanceof ZeroClipboard)){return new ZeroClipboard();}
if(typeof ZeroClipboard._createClient==="function"){ZeroClipboard._createClient.apply(this,_args(arguments));}};_defineProperty(ZeroClipboard,"version",{value:"2.2.0",writable:false,configurable:true,enumerable:true});ZeroClipboard.config=function(){return _config.apply(this,_args(arguments));};ZeroClipboard.state=function(){return _state.apply(this,_args(arguments));};ZeroClipboard.isFlashUnusable=function(){return _isFlashUnusable.apply(this,_args(arguments));};ZeroClipboard.on=function(){return _on.apply(this,_args(arguments));};ZeroClipboard.off=function(){return _off.apply(this,_args(arguments));};ZeroClipboard.handlers=function(){return _listeners.apply(this,_args(arguments));};ZeroClipboard.emit=function(){return _emit.apply(this,_args(arguments));};ZeroClipboard.create=function(){return _create.apply(this,_args(arguments));};ZeroClipboard.destroy=function(){return _destroy.apply(this,_args(arguments));};ZeroClipboard.setData=function(){return _setData.apply(this,_args(arguments));};ZeroClipboard.clearData=function(){return _clearData.apply(this,_args(arguments));};ZeroClipboard.getData=function(){return _getData.apply(this,_args(arguments));};ZeroClipboard.focus=ZeroClipboard.activate=function(){return _focus.apply(this,_args(arguments));};ZeroClipboard.blur=ZeroClipboard.deactivate=function(){return _blur.apply(this,_args(arguments));};ZeroClipboard.activeElement=function(){return _activeElement.apply(this,_args(arguments));};var _clientIdCounter=0;var _clientMeta={};var _elementIdCounter=0;var _elementMeta={};var _mouseHandlers={};_extend(_globalConfig,{autoActivate:true});var _clientConstructor=function(elements){var client=this;client.id=""+_clientIdCounter++;_clientMeta[client.id]={instance:client,elements:[],handlers:{}};if(elements){client.clip(elements);}
ZeroClipboard.on("*",function(event){return client.emit(event);});ZeroClipboard.on("destroy",function(){client.destroy();});ZeroClipboard.create();};var _clientOn=function(eventType,listener){var i,len,events,added={},meta=_clientMeta[this.id],handlers=meta&&meta.handlers;if(!meta){throw new Error("Attempted to add new listener(s) to a destroyed ZeroClipboard client instance");}
if(typeof eventType==="string"&&eventType){events=eventType.toLowerCase().split(/\s+/);}else if(typeof eventType==="object"&&eventType&&typeof listener==="undefined"){for(i in eventType){if(_hasOwn.call(eventType,i)&&typeof i==="string"&&i&&typeof eventType[i]==="function"){this.on(i,eventType[i]);}}}
if(events&&events.length){for(i=0,len=events.length;i<len;i++){eventType=events[i].replace(/^on/,"");added[eventType]=true;if(!handlers[eventType]){handlers[eventType]=[];}
handlers[eventType].push(listener);}
if(added.ready&&_flashState.ready){this.emit({type:"ready",client:this});}
if(added.error){for(i=0,len=_flashStateErrorNames.length;i<len;i++){if(_flashState[_flashStateErrorNames[i].replace(/^flash-/,"")]){this.emit({type:"error",name:_flashStateErrorNames[i],client:this});break;}}
if(_zcSwfVersion!==undefined&&ZeroClipboard.version!==_zcSwfVersion){this.emit({type:"error",name:"version-mismatch",jsVersion:ZeroClipboard.version,swfVersion:_zcSwfVersion});}}}
return this;};var _clientOff=function(eventType,listener){var i,len,foundIndex,events,perEventHandlers,meta=_clientMeta[this.id],handlers=meta&&meta.handlers;if(!handlers){return this;}
if(arguments.length===0){events=_keys(handlers);}else if(typeof eventType==="string"&&eventType){events=eventType.split(/\s+/);}else if(typeof eventType==="object"&&eventType&&typeof listener==="undefined"){for(i in eventType){if(_hasOwn.call(eventType,i)&&typeof i==="string"&&i&&typeof eventType[i]==="function"){this.off(i,eventType[i]);}}}
if(events&&events.length){for(i=0,len=events.length;i<len;i++){eventType=events[i].toLowerCase().replace(/^on/,"");perEventHandlers=handlers[eventType];if(perEventHandlers&&perEventHandlers.length){if(listener){foundIndex=perEventHandlers.indexOf(listener);while(foundIndex!==-1){perEventHandlers.splice(foundIndex,1);foundIndex=perEventHandlers.indexOf(listener,foundIndex);}}else{perEventHandlers.length=0;}}}}
return this;};var _clientListeners=function(eventType){var copy=null,handlers=_clientMeta[this.id]&&_clientMeta[this.id].handlers;if(handlers){if(typeof eventType==="string"&&eventType){copy=handlers[eventType]?handlers[eventType].slice(0):[];}else{copy=_deepCopy(handlers);}}
return copy;};var _clientEmit=function(event){if(_clientShouldEmit.call(this,event)){if(typeof event==="object"&&event&&typeof event.type==="string"&&event.type){event=_extend({},event);}
var eventCopy=_extend({},_createEvent(event),{client:this});_clientDispatchCallbacks.call(this,eventCopy);}
return this;};var _clientClip=function(elements){if(!_clientMeta[this.id]){throw new Error("Attempted to clip element(s) to a destroyed ZeroClipboard client instance");}
elements=_prepClip(elements);for(var i=0;i<elements.length;i++){if(_hasOwn.call(elements,i)&&elements[i]&&elements[i].nodeType===1){if(!elements[i].zcClippingId){elements[i].zcClippingId="zcClippingId_"+_elementIdCounter++;_elementMeta[elements[i].zcClippingId]=[this.id];if(_globalConfig.autoActivate===true){_addMouseHandlers(elements[i]);}}else if(_elementMeta[elements[i].zcClippingId].indexOf(this.id)===-1){_elementMeta[elements[i].zcClippingId].push(this.id);}
var clippedElements=_clientMeta[this.id]&&_clientMeta[this.id].elements;if(clippedElements.indexOf(elements[i])===-1){clippedElements.push(elements[i]);}}}
return this;};var _clientUnclip=function(elements){var meta=_clientMeta[this.id];if(!meta){return this;}
var clippedElements=meta.elements;var arrayIndex;if(typeof elements==="undefined"){elements=clippedElements.slice(0);}else{elements=_prepClip(elements);}
for(var i=elements.length;i--;){if(_hasOwn.call(elements,i)&&elements[i]&&elements[i].nodeType===1){arrayIndex=0;while((arrayIndex=clippedElements.indexOf(elements[i],arrayIndex))!==-1){clippedElements.splice(arrayIndex,1);}
var clientIds=_elementMeta[elements[i].zcClippingId];if(clientIds){arrayIndex=0;while((arrayIndex=clientIds.indexOf(this.id,arrayIndex))!==-1){clientIds.splice(arrayIndex,1);}
if(clientIds.length===0){if(_globalConfig.autoActivate===true){_removeMouseHandlers(elements[i]);}
delete elements[i].zcClippingId;}}}}
return this;};var _clientElements=function(){var meta=_clientMeta[this.id];return meta&&meta.elements?meta.elements.slice(0):[];};var _clientDestroy=function(){if(!_clientMeta[this.id]){return;}
this.unclip();this.off();delete _clientMeta[this.id];};var _clientShouldEmit=function(event){if(!(event&&event.type)){return false;}
if(event.client&&event.client!==this){return false;}
var meta=_clientMeta[this.id];var clippedEls=meta&&meta.elements;var hasClippedEls=!!clippedEls&&clippedEls.length>0;var goodTarget=!event.target||hasClippedEls&&clippedEls.indexOf(event.target)!==-1;var goodRelTarget=event.relatedTarget&&hasClippedEls&&clippedEls.indexOf(event.relatedTarget)!==-1;var goodClient=event.client&&event.client===this;if(!meta||!(goodTarget||goodRelTarget||goodClient)){return false;}
return true;};var _clientDispatchCallbacks=function(event){var meta=_clientMeta[this.id];if(!(typeof event==="object"&&event&&event.type&&meta)){return;}
var async=_shouldPerformAsync(event);var wildcardTypeHandlers=meta&&meta.handlers["*"]||[];var specificTypeHandlers=meta&&meta.handlers[event.type]||[];var handlers=wildcardTypeHandlers.concat(specificTypeHandlers);if(handlers&&handlers.length){var i,len,func,context,eventCopy,originalContext=this;for(i=0,len=handlers.length;i<len;i++){func=handlers[i];context=originalContext;if(typeof func==="string"&&typeof _window[func]==="function"){func=_window[func];}
if(typeof func==="object"&&func&&typeof func.handleEvent==="function"){context=func;func=func.handleEvent;}
if(typeof func==="function"){eventCopy=_extend({},event);_dispatchCallback(func,context,[eventCopy],async);}}}};var _prepClip=function(elements){if(typeof elements==="string"){elements=[];}
return typeof elements.length!=="number"?[elements]:elements;};var _addMouseHandlers=function(element){if(!(element&&element.nodeType===1)){return;}
var _suppressMouseEvents=function(event){if(!(event||(event=_window.event))){return;}
if(event._source!=="js"){event.stopImmediatePropagation();event.preventDefault();}
delete event._source;};var _elementMouseOver=function(event){if(!(event||(event=_window.event))){return;}
_suppressMouseEvents(event);ZeroClipboard.focus(element);};element.addEventListener("mouseover",_elementMouseOver,false);element.addEventListener("mouseout",_suppressMouseEvents,false);element.addEventListener("mouseenter",_suppressMouseEvents,false);element.addEventListener("mouseleave",_suppressMouseEvents,false);element.addEventListener("mousemove",_suppressMouseEvents,false);_mouseHandlers[element.zcClippingId]={mouseover:_elementMouseOver,mouseout:_suppressMouseEvents,mouseenter:_suppressMouseEvents,mouseleave:_suppressMouseEvents,mousemove:_suppressMouseEvents};};var _removeMouseHandlers=function(element){if(!(element&&element.nodeType===1)){return;}
var mouseHandlers=_mouseHandlers[element.zcClippingId];if(!(typeof mouseHandlers==="object"&&mouseHandlers)){return;}
var key,val,mouseEvents=["move","leave","enter","out","over"];for(var i=0,len=mouseEvents.length;i<len;i++){key="mouse"+mouseEvents[i];val=mouseHandlers[key];if(typeof val==="function"){element.removeEventListener(key,val,false);}}
delete _mouseHandlers[element.zcClippingId];};ZeroClipboard._createClient=function(){_clientConstructor.apply(this,_args(arguments));};ZeroClipboard.prototype.on=function(){return _clientOn.apply(this,_args(arguments));};ZeroClipboard.prototype.off=function(){return _clientOff.apply(this,_args(arguments));};ZeroClipboard.prototype.handlers=function(){return _clientListeners.apply(this,_args(arguments));};ZeroClipboard.prototype.emit=function(){return _clientEmit.apply(this,_args(arguments));};ZeroClipboard.prototype.clip=function(){return _clientClip.apply(this,_args(arguments));};ZeroClipboard.prototype.unclip=function(){return _clientUnclip.apply(this,_args(arguments));};ZeroClipboard.prototype.elements=function(){return _clientElements.apply(this,_args(arguments));};ZeroClipboard.prototype.destroy=function(){return _clientDestroy.apply(this,_args(arguments));};ZeroClipboard.prototype.setText=function(text){if(!_clientMeta[this.id]){throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");}
ZeroClipboard.setData("text/plain",text);return this;};ZeroClipboard.prototype.setHtml=function(html){if(!_clientMeta[this.id]){throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");}
ZeroClipboard.setData("text/html",html);return this;};ZeroClipboard.prototype.setRichText=function(richText){if(!_clientMeta[this.id]){throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");}
ZeroClipboard.setData("application/rtf",richText);return this;};ZeroClipboard.prototype.setData=function(){if(!_clientMeta[this.id]){throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");}
ZeroClipboard.setData.apply(this,_args(arguments));return this;};ZeroClipboard.prototype.clearData=function(){if(!_clientMeta[this.id]){throw new Error("Attempted to clear pending clipboard data from a destroyed ZeroClipboard client instance");}
ZeroClipboard.clearData.apply(this,_args(arguments));return this;};ZeroClipboard.prototype.getData=function(){if(!_clientMeta[this.id]){throw new Error("Attempted to get pending clipboard data from a destroyed ZeroClipboard client instance");}
return ZeroClipboard.getData.apply(this,_args(arguments));};if(typeof define==="function"&&define.amd){define(function(){return ZeroClipboard;});}else if(typeof module==="object"&&module&&typeof module.exports==="object"&&module.exports){module.exports=ZeroClipboard;}else{window.ZeroClipboard=ZeroClipboard;}})(function(){return this||window;}());window.Handsontable={version:'0.19.0',buildDate:'Fri Oct 02 2015 12:37:12 GMT+0200 (CEST)',};(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.Handsontable=f()}})(function(){var define,module,exports;return(function init(modules,cache,entry){(function outer(modules,cache,entry){var previousRequire=typeof require=="function"&&require;var globalNS=JSON.parse('{"zeroclipboard":"ZeroClipboard","moment":"moment","pikaday":"Pikaday"}')||{};function newRequire(name,jumped){if(!cache[name]){if(!modules[name]){var currentRequire=typeof require=="function"&&require;if(!jumped&&currentRequire)return currentRequire(name,true);if(previousRequire)return previousRequire(name,true);if(globalNS[name]&&typeof window[globalNS[name]]!=='undefined'){return window[globalNS[name]];}
var err=new Error('Cannot find module \''+name+'\'');err.code='MODULE_NOT_FOUND';throw err;}
var m=cache[name]={exports:{}};modules[name][0].call(m.exports,function(x){var id=modules[name][1][x];return newRequire(id?id:x);},m,m.exports,outer,modules,cache,entry);}
return cache[name].exports;}
for(var i=0;i<entry.length;i++)newRequire(entry[i]);return newRequire;})(modules,cache,entry);return function(){return Handsontable;};})
({1:[function(require,module,exports){"use strict";if(window.jQuery){(function(window,$,Handsontable){$.fn.handsontable=function(action){var i,ilen,args,output,userSettings,$this=this.first(),instance=$this.data('handsontable');if(typeof action!=='string'){userSettings=action||{};if(instance){instance.updateSettings(userSettings);}else{instance=new Handsontable.Core($this[0],userSettings);$this.data('handsontable',instance);instance.init();}
return $this;}else{args=[];if(arguments.length>1){for(i=1,ilen=arguments.length;i<ilen;i++){args.push(arguments[i]);}}
if(instance){if(typeof instance[action]!=='undefined'){output=instance[action].apply(instance,args);if(action==='destroy'){$this.removeData();}}else{throw new Error('Handsontable do not provide action: '+action);}}
return output;}};})(window,jQuery,Handsontable);}},{}],2:[function(require,module,exports){"use strict";Object.defineProperties(exports,{WalkontableBorder:{get:function(){return WalkontableBorder;}},__esModule:{value:true}});var $___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__,$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_event__,$___46__46__47__46__46__47__46__46__47_eventManager__,$__cell_47_coords__,$__overlay_47__95_base_46_js__;var $__0=($___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__=require("helpers/dom/element"),$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__||{default:$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__}),getComputedStyle=$__0.getComputedStyle,getTrimmingContainer=$__0.getTrimmingContainer,innerWidth=$__0.innerWidth,innerHeight=$__0.innerHeight,offset=$__0.offset,outerHeight=$__0.outerHeight,outerWidth=$__0.outerWidth;var stopImmediatePropagation=($___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_event__=require("helpers/dom/event"),$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_event__&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_event__.__esModule&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_event__||{default:$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_event__}).stopImmediatePropagation;var EventManager=($___46__46__47__46__46__47__46__46__47_eventManager__=require("eventManager"),$___46__46__47__46__46__47__46__46__47_eventManager__&&$___46__46__47__46__46__47__46__46__47_eventManager__.__esModule&&$___46__46__47__46__46__47__46__46__47_eventManager__||{default:$___46__46__47__46__46__47__46__46__47_eventManager__}).EventManager;var WalkontableCellCoords=($__cell_47_coords__=require("cell/coords"),$__cell_47_coords__&&$__cell_47_coords__.__esModule&&$__cell_47_coords__||{default:$__cell_47_coords__}).WalkontableCellCoords;var WalkontableOverlay=($__overlay_47__95_base_46_js__=require("overlay/_base.js"),$__overlay_47__95_base_46_js__&&$__overlay_47__95_base_46_js__.__esModule&&$__overlay_47__95_base_46_js__||{default:$__overlay_47__95_base_46_js__}).WalkontableOverlay;var WalkontableBorder=function WalkontableBorder(wotInstance,settings){if(!settings){return;}
this.eventManager=new EventManager(wotInstance);this.instance=wotInstance;this.wot=wotInstance;this.settings=settings;this.mouseDown=false;this.main=null;this.top=null;this.left=null;this.bottom=null;this.right=null;this.topStyle=null;this.leftStyle=null;this.bottomStyle=null;this.rightStyle=null;this.cornerDefaultStyle={width:'5px',height:'5px',borderWidth:'2px',borderStyle:'solid',borderColor:'#FFF'};this.corner=null;this.cornerStyle=null;this.createBorders(settings);this.registerListeners();};($traceurRuntime.createClass)(WalkontableBorder,{registerListeners:function(){var $__5=this;this.eventManager.addEventListener(document.body,'mousedown',(function(){return $__5.onMouseDown();}));this.eventManager.addEventListener(document.body,'mouseup',(function(){return $__5.onMouseUp();}));for(var c=0,len=this.main.childNodes.length;c<len;c++){this.eventManager.addEventListener(this.main.childNodes[c],'mouseenter',(function(event){return $__5.onMouseEnter(event);}));}},onMouseDown:function(){this.mouseDown=true;},onMouseUp:function(){this.mouseDown=false;},onMouseEnter:function(event){if(!this.mouseDown||!this.wot.getSetting('hideBorderOnMouseDownOver')){return;}
event.preventDefault();stopImmediatePropagation(event);var _this=this;var bounds=this.getBoundingClientRect();this.style.display='none';function isOutside(event){if(event.clientY<Math.floor(bounds.top)){return true;}
if(event.clientY>Math.ceil(bounds.top+bounds.height)){return true;}
if(event.clientX<Math.floor(bounds.left)){return true;}
if(event.clientX>Math.ceil(bounds.left+bounds.width)){return true;}}
function handler(event){if(isOutside(event)){_this.eventManager.removeEventListener(document.body,'mousemove',handler);_this.style.display='block';}}
this.eventManager.addEventListener(document.body,'mousemove',handler);},createBorders:function(settings){this.main=document.createElement('div');var borderDivs=['top','left','bottom','right','corner'];var style=this.main.style;style.position='absolute';style.top=0;style.left=0;for(var i=0;i<5;i++){var position=borderDivs[i];var div=document.createElement('div');div.className='wtBorder '+(this.settings.className||'');if(this.settings[position]&&this.settings[position].hide){div.className+=' hidden';}
style=div.style;style.backgroundColor=(this.settings[position]&&this.settings[position].color)?this.settings[position].color:settings.border.color;style.height=(this.settings[position]&&this.settings[position].width)?this.settings[position].width+'px':settings.border.width+'px';style.width=(this.settings[position]&&this.settings[position].width)?this.settings[position].width+'px':settings.border.width+'px';this.main.appendChild(div);}
this.top=this.main.childNodes[0];this.left=this.main.childNodes[1];this.bottom=this.main.childNodes[2];this.right=this.main.childNodes[3];this.topStyle=this.top.style;this.leftStyle=this.left.style;this.bottomStyle=this.bottom.style;this.rightStyle=this.right.style;this.corner=this.main.childNodes[4];this.corner.className+=' corner';this.cornerStyle=this.corner.style;this.cornerStyle.width=this.cornerDefaultStyle.width;this.cornerStyle.height=this.cornerDefaultStyle.height;this.cornerStyle.border=[this.cornerDefaultStyle.borderWidth,this.cornerDefaultStyle.borderStyle,this.cornerDefaultStyle.borderColor].join(' ');if(Handsontable.mobileBrowser){this.createMultipleSelectorHandles();}
this.disappear();if(!this.wot.wtTable.bordersHolder){this.wot.wtTable.bordersHolder=document.createElement('div');this.wot.wtTable.bordersHolder.className='htBorders';this.wot.wtTable.spreader.appendChild(this.wot.wtTable.bordersHolder);}
this.wot.wtTable.bordersHolder.insertBefore(this.main,this.wot.wtTable.bordersHolder.firstChild);},createMultipleSelectorHandles:function(){this.selectionHandles={topLeft:document.createElement('DIV'),topLeftHitArea:document.createElement('DIV'),bottomRight:document.createElement('DIV'),bottomRightHitArea:document.createElement('DIV')};var width=10;var hitAreaWidth=40;this.selectionHandles.topLeft.className='topLeftSelectionHandle';this.selectionHandles.topLeftHitArea.className='topLeftSelectionHandle-HitArea';this.selectionHandles.bottomRight.className='bottomRightSelectionHandle';this.selectionHandles.bottomRightHitArea.className='bottomRightSelectionHandle-HitArea';this.selectionHandles.styles={topLeft:this.selectionHandles.topLeft.style,topLeftHitArea:this.selectionHandles.topLeftHitArea.style,bottomRight:this.selectionHandles.bottomRight.style,bottomRightHitArea:this.selectionHandles.bottomRightHitArea.style};var hitAreaStyle={position:'absolute',height:hitAreaWidth+'px',width:hitAreaWidth+'px','border-radius':parseInt(hitAreaWidth/1.5,10)+'px'};for(var prop in hitAreaStyle){if(hitAreaStyle.hasOwnProperty(prop)){this.selectionHandles.styles.bottomRightHitArea[prop]=hitAreaStyle[prop];this.selectionHandles.styles.topLeftHitArea[prop]=hitAreaStyle[prop];}}
var handleStyle={position:'absolute',height:width+'px',width:width+'px','border-radius':parseInt(width/1.5,10)+'px',background:'#F5F5FF',border:'1px solid #4285c8'};for(var prop$__7 in handleStyle){if(handleStyle.hasOwnProperty(prop$__7)){this.selectionHandles.styles.bottomRight[prop$__7]=handleStyle[prop$__7];this.selectionHandles.styles.topLeft[prop$__7]=handleStyle[prop$__7];}}
this.main.appendChild(this.selectionHandles.topLeft);this.main.appendChild(this.selectionHandles.bottomRight);this.main.appendChild(this.selectionHandles.topLeftHitArea);this.main.appendChild(this.selectionHandles.bottomRightHitArea);},isPartRange:function(row,col){if(this.wot.selections.area.cellRange){if(row!=this.wot.selections.area.cellRange.to.row||col!=this.wot.selections.area.cellRange.to.col){return true;}}
return false;},updateMultipleSelectionHandlesPosition:function(row,col,top,left,width,height){var handleWidth=parseInt(this.selectionHandles.styles.topLeft.width,10);var hitAreaWidth=parseInt(this.selectionHandles.styles.topLeftHitArea.width,10);this.selectionHandles.styles.topLeft.top=parseInt(top-handleWidth,10)+'px';this.selectionHandles.styles.topLeft.left=parseInt(left-handleWidth,10)+'px';this.selectionHandles.styles.topLeftHitArea.top=parseInt(top-(hitAreaWidth/4)*3,10)+'px';this.selectionHandles.styles.topLeftHitArea.left=parseInt(left-(hitAreaWidth/4)*3,10)+'px';this.selectionHandles.styles.bottomRight.top=parseInt(top+height,10)+'px';this.selectionHandles.styles.bottomRight.left=parseInt(left+width,10)+'px';this.selectionHandles.styles.bottomRightHitArea.top=parseInt(top+height-hitAreaWidth/4,10)+'px';this.selectionHandles.styles.bottomRightHitArea.left=parseInt(left+width-hitAreaWidth/4,10)+'px';if(this.settings.border.multipleSelectionHandlesVisible&&this.settings.border.multipleSelectionHandlesVisible()){this.selectionHandles.styles.topLeft.display='block';this.selectionHandles.styles.topLeftHitArea.display='block';if(this.isPartRange(row,col)){this.selectionHandles.styles.bottomRight.display='none';this.selectionHandles.styles.bottomRightHitArea.display='none';}else{this.selectionHandles.styles.bottomRight.display='block';this.selectionHandles.styles.bottomRightHitArea.display='block';}}else{this.selectionHandles.styles.topLeft.display='none';this.selectionHandles.styles.bottomRight.display='none';this.selectionHandles.styles.topLeftHitArea.display='none';this.selectionHandles.styles.bottomRightHitArea.display='none';}
if(row==this.wot.wtSettings.getSetting('fixedRowsTop')||col==this.wot.wtSettings.getSetting('fixedColumnsLeft')){this.selectionHandles.styles.topLeft.zIndex='9999';this.selectionHandles.styles.topLeftHitArea.zIndex='9999';}else{this.selectionHandles.styles.topLeft.zIndex='';this.selectionHandles.styles.topLeftHitArea.zIndex='';}},appear:function(corners){if(this.disabled){return;}
var isMultiple,fromTD,toTD,fromOffset,toOffset,containerOffset,top,minTop,left,minLeft,height,width,fromRow,fromColumn,toRow,toColumn,trimmingContainer,cornerOverlappingContainer,ilen;if(WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay,WalkontableOverlay.CLONE_TOP)||WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay,WalkontableOverlay.CLONE_TOP_LEFT_CORNER)){ilen=this.wot.getSetting('fixedRowsTop');}else if(WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay,WalkontableOverlay.CLONE_BOTTOM)||WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay,WalkontableOverlay.CLONE_BOTTOM_LEFT_CORNER)){ilen=this.wot.getSetting('fixedRowsBottom');}else{ilen=this.wot.wtTable.getRenderedRowsCount();}
for(var i=0;i<ilen;i++){var s=this.wot.wtTable.rowFilter.renderedToSource(i);if(s>=corners[0]&&s<=corners[2]){fromRow=s;break;}}
for(var i$__8=ilen-1;i$__8>=0;i$__8--){var s$__9=this.wot.wtTable.rowFilter.renderedToSource(i$__8);if(s$__9>=corners[0]&&s$__9<=corners[2]){toRow=s$__9;break;}}
ilen=this.wot.wtTable.getRenderedColumnsCount();for(var i$__10=0;i$__10<ilen;i$__10++){var s$__11=this.wot.wtTable.columnFilter.renderedToSource(i$__10);if(s$__11>=corners[1]&&s$__11<=corners[3]){fromColumn=s$__11;break;}}
for(var i$__12=ilen-1;i$__12>=0;i$__12--){var s$__13=this.wot.wtTable.columnFilter.renderedToSource(i$__12);if(s$__13>=corners[1]&&s$__13<=corners[3]){toColumn=s$__13;break;}}
if(fromRow===void 0||fromColumn===void 0){this.disappear();return;}
isMultiple=(fromRow!==toRow||fromColumn!==toColumn);fromTD=this.wot.wtTable.getCell(new WalkontableCellCoords(fromRow,fromColumn));toTD=isMultiple?this.wot.wtTable.getCell(new WalkontableCellCoords(toRow,toColumn)):fromTD;fromOffset=offset(fromTD);toOffset=isMultiple?offset(toTD):fromOffset;containerOffset=offset(this.wot.wtTable.TABLE);minTop=fromOffset.top;height=toOffset.top+outerHeight(toTD)-minTop;minLeft=fromOffset.left;width=toOffset.left+outerWidth(toTD)-minLeft;top=minTop-containerOffset.top-1;left=minLeft-containerOffset.left-1;var style=getComputedStyle(fromTD);if(parseInt(style.borderTopWidth,10)>0){top+=1;height=height>0?height-1:0;}
if(parseInt(style.borderLeftWidth,10)>0){left+=1;width=width>0?width-1:0;}
this.topStyle.top=top+'px';this.topStyle.left=left+'px';this.topStyle.width=width+'px';this.topStyle.display='block';this.leftStyle.top=top+'px';this.leftStyle.left=left+'px';this.leftStyle.height=height+'px';this.leftStyle.display='block';var delta=Math.floor(this.settings.border.width/2);this.bottomStyle.top=top+height-delta+'px';this.bottomStyle.left=left+'px';this.bottomStyle.width=width+'px';this.bottomStyle.display='block';this.rightStyle.top=top+'px';this.rightStyle.left=left+width-delta+'px';this.rightStyle.height=height+1+'px';this.rightStyle.display='block';if(Handsontable.mobileBrowser||(!this.hasSetting(this.settings.border.cornerVisible)||this.isPartRange(toRow,toColumn))){this.cornerStyle.display='none';}else{this.cornerStyle.top=top+height-4+'px';this.cornerStyle.left=left+width-4+'px';this.cornerStyle.borderRightWidth=this.cornerDefaultStyle.borderWidth;this.cornerStyle.width=this.cornerDefaultStyle.width;this.cornerStyle.display='block';trimmingContainer=getTrimmingContainer(this.wot.wtTable.TABLE);if(toColumn===this.wot.getSetting('totalColumns')-1){cornerOverlappingContainer=toTD.offsetLeft+outerWidth(toTD)>=innerWidth(trimmingContainer);if(cornerOverlappingContainer){this.cornerStyle.left=Math.floor(left+width-3-parseInt(this.cornerDefaultStyle.width)/2)+'px';this.cornerStyle.borderRightWidth=0;}}
if(toRow===this.wot.getSetting('totalRows')-1){cornerOverlappingContainer=toTD.offsetTop+outerHeight(toTD)>=innerHeight(trimmingContainer);if(cornerOverlappingContainer){this.cornerStyle.top=Math.floor(top+height-3-parseInt(this.cornerDefaultStyle.height)/2)+'px';this.cornerStyle.borderBottomWidth=0;}}}
if(Handsontable.mobileBrowser){this.updateMultipleSelectionHandlesPosition(fromRow,fromColumn,top,left,width,height);}},disappear:function(){this.topStyle.display='none';this.leftStyle.display='none';this.bottomStyle.display='none';this.rightStyle.display='none';this.cornerStyle.display='none';if(Handsontable.mobileBrowser){this.selectionHandles.styles.topLeft.display='none';this.selectionHandles.styles.bottomRight.display='none';}},hasSetting:function(setting){if(typeof setting==='function'){return setting();}
return!!setting;}},{});;window.WalkontableBorder=WalkontableBorder;},{"cell/coords":5,"eventManager":40,"helpers/dom/element":44,"helpers/dom/event":45,"overlay/_base.js":11}],3:[function(require,module,exports){"use strict";Object.defineProperties(exports,{WalkontableViewportColumnsCalculator:{get:function(){return WalkontableViewportColumnsCalculator;}},__esModule:{value:true}});var privatePool=new WeakMap();var WalkontableViewportColumnsCalculator=function WalkontableViewportColumnsCalculator(viewportWidth,scrollOffset,totalColumns,columnWidthFn,overrideFn,onlyFullyVisible,stretchH){privatePool.set(this,{viewportWidth:viewportWidth,scrollOffset:scrollOffset,totalColumns:totalColumns,columnWidthFn:columnWidthFn,overrideFn:overrideFn,onlyFullyVisible:onlyFullyVisible});this.count=0;this.startColumn=null;this.endColumn=null;this.startPosition=null;this.stretchAllRatio=0;this.stretchLastWidth=0;this.stretch=stretchH;this.totalTargetWidth=0;this.needVerifyLastColumnWidth=true;this.stretchAllColumnsWidth=[];this.calculate();};var $WalkontableViewportColumnsCalculator=WalkontableViewportColumnsCalculator;($traceurRuntime.createClass)(WalkontableViewportColumnsCalculator,{calculate:function(){var sum=0;var needReverse=true;var startPositions=[];var columnWidth;var priv=privatePool.get(this);var onlyFullyVisible=priv.onlyFullyVisible;var overrideFn=priv.overrideFn;var scrollOffset=priv.scrollOffset;var totalColumns=priv.totalColumns;var viewportWidth=priv.viewportWidth;for(var i=0;i<totalColumns;i++){columnWidth=this._getColumnWidth(i);if(sum<=scrollOffset&&!onlyFullyVisible){this.startColumn=i;}
if(sum>=scrollOffset&&sum+columnWidth<=scrollOffset+viewportWidth){if(this.startColumn==null){this.startColumn=i;}
this.endColumn=i;}
startPositions.push(sum);sum+=columnWidth;if(!onlyFullyVisible){this.endColumn=i;}
if(sum>=scrollOffset+viewportWidth){needReverse=false;break;}}
if(this.endColumn===totalColumns-1&&needReverse){this.startColumn=this.endColumn;while(this.startColumn>0){var viewportSum=startPositions[this.endColumn]+columnWidth-startPositions[this.startColumn-1];if(viewportSum<=viewportWidth||!onlyFullyVisible){this.startColumn--;}
if(viewportSum>viewportWidth){break;}}}
if(this.startColumn!==null&&overrideFn){overrideFn(this);}
this.startPosition=startPositions[this.startColumn];if(this.startPosition==void 0){this.startPosition=null;}
if(this.startColumn!==null){this.count=this.endColumn-this.startColumn+1;}},refreshStretching:function(totalWidth){if(this.stretch==='none'){return;}
var sumAll=0;var columnWidth;var remainingSize;var priv=privatePool.get(this);var totalColumns=priv.totalColumns;for(var i=0;i<totalColumns;i++){columnWidth=this._getColumnWidth(i);sumAll+=columnWidth;}
this.totalTargetWidth=totalWidth;remainingSize=sumAll-totalWidth;if(this.stretch==='all'&&remainingSize<0){this.stretchAllRatio=totalWidth/sumAll;this.stretchAllColumnsWidth=[];this.needVerifyLastColumnWidth=true;}else if(this.stretch==='last'&&totalWidth!==Infinity){this.stretchLastWidth=-remainingSize+this._getColumnWidth(totalColumns-1);}},getStretchedColumnWidth:function(column,baseWidth){var result=null;if(this.stretch==='all'&&this.stretchAllRatio!==0){result=this._getStretchedAllColumnWidth(column,baseWidth);}else if(this.stretch==='last'&&this.stretchLastWidth!==0){result=this._getStretchedLastColumnWidth(column);}
return result;},_getStretchedAllColumnWidth:function(column,baseWidth){var sumRatioWidth=0;var priv=privatePool.get(this);var totalColumns=priv.totalColumns;if(!this.stretchAllColumnsWidth[column]){this.stretchAllColumnsWidth[column]=Math.round(baseWidth*this.stretchAllRatio);}
if(this.stretchAllColumnsWidth.length===totalColumns&&this.needVerifyLastColumnWidth){this.needVerifyLastColumnWidth=false;for(var i=0;i<this.stretchAllColumnsWidth.length;i++){sumRatioWidth+=this.stretchAllColumnsWidth[i];}
if(sumRatioWidth!==this.totalTargetWidth){this.stretchAllColumnsWidth[this.stretchAllColumnsWidth.length-1]+=this.totalTargetWidth-sumRatioWidth;}}
return this.stretchAllColumnsWidth[column];},_getStretchedLastColumnWidth:function(column){var priv=privatePool.get(this);var totalColumns=priv.totalColumns;if(column===totalColumns-1){return this.stretchLastWidth;}
return null;},_getColumnWidth:function(column){var width=privatePool.get(this).columnWidthFn(column);if(width===undefined){width=$WalkontableViewportColumnsCalculator.DEFAULT_WIDTH;}
return width;}},{get DEFAULT_WIDTH(){return 50;}});;window.WalkontableViewportColumnsCalculator=WalkontableViewportColumnsCalculator;},{}],4:[function(require,module,exports){"use strict";Object.defineProperties(exports,{WalkontableViewportRowsCalculator:{get:function(){return WalkontableViewportRowsCalculator;}},__esModule:{value:true}});var privatePool=new WeakMap();var WalkontableViewportRowsCalculator=function WalkontableViewportRowsCalculator(viewportHeight,scrollOffset,totalRows,rowHeightFn,overrideFn,onlyFullyVisible,horizontalScrollbarHeight){privatePool.set(this,{viewportHeight:viewportHeight,scrollOffset:scrollOffset,totalRows:totalRows,rowHeightFn:rowHeightFn,overrideFn:overrideFn,onlyFullyVisible:onlyFullyVisible,horizontalScrollbarHeight:horizontalScrollbarHeight});this.count=0;this.startRow=null;this.endRow=null;this.startPosition=null;this.calculate();};var $WalkontableViewportRowsCalculator=WalkontableViewportRowsCalculator;($traceurRuntime.createClass)(WalkontableViewportRowsCalculator,{calculate:function(){var sum=0;var needReverse=true;var startPositions=[];var priv=privatePool.get(this);var onlyFullyVisible=priv.onlyFullyVisible;var overrideFn=priv.overrideFn;var rowHeightFn=priv.rowHeightFn;var scrollOffset=priv.scrollOffset;var totalRows=priv.totalRows;var viewportHeight=priv.viewportHeight;var horizontalScrollbarHeight=priv.horizontalScrollbarHeight||0;for(var i=0;i<totalRows;i++){var rowHeight=rowHeightFn(i);if(rowHeight===undefined){rowHeight=$WalkontableViewportRowsCalculator.DEFAULT_HEIGHT;}
if(sum<=scrollOffset&&!onlyFullyVisible){this.startRow=i;}
if(sum>=scrollOffset&&sum+rowHeight<=scrollOffset+viewportHeight-horizontalScrollbarHeight){if(this.startRow===null){this.startRow=i;}
this.endRow=i;}
startPositions.push(sum);sum+=rowHeight;if(!onlyFullyVisible){this.endRow=i;}
if(sum>=scrollOffset+viewportHeight-horizontalScrollbarHeight){needReverse=false;break;}}
if(this.endRow===totalRows-1&&needReverse){this.startRow=this.endRow;while(this.startRow>0){var viewportSum=startPositions[this.endRow]+rowHeight-startPositions[this.startRow-1];if(viewportSum<=viewportHeight-horizontalScrollbarHeight||!onlyFullyVisible){this.startRow--;}
if(viewportSum>=viewportHeight-horizontalScrollbarHeight){break;}}}
if(this.startRow!==null&&overrideFn){overrideFn(this);}
this.startPosition=startPositions[this.startRow];if(this.startPosition==void 0){this.startPosition=null;}
if(this.startRow!==null){this.count=this.endRow-this.startRow+1;}}},{get DEFAULT_HEIGHT(){return 23;}});;window.WalkontableViewportRowsCalculator=WalkontableViewportRowsCalculator;},{}],5:[function(require,module,exports){"use strict";Object.defineProperties(exports,{WalkontableCellCoords:{get:function(){return WalkontableCellCoords;}},__esModule:{value:true}});var WalkontableCellCoords=function WalkontableCellCoords(row,col){if(typeof row!=='undefined'&&typeof col!=='undefined'){this.row=row;this.col=col;}else{this.row=null;this.col=null;}};($traceurRuntime.createClass)(WalkontableCellCoords,{isValid:function(wotInstance){if(this.row<0||this.col<0){return false;}
if(this.row>=wotInstance.getSetting('totalRows')||this.col>=wotInstance.getSetting('totalColumns')){return false;}
return true;},isEqual:function(cellCoords){if(cellCoords===this){return true;}
return this.row===cellCoords.row&&this.col===cellCoords.col;},isSouthEastOf:function(testedCoords){return this.row>=testedCoords.row&&this.col>=testedCoords.col;},isNorthWestOf:function(testedCoords){return this.row<=testedCoords.row&&this.col<=testedCoords.col;},isSouthWestOf:function(testedCoords){return this.row>=testedCoords.row&&this.col<=testedCoords.col;},isNorthEastOf:function(testedCoords){return this.row<=testedCoords.row&&this.col>=testedCoords.col;}},{});;window.WalkontableCellCoords=WalkontableCellCoords;},{}],6:[function(require,module,exports){"use strict";Object.defineProperties(exports,{WalkontableCellRange:{get:function(){return WalkontableCellRange;}},__esModule:{value:true}});var $___46__46__47_cell_47_coords__;var WalkontableCellCoords=($___46__46__47_cell_47_coords__=require("cell/coords"),$___46__46__47_cell_47_coords__&&$___46__46__47_cell_47_coords__.__esModule&&$___46__46__47_cell_47_coords__||{default:$___46__46__47_cell_47_coords__}).WalkontableCellCoords;var WalkontableCellRange=function WalkontableCellRange(highlight,from,to){this.highlight=highlight;this.from=from;this.to=to;};var $WalkontableCellRange=WalkontableCellRange;($traceurRuntime.createClass)(WalkontableCellRange,{isValid:function(wotInstance){return this.from.isValid(wotInstance)&&this.to.isValid(wotInstance);},isSingle:function(){return this.from.row===this.to.row&&this.from.col===this.to.col;},getHeight:function(){return Math.max(this.from.row,this.to.row)-Math.min(this.from.row,this.to.row)+1;},getWidth:function(){return Math.max(this.from.col,this.to.col)-Math.min(this.from.col,this.to.col)+1;},includes:function(cellCoords){var topLeft=this.getTopLeftCorner();var bottomRight=this.getBottomRightCorner();if(cellCoords.row<0){cellCoords.row=0;}
if(cellCoords.col<0){cellCoords.col=0;}
return topLeft.row<=cellCoords.row&&bottomRight.row>=cellCoords.row&&topLeft.col<=cellCoords.col&&bottomRight.col>=cellCoords.col;},includesRange:function(testedRange){return this.includes(testedRange.getTopLeftCorner())&&this.includes(testedRange.getBottomRightCorner());},isEqual:function(testedRange){return(Math.min(this.from.row,this.to.row)==Math.min(testedRange.from.row,testedRange.to.row))&&(Math.max(this.from.row,this.to.row)==Math.max(testedRange.from.row,testedRange.to.row))&&(Math.min(this.from.col,this.to.col)==Math.min(testedRange.from.col,testedRange.to.col))&&(Math.max(this.from.col,this.to.col)==Math.max(testedRange.from.col,testedRange.to.col));},overlaps:function(testedRange){return testedRange.isSouthEastOf(this.getTopLeftCorner())&&testedRange.isNorthWestOf(this.getBottomRightCorner());},isSouthEastOf:function(testedCoords){return this.getTopLeftCorner().isSouthEastOf(testedCoords)||this.getBottomRightCorner().isSouthEastOf(testedCoords);},isNorthWestOf:function(testedCoords){return this.getTopLeftCorner().isNorthWestOf(testedCoords)||this.getBottomRightCorner().isNorthWestOf(testedCoords);},expand:function(cellCoords){var topLeft=this.getTopLeftCorner();var bottomRight=this.getBottomRightCorner();if(cellCoords.row<topLeft.row||cellCoords.col<topLeft.col||cellCoords.row>bottomRight.row||cellCoords.col>bottomRight.col){this.from=new WalkontableCellCoords(Math.min(topLeft.row,cellCoords.row),Math.min(topLeft.col,cellCoords.col));this.to=new WalkontableCellCoords(Math.max(bottomRight.row,cellCoords.row),Math.max(bottomRight.col,cellCoords.col));return true;}
return false;},expandByRange:function(expandingRange){if(this.includesRange(expandingRange)||!this.overlaps(expandingRange)){return false;}
var topLeft=this.getTopLeftCorner();var bottomRight=this.getBottomRightCorner();var topRight=this.getTopRightCorner();var bottomLeft=this.getBottomLeftCorner();var expandingTopLeft=expandingRange.getTopLeftCorner();var expandingBottomRight=expandingRange.getBottomRightCorner();var resultTopRow=Math.min(topLeft.row,expandingTopLeft.row);var resultTopCol=Math.min(topLeft.col,expandingTopLeft.col);var resultBottomRow=Math.max(bottomRight.row,expandingBottomRight.row);var resultBottomCol=Math.max(bottomRight.col,expandingBottomRight.col);var finalFrom=new WalkontableCellCoords(resultTopRow,resultTopCol),finalTo=new WalkontableCellCoords(resultBottomRow,resultBottomCol);var isCorner=new $WalkontableCellRange(finalFrom,finalFrom,finalTo).isCorner(this.from,expandingRange),onlyMerge=expandingRange.isEqual(new $WalkontableCellRange(finalFrom,finalFrom,finalTo));if(isCorner&&!onlyMerge){if(this.from.col>finalFrom.col){finalFrom.col=resultBottomCol;finalTo.col=resultTopCol;}
if(this.from.row>finalFrom.row){finalFrom.row=resultBottomRow;finalTo.row=resultTopRow;}}
this.from=finalFrom;this.to=finalTo;return true;},getDirection:function(){if(this.from.isNorthWestOf(this.to)){return'NW-SE';}else if(this.from.isNorthEastOf(this.to)){return'NE-SW';}else if(this.from.isSouthEastOf(this.to)){return'SE-NW';}else if(this.from.isSouthWestOf(this.to)){return'SW-NE';}},setDirection:function(direction){switch(direction){case'NW-SE':this.from=this.getTopLeftCorner();this.to=this.getBottomRightCorner();break;case'NE-SW':this.from=this.getTopRightCorner();this.to=this.getBottomLeftCorner();break;case'SE-NW':this.from=this.getBottomRightCorner();this.to=this.getTopLeftCorner();break;case'SW-NE':this.from=this.getBottomLeftCorner();this.to=this.getTopRightCorner();break;}},getTopLeftCorner:function(){return new WalkontableCellCoords(Math.min(this.from.row,this.to.row),Math.min(this.from.col,this.to.col));},getBottomRightCorner:function(){return new WalkontableCellCoords(Math.max(this.from.row,this.to.row),Math.max(this.from.col,this.to.col));},getTopRightCorner:function(){return new WalkontableCellCoords(Math.min(this.from.row,this.to.row),Math.max(this.from.col,this.to.col));},getBottomLeftCorner:function(){return new WalkontableCellCoords(Math.max(this.from.row,this.to.row),Math.min(this.from.col,this.to.col));},isCorner:function(coords,expandedRange){if(expandedRange){if(expandedRange.includes(coords)){if(this.getTopLeftCorner().isEqual(new WalkontableCellCoords(expandedRange.from.row,expandedRange.from.col))||this.getTopRightCorner().isEqual(new WalkontableCellCoords(expandedRange.from.row,expandedRange.to.col))||this.getBottomLeftCorner().isEqual(new WalkontableCellCoords(expandedRange.to.row,expandedRange.from.col))||this.getBottomRightCorner().isEqual(new WalkontableCellCoords(expandedRange.to.row,expandedRange.to.col))){return true;}}}
return coords.isEqual(this.getTopLeftCorner())||coords.isEqual(this.getTopRightCorner())||coords.isEqual(this.getBottomLeftCorner())||coords.isEqual(this.getBottomRightCorner());},getOppositeCorner:function(coords,expandedRange){if(!(coords instanceof WalkontableCellCoords)){return false;}
if(expandedRange){if(expandedRange.includes(coords)){if(this.getTopLeftCorner().isEqual(new WalkontableCellCoords(expandedRange.from.row,expandedRange.from.col))){return this.getBottomRightCorner();}
if(this.getTopRightCorner().isEqual(new WalkontableCellCoords(expandedRange.from.row,expandedRange.to.col))){return this.getBottomLeftCorner();}
if(this.getBottomLeftCorner().isEqual(new WalkontableCellCoords(expandedRange.to.row,expandedRange.from.col))){return this.getTopRightCorner();}
if(this.getBottomRightCorner().isEqual(new WalkontableCellCoords(expandedRange.to.row,expandedRange.to.col))){return this.getTopLeftCorner();}}}
if(coords.isEqual(this.getBottomRightCorner())){return this.getTopLeftCorner();}else if(coords.isEqual(this.getTopLeftCorner())){return this.getBottomRightCorner();}else if(coords.isEqual(this.getTopRightCorner())){return this.getBottomLeftCorner();}else if(coords.isEqual(this.getBottomLeftCorner())){return this.getTopRightCorner();}},getBordersSharedWith:function(range){if(!this.includesRange(range)){return[];}
var thisBorders={top:Math.min(this.from.row,this.to.row),bottom:Math.max(this.from.row,this.to.row),left:Math.min(this.from.col,this.to.col),right:Math.max(this.from.col,this.to.col)};var rangeBorders={top:Math.min(range.from.row,range.to.row),bottom:Math.max(range.from.row,range.to.row),left:Math.min(range.from.col,range.to.col),right:Math.max(range.from.col,range.to.col)};var result=[];if(thisBorders.top==rangeBorders.top){result.push('top');}
if(thisBorders.right==rangeBorders.right){result.push('right');}
if(thisBorders.bottom==rangeBorders.bottom){result.push('bottom');}
if(thisBorders.left==rangeBorders.left){result.push('left');}
return result;},getInner:function(){var topLeft=this.getTopLeftCorner();var bottomRight=this.getBottomRightCorner();var out=[];for(var r=topLeft.row;r<=bottomRight.row;r++){for(var c=topLeft.col;c<=bottomRight.col;c++){if(!(this.from.row===r&&this.from.col===c)&&!(this.to.row===r&&this.to.col===c)){out.push(new WalkontableCellCoords(r,c));}}}
return out;},getAll:function(){var topLeft=this.getTopLeftCorner();var bottomRight=this.getBottomRightCorner();var out=[];for(var r=topLeft.row;r<=bottomRight.row;r++){for(var c=topLeft.col;c<=bottomRight.col;c++){if(topLeft.row===r&&topLeft.col===c){out.push(topLeft);}else if(bottomRight.row===r&&bottomRight.col===c){out.push(bottomRight);}else{out.push(new WalkontableCellCoords(r,c));}}}
return out;},forAll:function(callback){var topLeft=this.getTopLeftCorner();var bottomRight=this.getBottomRightCorner();for(var r=topLeft.row;r<=bottomRight.row;r++){for(var c=topLeft.col;c<=bottomRight.col;c++){var breakIteration=callback(r,c);if(breakIteration===false){return;}}}}},{});;window.WalkontableCellRange=WalkontableCellRange;},{"cell/coords":5}],7:[function(require,module,exports){"use strict";Object.defineProperties(exports,{Walkontable:{get:function(){return Walkontable;}},__esModule:{value:true}});var $___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__,$___46__46__47__46__46__47__46__46__47_helpers_47_object__,$___46__46__47__46__46__47__46__46__47_helpers_47_string__,$__event__,$__overlays__,$__scroll__,$__settings__,$__table__,$__viewport__,$__overlay_47__95_base_46_js__,$__overlay_47_top_46_js__,$__overlay_47_left_46_js__,$__overlay_47_debug_46_js__,$__overlay_47_topLeftCorner_46_js__;var $__0=($___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__=require("helpers/dom/element"),$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__||{default:$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__}),addClass=$__0.addClass,fastInnerText=$__0.fastInnerText,isVisible=$__0.isVisible,removeClass=$__0.removeClass;var objectEach=($___46__46__47__46__46__47__46__46__47_helpers_47_object__=require("helpers/object"),$___46__46__47__46__46__47__46__46__47_helpers_47_object__&&$___46__46__47__46__46__47__46__46__47_helpers_47_object__.__esModule&&$___46__46__47__46__46__47__46__46__47_helpers_47_object__||{default:$___46__46__47__46__46__47__46__46__47_helpers_47_object__}).objectEach;var $__2=($___46__46__47__46__46__47__46__46__47_helpers_47_string__=require("helpers/string"),$___46__46__47__46__46__47__46__46__47_helpers_47_string__&&$___46__46__47__46__46__47__46__46__47_helpers_47_string__.__esModule&&$___46__46__47__46__46__47__46__46__47_helpers_47_string__||{default:$___46__46__47__46__46__47__46__46__47_helpers_47_string__}),toUpperCaseFirst=$__2.toUpperCaseFirst,randomString=$__2.randomString;var WalkontableEvent=($__event__=require("event"),$__event__&&$__event__.__esModule&&$__event__||{default:$__event__}).WalkontableEvent;var WalkontableOverlays=($__overlays__=require("overlays"),$__overlays__&&$__overlays__.__esModule&&$__overlays__||{default:$__overlays__}).WalkontableOverlays;var WalkontableScroll=($__scroll__=require("scroll"),$__scroll__&&$__scroll__.__esModule&&$__scroll__||{default:$__scroll__}).WalkontableScroll;var WalkontableSettings=($__settings__=require("settings"),$__settings__&&$__settings__.__esModule&&$__settings__||{default:$__settings__}).WalkontableSettings;var WalkontableTable=($__table__=require("table"),$__table__&&$__table__.__esModule&&$__table__||{default:$__table__}).WalkontableTable;var WalkontableViewport=($__viewport__=require("viewport"),$__viewport__&&$__viewport__.__esModule&&$__viewport__||{default:$__viewport__}).WalkontableViewport;var WalkontableOverlay=($__overlay_47__95_base_46_js__=require("overlay/_base.js"),$__overlay_47__95_base_46_js__&&$__overlay_47__95_base_46_js__.__esModule&&$__overlay_47__95_base_46_js__||{default:$__overlay_47__95_base_46_js__}).WalkontableOverlay;var WalkontableTopOverlay=($__overlay_47_top_46_js__=require("overlay/top.js"),$__overlay_47_top_46_js__&&$__overlay_47_top_46_js__.__esModule&&$__overlay_47_top_46_js__||{default:$__overlay_47_top_46_js__}).WalkontableTopOverlay;var WalkontableLeftOverlay=($__overlay_47_left_46_js__=require("overlay/left.js"),$__overlay_47_left_46_js__&&$__overlay_47_left_46_js__.__esModule&&$__overlay_47_left_46_js__||{default:$__overlay_47_left_46_js__}).WalkontableLeftOverlay;var WalkontableDebugOverlay=($__overlay_47_debug_46_js__=require("overlay/debug.js"),$__overlay_47_debug_46_js__&&$__overlay_47_debug_46_js__.__esModule&&$__overlay_47_debug_46_js__||{default:$__overlay_47_debug_46_js__}).WalkontableDebugOverlay;var WalkontableTopLeftCornerOverlay=($__overlay_47_topLeftCorner_46_js__=require("overlay/topLeftCorner.js"),$__overlay_47_topLeftCorner_46_js__&&$__overlay_47_topLeftCorner_46_js__.__esModule&&$__overlay_47_topLeftCorner_46_js__||{default:$__overlay_47_topLeftCorner_46_js__}).WalkontableTopLeftCornerOverlay;var Walkontable=function Walkontable(settings){var originalHeaders=[];this.guid='wt_'+randomString();if(settings.cloneSource){this.cloneSource=settings.cloneSource;this.cloneOverlay=settings.cloneOverlay;this.wtSettings=settings.cloneSource.wtSettings;this.wtTable=new WalkontableTable(this,settings.table,settings.wtRootElement);this.wtScroll=new WalkontableScroll(this);this.wtViewport=settings.cloneSource.wtViewport;this.wtEvent=new WalkontableEvent(this);this.selections=this.cloneSource.selections;}else{this.wtSettings=new WalkontableSettings(this,settings);this.wtTable=new WalkontableTable(this,settings.table);this.wtScroll=new WalkontableScroll(this);this.wtViewport=new WalkontableViewport(this);this.wtEvent=new WalkontableEvent(this);this.selections=this.getSetting('selections');this.wtOverlays=new WalkontableOverlays(this);this.exportSettingsAsClassNames();}
if(this.wtTable.THEAD.childNodes.length&&this.wtTable.THEAD.childNodes[0].childNodes.length){for(var c=0,clen=this.wtTable.THEAD.childNodes[0].childNodes.length;c<clen;c++){originalHeaders.push(this.wtTable.THEAD.childNodes[0].childNodes[c].innerHTML);}
if(!this.getSetting('columnHeaders').length){this.update('columnHeaders',[function(column,TH){fastInnerText(TH,originalHeaders[column]);}]);}}
this.drawn=false;this.drawInterrupted=false;};($traceurRuntime.createClass)(Walkontable,{draw:function(){var fastDraw=arguments[0]!==(void 0)?arguments[0]:false;this.drawInterrupted=false;if(!fastDraw&&!isVisible(this.wtTable.TABLE)){this.drawInterrupted=true;}else{this.wtTable.draw(fastDraw);}
return this;},getCell:function(coords){var topmost=arguments[1]!==(void 0)?arguments[1]:false;if(!topmost){return this.wtTable.getCell(coords);}
var totalRows=this.wtSettings.getSetting('totalRows');var fixedRowsTop=this.wtSettings.getSetting('fixedRowsTop');var fixedRowsBottom=this.wtSettings.getSetting('fixedRowsBottom');var fixedColumns=this.wtSettings.getSetting('fixedColumnsLeft');if(coords.row<fixedRowsTop&&coords.col<fixedColumns){return this.wtOverlays.topLeftCornerOverlay.clone.wtTable.getCell(coords);}else if(coords.row<fixedRowsTop){return this.wtOverlays.topOverlay.clone.wtTable.getCell(coords);}else if(coords.col<fixedColumns&&coords.row>=totalRows-fixedRowsBottom){if(this.wtOverlays.bottomLeftCornerOverlay.clone){return this.wtOverlays.bottomLeftCornerOverlay.clone.wtTable.getCell(coords);}}else if(coords.col<fixedColumns){return this.wtOverlays.leftOverlay.clone.wtTable.getCell(coords);}else if(coords.row>=totalRows-fixedRowsBottom){if(this.wtOverlays.bottomOverlay.clone){return this.wtOverlays.bottomOverlay.clone.wtTable.getCell(coords);}}
return this.wtTable.getCell(coords);},update:function(settings,value){return this.wtSettings.update(settings,value);},scrollVertical:function(row){this.wtOverlays.topOverlay.scrollTo(row);this.getSetting('onScrollVertically');return this;},scrollHorizontal:function(column){this.wtOverlays.leftOverlay.scrollTo(column);this.getSetting('onScrollHorizontally');return this;},scrollViewport:function(coords){this.wtScroll.scrollViewport(coords);return this;},getViewport:function(){return[this.wtTable.getFirstVisibleRow(),this.wtTable.getFirstVisibleColumn(),this.wtTable.getLastVisibleRow(),this.wtTable.getLastVisibleColumn()];},getOverlayName:function(){return this.cloneOverlay?this.cloneOverlay.type:'master';},exportSettingsAsClassNames:function(){var $__14=this;var toExport={rowHeaders:['array'],columnHeaders:['array']};var allClassNames=[];var newClassNames=[];objectEach(toExport,(function(optionType,key){if(optionType.indexOf('array')>-1&&$__14.getSetting(key).length){newClassNames.push('ht'+toUpperCaseFirst(key));}
allClassNames.push('ht'+toUpperCaseFirst(key));}));removeClass(this.wtTable.wtRootElement.parentNode,allClassNames);addClass(this.wtTable.wtRootElement.parentNode,newClassNames);},getSetting:function(key,param1,param2,param3,param4){return this.wtSettings.getSetting(key,param1,param2,param3,param4);},hasSetting:function(key){return this.wtSettings.has(key);},destroy:function(){this.wtOverlays.destroy();this.wtEvent.destroy();}},{});;window.Walkontable=Walkontable;},{"event":8,"helpers/dom/element":44,"helpers/object":49,"helpers/string":51,"overlay/_base.js":11,"overlay/debug.js":12,"overlay/left.js":13,"overlay/top.js":14,"overlay/topLeftCorner.js":15,"overlays":16,"scroll":17,"settings":19,"table":20,"viewport":22}],8:[function(require,module,exports){"use strict";Object.defineProperties(exports,{WalkontableEvent:{get:function(){return WalkontableEvent;}},__esModule:{value:true}});var $___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__,$___46__46__47__46__46__47__46__46__47_eventManager__;var $__0=($___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__=require("helpers/dom/element"),$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__||{default:$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__}),closest=$__0.closest,hasClass=$__0.hasClass,isChildOf=$__0.isChildOf;var eventManagerObject=($___46__46__47__46__46__47__46__46__47_eventManager__=require("eventManager"),$___46__46__47__46__46__47__46__46__47_eventManager__&&$___46__46__47__46__46__47__46__46__47_eventManager__.__esModule&&$___46__46__47__46__46__47__46__46__47_eventManager__||{default:$___46__46__47__46__46__47__46__46__47_eventManager__}).eventManager;function WalkontableEvent(instance){var that=this;var eventManager=eventManagerObject(instance);this.instance=instance;var dblClickOrigin=[null,null];this.dblClickTimeout=[null,null];var onMouseDown=function(event){var cell=that.parentCell(event.realTarget);if(hasClass(event.realTarget,'corner')){that.instance.getSetting('onCellCornerMouseDown',event,event.realTarget);}else if(cell.TD){if(that.instance.hasSetting('onCellMouseDown')){that.instance.getSetting('onCellMouseDown',event,cell.coords,cell.TD,that.instance);}}
if(event.button!==2){if(cell.TD){dblClickOrigin[0]=cell.TD;clearTimeout(that.dblClickTimeout[0]);that.dblClickTimeout[0]=setTimeout(function(){dblClickOrigin[0]=null;},1000);}}};var onTouchMove=function(event){that.instance.touchMoving=true;};var longTouchTimeout;var onTouchStart=function(event){var container=this;eventManager.addEventListener(this,'touchmove',onTouchMove);that.checkIfTouchMove=setTimeout(function(){if(that.instance.touchMoving===true){that.instance.touchMoving=void 0;eventManager.removeEventListener('touchmove',onTouchMove,false);return;}else{onMouseDown(event);}},30);};var lastMouseOver;var onMouseOver=function(event){var table,td;if(that.instance.hasSetting('onCellMouseOver')){table=that.instance.wtTable.TABLE;td=closest(event.realTarget,['TD','TH'],table);if(td&&td!==lastMouseOver&&isChildOf(td,table)){lastMouseOver=td;that.instance.getSetting('onCellMouseOver',event,that.instance.wtTable.getCoords(td),td,that.instance);}}};var onMouseUp=function(event){if(event.button!==2){var cell=that.parentCell(event.realTarget);if(cell.TD===dblClickOrigin[0]&&cell.TD===dblClickOrigin[1]){if(hasClass(event.realTarget,'corner')){that.instance.getSetting('onCellCornerDblClick',event,cell.coords,cell.TD,that.instance);}else{that.instance.getSetting('onCellDblClick',event,cell.coords,cell.TD,that.instance);}
dblClickOrigin[0]=null;dblClickOrigin[1]=null;}else if(cell.TD===dblClickOrigin[0]){dblClickOrigin[1]=cell.TD;clearTimeout(that.dblClickTimeout[1]);that.dblClickTimeout[1]=setTimeout(function(){dblClickOrigin[1]=null;},500);}}};var onTouchEnd=function(event){clearTimeout(longTouchTimeout);event.preventDefault();onMouseUp(event);};eventManager.addEventListener(this.instance.wtTable.holder,'mousedown',onMouseDown);eventManager.addEventListener(this.instance.wtTable.TABLE,'mouseover',onMouseOver);eventManager.addEventListener(this.instance.wtTable.holder,'mouseup',onMouseUp);if(this.instance.wtTable.holder.parentNode.parentNode&&Handsontable.mobileBrowser&&!that.instance.wtTable.isWorkingOnClone()){var classSelector='.'+this.instance.wtTable.holder.parentNode.className.split(' ').join('.');eventManager.addEventListener(this.instance.wtTable.holder,'touchstart',function(event){that.instance.touchApplied=true;if(isChildOf(event.target,classSelector)){onTouchStart.call(event.target,event);}});eventManager.addEventListener(this.instance.wtTable.holder,'touchend',function(event){that.instance.touchApplied=false;if(isChildOf(event.target,classSelector)){onTouchEnd.call(event.target,event);}});if(!that.instance.momentumScrolling){that.instance.momentumScrolling={};}
eventManager.addEventListener(this.instance.wtTable.holder,'scroll',function(event){clearTimeout(that.instance.momentumScrolling._timeout);if(!that.instance.momentumScrolling.ongoing){that.instance.getSetting('onBeforeTouchScroll');}
that.instance.momentumScrolling.ongoing=true;that.instance.momentumScrolling._timeout=setTimeout(function(){if(!that.instance.touchApplied){that.instance.momentumScrolling.ongoing=false;that.instance.getSetting('onAfterMomentumScroll');}},200);});}
eventManager.addEventListener(window,'resize',function(){if(that.instance.getSetting('stretchH')!=='none'){that.instance.draw();}});this.destroy=function(){clearTimeout(this.dblClickTimeout[0]);clearTimeout(this.dblClickTimeout[1]);eventManager.destroy();};}
WalkontableEvent.prototype.parentCell=function(elem){var cell={};var TABLE=this.instance.wtTable.TABLE;var TD=closest(elem,['TD','TH'],TABLE);if(TD&&isChildOf(TD,TABLE)){cell.coords=this.instance.wtTable.getCoords(TD);cell.TD=TD;}else if(hasClass(elem,'wtBorder')&&hasClass(elem,'current')){cell.coords=this.instance.selections.current.cellRange.highlight;cell.TD=this.instance.wtTable.getCell(cell.coords);}else if(hasClass(elem,'wtBorder')&&hasClass(elem,'area')){if(this.instance.selections.area.cellRange){cell.coords=this.instance.selections.area.cellRange.to;cell.TD=this.instance.wtTable.getCell(cell.coords);}}
return cell;};;window.WalkontableEvent=WalkontableEvent;},{"eventManager":40,"helpers/dom/element":44}],9:[function(require,module,exports){"use strict";Object.defineProperties(exports,{WalkontableColumnFilter:{get:function(){return WalkontableColumnFilter;}},__esModule:{value:true}});var WalkontableColumnFilter=function WalkontableColumnFilter(offset,total,countTH){this.offset=offset;this.total=total;this.countTH=countTH;};($traceurRuntime.createClass)(WalkontableColumnFilter,{offsetted:function(index){return index+this.offset;},unOffsetted:function(index){return index-this.offset;},renderedToSource:function(index){return this.offsetted(index);},sourceToRendered:function(index){return this.unOffsetted(index);},offsettedTH:function(index){return index-this.countTH;},unOffsettedTH:function(index){return index+this.countTH;},visibleRowHeadedColumnToSourceColumn:function(index){return this.renderedToSource(this.offsettedTH(index));},sourceColumnToVisibleRowHeadedColumn:function(index){return this.unOffsettedTH(this.sourceToRendered(index));}},{});;window.WalkontableColumnFilter=WalkontableColumnFilter;},{}],10:[function(require,module,exports){"use strict";Object.defineProperties(exports,{WalkontableRowFilter:{get:function(){return WalkontableRowFilter;}},__esModule:{value:true}});var WalkontableRowFilter=function WalkontableRowFilter(offset,total,countTH){this.offset=offset;this.total=total;this.countTH=countTH;};($traceurRuntime.createClass)(WalkontableRowFilter,{offsetted:function(index){return index+this.offset;},unOffsetted:function(index){return index-this.offset;},renderedToSource:function(index){return this.offsetted(index);},sourceToRendered:function(index){return this.unOffsetted(index);},offsettedTH:function(index){return index-this.countTH;},unOffsettedTH:function(index){return index+this.countTH;},visibleColHeadedRowToSourceRow:function(index){return this.renderedToSource(this.offsettedTH(index));},sourceRowToVisibleColHeadedRow:function(index){return this.unOffsettedTH(this.sourceToRendered(index));}},{});;window.WalkontableRowFilter=WalkontableRowFilter;},{}],11:[function(require,module,exports){"use strict";Object.defineProperties(exports,{WalkontableOverlay:{get:function(){return WalkontableOverlay;}},__esModule:{value:true}});var $___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__,$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_object__,$___46__46__47__46__46__47__46__46__47__46__46__47_eventManager__;var $__0=($___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__=require("helpers/dom/element"),$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__||{default:$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__}),getScrollableElement=$__0.getScrollableElement,getTrimmingContainer=$__0.getTrimmingContainer;var defineGetter=($___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_object__=require("helpers/object"),$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_object__&&$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_object__.__esModule&&$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_object__||{default:$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_object__}).defineGetter;var eventManagerObject=($___46__46__47__46__46__47__46__46__47__46__46__47_eventManager__=require("eventManager"),$___46__46__47__46__46__47__46__46__47__46__46__47_eventManager__&&$___46__46__47__46__46__47__46__46__47__46__46__47_eventManager__.__esModule&&$___46__46__47__46__46__47__46__46__47__46__46__47_eventManager__||{default:$___46__46__47__46__46__47__46__46__47__46__46__47_eventManager__}).eventManager;var registeredOverlays={};var WalkontableOverlay=function WalkontableOverlay(wotInstance){defineGetter(this,'wot',wotInstance,{writable:false});this.instance=this.wot;this.type='';this.TABLE=this.wot.wtTable.TABLE;this.hider=this.wot.wtTable.hider;this.spreader=this.wot.wtTable.spreader;this.holder=this.wot.wtTable.holder;this.wtRootElement=this.wot.wtTable.wtRootElement;this.trimmingContainer=getTrimmingContainer(this.hider.parentNode.parentNode);this.mainTableScrollableElement=getScrollableElement(this.wot.wtTable.TABLE);this.needFullRender=this.shouldBeRendered();this.areElementSizesAdjusted=false;};var $WalkontableOverlay=WalkontableOverlay;($traceurRuntime.createClass)(WalkontableOverlay,{shouldBeRendered:function(){return true;},makeClone:function(direction){if($WalkontableOverlay.CLONE_TYPES.indexOf(direction)===-1){throw new Error('Clone type "'+direction+'" is not supported.');}
var clone=document.createElement('DIV');var clonedTable=document.createElement('TABLE');clone.className='ht_clone_'+direction+' handsontable';clone.style.position='absolute';clone.style.top=0;clone.style.left=0;clone.style.overflow='hidden';clonedTable.className=this.wot.wtTable.TABLE.className;clone.appendChild(clonedTable);this.type=direction;this.wot.wtTable.wtRootElement.parentNode.appendChild(clone);return new Walkontable({cloneSource:this.wot,cloneOverlay:this,table:clonedTable});},refresh:function(){var fastDraw=arguments[0]!==(void 0)?arguments[0]:false;var nextCycleRenderFlag=this.shouldBeRendered();if(this.clone&&(this.needFullRender||nextCycleRenderFlag)){this.clone.draw(fastDraw);}
this.needFullRender=nextCycleRenderFlag;},destroy:function(){eventManagerObject(this.clone).destroy();}},{get CLONE_TOP(){return'top';},get CLONE_BOTTOM(){return'bottom';},get CLONE_LEFT(){return'left';},get CLONE_TOP_LEFT_CORNER(){return'top_left_corner';},get CLONE_BOTTOM_LEFT_CORNER(){return'bottom_left_corner';},get CLONE_DEBUG(){return'debug';},get CLONE_TYPES(){return[$WalkontableOverlay.CLONE_TOP,$WalkontableOverlay.CLONE_BOTTOM,$WalkontableOverlay.CLONE_LEFT,$WalkontableOverlay.CLONE_TOP_LEFT_CORNER,$WalkontableOverlay.CLONE_BOTTOM_LEFT_CORNER,$WalkontableOverlay.CLONE_DEBUG];},registerOverlay:function(type,overlayClass){if($WalkontableOverlay.CLONE_TYPES.indexOf(type)===-1){throw new Error(("Unsupported overlay ("+type+")."));}
registeredOverlays[type]=overlayClass;},createOverlay:function(type,wot){return new registeredOverlays[type](wot);},isOverlayTypeOf:function(overlay,type){if(!overlay||!registeredOverlays[type]){return false;}
return overlay instanceof registeredOverlays[type];}});;window.WalkontableOverlay=WalkontableOverlay;},{"eventManager":40,"helpers/dom/element":44,"helpers/object":49}],12:[function(require,module,exports){"use strict";Object.defineProperties(exports,{WalkontableDebugOverlay:{get:function(){return WalkontableDebugOverlay;}},__esModule:{value:true}});var $___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__,$___95_base__;var addClass=($___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__=require("helpers/dom/element"),$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__||{default:$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__}).addClass;var WalkontableOverlay=($___95_base__=require("_base"),$___95_base__&&$___95_base__.__esModule&&$___95_base__||{default:$___95_base__}).WalkontableOverlay;var WalkontableDebugOverlay=function WalkontableDebugOverlay(wotInstance){$traceurRuntime.superConstructor($WalkontableDebugOverlay).call(this,wotInstance);this.clone=this.makeClone(WalkontableOverlay.CLONE_DEBUG);this.clone.wtTable.holder.style.opacity=0.4;this.clone.wtTable.holder.style.textShadow='0 0 2px #ff0000';addClass(this.clone.wtTable.holder.parentNode,'wtDebugVisible');};var $WalkontableDebugOverlay=WalkontableDebugOverlay;($traceurRuntime.createClass)(WalkontableDebugOverlay,{},{},WalkontableOverlay);;window.WalkontableDebugOverlay=WalkontableDebugOverlay;WalkontableOverlay.registerOverlay(WalkontableOverlay.CLONE_DEBUG,WalkontableDebugOverlay);},{"_base":11,"helpers/dom/element":44}],13:[function(require,module,exports){"use strict";Object.defineProperties(exports,{WalkontableLeftOverlay:{get:function(){return WalkontableLeftOverlay;}},__esModule:{value:true}});var $___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__,$___95_base__;var $__0=($___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__=require("helpers/dom/element"),$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__||{default:$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__}),addClass=$__0.addClass,getScrollbarWidth=$__0.getScrollbarWidth,getScrollLeft=$__0.getScrollLeft,getWindowScrollTop=$__0.getWindowScrollTop,hasClass=$__0.hasClass,outerWidth=$__0.outerWidth,removeClass=$__0.removeClass,setOverlayPosition=$__0.setOverlayPosition;var WalkontableOverlay=($___95_base__=require("_base"),$___95_base__&&$___95_base__.__esModule&&$___95_base__||{default:$___95_base__}).WalkontableOverlay;var WalkontableLeftOverlay=function WalkontableLeftOverlay(wotInstance){$traceurRuntime.superConstructor($WalkontableLeftOverlay).call(this,wotInstance);this.clone=this.makeClone(WalkontableOverlay.CLONE_LEFT);};var $WalkontableLeftOverlay=WalkontableLeftOverlay;($traceurRuntime.createClass)(WalkontableLeftOverlay,{shouldBeRendered:function(){return this.wot.getSetting('fixedColumnsLeft')||this.wot.getSetting('rowHeaders').length?true:false;},resetFixedPosition:function(){if(!this.needFullRender||!this.wot.wtTable.holder.parentNode){return;}
var overlayRoot=this.clone.wtTable.holder.parentNode;var headerPosition=0;if(this.trimmingContainer===window){var box=this.wot.wtTable.hider.getBoundingClientRect();var left=Math.ceil(box.left);var right=Math.ceil(box.right);var finalLeft;var finalTop;finalTop=this.wot.wtTable.hider.style.top;finalTop=finalTop===''?0:finalTop;if(left<0&&(right-overlayRoot.offsetWidth)>0){finalLeft=-left;}else{finalLeft=0;}
headerPosition=finalLeft;finalLeft=finalLeft+'px';setOverlayPosition(overlayRoot,finalLeft,finalTop);}else{headerPosition=this.getScrollPosition();}
this.adjustHeaderBordersPosition(headerPosition);this.adjustElementsSize();},setScrollPosition:function(pos){if(this.mainTableScrollableElement===window){window.scrollTo(pos,getWindowScrollTop());}else{this.mainTableScrollableElement.scrollLeft=pos;}},onScroll:function(){this.wot.getSetting('onScrollHorizontally');},sumCellSizes:function(from,to){var sum=0;var defaultColumnWidth=this.wot.wtSettings.defaultColumnWidth;while(from<to){sum+=this.wot.wtTable.getStretchedColumnWidth(from)||defaultColumnWidth;from++;}
return sum;},adjustElementsSize:function(){var force=arguments[0]!==(void 0)?arguments[0]:false;if(this.needFullRender||force){this.adjustRootElementSize();this.adjustRootChildrenSize();if(!force){this.areElementSizesAdjusted=true;}}},adjustRootElementSize:function(){var masterHolder=this.wot.wtTable.holder;var scrollbarHeight=masterHolder.clientHeight===masterHolder.offsetHeight?0:getScrollbarWidth();var overlayRoot=this.clone.wtTable.holder.parentNode;var overlayRootStyle=overlayRoot.style;var tableWidth;if(this.trimmingContainer!==window){overlayRootStyle.height=this.wot.wtViewport.getWorkspaceHeight()-scrollbarHeight+'px';}
this.clone.wtTable.holder.style.height=overlayRootStyle.height;tableWidth=outerWidth(this.clone.wtTable.TABLE);overlayRootStyle.width=(tableWidth===0?tableWidth:tableWidth+4)+'px';},adjustRootChildrenSize:function(){var scrollbarWidth=getScrollbarWidth();this.clone.wtTable.hider.style.height=this.hider.style.height;this.clone.wtTable.holder.style.height=this.clone.wtTable.holder.parentNode.style.height;if(scrollbarWidth===0){scrollbarWidth=30;}
this.clone.wtTable.holder.style.width=parseInt(this.clone.wtTable.holder.parentNode.style.width,10)+scrollbarWidth+'px';},applyToDOM:function(){var total=this.wot.getSetting('totalColumns');if(!this.areElementSizesAdjusted){this.adjustElementsSize();}
if(typeof this.wot.wtViewport.columnsRenderCalculator.startPosition==='number'){this.spreader.style.left=this.wot.wtViewport.columnsRenderCalculator.startPosition+'px';}else if(total===0){this.spreader.style.left='0';}else{throw new Error('Incorrect value of the columnsRenderCalculator');}
this.spreader.style.right='';if(this.needFullRender){this.syncOverlayOffset();}},syncOverlayOffset:function(){if(typeof this.wot.wtViewport.rowsRenderCalculator.startPosition==='number'){this.clone.wtTable.spreader.style.top=this.wot.wtViewport.rowsRenderCalculator.startPosition+'px';}else{this.clone.wtTable.spreader.style.top='';}},scrollTo:function(sourceCol,beyondRendered){var newX=this.getTableParentOffset();var sourceInstance=this.wot.cloneSource?this.wot.cloneSource:this.wot;var mainHolder=sourceInstance.wtTable.holder;var scrollbarCompensation=0;if(beyondRendered&&mainHolder.offsetWidth!==mainHolder.clientWidth){scrollbarCompensation=getScrollbarWidth();}
if(beyondRendered){newX+=this.sumCellSizes(0,sourceCol+1);newX-=this.wot.wtViewport.getViewportWidth();}else{newX+=this.sumCellSizes(this.wot.getSetting('fixedColumnsLeft'),sourceCol);}
newX+=scrollbarCompensation;this.setScrollPosition(newX);},getTableParentOffset:function(){if(this.trimmingContainer===window){return this.wot.wtTable.holderOffset.left;}else{return 0;}},getScrollPosition:function(){return getScrollLeft(this.mainTableScrollableElement);},adjustHeaderBordersPosition:function(position){var masterParent=this.wot.wtTable.holder.parentNode;var rowHeaders=this.wot.getSetting('rowHeaders');var fixedColumnsLeft=this.wot.getSetting('fixedColumnsLeft');if(fixedColumnsLeft&&!rowHeaders.length){addClass(masterParent,'innerBorderLeft');}else if(!fixedColumnsLeft&&rowHeaders.length){var previousState=hasClass(masterParent,'innerBorderLeft');if(position){addClass(masterParent,'innerBorderLeft');}else{removeClass(masterParent,'innerBorderLeft');}
if(!previousState&&position||previousState&&!position){this.wot.wtOverlays.adjustElementsSize();}}}},{},WalkontableOverlay);;window.WalkontableLeftOverlay=WalkontableLeftOverlay;WalkontableOverlay.registerOverlay(WalkontableOverlay.CLONE_LEFT,WalkontableLeftOverlay);},{"_base":11,"helpers/dom/element":44}],14:[function(require,module,exports){"use strict";Object.defineProperties(exports,{WalkontableTopOverlay:{get:function(){return WalkontableTopOverlay;}},__esModule:{value:true}});var $___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__,$___95_base__;var $__0=($___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__=require("helpers/dom/element"),$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__||{default:$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__}),addClass=$__0.addClass,getScrollbarWidth=$__0.getScrollbarWidth,getScrollTop=$__0.getScrollTop,getWindowScrollLeft=$__0.getWindowScrollLeft,hasClass=$__0.hasClass,outerHeight=$__0.outerHeight,removeClass=$__0.removeClass,setOverlayPosition=$__0.setOverlayPosition;var WalkontableOverlay=($___95_base__=require("_base"),$___95_base__&&$___95_base__.__esModule&&$___95_base__||{default:$___95_base__}).WalkontableOverlay;var WalkontableTopOverlay=function WalkontableTopOverlay(wotInstance){$traceurRuntime.superConstructor($WalkontableTopOverlay).call(this,wotInstance);this.clone=this.makeClone(WalkontableOverlay.CLONE_TOP);};var $WalkontableTopOverlay=WalkontableTopOverlay;($traceurRuntime.createClass)(WalkontableTopOverlay,{shouldBeRendered:function(){return this.wot.getSetting('fixedRowsTop')||this.wot.getSetting('columnHeaders').length?true:false;},resetFixedPosition:function(){if(!this.needFullRender||!this.wot.wtTable.holder.parentNode){return;}
var overlayRoot=this.clone.wtTable.holder.parentNode;var headerPosition=0;if(this.wot.wtOverlays.leftOverlay.trimmingContainer===window){var box=this.wot.wtTable.hider.getBoundingClientRect();var top=Math.ceil(box.top);var bottom=Math.ceil(box.bottom);var finalLeft;var finalTop;finalLeft=this.wot.wtTable.hider.style.left;finalLeft=finalLeft===''?0:finalLeft;if(top<0&&(bottom-overlayRoot.offsetHeight)>0){finalTop=-top;}else{finalTop=0;}
headerPosition=finalTop;finalTop=finalTop+'px';setOverlayPosition(overlayRoot,finalLeft,finalTop);}else{headerPosition=this.getScrollPosition();}
this.adjustHeaderBordersPosition(headerPosition);this.adjustElementsSize();},setScrollPosition:function(pos){if(this.mainTableScrollableElement===window){window.scrollTo(getWindowScrollLeft(),pos);}else{this.mainTableScrollableElement.scrollTop=pos;}},onScroll:function(){this.wot.getSetting('onScrollVertically');},sumCellSizes:function(from,to){var sum=0;var defaultRowHeight=this.wot.wtSettings.settings.defaultRowHeight;while(from<to){sum+=this.wot.wtTable.getRowHeight(from)||defaultRowHeight;from++;}
return sum;},adjustElementsSize:function(){var force=arguments[0]!==(void 0)?arguments[0]:false;if(this.needFullRender||force){this.adjustRootElementSize();this.adjustRootChildrenSize();if(!force){this.areElementSizesAdjusted=true;}}},adjustRootElementSize:function(){var masterHolder=this.wot.wtTable.holder;var scrollbarWidth=masterHolder.clientWidth===masterHolder.offsetWidth?0:getScrollbarWidth();var overlayRoot=this.clone.wtTable.holder.parentNode;var overlayRootStyle=overlayRoot.style;var tableHeight;if(this.trimmingContainer!==window){overlayRootStyle.width=this.wot.wtViewport.getWorkspaceWidth()-scrollbarWidth+'px';}
this.clone.wtTable.holder.style.width=overlayRootStyle.width;tableHeight=outerHeight(this.clone.wtTable.TABLE);overlayRootStyle.height=(tableHeight===0?tableHeight:tableHeight+4)+'px';},adjustRootChildrenSize:function(){var scrollbarWidth=getScrollbarWidth();this.clone.wtTable.hider.style.width=this.hider.style.width;this.clone.wtTable.holder.style.width=this.clone.wtTable.holder.parentNode.style.width;if(scrollbarWidth===0){scrollbarWidth=30;}
this.clone.wtTable.holder.style.height=parseInt(this.clone.wtTable.holder.parentNode.style.height,10)+scrollbarWidth+'px';},applyToDOM:function(){var total=this.wot.getSetting('totalRows');if(!this.areElementSizesAdjusted){this.adjustElementsSize();}
if(typeof this.wot.wtViewport.rowsRenderCalculator.startPosition==='number'){this.spreader.style.top=this.wot.wtViewport.rowsRenderCalculator.startPosition+'px';}else if(total===0){this.spreader.style.top='0';}else{throw new Error('Incorrect value of the rowsRenderCalculator');}
this.spreader.style.bottom='';if(this.needFullRender){this.syncOverlayOffset();}},syncOverlayOffset:function(){if(typeof this.wot.wtViewport.columnsRenderCalculator.startPosition==='number'){this.clone.wtTable.spreader.style.left=this.wot.wtViewport.columnsRenderCalculator.startPosition+'px';}else{this.clone.wtTable.spreader.style.left='';}},scrollTo:function(sourceRow,bottomEdge){var newY=this.getTableParentOffset();var sourceInstance=this.wot.cloneSource?this.wot.cloneSource:this.wot;var mainHolder=sourceInstance.wtTable.holder;var scrollbarCompensation=0;if(bottomEdge&&mainHolder.offsetHeight!==mainHolder.clientHeight){scrollbarCompensation=getScrollbarWidth();}
if(bottomEdge){var fixedRowsBottom=this.wot.getSetting('fixedRowsBottom');var fixedRowsTop=this.wot.getSetting('fixedRowsTop');var totalRows=this.wot.getSetting('totalRows');newY+=this.sumCellSizes(0,sourceRow+1);newY-=this.wot.wtViewport.getViewportHeight()-this.sumCellSizes(totalRows-fixedRowsBottom,totalRows);newY+=1;}else{newY+=this.sumCellSizes(this.wot.getSetting('fixedRowsTop'),sourceRow);}
newY+=scrollbarCompensation;this.setScrollPosition(newY);},getTableParentOffset:function(){if(this.mainTableScrollableElement===window){return this.wot.wtTable.holderOffset.top;}else{return 0;}},getScrollPosition:function(){return getScrollTop(this.mainTableScrollableElement);},adjustHeaderBordersPosition:function(position){if(this.wot.getSetting('fixedRowsTop')===0&&this.wot.getSetting('columnHeaders').length>0){var masterParent=this.wot.wtTable.holder.parentNode;var previousState=hasClass(masterParent,'innerBorderTop');if(position){addClass(masterParent,'innerBorderTop');}else{removeClass(masterParent,'innerBorderTop');}
if(!previousState&&position||previousState&&!position){this.wot.wtOverlays.adjustElementsSize();}}
if(this.wot.getSetting('rowHeaders').length===0){var secondHeaderCell=this.clone.wtTable.THEAD.querySelectorAll('th:nth-of-type(2)');if(secondHeaderCell){for(var i=0;i<secondHeaderCell.length;i++){secondHeaderCell[i].style['border-left-width']=0;}}}}},{},WalkontableOverlay);;window.WalkontableTopOverlay=WalkontableTopOverlay;WalkontableOverlay.registerOverlay(WalkontableOverlay.CLONE_TOP,WalkontableTopOverlay);},{"_base":11,"helpers/dom/element":44}],15:[function(require,module,exports){"use strict";Object.defineProperties(exports,{WalkontableTopLeftCornerOverlay:{get:function(){return WalkontableTopLeftCornerOverlay;}},__esModule:{value:true}});var $___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__,$___95_base__;var $__0=($___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__=require("helpers/dom/element"),$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__||{default:$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__}),outerHeight=$__0.outerHeight,outerWidth=$__0.outerWidth,setOverlayPosition=$__0.setOverlayPosition;var WalkontableOverlay=($___95_base__=require("_base"),$___95_base__&&$___95_base__.__esModule&&$___95_base__||{default:$___95_base__}).WalkontableOverlay;var WalkontableTopLeftCornerOverlay=function WalkontableTopLeftCornerOverlay(wotInstance){$traceurRuntime.superConstructor($WalkontableTopLeftCornerOverlay).call(this,wotInstance);this.clone=this.makeClone(WalkontableOverlay.CLONE_TOP_LEFT_CORNER);};var $WalkontableTopLeftCornerOverlay=WalkontableTopLeftCornerOverlay;($traceurRuntime.createClass)(WalkontableTopLeftCornerOverlay,{shouldBeRendered:function(){return(this.wot.getSetting('fixedRowsTop')||this.wot.getSetting('columnHeaders').length)&&(this.wot.getSetting('fixedColumnsLeft')||this.wot.getSetting('rowHeaders').length)?true:false;},resetFixedPosition:function(){if(!this.wot.wtTable.holder.parentNode){return;}
var overlayRoot=this.clone.wtTable.holder.parentNode;var tableHeight=outerHeight(this.clone.wtTable.TABLE);var tableWidth=outerWidth(this.clone.wtTable.TABLE);if(this.trimmingContainer===window){var box=this.wot.wtTable.hider.getBoundingClientRect();var top=Math.ceil(box.top);var left=Math.ceil(box.left);var bottom=Math.ceil(box.bottom);var right=Math.ceil(box.right);var finalLeft;var finalTop;if(left<0&&(right-overlayRoot.offsetWidth)>0){finalLeft=-left+'px';}else{finalLeft='0';}
if(top<0&&(bottom-overlayRoot.offsetHeight)>0){finalTop=-top+'px';}else{finalTop='0';}
setOverlayPosition(overlayRoot,finalLeft,finalTop);}
overlayRoot.style.height=(tableHeight===0?tableHeight:tableHeight+4)+'px';overlayRoot.style.width=(tableWidth===0?tableWidth:tableWidth+4)+'px';}},{},WalkontableOverlay);;window.WalkontableTopLeftCornerOverlay=WalkontableTopLeftCornerOverlay;WalkontableOverlay.registerOverlay(WalkontableOverlay.CLONE_TOP_LEFT_CORNER,WalkontableTopLeftCornerOverlay);},{"_base":11,"helpers/dom/element":44}],16:[function(require,module,exports){"use strict";Object.defineProperties(exports,{WalkontableOverlays:{get:function(){return WalkontableOverlays;}},__esModule:{value:true}});var $___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__,$___46__46__47__46__46__47__46__46__47_helpers_47_unicode__,$___46__46__47__46__46__47__46__46__47_eventManager__;var $__0=($___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__=require("helpers/dom/element"),$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__||{default:$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__}),getScrollableElement=$__0.getScrollableElement,getScrollbarWidth=$__0.getScrollbarWidth,getScrollLeft=$__0.getScrollLeft,getScrollTop=$__0.getScrollTop;var isKey=($___46__46__47__46__46__47__46__46__47_helpers_47_unicode__=require("helpers/unicode"),$___46__46__47__46__46__47__46__46__47_helpers_47_unicode__&&$___46__46__47__46__46__47__46__46__47_helpers_47_unicode__.__esModule&&$___46__46__47__46__46__47__46__46__47_helpers_47_unicode__||{default:$___46__46__47__46__46__47__46__46__47_helpers_47_unicode__}).isKey;var EventManager=($___46__46__47__46__46__47__46__46__47_eventManager__=require("eventManager"),$___46__46__47__46__46__47__46__46__47_eventManager__&&$___46__46__47__46__46__47__46__46__47_eventManager__.__esModule&&$___46__46__47__46__46__47__46__46__47_eventManager__||{default:$___46__46__47__46__46__47__46__46__47_eventManager__}).EventManager;var WalkontableOverlays=function WalkontableOverlays(wotInstance){this.wot=wotInstance;this.instance=this.wot;this.eventManager=new EventManager(this.wot);this.wot.update('scrollbarWidth',getScrollbarWidth());this.wot.update('scrollbarHeight',getScrollbarWidth());this.mainTableScrollableElement=getScrollableElement(this.wot.wtTable.TABLE);this.topOverlay=WalkontableOverlay.createOverlay(WalkontableOverlay.CLONE_TOP,this.wot);if(typeof WalkontableBottomOverlay==='undefined'){this.bottomOverlay={needFullRender:false};}else{this.bottomOverlay=WalkontableOverlay.createOverlay(WalkontableOverlay.CLONE_BOTTOM,this.wot);}
this.leftOverlay=WalkontableOverlay.createOverlay(WalkontableOverlay.CLONE_LEFT,this.wot);if(this.topOverlay.needFullRender&&this.leftOverlay.needFullRender){this.topLeftCornerOverlay=WalkontableOverlay.createOverlay(WalkontableOverlay.CLONE_TOP_LEFT_CORNER,this.wot);}
if(this.bottomOverlay.needFullRender&&this.leftOverlay.needFullRender&&typeof WalkontableBottomLeftCornerOverlay!=='undefined'){this.bottomLeftCornerOverlay=WalkontableOverlay.createOverlay(WalkontableOverlay.CLONE_BOTTOM_LEFT_CORNER,this.wot);}else{this.bottomLeftCornerOverlay={needFullRender:false};}
if(this.wot.getSetting('debug')){this.debug=WalkontableOverlay.createOverlay(WalkontableOverlay.CLONE_DEBUG,this.wot);}
this.destroyed=false;this.keyPressed=false;this.spreaderLastSize={width:null,height:null};this.overlayScrollPositions={master:{top:0,left:0},top:{top:null,left:0},bottom:{top:null,left:0},left:{top:0,left:null}};this.registerListeners();};($traceurRuntime.createClass)(WalkontableOverlays,{refreshAll:function(){if(!this.wot.drawn){return;}
if(!this.wot.wtTable.holder.parentNode){this.destroy();return;}
this.wot.draw(true);this.topOverlay.onScroll();this.leftOverlay.onScroll();},registerListeners:function(){var $__3=this;this.eventManager.addEventListener(document.documentElement,'keydown',(function(event){return $__3.onKeyDown(event);}));this.eventManager.addEventListener(document.documentElement,'keyup',(function(){return $__3.onKeyUp();}));this.eventManager.addEventListener(document,'visibilitychange',(function(){return $__3.onKeyUp();}));this.eventManager.addEventListener(this.mainTableScrollableElement,'scroll',(function(event){return $__3.onTableScroll(event);}));if(this.topOverlay.needFullRender){this.eventManager.addEventListener(this.topOverlay.clone.wtTable.holder,'scroll',(function(event){return $__3.onTableScroll(event);}));this.eventManager.addEventListener(this.topOverlay.clone.wtTable.holder,'wheel',(function(event){return $__3.onTableScroll(event);}));}
if(this.bottomOverlay.needFullRender){this.eventManager.addEventListener(this.bottomOverlay.clone.wtTable.holder,'scroll',(function(event){return $__3.onTableScroll(event);}));this.eventManager.addEventListener(this.bottomOverlay.clone.wtTable.holder,'wheel',(function(event){return $__3.onTableScroll(event);}));}
if(this.leftOverlay.needFullRender){this.eventManager.addEventListener(this.leftOverlay.clone.wtTable.holder,'scroll',(function(event){return $__3.onTableScroll(event);}));this.eventManager.addEventListener(this.leftOverlay.clone.wtTable.holder,'wheel',(function(event){return $__3.onTableScroll(event);}));}
if(this.topOverlay.trimmingContainer!==window&&this.leftOverlay.trimmingContainer!==window){this.eventManager.addEventListener(window,'wheel',(function(event){var overlay;var deltaY=event.wheelDeltaY||event.deltaY;var deltaX=event.wheelDeltaX||event.deltaX;if($__3.topOverlay.clone.wtTable.holder.contains(event.realTarget)){overlay='top';}else if($__3.bottomOverlay.clone&&$__3.bottomOverlay.clone.wtTable.holder.contains(event.realTarget)){overlay='bottom';}else if($__3.leftOverlay.clone.wtTable.holder.contains(event.realTarget)){overlay='left';}
if(overlay=='top'&&deltaY!==0){event.preventDefault();}else if(overlay=='left'&&deltaX!==0){event.preventDefault();}else if(overlay=='bottom'&&deltaY!==0){event.preventDefault();}}));}},onTableScroll:function(event){if(Handsontable.mobileBrowser){return;}
if(this.keyPressed&&this.mainTableScrollableElement!==window&&!event.target.contains(this.mainTableScrollableElement)){return;}
if(event.type==='scroll'){this.syncScrollPositions(event);}else{this.translateMouseWheelToScroll(event);}},onKeyDown:function(event){this.keyPressed=isKey(event.keyCode,'ARROW_UP|ARROW_RIGHT|ARROW_DOWN|ARROW_LEFT');},onKeyUp:function(){this.keyPressed=false;},translateMouseWheelToScroll:function(event){var topOverlay=this.topOverlay.clone.wtTable.holder;var bottomOverlay=this.bottomOverlay.clone?this.bottomOverlay.clone.wtTable.holder:null;var leftOverlay=this.leftOverlay.clone.wtTable.holder;var eventMockup={type:'wheel'};var tempElem=event.target;var deltaY=event.wheelDeltaY||(-1)*event.deltaY;var deltaX=event.wheelDeltaX||(-1)*event.deltaX;var parentHolder;while(tempElem!=document&&tempElem!=null){if(tempElem.className.indexOf('wtHolder')>-1){parentHolder=tempElem;break;}
tempElem=tempElem.parentNode;}
eventMockup.target=parentHolder;if(parentHolder==topOverlay){this.syncScrollPositions(eventMockup,(-0.2)*deltaY);}else if(parentHolder==bottomOverlay){this.syncScrollPositions(eventMockup,(-0.2)*deltaY);}else if(parentHolder==leftOverlay){this.syncScrollPositions(eventMockup,(-0.2)*deltaX);}
return false;},syncScrollPositions:function(event){var fakeScrollValue=arguments[1]!==(void 0)?arguments[1]:null;if(this.destroyed){return;}
if(arguments.length===0){this.syncScrollWithMaster();return;}
var master=this.mainTableScrollableElement;var target=event.target;var tempScrollValue=0;var scrollValueChanged=false;var topOverlay;var leftOverlay;var bottomOverlay;if(this.topOverlay.needFullRender){topOverlay=this.topOverlay.clone.wtTable.holder;}
if(this.bottomOverlay.needFullRender){bottomOverlay=this.bottomOverlay.clone.wtTable.holder;}
if(this.leftOverlay.needFullRender){leftOverlay=this.leftOverlay.clone.wtTable.holder;}
if(target===document){target=window;}
if(target===master){tempScrollValue=getScrollLeft(target);if(this.overlayScrollPositions.master.left!==tempScrollValue){this.overlayScrollPositions.master.left=tempScrollValue;scrollValueChanged=true;if(topOverlay){topOverlay.scrollLeft=tempScrollValue;}
if(bottomOverlay){bottomOverlay.scrollLeft=tempScrollValue;}}
tempScrollValue=getScrollTop(target);if(this.overlayScrollPositions.master.top!==tempScrollValue){this.overlayScrollPositions.master.top=tempScrollValue;scrollValueChanged=true;if(leftOverlay){leftOverlay.scrollTop=tempScrollValue;}}}else if(target===bottomOverlay){tempScrollValue=getScrollLeft(target);if(this.overlayScrollPositions.bottom.left!==tempScrollValue){this.overlayScrollPositions.bottom.left=tempScrollValue;scrollValueChanged=true;master.scrollLeft=tempScrollValue;}
if(fakeScrollValue!==null){scrollValueChanged=true;master.scrollTop+=fakeScrollValue;}}else if(target===topOverlay){tempScrollValue=getScrollLeft(target);if(this.overlayScrollPositions.top.left!==tempScrollValue){this.overlayScrollPositions.top.left=tempScrollValue;scrollValueChanged=true;master.scrollLeft=tempScrollValue;}
if(fakeScrollValue!==null){scrollValueChanged=true;master.scrollTop+=fakeScrollValue;}}else if(target===leftOverlay){tempScrollValue=getScrollTop(target);if(this.overlayScrollPositions.left.top!==tempScrollValue){this.overlayScrollPositions.left.top=tempScrollValue;scrollValueChanged=true;master.scrollTop=tempScrollValue;}
if(fakeScrollValue!==null){scrollValueChanged=true;master.scrollLeft+=fakeScrollValue;}}
if(!this.keyPressed&&scrollValueChanged&&event.type==='scroll'){this.refreshAll();}},syncScrollWithMaster:function(){var master=this.topOverlay.mainTableScrollableElement;if(this.topOverlay.needFullRender){this.topOverlay.clone.wtTable.holder.scrollLeft=master.scrollLeft;}
if(this.leftOverlay.needFullRender){this.leftOverlay.clone.wtTable.holder.scrollTop=master.scrollTop;}},destroy:function(){this.eventManager.destroy();this.topOverlay.destroy();if(this.bottomOverlay.clone){this.bottomOverlay.destroy();}
this.leftOverlay.destroy();if(this.topLeftCornerOverlay){this.topLeftCornerOverlay.destroy();}
if(this.bottomLeftCornerOverlay&&this.bottomLeftCornerOverlay.clone){this.bottomLeftCornerOverlay.destroy();}
if(this.debug){this.debug.destroy();}
this.destroyed=true;},refresh:function(){var fastDraw=arguments[0]!==(void 0)?arguments[0]:false;if(this.topOverlay.areElementSizesAdjusted&&this.leftOverlay.areElementSizesAdjusted){var container=this.wot.wtTable.wtRootElement.parentNode||this.wot.wtTable.wtRootElement;var width=container.clientWidth;var height=container.clientHeight;if(width!==this.spreaderLastSize.width||height!==this.spreaderLastSize.height){this.spreaderLastSize.width=width;this.spreaderLastSize.height=height;this.adjustElementsSize();}}
if(this.bottomOverlay.clone){this.bottomOverlay.refresh(fastDraw);}
this.leftOverlay.refresh(fastDraw);this.topOverlay.refresh(fastDraw);if(this.topLeftCornerOverlay){this.topLeftCornerOverlay.refresh(fastDraw);}
if(this.bottomLeftCornerOverlay&&this.bottomLeftCornerOverlay.clone){this.bottomLeftCornerOverlay.refresh(fastDraw);}
if(this.debug){this.debug.refresh(fastDraw);}},adjustElementsSize:function(){var force=arguments[0]!==(void 0)?arguments[0]:false;var totalColumns=this.wot.getSetting('totalColumns');var totalRows=this.wot.getSetting('totalRows');var headerRowSize=this.wot.wtViewport.getRowHeaderWidth();var headerColumnSize=this.wot.wtViewport.getColumnHeaderHeight();var hiderStyle=this.wot.wtTable.hider.style;hiderStyle.width=(headerRowSize+this.leftOverlay.sumCellSizes(0,totalColumns))+'px';hiderStyle.height=(headerColumnSize+this.topOverlay.sumCellSizes(0,totalRows)+1)+'px';this.topOverlay.adjustElementsSize(force);this.leftOverlay.adjustElementsSize(force);if(this.bottomOverlay.clone){this.bottomOverlay.adjustElementsSize(force);}},applyToDOM:function(){if(!this.topOverlay.areElementSizesAdjusted||!this.leftOverlay.areElementSizesAdjusted){this.adjustElementsSize();}
this.topOverlay.applyToDOM();if(this.bottomOverlay.clone){this.bottomOverlay.applyToDOM();}
this.leftOverlay.applyToDOM();}},{});;window.WalkontableOverlays=WalkontableOverlays;},{"eventManager":40,"helpers/dom/element":44,"helpers/unicode":52}],17:[function(require,module,exports){"use strict";Object.defineProperties(exports,{WalkontableScroll:{get:function(){return WalkontableScroll;}},__esModule:{value:true}});var WalkontableScroll=function WalkontableScroll(wotInstance){this.wot=wotInstance;this.instance=wotInstance;};($traceurRuntime.createClass)(WalkontableScroll,{scrollViewport:function(coords){if(!this.wot.drawn){return;}
var totalRows=this.wot.getSetting('totalRows');var totalColumns=this.wot.getSetting('totalColumns');var fixedRowsTop=this.instance.getSetting('fixedRowsTop');var fixedRowsBottom=this.instance.getSetting('fixedRowsBottom');var fixedColumnsLeft=this.instance.getSetting('fixedColumnsLeft');if(coords.row<0||coords.row>totalRows-1){throw new Error('row '+coords.row+' does not exist');}
if(coords.col<0||coords.col>totalColumns-1){throw new Error('column '+coords.col+' does not exist');}
if(coords.row>this.instance.wtTable.getLastVisibleRow()&&coords.row<totalRows-fixedRowsBottom){this.wot.wtOverlays.topOverlay.scrollTo(coords.row,true);}else if(coords.row>=fixedRowsTop&&coords.row<this.instance.wtTable.getFirstVisibleRow()){this.wot.wtOverlays.topOverlay.scrollTo(coords.row);}
if(coords.col>this.instance.wtTable.getLastVisibleColumn()){this.wot.wtOverlays.leftOverlay.scrollTo(coords.col,true);}else if(coords.col>=fixedColumnsLeft&&coords.col<this.instance.wtTable.getFirstVisibleColumn()){this.wot.wtOverlays.leftOverlay.scrollTo(coords.col);}}},{});;window.WalkontableScroll=WalkontableScroll;},{}],18:[function(require,module,exports){"use strict";Object.defineProperties(exports,{WalkontableSelection:{get:function(){return WalkontableSelection;}},__esModule:{value:true}});var $___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__,$__border__,$__cell_47_coords__,$__cell_47_range__;var addClass=($___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__=require("helpers/dom/element"),$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__||{default:$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__}).addClass;var WalkontableBorder=($__border__=require("border"),$__border__&&$__border__.__esModule&&$__border__||{default:$__border__}).WalkontableBorder;var WalkontableCellCoords=($__cell_47_coords__=require("cell/coords"),$__cell_47_coords__&&$__cell_47_coords__.__esModule&&$__cell_47_coords__||{default:$__cell_47_coords__}).WalkontableCellCoords;var WalkontableCellRange=($__cell_47_range__=require("cell/range"),$__cell_47_range__&&$__cell_47_range__.__esModule&&$__cell_47_range__||{default:$__cell_47_range__}).WalkontableCellRange;var WalkontableSelection=function WalkontableSelection(settings,cellRange){this.settings=settings;this.cellRange=cellRange||null;this.instanceBorders={};};($traceurRuntime.createClass)(WalkontableSelection,{getBorder:function(wotInstance){if(this.instanceBorders[wotInstance.guid]){return this.instanceBorders[wotInstance.guid];}
this.instanceBorders[wotInstance.guid]=new WalkontableBorder(wotInstance,this.settings);},isEmpty:function(){return this.cellRange===null;},add:function(coords){if(this.isEmpty()){this.cellRange=new WalkontableCellRange(coords,coords,coords);}else{this.cellRange.expand(coords);}},replace:function(oldCoords,newCoords){if(!this.isEmpty()){if(this.cellRange.from.isEqual(oldCoords)){this.cellRange.from=newCoords;return true;}
if(this.cellRange.to.isEqual(oldCoords)){this.cellRange.to=newCoords;return true;}}
return false;},clear:function(){this.cellRange=null;},getCorners:function(){var topLeft=this.cellRange.getTopLeftCorner();var bottomRight=this.cellRange.getBottomRightCorner();return[topLeft.row,topLeft.col,bottomRight.row,bottomRight.col];},addClassAtCoords:function(wotInstance,sourceRow,sourceColumn,className){var TD=wotInstance.wtTable.getCell(new WalkontableCellCoords(sourceRow,sourceColumn));if(typeof TD==='object'){addClass(TD,className);}},draw:function(wotInstance){if(this.isEmpty()){if(this.settings.border){var border=this.getBorder(wotInstance);if(border){border.disappear();}}
return;}
var renderedRows=wotInstance.wtTable.getRenderedRowsCount();var renderedColumns=wotInstance.wtTable.getRenderedColumnsCount();var corners=this.getCorners();var sourceRow,sourceCol,TH;for(var column=0;column<renderedColumns;column++){sourceCol=wotInstance.wtTable.columnFilter.renderedToSource(column);if(sourceCol>=corners[1]&&sourceCol<=corners[3]){TH=wotInstance.wtTable.getColumnHeader(sourceCol);if(TH&&this.settings.highlightColumnClassName){addClass(TH,this.settings.highlightColumnClassName);}}}
for(var row=0;row<renderedRows;row++){sourceRow=wotInstance.wtTable.rowFilter.renderedToSource(row);if(sourceRow>=corners[0]&&sourceRow<=corners[2]){TH=wotInstance.wtTable.getRowHeader(sourceRow);if(TH&&this.settings.highlightRowClassName){addClass(TH,this.settings.highlightRowClassName);}}
for(var column$__5=0;column$__5<renderedColumns;column$__5++){sourceCol=wotInstance.wtTable.columnFilter.renderedToSource(column$__5);if(sourceRow>=corners[0]&&sourceRow<=corners[2]&&sourceCol>=corners[1]&&sourceCol<=corners[3]){if(this.settings.className){this.addClassAtCoords(wotInstance,sourceRow,sourceCol,this.settings.className);}}else if(sourceRow>=corners[0]&&sourceRow<=corners[2]){if(this.settings.highlightRowClassName){this.addClassAtCoords(wotInstance,sourceRow,sourceCol,this.settings.highlightRowClassName);}}else if(sourceCol>=corners[1]&&sourceCol<=corners[3]){if(this.settings.highlightColumnClassName){this.addClassAtCoords(wotInstance,sourceRow,sourceCol,this.settings.highlightColumnClassName);}}}}
wotInstance.getSetting('onBeforeDrawBorders',corners,this.settings.className);if(this.settings.border){var border$__6=this.getBorder(wotInstance);if(border$__6){border$__6.appear(corners);}}}},{});;window.WalkontableSelection=WalkontableSelection;},{"border":2,"cell/coords":5,"cell/range":6,"helpers/dom/element":44}],19:[function(require,module,exports){"use strict";Object.defineProperties(exports,{WalkontableSettings:{get:function(){return WalkontableSettings;}},__esModule:{value:true}});var $___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__;var fastInnerText=($___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__=require("helpers/dom/element"),$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__||{default:$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__}).fastInnerText;var WalkontableSettings=function WalkontableSettings(wotInstance,settings){var $__1=this;this.wot=wotInstance;this.instance=wotInstance;this.defaults={table:void 0,debug:false,externalRowCalculator:false,stretchH:'none',currentRowClassName:null,currentColumnClassName:null,data:void 0,fixedColumnsLeft:0,fixedRowsTop:0,fixedRowsBottom:0,minSpareRows:0,rowHeaders:function(){return[];},columnHeaders:function(){return[];},totalRows:void 0,totalColumns:void 0,cellRenderer:(function(row,column,TD){var cellData=$__1.getSetting('data',row,column);fastInnerText(TD,cellData===void 0||cellData===null?'':cellData);}),columnWidth:function(col){return;},rowHeight:function(row){return;},defaultRowHeight:23,defaultColumnWidth:50,selections:null,hideBorderOnMouseDownOver:false,viewportRowCalculatorOverride:null,viewportColumnCalculatorOverride:null,onCellMouseDown:null,onCellMouseOver:null,onCellDblClick:null,onCellCornerMouseDown:null,onCellCornerDblClick:null,beforeDraw:null,onDraw:null,onBeforeDrawBorders:null,onScrollVertically:null,onScrollHorizontally:null,onBeforeTouchScroll:null,onAfterMomentumScroll:null,scrollbarWidth:10,scrollbarHeight:10,renderAllRows:false,groups:false};this.settings={};for(var i in this.defaults){if(this.defaults.hasOwnProperty(i)){if(settings[i]!==void 0){this.settings[i]=settings[i];}else if(this.defaults[i]===void 0){throw new Error('A required setting "'+i+'" was not provided');}else{this.settings[i]=this.defaults[i];}}}};($traceurRuntime.createClass)(WalkontableSettings,{update:function(settings,value){if(value===void 0){for(var i in settings){if(settings.hasOwnProperty(i)){this.settings[i]=settings[i];}}}else{this.settings[settings]=value;}
return this.wot;},getSetting:function(key,param1,param2,param3,param4){if(typeof this.settings[key]==='function'){return this.settings[key](param1,param2,param3,param4);}else if(param1!==void 0&&Array.isArray(this.settings[key])){return this.settings[key][param1];}else{return this.settings[key];}},has:function(key){return!!this.settings[key];}},{});;window.WalkontableSettings=WalkontableSettings;},{"helpers/dom/element":44}],20:[function(require,module,exports){"use strict";Object.defineProperties(exports,{WalkontableTable:{get:function(){return WalkontableTable;}},__esModule:{value:true}});var $___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__,$__cell_47_coords__,$__cell_47_range__,$__filter_47_column__,$__filter_47_row__,$__tableRenderer__;var $__0=($___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__=require("helpers/dom/element"),$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__||{default:$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__}),getStyle=$__0.getStyle,getTrimmingContainer=$__0.getTrimmingContainer,hasClass=$__0.hasClass,index=$__0.index,offset=$__0.offset,removeClass=$__0.removeClass,removeTextNodes=$__0.removeTextNodes,overlayContainsElement=$__0.overlayContainsElement;var WalkontableCellCoords=($__cell_47_coords__=require("cell/coords"),$__cell_47_coords__&&$__cell_47_coords__.__esModule&&$__cell_47_coords__||{default:$__cell_47_coords__}).WalkontableCellCoords;var WalkontableCellRange=($__cell_47_range__=require("cell/range"),$__cell_47_range__&&$__cell_47_range__.__esModule&&$__cell_47_range__||{default:$__cell_47_range__}).WalkontableCellRange;var WalkontableColumnFilter=($__filter_47_column__=require("filter/column"),$__filter_47_column__&&$__filter_47_column__.__esModule&&$__filter_47_column__||{default:$__filter_47_column__}).WalkontableColumnFilter;var WalkontableRowFilter=($__filter_47_row__=require("filter/row"),$__filter_47_row__&&$__filter_47_row__.__esModule&&$__filter_47_row__||{default:$__filter_47_row__}).WalkontableRowFilter;var WalkontableTableRenderer=($__tableRenderer__=require("tableRenderer"),$__tableRenderer__&&$__tableRenderer__.__esModule&&$__tableRenderer__||{default:$__tableRenderer__}).WalkontableTableRenderer;var WalkontableTable=function WalkontableTable(wotInstance,table){this.wot=wotInstance;this.instance=this.wot;this.TABLE=table;this.TBODY=null;this.THEAD=null;this.COLGROUP=null;this.tableOffset=0;this.holderOffset=0;removeTextNodes(this.TABLE);this.spreader=this.createSpreader(this.TABLE);this.hider=this.createHider(this.spreader);this.holder=this.createHolder(this.hider);this.wtRootElement=this.holder.parentNode;this.alignOverlaysWithTrimmingContainer();this.fixTableDomTree();this.colgroupChildrenLength=this.COLGROUP.childNodes.length;this.theadChildrenLength=this.THEAD.firstChild?this.THEAD.firstChild.childNodes.length:0;this.tbodyChildrenLength=this.TBODY.childNodes.length;this.rowFilter=null;this.columnFilter=null;};($traceurRuntime.createClass)(WalkontableTable,{fixTableDomTree:function(){this.TBODY=this.TABLE.querySelector('tbody');if(!this.TBODY){this.TBODY=document.createElement('tbody');this.TABLE.appendChild(this.TBODY);}
this.THEAD=this.TABLE.querySelector('thead');if(!this.THEAD){this.THEAD=document.createElement('thead');this.TABLE.insertBefore(this.THEAD,this.TBODY);}
this.COLGROUP=this.TABLE.querySelector('colgroup');if(!this.COLGROUP){this.COLGROUP=document.createElement('colgroup');this.TABLE.insertBefore(this.COLGROUP,this.THEAD);}
if(this.wot.getSetting('columnHeaders').length&&!this.THEAD.childNodes.length){this.THEAD.appendChild(document.createElement('TR'));}},createSpreader:function(table){var parent=table.parentNode;var spreader;if(!parent||parent.nodeType!==1||!hasClass(parent,'wtHolder')){spreader=document.createElement('div');spreader.className='wtSpreader';if(parent){parent.insertBefore(spreader,table);}
spreader.appendChild(table);}
spreader.style.position='relative';return spreader;},createHider:function(spreader){var parent=spreader.parentNode;var hider;if(!parent||parent.nodeType!==1||!hasClass(parent,'wtHolder')){hider=document.createElement('div');hider.className='wtHider';if(parent){parent.insertBefore(hider,spreader);}
hider.appendChild(spreader);}
return hider;},createHolder:function(hider){var parent=hider.parentNode;var holder;if(!parent||parent.nodeType!==1||!hasClass(parent,'wtHolder')){holder=document.createElement('div');holder.style.position='relative';holder.className='wtHolder';if(parent){parent.insertBefore(holder,hider);}
if(!this.isWorkingOnClone()){holder.parentNode.className+='ht_master handsontable';}
holder.appendChild(hider);}
return holder;},alignOverlaysWithTrimmingContainer:function(){var trimmingElement=getTrimmingContainer(this.wtRootElement);if(!this.isWorkingOnClone()){this.holder.parentNode.style.position='relative';if(trimmingElement===window){this.holder.style.overflow='visible';this.wtRootElement.style.overflow='visible';}else{this.holder.style.width=getStyle(trimmingElement,'width');this.holder.style.height=getStyle(trimmingElement,'height');this.holder.style.overflow='';}}},isWorkingOnClone:function(){return!!this.wot.cloneSource;},draw:function(fastDraw){var totalRows=this.instance.getSetting('totalRows');if(!this.isWorkingOnClone()){this.holderOffset=offset(this.holder);fastDraw=this.wot.wtViewport.createRenderCalculators(fastDraw);}
if(fastDraw){if(!this.isWorkingOnClone()){this.wot.wtViewport.createVisibleCalculators();}
if(this.wot.wtOverlays){this.wot.wtOverlays.refresh(true);}}else{if(this.isWorkingOnClone()){this.tableOffset=this.wot.cloneSource.wtTable.tableOffset;}else{this.tableOffset=offset(this.TABLE);}
var startRow;if(WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay,WalkontableOverlay.CLONE_DEBUG)||WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay,WalkontableOverlay.CLONE_TOP)||WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay,WalkontableOverlay.CLONE_TOP_LEFT_CORNER)){startRow=0;}else if(WalkontableOverlay.isOverlayTypeOf(this.instance.cloneOverlay,WalkontableOverlay.CLONE_BOTTOM)||WalkontableOverlay.isOverlayTypeOf(this.instance.cloneOverlay,WalkontableOverlay.CLONE_BOTTOM_LEFT_CORNER)){startRow=totalRows-this.wot.getSetting('fixedRowsBottom');}else{startRow=this.wot.wtViewport.rowsRenderCalculator.startRow;}
var startColumn;if(WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay,WalkontableOverlay.CLONE_DEBUG)||WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay,WalkontableOverlay.CLONE_LEFT)||WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay,WalkontableOverlay.CLONE_TOP_LEFT_CORNER)||WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay,WalkontableOverlay.CLONE_BOTTOM_LEFT_CORNER)){startColumn=0;}else{startColumn=this.wot.wtViewport.columnsRenderCalculator.startColumn;}
this.rowFilter=new WalkontableRowFilter(startRow,totalRows,this.wot.getSetting('columnHeaders').length);this.columnFilter=new WalkontableColumnFilter(startColumn,this.wot.getSetting('totalColumns'),this.wot.getSetting('rowHeaders').length);this._doDraw();this.alignOverlaysWithTrimmingContainer();}
this.refreshSelections(fastDraw);if(!this.isWorkingOnClone()){this.wot.wtOverlays.topOverlay.resetFixedPosition();if(this.wot.wtOverlays.bottomOverlay.clone){this.wot.wtOverlays.bottomOverlay.resetFixedPosition();}
this.wot.wtOverlays.leftOverlay.resetFixedPosition();if(this.wot.wtOverlays.topLeftCornerOverlay){this.wot.wtOverlays.topLeftCornerOverlay.resetFixedPosition();}
if(this.instance.wtOverlays.bottomLeftCornerOverlay&&this.instance.wtOverlays.bottomLeftCornerOverlay.clone){this.wot.wtOverlays.bottomLeftCornerOverlay.resetFixedPosition();}}
this.wot.drawn=true;return this;},_doDraw:function(){var wtRenderer=new WalkontableTableRenderer(this);wtRenderer.render();},removeClassFromCells:function(className){var nodes=this.TABLE.querySelectorAll('.'+className);for(var i=0,len=nodes.length;i<len;i++){removeClass(nodes[i],className);}},refreshSelections:function(fastDraw){if(!this.wot.selections){return;}
var len=this.wot.selections.length;if(fastDraw){for(var i=0;i<len;i++){if(this.wot.selections[i].settings.className){this.removeClassFromCells(this.wot.selections[i].settings.className);}
if(this.wot.selections[i].settings.highlightRowClassName){this.removeClassFromCells(this.wot.selections[i].settings.highlightRowClassName);}
if(this.wot.selections[i].settings.highlightColumnClassName){this.removeClassFromCells(this.wot.selections[i].settings.highlightColumnClassName);}}}
for(var i$__7=0;i$__7<len;i$__7++){this.wot.selections[i$__7].draw(this.wot,fastDraw);}},getCell:function(coords){if(this.isRowBeforeRenderedRows(coords.row)){return-1;}else if(this.isRowAfterRenderedRows(coords.row)){return-2;}
var TR=this.TBODY.childNodes[this.rowFilter.sourceToRendered(coords.row)];if(TR){return TR.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(coords.col)];}},getColumnHeader:function(col){var level=arguments[1]!==(void 0)?arguments[1]:0;var TR=this.THEAD.childNodes[level];if(TR){return TR.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(col)];}},getRowHeader:function(row){if(this.columnFilter.sourceColumnToVisibleRowHeadedColumn(0)===0){return null;}
var TR=this.TBODY.childNodes[this.rowFilter.sourceToRendered(row)];if(TR){return TR.childNodes[0];}},getCoords:function(TD){var TR=TD.parentNode;var row=index(TR);if(TR.parentNode===this.THEAD){row=this.rowFilter.visibleColHeadedRowToSourceRow(row);}else{row=this.rowFilter.renderedToSource(row);}
var col=this.columnFilter.visibleRowHeadedColumnToSourceColumn(TD.cellIndex);return new WalkontableCellCoords(row,col);},getTrForRow:function(row){return this.TBODY.childNodes[this.rowFilter.sourceToRendered(row)];},getFirstRenderedRow:function(){return this.wot.wtViewport.rowsRenderCalculator.startRow;},getFirstVisibleRow:function(){return this.wot.wtViewport.rowsVisibleCalculator.startRow;},getFirstRenderedColumn:function(){return this.wot.wtViewport.columnsRenderCalculator.startColumn;},getFirstVisibleColumn:function(){return this.wot.wtViewport.columnsVisibleCalculator.startColumn;},getLastRenderedRow:function(){return this.wot.wtViewport.rowsRenderCalculator.endRow;},getLastVisibleRow:function(){return this.wot.wtViewport.rowsVisibleCalculator.endRow;},getLastRenderedColumn:function(){return this.wot.wtViewport.columnsRenderCalculator.endColumn;},getLastVisibleColumn:function(){return this.wot.wtViewport.columnsVisibleCalculator.endColumn;},isRowBeforeRenderedRows:function(row){return(this.rowFilter.sourceToRendered(row)<0&&row>=0);},isRowAfterViewport:function(row){return(this.rowFilter.sourceToRendered(row)>this.getLastVisibleRow());},isRowAfterRenderedRows:function(row){return(this.rowFilter.sourceToRendered(row)>this.getLastRenderedRow());},isColumnBeforeViewport:function(column){return this.columnFilter.sourceToRendered(column)<0&&column>=0;},isColumnAfterViewport:function(column){return(this.columnFilter.sourceToRendered(column)>this.getLastVisibleColumn());},isLastRowFullyVisible:function(){return this.getLastVisibleRow()===this.getLastRenderedRow();},isLastColumnFullyVisible:function(){return this.getLastVisibleColumn()===this.getLastRenderedColumn();},getRenderedColumnsCount:function(){if(WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay,WalkontableOverlay.CLONE_DEBUG)){return this.wot.getSetting('totalColumns');}else if(WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay,WalkontableOverlay.CLONE_LEFT)||WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay,WalkontableOverlay.CLONE_TOP_LEFT_CORNER)||WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay,WalkontableOverlay.CLONE_BOTTOM_LEFT_CORNER)){return this.wot.getSetting('fixedColumnsLeft');}else{return this.wot.wtViewport.columnsRenderCalculator.count;}},getRenderedRowsCount:function(){if(WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay,WalkontableOverlay.CLONE_DEBUG)){return this.wot.getSetting('totalRows');}else if(WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay,WalkontableOverlay.CLONE_TOP)||WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay,WalkontableOverlay.CLONE_TOP_LEFT_CORNER)){return this.wot.getSetting('fixedRowsTop');}else if(WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay,WalkontableOverlay.CLONE_BOTTOM)||WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay,WalkontableOverlay.CLONE_BOTTOM_LEFT_CORNER)){return this.instance.getSetting('fixedRowsBottom');}
return this.wot.wtViewport.rowsRenderCalculator.count;},getVisibleRowsCount:function(){return this.wot.wtViewport.rowsVisibleCalculator.count;},allRowsInViewport:function(){return this.wot.getSetting('totalRows')==this.getVisibleRowsCount();},getRowHeight:function(sourceRow){var height=this.wot.wtSettings.settings.rowHeight(sourceRow);var oversizedHeight=this.wot.wtViewport.oversizedRows[sourceRow];if(oversizedHeight!==void 0){height=height?Math.max(height,oversizedHeight):oversizedHeight;}
return height;},getColumnHeaderHeight:function(level){var height=this.wot.wtSettings.settings.defaultRowHeight;var oversizedHeight=this.wot.wtViewport.oversizedColumnHeaders[level];if(oversizedHeight!==void 0){height=height?Math.max(height,oversizedHeight):oversizedHeight;}
return height;},getVisibleColumnsCount:function(){return this.wot.wtViewport.columnsVisibleCalculator.count;},allColumnsInViewport:function(){return this.wot.getSetting('totalColumns')==this.getVisibleColumnsCount();},getColumnWidth:function(sourceColumn){var width=this.wot.wtSettings.settings.columnWidth;if(typeof width==='function'){width=width(sourceColumn);}else if(typeof width==='object'){width=width[sourceColumn];}
return width||this.wot.wtSettings.settings.defaultColumnWidth;},getStretchedColumnWidth:function(sourceColumn){var columnWidth=this.getColumnWidth(sourceColumn);var width=[void 0,null].indexOf(columnWidth)===-1?columnWidth:this.instance.wtSettings.settings.defaultColumnWidth;var calculator=this.wot.wtViewport.columnsRenderCalculator;if(calculator){var stretchedWidth=calculator.getStretchedColumnWidth(sourceColumn,width);if(stretchedWidth){width=stretchedWidth;}}
return width;}},{});;window.WalkontableTable=WalkontableTable;},{"cell/coords":5,"cell/range":6,"filter/column":9,"filter/row":10,"helpers/dom/element":44,"tableRenderer":21}],21:[function(require,module,exports){"use strict";Object.defineProperties(exports,{WalkontableTableRenderer:{get:function(){return WalkontableTableRenderer;}},__esModule:{value:true}});var $___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__;var $__0=($___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__=require("helpers/dom/element"),$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__||{default:$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__}),addClass=$__0.addClass,empty=$__0.empty,getScrollbarWidth=$__0.getScrollbarWidth,hasClass=$__0.hasClass,innerHeight=$__0.innerHeight;var WalkontableTableRenderer=function WalkontableTableRenderer(wtTable){this.wtTable=wtTable;this.wot=wtTable.instance;this.instance=wtTable.instance;this.rowFilter=wtTable.rowFilter;this.columnFilter=wtTable.columnFilter;this.TABLE=wtTable.TABLE;this.THEAD=wtTable.THEAD;this.TBODY=wtTable.TBODY;this.COLGROUP=wtTable.COLGROUP;this.rowHeaders=[];this.rowHeaderCount=0;this.columnHeaders=[];this.columnHeaderCount=0;this.fixedRowsTop=0;this.fixedRowsBottom=0;};($traceurRuntime.createClass)(WalkontableTableRenderer,{render:function(){if(!this.wtTable.isWorkingOnClone()){this.wot.getSetting('beforeDraw',true);}
this.rowHeaders=this.wot.getSetting('rowHeaders');this.rowHeaderCount=this.rowHeaders.length;this.fixedRowsTop=this.wot.getSetting('fixedRowsTop');this.fixedRowsBottom=this.wot.getSetting('fixedRowsBottom');this.columnHeaders=this.wot.getSetting('columnHeaders');this.columnHeaderCount=this.columnHeaders.length;var columnsToRender=this.wtTable.getRenderedColumnsCount();var rowsToRender=this.wtTable.getRenderedRowsCount();var totalColumns=this.wot.getSetting('totalColumns');var totalRows=this.wot.getSetting('totalRows');var workspaceWidth;var adjusted=false;if(WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay,WalkontableOverlay.CLONE_BOTTOM)||WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay,WalkontableOverlay.CLONE_BOTTOM_LEFT_CORNER)){this.columnHeaders=[];this.columnHeaderCount=0;}
if(totalColumns>0){this.adjustAvailableNodes();adjusted=true;this.renderColumnHeaders();this.renderRows(totalRows,rowsToRender,columnsToRender);if(!this.wtTable.isWorkingOnClone()){workspaceWidth=this.wot.wtViewport.getWorkspaceWidth();this.wot.wtViewport.containerWidth=null;}
this.adjustColumnHeaderHeights();this.adjustColumnWidths(columnsToRender);this.markOversizedColumns();}
if(!adjusted){this.adjustAvailableNodes();}
this.removeRedundantRows(rowsToRender);if(!this.wtTable.isWorkingOnClone()){this.markOversizedRows();this.wot.wtViewport.createVisibleCalculators();this.wot.wtOverlays.refresh(false);this.wot.wtOverlays.applyToDOM();if(workspaceWidth!==this.wot.wtViewport.getWorkspaceWidth()){this.wot.wtViewport.containerWidth=null;var firstRendered=this.wtTable.getFirstRenderedColumn();var lastRendered=this.wtTable.getLastRenderedColumn();for(var i=firstRendered;i<lastRendered;i++){var width=this.wtTable.getStretchedColumnWidth(i);var renderedIndex=this.columnFilter.sourceToRendered(i);this.COLGROUP.childNodes[renderedIndex+this.rowHeaderCount].style.width=width+'px';}}
this.wot.getSetting('onDraw',true);}else if(WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay,WalkontableOverlay.CLONE_BOTTOM)){var masterOverlay=this.wot.cloneOverlay.instance;this.wot.cloneOverlay.markOversizedFixedBottomRows();masterOverlay.wtOverlays.adjustElementsSize();}},removeRedundantRows:function(renderedRowsCount){while(this.wtTable.tbodyChildrenLength>renderedRowsCount){this.TBODY.removeChild(this.TBODY.lastChild);this.wtTable.tbodyChildrenLength--;}},renderRows:function(totalRows,rowsToRender,columnsToRender){var lastTD,TR;var visibleRowIndex=0;var sourceRowIndex=this.rowFilter.renderedToSource(visibleRowIndex);var isWorkingOnClone=this.wtTable.isWorkingOnClone();while(sourceRowIndex<totalRows&&sourceRowIndex>=0){if(visibleRowIndex>1000){throw new Error('Security brake: Too much TRs. Please define height for your table, which will enforce scrollbars.');}
if(rowsToRender!==void 0&&visibleRowIndex===rowsToRender){break;}
TR=this.getOrCreateTrForRow(visibleRowIndex,TR);this.renderRowHeaders(sourceRowIndex,TR);this.adjustColumns(TR,columnsToRender+this.rowHeaderCount);lastTD=this.renderCells(sourceRowIndex,TR,columnsToRender);if(!isWorkingOnClone||WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay,WalkontableOverlay.CLONE_BOTTOM)){this.resetOversizedRow(sourceRowIndex);}
if(TR.firstChild){var height=this.wot.wtTable.getRowHeight(sourceRowIndex);if(height){height--;TR.firstChild.style.height=height+'px';}else{TR.firstChild.style.height='';}}
visibleRowIndex++;sourceRowIndex=this.rowFilter.renderedToSource(visibleRowIndex);}},resetOversizedRow:function(sourceRow){if(this.wot.getSetting('externalRowCalculator')){return;}
if(this.wot.wtViewport.oversizedRows&&this.wot.wtViewport.oversizedRows[sourceRow]){this.wot.wtViewport.oversizedRows[sourceRow]=void 0;}},markOversizedRows:function(){if(this.wot.getSetting('externalRowCalculator')){return;}
var rowCount=this.instance.wtTable.TBODY.childNodes.length;var expectedTableHeight=rowCount*this.instance.wtSettings.settings.defaultRowHeight;var actualTableHeight=innerHeight(this.instance.wtTable.TBODY)-1;var previousRowHeight;var rowInnerHeight;var sourceRowIndex;var currentTr;var rowHeader;var totalRows=this.instance.getSetting('totalRows');if(expectedTableHeight===actualTableHeight&&!this.instance.getSetting('fixedRowsBottom')){return;}
while(rowCount){rowCount--;sourceRowIndex=this.instance.wtTable.rowFilter.renderedToSource(rowCount);previousRowHeight=this.instance.wtTable.getRowHeight(sourceRowIndex);currentTr=this.instance.wtTable.getTrForRow(sourceRowIndex);rowHeader=currentTr.querySelector('th');if(rowHeader){rowInnerHeight=innerHeight(rowHeader);}else{rowInnerHeight=innerHeight(currentTr)-1;}
if((!previousRowHeight&&this.instance.wtSettings.settings.defaultRowHeight<rowInnerHeight||previousRowHeight<rowInnerHeight)){this.instance.wtViewport.oversizedRows[sourceRowIndex]=++rowInnerHeight;}}},markOversizedColumns:function(){var overlayName=this.wot.getOverlayName();if(!this.columnHeaderCount||this.wot.wtViewport.isMarkedOversizedColumn[overlayName]||this.wtTable.isWorkingOnClone()){return;}
var columnCount=this.wtTable.getRenderedColumnsCount();for(var i=0;i<this.columnHeaderCount;i++){for(var renderedColumnIndex=(-1)*this.rowHeaderCount;renderedColumnIndex<columnCount;renderedColumnIndex++){this.markIfOversizedColumnHeader(renderedColumnIndex);}}
this.wot.wtViewport.isMarkedOversizedColumn[overlayName]=true;},adjustColumnHeaderHeights:function(){var columnHeaders=this.wot.getSetting('columnHeaders');var childs=this.wot.wtTable.THEAD.childNodes;var oversizedCols=this.wot.wtViewport.oversizedColumnHeaders;for(var i=0,len=columnHeaders.length;i<len;i++){if(oversizedCols[i]){if(childs[i].childNodes.length===0){return;}
childs[i].childNodes[0].style.height=oversizedCols[i]+'px';}}},markIfOversizedColumnHeader:function(col){var sourceColIndex=this.wot.wtTable.columnFilter.renderedToSource(col);var level=this.columnHeaderCount;var defaultRowHeight=this.wot.wtSettings.settings.defaultRowHeight;var previousColHeaderHeight;var currentHeader;var currentHeaderHeight;while(level){level--;previousColHeaderHeight=this.wot.wtTable.getColumnHeaderHeight(level);currentHeader=this.wot.wtTable.getColumnHeader(sourceColIndex,level);if(!currentHeader){continue;}
currentHeaderHeight=innerHeight(currentHeader);if(!previousColHeaderHeight&&defaultRowHeight<currentHeaderHeight||previousColHeaderHeight<currentHeaderHeight){this.wot.wtViewport.oversizedColumnHeaders[level]=currentHeaderHeight;}}},renderCells:function(sourceRowIndex,TR,columnsToRender){var TD;var sourceColIndex;for(var visibleColIndex=0;visibleColIndex<columnsToRender;visibleColIndex++){sourceColIndex=this.columnFilter.renderedToSource(visibleColIndex);if(visibleColIndex===0){TD=TR.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(sourceColIndex)];}else{TD=TD.nextSibling;}
if(TD.nodeName=='TH'){TD=replaceThWithTd(TD,TR);}
if(!hasClass(TD,'hide')){TD.className='';}
TD.removeAttribute('style');this.wot.wtSettings.settings.cellRenderer(sourceRowIndex,sourceColIndex,TD);}
return TD;},adjustColumnWidths:function(columnsToRender){var scrollbarCompensation=0;var sourceInstance=this.wot.cloneSource?this.wot.cloneSource:this.wot;var mainHolder=sourceInstance.wtTable.holder;if(mainHolder.offsetHeight<mainHolder.scrollHeight){scrollbarCompensation=getScrollbarWidth();}
this.wot.wtViewport.columnsRenderCalculator.refreshStretching(this.wot.wtViewport.getViewportWidth()-scrollbarCompensation);for(var renderedColIndex=0;renderedColIndex<columnsToRender;renderedColIndex++){var width=this.wtTable.getStretchedColumnWidth(this.columnFilter.renderedToSource(renderedColIndex));this.COLGROUP.childNodes[renderedColIndex+this.rowHeaderCount].style.width=width+'px';}},appendToTbody:function(TR){this.TBODY.appendChild(TR);this.wtTable.tbodyChildrenLength++;},getOrCreateTrForRow:function(rowIndex,currentTr){var TR;if(rowIndex>=this.wtTable.tbodyChildrenLength){TR=this.createRow();this.appendToTbody(TR);}else if(rowIndex===0){TR=this.TBODY.firstChild;}else{TR=currentTr.nextSibling;}
if(TR.className){TR.removeAttribute('class');}
return TR;},createRow:function(){var TR=document.createElement('TR');for(var visibleColIndex=0;visibleColIndex<this.rowHeaderCount;visibleColIndex++){TR.appendChild(document.createElement('TH'));}
return TR;},renderRowHeader:function(row,col,TH){TH.className='';TH.removeAttribute('style');this.rowHeaders[col](row,TH,col);},renderRowHeaders:function(row,TR){for(var TH=TR.firstChild,visibleColIndex=0;visibleColIndex<this.rowHeaderCount;visibleColIndex++){if(!TH){TH=document.createElement('TH');TR.appendChild(TH);}else if(TH.nodeName=='TD'){TH=replaceTdWithTh(TH,TR);}
this.renderRowHeader(row,visibleColIndex,TH);TH=TH.nextSibling;}},adjustAvailableNodes:function(){this.adjustColGroups();this.adjustThead();},renderColumnHeaders:function(){var overlayName=this.wot.getOverlayName();if(!this.columnHeaderCount){return;}
var columnCount=this.wtTable.getRenderedColumnsCount();for(var i=0;i<this.columnHeaderCount;i++){var TR=this.getTrForColumnHeaders(i);for(var renderedColumnIndex=(-1)*this.rowHeaderCount;renderedColumnIndex<columnCount;renderedColumnIndex++){var sourceCol=this.columnFilter.renderedToSource(renderedColumnIndex);this.renderColumnHeader(i,sourceCol,TR.childNodes[renderedColumnIndex+this.rowHeaderCount]);}}},adjustColGroups:function(){var columnCount=this.wtTable.getRenderedColumnsCount();while(this.wtTable.colgroupChildrenLength<columnCount+this.rowHeaderCount){this.COLGROUP.appendChild(document.createElement('COL'));this.wtTable.colgroupChildrenLength++;}
while(this.wtTable.colgroupChildrenLength>columnCount+this.rowHeaderCount){this.COLGROUP.removeChild(this.COLGROUP.lastChild);this.wtTable.colgroupChildrenLength--;}
if(this.rowHeaderCount){addClass(this.COLGROUP.childNodes[0],'rowHeader');}},adjustThead:function(){var columnCount=this.wtTable.getRenderedColumnsCount();var TR=this.THEAD.firstChild;if(this.columnHeaders.length){for(var i=0,len=this.columnHeaders.length;i<len;i++){TR=this.THEAD.childNodes[i];if(!TR){TR=document.createElement('TR');this.THEAD.appendChild(TR);}
this.theadChildrenLength=TR.childNodes.length;while(this.theadChildrenLength<columnCount+this.rowHeaderCount){TR.appendChild(document.createElement('TH'));this.theadChildrenLength++;}
while(this.theadChildrenLength>columnCount+this.rowHeaderCount){TR.removeChild(TR.lastChild);this.theadChildrenLength--;}}
var theadChildrenLength=this.THEAD.childNodes.length;if(theadChildrenLength>this.columnHeaders.length){for(var i$__2=this.columnHeaders.length;i$__2<theadChildrenLength;i$__2++){this.THEAD.removeChild(this.THEAD.lastChild);}}}else if(TR){empty(TR);}},getTrForColumnHeaders:function(index){return this.THEAD.childNodes[index];},renderColumnHeader:function(row,col,TH){TH.className='';TH.removeAttribute('style');return this.columnHeaders[row](col,TH,row);},adjustColumns:function(TR,desiredCount){var count=TR.childNodes.length;while(count<desiredCount){var TD=document.createElement('TD');TR.appendChild(TD);count++;}
while(count>desiredCount){TR.removeChild(TR.lastChild);count--;}},removeRedundantColumns:function(columnsToRender){while(this.wtTable.tbodyChildrenLength>columnsToRender){this.TBODY.removeChild(this.TBODY.lastChild);this.wtTable.tbodyChildrenLength--;}}},{});function replaceTdWithTh(TD,TR){var TH=document.createElement('TH');TR.insertBefore(TH,TD);TR.removeChild(TD);return TH;}
function replaceThWithTd(TH,TR){var TD=document.createElement('TD');TR.insertBefore(TD,TH);TR.removeChild(TH);return TD;};window.WalkontableTableRenderer=WalkontableTableRenderer;},{"helpers/dom/element":44}],22:[function(require,module,exports){"use strict";Object.defineProperties(exports,{WalkontableViewport:{get:function(){return WalkontableViewport;}},__esModule:{value:true}});var $___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__,$___46__46__47__46__46__47__46__46__47_eventManager__,$__calculator_47_viewportColumns__,$__calculator_47_viewportRows__;var $__0=($___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__=require("helpers/dom/element"),$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__||{default:$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__}),getScrollbarWidth=$__0.getScrollbarWidth,getScrollTop=$__0.getScrollTop,getStyle=$__0.getStyle,offset=$__0.offset,outerHeight=$__0.outerHeight,outerWidth=$__0.outerWidth;var EventManager=($___46__46__47__46__46__47__46__46__47_eventManager__=require("eventManager"),$___46__46__47__46__46__47__46__46__47_eventManager__&&$___46__46__47__46__46__47__46__46__47_eventManager__.__esModule&&$___46__46__47__46__46__47__46__46__47_eventManager__||{default:$___46__46__47__46__46__47__46__46__47_eventManager__}).EventManager;var WalkontableViewportColumnsCalculator=($__calculator_47_viewportColumns__=require("calculator/viewportColumns"),$__calculator_47_viewportColumns__&&$__calculator_47_viewportColumns__.__esModule&&$__calculator_47_viewportColumns__||{default:$__calculator_47_viewportColumns__}).WalkontableViewportColumnsCalculator;var WalkontableViewportRowsCalculator=($__calculator_47_viewportRows__=require("calculator/viewportRows"),$__calculator_47_viewportRows__&&$__calculator_47_viewportRows__.__esModule&&$__calculator_47_viewportRows__||{default:$__calculator_47_viewportRows__}).WalkontableViewportRowsCalculator;var WalkontableViewport=function WalkontableViewport(wotInstance){var $__4=this;this.wot=wotInstance;this.instance=this.wot;this.oversizedRows=[];this.oversizedColumnHeaders=[];this.isMarkedOversizedColumn={};this.clientHeight=0;this.containerWidth=NaN;this.rowHeaderWidth=NaN;this.rowsVisibleCalculator=null;this.columnsVisibleCalculator=null;this.eventManager=new EventManager(this.wot);this.eventManager.addEventListener(window,'resize',(function(){$__4.clientHeight=$__4.getWorkspaceHeight();}));};($traceurRuntime.createClass)(WalkontableViewport,{getWorkspaceHeight:function(){var trimmingContainer=this.instance.wtOverlays.topOverlay.trimmingContainer;var elemHeight;var height=0;if(trimmingContainer===window){height=document.documentElement.clientHeight;}else{elemHeight=outerHeight(trimmingContainer);height=(elemHeight>0&&trimmingContainer.clientHeight>0)?trimmingContainer.clientHeight:Infinity;}
return height;},getWorkspaceWidth:function(){var width;var totalColumns=this.instance.getSetting('totalColumns');var trimmingContainer=this.instance.wtOverlays.leftOverlay.trimmingContainer;var overflow;var stretchSetting=this.instance.getSetting('stretchH');var docOffsetWidth=document.documentElement.offsetWidth;if(Handsontable.freezeOverlays){width=Math.min(docOffsetWidth-this.getWorkspaceOffset().left,docOffsetWidth);}else{width=Math.min(this.getContainerFillWidth(),docOffsetWidth-this.getWorkspaceOffset().left,docOffsetWidth);}
if(trimmingContainer===window&&totalColumns>0&&this.sumColumnWidths(0,totalColumns-1)>width){return document.documentElement.clientWidth;}
if(trimmingContainer!==window){overflow=getStyle(this.instance.wtOverlays.leftOverlay.trimmingContainer,'overflow');if(overflow=='scroll'||overflow=='hidden'||overflow=='auto'){return Math.max(width,trimmingContainer.clientWidth);}}
if(stretchSetting==='none'||!stretchSetting){return Math.max(width,outerWidth(this.instance.wtTable.TABLE));}else{return width;}},hasVerticalScroll:function(){return this.getWorkspaceActualHeight()>this.getWorkspaceHeight();},hasHorizontalScroll:function(){return this.getWorkspaceActualWidth()>this.getWorkspaceWidth();},sumColumnWidths:function(from,length){var sum=0;while(from<length){sum+=this.wot.wtTable.getColumnWidth(from);from++;}
return sum;},getContainerFillWidth:function(){if(this.containerWidth){return this.containerWidth;}
var mainContainer=this.instance.wtTable.holder;var fillWidth;var dummyElement;dummyElement=document.createElement('div');dummyElement.style.width='100%';dummyElement.style.height='1px';mainContainer.appendChild(dummyElement);fillWidth=dummyElement.offsetWidth;this.containerWidth=fillWidth;mainContainer.removeChild(dummyElement);return fillWidth;},getWorkspaceOffset:function(){return offset(this.wot.wtTable.TABLE);},getWorkspaceActualHeight:function(){return outerHeight(this.wot.wtTable.TABLE);},getWorkspaceActualWidth:function(){return outerWidth(this.wot.wtTable.TABLE)||outerWidth(this.wot.wtTable.TBODY)||outerWidth(this.wot.wtTable.THEAD);},getColumnHeaderHeight:function(){if(isNaN(this.columnHeaderHeight)){this.columnHeaderHeight=outerHeight(this.wot.wtTable.THEAD);}
return this.columnHeaderHeight;},getViewportHeight:function(){var containerHeight=this.getWorkspaceHeight();var columnHeaderHeight;if(containerHeight===Infinity){return containerHeight;}
columnHeaderHeight=this.getColumnHeaderHeight();if(columnHeaderHeight>0){containerHeight-=columnHeaderHeight;}
return containerHeight;},getRowHeaderWidth:function(){if(this.wot.cloneSource){return this.wot.cloneSource.wtViewport.getRowHeaderWidth();}
if(isNaN(this.rowHeaderWidth)){var rowHeaders=this.instance.getSetting('rowHeaders');if(rowHeaders.length){var TH=this.instance.wtTable.TABLE.querySelector('TH');this.rowHeaderWidth=0;for(var i=0,len=rowHeaders.length;i<len;i++){if(TH){this.rowHeaderWidth+=outerWidth(TH);TH=TH.nextSibling;}else{this.rowHeaderWidth+=50;}}}else{this.rowHeaderWidth=0;}}
return this.rowHeaderWidth;},getViewportWidth:function(){var containerWidth=this.getWorkspaceWidth();var rowHeaderWidth;if(containerWidth===Infinity){return containerWidth;}
rowHeaderWidth=this.getRowHeaderWidth();if(rowHeaderWidth>0){return containerWidth-rowHeaderWidth;}
return containerWidth;},createRowsCalculator:function(){var visible=arguments[0]!==(void 0)?arguments[0]:false;var $__4=this;var height;var pos;var fixedRowsTop;var scrollbarHeight;var fixedRowsBottom;var fixedRowsHeight;var totalRows;this.rowHeaderWidth=NaN;if(this.wot.wtSettings.settings.renderAllRows){height=Infinity;}else{height=this.getViewportHeight();}
pos=getScrollTop(this.wot.wtOverlays.mainTableScrollableElement)-this.wot.wtOverlays.topOverlay.getTableParentOffset();if(pos<0){pos=0;}
fixedRowsTop=this.wot.getSetting('fixedRowsTop');fixedRowsBottom=this.wot.getSetting('fixedRowsBottom');totalRows=this.wot.getSetting('totalRows');if(fixedRowsTop){fixedRowsHeight=this.wot.wtOverlays.topOverlay.sumCellSizes(0,fixedRowsTop);pos+=fixedRowsHeight;height-=fixedRowsHeight;}
if(fixedRowsBottom&&this.wot.wtOverlays.bottomOverlay.clone){fixedRowsHeight=this.wot.wtOverlays.bottomOverlay.sumCellSizes(totalRows-fixedRowsBottom,totalRows);height-=fixedRowsHeight;}
if(this.wot.wtTable.holder.clientHeight===this.wot.wtTable.holder.offsetHeight){scrollbarHeight=0;}else{scrollbarHeight=getScrollbarWidth();}
return new WalkontableViewportRowsCalculator(height,pos,this.wot.getSetting('totalRows'),(function(sourceRow){return $__4.wot.wtTable.getRowHeight(sourceRow);}),visible?null:this.wot.wtSettings.settings.viewportRowCalculatorOverride,visible,scrollbarHeight);},createColumnsCalculator:function(){var visible=arguments[0]!==(void 0)?arguments[0]:false;var $__4=this;var width=this.getViewportWidth();var pos;var fixedColumnsLeft;this.columnHeaderHeight=NaN;pos=this.wot.wtOverlays.leftOverlay.getScrollPosition()-this.wot.wtOverlays.leftOverlay.getTableParentOffset();if(pos<0){pos=0;}
fixedColumnsLeft=this.wot.getSetting('fixedColumnsLeft');if(fixedColumnsLeft){var fixedColumnsWidth=this.wot.wtOverlays.leftOverlay.sumCellSizes(0,fixedColumnsLeft);pos+=fixedColumnsWidth;width-=fixedColumnsWidth;}
if(this.wot.wtTable.holder.clientWidth!==this.wot.wtTable.holder.offsetWidth){width-=getScrollbarWidth();}
return new WalkontableViewportColumnsCalculator(width,pos,this.wot.getSetting('totalColumns'),(function(sourceCol){return $__4.wot.wtTable.getColumnWidth(sourceCol);}),visible?null:this.wot.wtSettings.settings.viewportColumnCalculatorOverride,visible,this.wot.getSetting('stretchH'));},createRenderCalculators:function(){var fastDraw=arguments[0]!==(void 0)?arguments[0]:false;if(fastDraw){var proposedRowsVisibleCalculator=this.createRowsCalculator(true);var proposedColumnsVisibleCalculator=this.createColumnsCalculator(true);if(!(this.areAllProposedVisibleRowsAlreadyRendered(proposedRowsVisibleCalculator)&&this.areAllProposedVisibleColumnsAlreadyRendered(proposedColumnsVisibleCalculator))){fastDraw=false;}}
if(!fastDraw){this.rowsRenderCalculator=this.createRowsCalculator();this.columnsRenderCalculator=this.createColumnsCalculator();}
this.rowsVisibleCalculator=null;this.columnsVisibleCalculator=null;return fastDraw;},createVisibleCalculators:function(){this.rowsVisibleCalculator=this.createRowsCalculator(true);this.columnsVisibleCalculator=this.createColumnsCalculator(true);},areAllProposedVisibleRowsAlreadyRendered:function(proposedRowsVisibleCalculator){if(this.rowsVisibleCalculator){if(proposedRowsVisibleCalculator.startRow<this.rowsRenderCalculator.startRow||(proposedRowsVisibleCalculator.startRow===this.rowsRenderCalculator.startRow&&proposedRowsVisibleCalculator.startRow>0)){return false;}else if(proposedRowsVisibleCalculator.endRow>this.rowsRenderCalculator.endRow||(proposedRowsVisibleCalculator.endRow===this.rowsRenderCalculator.endRow&&proposedRowsVisibleCalculator.endRow<this.wot.getSetting('totalRows')-1)){return false;}else{return true;}}
return false;},areAllProposedVisibleColumnsAlreadyRendered:function(proposedColumnsVisibleCalculator){if(this.columnsVisibleCalculator){if(proposedColumnsVisibleCalculator.startColumn<this.columnsRenderCalculator.startColumn||(proposedColumnsVisibleCalculator.startColumn===this.columnsRenderCalculator.startColumn&&proposedColumnsVisibleCalculator.startColumn>0)){return false;}else if(proposedColumnsVisibleCalculator.endColumn>this.columnsRenderCalculator.endColumn||(proposedColumnsVisibleCalculator.endColumn===this.columnsRenderCalculator.endColumn&&proposedColumnsVisibleCalculator.endColumn<this.wot.getSetting('totalColumns')-1)){return false;}else{return true;}}
return false;}},{});;window.WalkontableViewport=WalkontableViewport;},{"calculator/viewportColumns":3,"calculator/viewportRows":4,"eventManager":40,"helpers/dom/element":44}],23:[function(require,module,exports){"use strict";var $__shims_47_classes__,$__es6collections__,$__pluginHooks__,$__core__,$__renderers_47__95_cellDecorator__,$__cellTypes__,$___46__46__47_plugins_47_jqueryHandsontable__,$__helpers_47_array__,$__helpers_47_browser__,$__helpers_47_data__,$__helpers_47_function__,$__helpers_47_mixed__,$__helpers_47_number__,$__helpers_47_object__,$__helpers_47_setting__,$__helpers_47_string__,$__helpers_47_unicode__,$__helpers_47_dom_47_element__,$__helpers_47_dom_47_event__;var version=Handsontable.version;var buildDate=Handsontable.buildDate;window.Handsontable=function Handsontable(rootElement,userSettings){var instance=new Handsontable.Core(rootElement,userSettings||{});instance.init();return instance;};Handsontable.version=version;Handsontable.buildDate=buildDate;($__shims_47_classes__=require("shims/classes"),$__shims_47_classes__&&$__shims_47_classes__.__esModule&&$__shims_47_classes__||{default:$__shims_47_classes__});($__es6collections__=require("es6collections"),$__es6collections__&&$__es6collections__.__esModule&&$__es6collections__||{default:$__es6collections__});Handsontable.plugins={};var Hooks=($__pluginHooks__=require("pluginHooks"),$__pluginHooks__&&$__pluginHooks__.__esModule&&$__pluginHooks__||{default:$__pluginHooks__}).Hooks;if(!Handsontable.hooks){Handsontable.hooks=new Hooks();}
($__core__=require("core"),$__core__&&$__core__.__esModule&&$__core__||{default:$__core__});($__renderers_47__95_cellDecorator__=require("renderers/_cellDecorator"),$__renderers_47__95_cellDecorator__&&$__renderers_47__95_cellDecorator__.__esModule&&$__renderers_47__95_cellDecorator__||{default:$__renderers_47__95_cellDecorator__});($__cellTypes__=require("cellTypes"),$__cellTypes__&&$__cellTypes__.__esModule&&$__cellTypes__||{default:$__cellTypes__});($___46__46__47_plugins_47_jqueryHandsontable__=require("plugins/jqueryHandsontable"),$___46__46__47_plugins_47_jqueryHandsontable__&&$___46__46__47_plugins_47_jqueryHandsontable__.__esModule&&$___46__46__47_plugins_47_jqueryHandsontable__||{default:$___46__46__47_plugins_47_jqueryHandsontable__});var arrayHelpers=($__helpers_47_array__=require("helpers/array"),$__helpers_47_array__&&$__helpers_47_array__.__esModule&&$__helpers_47_array__||{default:$__helpers_47_array__});var browserHelpers=($__helpers_47_browser__=require("helpers/browser"),$__helpers_47_browser__&&$__helpers_47_browser__.__esModule&&$__helpers_47_browser__||{default:$__helpers_47_browser__});var dataHelpers=($__helpers_47_data__=require("helpers/data"),$__helpers_47_data__&&$__helpers_47_data__.__esModule&&$__helpers_47_data__||{default:$__helpers_47_data__});var functionHelpers=($__helpers_47_function__=require("helpers/function"),$__helpers_47_function__&&$__helpers_47_function__.__esModule&&$__helpers_47_function__||{default:$__helpers_47_function__});var mixedHelpers=($__helpers_47_mixed__=require("helpers/mixed"),$__helpers_47_mixed__&&$__helpers_47_mixed__.__esModule&&$__helpers_47_mixed__||{default:$__helpers_47_mixed__});var numberHelpers=($__helpers_47_number__=require("helpers/number"),$__helpers_47_number__&&$__helpers_47_number__.__esModule&&$__helpers_47_number__||{default:$__helpers_47_number__});var objectHelpers=($__helpers_47_object__=require("helpers/object"),$__helpers_47_object__&&$__helpers_47_object__.__esModule&&$__helpers_47_object__||{default:$__helpers_47_object__});var settingHelpers=($__helpers_47_setting__=require("helpers/setting"),$__helpers_47_setting__&&$__helpers_47_setting__.__esModule&&$__helpers_47_setting__||{default:$__helpers_47_setting__});var stringHelpers=($__helpers_47_string__=require("helpers/string"),$__helpers_47_string__&&$__helpers_47_string__.__esModule&&$__helpers_47_string__||{default:$__helpers_47_string__});var unicodeHelpers=($__helpers_47_unicode__=require("helpers/unicode"),$__helpers_47_unicode__&&$__helpers_47_unicode__.__esModule&&$__helpers_47_unicode__||{default:$__helpers_47_unicode__});var helpers=[arrayHelpers,browserHelpers,dataHelpers,functionHelpers,mixedHelpers,numberHelpers,objectHelpers,settingHelpers,stringHelpers,unicodeHelpers];Handsontable.helper={};arrayHelpers.arrayEach(helpers,(function(helper){arrayHelpers.arrayEach(Object.getOwnPropertyNames(helper),(function(key){if(key.charAt(0)!=='_'){Handsontable.helper[key]=helper[key];}}));}));var domHelpers=($__helpers_47_dom_47_element__=require("helpers/dom/element"),$__helpers_47_dom_47_element__&&$__helpers_47_dom_47_element__.__esModule&&$__helpers_47_dom_47_element__||{default:$__helpers_47_dom_47_element__});var domEventHelpers=($__helpers_47_dom_47_event__=require("helpers/dom/event"),$__helpers_47_dom_47_event__&&$__helpers_47_dom_47_event__.__esModule&&$__helpers_47_dom_47_event__||{default:$__helpers_47_dom_47_event__});Handsontable.dom={};Handsontable.Dom=Handsontable.dom;arrayHelpers.arrayEach([domHelpers,domEventHelpers],(function(helper){arrayHelpers.arrayEach(Object.getOwnPropertyNames(helper),(function(key){if(key.charAt(0)!=='_'){Handsontable.dom[key]=helper[key];}}));}));},{"cellTypes":24,"core":25,"es6collections":"es6collections","helpers/array":41,"helpers/browser":42,"helpers/data":43,"helpers/dom/element":44,"helpers/dom/event":45,"helpers/function":46,"helpers/mixed":47,"helpers/number":48,"helpers/object":49,"helpers/setting":50,"helpers/string":51,"helpers/unicode":52,"pluginHooks":54,"plugins/jqueryHandsontable":1,"renderers/_cellDecorator":87,"shims/classes":94}],24:[function(require,module,exports){"use strict";var $__helpers_47_browser__,$__editors__,$__renderers__,$__editors_47_autocompleteEditor__,$__editors_47_checkboxEditor__,$__editors_47_dateEditor__,$__editors_47_dropdownEditor__,$__editors_47_handsontableEditor__,$__editors_47_mobileTextEditor__,$__editors_47_numericEditor__,$__editors_47_passwordEditor__,$__editors_47_selectEditor__,$__editors_47_textEditor__,$__renderers_47_autocompleteRenderer__,$__renderers_47_checkboxRenderer__,$__renderers_47_htmlRenderer__,$__renderers_47_numericRenderer__,$__renderers_47_passwordRenderer__,$__renderers_47_textRenderer__,$__validators_47_autocompleteValidator__,$__validators_47_dateValidator__,$__validators_47_numericValidator__;var isMobileBrowser=($__helpers_47_browser__=require("helpers/browser"),$__helpers_47_browser__&&$__helpers_47_browser__.__esModule&&$__helpers_47_browser__||{default:$__helpers_47_browser__}).isMobileBrowser;var getEditorConstructor=($__editors__=require("editors"),$__editors__&&$__editors__.__esModule&&$__editors__||{default:$__editors__}).getEditorConstructor;var getRenderer=($__renderers__=require("renderers"),$__renderers__&&$__renderers__.__esModule&&$__renderers__||{default:$__renderers__}).getRenderer;var AutocompleteEditor=($__editors_47_autocompleteEditor__=require("editors/autocompleteEditor"),$__editors_47_autocompleteEditor__&&$__editors_47_autocompleteEditor__.__esModule&&$__editors_47_autocompleteEditor__||{default:$__editors_47_autocompleteEditor__}).AutocompleteEditor;var CheckboxEditor=($__editors_47_checkboxEditor__=require("editors/checkboxEditor"),$__editors_47_checkboxEditor__&&$__editors_47_checkboxEditor__.__esModule&&$__editors_47_checkboxEditor__||{default:$__editors_47_checkboxEditor__}).CheckboxEditor;var DateEditor=($__editors_47_dateEditor__=require("editors/dateEditor"),$__editors_47_dateEditor__&&$__editors_47_dateEditor__.__esModule&&$__editors_47_dateEditor__||{default:$__editors_47_dateEditor__}).DateEditor;var DropdownEditor=($__editors_47_dropdownEditor__=require("editors/dropdownEditor"),$__editors_47_dropdownEditor__&&$__editors_47_dropdownEditor__.__esModule&&$__editors_47_dropdownEditor__||{default:$__editors_47_dropdownEditor__}).DropdownEditor;var HandsontableEditor=($__editors_47_handsontableEditor__=require("editors/handsontableEditor"),$__editors_47_handsontableEditor__&&$__editors_47_handsontableEditor__.__esModule&&$__editors_47_handsontableEditor__||{default:$__editors_47_handsontableEditor__}).HandsontableEditor;var MobileTextEditor=($__editors_47_mobileTextEditor__=require("editors/mobileTextEditor"),$__editors_47_mobileTextEditor__&&$__editors_47_mobileTextEditor__.__esModule&&$__editors_47_mobileTextEditor__||{default:$__editors_47_mobileTextEditor__}).MobileTextEditor;var NumericEditor=($__editors_47_numericEditor__=require("editors/numericEditor"),$__editors_47_numericEditor__&&$__editors_47_numericEditor__.__esModule&&$__editors_47_numericEditor__||{default:$__editors_47_numericEditor__}).NumericEditor;var PasswordEditor=($__editors_47_passwordEditor__=require("editors/passwordEditor"),$__editors_47_passwordEditor__&&$__editors_47_passwordEditor__.__esModule&&$__editors_47_passwordEditor__||{default:$__editors_47_passwordEditor__}).PasswordEditor;var SelectEditor=($__editors_47_selectEditor__=require("editors/selectEditor"),$__editors_47_selectEditor__&&$__editors_47_selectEditor__.__esModule&&$__editors_47_selectEditor__||{default:$__editors_47_selectEditor__}).SelectEditor;var TextEditor=($__editors_47_textEditor__=require("editors/textEditor"),$__editors_47_textEditor__&&$__editors_47_textEditor__.__esModule&&$__editors_47_textEditor__||{default:$__editors_47_textEditor__}).TextEditor;var AutocompleteRenderer=($__renderers_47_autocompleteRenderer__=require("renderers/autocompleteRenderer"),$__renderers_47_autocompleteRenderer__&&$__renderers_47_autocompleteRenderer__.__esModule&&$__renderers_47_autocompleteRenderer__||{default:$__renderers_47_autocompleteRenderer__}).AutocompleteRenderer;var CheckboxRenderer=($__renderers_47_checkboxRenderer__=require("renderers/checkboxRenderer"),$__renderers_47_checkboxRenderer__&&$__renderers_47_checkboxRenderer__.__esModule&&$__renderers_47_checkboxRenderer__||{default:$__renderers_47_checkboxRenderer__}).CheckboxRenderer;var HtmlRenderer=($__renderers_47_htmlRenderer__=require("renderers/htmlRenderer"),$__renderers_47_htmlRenderer__&&$__renderers_47_htmlRenderer__.__esModule&&$__renderers_47_htmlRenderer__||{default:$__renderers_47_htmlRenderer__}).HtmlRenderer;var NumericRenderer=($__renderers_47_numericRenderer__=require("renderers/numericRenderer"),$__renderers_47_numericRenderer__&&$__renderers_47_numericRenderer__.__esModule&&$__renderers_47_numericRenderer__||{default:$__renderers_47_numericRenderer__}).NumericRenderer;var PasswordRenderer=($__renderers_47_passwordRenderer__=require("renderers/passwordRenderer"),$__renderers_47_passwordRenderer__&&$__renderers_47_passwordRenderer__.__esModule&&$__renderers_47_passwordRenderer__||{default:$__renderers_47_passwordRenderer__}).PasswordRenderer;var TextRenderer=($__renderers_47_textRenderer__=require("renderers/textRenderer"),$__renderers_47_textRenderer__&&$__renderers_47_textRenderer__.__esModule&&$__renderers_47_textRenderer__||{default:$__renderers_47_textRenderer__}).TextRenderer;var AutocompleteValidator=($__validators_47_autocompleteValidator__=require("validators/autocompleteValidator"),$__validators_47_autocompleteValidator__&&$__validators_47_autocompleteValidator__.__esModule&&$__validators_47_autocompleteValidator__||{default:$__validators_47_autocompleteValidator__}).AutocompleteValidator;var DateValidator=($__validators_47_dateValidator__=require("validators/dateValidator"),$__validators_47_dateValidator__&&$__validators_47_dateValidator__.__esModule&&$__validators_47_dateValidator__||{default:$__validators_47_dateValidator__}).DateValidator;var NumericValidator=($__validators_47_numericValidator__=require("validators/numericValidator"),$__validators_47_numericValidator__&&$__validators_47_numericValidator__.__esModule&&$__validators_47_numericValidator__||{default:$__validators_47_numericValidator__}).NumericValidator;Handsontable.mobileBrowser=isMobileBrowser();Handsontable.AutocompleteCell={editor:getEditorConstructor('autocomplete'),renderer:getRenderer('autocomplete'),validator:Handsontable.AutocompleteValidator};Handsontable.CheckboxCell={editor:getEditorConstructor('checkbox'),renderer:getRenderer('checkbox')};Handsontable.TextCell={editor:Handsontable.mobileBrowser?getEditorConstructor('mobile'):getEditorConstructor('text'),renderer:getRenderer('text')};Handsontable.NumericCell={editor:getEditorConstructor('numeric'),renderer:getRenderer('numeric'),validator:Handsontable.NumericValidator,dataType:'number'};Handsontable.DateCell={editor:getEditorConstructor('date'),validator:Handsontable.DateValidator,renderer:getRenderer('autocomplete')};Handsontable.HandsontableCell={editor:getEditorConstructor('handsontable'),renderer:getRenderer('autocomplete')};Handsontable.PasswordCell={editor:getEditorConstructor('password'),renderer:getRenderer('password'),copyable:false};Handsontable.DropdownCell={editor:getEditorConstructor('dropdown'),renderer:getRenderer('autocomplete'),validator:Handsontable.AutocompleteValidator};Handsontable.cellTypes={text:Handsontable.TextCell,date:Handsontable.DateCell,numeric:Handsontable.NumericCell,checkbox:Handsontable.CheckboxCell,autocomplete:Handsontable.AutocompleteCell,handsontable:Handsontable.HandsontableCell,password:Handsontable.PasswordCell,dropdown:Handsontable.DropdownCell};Handsontable.cellLookup={validator:{numeric:Handsontable.NumericValidator,autocomplete:Handsontable.AutocompleteValidator}};},{"editors":28,"editors/autocompleteEditor":30,"editors/checkboxEditor":31,"editors/dateEditor":32,"editors/dropdownEditor":33,"editors/handsontableEditor":34,"editors/mobileTextEditor":35,"editors/numericEditor":36,"editors/passwordEditor":37,"editors/selectEditor":38,"editors/textEditor":39,"helpers/browser":42,"renderers":86,"renderers/autocompleteRenderer":88,"renderers/checkboxRenderer":89,"renderers/htmlRenderer":90,"renderers/numericRenderer":91,"renderers/passwordRenderer":92,"renderers/textRenderer":93,"validators/autocompleteValidator":98,"validators/dateValidator":99,"validators/numericValidator":100}],25:[function(require,module,exports){"use strict";var $__numeral__,$__helpers_47_dom_47_element__,$__helpers_47_setting__,$__dataMap__,$__editorManager__,$__eventManager__,$__helpers_47_object__,$__helpers_47_array__,$__plugins__,$__renderers__,$__helpers_47_string__,$__helpers_47_number__,$__tableView__,$__helpers_47_data__,$__3rdparty_47_walkontable_47_src_47_cell_47_coords__,$__3rdparty_47_walkontable_47_src_47_cell_47_range__,$__3rdparty_47_walkontable_47_src_47_selection__,$__3rdparty_47_walkontable_47_src_47_calculator_47_viewportColumns__;var numeral=($__numeral__=require("numeral"),$__numeral__&&$__numeral__.__esModule&&$__numeral__||{default:$__numeral__}).default;var $__1=($__helpers_47_dom_47_element__=require("helpers/dom/element"),$__helpers_47_dom_47_element__&&$__helpers_47_dom_47_element__.__esModule&&$__helpers_47_dom_47_element__||{default:$__helpers_47_dom_47_element__}),addClass=$__1.addClass,empty=$__1.empty,isChildOfWebComponentTable=$__1.isChildOfWebComponentTable,removeClass=$__1.removeClass;var columnFactory=($__helpers_47_setting__=require("helpers/setting"),$__helpers_47_setting__&&$__helpers_47_setting__.__esModule&&$__helpers_47_setting__||{default:$__helpers_47_setting__}).columnFactory;var DataMap=($__dataMap__=require("dataMap"),$__dataMap__&&$__dataMap__.__esModule&&$__dataMap__||{default:$__dataMap__}).DataMap;var EditorManager=($__editorManager__=require("editorManager"),$__editorManager__&&$__editorManager__.__esModule&&$__editorManager__||{default:$__editorManager__}).EditorManager;var eventManagerObject=($__eventManager__=require("eventManager"),$__eventManager__&&$__eventManager__.__esModule&&$__eventManager__||{default:$__eventManager__}).eventManager;var $__6=($__helpers_47_object__=require("helpers/object"),$__helpers_47_object__&&$__helpers_47_object__.__esModule&&$__helpers_47_object__||{default:$__helpers_47_object__}),extend=$__6.extend,duckSchema=$__6.duckSchema,isObjectEquals=$__6.isObjectEquals,deepClone=$__6.deepClone;var arrayFlatten=($__helpers_47_array__=require("helpers/array"),$__helpers_47_array__&&$__helpers_47_array__.__esModule&&$__helpers_47_array__||{default:$__helpers_47_array__}).arrayFlatten;var getPlugin=($__plugins__=require("plugins"),$__plugins__&&$__plugins__.__esModule&&$__plugins__||{default:$__plugins__}).getPlugin;var getRenderer=($__renderers__=require("renderers"),$__renderers__&&$__renderers__.__esModule&&$__renderers__||{default:$__renderers__}).getRenderer;var randomString=($__helpers_47_string__=require("helpers/string"),$__helpers_47_string__&&$__helpers_47_string__.__esModule&&$__helpers_47_string__||{default:$__helpers_47_string__}).randomString;var rangeEach=($__helpers_47_number__=require("helpers/number"),$__helpers_47_number__&&$__helpers_47_number__.__esModule&&$__helpers_47_number__||{default:$__helpers_47_number__}).rangeEach;var TableView=($__tableView__=require("tableView"),$__tableView__&&$__tableView__.__esModule&&$__tableView__||{default:$__tableView__}).TableView;var $__13=($__helpers_47_data__=require("helpers/data"),$__helpers_47_data__&&$__helpers_47_data__.__esModule&&$__helpers_47_data__||{default:$__helpers_47_data__}),translateRowsToColumns=$__13.translateRowsToColumns,cellMethodLookupFactory=$__13.cellMethodLookupFactory,spreadsheetColumnLabel=$__13.spreadsheetColumnLabel;var WalkontableCellCoords=($__3rdparty_47_walkontable_47_src_47_cell_47_coords__=require("3rdparty/walkontable/src/cell/coords"),$__3rdparty_47_walkontable_47_src_47_cell_47_coords__&&$__3rdparty_47_walkontable_47_src_47_cell_47_coords__.__esModule&&$__3rdparty_47_walkontable_47_src_47_cell_47_coords__||{default:$__3rdparty_47_walkontable_47_src_47_cell_47_coords__}).WalkontableCellCoords;var WalkontableCellRange=($__3rdparty_47_walkontable_47_src_47_cell_47_range__=require("3rdparty/walkontable/src/cell/range"),$__3rdparty_47_walkontable_47_src_47_cell_47_range__&&$__3rdparty_47_walkontable_47_src_47_cell_47_range__.__esModule&&$__3rdparty_47_walkontable_47_src_47_cell_47_range__||{default:$__3rdparty_47_walkontable_47_src_47_cell_47_range__}).WalkontableCellRange;var WalkontableSelection=($__3rdparty_47_walkontable_47_src_47_selection__=require("3rdparty/walkontable/src/selection"),$__3rdparty_47_walkontable_47_src_47_selection__&&$__3rdparty_47_walkontable_47_src_47_selection__.__esModule&&$__3rdparty_47_walkontable_47_src_47_selection__||{default:$__3rdparty_47_walkontable_47_src_47_selection__}).WalkontableSelection;var WalkontableViewportColumnsCalculator=($__3rdparty_47_walkontable_47_src_47_calculator_47_viewportColumns__=require("3rdparty/walkontable/src/calculator/viewportColumns"),$__3rdparty_47_walkontable_47_src_47_calculator_47_viewportColumns__&&$__3rdparty_47_walkontable_47_src_47_calculator_47_viewportColumns__.__esModule&&$__3rdparty_47_walkontable_47_src_47_calculator_47_viewportColumns__||{default:$__3rdparty_47_walkontable_47_src_47_calculator_47_viewportColumns__}).WalkontableViewportColumnsCalculator;Handsontable.activeGuid=null;Handsontable.Core=function Core(rootElement,userSettings){var priv,datamap,grid,selection,editorManager,instance=this,GridSettings=function(){},eventManager=eventManagerObject(instance);extend(GridSettings.prototype,DefaultSettings.prototype);extend(GridSettings.prototype,userSettings);extend(GridSettings.prototype,expandType(userSettings));this.rootElement=rootElement;this.isHotTableEnv=isChildOfWebComponentTable(this.rootElement);Handsontable.eventManager.isHotTableEnv=this.isHotTableEnv;this.container=document.createElement('DIV');this.renderCall=false;rootElement.insertBefore(this.container,rootElement.firstChild);this.guid='ht_'+randomString();if(!this.rootElement.id||this.rootElement.id.substring(0,3)==='ht_'){this.rootElement.id=this.guid;}
priv={cellSettings:[],columnSettings:[],columnsSettingConflicts:['data','width'],settings:new GridSettings(),selRange:null,isPopulated:null,scrollable:null,firstRun:true};grid={alter:function(action,index,amount,source,keepEmptyRows){var delta;amount=amount||1;switch(action){case'insert_row':if(instance.getSettings().maxRows===instance.countRows()){return;}
delta=datamap.createRow(index,amount);if(delta){if(selection.isSelected()&&priv.selRange.from.row>=index){priv.selRange.from.row=priv.selRange.from.row+delta;selection.transformEnd(delta,0);}else{selection.refreshBorders();}}
break;case'insert_col':delta=datamap.createCol(index,amount);if(delta){if(Array.isArray(instance.getSettings().colHeaders)){var spliceArray=[index,0];spliceArray.length+=delta;Array.prototype.splice.apply(instance.getSettings().colHeaders,spliceArray);}
if(selection.isSelected()&&priv.selRange.from.col>=index){priv.selRange.from.col=priv.selRange.from.col+delta;selection.transformEnd(0,delta);}else{selection.refreshBorders();}}
break;case'remove_row':index=instance.runHooks('modifyCol',index);datamap.removeRow(index,amount);priv.cellSettings.splice(index,amount);var totalRows=instance.countRows();var fixedRowsTop=instance.getSettings().fixedRowsTop;if(fixedRowsTop>=index+1){instance.getSettings().fixedRowsTop-=Math.min(amount,fixedRowsTop-index);}
var fixedRowsBottom=instance.getSettings().fixedRowsBottom;if(fixedRowsBottom&&totalRows-fixedRowsBottom<=index+1){instance.getSettings().fixedRowsBottom-=Math.min(amount,fixedRowsBottom-index);}
grid.adjustRowsAndCols();selection.refreshBorders();break;case'remove_col':datamap.removeCol(index,amount);for(var row=0,len=datamap.getAll().length;row<len;row++){if(row in priv.cellSettings){priv.cellSettings[row].splice(index,amount);}}
var fixedColumnsLeft=instance.getSettings().fixedColumnsLeft;if(fixedColumnsLeft>=index+1){instance.getSettings().fixedColumnsLeft-=Math.min(amount,fixedColumnsLeft-index);}
if(Array.isArray(instance.getSettings().colHeaders)){if(typeof index=='undefined'){index=-1;}
instance.getSettings().colHeaders.splice(index,amount);}
grid.adjustRowsAndCols();selection.refreshBorders();break;default:throw new Error('There is no such action "'+action+'"');break;}
if(!keepEmptyRows){grid.adjustRowsAndCols();}},adjustRowsAndCols:function(){if(priv.settings.minRows){var rows=instance.countRows();if(rows<priv.settings.minRows){for(var r=0,minRows=priv.settings.minRows;r<minRows-rows;r++){datamap.createRow(instance.countRows(),1,true);}}}
if(priv.settings.minSpareRows){var emptyRows=instance.countEmptyRows(true);if(emptyRows<priv.settings.minSpareRows){for(;emptyRows<priv.settings.minSpareRows&&instance.countRows()<priv.settings.maxRows;emptyRows++){datamap.createRow(instance.countRows(),1,true);}}}
{var emptyCols;if(priv.settings.minCols||priv.settings.minSpareCols){emptyCols=instance.countEmptyCols(true);}
if(priv.settings.minCols&&!priv.settings.columns&&instance.countCols()<priv.settings.minCols){for(;instance.countCols()<priv.settings.minCols;emptyCols++){datamap.createCol(instance.countCols(),1,true);}}
if(priv.settings.minSpareCols&&!priv.settings.columns&&instance.dataType==='array'&&emptyCols<priv.settings.minSpareCols){for(;emptyCols<priv.settings.minSpareCols&&instance.countCols()<priv.settings.maxCols;emptyCols++){datamap.createCol(instance.countCols(),1,true);}}}
var rowCount=instance.countRows();var colCount=instance.countCols();if(rowCount===0||colCount===0){selection.deselect();}
if(selection.isSelected()){var selectionChanged=false;var fromRow=priv.selRange.from.row;var fromCol=priv.selRange.from.col;var toRow=priv.selRange.to.row;var toCol=priv.selRange.to.col;if(fromRow>rowCount-1){fromRow=rowCount-1;selectionChanged=true;if(toRow>fromRow){toRow=fromRow;}}else if(toRow>rowCount-1){toRow=rowCount-1;selectionChanged=true;if(fromRow>toRow){fromRow=toRow;}}
if(fromCol>colCount-1){fromCol=colCount-1;selectionChanged=true;if(toCol>fromCol){toCol=fromCol;}}else if(toCol>colCount-1){toCol=colCount-1;selectionChanged=true;if(fromCol>toCol){fromCol=toCol;}}
if(selectionChanged){instance.selectCell(fromRow,fromCol,toRow,toCol);}}
if(instance.view){instance.view.wt.wtOverlays.adjustElementsSize();}},populateFromArray:function(start,input,end,source,method,direction,deltas){var r,rlen,c,clen,setData=[],current={};rlen=input.length;if(rlen===0){return false;}
var repeatCol,repeatRow,cmax,rmax,baseEnd={row:end===null?null:end.row,col:end===null?null:end.col};switch(method){case'shift_down':repeatCol=end?end.col-start.col+1:0;repeatRow=end?end.row-start.row+1:0;input=translateRowsToColumns(input);for(c=0,clen=input.length,cmax=Math.max(clen,repeatCol);c<cmax;c++){if(c<clen){for(r=0,rlen=input[c].length;r<repeatRow-rlen;r++){input[c].push(input[c][r%rlen]);}
input[c].unshift(start.col+c,start.row,0);instance.spliceCol.apply(instance,input[c]);}else{input[c%clen][0]=start.col+c;instance.spliceCol.apply(instance,input[c%clen]);}}
break;case'shift_right':repeatCol=end?end.col-start.col+1:0;repeatRow=end?end.row-start.row+1:0;for(r=0,rlen=input.length,rmax=Math.max(rlen,repeatRow);r<rmax;r++){if(r<rlen){for(c=0,clen=input[r].length;c<repeatCol-clen;c++){input[r].push(input[r][c%clen]);}
input[r].unshift(start.row+r,start.col,0);instance.spliceRow.apply(instance,input[r]);}else{input[r%rlen][0]=start.row+r;instance.spliceRow.apply(instance,input[r%rlen]);}}
break;case'overwrite':default:current.row=start.row;current.col=start.col;var selected={row:(end&&start)?(end.row-start.row+1):1,col:(end&&start)?(end.col-start.col+1):1};var skippedRow=0;var skippedColumn=0;var pushData=true;var cellMeta;var getInputValue=function getInputValue(row){var col=arguments[1]!==(void 0)?arguments[1]:null;var rowValue=input[row%input.length];if(col!==null){return rowValue[col%rowValue.length];}
return rowValue;};var rowInputLength=input.length;var rowSelectionLength=end?end.row-start.row+1:0;if(end){rlen=rowSelectionLength;}else{rlen=Math.max(rowInputLength,rowSelectionLength);}
for(r=0;r<rlen;r++){if((end&&current.row>end.row&&rowSelectionLength>rowInputLength)||(!priv.settings.allowInsertRow&&current.row>instance.countRows()-1)||(current.row>=priv.settings.maxRows)){break;}
var logicalRow=r-skippedRow;var colInputLength=getInputValue(logicalRow).length;var colSelectionLength=end?end.col-start.col+1:0;if(end){clen=colSelectionLength;}else{clen=Math.max(colInputLength,colSelectionLength);}
current.col=start.col;cellMeta=instance.getCellMeta(current.row,current.col);if((source==='paste'||source==='autofill')&&cellMeta.skipRowOnPaste){skippedRow++;current.row++;rlen++;continue;}
skippedColumn=0;for(c=0;c<clen;c++){if((end&&current.col>end.col&&colSelectionLength>colInputLength)||(!priv.settings.allowInsertColumn&&current.col>instance.countCols()-1)||(current.col>=priv.settings.maxCols)){break;}
cellMeta=instance.getCellMeta(current.row,current.col);if((source==='paste'||source==='autofill')&&cellMeta.skipColumnOnPaste){skippedColumn++;current.col++;clen++;continue;}
if(cellMeta.readOnly){current.col++;continue;}
var logicalColumn=c-skippedColumn;var value=getInputValue(logicalRow,logicalColumn);var orgValue=instance.getDataAtCell(current.row,current.col);var index={row:logicalRow,col:logicalColumn};if(source==='autofill'){var result=instance.runHooks('beforeAutofillInsidePopulate',index,direction,input,deltas,{},selected);if(result){value=typeof(result.value)==='undefined'?value:result.value;}}
if(value!==null&&typeof value==='object'){if(orgValue===null||typeof orgValue!=='object'){pushData=false;}else{var orgValueSchema=duckSchema(orgValue[0]||orgValue);var valueSchema=duckSchema(value[0]||value);if(isObjectEquals(orgValueSchema,valueSchema)){value=deepClone(value);}else{pushData=false;}}}else if(orgValue!==null&&typeof orgValue==='object'){pushData=false;}
if(pushData){setData.push([current.row,current.col,value]);}
pushData=true;current.col++;}
current.row++;}
instance.setDataAtCell(setData,null,null,source||'populateFromArray');break;}}};this.selection=selection={inProgress:false,selectedHeader:{cols:false,rows:false},setSelectedHeaders:function(rows,cols){instance.selection.selectedHeader.rows=rows;instance.selection.selectedHeader.cols=cols;},begin:function(){instance.selection.inProgress=true;},finish:function(){var sel=instance.getSelected();Handsontable.hooks.run(instance,'afterSelectionEnd',sel[0],sel[1],sel[2],sel[3]);Handsontable.hooks.run(instance,'afterSelectionEndByProp',sel[0],instance.colToProp(sel[1]),sel[2],instance.colToProp(sel[3]));instance.selection.inProgress=false;},isInProgress:function(){return instance.selection.inProgress;},setRangeStart:function(coords,keepEditorOpened){Handsontable.hooks.run(instance,'beforeSetRangeStart',coords);priv.selRange=new WalkontableCellRange(coords,coords,coords);selection.setRangeEnd(coords,null,keepEditorOpened);},setRangeEnd:function(coords,scrollToCell,keepEditorOpened){if(priv.selRange===null){return;}
var disableVisualSelection,isHeaderSelected=false,areCoordsPositive=true;var firstVisibleRow=instance.view.wt.wtTable.getFirstVisibleRow();var firstVisibleColumn=instance.view.wt.wtTable.getFirstVisibleColumn();var newRangeCoords={row:null,col:null};Handsontable.hooks.run(instance,'beforeSetRangeEnd',coords);instance.selection.begin();newRangeCoords.row=coords.row<0?firstVisibleRow:coords.row;newRangeCoords.col=coords.col<0?firstVisibleColumn:coords.col;priv.selRange.to=new WalkontableCellCoords(newRangeCoords.row,newRangeCoords.col);if(!priv.settings.multiSelect){priv.selRange.from=coords;}
instance.view.wt.selections.current.clear();disableVisualSelection=instance.getCellMeta(priv.selRange.highlight.row,priv.selRange.highlight.col).disableVisualSelection;if(typeof disableVisualSelection==='string'){disableVisualSelection=[disableVisualSelection];}
if(disableVisualSelection===false||Array.isArray(disableVisualSelection)&&disableVisualSelection.indexOf('current')===-1){instance.view.wt.selections.current.add(priv.selRange.highlight);}
instance.view.wt.selections.area.clear();if((disableVisualSelection===false||Array.isArray(disableVisualSelection)&&disableVisualSelection.indexOf('area')===-1)&&selection.isMultiple()){instance.view.wt.selections.area.add(priv.selRange.from);instance.view.wt.selections.area.add(priv.selRange.to);}
if(priv.settings.currentRowClassName||priv.settings.currentColClassName){instance.view.wt.selections.highlight.clear();instance.view.wt.selections.highlight.add(priv.selRange.from);instance.view.wt.selections.highlight.add(priv.selRange.to);}
Handsontable.hooks.run(instance,'afterSelection',priv.selRange.from.row,priv.selRange.from.col,priv.selRange.to.row,priv.selRange.to.col);Handsontable.hooks.run(instance,'afterSelectionByProp',priv.selRange.from.row,datamap.colToProp(priv.selRange.from.col),priv.selRange.to.row,datamap.colToProp(priv.selRange.to.col));if((priv.selRange.from.row===0&&priv.selRange.to.row===instance.countRows()-1&&instance.countRows()>1)||(priv.selRange.from.col===0&&priv.selRange.to.col===instance.countCols()-1&&instance.countCols()>1)){isHeaderSelected=true;}
if(coords.row<0||coords.col<0){areCoordsPositive=false;}
if(scrollToCell!==false&&!isHeaderSelected&&areCoordsPositive){if(priv.selRange.from&&!selection.isMultiple()){instance.view.scrollViewport(priv.selRange.from);}else{instance.view.scrollViewport(coords);}}
selection.refreshBorders(null,keepEditorOpened);},refreshBorders:function(revertOriginal,keepEditor){if(!keepEditor){editorManager.destroyEditor(revertOriginal);}
instance.view.render();if(selection.isSelected()&&!keepEditor){editorManager.prepareEditor();}},isMultiple:function(){var isMultiple=!(priv.selRange.to.col===priv.selRange.from.col&&priv.selRange.to.row===priv.selRange.from.row),modifier=Handsontable.hooks.run(instance,'afterIsMultipleSelection',isMultiple);if(isMultiple){return modifier;}},transformStart:function(rowDelta,colDelta,force,keepEditorOpened){var delta=new WalkontableCellCoords(rowDelta,colDelta),rowTransformDir=0,colTransformDir=0,totalRows,totalCols,coords,fixedRowsBottom;instance.runHooks('modifyTransformStart',delta);totalRows=instance.countRows();totalCols=instance.countCols();fixedRowsBottom=instance.getSettings().fixedRowsBottom;if(priv.selRange.highlight.row+rowDelta>totalRows-1){if(force&&priv.settings.minSpareRows>0&&!(fixedRowsBottom&&priv.selRange.highlight.row>=totalRows-fixedRowsBottom-1)){instance.alter('insert_row',totalRows);totalRows=instance.countRows();}else if(priv.settings.autoWrapCol){delta.row=1-totalRows;delta.col=priv.selRange.highlight.col+delta.col==totalCols-1?1-totalCols:1;}}else if(priv.settings.autoWrapCol&&priv.selRange.highlight.row+delta.row<0&&priv.selRange.highlight.col+delta.col>=0){delta.row=totalRows-1;delta.col=priv.selRange.highlight.col+delta.col==0?totalCols-1:-1;}
if(priv.selRange.highlight.col+delta.col>totalCols-1){if(force&&priv.settings.minSpareCols>0){instance.alter('insert_col',totalCols);totalCols=instance.countCols();}else if(priv.settings.autoWrapRow){delta.row=priv.selRange.highlight.row+delta.row==totalRows-1?1-totalRows:1;delta.col=1-totalCols;}}else if(priv.settings.autoWrapRow&&priv.selRange.highlight.col+delta.col<0&&priv.selRange.highlight.row+delta.row>=0){delta.row=priv.selRange.highlight.row+delta.row==0?totalRows-1:-1;delta.col=totalCols-1;}
coords=new WalkontableCellCoords(priv.selRange.highlight.row+delta.row,priv.selRange.highlight.col+delta.col);if(coords.row<0){rowTransformDir=-1;coords.row=0;}else if(coords.row>0&&coords.row>=totalRows){rowTransformDir=1;coords.row=totalRows-1;}
if(coords.col<0){colTransformDir=-1;coords.col=0;}else if(coords.col>0&&coords.col>=totalCols){colTransformDir=1;coords.col=totalCols-1;}
instance.runHooks('afterModifyTransformStart',coords,rowTransformDir,colTransformDir);selection.setRangeStart(coords,keepEditorOpened);},transformEnd:function(rowDelta,colDelta){var delta=new WalkontableCellCoords(rowDelta,colDelta),rowTransformDir=0,colTransformDir=0,totalRows,totalCols,coords;instance.runHooks('modifyTransformEnd',delta);totalRows=instance.countRows();totalCols=instance.countCols();coords=new WalkontableCellCoords(priv.selRange.to.row+delta.row,priv.selRange.to.col+delta.col);if(coords.row<0){rowTransformDir=-1;coords.row=0;}else if(coords.row>0&&coords.row>=totalRows){rowTransformDir=1;coords.row=totalRows-1;}
if(coords.col<0){colTransformDir=-1;coords.col=0;}else if(coords.col>0&&coords.col>=totalCols){colTransformDir=1;coords.col=totalCols-1;}
instance.runHooks('afterModifyTransformEnd',coords,rowTransformDir,colTransformDir);selection.setRangeEnd(coords,true);},isSelected:function(){return(priv.selRange!==null);},inInSelection:function(coords){if(!selection.isSelected()){return false;}
return priv.selRange.includes(coords);},deselect:function(){if(!selection.isSelected()){return;}
instance.selection.inProgress=false;priv.selRange=null;instance.view.wt.selections.current.clear();instance.view.wt.selections.area.clear();if(priv.settings.currentRowClassName||priv.settings.currentColClassName){instance.view.wt.selections.highlight.clear();}
editorManager.destroyEditor();selection.refreshBorders();Handsontable.hooks.run(instance,'afterDeselect');},selectAll:function(){if(!priv.settings.multiSelect){return;}
selection.setRangeStart(new WalkontableCellCoords(0,0));selection.setRangeEnd(new WalkontableCellCoords(instance.countRows()-1,instance.countCols()-1),false);},empty:function(){if(!selection.isSelected()){return;}
var topLeft=priv.selRange.getTopLeftCorner();var bottomRight=priv.selRange.getBottomRightCorner();var r,c,changes=[];for(r=topLeft.row;r<=bottomRight.row;r++){for(c=topLeft.col;c<=bottomRight.col;c++){if(!instance.getCellMeta(r,c).readOnly){changes.push([r,c,'']);}}}
instance.setDataAtCell(changes);}};this.init=function(){Handsontable.hooks.run(instance,'beforeInit');if(Handsontable.mobileBrowser){addClass(instance.rootElement,'mobile');}
this.updateSettings(priv.settings,true);this.view=new TableView(this);editorManager=new EditorManager(instance,priv,selection,datamap);this.forceFullRender=true;Handsontable.hooks.run(instance,'init');this.view.render();if(typeof priv.firstRun==='object'){Handsontable.hooks.run(instance,'afterChange',priv.firstRun[0],priv.firstRun[1]);priv.firstRun=false;}
Handsontable.hooks.run(instance,'afterInit');};function ValidatorsQueue(){var resolved=false;return{validatorsInQueue:0,valid:true,addValidatorToQueue:function(){this.validatorsInQueue++;resolved=false;},removeValidatorFormQueue:function(){this.validatorsInQueue=this.validatorsInQueue-1<0?0:this.validatorsInQueue-1;this.checkIfQueueIsEmpty();},onQueueEmpty:function(valid){},checkIfQueueIsEmpty:function(){if(this.validatorsInQueue==0&&resolved==false){resolved=true;this.onQueueEmpty(this.valid);}}};}
function validateChanges(changes,source,callback){var waitingForValidator=new ValidatorsQueue();waitingForValidator.onQueueEmpty=resolve;for(var i=changes.length-1;i>=0;i--){if(changes[i]===null){changes.splice(i,1);}else{var row=changes[i][0];var col=datamap.propToCol(changes[i][1]);var logicalCol=instance.runHooks('modifyCol',col);var cellProperties=instance.getCellMeta(row,logicalCol);if(cellProperties.type==='numeric'&&typeof changes[i][3]==='string'){if(changes[i][3].length>0&&(/^-?[\d\s]*(\.|\,)?\d*$/.test(changes[i][3])||cellProperties.format)){var len=changes[i][3].length;if(typeof cellProperties.language=='undefined'){numeral.language('en');}else if(changes[i][3].indexOf('.')===len-3&&changes[i][3].indexOf(',')===-1){numeral.language('en');}else{numeral.language(cellProperties.language);}
if(numeral.validate(changes[i][3])){changes[i][3]=numeral().unformat(changes[i][3]);}}}
if(instance.getCellValidator(cellProperties)){waitingForValidator.addValidatorToQueue();instance.validateCell(changes[i][3],cellProperties,(function(i,cellProperties){return function(result){if(typeof result!=='boolean'){throw new Error('Validation error: result is not boolean');}
if(result===false&&cellProperties.allowInvalid===false){changes.splice(i,1);cellProperties.valid=true;--i;}
waitingForValidator.removeValidatorFormQueue();};})(i,cellProperties),source);}}}
waitingForValidator.checkIfQueueIsEmpty();function resolve(){var beforeChangeResult;if(changes.length){beforeChangeResult=Handsontable.hooks.run(instance,'beforeChange',changes,source);if(typeof beforeChangeResult==='function'){console.warn('Your beforeChange callback returns a function. It\'s not supported since Handsontable 0.12.1 (and the returned function will not be executed).');}else if(beforeChangeResult===false){changes.splice(0,changes.length);}}
callback();}}
function applyChanges(changes,source){var i=changes.length-1;if(i<0){return;}
for(;0<=i;i--){if(changes[i]===null){changes.splice(i,1);continue;}
if(changes[i][2]==null&&changes[i][3]==null){continue;}
if(priv.settings.allowInsertRow){while(changes[i][0]>instance.countRows()-1){datamap.createRow();}}
if(instance.dataType==='array'&&priv.settings.allowInsertColumn){while(datamap.propToCol(changes[i][1])>instance.countCols()-1){datamap.createCol();}}
datamap.set(changes[i][0],changes[i][1],changes[i][3]);}
instance.forceFullRender=true;grid.adjustRowsAndCols();Handsontable.hooks.run(instance,'beforeChangeRender',changes,source);selection.refreshBorders(null,true);instance.view.wt.wtOverlays.adjustElementsSize();Handsontable.hooks.run(instance,'afterChange',changes,source||'edit');}
this.validateCell=function(value,cellProperties,callback,source){var validator=instance.getCellValidator(cellProperties);function done(valid){var col=cellProperties.col,row=cellProperties.row,td=instance.getCell(row,col,true);if(td){instance.view.wt.wtSettings.settings.cellRenderer(row,col,td);}
callback(valid);}
if(Object.prototype.toString.call(validator)==='[object RegExp]'){validator=(function(validator){return function(value,callback){callback(validator.test(value));};})(validator);}
if(typeof validator=='function'){value=Handsontable.hooks.run(instance,'beforeValidate',value,cellProperties.row,cellProperties.prop,source);instance._registerTimeout(setTimeout(function(){validator.call(cellProperties,value,function(valid){valid=Handsontable.hooks.run(instance,'afterValidate',valid,value,cellProperties.row,cellProperties.prop,source);cellProperties.valid=valid;done(valid);Handsontable.hooks.run(instance,'postAfterValidate',valid,value,cellProperties.row,cellProperties.prop,source);});},0));}else{cellProperties.valid=true;done(cellProperties.valid);}};function setDataInputToArray(row,propOrCol,value){if(typeof row==='object'){return row;}else{return[[row,propOrCol,value]];}}
this.setDataAtCell=function(row,col,value,source){var input=setDataInputToArray(row,col,value),i,ilen,changes=[],prop;for(i=0,ilen=input.length;i<ilen;i++){if(typeof input[i]!=='object'){throw new Error('Method `setDataAtCell` accepts row number or changes array of arrays as its first parameter');}
if(typeof input[i][1]!=='number'){throw new Error('Method `setDataAtCell` accepts row and column number as its parameters. If you want to use object property name, use method `setDataAtRowProp`');}
prop=datamap.colToProp(input[i][1]);changes.push([input[i][0],prop,datamap.get(input[i][0],prop),input[i][2]]);}
if(!source&&typeof row==='object'){source=col;}
validateChanges(changes,source,function(){applyChanges(changes,source);});};this.setDataAtRowProp=function(row,prop,value,source){var input=setDataInputToArray(row,prop,value),i,ilen,changes=[];for(i=0,ilen=input.length;i<ilen;i++){changes.push([input[i][0],input[i][1],datamap.get(input[i][0],input[i][1]),input[i][2]]);}
if(!source&&typeof row==='object'){source=prop;}
validateChanges(changes,source,function(){applyChanges(changes,source);});};this.listen=function(){Handsontable.activeGuid=instance.guid;if(document.activeElement&&document.activeElement!==document.body){document.activeElement.blur();}else if(!document.activeElement){document.body.focus();}};this.unlisten=function(){Handsontable.activeGuid=null;};this.isListening=function(){return Handsontable.activeGuid===instance.guid;};this.destroyEditor=function(revertOriginal){selection.refreshBorders(revertOriginal);};this.populateFromArray=function(row,col,input,endRow,endCol,source,method,direction,deltas){var c;if(!(typeof input==='object'&&typeof input[0]==='object')){throw new Error('populateFromArray parameter `input` must be an array of arrays');}
c=typeof endRow==='number'?new WalkontableCellCoords(endRow,endCol):null;return grid.populateFromArray(new WalkontableCellCoords(row,col),input,c,source,method,direction,deltas);};this.spliceCol=function(col,index,amount){return datamap.spliceCol.apply(datamap,arguments);};this.spliceRow=function(row,index,amount){return datamap.spliceRow.apply(datamap,arguments);};this.getSelected=function(){if(selection.isSelected()){return[priv.selRange.from.row,priv.selRange.from.col,priv.selRange.to.row,priv.selRange.to.col];}};this.getSelectedRange=function(){if(selection.isSelected()){return priv.selRange;}};this.render=function(){if(instance.view){instance.renderCall=true;instance.forceFullRender=true;selection.refreshBorders(null,true);}};this.loadData=function(data){if(typeof data==='object'&&data!==null){if(!(data.push&&data.splice)){data=[data];}}else if(data===null){data=[];var row;for(var r=0,rlen=priv.settings.startRows;r<rlen;r++){row=[];for(var c=0,clen=priv.settings.startCols;c<clen;c++){row.push(null);}
data.push(row);}}else{throw new Error('loadData only accepts array of objects or array of arrays ('+typeof data+' given)');}
priv.isPopulated=false;GridSettings.prototype.data=data;if(Array.isArray(priv.settings.dataSchema)||Array.isArray(data[0])){instance.dataType='array';}else if(typeof priv.settings.dataSchema==='function'){instance.dataType='function';}else{instance.dataType='object';}
datamap=new DataMap(instance,priv,GridSettings);clearCellSettingCache();grid.adjustRowsAndCols();Handsontable.hooks.run(instance,'afterLoadData');if(priv.firstRun){priv.firstRun=[null,'loadData'];}else{Handsontable.hooks.run(instance,'afterChange',null,'loadData');instance.render();}
priv.isPopulated=true;function clearCellSettingCache(){priv.cellSettings.length=0;}};this.getData=function(r,c,r2,c2){if(typeof r==='undefined'){return datamap.getAll();}else{return datamap.getRange(new WalkontableCellCoords(r,c),new WalkontableCellCoords(r2,c2),datamap.DESTINATION_RENDERER);}};this.getCopyableText=function(startRow,startCol,endRow,endCol){return datamap.getCopyableText(new WalkontableCellCoords(startRow,startCol),new WalkontableCellCoords(endRow,endCol));};this.getCopyableData=function(row,column){return datamap.getCopyable(row,datamap.colToProp(column));};this.getSchema=function(){return datamap.getSchema();};this.updateSettings=function(settings,init){var i,clen;if(typeof settings.rows!=='undefined'){throw new Error('"rows" setting is no longer supported. do you mean startRows, minRows or maxRows?');}
if(typeof settings.cols!=='undefined'){throw new Error('"cols" setting is no longer supported. do you mean startCols, minCols or maxCols?');}
for(i in settings){if(i==='data'){continue;}else{if(Handsontable.hooks.getRegistered().indexOf(i)>-1){if(typeof settings[i]==='function'||Array.isArray(settings[i])){instance.addHook(i,settings[i]);}}else{if(!init&&settings.hasOwnProperty(i)){GridSettings.prototype[i]=settings[i];}}}}
if(settings.data===void 0&&priv.settings.data===void 0){instance.loadData(null);}else if(settings.data!==void 0){instance.loadData(settings.data);}else if(settings.columns!==void 0){datamap.createMap();}
clen=instance.countCols();priv.cellSettings.length=0;if(clen>0){var proto,column;for(i=0;i<clen;i++){priv.columnSettings[i]=columnFactory(GridSettings,priv.columnsSettingConflicts);proto=priv.columnSettings[i].prototype;if(GridSettings.prototype.columns){column=GridSettings.prototype.columns[i];extend(proto,column);extend(proto,expandType(column));}}}
if(typeof settings.cell!=='undefined'){for(i in settings.cell){if(settings.cell.hasOwnProperty(i)){var cell=settings.cell[i];instance.setCellMetaObject(cell.row,cell.col,cell);}}}
Handsontable.hooks.run(instance,'afterCellMetaReset');if(typeof settings.className!=='undefined'){if(GridSettings.prototype.className){removeClass(instance.rootElement,GridSettings.prototype.className);}
if(settings.className){addClass(instance.rootElement,settings.className);}}
if(typeof settings.height!='undefined'){var height=settings.height;if(typeof height=='function'){height=height();}
instance.rootElement.style.height=height+'px';}
if(typeof settings.width!='undefined'){var width=settings.width;if(typeof width=='function'){width=width();}
instance.rootElement.style.width=width+'px';}
if(height){instance.rootElement.style.overflow='hidden';}
if(!init){Handsontable.hooks.run(instance,'afterUpdateSettings');}
grid.adjustRowsAndCols();if(instance.view&&!priv.firstRun){instance.forceFullRender=true;selection.refreshBorders(null,true);}};this.getValue=function(){var sel=instance.getSelected();if(GridSettings.prototype.getValue){if(typeof GridSettings.prototype.getValue==='function'){return GridSettings.prototype.getValue.call(instance);}else if(sel){return instance.getData()[sel[0]][GridSettings.prototype.getValue];}}else if(sel){return instance.getDataAtCell(sel[0],sel[1]);}};function expandType(obj){if(!obj.hasOwnProperty('type')){return;}
var type,expandedType={};if(typeof obj.type==='object'){type=obj.type;}else if(typeof obj.type==='string'){type=Handsontable.cellTypes[obj.type];if(type===void 0){throw new Error('You declared cell type "'+obj.type+'" as a string that is not mapped to a known object. Cell type must be an object or a string mapped to an object in Handsontable.cellTypes');}}
for(var i in type){if(type.hasOwnProperty(i)&&!obj.hasOwnProperty(i)){expandedType[i]=type[i];}}
return expandedType;}
this.getSettings=function(){return priv.settings;};this.clear=function(){selection.selectAll();selection.empty();};this.alter=function(action,index,amount,source,keepEmptyRows){grid.alter(action,index,amount,source,keepEmptyRows);};this.getCell=function(row,col,topmost){return instance.view.getCellAtCoords(new WalkontableCellCoords(row,col),topmost);};this.getCoords=function(elem){return this.view.wt.wtTable.getCoords.call(this.view.wt.wtTable,elem);};this.colToProp=function(col){return datamap.colToProp(col);};this.propToCol=function(prop){return datamap.propToCol(prop);};this.getDataAtCell=function(row,col){return datamap.get(row,datamap.colToProp(col));};this.getDataAtRowProp=function(row,prop){return datamap.get(row,prop);};this.getDataAtCol=function(col){var out=[];return out.concat.apply(out,datamap.getRange(new WalkontableCellCoords(0,col),new WalkontableCellCoords(priv.settings.data.length-1,col),datamap.DESTINATION_RENDERER));};this.getDataAtProp=function(prop){var out=[],range;range=datamap.getRange(new WalkontableCellCoords(0,datamap.propToCol(prop)),new WalkontableCellCoords(priv.settings.data.length-1,datamap.propToCol(prop)),datamap.DESTINATION_RENDERER);return out.concat.apply(out,range);};this.getSourceDataAtCol=function(col){var out=[],data=priv.settings.data;for(var i=0;i<data.length;i++){out.push(data[i][col]);}
return out;};this.getSourceDataAtRow=function(row){return priv.settings.data[row];};this.getDataAtRow=function(row){var data=datamap.getRange(new WalkontableCellCoords(row,0),new WalkontableCellCoords(row,this.countCols()-1),datamap.DESTINATION_RENDERER);return data[0];};this.getDataType=function(rowFrom,columnFrom,rowTo,columnTo){var $__18=this;var previousType=null;var currentType=null;if(rowFrom===void 0){rowFrom=0;rowTo=this.countRows();columnFrom=0;columnTo=this.countCols();}
if(rowTo===void 0){rowTo=rowFrom;}
if(columnTo===void 0){columnTo=columnFrom;}
var type='mixed';rangeEach(Math.min(rowFrom,rowTo),Math.max(rowFrom,rowTo),(function(row){var isTypeEqual=true;rangeEach(Math.min(columnFrom,columnTo),Math.max(columnFrom,columnTo),(function(column){var cellType=$__18.getCellMeta(row,column);currentType=cellType.type;if(previousType){isTypeEqual=previousType===currentType;}else{previousType=currentType;}
return isTypeEqual;}));type=isTypeEqual?currentType:'mixed';return isTypeEqual;}));return type;};this.removeCellMeta=function(row,col,key){var cellMeta=instance.getCellMeta(row,col);if(cellMeta[key]!=undefined){delete priv.cellSettings[row][col][key];}};this.setCellMetaObject=function(row,col,prop){if(typeof prop==='object'){for(var key in prop){if(prop.hasOwnProperty(key)){var value=prop[key];this.setCellMeta(row,col,key,value);}}}};this.setCellMeta=function(row,col,key,val){if(!priv.cellSettings[row]){priv.cellSettings[row]=[];}
if(!priv.cellSettings[row][col]){priv.cellSettings[row][col]=new priv.columnSettings[col]();}
priv.cellSettings[row][col][key]=val;Handsontable.hooks.run(instance,'afterSetCellMeta',row,col,key,val);};this.getCellsMeta=function(){return arrayFlatten(priv.cellSettings);};this.getCellMeta=function(row,col){var prop=datamap.colToProp(col),cellProperties;row=translateRowIndex(row);col=translateColIndex(col);if(!priv.columnSettings[col]){priv.columnSettings[col]=columnFactory(GridSettings,priv.columnsSettingConflicts);}
if(!priv.cellSettings[row]){priv.cellSettings[row]=[];}
if(!priv.cellSettings[row][col]){priv.cellSettings[row][col]=new priv.columnSettings[col]();}
cellProperties=priv.cellSettings[row][col];cellProperties.row=row;cellProperties.col=col;cellProperties.prop=prop;cellProperties.instance=instance;Handsontable.hooks.run(instance,'beforeGetCellMeta',row,col,cellProperties);extend(cellProperties,expandType(cellProperties));if(cellProperties.cells){var settings=cellProperties.cells.call(cellProperties,row,col,prop);if(settings){extend(cellProperties,settings);extend(cellProperties,expandType(settings));}}
Handsontable.hooks.run(instance,'afterGetCellMeta',row,col,cellProperties);return cellProperties;};this.isColumnModificationAllowed=function(){return!(instance.dataType==='object'||instance.getSettings().columns);};function translateRowIndex(row){return Handsontable.hooks.run(instance,'modifyRow',row);}
function translateColIndex(col){return Handsontable.hooks.run(instance,'modifyCol',col);}
var rendererLookup=cellMethodLookupFactory('renderer');this.getCellRenderer=function(row,col){var renderer=rendererLookup.call(this,row,col);return getRenderer(renderer);};this.getCellEditor=cellMethodLookupFactory('editor');this.getCellValidator=cellMethodLookupFactory('validator');this.validateCells=function(callback){var waitingForValidator=new ValidatorsQueue();waitingForValidator.onQueueEmpty=callback;var i=instance.countRows()-1;while(i>=0){var j=instance.countCols()-1;while(j>=0){waitingForValidator.addValidatorToQueue();instance.validateCell(instance.getDataAtCell(i,j),instance.getCellMeta(i,j),function(result){if(typeof result!=='boolean'){throw new Error('Validation error: result is not boolean');}
if(result===false){waitingForValidator.valid=false;}
waitingForValidator.removeValidatorFormQueue();},'validateCells');j--;}
i--;}
waitingForValidator.checkIfQueueIsEmpty();};this.getRowHeader=function(row){if(row===void 0){var out=[];for(var i=0,ilen=instance.countRows();i<ilen;i++){out.push(instance.getRowHeader(i));}
return out;}else if(Array.isArray(priv.settings.rowHeaders)&&priv.settings.rowHeaders[row]!==void 0){return priv.settings.rowHeaders[row];}else if(typeof priv.settings.rowHeaders==='function'){return priv.settings.rowHeaders(row);}else if(priv.settings.rowHeaders&&typeof priv.settings.rowHeaders!=='string'&&typeof priv.settings.rowHeaders!=='number'){return row+1;}else{return priv.settings.rowHeaders;}};this.hasRowHeaders=function(){return!!priv.settings.rowHeaders;};this.hasColHeaders=function(){if(priv.settings.colHeaders!==void 0&&priv.settings.colHeaders!==null){return!!priv.settings.colHeaders;}
for(var i=0,ilen=instance.countCols();i<ilen;i++){if(instance.getColHeader(i)){return true;}}
return false;};this.getColHeader=function(col){if(col===void 0){var out=[];for(var i=0,ilen=instance.countCols();i<ilen;i++){out.push(instance.getColHeader(i));}
return out;}else{var baseCol=col;col=Handsontable.hooks.run(instance,'modifyCol',col);if(priv.settings.columns&&priv.settings.columns[col]&&priv.settings.columns[col].title){return priv.settings.columns[col].title;}else if(Array.isArray(priv.settings.colHeaders)&&priv.settings.colHeaders[col]!==void 0){return priv.settings.colHeaders[col];}else if(typeof priv.settings.colHeaders==='function'){return priv.settings.colHeaders(col);}else if(priv.settings.colHeaders&&typeof priv.settings.colHeaders!=='string'&&typeof priv.settings.colHeaders!=='number'){return spreadsheetColumnLabel(baseCol);}else{return priv.settings.colHeaders;}}};this._getColWidthFromSettings=function(col){var cellProperties=instance.getCellMeta(0,col);var width=cellProperties.width;if(width===void 0||width===priv.settings.width){width=cellProperties.colWidths;}
if(width!==void 0&&width!==null){switch(typeof width){case'object':width=width[col];break;case'function':width=width(col);break;}
if(typeof width==='string'){width=parseInt(width,10);}}
return width;};this.getColWidth=function(col){var width=instance._getColWidthFromSettings(col);width=Handsontable.hooks.run(instance,'modifyColWidth',width,col);if(width===void 0){width=WalkontableViewportColumnsCalculator.DEFAULT_WIDTH;}
return width;};this._getRowHeightFromSettings=function(row){var height=priv.settings.rowHeights;if(height!==void 0&&height!==null){switch(typeof height){case'object':height=height[row];break;case'function':height=height(row);break;}
if(typeof height==='string'){height=parseInt(height,10);}}
return height;};this.getRowHeight=function(row){var height=instance._getRowHeightFromSettings(row);height=Handsontable.hooks.run(instance,'modifyRowHeight',height,row);return height;};this.countRows=function(){return priv.settings.data.length;};this.countCols=function(){if(instance.dataType==='object'||instance.dataType==='function'){if(priv.settings.columns&&priv.settings.columns.length){return priv.settings.columns.length;}else{return datamap.colToPropCache.length;}}else if(instance.dataType==='array'){if(priv.settings.columns&&priv.settings.columns.length){return priv.settings.columns.length;}else if(priv.settings.data&&priv.settings.data[0]&&priv.settings.data[0].length){return priv.settings.data[0].length;}else{return 0;}}};this.getColspanOffset=function(col,level){var colspanSum=0;if(instance.colspanArray){for(var i=0;i<col;i++){colspanSum+=instance.colspanArray[level][i]-1||0;}
return colspanSum;}
var colspanSum=0;var TRindex=instance.view.wt.wtTable.THEAD.childNodes.length-level-1;var TR=instance.view.wt.wtTable.THEAD.querySelector('tr:nth-child('+parseInt(TRindex+1,10)+')');var rowHeadersCount=instance.view.wt.wtSettings.settings.rowHeaders().length;for(var i=rowHeadersCount;i<rowHeadersCount+col;i++){if(TR.childNodes[i].hasAttribute('colspan')){colspanSum+=parseInt(TR.childNodes[i].getAttribute('colspan'),10)-1;}}
return colspanSum;};this.getHeaderColspan=function(col,level){var TRindex=instance.view.wt.wtTable.THEAD.childNodes.length-level-1;var rowHeadersCount=instance.view.wt.wtSettings.settings.rowHeaders().length;var TR=instance.view.wt.wtTable.THEAD.querySelector('tr:nth-child('+parseInt(TRindex+1,10)+')');var offsettedColIndex=rowHeadersCount+col-instance.view.wt.wtViewport.columnsRenderCalculator.startColumn;if(TR.childNodes[offsettedColIndex].hasAttribute('colspan')){return parseInt(TR.childNodes[offsettedColIndex].getAttribute('colspan'),10);}
return 0;};this.rowOffset=function(){return instance.view.wt.wtTable.getFirstRenderedRow();};this.colOffset=function(){return instance.view.wt.wtTable.getFirstRenderedColumn();};this.countRenderedRows=function(){return instance.view.wt.drawn?instance.view.wt.wtTable.getRenderedRowsCount():-1;};this.countVisibleRows=function(){return instance.view.wt.drawn?instance.view.wt.wtTable.getVisibleRowsCount():-1;};this.countRenderedCols=function(){return instance.view.wt.drawn?instance.view.wt.wtTable.getRenderedColumnsCount():-1;};this.countVisibleCols=function(){return instance.view.wt.drawn?instance.view.wt.wtTable.getVisibleColumnsCount():-1;};this.countEmptyRows=function(ending){var i=instance.countRows()-1,empty=0,row;while(i>=0){row=Handsontable.hooks.run(this,'modifyRow',i);if(instance.isEmptyRow(row)){empty++;}else if(ending){break;}
i--;}
return empty;};this.countEmptyCols=function(ending){if(instance.countRows()<1){return 0;}
var i=instance.countCols()-1,empty=0;while(i>=0){if(instance.isEmptyCol(i)){empty++;}else if(ending){break;}
i--;}
return empty;};this.isEmptyRow=function(row){return priv.settings.isEmptyRow.call(instance,row);};this.isEmptyCol=function(col){return priv.settings.isEmptyCol.call(instance,col);};this.selectCell=function(row,col,endRow,endCol,scrollToCell,changeListener){var coords;changeListener=typeof changeListener==='undefined'||changeListener===true;if(typeof row!=='number'||row<0||row>=instance.countRows()){return false;}
if(typeof col!=='number'||col<0||col>=instance.countCols()){return false;}
if(typeof endRow!=='undefined'){if(typeof endRow!=='number'||endRow<0||endRow>=instance.countRows()){return false;}
if(typeof endCol!=='number'||endCol<0||endCol>=instance.countCols()){return false;}}
coords=new WalkontableCellCoords(row,col);priv.selRange=new WalkontableCellRange(coords,coords,coords);if(document.activeElement&&document.activeElement!==document.documentElement&&document.activeElement!==document.body){document.activeElement.blur();}
if(changeListener){instance.listen();}
if(typeof endRow==='undefined'){selection.setRangeEnd(priv.selRange.from,scrollToCell);}else{selection.setRangeEnd(new WalkontableCellCoords(endRow,endCol),scrollToCell);}
instance.selection.finish();return true;};this.selectCellByProp=function(row,prop,endRow,endProp,scrollToCell){arguments[1]=datamap.propToCol(arguments[1]);if(typeof arguments[3]!=='undefined'){arguments[3]=datamap.propToCol(arguments[3]);}
return instance.selectCell.apply(instance,arguments);};this.deselectCell=function(){selection.deselect();};this.destroy=function(){instance._clearTimeouts();if(instance.view){instance.view.destroy();}
empty(instance.rootElement);eventManager.destroy();Handsontable.hooks.run(instance,'afterDestroy');Handsontable.hooks.destroy(instance);for(var i in instance){if(instance.hasOwnProperty(i)){if(typeof instance[i]==='function'){instance[i]=postMortem;}else if(i!=='guid'){instance[i]=null;}}}
priv=null;datamap=null;grid=null;selection=null;editorManager=null;instance=null;GridSettings=null;};function postMortem(){throw new Error('This method cannot be called because this Handsontable instance has been destroyed');}
this.getActiveEditor=function(){return editorManager.getActiveEditor();};this.getPlugin=function(pluginName){return getPlugin(this,pluginName);};this.getInstance=function(){return instance;};this.addHook=function(key,callback){Handsontable.hooks.add(key,callback,instance);};this.addHookOnce=function(key,callback){Handsontable.hooks.once(key,callback,instance);};this.removeHook=function(key,callback){Handsontable.hooks.remove(key,callback,instance);};this.runHooks=function(key,p1,p2,p3,p4,p5,p6){return Handsontable.hooks.run(instance,key,p1,p2,p3,p4,p5,p6);};this.timeouts=[];this._registerTimeout=function(handle){this.timeouts.push(handle);};this._clearTimeouts=function(){for(var i=0,ilen=this.timeouts.length;i<ilen;i++){clearTimeout(this.timeouts[i]);}};this.version=Handsontable.version;Handsontable.hooks.run(instance,'construct');};var DefaultSettings=function(){};DefaultSettings.prototype={data:void 0,dataSchema:void 0,width:void 0,height:void 0,startRows:5,startCols:5,rowHeaders:null,colHeaders:null,colWidths:void 0,columns:void 0,cells:void 0,cell:[],comments:false,customBorders:false,minRows:0,minCols:0,maxRows:Infinity,maxCols:Infinity,minSpareRows:0,minSpareCols:0,allowInsertRow:true,allowInsertColumn:true,allowRemoveRow:true,allowRemoveColumn:true,multiSelect:true,fillHandle:true,fixedRowsTop:0,fixedRowsBottom:0,fixedColumnsLeft:0,outsideClickDeselects:true,enterBeginsEditing:true,enterMoves:{row:1,col:0},tabMoves:{row:0,col:1},autoWrapRow:false,autoWrapCol:false,copyRowsLimit:1000,copyColsLimit:1000,pasteMode:'overwrite',persistentState:false,currentRowClassName:void 0,currentColClassName:void 0,className:void 0,tableClassName:void 0,stretchH:'none',isEmptyRow:function(row){var col,colLen,value,meta;for(col=0,colLen=this.countCols();col<colLen;col++){value=this.getDataAtCell(row,col);if(value!==''&&value!==null&&typeof value!=='undefined'){if(typeof value==='object'){meta=this.getCellMeta(row,col);return isObjectEquals(this.getSchema()[meta.prop],value);}
return false;}}
return true;},isEmptyCol:function(col){var row,rowLen,value;for(row=0,rowLen=this.countRows();row<rowLen;row++){value=this.getDataAtCell(row,col);if(value!==''&&value!==null&&typeof value!=='undefined'){return false;}}
return true;},observeDOMVisibility:true,allowInvalid:true,invalidCellClassName:'htInvalid',placeholder:false,placeholderCellClassName:'htPlaceholder',readOnlyCellClassName:'htDimmed',renderer:void 0,commentedCellClassName:'htCommentCell',fragmentSelection:false,readOnly:false,skipColumnOnPaste:false,search:false,type:'text',copyable:true,editor:void 0,autoComplete:void 0,visibleRows:10,trimDropdown:true,debug:false,wordWrap:true,noWordWrapClassName:'htNoWrap',contextMenu:void 0,contextMenuCopyPaste:void 0,copyPaste:void 0,undo:void 0,columnSorting:void 0,manualColumnMove:void 0,manualColumnResize:void 0,manualRowMove:void 0,manualRowResize:void 0,mergeCells:false,viewportRowRenderingOffset:'auto',viewportColumnRenderingOffset:'auto',validator:void 0,disableVisualSelection:false,sortIndicator:false,manualColumnFreeze:void 0,trimWhitespace:true,settings:void 0,source:void 0,title:void 0,checkedTemplate:void 0,uncheckedTemplate:void 0,label:void 0,format:void 0,language:void 0,selectOptions:void 0,autoColumnSize:void 0,autoRowSize:void 0,dateFormat:void 0,correctFormat:false,defaultDate:void 0,strict:void 0,renderAllRows:void 0};Handsontable.DefaultSettings=DefaultSettings;},{"3rdparty/walkontable/src/calculator/viewportColumns":3,"3rdparty/walkontable/src/cell/coords":5,"3rdparty/walkontable/src/cell/range":6,"3rdparty/walkontable/src/selection":18,"dataMap":26,"editorManager":27,"eventManager":40,"helpers/array":41,"helpers/data":43,"helpers/dom/element":44,"helpers/number":48,"helpers/object":49,"helpers/setting":50,"helpers/string":51,"numeral":"numeral","plugins":55,"renderers":86,"tableView":95}],26:[function(require,module,exports){"use strict";Object.defineProperties(exports,{DataMap:{get:function(){return DataMap;}},__esModule:{value:true}});var $__SheetClip__,$__helpers_47_data__,$__helpers_47_setting__,$__helpers_47_object__,$__helpers_47_array__,$__multiMap__;var SheetClip=($__SheetClip__=require("SheetClip"),$__SheetClip__&&$__SheetClip__.__esModule&&$__SheetClip__||{default:$__SheetClip__}).default;var cellMethodLookupFactory=($__helpers_47_data__=require("helpers/data"),$__helpers_47_data__&&$__helpers_47_data__.__esModule&&$__helpers_47_data__||{default:$__helpers_47_data__}).cellMethodLookupFactory;var columnFactory=($__helpers_47_setting__=require("helpers/setting"),$__helpers_47_setting__&&$__helpers_47_setting__.__esModule&&$__helpers_47_setting__||{default:$__helpers_47_setting__}).columnFactory;var $__3=($__helpers_47_object__=require("helpers/object"),$__helpers_47_object__&&$__helpers_47_object__.__esModule&&$__helpers_47_object__||{default:$__helpers_47_object__}),duckSchema=$__3.duckSchema,deepExtend=$__3.deepExtend;var $__4=($__helpers_47_array__=require("helpers/array"),$__helpers_47_array__&&$__helpers_47_array__.__esModule&&$__helpers_47_array__||{default:$__helpers_47_array__}),extendArray=$__4.extendArray,to2dArray=$__4.to2dArray;var MultiMap=($__multiMap__=require("multiMap"),$__multiMap__&&$__multiMap__.__esModule&&$__multiMap__||{default:$__multiMap__}).MultiMap;function DataMap(instance,priv,GridSettings){this.instance=instance;this.priv=priv;this.GridSettings=GridSettings;this.dataSource=this.instance.getSettings().data;if(this.dataSource[0]){this.duckSchema=this.recursiveDuckSchema(this.dataSource[0]);}else{this.duckSchema={};}
this.createMap();}
DataMap.prototype.DESTINATION_RENDERER=1;DataMap.prototype.DESTINATION_CLIPBOARD_GENERATOR=2;DataMap.prototype.recursiveDuckSchema=function(object){return duckSchema(object);};DataMap.prototype.recursiveDuckColumns=function(schema,lastCol,parent){var prop,i;if(typeof lastCol==='undefined'){lastCol=0;parent='';}
if(typeof schema==='object'&&!Array.isArray(schema)){for(i in schema){if(schema.hasOwnProperty(i)){if(schema[i]===null){prop=parent+i;this.colToPropCache.push(prop);this.propToColCache.set(prop,lastCol);lastCol++;}else{lastCol=this.recursiveDuckColumns(schema[i],lastCol,i+'.');}}}}
return lastCol;};DataMap.prototype.createMap=function(){var i,ilen,schema=this.getSchema();if(typeof schema==='undefined'){throw new Error('trying to create `columns` definition but you didnt\' provide `schema` nor `data`');}
this.colToPropCache=[];this.propToColCache=new MultiMap();var columns=this.instance.getSettings().columns;if(columns){for(i=0,ilen=columns.length;i<ilen;i++){if(typeof columns[i].data!='undefined'){this.colToPropCache[i]=columns[i].data;this.propToColCache.set(columns[i].data,i);}}}else{this.recursiveDuckColumns(schema);}};DataMap.prototype.colToProp=function(col){col=Handsontable.hooks.run(this.instance,'modifyCol',col);if(this.colToPropCache&&typeof this.colToPropCache[col]!=='undefined'){return this.colToPropCache[col];}
return col;};DataMap.prototype.propToCol=function(prop){var col;if(typeof this.propToColCache.get(prop)==='undefined'){col=prop;}else{col=this.propToColCache.get(prop);}
col=Handsontable.hooks.run(this.instance,'modifyCol',col);return col;};DataMap.prototype.getSchema=function(){var schema=this.instance.getSettings().dataSchema;if(schema){if(typeof schema==='function'){return schema();}
return schema;}
return this.duckSchema;};DataMap.prototype.createRow=function(index,amount,createdAutomatically){var row,colCount=this.instance.countCols(),numberOfCreatedRows=0,currentIndex;if(!amount){amount=1;}
if(typeof index!=='number'||index>=this.instance.countRows()){index=this.instance.countRows();}
currentIndex=index;var maxRows=this.instance.getSettings().maxRows;while(numberOfCreatedRows<amount&&this.instance.countRows()<maxRows){if(this.instance.dataType==='array'){row=[];for(var c=0;c<colCount;c++){row.push(null);}}else if(this.instance.dataType==='function'){row=this.instance.getSettings().dataSchema(index);}else{row={};deepExtend(row,this.getSchema());}
if(index===this.instance.countRows()){this.dataSource.push(row);}else{this.dataSource.splice(index,0,row);}
numberOfCreatedRows++;currentIndex++;}
Handsontable.hooks.run(this.instance,'afterCreateRow',index,numberOfCreatedRows,createdAutomatically);this.instance.forceFullRender=true;return numberOfCreatedRows;};DataMap.prototype.createCol=function(index,amount,createdAutomatically){if(!this.instance.isColumnModificationAllowed()){throw new Error('Cannot create new column. When data source in an object, '+'you can only have as much columns as defined in first data row, data schema or in the \'columns\' setting.'+'If you want to be able to add new columns, you have to use array datasource.');}
var rlen=this.instance.countRows(),data=this.dataSource,constructor,numberOfCreatedCols=0,currentIndex;if(!amount){amount=1;}
currentIndex=index;var maxCols=this.instance.getSettings().maxCols;while(numberOfCreatedCols<amount&&this.instance.countCols()<maxCols){constructor=columnFactory(this.GridSettings,this.priv.columnsSettingConflicts);if(typeof index!=='number'||index>=this.instance.countCols()){for(var r=0;r<rlen;r++){if(typeof data[r]==='undefined'){data[r]=[];}
data[r].push(null);}
this.priv.columnSettings.push(constructor);}else{for(var r=0;r<rlen;r++){data[r].splice(currentIndex,0,null);}
this.priv.columnSettings.splice(currentIndex,0,constructor);}
numberOfCreatedCols++;currentIndex++;}
Handsontable.hooks.run(this.instance,'afterCreateCol',index,numberOfCreatedCols,createdAutomatically);this.instance.forceFullRender=true;return numberOfCreatedCols;};DataMap.prototype.removeRow=function(index,amount){if(!amount){amount=1;}
if(typeof index!=='number'){index=-amount;}
index=(this.instance.countRows()+index)%this.instance.countRows();var logicRows=this.physicalRowsToLogical(index,amount);var actionWasNotCancelled=Handsontable.hooks.run(this.instance,'beforeRemoveRow',index,amount);if(actionWasNotCancelled===false){return;}
var data=this.dataSource;var newData=data.filter(function(row,index){return logicRows.indexOf(index)==-1;});data.length=0;Array.prototype.push.apply(data,newData);Handsontable.hooks.run(this.instance,'afterRemoveRow',index,amount);this.instance.forceFullRender=true;};DataMap.prototype.removeCol=function(index,amount){if(this.instance.dataType==='object'||this.instance.getSettings().columns){throw new Error('cannot remove column with object data source or columns option specified');}
if(!amount){amount=1;}
if(typeof index!=='number'){index=-amount;}
index=(this.instance.countCols()+index)%this.instance.countCols();var actionWasNotCancelled=Handsontable.hooks.run(this.instance,'beforeRemoveCol',index,amount);if(actionWasNotCancelled===false){return;}
var data=this.dataSource;for(var r=0,rlen=this.instance.countRows();r<rlen;r++){data[r].splice(index,amount);}
this.priv.columnSettings.splice(index,amount);Handsontable.hooks.run(this.instance,'afterRemoveCol',index,amount);this.instance.forceFullRender=true;};DataMap.prototype.spliceCol=function(col,index,amount){var elements=4<=arguments.length?[].slice.call(arguments,3):[];var colData=this.instance.getDataAtCol(col);var removed=colData.slice(index,index+amount);var after=colData.slice(index+amount);extendArray(elements,after);var i=0;while(i<amount){elements.push(null);i++;}
to2dArray(elements);this.instance.populateFromArray(index,col,elements,null,null,'spliceCol');return removed;};DataMap.prototype.spliceRow=function(row,index,amount){var elements=4<=arguments.length?[].slice.call(arguments,3):[];var rowData=this.instance.getSourceDataAtRow(row);var removed=rowData.slice(index,index+amount);var after=rowData.slice(index+amount);extendArray(elements,after);var i=0;while(i<amount){elements.push(null);i++;}
this.instance.populateFromArray(row,index,[elements],null,null,'spliceRow');return removed;};DataMap.prototype.get=function(row,prop){row=Handsontable.hooks.run(this.instance,'modifyRow',row);if(typeof prop==='string'&&prop.indexOf('.')>-1){var sliced=prop.split('.');var out=this.dataSource[row];if(!out){return null;}
for(var i=0,ilen=sliced.length;i<ilen;i++){out=out[sliced[i]];if(typeof out==='undefined'){return null;}}
return out;}else if(typeof prop==='function'){return prop(this.dataSource.slice(row,row+1)[0]);}else{return this.dataSource[row]?this.dataSource[row][prop]:null;}};var copyableLookup=cellMethodLookupFactory('copyable',false);DataMap.prototype.getCopyable=function(row,prop){if(copyableLookup.call(this.instance,row,this.propToCol(prop))){return this.get(row,prop);}
return'';};DataMap.prototype.set=function(row,prop,value,source){row=Handsontable.hooks.run(this.instance,'modifyRow',row,source||'datamapGet');if(typeof prop==='string'&&prop.indexOf('.')>-1){var sliced=prop.split('.');var out=this.dataSource[row];for(var i=0,ilen=sliced.length-1;i<ilen;i++){if(typeof out[sliced[i]]==='undefined'){out[sliced[i]]={};}
out=out[sliced[i]];}
out[sliced[i]]=value;}else if(typeof prop==='function'){prop(this.dataSource.slice(row,row+1)[0],value);}else{this.dataSource[row][prop]=value;}};DataMap.prototype.physicalRowsToLogical=function(index,amount){var totalRows=this.instance.countRows();var physicRow=(totalRows+index)%totalRows;var logicRows=[];var rowsToRemove=amount;var row;while(physicRow<totalRows&&rowsToRemove){row=Handsontable.hooks.run(this.instance,'modifyRow',physicRow);logicRows.push(row);rowsToRemove--;physicRow++;}
return logicRows;};DataMap.prototype.clear=function(){for(var r=0;r<this.instance.countRows();r++){for(var c=0;c<this.instance.countCols();c++){this.set(r,this.colToProp(c),'');}}};DataMap.prototype.getAll=function(){return this.dataSource;};DataMap.prototype.getRange=function(start,end,destination){var r,rlen,c,clen,output=[],row;var getFn=destination===this.DESTINATION_CLIPBOARD_GENERATOR?this.getCopyable:this.get;rlen=Math.max(start.row,end.row);clen=Math.max(start.col,end.col);for(r=Math.min(start.row,end.row);r<=rlen;r++){row=[];for(c=Math.min(start.col,end.col);c<=clen;c++){row.push(getFn.call(this,r,this.colToProp(c)));}
output.push(row);}
return output;};DataMap.prototype.getText=function(start,end){return SheetClip.stringify(this.getRange(start,end,this.DESTINATION_RENDERER));};DataMap.prototype.getCopyableText=function(start,end){return SheetClip.stringify(this.getRange(start,end,this.DESTINATION_CLIPBOARD_GENERATOR));};;Handsontable.DataMap=DataMap;},{"SheetClip":"SheetClip","helpers/array":41,"helpers/data":43,"helpers/object":49,"helpers/setting":50,"multiMap":53}],27:[function(require,module,exports){"use strict";Object.defineProperties(exports,{EditorManager:{get:function(){return EditorManager;}},__esModule:{value:true}});var $__3rdparty_47_walkontable_47_src_47_cell_47_coords__,$__helpers_47_unicode__,$__helpers_47_dom_47_event__,$__editors__,$__eventManager__;var WalkontableCellCoords=($__3rdparty_47_walkontable_47_src_47_cell_47_coords__=require("3rdparty/walkontable/src/cell/coords"),$__3rdparty_47_walkontable_47_src_47_cell_47_coords__&&$__3rdparty_47_walkontable_47_src_47_cell_47_coords__.__esModule&&$__3rdparty_47_walkontable_47_src_47_cell_47_coords__||{default:$__3rdparty_47_walkontable_47_src_47_cell_47_coords__}).WalkontableCellCoords;var $__1=($__helpers_47_unicode__=require("helpers/unicode"),$__helpers_47_unicode__&&$__helpers_47_unicode__.__esModule&&$__helpers_47_unicode__||{default:$__helpers_47_unicode__}),KEY_CODES=$__1.KEY_CODES,isMetaKey=$__1.isMetaKey,isCtrlKey=$__1.isCtrlKey;var $__2=($__helpers_47_dom_47_event__=require("helpers/dom/event"),$__helpers_47_dom_47_event__&&$__helpers_47_dom_47_event__.__esModule&&$__helpers_47_dom_47_event__||{default:$__helpers_47_dom_47_event__}),stopPropagation=$__2.stopPropagation,stopImmediatePropagation=$__2.stopImmediatePropagation,isImmediatePropagationStopped=$__2.isImmediatePropagationStopped;var getEditor=($__editors__=require("editors"),$__editors__&&$__editors__.__esModule&&$__editors__||{default:$__editors__}).getEditor;var eventManagerObject=($__eventManager__=require("eventManager"),$__eventManager__&&$__eventManager__.__esModule&&$__eventManager__||{default:$__eventManager__}).eventManager;;Handsontable.EditorManager=EditorManager;function EditorManager(instance,priv,selection){var _this=this,destroyed=false,eventManager,activeEditor;eventManager=eventManagerObject(instance);function moveSelectionAfterEnter(shiftKey){var enterMoves=typeof priv.settings.enterMoves==='function'?priv.settings.enterMoves(event):priv.settings.enterMoves;if(shiftKey){selection.transformStart(-enterMoves.row,-enterMoves.col);}else{selection.transformStart(enterMoves.row,enterMoves.col,true);}}
function moveSelectionUp(shiftKey){if(shiftKey){selection.transformEnd(-1,0);}else{selection.transformStart(-1,0);}}
function moveSelectionDown(shiftKey){if(shiftKey){selection.transformEnd(1,0);}else{selection.transformStart(1,0);}}
function moveSelectionRight(shiftKey){if(shiftKey){selection.transformEnd(0,1);}else{selection.transformStart(0,1);}}
function moveSelectionLeft(shiftKey){if(shiftKey){selection.transformEnd(0,-1);}else{selection.transformStart(0,-1);}}
function onKeyDown(event){var ctrlDown,rangeModifier;if(!instance.isListening()){return;}
Handsontable.hooks.run(instance,'beforeKeyDown',event);if(destroyed){return;}
if(isImmediatePropagationStopped(event)){return;}
priv.lastKeyCode=event.keyCode;if(!selection.isSelected()){return;}
ctrlDown=(event.ctrlKey||event.metaKey)&&!event.altKey;if(activeEditor&&!activeEditor.isWaiting()){if(!isMetaKey(event.keyCode)&&!isCtrlKey(event.keyCode)&&!ctrlDown&&!_this.isEditorOpened()){_this.openEditor('',event);return;}}
rangeModifier=event.shiftKey?selection.setRangeEnd:selection.setRangeStart;switch(event.keyCode){case KEY_CODES.A:if(!_this.isEditorOpened()&&ctrlDown){selection.selectAll();event.preventDefault();stopPropagation(event);}
break;case KEY_CODES.ARROW_UP:if(_this.isEditorOpened()&&!activeEditor.isWaiting()){_this.closeEditorAndSaveChanges(ctrlDown);}
moveSelectionUp(event.shiftKey);event.preventDefault();stopPropagation(event);break;case KEY_CODES.ARROW_DOWN:if(_this.isEditorOpened()&&!activeEditor.isWaiting()){_this.closeEditorAndSaveChanges(ctrlDown);}
moveSelectionDown(event.shiftKey);event.preventDefault();stopPropagation(event);break;case KEY_CODES.ARROW_RIGHT:if(_this.isEditorOpened()&&!activeEditor.isWaiting()){_this.closeEditorAndSaveChanges(ctrlDown);}
moveSelectionRight(event.shiftKey);event.preventDefault();stopPropagation(event);break;case KEY_CODES.ARROW_LEFT:if(_this.isEditorOpened()&&!activeEditor.isWaiting()){_this.closeEditorAndSaveChanges(ctrlDown);}
moveSelectionLeft(event.shiftKey);event.preventDefault();stopPropagation(event);break;case KEY_CODES.TAB:var tabMoves=typeof priv.settings.tabMoves==='function'?priv.settings.tabMoves(event):priv.settings.tabMoves;if(event.shiftKey){selection.transformStart(-tabMoves.row,-tabMoves.col);}else{selection.transformStart(tabMoves.row,tabMoves.col,true);}
event.preventDefault();stopPropagation(event);break;case KEY_CODES.BACKSPACE:case KEY_CODES.DELETE:selection.empty(event);_this.prepareEditor();event.preventDefault();break;case KEY_CODES.F2:_this.openEditor(null,event);if(activeEditor){activeEditor.enableFullEditMode();}
event.preventDefault();break;case KEY_CODES.ENTER:if(_this.isEditorOpened()){if(activeEditor&&activeEditor.state!==Handsontable.EditorState.WAITING){_this.closeEditorAndSaveChanges(ctrlDown);}
moveSelectionAfterEnter(event.shiftKey);}else{if(instance.getSettings().enterBeginsEditing){_this.openEditor(null,event);if(activeEditor){activeEditor.enableFullEditMode();}}else{moveSelectionAfterEnter(event.shiftKey);}}
event.preventDefault();stopImmediatePropagation(event);break;case KEY_CODES.ESCAPE:if(_this.isEditorOpened()){_this.closeEditorAndRestoreOriginalValue(ctrlDown);}
event.preventDefault();break;case KEY_CODES.HOME:if(event.ctrlKey||event.metaKey){rangeModifier(new WalkontableCellCoords(0,priv.selRange.from.col));}else{rangeModifier(new WalkontableCellCoords(priv.selRange.from.row,0));}
event.preventDefault();stopPropagation(event);break;case KEY_CODES.END:if(event.ctrlKey||event.metaKey){rangeModifier(new WalkontableCellCoords(instance.countRows()-1,priv.selRange.from.col));}else{rangeModifier(new WalkontableCellCoords(priv.selRange.from.row,instance.countCols()-1));}
event.preventDefault();stopPropagation(event);break;case KEY_CODES.PAGE_UP:selection.transformStart(-instance.countVisibleRows(),0);event.preventDefault();stopPropagation(event);break;case KEY_CODES.PAGE_DOWN:selection.transformStart(instance.countVisibleRows(),0);event.preventDefault();stopPropagation(event);break;}}
function init(){instance.addHook('afterDocumentKeyDown',onKeyDown);eventManager.addEventListener(document.documentElement,'keydown',function(event){instance.runHooks('afterDocumentKeyDown',event);});function onDblClick(event,coords,elem){if(elem.nodeName=='TD'){_this.openEditor();if(activeEditor){activeEditor.enableFullEditMode();}}}
instance.view.wt.update('onCellDblClick',onDblClick);instance.addHook('afterDestroy',function(){destroyed=true;});}
this.destroyEditor=function(revertOriginal){this.closeEditor(revertOriginal);};this.getActiveEditor=function(){return activeEditor;};this.prepareEditor=function(){var row,col,prop,td,originalValue,cellProperties,editorClass;if(activeEditor&&activeEditor.isWaiting()){this.closeEditor(false,false,function(dataSaved){if(dataSaved){_this.prepareEditor();}});return;}
row=priv.selRange.highlight.row;col=priv.selRange.highlight.col;prop=instance.colToProp(col);td=instance.getCell(row,col);originalValue=instance.getDataAtCell(row,col);cellProperties=instance.getCellMeta(row,col);editorClass=instance.getCellEditor(cellProperties);if(editorClass){activeEditor=Handsontable.editors.getEditor(editorClass,instance);activeEditor.prepare(row,col,prop,td,originalValue,cellProperties);}else{activeEditor=void 0;}};this.isEditorOpened=function(){return activeEditor&&activeEditor.isOpened();};this.openEditor=function(initialValue,event){if(activeEditor&&!activeEditor.cellProperties.readOnly){activeEditor.beginEditing(initialValue,event);}else if(activeEditor&&activeEditor.cellProperties.readOnly){if(event&&event.keyCode===KEY_CODES.ENTER){moveSelectionAfterEnter();}}};this.closeEditor=function(restoreOriginalValue,ctrlDown,callback){if(activeEditor){activeEditor.finishEditing(restoreOriginalValue,ctrlDown,callback);}else{if(callback){callback(false);}}};this.closeEditorAndSaveChanges=function(ctrlDown){return this.closeEditor(false,ctrlDown);};this.closeEditorAndRestoreOriginalValue=function(ctrlDown){return this.closeEditor(true,ctrlDown);};init();}},{"3rdparty/walkontable/src/cell/coords":5,"editors":28,"eventManager":40,"helpers/dom/event":45,"helpers/unicode":52}],28:[function(require,module,exports){"use strict";Object.defineProperties(exports,{registerEditor:{get:function(){return registerEditor;}},getEditor:{get:function(){return getEditor;}},hasEditor:{get:function(){return hasEditor;}},getEditorConstructor:{get:function(){return getEditorConstructor;}},__esModule:{value:true}});var $__helpers_47_string__;var toUpperCaseFirst=($__helpers_47_string__=require("helpers/string"),$__helpers_47_string__&&$__helpers_47_string__.__esModule&&$__helpers_47_string__||{default:$__helpers_47_string__}).toUpperCaseFirst;;var registeredEditorNames={},registeredEditorClasses=new WeakMap();Handsontable.editors=Handsontable.editors||{};Handsontable.editors.registerEditor=registerEditor;Handsontable.editors.getEditor=getEditor;function RegisteredEditor(editorClass){var Clazz,instances;instances={};Clazz=editorClass;this.getConstructor=function(){return editorClass;};this.getInstance=function(hotInstance){if(!(hotInstance.guid in instances)){instances[hotInstance.guid]=new Clazz(hotInstance);}
return instances[hotInstance.guid];};}
function registerEditor(editorName,editorClass){var editor=new RegisteredEditor(editorClass);if(typeof editorName==='string'){registeredEditorNames[editorName]=editor;Handsontable.editors[toUpperCaseFirst(editorName)+'Editor']=editorClass;}
registeredEditorClasses.set(editorClass,editor);}
function getEditor(editorName,hotInstance){var editor;if(typeof editorName=='function'){if(!(registeredEditorClasses.get(editorName))){registerEditor(null,editorName);}
editor=registeredEditorClasses.get(editorName);}else if(typeof editorName=='string'){editor=registeredEditorNames[editorName];}else{throw Error('Only strings and functions can be passed as "editor" parameter ');}
if(!editor){throw Error('No editor registered under name "'+editorName+'"');}
return editor.getInstance(hotInstance);}
function getEditorConstructor(editorName){var editor;if(typeof editorName=='string'){editor=registeredEditorNames[editorName];}else{throw Error('Only strings and functions can be passed as "editor" parameter ');}
if(!editor){throw Error('No editor registered under name "'+editorName+'"');}
return editor.getConstructor();}
function hasEditor(editorName){return registeredEditorNames[editorName]?true:false;}},{"helpers/string":51}],29:[function(require,module,exports){"use strict";Object.defineProperties(exports,{BaseEditor:{get:function(){return BaseEditor;}},__esModule:{value:true}});var $___46__46__47_helpers_47_mixed__,$___46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__;var stringify=($___46__46__47_helpers_47_mixed__=require("helpers/mixed"),$___46__46__47_helpers_47_mixed__&&$___46__46__47_helpers_47_mixed__.__esModule&&$___46__46__47_helpers_47_mixed__||{default:$___46__46__47_helpers_47_mixed__}).stringify;var WalkontableCellCoords=($___46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__=require("3rdparty/walkontable/src/cell/coords"),$___46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__&&$___46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__.__esModule&&$___46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__||{default:$___46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__}).WalkontableCellCoords;;Handsontable.editors=Handsontable.editors||{};Handsontable.editors.BaseEditor=BaseEditor;Handsontable.EditorState={VIRGIN:'STATE_VIRGIN',EDITING:'STATE_EDITING',WAITING:'STATE_WAITING',FINISHED:'STATE_FINISHED'};function BaseEditor(instance){this.instance=instance;this.state=Handsontable.EditorState.VIRGIN;this._opened=false;this._fullEditMode=false;this._closeCallback=null;this.init();}
BaseEditor.prototype._fireCallbacks=function(result){if(this._closeCallback){this._closeCallback(result);this._closeCallback=null;}};BaseEditor.prototype.init=function(){};BaseEditor.prototype.getValue=function(){throw Error('Editor getValue() method unimplemented');};BaseEditor.prototype.setValue=function(newValue){throw Error('Editor setValue() method unimplemented');};BaseEditor.prototype.open=function(){throw Error('Editor open() method unimplemented');};BaseEditor.prototype.close=function(){throw Error('Editor close() method unimplemented');};BaseEditor.prototype.prepare=function(row,col,prop,td,originalValue,cellProperties){this.TD=td;this.row=row;this.col=col;this.prop=prop;this.originalValue=originalValue;this.cellProperties=cellProperties;this.state=Handsontable.EditorState.VIRGIN;};BaseEditor.prototype.extend=function(){var baseClass=this.constructor;function Editor(){baseClass.apply(this,arguments);}
function inherit(Child,Parent){function Bridge(){}
Bridge.prototype=Parent.prototype;Child.prototype=new Bridge();Child.prototype.constructor=Child;return Child;}
return inherit(Editor,baseClass);};BaseEditor.prototype.saveValue=function(val,ctrlDown){var sel,tmp;if(ctrlDown){sel=this.instance.getSelected();if(sel[0]>sel[2]){tmp=sel[0];sel[0]=sel[2];sel[2]=tmp;}
if(sel[1]>sel[3]){tmp=sel[1];sel[1]=sel[3];sel[3]=tmp;}
this.instance.populateFromArray(sel[0],sel[1],val,sel[2],sel[3],'edit');}else{this.instance.populateFromArray(this.row,this.col,val,null,null,'edit');}};BaseEditor.prototype.beginEditing=function(initialValue,event){if(this.state!=Handsontable.EditorState.VIRGIN){return;}
this.instance.view.scrollViewport(new WalkontableCellCoords(this.row,this.col));this.instance.view.render();this.state=Handsontable.EditorState.EDITING;initialValue=typeof initialValue=='string'?initialValue:this.originalValue;this.setValue(stringify(initialValue));this.open(event);this._opened=true;this.focus();this.instance.view.render();};BaseEditor.prototype.finishEditing=function(restoreOriginalValue,ctrlDown,callback){var _this=this,val;if(callback){var previousCloseCallback=this._closeCallback;this._closeCallback=function(result){if(previousCloseCallback){previousCloseCallback(result);}
callback(result);};}
if(this.isWaiting()){return;}
if(this.state==Handsontable.EditorState.VIRGIN){this.instance._registerTimeout(setTimeout(function(){_this._fireCallbacks(true);},0));return;}
if(this.state==Handsontable.EditorState.EDITING){if(restoreOriginalValue){this.cancelChanges();this.instance.view.render();return;}
if(this.instance.getSettings().trimWhitespace){val=[[typeof this.getValue()==='string'?String.prototype.trim.call(this.getValue()||''):this.getValue()]];}else{val=[[this.getValue()]];}
this.state=Handsontable.EditorState.WAITING;this.saveValue(val,ctrlDown);if(this.instance.getCellValidator(this.cellProperties)){this.instance.addHookOnce('postAfterValidate',function(result){_this.state=Handsontable.EditorState.FINISHED;_this.discardEditor(result);});}else{this.state=Handsontable.EditorState.FINISHED;this.discardEditor(true);}}};BaseEditor.prototype.cancelChanges=function(){this.state=Handsontable.EditorState.FINISHED;this.discardEditor();};BaseEditor.prototype.discardEditor=function(result){if(this.state!==Handsontable.EditorState.FINISHED){return;}
if(result===false&&this.cellProperties.allowInvalid!==true){this.instance.selectCell(this.row,this.col);this.focus();this.state=Handsontable.EditorState.EDITING;this._fireCallbacks(false);}else{this.close();this._opened=false;this._fullEditMode=false;this.state=Handsontable.EditorState.VIRGIN;this._fireCallbacks(true);}};BaseEditor.prototype.enableFullEditMode=function(){this._fullEditMode=true;};BaseEditor.prototype.isInFullEditMode=function(){return this._fullEditMode;};BaseEditor.prototype.isOpened=function(){return this._opened;};BaseEditor.prototype.isWaiting=function(){return this.state===Handsontable.EditorState.WAITING;};BaseEditor.prototype.checkEditorSection=function(){var totalRows=this.instance.countRows();var section='';if(this.row<this.instance.getSettings().fixedRowsTop){if(this.col<this.instance.getSettings().fixedColumnsLeft){section='top-left-corner';}else{section='top';}}else if(this.instance.getSettings().fixedRowsBottom&&this.row>=totalRows-this.instance.getSettings().fixedRowsBottom){if(this.col<this.instance.getSettings().fixedColumnsLeft){section='bottom-left-corner';}else{section='bottom';}}else{if(this.col<this.instance.getSettings().fixedColumnsLeft){section='left';}}
return section;};},{"3rdparty/walkontable/src/cell/coords":5,"helpers/mixed":47}],30:[function(require,module,exports){"use strict";Object.defineProperties(exports,{AutocompleteEditor:{get:function(){return AutocompleteEditor;}},__esModule:{value:true}});var $___46__46__47_helpers_47_unicode__,$___46__46__47_helpers_47_mixed__,$___46__46__47_helpers_47_array__,$___46__46__47_helpers_47_dom_47_element__,$___46__46__47_editors__,$__handsontableEditor__;var $__0=($___46__46__47_helpers_47_unicode__=require("helpers/unicode"),$___46__46__47_helpers_47_unicode__&&$___46__46__47_helpers_47_unicode__.__esModule&&$___46__46__47_helpers_47_unicode__||{default:$___46__46__47_helpers_47_unicode__}),KEY_CODES=$__0.KEY_CODES,isPrintableChar=$__0.isPrintableChar;var stringify=($___46__46__47_helpers_47_mixed__=require("helpers/mixed"),$___46__46__47_helpers_47_mixed__&&$___46__46__47_helpers_47_mixed__.__esModule&&$___46__46__47_helpers_47_mixed__||{default:$___46__46__47_helpers_47_mixed__}).stringify;var pivot=($___46__46__47_helpers_47_array__=require("helpers/array"),$___46__46__47_helpers_47_array__&&$___46__46__47_helpers_47_array__.__esModule&&$___46__46__47_helpers_47_array__||{default:$___46__46__47_helpers_47_array__}).pivot;var $__3=($___46__46__47_helpers_47_dom_47_element__=require("helpers/dom/element"),$___46__46__47_helpers_47_dom_47_element__&&$___46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47_helpers_47_dom_47_element__||{default:$___46__46__47_helpers_47_dom_47_element__}),addClass=$__3.addClass,getCaretPosition=$__3.getCaretPosition,getScrollbarWidth=$__3.getScrollbarWidth,getSelectionEndPosition=$__3.getSelectionEndPosition,outerWidth=$__3.outerWidth,setCaretPosition=$__3.setCaretPosition;var $__4=($___46__46__47_editors__=require("editors"),$___46__46__47_editors__&&$___46__46__47_editors__.__esModule&&$___46__46__47_editors__||{default:$___46__46__47_editors__}),getEditorConstructor=$__4.getEditorConstructor,registerEditor=$__4.registerEditor;var HandsontableEditor=($__handsontableEditor__=require("handsontableEditor"),$__handsontableEditor__&&$__handsontableEditor__.__esModule&&$__handsontableEditor__||{default:$__handsontableEditor__}).HandsontableEditor;var AutocompleteEditor=HandsontableEditor.prototype.extend();AutocompleteEditor.prototype.init=function(){HandsontableEditor.prototype.init.apply(this,arguments);this.query=null;this.choices=[];};AutocompleteEditor.prototype.createElements=function(){HandsontableEditor.prototype.createElements.apply(this,arguments);addClass(this.htContainer,'autocompleteEditor');addClass(this.htContainer,window.navigator.platform.indexOf('Mac')===-1?'':'htMacScroll');};var skipOne=false;function onBeforeKeyDown(event){skipOne=false;var editor=this.getActiveEditor();if(isPrintableChar(event.keyCode)||event.keyCode===KEY_CODES.BACKSPACE||event.keyCode===KEY_CODES.DELETE||event.keyCode===KEY_CODES.INSERT){var timeOffset=0;if(event.keyCode===KEY_CODES.C&&(event.ctrlKey||event.metaKey)){return;}
if(!editor.isOpened()){timeOffset+=10;}
if(editor.htEditor){editor.instance._registerTimeout(setTimeout(function(){editor.queryChoices(editor.TEXTAREA.value);skipOne=true;},timeOffset));}}}
AutocompleteEditor.prototype.prepare=function(){this.instance.addHook('beforeKeyDown',onBeforeKeyDown);HandsontableEditor.prototype.prepare.apply(this,arguments);};AutocompleteEditor.prototype.open=function(){this.TEXTAREA_PARENT.style.overflow='auto';HandsontableEditor.prototype.open.apply(this,arguments);this.TEXTAREA_PARENT.style.overflow='';var choicesListHot=this.htEditor.getInstance();var that=this;var trimDropdown=this.cellProperties.trimDropdown===void 0?true:this.cellProperties.trimDropdown;this.TEXTAREA.style.visibility='visible';this.focus();choicesListHot.updateSettings({colWidths:trimDropdown?[outerWidth(this.TEXTAREA)-2]:void 0,width:trimDropdown?outerWidth(this.TEXTAREA)+getScrollbarWidth()+2:void 0,afterRenderer:function(TD,row,col,prop,value){var caseSensitive=this.getCellMeta(row,col).filteringCaseSensitive===true,indexOfMatch,match,value=stringify(value);if(value){indexOfMatch=caseSensitive?value.indexOf(this.query):value.toLowerCase().indexOf(that.query.toLowerCase());if(indexOfMatch!=-1){match=value.substr(indexOfMatch,that.query.length);TD.innerHTML=value.replace(match,'<strong>'+match+'</strong>');}}},autoColumnSize:true,modifyColWidth:function(width,col){var autoWidths=this.getPlugin('autoColumnSize').widths;if(autoWidths[col]){width=autoWidths[col];}
return trimDropdown?width:width+15;}});this.htEditor.view.wt.wtTable.holder.parentNode.style['padding-right']=getScrollbarWidth()+2+'px';if(skipOne){skipOne=false;}
that.instance._registerTimeout(setTimeout(function(){that.queryChoices(that.TEXTAREA.value);},0));};AutocompleteEditor.prototype.close=function(){HandsontableEditor.prototype.close.apply(this,arguments);};AutocompleteEditor.prototype.queryChoices=function(query){this.query=query;if(typeof this.cellProperties.source=='function'){var that=this;this.cellProperties.source(query,function(choices){that.updateChoicesList(choices);});}else if(Array.isArray(this.cellProperties.source)){var choices;if(!query||this.cellProperties.filter===false){choices=this.cellProperties.source;}else{var filteringCaseSensitive=this.cellProperties.filteringCaseSensitive===true;var lowerCaseQuery=query.toLowerCase();choices=this.cellProperties.source.filter(function(choice){if(filteringCaseSensitive){return choice.indexOf(query)!=-1;}else{return choice.toLowerCase().indexOf(lowerCaseQuery)!=-1;}});}
this.updateChoicesList(choices);}else{this.updateChoicesList([]);}};AutocompleteEditor.prototype.updateChoicesList=function(choices){var pos=getCaretPosition(this.TEXTAREA),endPos=getSelectionEndPosition(this.TEXTAREA);var orderByRelevance=AutocompleteEditor.sortByRelevance(this.getValue(),choices,this.cellProperties.filteringCaseSensitive);var highlightIndex;if(this.cellProperties.filter==false){highlightIndex=orderByRelevance[0];}else{var sorted=[];for(var i=0,choicesCount=orderByRelevance.length;i<choicesCount;i++){sorted.push(choices[orderByRelevance[i]]);}
highlightIndex=0;choices=sorted;}
this.choices=choices;this.htEditor.loadData(pivot([choices]));this.updateDropdownHeight();if(this.cellProperties.strict===true){this.highlightBestMatchingChoice(highlightIndex);}
this.instance.listen();this.TEXTAREA.focus();setCaretPosition(this.TEXTAREA,pos,(pos==endPos?void 0:endPos));};AutocompleteEditor.prototype.updateDropdownHeight=function(){var currentDropdownWidth=this.htEditor.getColWidth(0)+getScrollbarWidth()+2;var trimDropdown=this.cellProperties.trimDropdown===void 0?true:this.cellProperties.trimDropdown;this.htEditor.updateSettings({height:this.getDropdownHeight(),width:trimDropdown?void 0:currentDropdownWidth});this.htEditor.view.wt.wtTable.alignOverlaysWithTrimmingContainer();};AutocompleteEditor.prototype.finishEditing=function(restoreOriginalValue){if(!restoreOriginalValue){this.instance.removeHook('beforeKeyDown',onBeforeKeyDown);}
HandsontableEditor.prototype.finishEditing.apply(this,arguments);};AutocompleteEditor.prototype.highlightBestMatchingChoice=function(index){if(typeof index==='number'){this.htEditor.selectCell(index,0);}else{this.htEditor.deselectCell();}};AutocompleteEditor.sortByRelevance=function(value,choices,caseSensitive){var choicesRelevance=[],currentItem,valueLength=value.length,valueIndex,charsLeft,result=[],i,choicesCount;if(valueLength===0){for(i=0,choicesCount=choices.length;i<choicesCount;i++){result.push(i);}
return result;}
for(i=0,choicesCount=choices.length;i<choicesCount;i++){currentItem=stringify(choices[i]);if(caseSensitive){valueIndex=currentItem.indexOf(value);}else{valueIndex=currentItem.toLowerCase().indexOf(value.toLowerCase());}
if(valueIndex==-1){continue;}
charsLeft=currentItem.length-valueIndex-valueLength;choicesRelevance.push({baseIndex:i,index:valueIndex,charsLeft:charsLeft,value:currentItem});}
choicesRelevance.sort(function(a,b){if(b.index===-1){return-1;}
if(a.index===-1){return 1;}
if(a.index<b.index){return-1;}else if(b.index<a.index){return 1;}else if(a.index===b.index){if(a.charsLeft<b.charsLeft){return-1;}else if(a.charsLeft>b.charsLeft){return 1;}else{return 0;}}});for(i=0,choicesCount=choicesRelevance.length;i<choicesCount;i++){result.push(choicesRelevance[i].baseIndex);}
return result;};AutocompleteEditor.prototype.getDropdownHeight=function(){var firstRowHeight=this.htEditor.getInstance().getRowHeight(0)||23;var _visibleRows=this.cellProperties.visibleRows;return this.choices.length>=_visibleRows?_visibleRows*firstRowHeight:this.choices.length*firstRowHeight+8;};AutocompleteEditor.prototype.allowKeyEventPropagation=function(keyCode){var selected={row:this.htEditor.getSelectedRange()?this.htEditor.getSelectedRange().from.row:-1};var allowed=false;if(keyCode===KEY_CODES.ARROW_DOWN&&selected.row<this.htEditor.countRows()-1){allowed=true;}
if(keyCode===KEY_CODES.ARROW_UP&&selected.row>-1){allowed=true;}
return allowed;};;registerEditor('autocomplete',AutocompleteEditor);},{"editors":28,"handsontableEditor":34,"helpers/array":41,"helpers/dom/element":44,"helpers/mixed":47,"helpers/unicode":52}],31:[function(require,module,exports){"use strict";Object.defineProperties(exports,{CheckboxEditor:{get:function(){return CheckboxEditor;}},__esModule:{value:true}});var $___46__46__47_editors__,$___95_baseEditor__,$___46__46__47_helpers_47_dom_47_element__;var registerEditor=($___46__46__47_editors__=require("editors"),$___46__46__47_editors__&&$___46__46__47_editors__.__esModule&&$___46__46__47_editors__||{default:$___46__46__47_editors__}).registerEditor;var BaseEditor=($___95_baseEditor__=require("_baseEditor"),$___95_baseEditor__&&$___95_baseEditor__.__esModule&&$___95_baseEditor__||{default:$___95_baseEditor__}).BaseEditor;var hasClass=($___46__46__47_helpers_47_dom_47_element__=require("helpers/dom/element"),$___46__46__47_helpers_47_dom_47_element__&&$___46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47_helpers_47_dom_47_element__||{default:$___46__46__47_helpers_47_dom_47_element__}).hasClass;var CheckboxEditor=function CheckboxEditor(){$traceurRuntime.superConstructor($CheckboxEditor).apply(this,arguments);};var $CheckboxEditor=CheckboxEditor;($traceurRuntime.createClass)(CheckboxEditor,{beginEditing:function(){var checkbox=this.TD.querySelector('input[type="checkbox"]');if(!hasClass(checkbox,'htBadValue')){checkbox.click();}},finishEditing:function(){},init:function(){},open:function(){},close:function(){},getValue:function(){},setValue:function(){},focus:function(){}},{},BaseEditor);;registerEditor('checkbox',CheckboxEditor);},{"_baseEditor":29,"editors":28,"helpers/dom/element":44}],32:[function(require,module,exports){"use strict";Object.defineProperties(exports,{DateEditor:{get:function(){return DateEditor;}},__esModule:{value:true}});var $___46__46__47_helpers_47_dom_47_element__,$___46__46__47_helpers_47_object__,$___46__46__47_eventManager__,$___46__46__47_editors__,$___46__46__47_helpers_47_unicode__,$___46__46__47_helpers_47_dom_47_event__,$__textEditor__,$__moment__,$__pikaday__;var $__0=($___46__46__47_helpers_47_dom_47_element__=require("helpers/dom/element"),$___46__46__47_helpers_47_dom_47_element__&&$___46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47_helpers_47_dom_47_element__||{default:$___46__46__47_helpers_47_dom_47_element__}),addClass=$__0.addClass,outerHeight=$__0.outerHeight;var deepExtend=($___46__46__47_helpers_47_object__=require("helpers/object"),$___46__46__47_helpers_47_object__&&$___46__46__47_helpers_47_object__.__esModule&&$___46__46__47_helpers_47_object__||{default:$___46__46__47_helpers_47_object__}).deepExtend;var EventManager=($___46__46__47_eventManager__=require("eventManager"),$___46__46__47_eventManager__&&$___46__46__47_eventManager__.__esModule&&$___46__46__47_eventManager__||{default:$___46__46__47_eventManager__}).EventManager;var $__3=($___46__46__47_editors__=require("editors"),$___46__46__47_editors__&&$___46__46__47_editors__.__esModule&&$___46__46__47_editors__||{default:$___46__46__47_editors__}),getEditor=$__3.getEditor,registerEditor=$__3.registerEditor;var isMetaKey=($___46__46__47_helpers_47_unicode__=require("helpers/unicode"),$___46__46__47_helpers_47_unicode__&&$___46__46__47_helpers_47_unicode__.__esModule&&$___46__46__47_helpers_47_unicode__||{default:$___46__46__47_helpers_47_unicode__}).isMetaKey;var stopPropagation=($___46__46__47_helpers_47_dom_47_event__=require("helpers/dom/event"),$___46__46__47_helpers_47_dom_47_event__&&$___46__46__47_helpers_47_dom_47_event__.__esModule&&$___46__46__47_helpers_47_dom_47_event__||{default:$___46__46__47_helpers_47_dom_47_event__}).stopPropagation;var TextEditor=($__textEditor__=require("textEditor"),$__textEditor__&&$__textEditor__.__esModule&&$__textEditor__||{default:$__textEditor__}).TextEditor;var moment=($__moment__=require("moment"),$__moment__&&$__moment__.__esModule&&$__moment__||{default:$__moment__}).default;var Pikaday=($__pikaday__=require("pikaday"),$__pikaday__&&$__pikaday__.__esModule&&$__pikaday__||{default:$__pikaday__}).default;Handsontable.editors=Handsontable.editors||{};Handsontable.editors.DateEditor=DateEditor;var DateEditor=function DateEditor(hotInstance){this.$datePicker=null;this.datePicker=null;this.datePickerStyle=null;this.defaultDateFormat='DD/MM/YYYY';this.isCellEdited=false;this.parentDestroyed=false;$traceurRuntime.superConstructor($DateEditor).call(this,hotInstance);};var $DateEditor=DateEditor;($traceurRuntime.createClass)(DateEditor,{init:function(){var $__9=this;if(typeof moment!=='function'){throw new Error('You need to include moment.js to your project.');}
if(typeof Pikaday!=='function'){throw new Error('You need to include Pikaday to your project.');}
$traceurRuntime.superGet(this,$DateEditor.prototype,"init").call(this);this.instance.addHook('afterDestroy',(function(){$__9.parentDestroyed=true;$__9.destroyElements();}));},createElements:function(){$traceurRuntime.superGet(this,$DateEditor.prototype,"createElements").call(this);this.datePicker=document.createElement('DIV');this.datePickerStyle=this.datePicker.style;this.datePickerStyle.position='absolute';this.datePickerStyle.top=0;this.datePickerStyle.left=0;this.datePickerStyle.zIndex=9999;addClass(this.datePicker,'htDatepickerHolder');document.body.appendChild(this.datePicker);this.$datePicker=new Pikaday(this.getDatePickerConfig());var eventManager=new EventManager(this);eventManager.addEventListener(this.datePicker,'mousedown',(function(event){return stopPropagation(event);}));this.hideDatepicker();},destroyElements:function(){this.$datePicker.destroy();},prepare:function(row,col,prop,td,originalValue,cellProperties){this._opened=false;$traceurRuntime.superGet(this,$DateEditor.prototype,"prepare").call(this,row,col,prop,td,originalValue,cellProperties);},open:function(){var event=arguments[0]!==(void 0)?arguments[0]:null;$traceurRuntime.superGet(this,$DateEditor.prototype,"open").call(this);this.showDatepicker(event);},close:function(){var $__9=this;this._opened=false;this.instance._registerTimeout(setTimeout((function(){$__9.instance.selection.refreshBorders();}),0));$traceurRuntime.superGet(this,$DateEditor.prototype,"close").call(this);},finishEditing:function(){var isCancelled=arguments[0]!==(void 0)?arguments[0]:false;var ctrlDown=arguments[1]!==(void 0)?arguments[1]:false;if(isCancelled){var value=this.originalValue;if(value!==void 0){this.setValue(value);}}
this.hideDatepicker();$traceurRuntime.superGet(this,$DateEditor.prototype,"finishEditing").call(this,isCancelled,ctrlDown);},showDatepicker:function(event){this.$datePicker.config(this.getDatePickerConfig());var offset=this.TD.getBoundingClientRect();var dateFormat=this.cellProperties.dateFormat||this.defaultDateFormat;var datePickerConfig=this.$datePicker.config();var dateStr;var isMouseDown=this.instance.view.isMouseDown();var isMeta=event?isMetaKey(event.keyCode):false;this.datePickerStyle.top=(window.pageYOffset+offset.top+outerHeight(this.TD))+'px';this.datePickerStyle.left=(window.pageXOffset+offset.left)+'px';this.$datePicker._onInputFocus=function(){};datePickerConfig.format=dateFormat;if(this.originalValue){dateStr=this.originalValue;if(moment(dateStr,dateFormat,true).isValid()){this.$datePicker.setMoment(moment(dateStr,dateFormat),true);}
if(!isMeta&&!isMouseDown){this.setValue('');}}else{if(this.cellProperties.defaultDate){dateStr=this.cellProperties.defaultDate;datePickerConfig.defaultDate=dateStr;if(moment(dateStr,dateFormat,true).isValid()){this.$datePicker.setMoment(moment(dateStr,dateFormat),true);}
if(!isMeta&&!isMouseDown){this.setValue('');}}else{this.$datePicker.gotoToday();}}
this.datePickerStyle.display='block';this.$datePicker.show();},hideDatepicker:function(){this.datePickerStyle.display='none';this.$datePicker.hide();},getDatePickerConfig:function(){var $__9=this;var htInput=this.TEXTAREA;var options={};if(this.cellProperties&&this.cellProperties.datePickerConfig){deepExtend(options,this.cellProperties.datePickerConfig);}
var origOnSelect=options.onSelect;var origOnClose=options.onClose;options.field=htInput;options.trigger=htInput;options.container=this.datePicker;options.bound=false;options.format=options.format||this.defaultDateFormat;options.reposition=options.reposition||false;options.onSelect=(function(dateStr){if(!isNaN(dateStr.getTime())){dateStr=moment(dateStr).format($__9.cellProperties.dateFormat||$__9.defaultDateFormat);}
$__9.setValue(dateStr);$__9.hideDatepicker();if(origOnSelect){origOnSelect();}});options.onClose=(function(){if(!$__9.parentDestroyed){$__9.finishEditing(false);}
if(origOnClose){origOnClose();}});return options;}},{},TextEditor);;registerEditor('date',DateEditor);},{"editors":28,"eventManager":40,"helpers/dom/element":44,"helpers/dom/event":45,"helpers/object":49,"helpers/unicode":52,"moment":undefined,"pikaday":undefined,"textEditor":39}],33:[function(require,module,exports){"use strict";Object.defineProperties(exports,{DropdownEditor:{get:function(){return DropdownEditor;}},__esModule:{value:true}});var $___46__46__47_editors__,$__autocompleteEditor__;var $__0=($___46__46__47_editors__=require("editors"),$___46__46__47_editors__&&$___46__46__47_editors__.__esModule&&$___46__46__47_editors__||{default:$___46__46__47_editors__}),getEditor=$__0.getEditor,registerEditor=$__0.registerEditor;var AutocompleteEditor=($__autocompleteEditor__=require("autocompleteEditor"),$__autocompleteEditor__&&$__autocompleteEditor__.__esModule&&$__autocompleteEditor__||{default:$__autocompleteEditor__}).AutocompleteEditor;var DropdownEditor=function DropdownEditor(){$traceurRuntime.superConstructor($DropdownEditor).apply(this,arguments);};var $DropdownEditor=DropdownEditor;($traceurRuntime.createClass)(DropdownEditor,{prepare:function(row,col,prop,td,originalValue,cellProperties){$traceurRuntime.superGet(this,$DropdownEditor.prototype,"prepare").call(this,row,col,prop,td,originalValue,cellProperties);this.cellProperties.filter=false;this.cellProperties.strict=true;}},{},AutocompleteEditor);Handsontable.hooks.add('beforeValidate',function(value,row,col,source){var cellMeta=this.getCellMeta(row,col);if(cellMeta.editor===Handsontable.editors.DropdownEditor){if(cellMeta.strict===void 0){cellMeta.filter=false;cellMeta.strict=true;}}});;registerEditor('dropdown',DropdownEditor);},{"autocompleteEditor":30,"editors":28}],34:[function(require,module,exports){"use strict";Object.defineProperties(exports,{HandsontableEditor:{get:function(){return HandsontableEditor;}},__esModule:{value:true}});var $___46__46__47_helpers_47_unicode__,$___46__46__47_helpers_47_object__,$___46__46__47_helpers_47_dom_47_element__,$___46__46__47_helpers_47_dom_47_event__,$___46__46__47_editors__,$__textEditor__;var KEY_CODES=($___46__46__47_helpers_47_unicode__=require("helpers/unicode"),$___46__46__47_helpers_47_unicode__&&$___46__46__47_helpers_47_unicode__.__esModule&&$___46__46__47_helpers_47_unicode__||{default:$___46__46__47_helpers_47_unicode__}).KEY_CODES;var extend=($___46__46__47_helpers_47_object__=require("helpers/object"),$___46__46__47_helpers_47_object__&&$___46__46__47_helpers_47_object__.__esModule&&$___46__46__47_helpers_47_object__||{default:$___46__46__47_helpers_47_object__}).extend;var setCaretPosition=($___46__46__47_helpers_47_dom_47_element__=require("helpers/dom/element"),$___46__46__47_helpers_47_dom_47_element__&&$___46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47_helpers_47_dom_47_element__||{default:$___46__46__47_helpers_47_dom_47_element__}).setCaretPosition;var $__3=($___46__46__47_helpers_47_dom_47_event__=require("helpers/dom/event"),$___46__46__47_helpers_47_dom_47_event__&&$___46__46__47_helpers_47_dom_47_event__.__esModule&&$___46__46__47_helpers_47_dom_47_event__||{default:$___46__46__47_helpers_47_dom_47_event__}),stopImmediatePropagation=$__3.stopImmediatePropagation,isImmediatePropagationStopped=$__3.isImmediatePropagationStopped;var $__4=($___46__46__47_editors__=require("editors"),$___46__46__47_editors__&&$___46__46__47_editors__.__esModule&&$___46__46__47_editors__||{default:$___46__46__47_editors__}),getEditor=$__4.getEditor,registerEditor=$__4.registerEditor;var TextEditor=($__textEditor__=require("textEditor"),$__textEditor__&&$__textEditor__.__esModule&&$__textEditor__||{default:$__textEditor__}).TextEditor;var HandsontableEditor=TextEditor.prototype.extend();HandsontableEditor.prototype.createElements=function(){TextEditor.prototype.createElements.apply(this,arguments);var DIV=document.createElement('DIV');DIV.className='handsontableEditor';this.TEXTAREA_PARENT.appendChild(DIV);this.htContainer=DIV;this.assignHooks();};HandsontableEditor.prototype.prepare=function(td,row,col,prop,value,cellProperties){TextEditor.prototype.prepare.apply(this,arguments);var parent=this;var options={startRows:0,startCols:0,minRows:0,minCols:0,className:'listbox',copyPaste:false,autoColumnSize:false,autoRowSize:false,readOnly:true,fillHandle:false,afterOnCellMouseDown:function(){var value=this.getValue();if(value!==void 0){parent.setValue(value);}
parent.instance.destroyEditor();}};if(this.cellProperties.handsontable){extend(options,cellProperties.handsontable);}
this.htOptions=options;};var onBeforeKeyDown=function(event){if(isImmediatePropagationStopped(event)){return;}
var editor=this.getActiveEditor();var innerHOT=editor.htEditor.getInstance();var rowToSelect;if(event.keyCode==KEY_CODES.ARROW_DOWN){if(innerHOT.getSelected()){var selectedRow=innerHOT.getSelected()[0];var lastRow=innerHOT.countRows()-1;rowToSelect=Math.min(lastRow,selectedRow+1);}else{rowToSelect=0;}}else if(event.keyCode==KEY_CODES.ARROW_UP){if(innerHOT.getSelected()){var selectedRow=innerHOT.getSelected()[0];rowToSelect=selectedRow-1;}}
if(rowToSelect!==void 0){if(rowToSelect<0){innerHOT.deselectCell();}else{innerHOT.selectCell(rowToSelect,0);}
if(innerHOT.getData().length){event.preventDefault();stopImmediatePropagation(event);editor.instance.listen();editor.TEXTAREA.focus();}}};HandsontableEditor.prototype.open=function(){this.instance.addHook('beforeKeyDown',onBeforeKeyDown);TextEditor.prototype.open.apply(this,arguments);if(this.htEditor){this.htEditor.destroy();}
this.htEditor=new Handsontable(this.htContainer,this.htOptions);if(this.cellProperties.strict){this.htEditor.selectCell(0,0);this.TEXTAREA.style.visibility='hidden';}else{this.htEditor.deselectCell();this.TEXTAREA.style.visibility='visible';}
setCaretPosition(this.TEXTAREA,0,this.TEXTAREA.value.length);};HandsontableEditor.prototype.close=function(){this.instance.removeHook('beforeKeyDown',onBeforeKeyDown);this.instance.listen();TextEditor.prototype.close.apply(this,arguments);};HandsontableEditor.prototype.focus=function(){this.instance.listen();TextEditor.prototype.focus.apply(this,arguments);};HandsontableEditor.prototype.beginEditing=function(initialValue){var onBeginEditing=this.instance.getSettings().onBeginEditing;if(onBeginEditing&&onBeginEditing()===false){return;}
TextEditor.prototype.beginEditing.apply(this,arguments);};HandsontableEditor.prototype.finishEditing=function(isCancelled,ctrlDown){if(this.htEditor&&this.htEditor.isListening()){this.instance.listen();}
if(this.htEditor&&this.htEditor.getSelected()){var value=this.htEditor.getInstance().getValue();if(value!==void 0){this.setValue(value);}}
return TextEditor.prototype.finishEditing.apply(this,arguments);};HandsontableEditor.prototype.assignHooks=function(){var _this=this;this.instance.addHook('afterDestroy',function(){if(_this.htEditor){_this.htEditor.destroy();}});};;registerEditor('handsontable',HandsontableEditor);},{"editors":28,"helpers/dom/element":44,"helpers/dom/event":45,"helpers/object":49,"helpers/unicode":52,"textEditor":39}],35:[function(require,module,exports){"use strict";Object.defineProperties(exports,{MobileTextEditor:{get:function(){return MobileTextEditor;}},__esModule:{value:true}});var $___46__46__47_helpers_47_unicode__,$___46__46__47_helpers_47_dom_47_event__,$___46__46__47_helpers_47_dom_47_element__,$___46__46__47_editors__,$___95_baseEditor__,$___46__46__47_eventManager__;var KEY_CODES=($___46__46__47_helpers_47_unicode__=require("helpers/unicode"),$___46__46__47_helpers_47_unicode__&&$___46__46__47_helpers_47_unicode__.__esModule&&$___46__46__47_helpers_47_unicode__||{default:$___46__46__47_helpers_47_unicode__}).KEY_CODES;var $__1=($___46__46__47_helpers_47_dom_47_event__=require("helpers/dom/event"),$___46__46__47_helpers_47_dom_47_event__&&$___46__46__47_helpers_47_dom_47_event__.__esModule&&$___46__46__47_helpers_47_dom_47_event__||{default:$___46__46__47_helpers_47_dom_47_event__}),stopImmediatePropagation=$__1.stopImmediatePropagation,isImmediatePropagationStopped=$__1.isImmediatePropagationStopped;var $__2=($___46__46__47_helpers_47_dom_47_element__=require("helpers/dom/element"),$___46__46__47_helpers_47_dom_47_element__&&$___46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47_helpers_47_dom_47_element__||{default:$___46__46__47_helpers_47_dom_47_element__}),addClass=$__2.addClass,getScrollLeft=$__2.getScrollLeft,getScrollTop=$__2.getScrollTop,hasClass=$__2.hasClass,isChildOf=$__2.isChildOf,offset=$__2.offset,outerHeight=$__2.outerHeight,outerWidth=$__2.outerWidth,removeClass=$__2.removeClass,setCaretPosition=$__2.setCaretPosition;var $__3=($___46__46__47_editors__=require("editors"),$___46__46__47_editors__&&$___46__46__47_editors__.__esModule&&$___46__46__47_editors__||{default:$___46__46__47_editors__}),getEditor=$__3.getEditor,registerEditor=$__3.registerEditor;var BaseEditor=($___95_baseEditor__=require("_baseEditor"),$___95_baseEditor__&&$___95_baseEditor__.__esModule&&$___95_baseEditor__||{default:$___95_baseEditor__}).BaseEditor;var eventManagerObject=($___46__46__47_eventManager__=require("eventManager"),$___46__46__47_eventManager__&&$___46__46__47_eventManager__.__esModule&&$___46__46__47_eventManager__||{default:$___46__46__47_eventManager__}).eventManager;var MobileTextEditor=BaseEditor.prototype.extend(),domDimensionsCache={};var createControls=function(){this.controls={};this.controls.leftButton=document.createElement('DIV');this.controls.leftButton.className='leftButton';this.controls.rightButton=document.createElement('DIV');this.controls.rightButton.className='rightButton';this.controls.upButton=document.createElement('DIV');this.controls.upButton.className='upButton';this.controls.downButton=document.createElement('DIV');this.controls.downButton.className='downButton';for(var button in this.controls){if(this.controls.hasOwnProperty(button)){this.positionControls.appendChild(this.controls[button]);}}};MobileTextEditor.prototype.valueChanged=function(){return this.initValue!=this.getValue();};MobileTextEditor.prototype.init=function(){var that=this;this.eventManager=eventManagerObject(this.instance);this.createElements();this.bindEvents();this.instance.addHook('afterDestroy',function(){that.destroy();});};MobileTextEditor.prototype.getValue=function(){return this.TEXTAREA.value;};MobileTextEditor.prototype.setValue=function(newValue){this.initValue=newValue;this.TEXTAREA.value=newValue;};MobileTextEditor.prototype.createElements=function(){this.editorContainer=document.createElement('DIV');this.editorContainer.className='htMobileEditorContainer';this.cellPointer=document.createElement('DIV');this.cellPointer.className='cellPointer';this.moveHandle=document.createElement('DIV');this.moveHandle.className='moveHandle';this.inputPane=document.createElement('DIV');this.inputPane.className='inputs';this.positionControls=document.createElement('DIV');this.positionControls.className='positionControls';this.TEXTAREA=document.createElement('TEXTAREA');addClass(this.TEXTAREA,'handsontableInput');this.inputPane.appendChild(this.TEXTAREA);this.editorContainer.appendChild(this.cellPointer);this.editorContainer.appendChild(this.moveHandle);this.editorContainer.appendChild(this.inputPane);this.editorContainer.appendChild(this.positionControls);createControls.call(this);document.body.appendChild(this.editorContainer);};MobileTextEditor.prototype.onBeforeKeyDown=function(event){var instance=this;var that=instance.getActiveEditor();if(event.target!==that.TEXTAREA||isImmediatePropagationStopped(event)){return;}
switch(event.keyCode){case KEY_CODES.ENTER:that.close();event.preventDefault();break;case KEY_CODES.BACKSPACE:stopImmediatePropagation(event);break;}};MobileTextEditor.prototype.open=function(){this.instance.addHook('beforeKeyDown',this.onBeforeKeyDown);addClass(this.editorContainer,'active');removeClass(this.cellPointer,'hidden');this.updateEditorPosition();};MobileTextEditor.prototype.focus=function(){this.TEXTAREA.focus();setCaretPosition(this.TEXTAREA,this.TEXTAREA.value.length);};MobileTextEditor.prototype.close=function(){this.TEXTAREA.blur();this.instance.removeHook('beforeKeyDown',this.onBeforeKeyDown);removeClass(this.editorContainer,'active');};MobileTextEditor.prototype.scrollToView=function(){var coords=this.instance.getSelectedRange().highlight;this.instance.view.scrollViewport(coords);};MobileTextEditor.prototype.hideCellPointer=function(){if(!hasClass(this.cellPointer,'hidden')){addClass(this.cellPointer,'hidden');}};MobileTextEditor.prototype.updateEditorPosition=function(x,y){if(x&&y){x=parseInt(x,10);y=parseInt(y,10);this.editorContainer.style.top=y+'px';this.editorContainer.style.left=x+'px';}else{var selection=this.instance.getSelected(),selectedCell=this.instance.getCell(selection[0],selection[1]);if(!domDimensionsCache.cellPointer){domDimensionsCache.cellPointer={height:outerHeight(this.cellPointer),width:outerWidth(this.cellPointer)};}
if(!domDimensionsCache.editorContainer){domDimensionsCache.editorContainer={width:outerWidth(this.editorContainer)};}
if(selectedCell!==undefined){var scrollLeft=this.instance.view.wt.wtOverlays.leftOverlay.trimmingContainer==window?0:getScrollLeft(this.instance.view.wt.wtOverlays.leftOverlay.holder);var scrollTop=this.instance.view.wt.wtOverlays.topOverlay.trimmingContainer==window?0:getScrollTop(this.instance.view.wt.wtOverlays.topOverlay.holder);var selectedCellOffset=offset(selectedCell),selectedCellWidth=outerWidth(selectedCell),currentScrollPosition={x:scrollLeft,y:scrollTop};this.editorContainer.style.top=parseInt(selectedCellOffset.top+outerHeight(selectedCell)-currentScrollPosition.y+domDimensionsCache.cellPointer.height,10)+'px';this.editorContainer.style.left=parseInt((window.innerWidth/2)-(domDimensionsCache.editorContainer.width/2),10)+'px';if(selectedCellOffset.left+selectedCellWidth/2>parseInt(this.editorContainer.style.left,10)+domDimensionsCache.editorContainer.width){this.editorContainer.style.left=window.innerWidth-domDimensionsCache.editorContainer.width+'px';}else if(selectedCellOffset.left+selectedCellWidth/2<parseInt(this.editorContainer.style.left,10)+20){this.editorContainer.style.left=0+'px';}
this.cellPointer.style.left=parseInt(selectedCellOffset.left-(domDimensionsCache.cellPointer.width/2)-offset(this.editorContainer).left+(selectedCellWidth/2)-currentScrollPosition.x,10)+'px';}}};MobileTextEditor.prototype.updateEditorData=function(){var selected=this.instance.getSelected(),selectedValue=this.instance.getDataAtCell(selected[0],selected[1]);this.row=selected[0];this.col=selected[1];this.setValue(selectedValue);this.updateEditorPosition();};MobileTextEditor.prototype.prepareAndSave=function(){var val;if(!this.valueChanged()){return true;}
if(this.instance.getSettings().trimWhitespace){val=[[String.prototype.trim.call(this.getValue())]];}else{val=[[this.getValue()]];}
this.saveValue(val);};MobileTextEditor.prototype.bindEvents=function(){var that=this;this.eventManager.addEventListener(this.controls.leftButton,'touchend',function(event){that.prepareAndSave();that.instance.selection.transformStart(0,-1,null,true);that.updateEditorData();event.preventDefault();});this.eventManager.addEventListener(this.controls.rightButton,'touchend',function(event){that.prepareAndSave();that.instance.selection.transformStart(0,1,null,true);that.updateEditorData();event.preventDefault();});this.eventManager.addEventListener(this.controls.upButton,'touchend',function(event){that.prepareAndSave();that.instance.selection.transformStart(-1,0,null,true);that.updateEditorData();event.preventDefault();});this.eventManager.addEventListener(this.controls.downButton,'touchend',function(event){that.prepareAndSave();that.instance.selection.transformStart(1,0,null,true);that.updateEditorData();event.preventDefault();});this.eventManager.addEventListener(this.moveHandle,'touchstart',function(event){if(event.touches.length==1){var touch=event.touches[0],onTouchPosition={x:that.editorContainer.offsetLeft,y:that.editorContainer.offsetTop},onTouchOffset={x:touch.pageX-onTouchPosition.x,y:touch.pageY-onTouchPosition.y};that.eventManager.addEventListener(this,'touchmove',function(event){var touch=event.touches[0];that.updateEditorPosition(touch.pageX-onTouchOffset.x,touch.pageY-onTouchOffset.y);that.hideCellPointer();event.preventDefault();});}});this.eventManager.addEventListener(document.body,'touchend',function(event){if(!isChildOf(event.target,that.editorContainer)&&!isChildOf(event.target,that.instance.rootElement)){that.close();}});this.eventManager.addEventListener(this.instance.view.wt.wtOverlays.leftOverlay.holder,'scroll',function(event){if(that.instance.view.wt.wtOverlays.leftOverlay.trimmingContainer!=window){that.hideCellPointer();}});this.eventManager.addEventListener(this.instance.view.wt.wtOverlays.topOverlay.holder,'scroll',function(event){if(that.instance.view.wt.wtOverlays.topOverlay.trimmingContainer!=window){that.hideCellPointer();}});};MobileTextEditor.prototype.destroy=function(){this.eventManager.clear();this.editorContainer.parentNode.removeChild(this.editorContainer);};;registerEditor('mobile',MobileTextEditor);},{"_baseEditor":29,"editors":28,"eventManager":40,"helpers/dom/element":44,"helpers/dom/event":45,"helpers/unicode":52}],36:[function(require,module,exports){"use strict";Object.defineProperties(exports,{NumericEditor:{get:function(){return NumericEditor;}},__esModule:{value:true}});var $__numeral__,$___46__46__47_editors__,$__textEditor__;var numeral=($__numeral__=require("numeral"),$__numeral__&&$__numeral__.__esModule&&$__numeral__||{default:$__numeral__}).default;var $__1=($___46__46__47_editors__=require("editors"),$___46__46__47_editors__&&$___46__46__47_editors__.__esModule&&$___46__46__47_editors__||{default:$___46__46__47_editors__}),getEditor=$__1.getEditor,registerEditor=$__1.registerEditor;var TextEditor=($__textEditor__=require("textEditor"),$__textEditor__&&$__textEditor__.__esModule&&$__textEditor__||{default:$__textEditor__}).TextEditor;var NumericEditor=function NumericEditor(){$traceurRuntime.superConstructor($NumericEditor).apply(this,arguments);};var $NumericEditor=NumericEditor;($traceurRuntime.createClass)(NumericEditor,{beginEditing:function(initialValue){if(typeof initialValue==='undefined'&&this.originalValue){if(typeof this.cellProperties.language!=='undefined'){numeral.language(this.cellProperties.language);}
var decimalDelimiter=numeral.languageData().delimiters.decimal;initialValue=(''+this.originalValue).replace('.',decimalDelimiter);}
$traceurRuntime.superGet(this,$NumericEditor.prototype,"beginEditing").call(this,initialValue);}},{},TextEditor);;registerEditor('numeric',NumericEditor);},{"editors":28,"numeral":"numeral","textEditor":39}],37:[function(require,module,exports){"use strict";Object.defineProperties(exports,{PasswordEditor:{get:function(){return PasswordEditor;}},__esModule:{value:true}});var $___46__46__47_helpers_47_dom_47_element__,$___46__46__47_editors__,$__textEditor__;var empty=($___46__46__47_helpers_47_dom_47_element__=require("helpers/dom/element"),$___46__46__47_helpers_47_dom_47_element__&&$___46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47_helpers_47_dom_47_element__||{default:$___46__46__47_helpers_47_dom_47_element__}).empty;var $__1=($___46__46__47_editors__=require("editors"),$___46__46__47_editors__&&$___46__46__47_editors__.__esModule&&$___46__46__47_editors__||{default:$___46__46__47_editors__}),getEditor=$__1.getEditor,registerEditor=$__1.registerEditor;var TextEditor=($__textEditor__=require("textEditor"),$__textEditor__&&$__textEditor__.__esModule&&$__textEditor__||{default:$__textEditor__}).TextEditor;var PasswordEditor=function PasswordEditor(){$traceurRuntime.superConstructor($PasswordEditor).apply(this,arguments);};var $PasswordEditor=PasswordEditor;($traceurRuntime.createClass)(PasswordEditor,{createElements:function(){$traceurRuntime.superGet(this,$PasswordEditor.prototype,"createElements").call(this);this.TEXTAREA=document.createElement('input');this.TEXTAREA.setAttribute('type','password');this.TEXTAREA.className='handsontableInput';this.textareaStyle=this.TEXTAREA.style;this.textareaStyle.width=0;this.textareaStyle.height=0;empty(this.TEXTAREA_PARENT);this.TEXTAREA_PARENT.appendChild(this.TEXTAREA);}},{},TextEditor);;registerEditor('password',PasswordEditor);},{"editors":28,"helpers/dom/element":44,"textEditor":39}],38:[function(require,module,exports){"use strict";Object.defineProperties(exports,{SelectEditor:{get:function(){return SelectEditor;}},__esModule:{value:true}});var $___46__46__47_helpers_47_dom_47_element__,$___46__46__47_helpers_47_dom_47_event__,$___46__46__47_helpers_47_unicode__,$___46__46__47_editors__,$___95_baseEditor__;var $__0=($___46__46__47_helpers_47_dom_47_element__=require("helpers/dom/element"),$___46__46__47_helpers_47_dom_47_element__&&$___46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47_helpers_47_dom_47_element__||{default:$___46__46__47_helpers_47_dom_47_element__}),addClass=$__0.addClass,empty=$__0.empty,fastInnerHTML=$__0.fastInnerHTML,getComputedStyle=$__0.getComputedStyle,getCssTransform=$__0.getCssTransform,getScrollableElement=$__0.getScrollableElement,offset=$__0.offset,outerHeight=$__0.outerHeight,outerWidth=$__0.outerWidth,resetCssTransform=$__0.resetCssTransform;var stopImmediatePropagation=($___46__46__47_helpers_47_dom_47_event__=require("helpers/dom/event"),$___46__46__47_helpers_47_dom_47_event__&&$___46__46__47_helpers_47_dom_47_event__.__esModule&&$___46__46__47_helpers_47_dom_47_event__||{default:$___46__46__47_helpers_47_dom_47_event__}).stopImmediatePropagation;var KEY_CODES=($___46__46__47_helpers_47_unicode__=require("helpers/unicode"),$___46__46__47_helpers_47_unicode__&&$___46__46__47_helpers_47_unicode__.__esModule&&$___46__46__47_helpers_47_unicode__||{default:$___46__46__47_helpers_47_unicode__}).KEY_CODES;var $__3=($___46__46__47_editors__=require("editors"),$___46__46__47_editors__&&$___46__46__47_editors__.__esModule&&$___46__46__47_editors__||{default:$___46__46__47_editors__}),getEditor=$__3.getEditor,registerEditor=$__3.registerEditor;var BaseEditor=($___95_baseEditor__=require("_baseEditor"),$___95_baseEditor__&&$___95_baseEditor__.__esModule&&$___95_baseEditor__||{default:$___95_baseEditor__}).BaseEditor;var SelectEditor=BaseEditor.prototype.extend();SelectEditor.prototype.init=function(){this.select=document.createElement('SELECT');addClass(this.select,'htSelectEditor');this.select.style.display='none';this.instance.rootElement.appendChild(this.select);this.registerHooks();};SelectEditor.prototype.registerHooks=function(){var $__5=this;this.instance.addHook('afterScrollVertically',(function(){return $__5.refreshDimensions();}));this.instance.addHook('afterColumnResize',(function(){return $__5.refreshDimensions();}));this.instance.addHook('afterRowResize',(function(){return $__5.refreshDimensions();}));};SelectEditor.prototype.prepare=function(){BaseEditor.prototype.prepare.apply(this,arguments);var selectOptions=this.cellProperties.selectOptions;var options;if(typeof selectOptions=='function'){options=this.prepareOptions(selectOptions(this.row,this.col,this.prop));}else{options=this.prepareOptions(selectOptions);}
empty(this.select);for(var option in options){if(options.hasOwnProperty(option)){var optionElement=document.createElement('OPTION');optionElement.value=option;fastInnerHTML(optionElement,options[option]);this.select.appendChild(optionElement);}}};SelectEditor.prototype.prepareOptions=function(optionsToPrepare){var preparedOptions={};if(Array.isArray(optionsToPrepare)){for(var i=0,len=optionsToPrepare.length;i<len;i++){preparedOptions[optionsToPrepare[i]]=optionsToPrepare[i];}}else if(typeof optionsToPrepare=='object'){preparedOptions=optionsToPrepare;}
return preparedOptions;};SelectEditor.prototype.getValue=function(){return this.select.value;};SelectEditor.prototype.setValue=function(value){this.select.value=value;};var onBeforeKeyDown=function(event){var instance=this;var editor=instance.getActiveEditor();switch(event.keyCode){case KEY_CODES.ARROW_UP:var previousOptionIndex=editor.select.selectedIndex-1;if(previousOptionIndex>=0){editor.select[previousOptionIndex].selected=true;}
stopImmediatePropagation(event);event.preventDefault();break;case KEY_CODES.ARROW_DOWN:var nextOptionIndex=editor.select.selectedIndex+1;if(nextOptionIndex<=editor.select.length-1){editor.select[nextOptionIndex].selected=true;}
stopImmediatePropagation(event);event.preventDefault();break;}};SelectEditor.prototype.open=function(){this._opened=true;this.refreshDimensions();this.select.style.display='';this.instance.addHook('beforeKeyDown',onBeforeKeyDown);};SelectEditor.prototype.close=function(){this._opened=false;this.select.style.display='none';this.instance.removeHook('beforeKeyDown',onBeforeKeyDown);};SelectEditor.prototype.focus=function(){this.select.focus();};SelectEditor.prototype.refreshDimensions=function(){if(this.state!==Handsontable.EditorState.EDITING){return;}
this.TD=this.getEditedCell();if(!this.TD){this.close();return;}
var width=outerWidth(this.TD)+1,height=outerHeight(this.TD)+1,currentOffset=offset(this.TD),containerOffset=offset(this.instance.rootElement),scrollableContainer=getScrollableElement(this.TD),editTop=currentOffset.top-containerOffset.top-1-(scrollableContainer.scrollTop||0),editLeft=currentOffset.left-containerOffset.left-1-(scrollableContainer.scrollLeft||0),editorSection=this.checkEditorSection(),cssTransformOffset;var settings=this.instance.getSettings();var rowHeadersCount=settings.rowHeaders?1:0;var colHeadersCount=settings.colHeaders?1:0;switch(editorSection){case'top':cssTransformOffset=getCssTransform(this.instance.view.wt.wtOverlays.topOverlay.clone.wtTable.holder.parentNode);break;case'left':cssTransformOffset=getCssTransform(this.instance.view.wt.wtOverlays.leftOverlay.clone.wtTable.holder.parentNode);break;case'top-left-corner':cssTransformOffset=getCssTransform(this.instance.view.wt.wtOverlays.topLeftCornerOverlay.clone.wtTable.holder.parentNode);break;case'bottom-left-corner':cssTransformOffset=getCssTransform(this.instance.view.wt.wtOverlays.bottomLeftCornerOverlay.clone.wtTable.holder.parentNode);break;case'bottom':cssTransformOffset=getCssTransform(this.instance.view.wt.wtOverlays.bottomOverlay.clone.wtTable.holder.parentNode);break;}
if(this.instance.getSelected()[0]===0){editTop+=1;}
if(this.instance.getSelected()[1]===0){editLeft+=1;}
var selectStyle=this.select.style;if(cssTransformOffset&&cssTransformOffset!=-1){selectStyle[cssTransformOffset[0]]=cssTransformOffset[1];}else{resetCssTransform(this.select);}
var cellComputedStyle=getComputedStyle(this.TD);if(parseInt(cellComputedStyle.borderTopWidth,10)>0){height-=1;}
if(parseInt(cellComputedStyle.borderLeftWidth,10)>0){width-=1;}
selectStyle.height=height+'px';selectStyle.minWidth=width+'px';selectStyle.top=editTop+'px';selectStyle.left=editLeft+'px';selectStyle.margin='0px';};SelectEditor.prototype.getEditedCell=function(){var editorSection=this.checkEditorSection(),editedCell;switch(editorSection){case'top':editedCell=this.instance.view.wt.wtOverlays.topOverlay.clone.wtTable.getCell({row:this.row,col:this.col});this.select.style.zIndex=101;break;case'corner':editedCell=this.instance.view.wt.wtOverlays.topLeftCornerOverlay.clone.wtTable.getCell({row:this.row,col:this.col});this.select.style.zIndex=103;break;case'left':editedCell=this.instance.view.wt.wtOverlays.leftOverlay.clone.wtTable.getCell({row:this.row,col:this.col});this.select.style.zIndex=102;break;default:editedCell=this.instance.getCell(this.row,this.col);this.select.style.zIndex='';break;}
return editedCell!=-1&&editedCell!=-2?editedCell:void 0;};;registerEditor('select',SelectEditor);},{"_baseEditor":29,"editors":28,"helpers/dom/element":44,"helpers/dom/event":45,"helpers/unicode":52}],39:[function(require,module,exports){"use strict";Object.defineProperties(exports,{TextEditor:{get:function(){return TextEditor;}},__esModule:{value:true}});var $___46__46__47_helpers_47_dom_47_element__,$__autoResize__,$___95_baseEditor__,$___46__46__47_eventManager__,$___46__46__47_editors__,$___46__46__47_helpers_47_unicode__,$___46__46__47_helpers_47_dom_47_event__;var $__0=($___46__46__47_helpers_47_dom_47_element__=require("helpers/dom/element"),$___46__46__47_helpers_47_dom_47_element__&&$___46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47_helpers_47_dom_47_element__||{default:$___46__46__47_helpers_47_dom_47_element__}),addClass=$__0.addClass,getCaretPosition=$__0.getCaretPosition,getComputedStyle=$__0.getComputedStyle,getCssTransform=$__0.getCssTransform,getScrollableElement=$__0.getScrollableElement,innerWidth=$__0.innerWidth,offset=$__0.offset,resetCssTransform=$__0.resetCssTransform,setCaretPosition=$__0.setCaretPosition;var autoResize=($__autoResize__=require("autoResize"),$__autoResize__&&$__autoResize__.__esModule&&$__autoResize__||{default:$__autoResize__}).default;var BaseEditor=($___95_baseEditor__=require("_baseEditor"),$___95_baseEditor__&&$___95_baseEditor__.__esModule&&$___95_baseEditor__||{default:$___95_baseEditor__}).BaseEditor;var eventManagerObject=($___46__46__47_eventManager__=require("eventManager"),$___46__46__47_eventManager__&&$___46__46__47_eventManager__.__esModule&&$___46__46__47_eventManager__||{default:$___46__46__47_eventManager__}).eventManager;var $__4=($___46__46__47_editors__=require("editors"),$___46__46__47_editors__&&$___46__46__47_editors__.__esModule&&$___46__46__47_editors__||{default:$___46__46__47_editors__}),getEditor=$__4.getEditor,registerEditor=$__4.registerEditor;var KEY_CODES=($___46__46__47_helpers_47_unicode__=require("helpers/unicode"),$___46__46__47_helpers_47_unicode__&&$___46__46__47_helpers_47_unicode__.__esModule&&$___46__46__47_helpers_47_unicode__||{default:$___46__46__47_helpers_47_unicode__}).KEY_CODES;var $__6=($___46__46__47_helpers_47_dom_47_event__=require("helpers/dom/event"),$___46__46__47_helpers_47_dom_47_event__&&$___46__46__47_helpers_47_dom_47_event__.__esModule&&$___46__46__47_helpers_47_dom_47_event__||{default:$___46__46__47_helpers_47_dom_47_event__}),stopPropagation=$__6.stopPropagation,stopImmediatePropagation=$__6.stopImmediatePropagation,isImmediatePropagationStopped=$__6.isImmediatePropagationStopped;var TextEditor=BaseEditor.prototype.extend();TextEditor.prototype.init=function(){var that=this;this.createElements();this.eventManager=eventManagerObject(this);this.bindEvents();this.autoResize=autoResize();this.instance.addHook('afterDestroy',function(){that.destroy();});};TextEditor.prototype.getValue=function(){return this.TEXTAREA.value;};TextEditor.prototype.setValue=function(newValue){this.TEXTAREA.value=newValue;};var onBeforeKeyDown=function onBeforeKeyDown(event){var instance=this,that=instance.getActiveEditor(),ctrlDown;ctrlDown=(event.ctrlKey||event.metaKey)&&!event.altKey;if(event.target!==that.TEXTAREA||isImmediatePropagationStopped(event)){return;}
if(event.keyCode===17||event.keyCode===224||event.keyCode===91||event.keyCode===93){stopImmediatePropagation(event);return;}
switch(event.keyCode){case KEY_CODES.ARROW_RIGHT:if(that.isInFullEditMode()){if((!that.isWaiting()&&!that.allowKeyEventPropagation)||(!that.isWaiting()&&that.allowKeyEventPropagation&&!that.allowKeyEventPropagation(event.keyCode))){stopImmediatePropagation(event);}}
break;case KEY_CODES.ARROW_LEFT:if(that.isInFullEditMode()){if((!that.isWaiting()&&!that.allowKeyEventPropagation)||(!that.isWaiting()&&that.allowKeyEventPropagation&&!that.allowKeyEventPropagation(event.keyCode))){stopImmediatePropagation(event);}}
break;case KEY_CODES.ARROW_UP:case KEY_CODES.ARROW_DOWN:if(that.isInFullEditMode()){if((!that.isWaiting()&&!that.allowKeyEventPropagation)||(!that.isWaiting()&&that.allowKeyEventPropagation&&!that.allowKeyEventPropagation(event.keyCode))){stopImmediatePropagation(event);}}
break;case KEY_CODES.ENTER:var selected=that.instance.getSelected();var isMultipleSelection=!(selected[0]===selected[2]&&selected[1]===selected[3]);if((ctrlDown&&!isMultipleSelection)||event.altKey){if(that.isOpened()){var caretPosition=getCaretPosition(that.TEXTAREA),value=that.getValue();var newValue=value.slice(0,caretPosition)+'\n'+value.slice(caretPosition);that.setValue(newValue);setCaretPosition(that.TEXTAREA,caretPosition+1);}else{that.beginEditing(that.originalValue+'\n');}
stopImmediatePropagation(event);}
event.preventDefault();break;case KEY_CODES.A:case KEY_CODES.X:case KEY_CODES.C:case KEY_CODES.V:if(ctrlDown){stopImmediatePropagation(event);}
break;case KEY_CODES.BACKSPACE:case KEY_CODES.DELETE:case KEY_CODES.HOME:case KEY_CODES.END:stopImmediatePropagation(event);break;}
if([KEY_CODES.ARROW_UP,KEY_CODES.ARROW_RIGHT,KEY_CODES.ARROW_DOWN,KEY_CODES.ARROW_LEFT].indexOf(event.keyCode)===-1){that.autoResize.resize(String.fromCharCode(event.keyCode));}};TextEditor.prototype.open=function(){this.refreshDimensions();this.instance.addHook('beforeKeyDown',onBeforeKeyDown);};TextEditor.prototype.close=function(tdOutside){this.textareaParentStyle.display='none';this.autoResize.unObserve();if(document.activeElement===this.TEXTAREA){this.instance.listen();}
this.instance.removeHook('beforeKeyDown',onBeforeKeyDown);};TextEditor.prototype.focus=function(){this.TEXTAREA.focus();setCaretPosition(this.TEXTAREA,this.TEXTAREA.value.length);};TextEditor.prototype.createElements=function(){this.TEXTAREA=document.createElement('TEXTAREA');addClass(this.TEXTAREA,'handsontableInput');this.textareaStyle=this.TEXTAREA.style;this.textareaStyle.width=0;this.textareaStyle.height=0;this.TEXTAREA_PARENT=document.createElement('DIV');addClass(this.TEXTAREA_PARENT,'handsontableInputHolder');this.textareaParentStyle=this.TEXTAREA_PARENT.style;this.textareaParentStyle.top=0;this.textareaParentStyle.left=0;this.textareaParentStyle.display='none';this.TEXTAREA_PARENT.appendChild(this.TEXTAREA);this.instance.rootElement.appendChild(this.TEXTAREA_PARENT);var that=this;this.instance._registerTimeout(setTimeout(function(){that.refreshDimensions();},0));};TextEditor.prototype.getEditedCell=function(){var editorSection=this.checkEditorSection(),editedCell;switch(editorSection){case'top':editedCell=this.instance.view.wt.wtOverlays.topOverlay.clone.wtTable.getCell({row:this.row,col:this.col});this.textareaParentStyle.zIndex=101;break;case'top-left-corner':editedCell=this.instance.view.wt.wtOverlays.topLeftCornerOverlay.clone.wtTable.getCell({row:this.row,col:this.col});this.textareaParentStyle.zIndex=103;break;case'bottom-left-corner':editedCell=this.instance.view.wt.wtOverlays.bottomLeftCornerOverlay.clone.wtTable.getCell({row:this.row,col:this.col});this.textareaParentStyle.zIndex=103;break;case'left':editedCell=this.instance.view.wt.wtOverlays.leftOverlay.clone.wtTable.getCell({row:this.row,col:this.col});this.textareaParentStyle.zIndex=102;break;case'bottom':editedCell=this.instance.view.wt.wtOverlays.bottomOverlay.clone.wtTable.getCell({row:this.row,col:this.col});this.textareaParentStyle.zIndex=102;break;default:editedCell=this.instance.getCell(this.row,this.col);this.textareaParentStyle.zIndex='';break;}
return editedCell!=-1&&editedCell!=-2?editedCell:void 0;};TextEditor.prototype.refreshDimensions=function(){if(this.state!==Handsontable.EditorState.EDITING){return;}
this.TD=this.getEditedCell();if(!this.TD){this.close(true);return;}
var currentOffset=offset(this.TD),containerOffset=offset(this.instance.rootElement),scrollableContainer=getScrollableElement(this.TD),totalRowsCount=this.instance.countRows(),editTop=currentOffset.top-containerOffset.top-1-(scrollableContainer.scrollTop||0),editLeft=currentOffset.left-containerOffset.left-1-(scrollableContainer.scrollLeft||0),settings=this.instance.getSettings(),rowHeadersCount=settings.rowHeaders?1:0,colHeadersCount=settings.colHeaders?1:0,editorSection=this.checkEditorSection(),backgroundColor=this.TD.style.backgroundColor,cssTransformOffset;switch(editorSection){case'top':cssTransformOffset=getCssTransform(this.instance.view.wt.wtOverlays.topOverlay.clone.wtTable.holder.parentNode);break;case'left':cssTransformOffset=getCssTransform(this.instance.view.wt.wtOverlays.leftOverlay.clone.wtTable.holder.parentNode);break;case'top-left-corner':cssTransformOffset=getCssTransform(this.instance.view.wt.wtOverlays.topLeftCornerOverlay.clone.wtTable.holder.parentNode);break;case'bottom-left-corner':cssTransformOffset=getCssTransform(this.instance.view.wt.wtOverlays.bottomLeftCornerOverlay.clone.wtTable.holder.parentNode);break;case'bottom':cssTransformOffset=getCssTransform(this.instance.view.wt.wtOverlays.bottomOverlay.clone.wtTable.holder.parentNode);break;}
if(colHeadersCount&&this.instance.getSelected()[0]===0||(settings.fixedRowsBottom&&this.instance.getSelected()[0]===totalRowsCount-settings.fixedRowsBottom)){editTop+=1;}
if(this.instance.getSelected()[1]===0){editLeft+=1;}
if(cssTransformOffset&&cssTransformOffset!=-1){this.textareaParentStyle[cssTransformOffset[0]]=cssTransformOffset[1];}else{resetCssTransform(this.textareaParentStyle);}
this.textareaParentStyle.top=editTop+'px';this.textareaParentStyle.left=editLeft+'px';var cellTopOffset=this.TD.offsetTop-this.instance.view.wt.wtOverlays.topOverlay.getScrollPosition(),cellLeftOffset=this.TD.offsetLeft-this.instance.view.wt.wtOverlays.leftOverlay.getScrollPosition();var width=innerWidth(this.TD)-8;var maxWidth=this.instance.view.maximumVisibleElementWidth(cellLeftOffset)-9;var height=this.TD.scrollHeight+1;var maxHeight=Math.max(this.instance.view.maximumVisibleElementHeight(cellTopOffset)-2,23);var cellComputedStyle=getComputedStyle(this.TD);this.TEXTAREA.style.fontSize=cellComputedStyle.fontSize;this.TEXTAREA.style.fontFamily=cellComputedStyle.fontFamily;this.TEXTAREA.style.backgroundColor='';this.TEXTAREA.style.backgroundColor=backgroundColor?backgroundColor:getComputedStyle(this.TEXTAREA).backgroundColor;this.autoResize.init(this.TEXTAREA,{minHeight:Math.min(height,maxHeight),maxHeight:maxHeight,minWidth:Math.min(width,maxWidth),maxWidth:maxWidth},true);this.textareaParentStyle.display='block';};TextEditor.prototype.bindEvents=function(){var editor=this;this.eventManager.addEventListener(this.TEXTAREA,'cut',function(event){stopPropagation(event);});this.eventManager.addEventListener(this.TEXTAREA,'paste',function(event){stopPropagation(event);});this.instance.addHook('afterScrollVertically',function(){editor.refreshDimensions();});this.instance.addHook('afterColumnResize',function(){editor.refreshDimensions();editor.focus();});this.instance.addHook('afterRowResize',function(){editor.refreshDimensions();editor.focus();});this.instance.addHook('afterDestroy',function(){editor.eventManager.destroy();});};TextEditor.prototype.destroy=function(){this.eventManager.destroy();};;registerEditor('text',TextEditor);},{"_baseEditor":29,"autoResize":"autoResize","editors":28,"eventManager":40,"helpers/dom/element":44,"helpers/dom/event":45,"helpers/unicode":52}],40:[function(require,module,exports){"use strict";Object.defineProperties(exports,{EventManager:{get:function(){return EventManager;}},eventManager:{get:function(){return eventManager;}},__esModule:{value:true}});var $__helpers_47_dom_47_element__,$__helpers_47_browser__;var $__0=($__helpers_47_dom_47_element__=require("helpers/dom/element"),$__helpers_47_dom_47_element__&&$__helpers_47_dom_47_element__.__esModule&&$__helpers_47_dom_47_element__||{default:$__helpers_47_dom_47_element__}),polymerWrap=$__0.polymerWrap,closest=$__0.closest;var isWebComponentSupportedNatively=($__helpers_47_browser__=require("helpers/browser"),$__helpers_47_browser__&&$__helpers_47_browser__.__esModule&&$__helpers_47_browser__||{default:$__helpers_47_browser__}).isWebComponentSupportedNatively;var EventManager=function EventManager(){var context=arguments[0]!==(void 0)?arguments[0]:null;this.context=context||this;if(!this.context.eventListeners){this.context.eventListeners=[];}};($traceurRuntime.createClass)(EventManager,{addEventListener:function(element,eventName,callback){var $__2=this;var context=this.context;function callbackProxy(event){if(event.target==void 0&&event.srcElement!=void 0){if(event.definePoperty){event.definePoperty('target',{value:event.srcElement});}else{event.target=event.srcElement;}}
if(event.preventDefault==void 0){if(event.definePoperty){event.definePoperty('preventDefault',{value:function(){this.returnValue=false;}});}else{event.preventDefault=function(){this.returnValue=false;};}}
event=extendEvent(context,event);callback.call(this,event);}
this.context.eventListeners.push({element:element,event:eventName,callback:callback,callbackProxy:callbackProxy});if(window.addEventListener){element.addEventListener(eventName,callbackProxy,false);}else{element.attachEvent('on'+eventName,callbackProxy);}
Handsontable.countEventManagerListeners++;return(function(){$__2.removeEventListener(element,eventName,callback);});},removeEventListener:function(element,eventName,callback){var len=this.context.eventListeners.length;var tmpEvent;while(len--){tmpEvent=this.context.eventListeners[len];if(tmpEvent.event==eventName&&tmpEvent.element==element){if(callback&&callback!=tmpEvent.callback){continue;}
this.context.eventListeners.splice(len,1);if(tmpEvent.element.removeEventListener){tmpEvent.element.removeEventListener(tmpEvent.event,tmpEvent.callbackProxy,false);}else{tmpEvent.element.detachEvent('on'+tmpEvent.event,tmpEvent.callbackProxy);}
Handsontable.countEventManagerListeners--;}}},clearEvents:function(){if(!this.context){return;}
var len=this.context.eventListeners.length;while(len--){var event=this.context.eventListeners[len];if(event){this.removeEventListener(event.element,event.event,event.callback);}}},clear:function(){this.clearEvents();},destroy:function(){this.clearEvents();this.context=null;},fireEvent:function(element,eventName){var options={bubbles:true,cancelable:(eventName!=='mousemove'),view:window,detail:0,screenX:0,screenY:0,clientX:1,clientY:1,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,button:0,relatedTarget:undefined};var event;if(document.createEvent){event=document.createEvent('MouseEvents');event.initMouseEvent(eventName,options.bubbles,options.cancelable,options.view,options.detail,options.screenX,options.screenY,options.clientX,options.clientY,options.ctrlKey,options.altKey,options.shiftKey,options.metaKey,options.button,options.relatedTarget||document.body.parentNode);}else{event=document.createEventObject();}
if(element.dispatchEvent){element.dispatchEvent(event);}else{element.fireEvent('on'+eventName,event);}}},{});function extendEvent(context,event){var componentName='HOT-TABLE';var isHotTableSpotted;var fromElement;var realTarget;var target;var len;event.isTargetWebComponent=false;event.realTarget=event.target;if(!Handsontable.eventManager.isHotTableEnv){return event;}
event=polymerWrap(event);len=event.path?event.path.length:0;while(len--){if(event.path[len].nodeName===componentName){isHotTableSpotted=true;}else if(isHotTableSpotted&&event.path[len].shadowRoot){target=event.path[len];break;}
if(len===0&&!target){target=event.path[len];}}
if(!target){target=event.target;}
event.isTargetWebComponent=true;if(isWebComponentSupportedNatively()){event.realTarget=event.srcElement||event.toElement;}else if(context instanceof Handsontable.Core||context instanceof Walkontable){if(context instanceof Handsontable.Core){fromElement=context.view?context.view.wt.wtTable.TABLE:null;}else if(context instanceof Walkontable){fromElement=context.wtTable.TABLE.parentNode.parentNode;}
realTarget=closest(event.target,[componentName],fromElement);if(realTarget){event.realTarget=fromElement.querySelector(componentName)||event.target;}else{event.realTarget=event.target;}}
Object.defineProperty(event,'target',{get:function(){return polymerWrap(target);},enumerable:true,configurable:true});return event;};window.Handsontable=window.Handsontable||{};Handsontable.countEventManagerListeners=0;Handsontable.eventManager=eventManager;function eventManager(context){return new EventManager(context);}},{"helpers/browser":42,"helpers/dom/element":44}],41:[function(require,module,exports){"use strict";Object.defineProperties(exports,{to2dArray:{get:function(){return to2dArray;}},extendArray:{get:function(){return extendArray;}},pivot:{get:function(){return pivot;}},arrayReduce:{get:function(){return arrayReduce;}},arrayFilter:{get:function(){return arrayFilter;}},arrayMap:{get:function(){return arrayMap;}},arrayEach:{get:function(){return arrayEach;}},arraySum:{get:function(){return arraySum;}},arrayAvg:{get:function(){return arrayAvg;}},arrayFlatten:{get:function(){return arrayFlatten;}},arrayUnique:{get:function(){return arrayUnique;}},__esModule:{value:true}});function to2dArray(arr){var i=0,ilen=arr.length;while(i<ilen){arr[i]=[arr[i]];i++;}}
function extendArray(arr,extension){var i=0,ilen=extension.length;while(i<ilen){arr.push(extension[i]);i++;}}
function pivot(arr){var pivotedArr=[];if(!arr||arr.length===0||!arr[0]||arr[0].length===0){return pivotedArr;}
var rowCount=arr.length;var colCount=arr[0].length;for(var i=0;i<rowCount;i++){for(var j=0;j<colCount;j++){if(!pivotedArr[j]){pivotedArr[j]=[];}
pivotedArr[j][i]=arr[i][j];}}
return pivotedArr;}
function arrayReduce(array,iteratee,accumulator,initFromArray){var index=-1,length=array.length;if(initFromArray&&length){accumulator=array[++index];}
while(++index<length){accumulator=iteratee(accumulator,array[index],index,array);}
return accumulator;}
function arrayFilter(array,predicate){var index=-1,length=array.length,resIndex=-1,result=[];while(++index<length){var value=array[index];if(predicate(value,index,array)){result[++resIndex]=value;}}
return result;}
function arrayMap(array,iteratee){var index=-1,length=array.length,resIndex=-1,result=[];while(++index<length){var value=array[index];result[++resIndex]=iteratee(value,index,array);}
return result;}
function arrayEach(array,iteratee){var index=-1,length=array.length;while(++index<length){if(iteratee(array[index],index,array)===false){break;}}
return array;}
function arraySum(array){return arrayReduce(array,(function(a,b){return(a+b);}),0);}
function arrayAvg(array){if(!array.length){return 0;}
return arraySum(array)/array.length;}
function arrayFlatten(array){return arrayReduce(array,(function(initial,value){return initial.concat(Array.isArray(value)?arrayFlatten(value):value);}),[]);}
function arrayUnique(array){var unique=[];arrayEach(array,(function(value){if(unique.indexOf(value)===-1){unique.push(value);}}));return unique;}},{}],42:[function(require,module,exports){"use strict";Object.defineProperties(exports,{isIE8:{get:function(){return isIE8;}},isIE9:{get:function(){return isIE9;}},isSafari:{get:function(){return isSafari;}},isChrome:{get:function(){return isChrome;}},isMobileBrowser:{get:function(){return isMobileBrowser;}},isTouchSupported:{get:function(){return isTouchSupported;}},isWebComponentSupportedNatively:{get:function(){return isWebComponentSupportedNatively;}},hasCaptionProblem:{get:function(){return hasCaptionProblem;}},__esModule:{value:true}});var _isIE8=!(document.createTextNode('test').textContent);function isIE8(){return _isIE8;}
var _isIE9=!!(document.documentMode);function isIE9(){return _isIE9;}
var _isSafari=(/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor));function isSafari(){return _isSafari;}
var _isChrome=(/Chrome/.test(navigator.userAgent)&&/Google/.test(navigator.vendor));function isChrome(){return _isChrome;}
function isMobileBrowser(userAgent){if(!userAgent){userAgent=navigator.userAgent;}
return(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(userAgent));}
function isTouchSupported(){return('ontouchstart'in window);}
function isWebComponentSupportedNatively(){var test=document.createElement('div');return test.createShadowRoot&&test.createShadowRoot.toString().match(/\[native code\]/)?true:false;}
var _hasCaptionProblem;function detectCaptionProblem(){var TABLE=document.createElement('TABLE');TABLE.style.borderSpacing=0;TABLE.style.borderWidth=0;TABLE.style.padding=0;var TBODY=document.createElement('TBODY');TABLE.appendChild(TBODY);TBODY.appendChild(document.createElement('TR'));TBODY.firstChild.appendChild(document.createElement('TD'));TBODY.firstChild.firstChild.innerHTML='<tr><td>t<br>t</td></tr>';var CAPTION=document.createElement('CAPTION');CAPTION.innerHTML='c<br>c<br>c<br>c';CAPTION.style.padding=0;CAPTION.style.margin=0;TABLE.insertBefore(CAPTION,TBODY);document.body.appendChild(TABLE);_hasCaptionProblem=(TABLE.offsetHeight<2*TABLE.lastChild.offsetHeight);document.body.removeChild(TABLE);}
function hasCaptionProblem(){if(_hasCaptionProblem===void 0){detectCaptionProblem();}
return _hasCaptionProblem;}},{}],43:[function(require,module,exports){"use strict";Object.defineProperties(exports,{spreadsheetColumnLabel:{get:function(){return spreadsheetColumnLabel;}},createSpreadsheetData:{get:function(){return createSpreadsheetData;}},createSpreadsheetObjectData:{get:function(){return createSpreadsheetObjectData;}},translateRowsToColumns:{get:function(){return translateRowsToColumns;}},cellMethodLookupFactory:{get:function(){return cellMethodLookupFactory;}},__esModule:{value:true}});var $__object__;var getPrototypeOf=($__object__=require("object"),$__object__&&$__object__.__esModule&&$__object__||{default:$__object__}).getPrototypeOf;function spreadsheetColumnLabel(index){var dividend=index+1;var columnLabel='';var modulo;while(dividend>0){modulo=(dividend-1)%26;columnLabel=String.fromCharCode(65+modulo)+columnLabel;dividend=parseInt((dividend-modulo)/26,10);}
return columnLabel;}
function createSpreadsheetData(rowCount,colCount){rowCount=typeof rowCount==='number'?rowCount:100;colCount=typeof colCount==='number'?colCount:4;var rows=[],i,j;for(i=0;i<rowCount;i++){var row=[];for(j=0;j<colCount;j++){row.push(spreadsheetColumnLabel(j)+(i+1));}
rows.push(row);}
return rows;}
function createSpreadsheetObjectData(rowCount,colCount){rowCount=typeof rowCount==='number'?rowCount:100;colCount=typeof colCount==='number'?colCount:4;var rows=[],i,j;for(i=0;i<rowCount;i++){var row={};for(j=0;j<colCount;j++){row['prop'+j]=spreadsheetColumnLabel(j)+(i+1);}
rows.push(row);}
return rows;}
function translateRowsToColumns(input){var i,ilen,j,jlen,output=[],olen=0;for(i=0,ilen=input.length;i<ilen;i++){for(j=0,jlen=input[i].length;j<jlen;j++){if(j==olen){output.push([]);olen++;}
output[j].push(input[i][j]);}}
return output;}
function cellMethodLookupFactory(methodName,allowUndefined){allowUndefined=typeof allowUndefined=='undefined'?true:allowUndefined;return function cellMethodLookup(row,col){return(function getMethodFromProperties(properties){if(!properties){return;}else if(properties.hasOwnProperty(methodName)&&properties[methodName]!==void 0){return properties[methodName];}else if(properties.hasOwnProperty('type')&&properties.type){var type;if(typeof properties.type!='string'){throw new Error('Cell type must be a string ');}
type=translateTypeNameToObject(properties.type);if(type.hasOwnProperty(methodName)){return type[methodName];}else if(allowUndefined){return;}}
return getMethodFromProperties(getPrototypeOf(properties));})(typeof row=='number'?this.getCellMeta(row,col):row);};function translateTypeNameToObject(typeName){var type=Handsontable.cellTypes[typeName];if(typeof type=='undefined'){throw new Error('You declared cell type "'+typeName+'" as a string that is not mapped to a known object. '+'Cell type must be an object or a string mapped to an object in Handsontable.cellTypes');}
return type;}}},{"object":49}],44:[function(require,module,exports){"use strict";Object.defineProperties(exports,{closest:{get:function(){return closest;}},isChildOf:{get:function(){return isChildOf;}},isChildOfWebComponentTable:{get:function(){return isChildOfWebComponentTable;}},polymerWrap:{get:function(){return polymerWrap;}},polymerUnwrap:{get:function(){return polymerUnwrap;}},index:{get:function(){return index;}},overlayContainsElement:{get:function(){return overlayContainsElement;}},hasClass:{get:function(){return hasClass;}},addClass:{get:function(){return addClass;}},removeClass:{get:function(){return removeClass;}},removeTextNodes:{get:function(){return removeTextNodes;}},empty:{get:function(){return empty;}},HTML_CHARACTERS:{get:function(){return HTML_CHARACTERS;}},fastInnerHTML:{get:function(){return fastInnerHTML;}},fastInnerText:{get:function(){return fastInnerText;}},isVisible:{get:function(){return isVisible;}},offset:{get:function(){return offset;}},getWindowScrollTop:{get:function(){return getWindowScrollTop;}},getWindowScrollLeft:{get:function(){return getWindowScrollLeft;}},getScrollTop:{get:function(){return getScrollTop;}},getScrollLeft:{get:function(){return getScrollLeft;}},getScrollableElement:{get:function(){return getScrollableElement;}},getTrimmingContainer:{get:function(){return getTrimmingContainer;}},getStyle:{get:function(){return getStyle;}},getComputedStyle:{get:function(){return getComputedStyle;}},outerWidth:{get:function(){return outerWidth;}},outerHeight:{get:function(){return outerHeight;}},innerHeight:{get:function(){return innerHeight;}},innerWidth:{get:function(){return innerWidth;}},addEvent:{get:function(){return addEvent;}},removeEvent:{get:function(){return removeEvent;}},getCaretPosition:{get:function(){return getCaretPosition;}},getSelectionEndPosition:{get:function(){return getSelectionEndPosition;}},setCaretPosition:{get:function(){return setCaretPosition;}},getScrollbarWidth:{get:function(){return getScrollbarWidth;}},setOverlayPosition:{get:function(){return setOverlayPosition;}},getCssTransform:{get:function(){return getCssTransform;}},resetCssTransform:{get:function(){return resetCssTransform;}},isInput:{get:function(){return isInput;}},isOutsideInput:{get:function(){return isOutsideInput;}},requestAnimationFrame:{get:function(){return requestAnimationFrame;}},cancelAnimationFrame:{get:function(){return cancelAnimationFrame;}},__esModule:{value:true}});var $___46__46__47_browser__;var $__0=($___46__46__47_browser__=require("../browser"),$___46__46__47_browser__&&$___46__46__47_browser__.__esModule&&$___46__46__47_browser__||{default:$___46__46__47_browser__}),isIE8=$__0.isIE8,isIE9=$__0.isIE9,isSafari=$__0.isSafari,hasCaptionProblem=$__0.hasCaptionProblem;function closest(element,nodes,until){while(element!=null&&element!==until){if(element.nodeType===Node.ELEMENT_NODE&&(nodes.indexOf(element.nodeName)>-1||nodes.indexOf(element)>-1)){return element;}
if(element.host&&element.nodeType===Node.DOCUMENT_FRAGMENT_NODE){element=element.host;}else{element=element.parentNode;}}
return null;}
function isChildOf(child,parent){var node=child.parentNode;var queriedParents=[];if(typeof parent==='string'){queriedParents=Array.prototype.slice.call(document.querySelectorAll(parent),0);}else{queriedParents.push(parent);}
while(node!=null){if(queriedParents.indexOf(node)>-1){return true;}
node=node.parentNode;}
return false;}
function isChildOfWebComponentTable(element){var hotTableName='hot-table',result=false,parentNode;parentNode=polymerWrap(element);function isHotTable(element){return element.nodeType===Node.ELEMENT_NODE&&element.nodeName===hotTableName.toUpperCase();}
while(parentNode!=null){if(isHotTable(parentNode)){result=true;break;}else if(parentNode.host&&parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){result=isHotTable(parentNode.host);if(result){break;}
parentNode=parentNode.host;}
parentNode=parentNode.parentNode;}
return result;}
function polymerWrap(element){return typeof Polymer!=='undefined'&&typeof wrap==='function'?wrap(element):element;}
function polymerUnwrap(element){return typeof Polymer!=='undefined'&&typeof unwrap==='function'?unwrap(element):element;}
function index(element){var i=0;if(element.previousSibling){while(element=element.previousSibling){++i;}}
return i;}
function overlayContainsElement(overlayType,element){var overlayElement=document.querySelector('.ht_clone_'+overlayType);return overlayElement?overlayElement.contains(element):null;}
var classListSupport=document.documentElement.classList?true:false;var _hasClass,_addClass,_removeClass;function filterEmptyClassNames(classNames){var len=0,result=[];if(!classNames||!classNames.length){return result;}
while(classNames[len]){result.push(classNames[len]);len++;}
return result;}
if(classListSupport){var isSupportMultipleClassesArg=(function(){var element=document.createElement('div');element.classList.add('test','test2');return element.classList.contains('test2');}());_hasClass=function _hasClass(element,className){if(className===''){return false;}
return element.classList.contains(className);};_addClass=function _addClass(element,className){var len=0;if(typeof className==='string'){className=className.split(' ');}
className=filterEmptyClassNames(className);if(isSupportMultipleClassesArg){element.classList.add.apply(element.classList,className);}else{while(className&&className[len]){element.classList.add(className[len]);len++;}}};_removeClass=function _removeClass(element,className){var len=0;if(typeof className==='string'){className=className.split(' ');}
className=filterEmptyClassNames(className);if(isSupportMultipleClassesArg){element.classList.remove.apply(element.classList,className);}else{while(className&&className[len]){element.classList.remove(className[len]);len++;}}};}else{var createClassNameRegExp=function createClassNameRegExp(className){return new RegExp('(\\s|^)'+className+'(\\s|$)');};_hasClass=function _hasClass(element,className){return element.className.match(createClassNameRegExp(className))?true:false;};_addClass=function _addClass(element,className){var len=0,_className=element.className;if(typeof className==='string'){className=className.split(' ');}
if(_className===''){_className=className.join(' ');}else{while(className&&className[len]){if(!createClassNameRegExp(className[len]).test(_className)){_className+=' '+className[len];}
len++;}}
element.className=_className;};_removeClass=function _removeClass(element,className){var len=0,_className=element.className;if(typeof className==='string'){className=className.split(' ');}
while(className&&className[len]){_className=_className.replace(createClassNameRegExp(className[len]),' ').trim();len++;}
if(element.className!==_className){element.className=_className;}};}
function hasClass(element,className){return _hasClass(element,className);}
function addClass(element,className){return _addClass(element,className);}
function removeClass(element,className){return _removeClass(element,className);}
function removeTextNodes(element,parent){if(element.nodeType===3){parent.removeChild(element);}else if(['TABLE','THEAD','TBODY','TFOOT','TR'].indexOf(element.nodeName)>-1){var childs=element.childNodes;for(var i=childs.length-1;i>=0;i--){removeTextNodes(childs[i],element);}}}
function empty(element){var child;while(child=element.lastChild){element.removeChild(child);}}
var HTML_CHARACTERS=/(<(.*)>|&(.*);)/;function fastInnerHTML(element,content){if(HTML_CHARACTERS.test(content)){element.innerHTML=content;}else{fastInnerText(element,content);}}
var textContextSupport=document.createTextNode('test').textContent?true:false;function fastInnerText(element,content){var child=element.firstChild;if(child&&child.nodeType===3&&child.nextSibling===null){if(textContextSupport){child.textContent=content;}else{child.data=content;}}else{empty(element);element.appendChild(document.createTextNode(content));}}
function isVisible(elem){var next=elem;while(polymerUnwrap(next)!==document.documentElement){if(next===null){return false;}else if(next.nodeType===Node.DOCUMENT_FRAGMENT_NODE){if(next.host){if(next.host.impl){return isVisible(next.host.impl);}else if(next.host){return isVisible(next.host);}else{throw new Error('Lost in Web Components world');}}else{return false;}}else if(next.style.display==='none'){return false;}
next=next.parentNode;}
return true;}
function offset(elem){var offsetLeft,offsetTop,lastElem,docElem,box;docElem=document.documentElement;if(hasCaptionProblem()&&elem.firstChild&&elem.firstChild.nodeName==='CAPTION'){box=elem.getBoundingClientRect();return{top:box.top+(window.pageYOffset||docElem.scrollTop)-(docElem.clientTop||0),left:box.left+(window.pageXOffset||docElem.scrollLeft)-(docElem.clientLeft||0)};}
offsetLeft=elem.offsetLeft;offsetTop=elem.offsetTop;lastElem=elem;while(elem=elem.offsetParent){if(elem===document.body){break;}
offsetLeft+=elem.offsetLeft;offsetTop+=elem.offsetTop;lastElem=elem;}
if(lastElem&&lastElem.style.position==='fixed'){offsetLeft+=window.pageXOffset||docElem.scrollLeft;offsetTop+=window.pageYOffset||docElem.scrollTop;}
return{left:offsetLeft,top:offsetTop};}
function getWindowScrollTop(){var res=window.scrollY;if(res===void 0){res=document.documentElement.scrollTop;}
return res;}
function getWindowScrollLeft(){var res=window.scrollX;if(res===void 0){res=document.documentElement.scrollLeft;}
return res;}
function getScrollTop(element){if(element===window){return getWindowScrollTop();}else{return element.scrollTop;}}
function getScrollLeft(element){if(element===window){return getWindowScrollLeft();}else{return element.scrollLeft;}}
function getScrollableElement(element){var el=element.parentNode,props=['auto','scroll'],overflow,overflowX,overflowY,computedStyle='',computedOverflow='',computedOverflowY='',computedOverflowX='';while(el&&el.style&&document.body!==el){overflow=el.style.overflow;overflowX=el.style.overflowX;overflowY=el.style.overflowY;if(overflow=='scroll'||overflowX=='scroll'||overflowY=='scroll'){return el;}else if(window.getComputedStyle){computedStyle=window.getComputedStyle(el);computedOverflow=computedStyle.getPropertyValue('overflow');computedOverflowY=computedStyle.getPropertyValue('overflow-y');computedOverflowX=computedStyle.getPropertyValue('overflow-x');if(computedOverflow==='scroll'||computedOverflowX==='scroll'||computedOverflowY==='scroll'){return el;}}
if(el.clientHeight<=el.scrollHeight&&(props.indexOf(overflowY)!==-1||props.indexOf(overflow)!==-1||props.indexOf(computedOverflow)!==-1||props.indexOf(computedOverflowY)!==-1)){return el;}
if(el.clientWidth<=el.scrollWidth&&(props.indexOf(overflowX)!==-1||props.indexOf(overflow)!==-1||props.indexOf(computedOverflow)!==-1||props.indexOf(computedOverflowX)!==-1)){return el;}
el=el.parentNode;}
return window;}
function getTrimmingContainer(base){var el=base.parentNode;while(el&&el.style&&document.body!==el){if(el.style.overflow!=='visible'&&el.style.overflow!==''){return el;}else if(window.getComputedStyle){var computedStyle=window.getComputedStyle(el);if(computedStyle.getPropertyValue('overflow')!=='visible'&&computedStyle.getPropertyValue('overflow')!==''){return el;}}
el=el.parentNode;}
return window;}
function getStyle(element,prop){if(!element){return;}else if(element===window){if(prop==='width'){return window.innerWidth+'px';}else if(prop==='height'){return window.innerHeight+'px';}
return;}
var styleProp=element.style[prop],computedStyle;if(styleProp!==''&&styleProp!==void 0){return styleProp;}else{computedStyle=getComputedStyle(element);if(computedStyle[prop]!==''&&computedStyle[prop]!==void 0){return computedStyle[prop];}
return void 0;}}
function getComputedStyle(element){return element.currentStyle||document.defaultView.getComputedStyle(element);}
function outerWidth(element){return element.offsetWidth;}
function outerHeight(elem){if(hasCaptionProblem()&&elem.firstChild&&elem.firstChild.nodeName==='CAPTION'){return elem.offsetHeight+elem.firstChild.offsetHeight;}else{return elem.offsetHeight;}}
function innerHeight(element){return element.clientHeight||element.innerHeight;}
function innerWidth(element){return element.clientWidth||element.innerWidth;}
function addEvent(element,event,callback){if(window.addEventListener){element.addEventListener(event,callback,false);}else{element.attachEvent('on'+event,callback);}}
function removeEvent(element,event,callback){if(window.removeEventListener){element.removeEventListener(event,callback,false);}else{element.detachEvent('on'+event,callback);}}
function getCaretPosition(el){if(el.selectionStart){return el.selectionStart;}else if(document.selection){el.focus();var r=document.selection.createRange();if(r==null){return 0;}
var re=el.createTextRange();var rc=re.duplicate();re.moveToBookmark(r.getBookmark());rc.setEndPoint('EndToStart',re);return rc.text.length;}
return 0;}
function getSelectionEndPosition(el){if(el.selectionEnd){return el.selectionEnd;}else if(document.selection){var r=document.selection.createRange();if(r==null){return 0;}
var re=el.createTextRange();return re.text.indexOf(r.text)+r.text.length;}}
function setCaretPosition(element,pos,endPos){if(endPos===void 0){endPos=pos;}
if(element.setSelectionRange){element.focus();try{element.setSelectionRange(pos,endPos);}catch(err){var elementParent=element.parentNode;var parentDisplayValue=elementParent.style.display;elementParent.style.display='block';element.setSelectionRange(pos,endPos);elementParent.style.display=parentDisplayValue;}}else if(element.createTextRange){var range=element.createTextRange();range.collapse(true);range.moveEnd('character',endPos);range.moveStart('character',pos);range.select();}}
var cachedScrollbarWidth;function walkontableCalculateScrollbarWidth(){var inner=document.createElement('p');inner.style.width='100%';inner.style.height='200px';var outer=document.createElement('div');outer.style.position='absolute';outer.style.top='0px';outer.style.left='0px';outer.style.visibility='hidden';outer.style.width='200px';outer.style.height='150px';outer.style.overflow='hidden';outer.appendChild(inner);(document.body||document.documentElement).appendChild(outer);var w1=inner.offsetWidth;outer.style.overflow='scroll';var w2=inner.offsetWidth;if(w1==w2){w2=outer.clientWidth;}
(document.body||document.documentElement).removeChild(outer);return(w1-w2);}
function getScrollbarWidth(){if(cachedScrollbarWidth===void 0){cachedScrollbarWidth=walkontableCalculateScrollbarWidth();}
return cachedScrollbarWidth;}
function setOverlayPosition(overlayElem,left,top){if(isIE8()||isIE9()){overlayElem.style.top=top;overlayElem.style.left=left;}else if(isSafari()){overlayElem.style['-webkit-transform']='translate3d('+left+','+top+',0)';}else{overlayElem.style.transform='translate3d('+left+','+top+',0)';}}
function getCssTransform(element){var transform;if(element.style.transform&&(transform=element.style.transform)!==''){return['transform',transform];}else if(element.style['-webkit-transform']&&(transform=element.style['-webkit-transform'])!==''){return['-webkit-transform',transform];}
return-1;}
function resetCssTransform(element){if(element.transform&&element.transform!==''){element.transform='';}else if(element['-webkit-transform']&&element['-webkit-transform']!==''){element['-webkit-transform']='';}}
function isInput(element){var inputs=['INPUT','SELECT','TEXTAREA'];return inputs.indexOf(element.nodeName)>-1||element.contentEditable==='true';}
function isOutsideInput(element){return isInput(element)&&element.className.indexOf('handsontableInput')==-1&&element.className.indexOf('copyPaste')==-1;}
var lastTime=0;var vendors=['ms','moz','webkit','o'];var _requestAnimationFrame=window.requestAnimationFrame;var _cancelAnimationFrame=window.cancelAnimationFrame;for(var x=0;x<vendors.length&&!_requestAnimationFrame;++x){_requestAnimationFrame=window[vendors[x]+'RequestAnimationFrame'];_cancelAnimationFrame=window[vendors[x]+'CancelAnimationFrame']||window[vendors[x]+'CancelRequestAnimationFrame'];}
if(!_requestAnimationFrame){_requestAnimationFrame=function(callback){var currTime=new Date().getTime();var timeToCall=Math.max(0,16-(currTime-lastTime));var id=window.setTimeout(function(){callback(currTime+timeToCall);},timeToCall);lastTime=currTime+timeToCall;return id;};}
if(!_cancelAnimationFrame){_cancelAnimationFrame=function(id){clearTimeout(id);};}
function requestAnimationFrame(callback){return _requestAnimationFrame.call(window,callback);}
function cancelAnimationFrame(id){_cancelAnimationFrame.call(window,id);}},{"../browser":42}],45:[function(require,module,exports){"use strict";Object.defineProperties(exports,{stopImmediatePropagation:{get:function(){return stopImmediatePropagation;}},isImmediatePropagationStopped:{get:function(){return isImmediatePropagationStopped;}},stopPropagation:{get:function(){return stopPropagation;}},pageX:{get:function(){return pageX;}},pageY:{get:function(){return pageY;}},__esModule:{value:true}});function stopImmediatePropagation(event){event.isImmediatePropagationEnabled=false;event.cancelBubble=true;}
function isImmediatePropagationStopped(event){return event.isImmediatePropagationEnabled===false;}
function stopPropagation(event){if(typeof event.stopPropagation==='function'){event.stopPropagation();}else{event.cancelBubble=true;}}
function pageX(event){if(event.pageX){return event.pageX;}
var scrollLeft=getWindowScrollLeft();var cursorX=event.clientX+scrollLeft;return cursorX;}
function pageY(event){if(event.pageY){return event.pageY;}
var scrollTop=getWindowScrollTop();var cursorY=event.clientY+scrollTop;return cursorY;}},{}],46:[function(require,module,exports){"use strict";Object.defineProperties(exports,{proxy:{get:function(){return proxy;}},throttle:{get:function(){return throttle;}},throttleAfterHits:{get:function(){return throttleAfterHits;}},__esModule:{value:true}});function proxy(fun,context){return function(){return fun.apply(context,arguments);};}
function throttle(func){var wait=arguments[1]!==(void 0)?arguments[1]:200;var lastCalled=0;var result={lastCallThrottled:true};var lastTimer=null;function _throttle(){var $__0=this;var args=arguments;var stamp=Date.now();var needCall=false;result.lastCallThrottled=true;if(!lastCalled){lastCalled=stamp;needCall=true;}
var remaining=wait-(stamp-lastCalled);if(needCall){result.lastCallThrottled=false;func.apply(this,args);}else{if(lastTimer){clearTimeout(lastTimer);}
lastTimer=setTimeout((function(){result.lastCallThrottled=false;func.apply($__0,args);lastCalled=0;lastTimer=void 0;}),remaining);}
return result;}
return _throttle;}
function throttleAfterHits(func){var wait=arguments[1]!==(void 0)?arguments[1]:200;var hits=arguments[2]!==(void 0)?arguments[2]:10;var funcThrottle=throttle(func,wait);var remainHits=hits;function _clearHits(){remainHits=hits;}
function _throttleAfterHits(){if(remainHits){remainHits--;return func.apply(this,arguments);}
return funcThrottle.apply(this,arguments);}
_throttleAfterHits.clearHits=_clearHits;return _throttleAfterHits;}},{}],47:[function(require,module,exports){"use strict";Object.defineProperties(exports,{stringify:{get:function(){return stringify;}},__esModule:{value:true}});function stringify(value){switch(typeof value){case'string':case'number':return value+'';case'object':if(value===null){return'';}else{return value.toString();}
break;case'undefined':return'';default:return value.toString();}}},{}],48:[function(require,module,exports){"use strict";Object.defineProperties(exports,{isNumeric:{get:function(){return isNumeric;}},rangeEach:{get:function(){return rangeEach;}},valueAccordingPercent:{get:function(){return valueAccordingPercent;}},__esModule:{value:true}});function isNumeric(n){var t=typeof n;return t=='number'?!isNaN(n)&&isFinite(n):t=='string'?!n.length?false:n.length==1?/\d/.test(n):/^\s*[+-]?\s*(?:(?:\d+(?:\.\d+)?(?:e[+-]?\d+)?)|(?:0x[a-f\d]+))\s*$/i.test(n):t=='object'?!!n&&typeof n.valueOf()=='number'&&!(n instanceof Date):false;}
function rangeEach(rangeFrom,rangeTo,iteratee,onlyForward){var index=-1;var _rangeTo=rangeTo;var _rangeFrom=0;if(typeof rangeTo==='function'){iteratee=rangeTo;_rangeTo=rangeFrom;}else{index=rangeFrom-1;}
if(onlyForward||rangeFrom<=_rangeTo){while(++index<=_rangeTo){if(iteratee(index)===false){break;}}}else{index=rangeFrom+1;while(--index>=rangeTo){if(iteratee(index)===false){break;}}}}
function valueAccordingPercent(value,percent){percent=parseInt(percent.toString().replace('%',''),10);percent=parseInt(value*percent/100);return percent;}},{}],49:[function(require,module,exports){"use strict";Object.defineProperties(exports,{duckSchema:{get:function(){return duckSchema;}},inherit:{get:function(){return inherit;}},extend:{get:function(){return extend;}},deepExtend:{get:function(){return deepExtend;}},deepClone:{get:function(){return deepClone;}},clone:{get:function(){return clone;}},mixin:{get:function(){return mixin;}},isObjectEquals:{get:function(){return isObjectEquals;}},isObject:{get:function(){return isObject;}},getPrototypeOf:{get:function(){return getPrototypeOf;}},defineGetter:{get:function(){return defineGetter;}},objectEach:{get:function(){return objectEach;}},__esModule:{value:true}});var $__array__;var arrayEach=($__array__=require("array"),$__array__&&$__array__.__esModule&&$__array__||{default:$__array__}).arrayEach;function duckSchema(object){var schema;if(Array.isArray(object)){schema=[];}else{schema={};objectEach(object,function(value,key){if(value&&typeof value==='object'&&!Array.isArray(value)){schema[key]=duckSchema(value);}else if(Array.isArray(value)){if(value.length&&typeof value[0]==='object'&&!Array.isArray(value[0])){schema[key]=[duckSchema(value[0])];}else{schema[key]=[];}}else{schema[key]=null;}});}
return schema;}
function inherit(Child,Parent){Parent.prototype.constructor=Parent;Child.prototype=new Parent();Child.prototype.constructor=Child;return Child;}
function extend(target,extension){objectEach(extension,function(value,key){target[key]=value;});return target;}
function deepExtend(target,extension){objectEach(extension,function(value,key){if(extension[key]&&typeof extension[key]==='object'){if(!target[key]){if(Array.isArray(extension[key])){target[key]=[];}else{target[key]={};}}
deepExtend(target[key],extension[key]);}else{target[key]=extension[key];}});}
function deepClone(obj){if(typeof obj==='object'){return JSON.parse(JSON.stringify(obj));}
return obj;}
function clone(object){var result={};objectEach(object,(function(value,key){return result[key]=value;}));return result;}
function mixin(Base){for(var mixins=[],$__1=1;$__1<arguments.length;$__1++)
mixins[$__1-1]=arguments[$__1];arrayEach(mixins,(function(mixin){objectEach(mixin,(function(value,key){if(typeof value==='function'){Base.prototype[key]=value;}else{var getter=function _getter(propertyName,initialValue){propertyName='_'+propertyName;var initValue=(function(value){if(Array.isArray(value)||isObject(value)){value=deepClone(value);}
return value;});return function(){if(this[propertyName]===void 0){this[propertyName]=initValue(initialValue);}
return this[propertyName];};};var setter=function _setter(propertyName){propertyName='_'+propertyName;return function(value){this[propertyName]=value;};};Object.defineProperty(Base.prototype,key,{get:getter(key,value),set:setter(key),configurable:true});}}));}));return Base;}
function isObjectEquals(object1,object2){return JSON.stringify(object1)===JSON.stringify(object2);}
function isObject(obj){return Object.prototype.toString.call(obj)=='[object Object]';}
function getPrototypeOf(obj){var prototype;if(typeof obj.__proto__=='object'){prototype=obj.__proto__;}else{var oldConstructor,constructor=obj.constructor;if(typeof obj.constructor=='function'){oldConstructor=constructor;if(delete obj.constructor){constructor=obj.constructor;obj.constructor=oldConstructor;}}
prototype=constructor?constructor.prototype:null;}
return prototype;}
function defineGetter(object,property,value,options){options.value=value;options.writable=options.writable===false?false:true;options.enumerable=options.enumerable===false?false:true;options.configurable=options.configurable===false?false:true;Object.defineProperty(object,property,options);}
function objectEach(object,iteratee){for(var key in object){if(!object.hasOwnProperty||(object.hasOwnProperty&&object.hasOwnProperty(key))){if(iteratee(object[key],key,object)===false){break;}}}
return object;}},{"array":41}],50:[function(require,module,exports){"use strict";Object.defineProperties(exports,{columnFactory:{get:function(){return columnFactory;}},__esModule:{value:true}});var $__object__;var inherit=($__object__=require("object"),$__object__&&$__object__.__esModule&&$__object__||{default:$__object__}).inherit;function columnFactory(GridSettings,conflictList){function ColumnSettings(){};inherit(ColumnSettings,GridSettings);for(var i=0,len=conflictList.length;i<len;i++){ColumnSettings.prototype[conflictList[i]]=void 0;}
return ColumnSettings;}},{"object":49}],51:[function(require,module,exports){"use strict";Object.defineProperties(exports,{toUpperCaseFirst:{get:function(){return toUpperCaseFirst;}},startsWith:{get:function(){return startsWith;}},endsWith:{get:function(){return endsWith;}},equalsIgnoreCase:{get:function(){return equalsIgnoreCase;}},randomString:{get:function(){return randomString;}},isPercentValue:{get:function(){return isPercentValue;}},__esModule:{value:true}});var $__mixed__,$__number__;var stringify=($__mixed__=require("mixed"),$__mixed__&&$__mixed__.__esModule&&$__mixed__||{default:$__mixed__}).stringify;var rangeEach=($__number__=require("number"),$__number__&&$__number__.__esModule&&$__number__||{default:$__number__}).rangeEach;function toUpperCaseFirst(string){return string[0].toUpperCase()+string.substr(1);}
function startsWith(string,needle){var result=true;rangeEach(needle.length-1,(function(index){if(string.charAt(index)!==needle.charAt(index)){result=false;return false;}}));return result;}
function endsWith(string,needle){var result=true;var needleLength=needle.length-1;var stringLength=string.length-1;rangeEach(needleLength,(function(index){var stringIndex=stringLength-index;var needleIndex=needleLength-index;if(string.charAt(stringIndex)!==needle.charAt(needleIndex)){result=false;return false;}}));return result;}
function equalsIgnoreCase(){for(var strings=[],$__2=0;$__2<arguments.length;$__2++)
strings[$__2]=arguments[$__2];var unique=[];var length=strings.length;while(length--){var string=stringify(strings[length]).toLowerCase();if(unique.indexOf(string)===-1){unique.push(string);}}
return unique.length===1;}
function randomString(){function s4(){return Math.floor((1+Math.random())*0x10000).toString(16).substring(1);}
return s4()+s4()+s4()+s4();}
function isPercentValue(value){return/^([0-9][0-9]?\%$)|(^100\%$)/.test(value);}},{"mixed":47,"number":48}],52:[function(require,module,exports){"use strict";Object.defineProperties(exports,{KEY_CODES:{get:function(){return KEY_CODES;}},isPrintableChar:{get:function(){return isPrintableChar;}},isMetaKey:{get:function(){return isMetaKey;}},isCtrlKey:{get:function(){return isCtrlKey;}},isKey:{get:function(){return isKey;}},__esModule:{value:true}});var $__array__;var arrayEach=($__array__=require("array"),$__array__&&$__array__.__esModule&&$__array__||{default:$__array__}).arrayEach;var KEY_CODES={MOUSE_LEFT:1,MOUSE_RIGHT:3,MOUSE_MIDDLE:2,BACKSPACE:8,COMMA:188,INSERT:45,DELETE:46,END:35,ENTER:13,ESCAPE:27,CONTROL_LEFT:91,COMMAND_LEFT:17,COMMAND_RIGHT:93,ALT:18,HOME:36,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,SPACE:32,SHIFT:16,CAPS_LOCK:20,TAB:9,ARROW_RIGHT:39,ARROW_LEFT:37,ARROW_UP:38,ARROW_DOWN:40,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,A:65,X:88,C:67,V:86};function isPrintableChar(keyCode){return((keyCode==32)||(keyCode>=48&&keyCode<=57)||(keyCode>=96&&keyCode<=111)||(keyCode>=186&&keyCode<=192)||(keyCode>=219&&keyCode<=222)||keyCode>=226||(keyCode>=65&&keyCode<=90));}
function isMetaKey(keyCode){var metaKeys=[KEY_CODES.ARROW_DOWN,KEY_CODES.ARROW_UP,KEY_CODES.ARROW_LEFT,KEY_CODES.ARROW_RIGHT,KEY_CODES.HOME,KEY_CODES.END,KEY_CODES.DELETE,KEY_CODES.BACKSPACE,KEY_CODES.F1,KEY_CODES.F2,KEY_CODES.F3,KEY_CODES.F4,KEY_CODES.F5,KEY_CODES.F6,KEY_CODES.F7,KEY_CODES.F8,KEY_CODES.F9,KEY_CODES.F10,KEY_CODES.F11,KEY_CODES.F12,KEY_CODES.TAB,KEY_CODES.PAGE_DOWN,KEY_CODES.PAGE_UP,KEY_CODES.ENTER,KEY_CODES.ESCAPE,KEY_CODES.SHIFT,KEY_CODES.CAPS_LOCK,KEY_CODES.ALT];return metaKeys.indexOf(keyCode)!==-1;}
function isCtrlKey(keyCode){return[KEY_CODES.CONTROL_LEFT,224,KEY_CODES.COMMAND_LEFT,KEY_CODES.COMMAND_RIGHT].indexOf(keyCode)!==-1;}
function isKey(keyCode,baseCode){var keys=baseCode.split('|');var result=false;arrayEach(keys,function(key){if(keyCode===KEY_CODES[key]){result=true;return false;}});return result;}},{"array":41}],53:[function(require,module,exports){"use strict";Object.defineProperties(exports,{MultiMap:{get:function(){return MultiMap;}},__esModule:{value:true}});;window.MultiMap=MultiMap;function MultiMap(){var map={arrayMap:[],weakMap:new WeakMap()};return{get:function(key){if(canBeAnArrayMapKey(key)){return map.arrayMap[key];}else if(canBeAWeakMapKey(key)){return map.weakMap.get(key);}},set:function(key,value){if(canBeAnArrayMapKey(key)){map.arrayMap[key]=value;}else if(canBeAWeakMapKey(key)){map.weakMap.set(key,value);}else{throw new Error('Invalid key type');}},delete:function(key){if(canBeAnArrayMapKey(key)){delete map.arrayMap[key];}else if(canBeAWeakMapKey(key)){map.weakMap.delete(key);}}};function canBeAnArrayMapKey(obj){return obj!==null&&!isNaNSymbol(obj)&&(typeof obj=='string'||typeof obj=='number');}
function canBeAWeakMapKey(obj){return obj!==null&&(typeof obj=='object'||typeof obj=='function');}
function isNaNSymbol(obj){return obj!==obj;}}},{}],54:[function(require,module,exports){"use strict";Object.defineProperties(exports,{Hooks:{get:function(){return Hooks;}},localHooks:{get:function(){return localHooks;}},__esModule:{value:true}});var $__helpers_47_array__,$__helpers_47_object__;var REGISTERED_HOOKS=['afterCellMetaReset','afterChange','afterChangesObserved','afterColumnMove','afterColumnResize','afterContextMenuDefaultOptions','afterContextMenuHide','afterContextMenuShow','afterCopyLimit','afterCreateCol','afterCreateRow','afterDeselect','afterDestroy','afterDocumentKeyDown','afterGetCellMeta','afterGetColHeader','afterGetRowHeader','afterInit','afterIsMultipleSelectionCheck','afterLoadData','afterMomentumScroll','afterOnCellCornerMouseDown','afterOnCellMouseDown','afterOnCellMouseOver','afterRemoveCol','afterRemoveRow','afterRender','afterRenderer','afterScrollHorizontally','afterScrollVertically','afterSelection','afterSelectionByProp','afterSelectionEnd','afterSelectionEndByProp','afterSetCellMeta','afterUpdateSettings','afterValidate','beforeAutofill','beforeCellAlignment','beforeChange','beforeChangeRender','beforeDrawBorders','beforeGetCellMeta','beforeInit','beforeInitWalkontable','beforeKeyDown','beforeOnCellMouseDown','beforeRemoveCol','beforeRemoveRow','beforeRender','beforeSetRangeEnd','beforeTouchScroll','beforeValidate','construct','init','modifyCol','modifyColWidth','modifyRow','modifyRowHeight','persistentStateLoad','persistentStateReset','persistentStateSave','beforeColumnSort','afterColumnSort','afterAutofillApplyValues','modifyCopyableRange','beforeColumnMove','afterColumnMove','beforeRowMove','afterRowMove','beforeColumnResize','afterColumnResize','beforeRowResize','afterRowResize'];var arrayEach=($__helpers_47_array__=require("helpers/array"),$__helpers_47_array__&&$__helpers_47_array__.__esModule&&$__helpers_47_array__||{default:$__helpers_47_array__}).arrayEach;var objectEach=($__helpers_47_object__=require("helpers/object"),$__helpers_47_object__&&$__helpers_47_object__.__esModule&&$__helpers_47_object__||{default:$__helpers_47_object__}).objectEach;var Hooks=function Hooks(){this.globalBucket=this.createEmptyBucket();};($traceurRuntime.createClass)(Hooks,{createEmptyBucket:function(){var bucket=Object.create(null);arrayEach(REGISTERED_HOOKS,(function(hook){return(bucket[hook]=[]);}));return bucket;},getBucket:function(){var context=arguments[0]!==(void 0)?arguments[0]:null;if(context){if(!context.pluginHookBucket){context.pluginHookBucket=this.createEmptyBucket();}
return context.pluginHookBucket;}
return this.globalBucket;},add:function(key,callback){var context=arguments[2]!==(void 0)?arguments[2]:null;var $__2=this;if(Array.isArray(callback)){arrayEach(callback,(function(c){return($__2.add(key,c,context));}));}else{var bucket=this.getBucket(context);if(typeof bucket[key]==='undefined'){this.register(key);bucket[key]=[];}
callback.skip=false;if(bucket[key].indexOf(callback)===-1){bucket[key].push(callback);}}
return this;},once:function(key,callback){var context=arguments[2]!==(void 0)?arguments[2]:null;var $__2=this;if(Array.isArray(callback)){arrayEach(callback,(function(c){return($__2.once(key,c,context));}));}else{callback.runOnce=true;this.add(key,callback,context);}},remove:function(key,callback){var context=arguments[2]!==(void 0)?arguments[2]:null;var bucket=this.getBucket(context);if(typeof bucket[key]!=='undefined'){if(bucket[key].indexOf(callback)>=0){callback.skip=true;return true;}}
return false;},run:function(context,key,p1,p2,p3,p4,p5,p6){{var globalHandlers=this.globalBucket[key];var index=-1;var length=globalHandlers?globalHandlers.length:0;if(length){while(++index<length){if(!globalHandlers[index]||globalHandlers[index].skip){continue;}
var res=globalHandlers[index].call(context,p1,p2,p3,p4,p5,p6);if(res!==void 0){p1=res;}
if(globalHandlers[index]&&globalHandlers[index].runOnce){this.remove(key,globalHandlers[index]);}}}}
{var localHandlers=this.getBucket(context)[key];var index$__5=-1;var length$__6=localHandlers?localHandlers.length:0;if(length$__6){while(++index$__5<length$__6){if(!localHandlers[index$__5]||localHandlers[index$__5].skip){continue;}
var res$__7=localHandlers[index$__5].call(context,p1,p2,p3,p4,p5,p6);if(res$__7!==void 0){p1=res$__7;}
if(localHandlers[index$__5]&&localHandlers[index$__5].runOnce){this.remove(key,localHandlers[index$__5],context);}}}}
return p1;},destroy:function(){var context=arguments[0]!==(void 0)?arguments[0]:null;objectEach(this.getBucket(context),(function(value,key,bucket){return(bucket[key].length=0);}));},register:function(key){if(!this.isRegistered(key)){REGISTERED_HOOKS.push(key);}},deregister:function(key){if(this.isRegistered(key)){REGISTERED_HOOKS.splice(REGISTERED_HOOKS.indexOf(key),1);}},isRegistered:function(key){return REGISTERED_HOOKS.indexOf(key)>=0;},getRegistered:function(){return REGISTERED_HOOKS;}},{});;var localHooks={_localHooks:Object.create(null),addLocalHook:function(key,callback){if(!this._localHooks[key]){this._localHooks[key]=[];}
this._localHooks[key].push(callback);},runLocalHooks:function(key){for(var params=[],$__4=1;$__4<arguments.length;$__4++)
params[$__4-1]=arguments[$__4];var $__2=this;if(this._localHooks[key]){arrayEach(this._localHooks[key],(function(callback){return callback.apply($__2,params);}));}},clearLocalHooks:function(){this._localHooks={};}};;Handsontable.utils=Handsontable.utils||{};Handsontable.utils.Hooks=Hooks;Handsontable.utils.localHooks=localHooks;},{"helpers/array":41,"helpers/object":49}],55:[function(require,module,exports){"use strict";Object.defineProperties(exports,{registerPlugin:{get:function(){return registerPlugin;}},getPlugin:{get:function(){return getPlugin;}},getRegistredPluginNames:{get:function(){return getRegistredPluginNames;}},getPluginName:{get:function(){return getPluginName;}},__esModule:{value:true}});var $__helpers_47_object__,$__helpers_47_string__;var objectEach=($__helpers_47_object__=require("helpers/object"),$__helpers_47_object__&&$__helpers_47_object__.__esModule&&$__helpers_47_object__||{default:$__helpers_47_object__}).objectEach;var toUpperCaseFirst=($__helpers_47_string__=require("helpers/string"),$__helpers_47_string__&&$__helpers_47_string__.__esModule&&$__helpers_47_string__||{default:$__helpers_47_string__}).toUpperCaseFirst;var registeredPlugins=new WeakMap();Handsontable.plugins=Handsontable.plugins||{};function registerPlugin(pluginName,PluginClass){pluginName=toUpperCaseFirst(pluginName);Handsontable.plugins[pluginName]=PluginClass;Handsontable.hooks.add('construct',function(){var holder;if(!registeredPlugins.has(this)){registeredPlugins.set(this,{});}
holder=registeredPlugins.get(this);if(!holder[pluginName]){holder[pluginName]=new PluginClass(this);}});Handsontable.hooks.add('afterDestroy',function(){if(registeredPlugins.has(this)){var pluginsHolder=registeredPlugins.get(this);objectEach(pluginsHolder,(function(plugin){return plugin.destroy();}));registeredPlugins.delete(this);}});}
function getPlugin(instance,pluginName){if(typeof pluginName!='string'){throw Error('Only strings can be passed as "plugin" parameter');}
var _pluginName=toUpperCaseFirst(pluginName);if(!registeredPlugins.has(instance)||!registeredPlugins.get(instance)[_pluginName]){return void 0;}
return registeredPlugins.get(instance)[_pluginName];}
function getRegistredPluginNames(hotInstance){return registeredPlugins.has(hotInstance)?Object.keys(registeredPlugins.get(hotInstance)):[];}
function getPluginName(hotInstance,plugin){var pluginName=null;if(registeredPlugins.has(hotInstance)){objectEach(registeredPlugins.get(hotInstance),(function(pluginInstance,name){if(pluginInstance===plugin){pluginName=name;}}));}
return pluginName;};},{"helpers/object":49,"helpers/string":51}],56:[function(require,module,exports){"use strict";Object.defineProperties(exports,{default:{get:function(){return $__default;}},__esModule:{value:true}});var $___46__46__47_helpers_47_object__,$___46__46__47_helpers_47_array__,$___46__46__47_plugins__;var $__0=($___46__46__47_helpers_47_object__=require("helpers/object"),$___46__46__47_helpers_47_object__&&$___46__46__47_helpers_47_object__.__esModule&&$___46__46__47_helpers_47_object__||{default:$___46__46__47_helpers_47_object__}),defineGetter=$__0.defineGetter,objectEach=$__0.objectEach;var arrayEach=($___46__46__47_helpers_47_array__=require("helpers/array"),$___46__46__47_helpers_47_array__&&$___46__46__47_helpers_47_array__.__esModule&&$___46__46__47_helpers_47_array__||{default:$___46__46__47_helpers_47_array__}).arrayEach;var $__2=($___46__46__47_plugins__=require("plugins"),$___46__46__47_plugins__&&$___46__46__47_plugins__.__esModule&&$___46__46__47_plugins__||{default:$___46__46__47_plugins__}),getRegistredPluginNames=$__2.getRegistredPluginNames,getPluginName=$__2.getPluginName;var privatePool=new WeakMap();var initializedPlugins=null;var BasePlugin=function BasePlugin(hotInstance){var $__3=this;defineGetter(this,'hot',hotInstance,{writable:false});privatePool.set(this,{hooks:{}});initializedPlugins=null;this.pluginsInitializedCallbacks=[];this.isPluginsReady=false;this.pluginName=null;this.enabled=false;this.initialized=false;this.hot.addHook('afterPluginsInitialized',(function(){return $__3.onAfterPluginsInitialized();}));this.hot.addHook('afterUpdateSettings',(function(){return $__3.onUpdateSettings();}));this.hot.addHook('beforeInit',(function(){return $__3.init();}));};($traceurRuntime.createClass)(BasePlugin,{init:function(){this.pluginName=getPluginName(this.hot,this);if(this.isEnabled&&this.isEnabled()){this.enablePlugin();}
if(!initializedPlugins){initializedPlugins=getRegistredPluginNames(this.hot);}
if(initializedPlugins.indexOf(this.pluginName)>=0){initializedPlugins.splice(initializedPlugins.indexOf(this.pluginName),1);}
if(!initializedPlugins.length){this.hot.runHooks('afterPluginsInitialized');}
this.initialized=true;},enablePlugin:function(){this.enabled=true;},disablePlugin:function(){if(this.eventManager){this.eventManager.clear();}
this.clearHooks();this.enabled=false;},addHook:function(name,callback){var hooks=privatePool.get(this).hooks[name]=(privatePool.get(this).hooks[name]||[]);this.hot.addHook(name,callback);hooks.push(callback);privatePool.get(this).hooks[name]=hooks;},removeHooks:function(name){var $__3=this;arrayEach(privatePool.get(this).hooks[name]||[],(function(callback){$__3.hot.removeHook(name,callback);}));},clearHooks:function(){var $__3=this;var hooks=privatePool.get(this).hooks;objectEach(hooks,(function(callbacks,name){return $__3.removeHooks(name);}));hooks.length=0;},callOnPluginsReady:function(callback){if(this.isPluginsReady){callback();}else{this.pluginsInitializedCallbacks.push(callback);}},onAfterPluginsInitialized:function(){arrayEach(this.pluginsInitializedCallbacks,(function(callback){return callback();}));this.pluginsInitializedCallbacks.length=0;this.isPluginsReady=true;},onUpdateSettings:function(){if(this.isEnabled){if(this.enabled&&!this.isEnabled()){this.disablePlugin();}
if(!this.enabled&&this.isEnabled()){this.enablePlugin();}
if(this.enabled&&this.isEnabled()){if(this.updatePlugin){this.updatePlugin();}}}},updatePlugin:function(){},destroy:function(){if(this.eventManager){this.eventManager.destroy();}
this.clearHooks();delete this.hot;}},{});var $__default=BasePlugin;},{"helpers/array":41,"helpers/object":49,"plugins":55}],57:[function(require,module,exports){"use strict";Object.defineProperties(exports,{AutoColumnSize:{get:function(){return AutoColumnSize;}},__esModule:{value:true}});var $___46__46__47__95_base__,$___46__46__47__46__46__47_helpers_47_array__,$___46__46__47__46__46__47_helpers_47_dom_47_element__,$___46__46__47__46__46__47_utils_47_ghostTable__,$___46__46__47__46__46__47_helpers_47_object__,$___46__46__47__46__46__47_helpers_47_number__,$___46__46__47__46__46__47_plugins__,$___46__46__47__46__46__47_utils_47_samplesGenerator__,$___46__46__47__46__46__47_helpers_47_string__,$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_calculator_47_viewportColumns__;var BasePlugin=($___46__46__47__95_base__=require("_base"),$___46__46__47__95_base__&&$___46__46__47__95_base__.__esModule&&$___46__46__47__95_base__||{default:$___46__46__47__95_base__}).default;var $__1=($___46__46__47__46__46__47_helpers_47_array__=require("helpers/array"),$___46__46__47__46__46__47_helpers_47_array__&&$___46__46__47__46__46__47_helpers_47_array__.__esModule&&$___46__46__47__46__46__47_helpers_47_array__||{default:$___46__46__47__46__46__47_helpers_47_array__}),arrayEach=$__1.arrayEach,arrayFilter=$__1.arrayFilter;var $__2=($___46__46__47__46__46__47_helpers_47_dom_47_element__=require("helpers/dom/element"),$___46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_element__||{default:$___46__46__47__46__46__47_helpers_47_dom_47_element__}),cancelAnimationFrame=$__2.cancelAnimationFrame,requestAnimationFrame=$__2.requestAnimationFrame,isVisible=$__2.isVisible;var GhostTable=($___46__46__47__46__46__47_utils_47_ghostTable__=require("utils/ghostTable"),$___46__46__47__46__46__47_utils_47_ghostTable__&&$___46__46__47__46__46__47_utils_47_ghostTable__.__esModule&&$___46__46__47__46__46__47_utils_47_ghostTable__||{default:$___46__46__47__46__46__47_utils_47_ghostTable__}).GhostTable;var $__4=($___46__46__47__46__46__47_helpers_47_object__=require("helpers/object"),$___46__46__47__46__46__47_helpers_47_object__&&$___46__46__47__46__46__47_helpers_47_object__.__esModule&&$___46__46__47__46__46__47_helpers_47_object__||{default:$___46__46__47__46__46__47_helpers_47_object__}),isObject=$__4.isObject,objectEach=$__4.objectEach;var $__5=($___46__46__47__46__46__47_helpers_47_number__=require("helpers/number"),$___46__46__47__46__46__47_helpers_47_number__&&$___46__46__47__46__46__47_helpers_47_number__.__esModule&&$___46__46__47__46__46__47_helpers_47_number__||{default:$___46__46__47__46__46__47_helpers_47_number__}),valueAccordingPercent=$__5.valueAccordingPercent,rangeEach=$__5.rangeEach;var registerPlugin=($___46__46__47__46__46__47_plugins__=require("plugins"),$___46__46__47__46__46__47_plugins__&&$___46__46__47__46__46__47_plugins__.__esModule&&$___46__46__47__46__46__47_plugins__||{default:$___46__46__47__46__46__47_plugins__}).registerPlugin;var SamplesGenerator=($___46__46__47__46__46__47_utils_47_samplesGenerator__=require("utils/samplesGenerator"),$___46__46__47__46__46__47_utils_47_samplesGenerator__&&$___46__46__47__46__46__47_utils_47_samplesGenerator__.__esModule&&$___46__46__47__46__46__47_utils_47_samplesGenerator__||{default:$___46__46__47__46__46__47_utils_47_samplesGenerator__}).SamplesGenerator;var isPercentValue=($___46__46__47__46__46__47_helpers_47_string__=require("helpers/string"),$___46__46__47__46__46__47_helpers_47_string__&&$___46__46__47__46__46__47_helpers_47_string__.__esModule&&$___46__46__47__46__46__47_helpers_47_string__||{default:$___46__46__47__46__46__47_helpers_47_string__}).isPercentValue;var WalkontableViewportColumnsCalculator=($___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_calculator_47_viewportColumns__=require("3rdparty/walkontable/src/calculator/viewportColumns"),$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_calculator_47_viewportColumns__&&$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_calculator_47_viewportColumns__.__esModule&&$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_calculator_47_viewportColumns__||{default:$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_calculator_47_viewportColumns__}).WalkontableViewportColumnsCalculator;var AutoColumnSize=function AutoColumnSize(hotInstance){var $__10=this;$traceurRuntime.superConstructor($AutoColumnSize).call(this,hotInstance);this.widths=[];this.ghostTable=new GhostTable(this.hot);this.samplesGenerator=new SamplesGenerator((function(row,col){return $__10.hot.getDataAtCell(row,col);}));this.firstCalculation=true;this.inProgress=false;this.addHook('beforeColumnResize',(function(col,size,isDblClick){return $__10.onBeforeColumnResize(col,size,isDblClick);}));};var $AutoColumnSize=AutoColumnSize;($traceurRuntime.createClass)(AutoColumnSize,{isEnabled:function(){return this.hot.getSettings().autoColumnSize!==false&&!this.hot.getSettings().colWidths;},enablePlugin:function(){var $__10=this;if(this.enabled){return;}
this.addHook('afterLoadData',(function(){return $__10.onAfterLoadData();}));this.addHook('beforeChange',(function(changes){return $__10.onBeforeChange(changes);}));this.addHook('beforeRender',(function(force){return $__10.onBeforeRender(force);}));this.addHook('modifyColWidth',(function(width,col){return $__10.getColumnWidth(col,width);}));$traceurRuntime.superGet(this,$AutoColumnSize.prototype,"enablePlugin").call(this);},disablePlugin:function(){$traceurRuntime.superGet(this,$AutoColumnSize.prototype,"disablePlugin").call(this);},calculateColumnsWidth:function(){var colRange=arguments[0]!==(void 0)?arguments[0]:{from:0,to:this.hot.countCols()-1};var rowRange=arguments[1]!==(void 0)?arguments[1]:{from:0,to:this.hot.countRows()-1};var force=arguments[2]!==(void 0)?arguments[2]:false;var $__10=this;if(typeof colRange==='number'){colRange={from:colRange,to:colRange};}
if(typeof rowRange==='number'){rowRange={from:rowRange,to:rowRange};}
rangeEach(colRange.from,colRange.to,(function(col){if(force||($__10.widths[col]===void 0&&!$__10.hot._getColWidthFromSettings(col))){var samples=$__10.samplesGenerator.generateColumnSamples(col,rowRange);samples.forEach((function(sample,col){return $__10.ghostTable.addColumn(col,sample);}));}}));if(this.ghostTable.columns.length){this.ghostTable.getWidths((function(col,width){return $__10.widths[col]=width;}));this.ghostTable.clean();}},calculateAllColumnsWidth:function(){var rowRange=arguments[0]!==(void 0)?arguments[0]:{from:0,to:this.hot.countRows()-1};var $__10=this;var current=0;var length=this.hot.countCols()-1;var timer=null;this.inProgress=true;var loop=(function(){if(!$__10.hot){cancelAnimationFrame(timer);$__10.inProgress=false;return;}
$__10.calculateColumnsWidth({from:current,to:Math.min(current+$AutoColumnSize.CALCULATION_STEP,length)},rowRange);current=current+$AutoColumnSize.CALCULATION_STEP+1;if(current<length){timer=requestAnimationFrame(loop);}else{cancelAnimationFrame(timer);$__10.inProgress=false;$__10.hot.view.wt.wtOverlays.adjustElementsSize(true);if($__10.hot.view.wt.wtOverlays.leftOverlay.needFullRender){$__10.hot.view.wt.wtOverlays.leftOverlay.clone.draw();}}});if(this.firstCalculation&&this.getSyncCalculationLimit()){this.calculateColumnsWidth({from:0,to:this.getSyncCalculationLimit()},rowRange);this.firstCalculation=false;current=this.getSyncCalculationLimit()+1;}
if(current<length){loop();}else{this.inProgress=false;}},recalculateAllColumnsWidth:function(){if(this.hot.view&&isVisible(this.hot.view.wt.wtTable.TABLE)){this.clearCache();this.calculateAllColumnsWidth();}},getSyncCalculationLimit:function(){var limit=$AutoColumnSize.SYNC_CALCULATION_LIMIT;var colsLimit=this.hot.countCols()-1;if(isObject(this.hot.getSettings().autoColumnSize)){limit=this.hot.getSettings().autoColumnSize.syncLimit;if(isPercentValue(limit)){limit=valueAccordingPercent(colsLimit,limit);}else{limit=limit>>0;}}
return Math.min(limit,colsLimit);},getColumnWidth:function(col){var defaultWidth=arguments[1];var keepMinimum=arguments[2]!==(void 0)?arguments[2]:true;var width=defaultWidth;if(width===void 0){width=this.widths[col];if(keepMinimum&&typeof width==='number'){width=Math.max(width,WalkontableViewportColumnsCalculator.DEFAULT_WIDTH);}}
return width;},getFirstVisibleColumn:function(){var wot=this.hot.view.wt;if(wot.wtViewport.columnsVisibleCalculator){return wot.wtTable.getFirstVisibleColumn();}
if(wot.wtViewport.columnsRenderCalculator){return wot.wtTable.getFirstRenderedColumn();}
return-1;},getLastVisibleColumn:function(){var wot=this.hot.view.wt;if(wot.wtViewport.columnsVisibleCalculator){return wot.wtTable.getLastVisibleColumn();}
if(wot.wtViewport.columnsRenderCalculator){return wot.wtTable.getLastRenderedColumn();}
return-1;},clearCache:function(){this.widths.length=0;},isNeedRecalculate:function(){return arrayFilter(this.widths,(function(item){return(item===void 0);})).length?true:false;},onBeforeRender:function(){var force=this.hot.renderCall;this.calculateColumnsWidth({from:this.getFirstVisibleColumn(),to:this.getLastVisibleColumn()},void 0,force);if(this.isNeedRecalculate()&&!this.inProgress){this.calculateAllColumnsWidth();}},onAfterLoadData:function(){var $__10=this;if(this.hot.view){this.recalculateAllColumnsWidth();}else{setTimeout((function(){if($__10.hot){$__10.recalculateAllColumnsWidth();}}),0);}},onBeforeChange:function(changes){var $__10=this;arrayEach(changes,(function(data){return $__10.widths[data[1]]=void 0;}));},onBeforeColumnResize:function(col,size,isDblClick){if(isDblClick){this.calculateColumnsWidth(col,void 0,true);size=this.getColumnWidth(col,void 0,false);}
return size;},destroy:function(){this.ghostTable.clean();$traceurRuntime.superGet(this,$AutoColumnSize.prototype,"destroy").call(this);}},{get CALCULATION_STEP(){return 50;},get SYNC_CALCULATION_LIMIT(){return 50;}},BasePlugin);;registerPlugin('autoColumnSize',AutoColumnSize);},{"3rdparty/walkontable/src/calculator/viewportColumns":3,"_base":56,"helpers/array":41,"helpers/dom/element":44,"helpers/number":48,"helpers/object":49,"helpers/string":51,"plugins":55,"utils/ghostTable":96,"utils/samplesGenerator":97}],58:[function(require,module,exports){"use strict";Object.defineProperties(exports,{AutoRowSize:{get:function(){return AutoRowSize;}},__esModule:{value:true}});var $___46__46__47__95_base__,$___46__46__47__46__46__47_helpers_47_array__,$___46__46__47__46__46__47_helpers_47_dom_47_element__,$___46__46__47__46__46__47_utils_47_ghostTable__,$___46__46__47__46__46__47_helpers_47_object__,$___46__46__47__46__46__47_helpers_47_number__,$___46__46__47__46__46__47_plugins__,$___46__46__47__46__46__47_utils_47_samplesGenerator__,$___46__46__47__46__46__47_helpers_47_string__;var BasePlugin=($___46__46__47__95_base__=require("_base"),$___46__46__47__95_base__&&$___46__46__47__95_base__.__esModule&&$___46__46__47__95_base__||{default:$___46__46__47__95_base__}).default;var $__1=($___46__46__47__46__46__47_helpers_47_array__=require("helpers/array"),$___46__46__47__46__46__47_helpers_47_array__&&$___46__46__47__46__46__47_helpers_47_array__.__esModule&&$___46__46__47__46__46__47_helpers_47_array__||{default:$___46__46__47__46__46__47_helpers_47_array__}),arrayEach=$__1.arrayEach,arrayFilter=$__1.arrayFilter;var $__2=($___46__46__47__46__46__47_helpers_47_dom_47_element__=require("helpers/dom/element"),$___46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_element__||{default:$___46__46__47__46__46__47_helpers_47_dom_47_element__}),cancelAnimationFrame=$__2.cancelAnimationFrame,requestAnimationFrame=$__2.requestAnimationFrame,isVisible=$__2.isVisible;var GhostTable=($___46__46__47__46__46__47_utils_47_ghostTable__=require("utils/ghostTable"),$___46__46__47__46__46__47_utils_47_ghostTable__&&$___46__46__47__46__46__47_utils_47_ghostTable__.__esModule&&$___46__46__47__46__46__47_utils_47_ghostTable__||{default:$___46__46__47__46__46__47_utils_47_ghostTable__}).GhostTable;var $__4=($___46__46__47__46__46__47_helpers_47_object__=require("helpers/object"),$___46__46__47__46__46__47_helpers_47_object__&&$___46__46__47__46__46__47_helpers_47_object__.__esModule&&$___46__46__47__46__46__47_helpers_47_object__||{default:$___46__46__47__46__46__47_helpers_47_object__}),isObject=$__4.isObject,objectEach=$__4.objectEach;var $__5=($___46__46__47__46__46__47_helpers_47_number__=require("helpers/number"),$___46__46__47__46__46__47_helpers_47_number__&&$___46__46__47__46__46__47_helpers_47_number__.__esModule&&$___46__46__47__46__46__47_helpers_47_number__||{default:$___46__46__47__46__46__47_helpers_47_number__}),valueAccordingPercent=$__5.valueAccordingPercent,rangeEach=$__5.rangeEach;var registerPlugin=($___46__46__47__46__46__47_plugins__=require("plugins"),$___46__46__47__46__46__47_plugins__&&$___46__46__47__46__46__47_plugins__.__esModule&&$___46__46__47__46__46__47_plugins__||{default:$___46__46__47__46__46__47_plugins__}).registerPlugin;var SamplesGenerator=($___46__46__47__46__46__47_utils_47_samplesGenerator__=require("utils/samplesGenerator"),$___46__46__47__46__46__47_utils_47_samplesGenerator__&&$___46__46__47__46__46__47_utils_47_samplesGenerator__.__esModule&&$___46__46__47__46__46__47_utils_47_samplesGenerator__||{default:$___46__46__47__46__46__47_utils_47_samplesGenerator__}).SamplesGenerator;var isPercentValue=($___46__46__47__46__46__47_helpers_47_string__=require("helpers/string"),$___46__46__47__46__46__47_helpers_47_string__&&$___46__46__47__46__46__47_helpers_47_string__.__esModule&&$___46__46__47__46__46__47_helpers_47_string__||{default:$___46__46__47__46__46__47_helpers_47_string__}).isPercentValue;var AutoRowSize=function AutoRowSize(hotInstance){var $__9=this;$traceurRuntime.superConstructor($AutoRowSize).call(this,hotInstance);this.heights=[];this.ghostTable=new GhostTable(this.hot);this.samplesGenerator=new SamplesGenerator((function(row,col){return $__9.hot.getDataAtCell(row,col);}));this.firstCalculation=true;this.inProgress=false;this.addHook('beforeRowResize',(function(row,size,isDblClick){return $__9.onBeforeRowResize(row,size,isDblClick);}));};var $AutoRowSize=AutoRowSize;($traceurRuntime.createClass)(AutoRowSize,{isEnabled:function(){return this.hot.getSettings().autoRowSize===true||isObject(this.hot.getSettings().autoRowSize);},enablePlugin:function(){var $__9=this;if(this.enabled){return;}
this.addHook('afterLoadData',(function(){return $__9.onAfterLoadData();}));this.addHook('beforeChange',(function(changes){return $__9.onBeforeChange(changes);}));this.addHook('beforeColumnMove',(function(){return $__9.recalculateAllRowsHeight();}));this.addHook('beforeColumnResize',(function(){return $__9.recalculateAllRowsHeight();}));this.addHook('beforeColumnSort',(function(){return $__9.clearCache();}));this.addHook('beforeRender',(function(force){return $__9.onBeforeRender(force);}));this.addHook('beforeRowMove',(function(rowStart,rowEnd){return $__9.onBeforeRowMove(rowStart,rowEnd);}));this.addHook('modifyRowHeight',(function(height,row){return $__9.getRowHeight(row,height);}));$traceurRuntime.superGet(this,$AutoRowSize.prototype,"enablePlugin").call(this);},disablePlugin:function(){$traceurRuntime.superGet(this,$AutoRowSize.prototype,"disablePlugin").call(this);},calculateRowsHeight:function(){var rowRange=arguments[0]!==(void 0)?arguments[0]:{from:0,to:this.hot.countRows()-1};var colRange=arguments[1]!==(void 0)?arguments[1]:{from:0,to:this.hot.countCols()-1};var force=arguments[2]!==(void 0)?arguments[2]:false;var $__9=this;if(typeof rowRange==='number'){rowRange={from:rowRange,to:rowRange};}
if(typeof colRange==='number'){colRange={from:colRange,to:colRange};}
rangeEach(rowRange.from,rowRange.to,(function(row){if(force||$__9.heights[row]===void 0){var samples=$__9.samplesGenerator.generateRowSamples(row,colRange);samples.forEach((function(sample,row){return $__9.ghostTable.addRow(row,sample);}));}}));if(this.ghostTable.rows.length){this.ghostTable.getHeights((function(row,height){return $__9.heights[row]=height;}));this.ghostTable.clean();}},calculateAllRowsHeight:function(){var colRange=arguments[0]!==(void 0)?arguments[0]:{from:0,to:this.hot.countCols()-1};var $__9=this;var current=0;var length=this.hot.countRows()-1;var timer=null;this.inProgress=true;var loop=(function(){if(!$__9.hot){cancelAnimationFrame(timer);$__9.inProgress=false;return;}
$__9.calculateRowsHeight({from:current,to:Math.min(current+$AutoRowSize.CALCULATION_STEP,length)},colRange);current=current+$AutoRowSize.CALCULATION_STEP+1;if(current<length){timer=requestAnimationFrame(loop);}else{cancelAnimationFrame(timer);$__9.inProgress=false;$__9.hot.view.wt.wtOverlays.adjustElementsSize(true);if($__9.hot.view.wt.wtOverlays.leftOverlay.needFullRender){$__9.hot.view.wt.wtOverlays.leftOverlay.clone.draw();}}});if(this.firstCalculation&&this.getSyncCalculationLimit()){this.calculateRowsHeight({from:0,to:this.getSyncCalculationLimit()},colRange);this.firstCalculation=false;current=this.getSyncCalculationLimit()+1;}
if(current<length){loop();}else{this.inProgress=false;}},recalculateAllRowsHeight:function(){if(isVisible(this.hot.view.wt.wtTable.TABLE)){this.clearCache();this.calculateAllRowsHeight();}},getSyncCalculationLimit:function(){var limit=$AutoRowSize.SYNC_CALCULATION_LIMIT;var rowsLimit=this.hot.countRows()-1;if(isObject(this.hot.getSettings().autoRowSize)){limit=this.hot.getSettings().autoRowSize.syncLimit;if(isPercentValue(limit)){limit=valueAccordingPercent(rowsLimit,limit);}else{limit=limit>>0;}}
return Math.min(limit,rowsLimit);},getRowHeight:function(row){var defaultHeight=arguments[1];var height=defaultHeight;if(this.heights[row]!==void 0&&this.heights[row]>(defaultHeight||0)){height=this.heights[row];}
return height;},getFirstVisibleRow:function(){var wot=this.hot.view.wt;if(wot.wtViewport.rowsVisibleCalculator){return wot.wtTable.getFirstVisibleRow();}
if(wot.wtViewport.rowsRenderCalculator){return wot.wtTable.getFirstRenderedRow();}
return-1;},getLastVisibleRow:function(){var wot=this.hot.view.wt;if(wot.wtViewport.rowsVisibleCalculator){return wot.wtTable.getLastVisibleRow();}
if(wot.wtViewport.rowsRenderCalculator){return wot.wtTable.getLastRenderedRow();}
return-1;},clearCache:function(){this.heights.length=0;},clearCacheByRange:function(range){var $__9=this;if(typeof range==='number'){range={from:range,to:range};}
rangeEach(Math.min(range.from,range.to),Math.max(range.from,range.to),(function(row){return $__9.heights[row]=void 0;}));},isNeedRecalculate:function(){return arrayFilter(this.heights,(function(item){return(item===void 0);})).length?true:false;},onBeforeRender:function(){var force=this.hot.renderCall;this.calculateRowsHeight({from:this.getFirstVisibleRow(),to:this.getLastVisibleRow()},void 0,force);if(this.isNeedRecalculate()&&!this.inProgress){this.calculateAllRowsHeight();}},onBeforeRowMove:function(from,to){this.clearCacheByRange({from:from,to:to});this.calculateAllRowsHeight();},onBeforeRowResize:function(row,size,isDblClick){if(isDblClick){this.calculateRowsHeight(row,void 0,true);size=this.getRowHeight(row);}
return size;},onAfterLoadData:function(){var $__9=this;if(this.hot.view){this.recalculateAllRowsHeight();}else{setTimeout((function(){if($__9.hot){$__9.recalculateAllRowsHeight();}}),0);}},onBeforeChange:function(changes){var range=null;if(changes.length===1){range=changes[0][0];}else if(changes.length>1){range={from:changes[0][0],to:changes[changes.length-1][0]};}
if(range!==null){this.clearCacheByRange(range);}},destroy:function(){this.ghostTable.clean();$traceurRuntime.superGet(this,$AutoRowSize.prototype,"destroy").call(this);}},{get CALCULATION_STEP(){return 50;},get SYNC_CALCULATION_LIMIT(){return 500;}},BasePlugin);;registerPlugin('autoRowSize',AutoRowSize);},{"_base":56,"helpers/array":41,"helpers/dom/element":44,"helpers/number":48,"helpers/object":49,"helpers/string":51,"plugins":55,"utils/ghostTable":96,"utils/samplesGenerator":97}],59:[function(require,module,exports){"use strict";Object.defineProperties(exports,{Autofill:{get:function(){return Autofill;}},__esModule:{value:true}});var $___46__46__47__46__46__47_helpers_47_dom_47_element__,$___46__46__47__46__46__47_eventManager__,$___46__46__47__46__46__47_plugins__,$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__;var $__0=($___46__46__47__46__46__47_helpers_47_dom_47_element__=require("helpers/dom/element"),$___46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_element__||{default:$___46__46__47__46__46__47_helpers_47_dom_47_element__}),offset=$__0.offset,outerHeight=$__0.outerHeight,outerWidth=$__0.outerWidth;var eventManagerObject=($___46__46__47__46__46__47_eventManager__=require("eventManager"),$___46__46__47__46__46__47_eventManager__&&$___46__46__47__46__46__47_eventManager__.__esModule&&$___46__46__47__46__46__47_eventManager__||{default:$___46__46__47__46__46__47_eventManager__}).eventManager;var registerPlugin=($___46__46__47__46__46__47_plugins__=require("plugins"),$___46__46__47__46__46__47_plugins__&&$___46__46__47__46__46__47_plugins__.__esModule&&$___46__46__47__46__46__47_plugins__||{default:$___46__46__47__46__46__47_plugins__}).registerPlugin;var WalkontableCellCoords=($___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__=require("3rdparty/walkontable/src/cell/coords"),$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__&&$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__.__esModule&&$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__||{default:$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__}).WalkontableCellCoords;;function getDeltas(start,end,data,direction){var rlength=data.length,clength=data?data[0].length:0,deltas=[],arr=[],diffRow,diffCol,startValue,endValue,delta;diffRow=end.row-start.row;diffCol=end.col-start.col;if(['down','up'].indexOf(direction)!==-1){for(var col=0;col<=diffCol;col++){startValue=parseInt(data[0][col],10);endValue=parseInt(data[rlength-1][col],10);delta=(direction==='down'?(endValue-startValue):(startValue-endValue))/(rlength-1)||0;arr.push(delta);}
deltas.push(arr);}
if(['right','left'].indexOf(direction)!==-1){for(var row=0;row<=diffRow;row++){startValue=parseInt(data[row][0],10);endValue=parseInt(data[row][clength-1],10);delta=(direction==='right'?(endValue-startValue):(startValue-endValue))/(clength-1)||0;arr=[];arr.push(delta);deltas.push(arr);}}
return deltas;}
function Autofill(instance){var _this=this,mouseDownOnCellCorner=false,wtOnCellCornerMouseDown,wtOnCellMouseOver,eventManager;this.instance=instance;this.addingStarted=false;eventManager=eventManagerObject(instance);function mouseUpCallback(event){if(!instance.autofill){return true;}
if(instance.autofill.handle&&instance.autofill.handle.isDragged){if(instance.autofill.handle.isDragged>1){instance.autofill.apply();}
instance.autofill.handle.isDragged=0;mouseDownOnCellCorner=false;}}
function mouseMoveCallback(event){var tableBottom,tableRight;if(!_this.instance.autofill){return false;}
tableBottom=offset(_this.instance.table).top-(window.pageYOffset||document.documentElement.scrollTop)+outerHeight(_this.instance.table);tableRight=offset(_this.instance.table).left-(window.pageXOffset||document.documentElement.scrollLeft)+outerWidth(_this.instance.table);if(_this.addingStarted===false&&_this.instance.autofill.handle.isDragged>0&&event.clientY>tableBottom&&event.clientX<=tableRight){_this.instance.mouseDragOutside=true;_this.addingStarted=true;}else{_this.instance.mouseDragOutside=false;}
if(_this.instance.mouseDragOutside){setTimeout(function(){_this.addingStarted=false;_this.instance.alter('insert_row');},200);}}
eventManager.addEventListener(document,'mouseup',mouseUpCallback);eventManager.addEventListener(document,'mousemove',mouseMoveCallback);wtOnCellCornerMouseDown=this.instance.view.wt.wtSettings.settings.onCellCornerMouseDown;this.instance.view.wt.wtSettings.settings.onCellCornerMouseDown=function(event){instance.autofill.handle.isDragged=1;mouseDownOnCellCorner=true;wtOnCellCornerMouseDown(event);};wtOnCellMouseOver=this.instance.view.wt.wtSettings.settings.onCellMouseOver;this.instance.view.wt.wtSettings.settings.onCellMouseOver=function(event,coords,TD,wt){if(instance.autofill&&mouseDownOnCellCorner&&!instance.view.isMouseDown()&&instance.autofill.handle&&instance.autofill.handle.isDragged){instance.autofill.handle.isDragged++;instance.autofill.showBorder(coords);instance.autofill.checkIfNewRowNeeded();}
wtOnCellMouseOver(event,coords,TD,wt);};this.instance.view.wt.wtSettings.settings.onCellCornerDblClick=function(){instance.autofill.selectAdjacent();};}
Autofill.prototype.init=function(){this.handle={};};Autofill.prototype.disable=function(){this.handle.disabled=true;};Autofill.prototype.selectAdjacent=function(){var select,data,r,maxR,c;if(this.instance.selection.isMultiple()){select=this.instance.view.wt.selections.area.getCorners();}else{select=this.instance.view.wt.selections.current.getCorners();}
data=this.instance.getData();rows:for(r=select[2]+1;r<this.instance.countRows();r++){for(c=select[1];c<=select[3];c++){if(data[r][c]){break rows;}}
if(!!data[r][select[1]-1]||!!data[r][select[3]+1]){maxR=r;}}
if(maxR){this.instance.view.wt.selections.fill.clear();this.instance.view.wt.selections.fill.add(new WalkontableCellCoords(select[0],select[1]));this.instance.view.wt.selections.fill.add(new WalkontableCellCoords(maxR,select[3]));this.apply();}};Autofill.prototype.apply=function(){var drag,select,start,end,_data,direction,deltas,selRange;this.handle.isDragged=0;if(this.instance.view.wt.selections.fill.isEmpty()){return;}
drag=this.instance.view.wt.selections.fill.getCorners();this.instance.view.wt.selections.fill.clear();if(this.instance.selection.isMultiple()){select=this.instance.view.wt.selections.area.getCorners();}else{select=this.instance.view.wt.selections.current.getCorners();}
Handsontable.hooks.run(this.instance,'afterAutofillApplyValues',select,drag);if(drag[0]===select[0]&&drag[1]<select[1]){direction='left';start=new WalkontableCellCoords(drag[0],drag[1]);end=new WalkontableCellCoords(drag[2],select[1]-1);}else if(drag[0]===select[0]&&drag[3]>select[3]){direction='right';start=new WalkontableCellCoords(drag[0],select[3]+1);end=new WalkontableCellCoords(drag[2],drag[3]);}else if(drag[0]<select[0]&&drag[1]===select[1]){direction='up';start=new WalkontableCellCoords(drag[0],drag[1]);end=new WalkontableCellCoords(select[0]-1,drag[3]);}else if(drag[2]>select[2]&&drag[1]===select[1]){direction='down';start=new WalkontableCellCoords(select[2]+1,drag[1]);end=new WalkontableCellCoords(drag[2],drag[3]);}
if(start&&start.row>-1&&start.col>-1){selRange={from:this.instance.getSelectedRange().from,to:this.instance.getSelectedRange().to};_data=this.instance.getData(selRange.from.row,selRange.from.col,selRange.to.row,selRange.to.col);deltas=getDeltas(start,end,_data,direction);Handsontable.hooks.run(this.instance,'beforeAutofill',start,end,_data);this.instance.populateFromArray(start.row,start.col,_data,end.row,end.col,'autofill',null,direction,deltas);this.instance.selection.setRangeStart(new WalkontableCellCoords(drag[0],drag[1]));this.instance.selection.setRangeEnd(new WalkontableCellCoords(drag[2],drag[3]));}else{this.instance.selection.refreshBorders();}};Autofill.prototype.showBorder=function(coords){var topLeft=this.instance.getSelectedRange().getTopLeftCorner(),bottomRight=this.instance.getSelectedRange().getBottomRightCorner();if(this.instance.getSettings().fillHandle!=='horizontal'&&(bottomRight.row<coords.row||topLeft.row>coords.row)){coords=new WalkontableCellCoords(coords.row,bottomRight.col);}else if(this.instance.getSettings().fillHandle!=='vertical'){coords=new WalkontableCellCoords(bottomRight.row,coords.col);}else{return;}
this.instance.view.wt.selections.fill.clear();this.instance.view.wt.selections.fill.add(this.instance.getSelectedRange().from);this.instance.view.wt.selections.fill.add(this.instance.getSelectedRange().to);this.instance.view.wt.selections.fill.add(coords);this.instance.view.render();};Autofill.prototype.checkIfNewRowNeeded=function(){var fillCorners,selection,tableRows=this.instance.countRows(),that=this;if(this.instance.view.wt.selections.fill.cellRange&&this.addingStarted===false){selection=this.instance.getSelected();fillCorners=this.instance.view.wt.selections.fill.getCorners();if(selection[2]<tableRows-1&&fillCorners[2]===tableRows-1){this.addingStarted=true;this.instance._registerTimeout(setTimeout(function(){that.instance.alter('insert_row');that.addingStarted=false;},200));}}};Handsontable.hooks.add('afterInit',function(){var autofill=new Autofill(this);if(typeof this.getSettings().fillHandle!=='undefined'){if(autofill.handle&&this.getSettings().fillHandle===false){autofill.disable();}else if(!autofill.handle&&this.getSettings().fillHandle!==false){this.autofill=autofill;this.autofill.init();}}});Handsontable.Autofill=Autofill;},{"3rdparty/walkontable/src/cell/coords":5,"eventManager":40,"helpers/dom/element":44,"plugins":55}],60:[function(require,module,exports){"use strict";Object.defineProperties(exports,{default:{get:function(){return $__default;}},__esModule:{value:true}});var $___46__46__47__46__46__47_helpers_47_dom_47_element__,$___46__46__47__46__46__47_eventManager__,$___46__46__47__95_base__,$___46__46__47__46__46__47_plugins__;var $__0=($___46__46__47__46__46__47_helpers_47_dom_47_element__=require("helpers/dom/element"),$___46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_element__||{default:$___46__46__47__46__46__47_helpers_47_dom_47_element__}),addClass=$__0.addClass,closest=$__0.closest,hasClass=$__0.hasClass,index=$__0.index,removeClass=$__0.removeClass;var eventManagerObject=($___46__46__47__46__46__47_eventManager__=require("eventManager"),$___46__46__47__46__46__47_eventManager__&&$___46__46__47__46__46__47_eventManager__.__esModule&&$___46__46__47__46__46__47_eventManager__||{default:$___46__46__47__46__46__47_eventManager__}).eventManager;var BasePlugin=($___46__46__47__95_base__=require("_base"),$___46__46__47__95_base__&&$___46__46__47__95_base__.__esModule&&$___46__46__47__95_base__||{default:$___46__46__47__95_base__}).default;var registerPlugin=($___46__46__47__46__46__47_plugins__=require("plugins"),$___46__46__47__46__46__47_plugins__&&$___46__46__47__46__46__47_plugins__.__esModule&&$___46__46__47__46__46__47_plugins__||{default:$___46__46__47__46__46__47_plugins__}).registerPlugin;Handsontable.hooks.register('beforeColumnSort');Handsontable.hooks.register('afterColumnSort');var ColumnSorting=function ColumnSorting(hotInstance){$traceurRuntime.superConstructor($ColumnSorting).call(this,hotInstance);this.sortIndicators=[];};var $ColumnSorting=ColumnSorting;($traceurRuntime.createClass)(ColumnSorting,{isEnabled:function(){return!!(this.hot.getSettings().columnSorting);},enablePlugin:function(){var $__4=this;if(this.enabled){return;}
var _this=this;this.hot.sortIndex=[];this.hot.sort=function(){var args=Array.prototype.slice.call(arguments);return _this.sortByColumn.apply(_this,args);};if(typeof this.hot.getSettings().observeChanges==='undefined'){this.enableObserveChangesPlugin();}
this.bindColumnSortingAfterClick();this.addHook('modifyRow',(function(row){return $__4.translateRow(row);}));this.addHook('afterUpdateSettings',(function(){return $__4.onAfterUpdateSettings();}));this.addHook('afterGetColHeader',(function(col,TH){return $__4.getColHeader(col,TH);}));this.addHook('afterCreateRow',function(){_this.afterCreateRow.apply(_this,arguments);});this.addHook('afterRemoveRow',function(){_this.afterRemoveRow.apply(_this,arguments);});this.addHook('afterInit',(function(){return $__4.sortBySettings();}));this.addHook('afterLoadData',(function(){$__4.hot.sortIndex=[];if($__4.hot.view){$__4.sortBySettings();}}));if(this.hot.view){this.sortBySettings();}
$traceurRuntime.superGet(this,$ColumnSorting.prototype,"enablePlugin").call(this);},disablePlugin:function(){this.hot.sort=void 0;$traceurRuntime.superGet(this,$ColumnSorting.prototype,"disablePlugin").call(this);},onAfterUpdateSettings:function(){this.sortBySettings();},sortBySettings:function(){var sortingSettings=this.hot.getSettings().columnSorting;var loadedSortingState=this.loadSortingState();var sortingColumn;var sortingOrder;if(typeof loadedSortingState==='undefined'){sortingColumn=sortingSettings.column;sortingOrder=sortingSettings.sortOrder;}else{sortingColumn=loadedSortingState.sortColumn;sortingOrder=loadedSortingState.sortOrder;}
this.sortByColumn(sortingColumn,sortingOrder);},setSortingColumn:function(col,order){if(typeof col=='undefined'){this.hot.sortColumn=void 0;this.hot.sortOrder=void 0;return;}else if(this.hot.sortColumn===col&&typeof order=='undefined'){if(this.hot.sortOrder===false){this.hot.sortOrder=void 0;}else{this.hot.sortOrder=!this.hot.sortOrder;}}else{this.hot.sortOrder=typeof order==='undefined'?true:order;}
this.hot.sortColumn=col;},sortByColumn:function(col,order){this.setSortingColumn(col,order);if(typeof this.hot.sortColumn=='undefined'){return;}
Handsontable.hooks.run(this.hot,'beforeColumnSort',this.hot.sortColumn,this.hot.sortOrder);this.sort();this.hot.render();this.saveSortingState();Handsontable.hooks.run(this.hot,'afterColumnSort',this.hot.sortColumn,this.hot.sortOrder);},saveSortingState:function(){var sortingState={};if(typeof this.hot.sortColumn!='undefined'){sortingState.sortColumn=this.hot.sortColumn;}
if(typeof this.hot.sortOrder!='undefined'){sortingState.sortOrder=this.hot.sortOrder;}
if(sortingState.hasOwnProperty('sortColumn')||sortingState.hasOwnProperty('sortOrder')){Handsontable.hooks.run(this.hot,'persistentStateSave','columnSorting',sortingState);}},loadSortingState:function(){var storedState={};Handsontable.hooks.run(this.hot,'persistentStateLoad','columnSorting',storedState);return storedState.value;},bindColumnSortingAfterClick:function(){if(this.bindedSortEvent){return;}
var eventManager=eventManagerObject(this.hot),_this=this;this.bindedSortEvent=true;eventManager.addEventListener(this.hot.rootElement,'click',function(e){if(hasClass(e.target,'columnSorting')){var col=getColumn(e.target);if(col===this.lastSortedColumn){switch(_this.hot.sortOrder){case void 0:_this.sortOrderClass='ascending';break;case true:_this.sortOrderClass='descending';break;case false:_this.sortOrderClass=void 0;}}else{_this.sortOrderClass='ascending';}
this.lastSortedColumn=col;_this.sortByColumn(col);}});function countRowHeaders(){var THs=_this.hot.view.TBODY.querySelector('tr').querySelectorAll('th');return THs.length;}
function getColumn(target){var TH=closest(target,'TH');return _this.hot.view.wt.wtTable.getFirstRenderedColumn()+index(TH)-countRowHeaders();}},enableObserveChangesPlugin:function(){var _this=this;this.hot._registerTimeout(setTimeout(function(){_this.hot.updateSettings({observeChanges:true});},0));},defaultSort:function(sortOrder){return function(a,b){if(typeof a[1]=='string'){a[1]=a[1].toLowerCase();}
if(typeof b[1]=='string'){b[1]=b[1].toLowerCase();}
if(a[1]===b[1]){return 0;}
if(a[1]===null||a[1]===''){return 1;}
if(b[1]===null||b[1]===''){return-1;}
if(isNaN(a[1])&&!isNaN(b[1])){return sortOrder?1:-1;}else if(!isNaN(a[1])&&isNaN(b[1])){return sortOrder?-1:1;}
if(a[1]<b[1]){return sortOrder?-1:1;}
if(a[1]>b[1]){return sortOrder?1:-1;}
return 0;};},dateSort:function(sortOrder){return function(a,b){if(a[1]===b[1]){return 0;}
if(a[1]===null||a[1]===''){return 1;}
if(b[1]===null||b[1]===''){return-1;}
var aDate=new Date(a[1]);var bDate=new Date(b[1]);if(aDate<bDate){return sortOrder?-1:1;}
if(aDate>bDate){return sortOrder?1:-1;}
return 0;};},sort:function(){if(typeof this.hot.sortOrder=='undefined'){return;}
var colMeta,sortFunction;this.hot.sortingEnabled=false;this.hot.sortIndex.length=0;var colOffset=this.hot.colOffset();for(var i=0,ilen=this.hot.countRows()-this.hot.getSettings().minSpareRows;i<ilen;i++){this.hot.sortIndex.push([i,this.hot.getDataAtCell(i,this.hot.sortColumn+colOffset)]);}
colMeta=this.hot.getCellMeta(0,this.hot.sortColumn);this.sortIndicators[this.hot.sortColumn]=colMeta.sortIndicator;switch(colMeta.type){case'date':sortFunction=this.dateSort;break;default:sortFunction=this.defaultSort;}
this.hot.sortIndex.sort(sortFunction(this.hot.sortOrder));for(var i=this.hot.sortIndex.length;i<this.hot.countRows();i++){this.hot.sortIndex.push([i,this.hot.getDataAtCell(i,this.hot.sortColumn+colOffset)]);}
this.hot.sortingEnabled=true;},translateRow:function(row){if(this.hot.sortingEnabled&&(typeof this.hot.sortOrder!=='undefined')&&this.hot.sortIndex&&this.hot.sortIndex.length&&this.hot.sortIndex[row]){return this.hot.sortIndex[row][0];}
return row;},untranslateRow:function(row){if(this.hot.sortingEnabled&&this.hot.sortIndex&&this.hot.sortIndex.length){for(var i=0;i<this.hot.sortIndex.length;i++){if(this.hot.sortIndex[i][0]==row){return i;}}}},getColHeader:function(col,TH){var headerLink=TH.querySelector('.colHeader');var colspan=TH.getAttribute('colspan');var TRs=TH.parentNode.parentNode.childNodes;var headerLevel=Array.prototype.indexOf.call(TRs,TH.parentNode);headerLevel=headerLevel-TRs.length;if(!headerLink){return;}
if(this.hot.getSettings().columnSorting&&col>=0&&headerLevel===-1){addClass(headerLink,'columnSorting');}
removeClass(headerLink,'descending');removeClass(headerLink,'ascending');if(this.sortIndicators[col]){if(col===this.hot.sortColumn){if(this.sortOrderClass==='ascending'){addClass(headerLink,'ascending');}else if(this.sortOrderClass==='descending'){addClass(headerLink,'descending');}}}},isSorted:function(){return typeof this.hot.sortColumn!='undefined';},afterCreateRow:function(index,amount){if(!this.isSorted()){return;}
for(var i=0;i<this.hot.sortIndex.length;i++){if(this.hot.sortIndex[i][0]>=index){this.hot.sortIndex[i][0]+=amount;}}
for(var i=0;i<amount;i++){this.hot.sortIndex.splice(index+i,0,[index+i,this.hot.getData()[index+i][this.hot.sortColumn+this.hot.colOffset()]]);}
this.saveSortingState();},afterRemoveRow:function(index,amount){if(!this.isSorted()){return;}
var physicalRemovedIndex=this.translateRow(index);this.hot.sortIndex.splice(index,amount);for(var i=0;i<this.hot.sortIndex.length;i++){if(this.hot.sortIndex[i][0]>physicalRemovedIndex){this.hot.sortIndex[i][0]-=amount;}}
this.saveSortingState();}},{},BasePlugin);var $__default=ColumnSorting;registerPlugin('columnSorting',ColumnSorting);},{"_base":56,"eventManager":40,"helpers/dom/element":44,"plugins":55}],61:[function(require,module,exports){"use strict";Object.defineProperties(exports,{CommentEditor:{get:function(){return CommentEditor;}},__esModule:{value:true}});var $___46__46__47__46__46__47_helpers_47_dom_47_element__;var addClass=($___46__46__47__46__46__47_helpers_47_dom_47_element__=require("helpers/dom/element"),$___46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_element__||{default:$___46__46__47__46__46__47_helpers_47_dom_47_element__}).addClass;var CommentEditor=function CommentEditor(){this.editor=this.createEditor();this.editorStyle=this.editor.style;this.editorStyle.position='absolute';this.editorStyle.zIndex=100;this.hide();};var $CommentEditor=CommentEditor;($traceurRuntime.createClass)(CommentEditor,{setPosition:function(x,y){this.editorStyle.left=x+'px';this.editorStyle.top=y+'px';},show:function(){this.editorStyle.display='block';},hide:function(){this.editorStyle.display='none';},isVisible:function(){return this.editorStyle.display==='block';},setValue:function(){var value=arguments[0]!==(void 0)?arguments[0]:'';value=value||'';this.getInputElement().value=value;},getValue:function(){return this.getInputElement().value;},isFocused:function(){return document.activeElement===this.getInputElement();},focus:function(){this.getInputElement().focus();},createEditor:function(){var container=document.querySelector('.'+$CommentEditor.CLASS_EDITOR_CONTAINER);var editor;var textArea;if(!container){container=document.createElement('div');addClass(container,$CommentEditor.CLASS_EDITOR_CONTAINER);document.body.appendChild(container);}
editor=document.createElement('div');addClass(editor,$CommentEditor.CLASS_EDITOR);textArea=document.createElement('textarea');addClass(textArea,$CommentEditor.CLASS_INPUT);editor.appendChild(textArea);container.appendChild(editor);return editor;},getInputElement:function(){return this.editor.querySelector('.'+$CommentEditor.CLASS_INPUT);},destroy:function(){this.editor.parentNode.removeChild(this.editor);this.editor=null;this.editorStyle=null;}},{get CLASS_EDITOR_CONTAINER(){return'htCommentsContainer';},get CLASS_EDITOR(){return'htComments';},get CLASS_INPUT(){return'htCommentTextArea';},get CLASS_CELL(){return'htCommentCell';}});;},{"helpers/dom/element":44}],62:[function(require,module,exports){"use strict";Object.defineProperties(exports,{Comments:{get:function(){return Comments;}},__esModule:{value:true}});var $___46__46__47__46__46__47_helpers_47_dom_47_element__,$___46__46__47__46__46__47_eventManager__,$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__,$___46__46__47__46__46__47_plugins__,$___46__46__47__95_base__,$__commentEditor__;var $__0=($___46__46__47__46__46__47_helpers_47_dom_47_element__=require("helpers/dom/element"),$___46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_element__||{default:$___46__46__47__46__46__47_helpers_47_dom_47_element__}),addClass=$__0.addClass,closest=$__0.closest,getWindowScrollLeft=$__0.getWindowScrollLeft,getWindowScrollTop=$__0.getWindowScrollTop,hasClass=$__0.hasClass,offset=$__0.offset;var EventManager=($___46__46__47__46__46__47_eventManager__=require("eventManager"),$___46__46__47__46__46__47_eventManager__&&$___46__46__47__46__46__47_eventManager__.__esModule&&$___46__46__47__46__46__47_eventManager__||{default:$___46__46__47__46__46__47_eventManager__}).EventManager;var WalkontableCellCoords=($___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__=require("3rdparty/walkontable/src/cell/coords"),$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__&&$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__.__esModule&&$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__||{default:$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__}).WalkontableCellCoords;var $__3=($___46__46__47__46__46__47_plugins__=require("plugins"),$___46__46__47__46__46__47_plugins__&&$___46__46__47__46__46__47_plugins__.__esModule&&$___46__46__47__46__46__47_plugins__||{default:$___46__46__47__46__46__47_plugins__}),registerPlugin=$__3.registerPlugin,getPlugin=$__3.getPlugin;var BasePlugin=($___46__46__47__95_base__=require("_base"),$___46__46__47__95_base__&&$___46__46__47__95_base__.__esModule&&$___46__46__47__95_base__||{default:$___46__46__47__95_base__}).default;var CommentEditor=($__commentEditor__=require("commentEditor"),$__commentEditor__&&$__commentEditor__.__esModule&&$__commentEditor__||{default:$__commentEditor__}).CommentEditor;var Comments=function Comments(hotInstance){$traceurRuntime.superConstructor($Comments).call(this,hotInstance);this.editor=null;this.eventManager=null;this.range={};this.mouseDown=false;this.contextMenuEvent=false;this.timer=null;};var $Comments=Comments;($traceurRuntime.createClass)(Comments,{isEnabled:function(){return this.hot.getSettings().comments;},enablePlugin:function(){var $__6=this;if(this.enabled){return;}
if(!this.editor){this.editor=new CommentEditor();}
if(!this.eventManager){this.eventManager=new EventManager(this);}
this.addHook('afterContextMenuDefaultOptions',(function(options){return $__6.addToContextMenu(options);}));this.addHook('afterRenderer',(function(TD,row,col,prop,value,cellProperties){return $__6.onAfterRenderer(TD,cellProperties);}));this.addHook('afterScrollVertically',(function(){return $__6.refreshEditorPosition();}));this.addHook('afterColumnResize',(function(){return $__6.refreshEditorPosition();}));this.addHook('afterRowResize',(function(){return $__6.refreshEditorPosition();}));this.registerListeners();$traceurRuntime.superGet(this,$Comments.prototype,"enablePlugin").call(this);},disablePlugin:function(){$traceurRuntime.superGet(this,$Comments.prototype,"disablePlugin").call(this);},registerListeners:function(){var $__6=this;this.eventManager.addEventListener(document,'mouseover',(function(event){return $__6.onMouseOver(event);}));this.eventManager.addEventListener(document,'mousedown',(function(event){return $__6.onMouseDown(event);}));this.eventManager.addEventListener(document,'mousemove',(function(event){return $__6.onMouseMove(event);}));this.eventManager.addEventListener(document,'mouseup',(function(event){return $__6.onMouseUp(event);}));this.eventManager.addEventListener(this.editor.getInputElement(),'blur',(function(event){return $__6.onEditorBlur(event);}));},setRange:function(range){this.range=range;},clearRange:function(){this.range={};},targetIsCellWithComment:function(event){return hasClass(event.target,'htCommentCell')&&closest(event.target,[this.hot.rootElement])?true:false;},targetIsCommentTextArea:function(event){return this.editor.getInputElement()===event.target;},saveComment:function(){if(!this.range.from){throw new Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');}
var comment=this.editor.getValue();var row=this.range.from.row;var col=this.range.from.col;this.hot.setCellMeta(row,col,'comment',comment);this.hot.render();},saveCommentAtCell:function(row,col){this.setRange({from:new WalkontableCellCoords(row,col)});this.saveComment();},removeComment:function(){if(!this.range.from){throw new Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');}
this.hot.removeCellMeta(this.range.from.row,this.range.from.col,'comment');this.hot.render();this.hide();},removeCommentAtCell:function(row,col){this.setRange({from:new WalkontableCellCoords(row,col)});this.removeComment();},show:function(){if(!this.range.from){throw new Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');}
var meta=this.hot.getCellMeta(this.range.from.row,this.range.from.col);this.refreshEditorPosition(true);this.editor.setValue(meta.comment||'');this.editor.show();return true;},showAtCell:function(row,col){this.setRange({from:new WalkontableCellCoords(row,col)});return this.show();},hide:function(){this.editor.hide();},refreshEditorPosition:function(){var force=arguments[0]!==(void 0)?arguments[0]:false;if(!force&&(!this.range.from||!this.editor.isVisible())){return;}
var TD=this.hot.view.wt.wtTable.getCell(this.range.from);var cellOffset=offset(TD);var lastColWidth=this.hot.getColWidth(this.range.from.col);var cellTopOffset=cellOffset.top;var cellLeftOffset=cellOffset.left;var verticalCompensation=0;var horizontalCompensation=0;if(this.hot.view.wt.wtViewport.hasVerticalScroll()){cellTopOffset=cellTopOffset-this.hot.view.wt.wtOverlays.topOverlay.getScrollPosition();verticalCompensation=20;}
if(this.hot.view.wt.wtViewport.hasHorizontalScroll()){cellLeftOffset=cellLeftOffset-this.hot.view.wt.wtOverlays.leftOverlay.getScrollPosition();horizontalCompensation=20;}
var x=cellLeftOffset+lastColWidth;var y=cellTopOffset;var rect=this.hot.view.wt.wtTable.holder.getBoundingClientRect();var holderPos={left:rect.left+getWindowScrollLeft()+horizontalCompensation,right:rect.right+getWindowScrollLeft()-15,top:rect.top+getWindowScrollTop()+verticalCompensation,bottom:rect.bottom+getWindowScrollTop()};if(x<=holderPos.left||x>holderPos.right||y<=holderPos.top||y>holderPos.bottom){this.hide();}else{this.editor.setPosition(x,y);}},onMouseDown:function(event){this.mouseDown=true;if(!this.hot.view||!this.hot.view.wt){return;}
if(!this.contextMenuEvent&&!this.targetIsCommentTextArea(event)&&!this.targetIsCellWithComment(event)){this.hide();}
this.contextMenuEvent=false;},onMouseOver:function(event){if(this.mouseDown||this.editor.isFocused()){return;}
if(this.targetIsCellWithComment(event)){var coordinates=this.hot.view.wt.wtTable.getCoords(event.target);var range={from:new WalkontableCellCoords(coordinates.row,coordinates.col)};this.setRange(range);this.show();}else if(!this.targetIsCommentTextArea(event)&&!this.editor.isFocused()){this.hide();}},onMouseMove:function(event){var $__6=this;if(this.targetIsCommentTextArea(event)){this.mouseDown=true;clearTimeout(this.timer);this.timer=setTimeout((function(){$__6.mouseDown=false;}),200);}},onMouseUp:function(event){this.mouseDown=false;},onAfterRenderer:function(TD,cellProperties){if(cellProperties.comment){addClass(TD,cellProperties.commentedCellClassName);}},onEditorBlur:function(event){this.saveComment();},checkSelectionCommentsConsistency:function(){var selected=this.hot.getSelectedRange();if(!selected){return false;}
var hasComment=false;var cell=selected.from;if(this.hot.getCellMeta(cell.row,cell.col).comment){hasComment=true;}
return hasComment;},onContextMenuAddComment:function(){var $__6=this;var coords=this.hot.getSelectedRange();this.contextMenuEvent=true;this.setRange({from:coords.from});this.show();setTimeout((function(){if($__6.hot){$__6.hot.deselectCell();$__6.editor.focus();}}),10);},onContextMenuRemoveComment:function(key,selection){this.contextMenuEvent=true;this.removeCommentAtCell(selection.start.row,selection.start.col);},addToContextMenu:function(defaultOptions){var $__6=this;defaultOptions.items.push(Handsontable.plugins.ContextMenu.SEPARATOR,{key:'commentsAddEdit',name:(function(){return $__6.checkSelectionCommentsConsistency()?'Edit Comment':'Add Comment';}),callback:(function(){return $__6.onContextMenuAddComment();}),disabled:function(){return this.getSelected()?false:true;}},{key:'commentsRemove',name:function(){return'Delete Comment';},callback:(function(key,selection){return $__6.onContextMenuRemoveComment(key,selection);}),disabled:(function(){return!$__6.checkSelectionCommentsConsistency();})});},destroy:function(){if(this.editor){this.editor.destroy();}
$traceurRuntime.superGet(this,$Comments.prototype,"destroy").call(this);}},{},BasePlugin);;registerPlugin('comments',Comments);},{"3rdparty/walkontable/src/cell/coords":5,"_base":56,"commentEditor":61,"eventManager":40,"helpers/dom/element":44,"plugins":55}],63:[function(require,module,exports){"use strict";Object.defineProperties(exports,{CommandExecutor:{get:function(){return CommandExecutor;}},__esModule:{value:true}});var $___46__46__47__46__46__47_helpers_47_array__;var arrayEach=($___46__46__47__46__46__47_helpers_47_array__=require("helpers/array"),$___46__46__47__46__46__47_helpers_47_array__&&$___46__46__47__46__46__47_helpers_47_array__.__esModule&&$___46__46__47__46__46__47_helpers_47_array__||{default:$___46__46__47__46__46__47_helpers_47_array__}).arrayEach;var CommandExecutor=function CommandExecutor(hotInstance){this.hot=hotInstance;this.commands={};this.commonCallback=null;};($traceurRuntime.createClass)(CommandExecutor,{registerCommand:function(name,commandDescriptor){this.commands[name]=commandDescriptor;},setCommonCallback:function(callback){this.commonCallback=callback;},execute:function(commandName){for(var params=[],$__3=1;$__3<arguments.length;$__3++)
params[$__3-1]=arguments[$__3];var $__1=this;var commandSplit=commandName.split(':');commandName=commandSplit[0];var subCommandName=commandSplit.length===2?commandSplit[1]:null;var command=this.commands[commandName];if(!command){throw new Error(("Menu command '"+commandName+"' not exists."));}
if(subCommandName&&command.submenu){command=findSubCommand(subCommandName,command.submenu.items);}
if(command.disabled===true){return;}
if(typeof command.disabled=='function'&&command.disabled.call(this.hot)===true){return;}
if(command.hasOwnProperty('submenu')){return;}
var callbacks=[];if(typeof command.callback==='function'){callbacks.push(command.callback);}
if(typeof this.commonCallback==='function'){callbacks.push(this.commonCallback);}
params.unshift(commandSplit.join(':'));arrayEach(callbacks,(function(callback){return callback.apply($__1.hot,params);}));}},{});function findSubCommand(subCommandName,subCommands){var command;arrayEach(subCommands,(function(cmd){var cmds=cmd.key?cmd.key.split(':'):null;if(Array.isArray(cmds)&&cmds[1]===subCommandName){command=cmd;return false;}}));return command;};},{"helpers/array":41}],64:[function(require,module,exports){"use strict";Object.defineProperties(exports,{ContextMenu:{get:function(){return ContextMenu;}},__esModule:{value:true}});var $___46__46__47__95_base__,$___46__46__47__46__46__47_helpers_47_array__,$__commandExecutor__,$___46__46__47__46__46__47_eventManager__,$___46__46__47__46__46__47_helpers_47_dom_47_element__,$__itemsFactory__,$__menu__,$___46__46__47__46__46__47_helpers_47_object__,$___46__46__47__46__46__47_plugins__,$___46__46__47__46__46__47_helpers_47_dom_47_event__,$__predefinedItems__;var BasePlugin=($___46__46__47__95_base__=require("_base"),$___46__46__47__95_base__&&$___46__46__47__95_base__.__esModule&&$___46__46__47__95_base__||{default:$___46__46__47__95_base__}).default;var arrayEach=($___46__46__47__46__46__47_helpers_47_array__=require("helpers/array"),$___46__46__47__46__46__47_helpers_47_array__&&$___46__46__47__46__46__47_helpers_47_array__.__esModule&&$___46__46__47__46__46__47_helpers_47_array__||{default:$___46__46__47__46__46__47_helpers_47_array__}).arrayEach;var CommandExecutor=($__commandExecutor__=require("commandExecutor"),$__commandExecutor__&&$__commandExecutor__.__esModule&&$__commandExecutor__||{default:$__commandExecutor__}).CommandExecutor;var EventManager=($___46__46__47__46__46__47_eventManager__=require("eventManager"),$___46__46__47__46__46__47_eventManager__&&$___46__46__47__46__46__47_eventManager__.__esModule&&$___46__46__47__46__46__47_eventManager__||{default:$___46__46__47__46__46__47_eventManager__}).EventManager;var hasClass=($___46__46__47__46__46__47_helpers_47_dom_47_element__=require("helpers/dom/element"),$___46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_element__||{default:$___46__46__47__46__46__47_helpers_47_dom_47_element__}).hasClass;var ItemsFactory=($__itemsFactory__=require("itemsFactory"),$__itemsFactory__&&$__itemsFactory__.__esModule&&$__itemsFactory__||{default:$__itemsFactory__}).ItemsFactory;var Menu=($__menu__=require("menu"),$__menu__&&$__menu__.__esModule&&$__menu__||{default:$__menu__}).Menu;var $__7=($___46__46__47__46__46__47_helpers_47_object__=require("helpers/object"),$___46__46__47__46__46__47_helpers_47_object__&&$___46__46__47__46__46__47_helpers_47_object__.__esModule&&$___46__46__47__46__46__47_helpers_47_object__||{default:$___46__46__47__46__46__47_helpers_47_object__}),objectEach=$__7.objectEach,mixin=$__7.mixin;var registerPlugin=($___46__46__47__46__46__47_plugins__=require("plugins"),$___46__46__47__46__46__47_plugins__&&$___46__46__47__46__46__47_plugins__.__esModule&&$___46__46__47__46__46__47_plugins__||{default:$___46__46__47__46__46__47_plugins__}).registerPlugin;var stopPropagation=($___46__46__47__46__46__47_helpers_47_dom_47_event__=require("helpers/dom/event"),$___46__46__47__46__46__47_helpers_47_dom_47_event__&&$___46__46__47__46__46__47_helpers_47_dom_47_event__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_event__||{default:$___46__46__47__46__46__47_helpers_47_dom_47_event__}).stopPropagation;var $__10=($__predefinedItems__=require("predefinedItems"),$__predefinedItems__&&$__predefinedItems__.__esModule&&$__predefinedItems__||{default:$__predefinedItems__}),ROW_ABOVE=$__10.ROW_ABOVE,ROW_BELOW=$__10.ROW_BELOW,COLUMN_LEFT=$__10.COLUMN_LEFT,COLUMN_RIGHT=$__10.COLUMN_RIGHT,REMOVE_ROW=$__10.REMOVE_ROW,REMOVE_COLUMN=$__10.REMOVE_COLUMN,UNDO=$__10.UNDO,REDO=$__10.REDO,READ_ONLY=$__10.READ_ONLY,ALIGNMENT=$__10.ALIGNMENT,SEPARATOR=$__10.SEPARATOR,predefinedItems=$__10.predefinedItems;var ContextMenu=function ContextMenu(hotInstance){$traceurRuntime.superConstructor($ContextMenu).call(this,hotInstance);this.eventManager=new EventManager(this);this.commandExecutor=new CommandExecutor(this.hot);this.itemsFactory=null;this.menu=null;};var $ContextMenu=ContextMenu;($traceurRuntime.createClass)(ContextMenu,{isEnabled:function(){return this.hot.getSettings().contextMenu;},enablePlugin:function(){var $__11=this;if(this.enabled){return;}
this.itemsFactory=new ItemsFactory(this.hot,$ContextMenu.DEFAULT_ITEMS);var settings=this.hot.getSettings().contextMenu;var predefinedItems={items:this.itemsFactory.getVisibleItems(settings)};this.registerEvents();if(typeof settings.callback==='function'){this.commandExecutor.setCommonCallback(settings.callback);}
$traceurRuntime.superGet(this,$ContextMenu.prototype,"enablePlugin").call(this);this.callOnPluginsReady((function(){$__11.hot.runHooks('afterContextMenuDefaultOptions',predefinedItems);$__11.itemsFactory.setPredefinedItems(predefinedItems.items);var menuItems=$__11.itemsFactory.getVisibleItems(settings);$__11.menu=new Menu($__11.hot,{className:'htContextMenu'});$__11.menu.setMenuItems(menuItems);$__11.menu.addLocalHook('afterOpen',(function(){return $__11.hot.runHooks('afterContextMenuShow',$__11);}));$__11.menu.addLocalHook('afterClose',(function(){return $__11.hot.runHooks('afterContextMenuHide',$__11);}));$__11.menu.addLocalHook('executeCommand',(function(){for(var params=[],$__13=0;$__13<arguments.length;$__13++)
params[$__13]=arguments[$__13];return $__11.executeCommand.apply($__11,params);}));arrayEach(menuItems,(function(command){return $__11.commandExecutor.registerCommand(command.key,command);}));}));},disablePlugin:function(){this.close();if(this.menu){this.menu.destroy();this.menu=null;}
$traceurRuntime.superGet(this,$ContextMenu.prototype,"disablePlugin").call(this);},registerEvents:function(){var $__11=this;this.eventManager.addEventListener(this.hot.rootElement,'contextmenu',(function(event){return $__11.onContextMenu(event);}));},open:function(event){if(!this.menu){return;}
this.menu.open();this.menu.setPosition(event);this.menu.hotMenu.isHotTableEnv=this.hot.isHotTableEnv;Handsontable.eventManager.isHotTableEnv=this.hot.isHotTableEnv;},close:function(){if(!this.menu){return;}
this.menu.close();},executeCommand:function(){for(var params=[],$__13=0;$__13<arguments.length;$__13++)
params[$__13]=arguments[$__13];this.commandExecutor.execute.apply(this.commandExecutor,params);},destroy:function(){this.close();if(this.menu){this.menu.destroy();}
$traceurRuntime.superGet(this,$ContextMenu.prototype,"destroy").call(this);},onContextMenu:function(event){var settings=this.hot.getSettings();var showRowHeaders=settings.rowHeaders;var showColHeaders=settings.colHeaders;function isValidElement(element){return element.nodeName==='TD'||element.parentNode.nodeName==='TD';}
var element=event.realTarget;this.close();event.preventDefault();stopPropagation(event);if(!(showRowHeaders||showColHeaders)){if(!isValidElement(element)&&!(hasClass(element,'current')&&hasClass(element,'wtBorder'))){return;}}else if(showRowHeaders&&showColHeaders){var containsCornerHeader=element.parentNode.querySelectorAll('.cornerHeader').length>0;if(containsCornerHeader){return;}}
this.open(event);}},{get DEFAULT_ITEMS(){return[ROW_ABOVE,ROW_BELOW,SEPARATOR,COLUMN_LEFT,COLUMN_RIGHT,SEPARATOR,REMOVE_ROW,REMOVE_COLUMN,SEPARATOR,UNDO,REDO,SEPARATOR,READ_ONLY,SEPARATOR,ALIGNMENT];}},BasePlugin);ContextMenu.SEPARATOR={name:SEPARATOR};Handsontable.hooks.register('afterContextMenuDefaultOptions');Handsontable.hooks.register('afterContextMenuShow');Handsontable.hooks.register('afterContextMenuHide');Handsontable.hooks.register('afterContextMenuExecute');;registerPlugin('contextMenu',ContextMenu);},{"_base":56,"commandExecutor":63,"eventManager":40,"helpers/array":41,"helpers/dom/element":44,"helpers/dom/event":45,"helpers/object":49,"itemsFactory":66,"menu":67,"plugins":55,"predefinedItems":68}],65:[function(require,module,exports){"use strict";Object.defineProperties(exports,{Cursor:{get:function(){return Cursor;}},__esModule:{value:true}});var $___46__46__47__46__46__47_helpers_47_dom_47_element__,$___46__46__47__46__46__47_helpers_47_dom_47_event__;var $__0=($___46__46__47__46__46__47_helpers_47_dom_47_element__=require("helpers/dom/element"),$___46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_element__||{default:$___46__46__47__46__46__47_helpers_47_dom_47_element__}),getWindowScrollLeft=$__0.getWindowScrollLeft,getWindowScrollTop=$__0.getWindowScrollTop;var $__1=($___46__46__47__46__46__47_helpers_47_dom_47_event__=require("helpers/dom/event"),$___46__46__47__46__46__47_helpers_47_dom_47_event__&&$___46__46__47__46__46__47_helpers_47_dom_47_event__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_event__||{default:$___46__46__47__46__46__47_helpers_47_dom_47_event__}),pageX=$__1.pageX,pageY=$__1.pageY;var Cursor=function Cursor(object){var windowScrollTop=getWindowScrollTop();var windowScrollLeft=getWindowScrollLeft();var top,topRelative;var left,leftRelative;var scrollTop,scrollLeft;var cellHeight,cellWidth;this.type=this.getSourceType(object);if(this.type==='literal'){top=parseInt(object.top,10);left=parseInt(object.left,10);cellHeight=object.height;cellWidth=object.width;}else if(this.type==='event'){top=parseInt(pageY(object),10);left=parseInt(pageX(object),10);cellHeight=object.target.clientHeight;cellWidth=object.target.clientWidth;}
topRelative=top-windowScrollTop;leftRelative=left-windowScrollLeft;scrollTop=windowScrollTop;scrollLeft=windowScrollLeft;this.top=top;this.topRelative=topRelative;this.left=left;this.leftRelative=leftRelative;this.scrollTop=scrollTop;this.scrollLeft=scrollLeft;this.cellHeight=cellHeight;this.cellWidth=cellWidth;};($traceurRuntime.createClass)(Cursor,{getSourceType:function(object){var type='literal';if(object instanceof Event){type='event';}
return type;},fitsAbove:function(element){return this.topRelative>=element.offsetHeight;},fitsBelow:function(element){var viewportHeight=arguments[1]!==(void 0)?arguments[1]:window.innerHeight;return this.topRelative+element.offsetHeight<=viewportHeight;},fitsOnRight:function(element){var viewportWidth=arguments[1]!==(void 0)?arguments[1]:window.innerWidth;return this.leftRelative+this.cellWidth+element.offsetWidth<=viewportWidth;},fitsOnLeft:function(element){return this.leftRelative>=element.offsetWidth;}},{});;Handsontable.plugins.utils=Handsontable.plugins.utils||{};Handsontable.plugins.utils.Cursor=Cursor;},{"helpers/dom/element":44,"helpers/dom/event":45}],66:[function(require,module,exports){"use strict";Object.defineProperties(exports,{ItemsFactory:{get:function(){return ItemsFactory;}},__esModule:{value:true}});var $___46__46__47__46__46__47_helpers_47_object__,$___46__46__47__46__46__47_helpers_47_array__,$__predefinedItems__;var $__0=($___46__46__47__46__46__47_helpers_47_object__=require("helpers/object"),$___46__46__47__46__46__47_helpers_47_object__&&$___46__46__47__46__46__47_helpers_47_object__.__esModule&&$___46__46__47__46__46__47_helpers_47_object__||{default:$___46__46__47__46__46__47_helpers_47_object__}),objectEach=$__0.objectEach,isObject=$__0.isObject,extend=$__0.extend;var arrayEach=($___46__46__47__46__46__47_helpers_47_array__=require("helpers/array"),$___46__46__47__46__46__47_helpers_47_array__&&$___46__46__47__46__46__47_helpers_47_array__.__esModule&&$___46__46__47__46__46__47_helpers_47_array__||{default:$___46__46__47__46__46__47_helpers_47_array__}).arrayEach;var $__2=($__predefinedItems__=require("predefinedItems"),$__predefinedItems__&&$__predefinedItems__.__esModule&&$__predefinedItems__||{default:$__predefinedItems__}),SEPARATOR=$__2.SEPARATOR,ITEMS=$__2.ITEMS,predefinedItems=$__2.predefinedItems;var ItemsFactory=function ItemsFactory(hotInstance){var orderPattern=arguments[1]!==(void 0)?arguments[1]:null;this.hot=hotInstance;this.predefinedItems=predefinedItems();this.defaultOrderPattern=orderPattern;};($traceurRuntime.createClass)(ItemsFactory,{setPredefinedItems:function(predefinedItems){var $__3=this;var items={};this.defaultOrderPattern.length=0;objectEach(predefinedItems,(function(value,key){var menuItemKey='';if(value.name===SEPARATOR){items[SEPARATOR]=value;menuItemKey=SEPARATOR;}else if(isNaN(parseInt(key,10))){value.key=value.key===void 0?key:value.key;items[key]=value;menuItemKey=value.key;}else{items[value.key]=value;menuItemKey=value.key;}
$__3.defaultOrderPattern.push(menuItemKey);}));this.predefinedItems=items;},getVisibleItems:function(){var pattern=arguments[0]!==(void 0)?arguments[0]:null;var $__3=this;var visibleItems={};objectEach(this.predefinedItems,(function(value,key){if(!value.hidden||value.hidden&&!value.hidden.apply($__3.hot)){visibleItems[key]=value;}}));return getItems(pattern,this.defaultOrderPattern,visibleItems);},getItems:function(){var pattern=arguments[0]!==(void 0)?arguments[0]:null;return getItems(pattern,this.defaultOrderPattern,this.predefinedItems);}},{});function getItems(){var pattern=arguments[0]!==(void 0)?arguments[0]:null;var defaultPattern=arguments[1]!==(void 0)?arguments[1]:[];var items=arguments[2]!==(void 0)?arguments[2]:{};var result=[];if(pattern&&pattern.items){pattern=pattern.items;}else if(!Array.isArray(pattern)){pattern=defaultPattern;}
if(isObject(pattern)){objectEach(pattern,(function(value,key){var item=items[typeof value==='string'?value:key];if(!item){item=value;}
if(isObject(value)){extend(item,value);}else if(typeof item==='string'){item={name:item};}
if(item.key===void 0){item.key=key;}
result.push(item);}));}else{arrayEach(pattern,(function(name,key){var item=items[name];if(!item&&ITEMS.indexOf(name)>=0){return;}
if(!item){item={name:name,key:key+''};}
if(isObject(name)){extend(item,name);}
if(item.key===void 0){item.key=key;}
result.push(item);}));}
if(result[0].name===SEPARATOR){result.shift();}
return result;};},{"helpers/array":41,"helpers/object":49,"predefinedItems":68}],67:[function(require,module,exports){"use strict";Object.defineProperties(exports,{Menu:{get:function(){return Menu;}},__esModule:{value:true}});var $___46__46__47__46__46__47_helpers_47_dom_47_element__,$___46__46__47__46__46__47_helpers_47_array__,$__cursor__,$___46__46__47__46__46__47_eventManager__,$___46__46__47__46__46__47_helpers_47_object__,$__utils__,$___46__46__47__46__46__47_helpers_47_unicode__,$___46__46__47__46__46__47_pluginHooks__,$__predefinedItems__,$___46__46__47__46__46__47_helpers_47_dom_47_event__;var $__0=($___46__46__47__46__46__47_helpers_47_dom_47_element__=require("helpers/dom/element"),$___46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_element__||{default:$___46__46__47__46__46__47_helpers_47_dom_47_element__}),addClass=$__0.addClass,empty=$__0.empty,fastInnerHTML=$__0.fastInnerHTML,getComputedStyle=$__0.getComputedStyle,getScrollbarWidth=$__0.getScrollbarWidth,getWindowScrollLeft=$__0.getWindowScrollLeft,getWindowScrollTop=$__0.getWindowScrollTop,hasClass=$__0.hasClass,isChildOf=$__0.isChildOf,removeClass=$__0.removeClass;var arrayEach=($___46__46__47__46__46__47_helpers_47_array__=require("helpers/array"),$___46__46__47__46__46__47_helpers_47_array__&&$___46__46__47__46__46__47_helpers_47_array__.__esModule&&$___46__46__47__46__46__47_helpers_47_array__||{default:$___46__46__47__46__46__47_helpers_47_array__}).arrayEach;var Cursor=($__cursor__=require("cursor"),$__cursor__&&$__cursor__.__esModule&&$__cursor__||{default:$__cursor__}).Cursor;var EventManager=($___46__46__47__46__46__47_eventManager__=require("eventManager"),$___46__46__47__46__46__47_eventManager__&&$___46__46__47__46__46__47_eventManager__.__esModule&&$___46__46__47__46__46__47_eventManager__||{default:$___46__46__47__46__46__47_eventManager__}).EventManager;var $__4=($___46__46__47__46__46__47_helpers_47_object__=require("helpers/object"),$___46__46__47__46__46__47_helpers_47_object__&&$___46__46__47__46__46__47_helpers_47_object__.__esModule&&$___46__46__47__46__46__47_helpers_47_object__||{default:$___46__46__47__46__46__47_helpers_47_object__}),extend=$__4.extend,isObject=$__4.isObject,objectEach=$__4.objectEach,mixin=$__4.mixin;var $__5=($__utils__=require("utils"),$__utils__&&$__utils__.__esModule&&$__utils__||{default:$__utils__}),isSeparator=$__5.isSeparator,isDisabled=$__5.isDisabled,isSelectionDisabled=$__5.isSelectionDisabled,hasSubMenu=$__5.hasSubMenu,normalizeSelection=$__5.normalizeSelection;var KEY_CODES=($___46__46__47__46__46__47_helpers_47_unicode__=require("helpers/unicode"),$___46__46__47__46__46__47_helpers_47_unicode__&&$___46__46__47__46__46__47_helpers_47_unicode__.__esModule&&$___46__46__47__46__46__47_helpers_47_unicode__||{default:$___46__46__47__46__46__47_helpers_47_unicode__}).KEY_CODES;var localHooks=($___46__46__47__46__46__47_pluginHooks__=require("pluginHooks"),$___46__46__47__46__46__47_pluginHooks__&&$___46__46__47__46__46__47_pluginHooks__.__esModule&&$___46__46__47__46__46__47_pluginHooks__||{default:$___46__46__47__46__46__47_pluginHooks__}).localHooks;var $__8=($__predefinedItems__=require("predefinedItems"),$__predefinedItems__&&$__predefinedItems__.__esModule&&$__predefinedItems__||{default:$__predefinedItems__}),SEPARATOR=$__8.SEPARATOR,predefinedItems=$__8.predefinedItems;var $__9=($___46__46__47__46__46__47_helpers_47_dom_47_event__=require("helpers/dom/event"),$___46__46__47__46__46__47_helpers_47_dom_47_event__&&$___46__46__47__46__46__47_helpers_47_dom_47_event__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_event__||{default:$___46__46__47__46__46__47_helpers_47_dom_47_event__}),stopPropagation=$__9.stopPropagation,stopImmediatePropagation=$__9.stopImmediatePropagation,pageX=$__9.pageX,pageY=$__9.pageY;var Menu=function Menu(hotInstance){var options=arguments[1]!==(void 0)?arguments[1]:{parent:null,name:null,className:'',keepInViewport:true};this.hot=hotInstance;this.options=options;this.eventManager=new EventManager(this);this.container=this.createContainer(this.options.name);this.hotMenu=null;this.hotSubMenus={};this.parentMenu=this.options.parent||null;this.menuItems=null;this.origOutsideClickDeselects=null;this._afterScrollCallback=null;this.registerEvents();};var $Menu=Menu;($traceurRuntime.createClass)(Menu,{registerEvents:function(){var $__10=this;this.eventManager.addEventListener(document.documentElement,'mousedown',(function(event){return $__10.onDocumentMouseDown(event);}));},setMenuItems:function(menuItems){this.menuItems=menuItems;},isSubMenu:function(){return this.parentMenu!==null;},open:function(){var $__10=this;this.container.removeAttribute('style');this.container.style.display='block';var settings={data:this.menuItems,colHeaders:false,colWidths:[200],autoRowSize:false,readOnly:true,copyPaste:false,columns:[{data:'name',renderer:(function(hot,TD,row,col,prop,value){return $__10.menuItemRenderer(hot,TD,row,col,prop,value);})}],renderAllRows:true,beforeKeyDown:(function(event){return $__10.onBeforeKeyDown(event);}),afterOnCellMouseOver:(function(event,coords,TD){return $__10.openSubMenu(coords.row);})};this.origOutsideClickDeselects=this.hot.getSettings().outsideClickDeselects;this.hot.getSettings().outsideClickDeselects=false;this.hotMenu=new Handsontable.Core(this.container,settings);this.hotMenu.addHook('afterInit',(function(){return $__10.onAfterInit();}));this.hotMenu.init();this.hotMenu.listen();this.blockMainTableCallbacks();this.runLocalHooks('afterOpen');},close:function(){var closeParent=arguments[0]!==(void 0)?arguments[0]:false;if(!this.isOpened()){return;}
if(closeParent&&this.parentMenu){this.parentMenu.close();}else{this.closeAllSubMenus();this.container.style.display='none';this.releaseMainTableCallbacks();this.hotMenu.destroy();this.hotMenu=null;this.hot.getSettings().outsideClickDeselects=this.origOutsideClickDeselects;this.hot.listen();this.runLocalHooks('afterClose');}},openSubMenu:function(row){var cell=this.hotMenu.getCell(row,0);this.closeAllSubMenus();if(!cell||!hasSubMenu(cell)){return false;}
var dataItem=this.hotMenu.getData()[row];var subMenu=new $Menu(this.hot,{parent:this,name:dataItem.name,className:this.options.className});subMenu.setMenuItems(dataItem.submenu.items);subMenu.open();subMenu.setPosition(cell.getBoundingClientRect());this.hotSubMenus[dataItem.key]=subMenu;return subMenu;},closeSubMenu:function(row){var dataItem=this.hotMenu.getData()[row];var menus=this.hotSubMenus[dataItem.key];if(menus){menus.destroy();delete this.hotSubMenus[dataItem.key];}},closeAllSubMenus:function(){var $__10=this;arrayEach(this.hotMenu.getData(),(function(value,row){return $__10.closeSubMenu(row);}));},isAllSubMenusClosed:function(){return Object.keys(this.hotSubMenus).length===0;},destroy:function(){this.clearLocalHooks();this.close();this.parentMenu=null;this.eventManager.destroy();},isOpened:function(){return this.hotMenu!==null;},executeCommand:function(){var event=arguments[0];if(!this.isOpened()||!this.hotMenu.getSelected()){return;}
var selectedItem=this.hotMenu.getData()[this.hotMenu.getSelected()[0]];this.runLocalHooks('select',selectedItem,event);if(selectedItem.isCommand===false){return;}
var selRange=this.hot.getSelectedRange();var normalizedSelection=selRange?normalizeSelection(selRange):{};this.runLocalHooks('executeCommand',selectedItem.key,normalizedSelection,event);if(this.isSubMenu()){this.parentMenu.runLocalHooks('executeCommand',selectedItem.key,normalizedSelection,event);}
this.close(true);},setPosition:function(coords){var cursor=new Cursor(coords);if(this.options.keepInViewport){if(cursor.fitsBelow(this.container)){this.setPositionBelowCursor(cursor);}else if(cursor.fitsAbove(this.container)){this.setPositionAboveCursor(cursor);}else{this.setPositionBelowCursor(cursor);}
if(cursor.fitsOnRight(this.container)){this.setPositionOnRightOfCursor(cursor);}else{this.setPositionOnLeftOfCursor(cursor);}}else{this.setPositionBelowCursor(cursor);this.setPositionOnRightOfCursor(cursor);}},setPositionAboveCursor:function(cursor){var top=cursor.top-this.container.offsetHeight;if(this.isSubMenu()){top=window.scrollY+cursor.top+cursor.cellHeight-this.container.offsetHeight+3;}
this.container.style.top=top+'px';},setPositionBelowCursor:function(cursor){var top=cursor.top-1;if(this.isSubMenu()){top=cursor.top+window.scrollY-1;}
this.container.style.top=top+'px';},setPositionOnRightOfCursor:function(cursor){var left;if(this.isSubMenu()){left=window.scrollX+1+cursor.left+cursor.cellWidth;}else{left=1+cursor.left;}
this.container.style.left=left+'px';},setPositionOnLeftOfCursor:function(cursor){this.container.style.left=(cursor.left-this.container.offsetWidth+getScrollbarWidth()+4)+'px';},selectFirstCell:function(){var cell=this.hotMenu.getCell(0,0);if(isSeparator(cell)||isDisabled(cell)||isSelectionDisabled(cell)){this.selectNextCell(0,0);}else{this.hotMenu.selectCell(0,0);}},selectLastCell:function(){var lastRow=this.hotMenu.countRows()-1;var cell=this.hotMenu.getCell(lastRow,0);if(isSeparator(cell)||isDisabled(cell)||isSelectionDisabled(cell)){this.selectPrevCell(lastRow,0);}else{this.hotMenu.selectCell(lastRow,0);}},selectNextCell:function(row,col){var nextRow=row+1;var cell=nextRow<this.hotMenu.countRows()?this.hotMenu.getCell(nextRow,col):null;if(!cell){return;}
if(isSeparator(cell)||isDisabled(cell)||isSelectionDisabled(cell)){this.selectNextCell(nextRow,col);}else{this.hotMenu.selectCell(nextRow,col);}},selectPrevCell:function(row,col){var prevRow=row-1;var cell=prevRow>=0?this.hotMenu.getCell(prevRow,col):null;if(!cell){return;}
if(isSeparator(cell)||isDisabled(cell)||isSelectionDisabled(cell)){this.selectPrevCell(prevRow,col);}else{this.hotMenu.selectCell(prevRow,col);}},menuItemRenderer:function(hot,TD,row,col,prop,value){var $__10=this;var item=hot.getData()[row];var wrapper=document.createElement('div');var isSubMenu=(function(item){return item.hasOwnProperty('submenu');});var itemIsSeparator=(function(item){return new RegExp(SEPARATOR,'i').test(item.name);});var itemIsDisabled=(function(item){return item.disabled===true||(typeof item.disabled=='function'&&item.disabled.call($__10.hot)===true);});var itemIsSelectionDisabled=(function(item){return item.disableSelection;});if(typeof value==='function'){value=value.call(this.hot);}
empty(TD);addClass(wrapper,'htItemWrapper');TD.appendChild(wrapper);if(itemIsSeparator(item)){addClass(TD,'htSeparator');}else if(typeof item.renderer==='function'){addClass(TD,'htCustomMenuRenderer');TD.appendChild(item.renderer(hot,wrapper,row,col,prop,value));}else{fastInnerHTML(wrapper,value);}
if(itemIsDisabled(item)){addClass(TD,'htDisabled');this.eventManager.addEventListener(wrapper,'mouseenter',(function(){return hot.deselectCell();}));}else if(itemIsSelectionDisabled(item)){addClass(TD,'htSelectionDisabled');this.eventManager.addEventListener(wrapper,'mouseenter',(function(){return hot.deselectCell();}));}else if(isSubMenu(item)){addClass(TD,'htSubmenu');if(itemIsSelectionDisabled(item)){this.eventManager.addEventListener(wrapper,'mouseenter',(function(){return hot.deselectCell();}));}else{this.eventManager.addEventListener(wrapper,'mouseenter',(function(){return hot.selectCell(row,col);}));}}else{removeClass(TD,'htSubmenu');removeClass(TD,'htDisabled');if(itemIsSelectionDisabled(item)){this.eventManager.addEventListener(wrapper,'mouseenter',(function(){return hot.deselectCell();}));}else{this.eventManager.addEventListener(wrapper,'mouseenter',(function(){return hot.selectCell(row,col);}));}}},createContainer:function(){var name=arguments[0]!==(void 0)?arguments[0]:null;if(name){name=name.replace(/ /g,'_');name=this.options.className+'Sub_'+name;}
var container;if(name){container=document.querySelector('.'+this.options.className+'.'+name);}else{container=document.querySelector('.'+this.options.className);}
if(!container){container=document.createElement('div');addClass(container,'htMenu '+this.options.className);if(name){addClass(container,name);}
document.getElementsByTagName('body')[0].appendChild(container);}
return container;},blockMainTableCallbacks:function(){this._afterScrollCallback=function(){};this.hot.addHook('afterScrollVertically',this._afterScrollCallback);this.hot.addHook('afterScrollHorizontally',this._afterScrollCallback);},releaseMainTableCallbacks:function(){if(this._afterScrollCallback){this.hot.removeHook('afterScrollVertically',this._afterScrollCallback);this.hot.removeHook('afterScrollHorizontally',this._afterScrollCallback);this._afterScrollCallback=null;}},onBeforeKeyDown:function(event){var selection=this.hotMenu.getSelected();var stopEvent=false;switch(event.keyCode){case KEY_CODES.ESCAPE:this.close();stopEvent=true;break;case KEY_CODES.ENTER:if(selection){if(this.hotMenu.getData()[selection[0]].submenu){stopEvent=true;}else{this.executeCommand(event);this.close(true);}}
break;case KEY_CODES.ARROW_DOWN:if(selection){this.selectNextCell(selection[0],selection[1]);}else{this.selectFirstCell();}
stopEvent=true;break;case KEY_CODES.ARROW_UP:if(selection){this.selectPrevCell(selection[0],selection[1]);}else{this.selectLastCell();}
stopEvent=true;break;case KEY_CODES.ARROW_RIGHT:if(selection){var menu=this.openSubMenu(selection[0]);if(menu){menu.selectFirstCell();}}
stopEvent=true;break;case KEY_CODES.ARROW_LEFT:if(selection&&this.isSubMenu()){this.close();if(this.parentMenu){this.parentMenu.hotMenu.listen();}
stopEvent=true;}
break;}
if(stopEvent){event.preventDefault();stopImmediatePropagation(event);}},onAfterInit:function(){var data=this.hotMenu.getSettings().data;var hiderStyle=this.hotMenu.view.wt.wtTable.hider.style;var holderStyle=this.hotMenu.view.wt.wtTable.holder.style;var currentHiderWidth=parseInt(hiderStyle.width,10);var realHeight=0;arrayEach(data,(function(value){return realHeight+=value.name===SEPARATOR?1:26;}));holderStyle.width=currentHiderWidth+22+'px';holderStyle.height=realHeight+4+'px';},onDocumentMouseDown:function(event){if(!this.isOpened()){return;}
if(this.container&&isChildOf(event.target,this.container)){this.executeCommand(event);}
if((this.isAllSubMenusClosed()||this.isSubMenu())&&(!isChildOf(event.target,'.htMenu')&&isChildOf(event.target,document))){this.close(true);}}},{});mixin(Menu,localHooks);;},{"cursor":65,"eventManager":40,"helpers/array":41,"helpers/dom/element":44,"helpers/dom/event":45,"helpers/object":49,"helpers/unicode":52,"pluginHooks":54,"predefinedItems":68,"utils":69}],68:[function(require,module,exports){"use strict";var $__4;Object.defineProperties(exports,{ROW_ABOVE:{get:function(){return ROW_ABOVE;}},ROW_BELOW:{get:function(){return ROW_BELOW;}},COLUMN_LEFT:{get:function(){return COLUMN_LEFT;}},COLUMN_RIGHT:{get:function(){return COLUMN_RIGHT;}},CLEAR_COLUMN:{get:function(){return CLEAR_COLUMN;}},REMOVE_ROW:{get:function(){return REMOVE_ROW;}},REMOVE_COLUMN:{get:function(){return REMOVE_COLUMN;}},UNDO:{get:function(){return UNDO;}},REDO:{get:function(){return REDO;}},READ_ONLY:{get:function(){return READ_ONLY;}},ALIGNMENT:{get:function(){return ALIGNMENT;}},SEPARATOR:{get:function(){return SEPARATOR;}},ITEMS:{get:function(){return ITEMS;}},predefinedItems:{get:function(){return predefinedItems;}},addItem:{get:function(){return addItem;}},__esModule:{value:true}});var $___46__46__47__46__46__47_helpers_47_object__,$___46__46__47__46__46__47_helpers_47_number__,$__utils__;var $__0=($___46__46__47__46__46__47_helpers_47_object__=require("helpers/object"),$___46__46__47__46__46__47_helpers_47_object__&&$___46__46__47__46__46__47_helpers_47_object__.__esModule&&$___46__46__47__46__46__47_helpers_47_object__||{default:$___46__46__47__46__46__47_helpers_47_object__}),objectEach=$__0.objectEach,clone=$__0.clone;var rangeEach=($___46__46__47__46__46__47_helpers_47_number__=require("helpers/number"),$___46__46__47__46__46__47_helpers_47_number__&&$___46__46__47__46__46__47_helpers_47_number__.__esModule&&$___46__46__47__46__46__47_helpers_47_number__||{default:$___46__46__47__46__46__47_helpers_47_number__}).rangeEach;var $__2=($__utils__=require("utils"),$__utils__&&$__utils__.__esModule&&$__utils__||{default:$__utils__}),align=$__2.align,getAlignmentClasses=$__2.getAlignmentClasses,getValidSelection=$__2.getValidSelection,checkSelectionConsistency=$__2.checkSelectionConsistency,markLabelAsSelected=$__2.markLabelAsSelected;var ROW_ABOVE='row_above';var ROW_BELOW='row_below';var COLUMN_LEFT='col_left';var COLUMN_RIGHT='col_right';var CLEAR_COLUMN='clear_column';var REMOVE_ROW='remove_row';var REMOVE_COLUMN='remove_col';var UNDO='undo';var REDO='redo';var READ_ONLY='make_read_only';var ALIGNMENT='alignment';var SEPARATOR='---------';var ITEMS=[ROW_ABOVE,ROW_BELOW,COLUMN_LEFT,COLUMN_RIGHT,CLEAR_COLUMN,REMOVE_ROW,REMOVE_COLUMN,UNDO,REDO,READ_ONLY,ALIGNMENT,SEPARATOR];function predefinedItems(){var items={};objectEach(_predefinedItems,(function(value,key){return items[key]=clone(value);}));return items;}
function addItem(key,item){if(ITEMS.indexOf(key)===-1){_predefinedItems[key]=item;}}
var _predefinedItems=($__4={},Object.defineProperty($__4,SEPARATOR,{value:{name:SEPARATOR},configurable:true,enumerable:true,writable:true}),Object.defineProperty($__4,ROW_ABOVE,{value:{key:ROW_ABOVE,name:'Insert row above',callback:function(key,selection){this.alter('insert_row',selection.start.row);},disabled:function(){var selected=getValidSelection(this);if(!selected){return true;}
var rowCount=this.countRows();var entireColumnSelection=[0,selected[1],rowCount-1,selected[1]];return(entireColumnSelection.join(',')===selected.join(','))&&rowCount>1;},hidden:function(){return!this.getSettings().allowInsertRow;}},configurable:true,enumerable:true,writable:true}),Object.defineProperty($__4,ROW_BELOW,{value:{key:ROW_BELOW,name:'Insert row below',callback:function(key,selection){this.alter('insert_row',selection.end.row+1);},disabled:function(){var selected=getValidSelection(this);if(!selected){return true;}
var rowCount=this.countRows();var entireColumnSelection=[0,selected[1],rowCount-1,selected[1]];return(entireColumnSelection.join(',')===selected.join(','))&&rowCount>1;},hidden:function(){return!this.getSettings().allowInsertRow;}},configurable:true,enumerable:true,writable:true}),Object.defineProperty($__4,COLUMN_LEFT,{value:{key:COLUMN_LEFT,name:'Insert column on the left',callback:function(key,selection){this.alter('insert_col',selection.start.col);},disabled:function(){var selected=getValidSelection(this);if(!selected){return true;}
if(!this.isColumnModificationAllowed()){return true;}
var entireRowSelection=[selected[0],0,selected[0],this.countCols()-1];var rowSelected=entireRowSelection.join(',')==selected.join(',');return selected[1]<0||this.countCols()>=this.getSettings().maxCols||rowSelected;},hidden:function(){return!this.getSettings().allowInsertColumn;}},configurable:true,enumerable:true,writable:true}),Object.defineProperty($__4,COLUMN_RIGHT,{value:{key:COLUMN_RIGHT,name:'Insert column on the right',callback:function(key,selection){this.alter('insert_col',selection.end.col+1);},disabled:function(){var selected=getValidSelection(this);if(!selected){return true;}
if(!this.isColumnModificationAllowed()){return true;}
var entireRowSelection=[selected[0],0,selected[0],this.countCols()-1];var rowSelected=entireRowSelection.join(',')==selected.join(',');return selected[1]<0||this.countCols()>=this.getSettings().maxCols||rowSelected;},hidden:function(){return!this.getSettings().allowInsertColumn;}},configurable:true,enumerable:true,writable:true}),Object.defineProperty($__4,CLEAR_COLUMN,{value:{key:CLEAR_COLUMN,name:'Clear column',callback:function(key,selection){var column=selection.start.col;this.populateFromArray(0,column,[[null]],Math.max(selection.start.row,selection.end.row),column);},disabled:function(){var selected=getValidSelection(this);if(!selected){return true;}
var entireRowSelection=[selected[0],0,selected[0],this.countCols()-1];var rowSelected=entireRowSelection.join(',')==selected.join(',');return selected[1]<0||this.countCols()>=this.getSettings().maxCols||rowSelected;}},configurable:true,enumerable:true,writable:true}),Object.defineProperty($__4,REMOVE_ROW,{value:{key:REMOVE_ROW,name:'Remove row',callback:function(key,selection){var amount=selection.end.row-selection.start.row+1;this.alter('remove_row',selection.start.row,amount);},disabled:function(){var selected=getValidSelection(this);if(!selected){return true;}
var entireColumnSelection=[0,selected[1],this.countRows()-1,selected[1]];return entireColumnSelection.join(',')===selected.join(',');},hidden:function(){return!this.getSettings().allowRemoveRow;}},configurable:true,enumerable:true,writable:true}),Object.defineProperty($__4,REMOVE_COLUMN,{value:{key:REMOVE_COLUMN,name:'Remove column',callback:function(key,selection){var amount=selection.end.col-selection.start.col+1;this.alter('remove_col',selection.start.col,amount);},disabled:function(){var selected=getValidSelection(this);if(!selected){return true;}
if(!this.isColumnModificationAllowed()){return true;}
var entireRowSelection=[selected[0],0,selected[0],this.countCols()-1];var rowSelected=entireRowSelection.join(',')==selected.join(',');return(selected[1]<0||rowSelected);},hidden:function(){return!this.getSettings().allowRemoveColumn;}},configurable:true,enumerable:true,writable:true}),Object.defineProperty($__4,UNDO,{value:{key:UNDO,name:'Undo',callback:function(){this.undo();},disabled:function(){return this.undoRedo&&!this.undoRedo.isUndoAvailable();}},configurable:true,enumerable:true,writable:true}),Object.defineProperty($__4,REDO,{value:{key:REDO,name:'Redo',callback:function(){this.redo();},disabled:function(){return this.undoRedo&&!this.undoRedo.isRedoAvailable();}},configurable:true,enumerable:true,writable:true}),Object.defineProperty($__4,READ_ONLY,{value:{key:READ_ONLY,name:function(){var $__3=this;var label='Read only';var atLeastOneReadOnly=checkSelectionConsistency(this.getSelectedRange(),(function(row,col){return $__3.getCellMeta(row,col).readOnly;}));if(atLeastOneReadOnly){label=markLabelAsSelected(label);}
return label;},callback:function(){var $__3=this;var range=this.getSelectedRange();var atLeastOneReadOnly=checkSelectionConsistency(range,(function(row,col){return $__3.getCellMeta(row,col).readOnly;}));range.forAll((function(row,col){$__3.getCellMeta(row,col).readOnly=atLeastOneReadOnly?false:true;}));this.render();},disabled:function(){return this.getSelectedRange()?false:true;}},configurable:true,enumerable:true,writable:true}),Object.defineProperty($__4,ALIGNMENT,{value:{key:ALIGNMENT,name:'Alignment',disabled:function(){return this.getSelectedRange()?false:true;},submenu:{items:[{key:(ALIGNMENT+":left"),name:function(){var $__3=this;var label='Left';var hasClass=checkSelectionConsistency(this.getSelectedRange(),(function(row,col){var className=$__3.getCellMeta(row,col).className;if(className&&className.indexOf('htLeft')!==-1){return true;}}));if(hasClass){label=markLabelAsSelected(label);}
return label;},callback:function(){var $__3=this;var range=this.getSelectedRange();var stateBefore=getAlignmentClasses(range,(function(row,col){return $__3.getCellMeta(row,col).className;}));var type='horizontal';var alignment='htLeft';this.runHooks('beforeCellAlignment',stateBefore,range,type,alignment);align(range,type,alignment,(function(row,col){return $__3.getCellMeta(row,col);}));this.render();},disabled:false},{key:(ALIGNMENT+":center"),name:function(){var $__3=this;var label='Center';var hasClass=checkSelectionConsistency(this.getSelectedRange(),(function(row,col){var className=$__3.getCellMeta(row,col).className;if(className&&className.indexOf('htCenter')!==-1){return true;}}));if(hasClass){label=markLabelAsSelected(label);}
return label;},callback:function(){var $__3=this;var range=this.getSelectedRange();var stateBefore=getAlignmentClasses(range,(function(row,col){return $__3.getCellMeta(row,col).className;}));var type='horizontal';var alignment='htCenter';this.runHooks('beforeCellAlignment',stateBefore,range,type,alignment);align(range,type,alignment,(function(row,col){return $__3.getCellMeta(row,col);}));this.render();},disabled:false},{key:(ALIGNMENT+":right"),name:function(){var $__3=this;var label='Right';var hasClass=checkSelectionConsistency(this.getSelectedRange(),(function(row,col){var className=$__3.getCellMeta(row,col).className;if(className&&className.indexOf('htRight')!==-1){return true;}}));if(hasClass){label=markLabelAsSelected(label);}
return label;},callback:function(){var $__3=this;var range=this.getSelectedRange();var stateBefore=getAlignmentClasses(range,(function(row,col){return $__3.getCellMeta(row,col).className;}));var type='horizontal';var alignment='htRight';this.runHooks('beforeCellAlignment',stateBefore,range,type,alignment);align(range,type,alignment,(function(row,col){return $__3.getCellMeta(row,col);}));this.render();},disabled:false},{key:(ALIGNMENT+":justify"),name:function(){var $__3=this;var label='Justify';var hasClass=checkSelectionConsistency(this.getSelectedRange(),(function(row,col){var className=$__3.getCellMeta(row,col).className;if(className&&className.indexOf('htJustify')!==-1){return true;}}));if(hasClass){label=markLabelAsSelected(label);}
return label;},callback:function(){var $__3=this;var range=this.getSelectedRange();var stateBefore=getAlignmentClasses(range,(function(row,col){return $__3.getCellMeta(row,col).className;}));var type='horizontal';var alignment='htJustify';this.runHooks('beforeCellAlignment',stateBefore,range,type,alignment);align(range,type,alignment,(function(row,col){return $__3.getCellMeta(row,col);}));this.render();},disabled:false},{name:SEPARATOR},{key:(ALIGNMENT+":top"),name:function(){var $__3=this;var label='Top';var hasClass=checkSelectionConsistency(this.getSelectedRange(),(function(row,col){var className=$__3.getCellMeta(row,col).className;if(className&&className.indexOf('htTop')!==-1){return true;}}));if(hasClass){label=markLabelAsSelected(label);}
return label;},callback:function(){var $__3=this;var range=this.getSelectedRange();var stateBefore=getAlignmentClasses(range,(function(row,col){return $__3.getCellMeta(row,col).className;}));var type='vertical';var alignment='htTop';this.runHooks('beforeCellAlignment',stateBefore,range,type,alignment);align(range,type,alignment,(function(row,col){return $__3.getCellMeta(row,col);}));this.render();},disabled:false},{key:(ALIGNMENT+":middle"),name:function(){var $__3=this;var label='Middle';var hasClass=checkSelectionConsistency(this.getSelectedRange(),(function(row,col){var className=$__3.getCellMeta(row,col).className;if(className&&className.indexOf('htMiddle')!==-1){return true;}}));if(hasClass){label=markLabelAsSelected(label);}
return label;},callback:function(){var $__3=this;var range=this.getSelectedRange();var stateBefore=getAlignmentClasses(range,(function(row,col){return $__3.getCellMeta(row,col).className;}));var type='vertical';var alignment='htMiddle';this.runHooks('beforeCellAlignment',stateBefore,range,type,alignment);align(range,type,alignment,(function(row,col){return $__3.getCellMeta(row,col);}));this.render();},disabled:false},{key:(ALIGNMENT+":bottom"),name:function(){var $__3=this;var label='Bottom';var hasClass=checkSelectionConsistency(this.getSelectedRange(),(function(row,col){var className=$__3.getCellMeta(row,col).className;if(className&&className.indexOf('htBottom')!==-1){return true;}}));if(hasClass){label=markLabelAsSelected(label);}
return label;},callback:function(){var $__3=this;var range=this.getSelectedRange();var stateBefore=getAlignmentClasses(range,(function(row,col){return $__3.getCellMeta(row,col).className;}));var type='vertical';var alignment='htBottom';this.runHooks('beforeCellAlignment',stateBefore,range,type,alignment);align(range,type,alignment,(function(row,col){return $__3.getCellMeta(row,col);}));this.render();},disabled:false}]}},configurable:true,enumerable:true,writable:true}),$__4);},{"helpers/number":48,"helpers/object":49,"utils":69}],69:[function(require,module,exports){"use strict";Object.defineProperties(exports,{normalizeSelection:{get:function(){return normalizeSelection;}},isSeparator:{get:function(){return isSeparator;}},hasSubMenu:{get:function(){return hasSubMenu;}},isDisabled:{get:function(){return isDisabled;}},isSelectionDisabled:{get:function(){return isSelectionDisabled;}},getValidSelection:{get:function(){return getValidSelection;}},prepareVerticalAlignClass:{get:function(){return prepareVerticalAlignClass;}},prepareHorizontalAlignClass:{get:function(){return prepareHorizontalAlignClass;}},getAlignmentClasses:{get:function(){return getAlignmentClasses;}},align:{get:function(){return align;}},checkSelectionConsistency:{get:function(){return checkSelectionConsistency;}},markLabelAsSelected:{get:function(){return markLabelAsSelected;}},__esModule:{value:true}});var $___46__46__47__46__46__47_helpers_47_dom_47_element__;var hasClass=($___46__46__47__46__46__47_helpers_47_dom_47_element__=require("helpers/dom/element"),$___46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_element__||{default:$___46__46__47__46__46__47_helpers_47_dom_47_element__}).hasClass;function normalizeSelection(selRange){return{start:selRange.getTopLeftCorner(),end:selRange.getBottomRightCorner()};}
function isSeparator(cell){return hasClass(cell,'htSeparator');}
function hasSubMenu(cell){return hasClass(cell,'htSubmenu');}
function isDisabled(cell){return hasClass(cell,'htDisabled');}
function isSelectionDisabled(cell){return hasClass(cell,'htSelectionDisabled');}
function getValidSelection(hot){var selected=hot.getSelected();if(!selected){return null;}
if(selected[0]<0){return null;}
if(hot.countRows()>=hot.getSettings().maxRows){return null;}
return selected;}
function prepareVerticalAlignClass(className,alignment){if(className.indexOf(alignment)!=-1){return className;}
className=className.replace('htTop','').replace('htMiddle','').replace('htBottom','').replace('  ','');className+=' '+alignment;return className;}
function prepareHorizontalAlignClass(className,alignment){if(className.indexOf(alignment)!=-1){return className;}
className=className.replace('htLeft','').replace('htCenter','').replace('htRight','').replace('htJustify','').replace('  ','');className+=' '+alignment;return className;}
function getAlignmentClasses(range,callback){var classes={};for(var row=range.from.row;row<=range.to.row;row++){for(var col=range.from.col;col<=range.to.col;col++){if(!classes[row]){classes[row]=[];}
classes[row][col]=callback(row,col);}}
return classes;}
function align(range,type,alignment,cellDescriptor){if(range.from.row==range.to.row&&range.from.col==range.to.col){applyAlignClassName(range.from.row,range.from.col,type,alignment,cellDescriptor);}else{for(var row=range.from.row;row<=range.to.row;row++){for(var col=range.from.col;col<=range.to.col;col++){applyAlignClassName(row,col,type,alignment,cellDescriptor);}}}}
function applyAlignClassName(row,col,type,alignment,cellDescriptor){var cellMeta=cellDescriptor(row,col);var className=alignment;if(cellMeta.className){if(type==='vertical'){className=prepareVerticalAlignClass(cellMeta.className,alignment);}else{className=prepareHorizontalAlignClass(cellMeta.className,alignment);}}
cellMeta.className=className;}
function checkSelectionConsistency(range,comparator){var result=false;if(range){range.forAll(function(row,col){if(comparator(row,col)){result=true;return false;}});}
return result;}
function markLabelAsSelected(label){return'<span class="selected">'+String.fromCharCode(10003)+'</span>'+label;}},{"helpers/dom/element":44}],70:[function(require,module,exports){"use strict";Object.defineProperties(exports,{ContextMenuCopyPaste:{get:function(){return ContextMenuCopyPaste;}},__esModule:{value:true}});var $___46__46__47__46__46__47_helpers_47_dom_47_element__,$___46__46__47__46__46__47_helpers_47_array__,$___46__46__47__46__46__47_eventManager__,$___46__46__47__46__46__47_plugins__,$___46__46__47__95_base__,$__zeroclipboard__;var removeClass=($___46__46__47__46__46__47_helpers_47_dom_47_element__=require("helpers/dom/element"),$___46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_element__||{default:$___46__46__47__46__46__47_helpers_47_dom_47_element__}).removeClass;var arrayEach=($___46__46__47__46__46__47_helpers_47_array__=require("helpers/array"),$___46__46__47__46__46__47_helpers_47_array__&&$___46__46__47__46__46__47_helpers_47_array__.__esModule&&$___46__46__47__46__46__47_helpers_47_array__||{default:$___46__46__47__46__46__47_helpers_47_array__}).arrayEach;var EventManager=($___46__46__47__46__46__47_eventManager__=require("eventManager"),$___46__46__47__46__46__47_eventManager__&&$___46__46__47__46__46__47_eventManager__.__esModule&&$___46__46__47__46__46__47_eventManager__||{default:$___46__46__47__46__46__47_eventManager__}).EventManager;var registerPlugin=($___46__46__47__46__46__47_plugins__=require("plugins"),$___46__46__47__46__46__47_plugins__&&$___46__46__47__46__46__47_plugins__.__esModule&&$___46__46__47__46__46__47_plugins__||{default:$___46__46__47__46__46__47_plugins__}).registerPlugin;var BasePlugin=($___46__46__47__95_base__=require("_base"),$___46__46__47__95_base__&&$___46__46__47__95_base__.__esModule&&$___46__46__47__95_base__||{default:$___46__46__47__95_base__}).default;var ZeroClipboard=($__zeroclipboard__=require("zeroclipboard"),$__zeroclipboard__&&$__zeroclipboard__.__esModule&&$__zeroclipboard__||{default:$__zeroclipboard__}).default;var ContextMenuCopyPaste=function ContextMenuCopyPaste(hotInstance){$traceurRuntime.superConstructor($ContextMenuCopyPaste).call(this,hotInstance);this.eventManager=new EventManager(this);this.swfPath=null;this.outsideClickDeselectsCache=null;};var $ContextMenuCopyPaste=ContextMenuCopyPaste;($traceurRuntime.createClass)(ContextMenuCopyPaste,{isEnabled:function(){return this.hot.getSettings().contextMenuCopyPaste;},enablePlugin:function(){var $__6=this;if(this.enabled){return;}
if(typeof this.hot.getSettings().contextMenuCopyPaste==='object'){this.swfPath=this.hot.getSettings().contextMenuCopyPaste.swfPath;}
if(typeof ZeroClipboard==='undefined'){console.error('To be able to use the Copy/Paste feature from the context menu, you need to manually include ZeroClipboard.js file to your website.');}
try{new ActiveXObject('ShockwaveFlash.ShockwaveFlash');}catch(exception){if(typeof navigator.mimeTypes['application/x-shockwave-flash']=='undefined'){console.error('To be able to use the Copy/Paste feature from the context menu, your browser needs to have Flash Plugin installed.');}}
if(this.swfPath){ZeroClipboard.config({swfPath:this.swfPath});}
this.hot.addHook('afterContextMenuShow',(function(){return $__6.onAfterContextMenuShow();}));this.hot.addHook('afterContextMenuDefaultOptions',(function(options){return $__6.onAfterContextMenuDefaultOptions(options);}));this.registerEvents();$traceurRuntime.superGet(this,$ContextMenuCopyPaste.prototype,"enablePlugin").call(this);},disablePlugin:function(){$traceurRuntime.superGet(this,$ContextMenuCopyPaste.prototype,"disablePlugin").call(this);},registerEvents:function(){var $__6=this;this.eventManager.addEventListener(document,'mouseenter',(function(){return $__6.removeCurrentClass();}));this.eventManager.addEventListener(document,'mouseleave',(function(){return $__6.removeZeroClipboardClass();}));},getCopyValue:function(){this.hot.copyPaste.setCopyableText();return this.hot.copyPaste.copyPasteInstance.elTextarea.value;},onAfterContextMenuDefaultOptions:function(defaultOptions){defaultOptions.items.unshift({key:'copy',name:'Copy'},{key:'paste',name:'Paste',callback:function(){this.copyPaste.triggerPaste();}},Handsontable.plugins.ContextMenu.SEPARATOR);},onAfterContextMenuShow:function(){var $__6=this;var contextMenu=this.hot.getPlugin('contextMenu');var data=contextMenu.menu.hotMenu.getData();arrayEach(data,(function(item,index){if(item.key==='copy'){var zeroClipboardInstance=new ZeroClipboard(contextMenu.menu.hotMenu.getCell(index,0));zeroClipboardInstance.off();zeroClipboardInstance.on('copy',(function(event){var clipboard=event.clipboardData;clipboard.setData('text/plain',$__6.getCopyValue());$__6.hot.getSettings().outsideClickDeselects=$__6.outsideClickDeselectsCache;}));return false;}}));},removeCurrentClass:function(){var contextMenu=this.hot.getPlugin('contextMenu');if(contextMenu.menu.isOpened()){var element=contextMenu.menu.hotMenu.rootElement.querySelector('td.current');if(element){removeClass(element,'current');}}
this.outsideClickDeselectsCache=this.hot.getSettings().outsideClickDeselects;this.hot.getSettings().outsideClickDeselects=false;},removeZeroClipboardClass:function(){var contextMenu=this.hot.getPlugin('contextMenu');if(contextMenu.menu.isOpened()){var element=contextMenu.menu.hotMenu.rootElement.querySelector('td.zeroclipboard-is-hover');if(element){removeClass(element,'zeroclipboard-is-hover');}}
this.hot.getSettings().outsideClickDeselects=this.outsideClickDeselectsCache;}},{},BasePlugin);;registerPlugin('contextMenuCopyPaste',ContextMenuCopyPaste);},{"_base":56,"eventManager":40,"helpers/array":41,"helpers/dom/element":44,"plugins":55,"zeroclipboard":undefined}],71:[function(require,module,exports){"use strict";Object.defineProperties(exports,{CopyPastePlugin:{get:function(){return CopyPastePlugin;}},__esModule:{value:true}});var $__copyPaste__,$__SheetClip__,$___46__46__47__46__46__47_helpers_47_unicode__,$___46__46__47__46__46__47_helpers_47_array__,$___46__46__47__46__46__47_helpers_47_number__,$___46__46__47__46__46__47_helpers_47_dom_47_event__,$___46__46__47__46__46__47_helpers_47_function__,$___46__46__47__46__46__47_plugins__,$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__,$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_range__;var copyPaste=($__copyPaste__=require("copyPaste"),$__copyPaste__&&$__copyPaste__.__esModule&&$__copyPaste__||{default:$__copyPaste__}).default;var SheetClip=($__SheetClip__=require("SheetClip"),$__SheetClip__&&$__SheetClip__.__esModule&&$__SheetClip__||{default:$__SheetClip__}).default;var $__2=($___46__46__47__46__46__47_helpers_47_unicode__=require("helpers/unicode"),$___46__46__47__46__46__47_helpers_47_unicode__&&$___46__46__47__46__46__47_helpers_47_unicode__.__esModule&&$___46__46__47__46__46__47_helpers_47_unicode__||{default:$___46__46__47__46__46__47_helpers_47_unicode__}),KEY_CODES=$__2.KEY_CODES,isCtrlKey=$__2.isCtrlKey;var arrayEach=($___46__46__47__46__46__47_helpers_47_array__=require("helpers/array"),$___46__46__47__46__46__47_helpers_47_array__&&$___46__46__47__46__46__47_helpers_47_array__.__esModule&&$___46__46__47__46__46__47_helpers_47_array__||{default:$___46__46__47__46__46__47_helpers_47_array__}).arrayEach;var rangeEach=($___46__46__47__46__46__47_helpers_47_number__=require("helpers/number"),$___46__46__47__46__46__47_helpers_47_number__&&$___46__46__47__46__46__47_helpers_47_number__.__esModule&&$___46__46__47__46__46__47_helpers_47_number__||{default:$___46__46__47__46__46__47_helpers_47_number__}).rangeEach;var stopImmediatePropagation=($___46__46__47__46__46__47_helpers_47_dom_47_event__=require("helpers/dom/event"),$___46__46__47__46__46__47_helpers_47_dom_47_event__&&$___46__46__47__46__46__47_helpers_47_dom_47_event__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_event__||{default:$___46__46__47__46__46__47_helpers_47_dom_47_event__}).stopImmediatePropagation;var proxy=($___46__46__47__46__46__47_helpers_47_function__=require("helpers/function"),$___46__46__47__46__46__47_helpers_47_function__&&$___46__46__47__46__46__47_helpers_47_function__.__esModule&&$___46__46__47__46__46__47_helpers_47_function__||{default:$___46__46__47__46__46__47_helpers_47_function__}).proxy;var registerPlugin=($___46__46__47__46__46__47_plugins__=require("plugins"),$___46__46__47__46__46__47_plugins__&&$___46__46__47__46__46__47_plugins__.__esModule&&$___46__46__47__46__46__47_plugins__||{default:$___46__46__47__46__46__47_plugins__}).registerPlugin;var WalkontableCellCoords=($___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__=require("3rdparty/walkontable/src/cell/coords"),$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__&&$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__.__esModule&&$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__||{default:$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__}).WalkontableCellCoords;var WalkontableCellRange=($___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_range__=require("3rdparty/walkontable/src/cell/range"),$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_range__&&$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_range__.__esModule&&$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_range__||{default:$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_range__}).WalkontableCellRange;function CopyPastePlugin(instance){var _this=this;this.copyPasteInstance=copyPaste();this.copyPasteInstance.onCut(onCut);this.copyPasteInstance.onPaste(onPaste);this.onPaste=onPaste;instance.addHook('beforeKeyDown',onBeforeKeyDown);function onCut(){if(!instance.isListening()){return;}
instance.selection.empty();}
function onPaste(str){var input,inputArray,selected,coordsFrom,coordsTo,cellRange,topLeftCorner,bottomRightCorner,areaStart,areaEnd;if(!instance.isListening()||!instance.selection.isSelected()){return;}
input=str;inputArray=SheetClip.parse(input);selected=instance.getSelected();coordsFrom=new WalkontableCellCoords(selected[0],selected[1]);coordsTo=new WalkontableCellCoords(selected[2],selected[3]);cellRange=new WalkontableCellRange(coordsFrom,coordsFrom,coordsTo);topLeftCorner=cellRange.getTopLeftCorner();bottomRightCorner=cellRange.getBottomRightCorner();areaStart=topLeftCorner;areaEnd=new WalkontableCellCoords(Math.max(bottomRightCorner.row,inputArray.length-1+topLeftCorner.row),Math.max(bottomRightCorner.col,inputArray[0].length-1+topLeftCorner.col));var isSelRowAreaCoverInputValue=coordsTo.row-coordsFrom.row>=inputArray.length-1;var isSelColAreaCoverInputValue=coordsTo.col-coordsFrom.col>=inputArray[0].length-1;instance.addHookOnce('afterChange',(function(changes,source){var changesLength=changes?changes.length:0;if(changesLength){var offset={row:0,col:0};var highestColumnIndex=-1;arrayEach(changes,(function(change,index){var nextChange=changesLength>index+1?changes[index+1]:null;if(nextChange){if(!isSelRowAreaCoverInputValue){offset.row=offset.row+Math.max(nextChange[0]-change[0]-1,0);}
if(!isSelColAreaCoverInputValue&&change[1]>highestColumnIndex){highestColumnIndex=change[1];offset.col=offset.col+Math.max(nextChange[1]-change[1]-1,0);}}}));instance.selectCell(areaStart.row,areaStart.col,areaEnd.row+offset.row,areaEnd.col+offset.col);}}));instance.populateFromArray(areaStart.row,areaStart.col,inputArray,areaEnd.row,areaEnd.col,'paste',instance.getSettings().pasteMode);}
function onBeforeKeyDown(event){if(!instance.getSelected()){return;}
if(instance.getActiveEditor()&&instance.getActiveEditor().isOpened()){return;}
if(isCtrlKey(event.keyCode)){_this.setCopyableText();stopImmediatePropagation(event);return;}
var ctrlDown=(event.ctrlKey||event.metaKey)&&!event.altKey;if(event.keyCode==KEY_CODES.A&&ctrlDown){instance._registerTimeout(setTimeout(proxy(_this.setCopyableText,_this),0));}}
this.destroy=function(){if(this.copyPasteInstance){this.copyPasteInstance.removeCallback(onCut);this.copyPasteInstance.removeCallback(onPaste);this.copyPasteInstance.destroy();this.copyPasteInstance=null;}
instance.removeHook('beforeKeyDown',onBeforeKeyDown);};instance.addHook('afterDestroy',proxy(this.destroy,this));this.triggerPaste=proxy(this.copyPasteInstance.triggerPaste,this.copyPasteInstance);this.triggerCut=proxy(this.copyPasteInstance.triggerCut,this.copyPasteInstance);this.setCopyableText=function(){var settings=instance.getSettings();var copyRowsLimit=settings.copyRowsLimit;var copyColsLimit=settings.copyColsLimit;var selRange=instance.getSelectedRange();var topLeft=selRange.getTopLeftCorner();var bottomRight=selRange.getBottomRightCorner();var startRow=topLeft.row;var startCol=topLeft.col;var endRow=bottomRight.row;var endCol=bottomRight.col;var finalEndRow=Math.min(endRow,startRow+copyRowsLimit-1);var finalEndCol=Math.min(endCol,startCol+copyColsLimit-1);var copyableRanges=[];copyableRanges.push({startRow:startRow,startCol:startCol,endRow:finalEndRow,endCol:finalEndCol});copyableRanges=Handsontable.hooks.run(instance,'modifyCopyableRange',copyableRanges);var copyableData=this.getRangedCopyableData(copyableRanges);instance.copyPaste.copyPasteInstance.copyable(copyableData);if(endRow!==finalEndRow||endCol!==finalEndCol){Handsontable.hooks.run(instance,'afterCopyLimit',endRow-startRow+1,endCol-startCol+1,copyRowsLimit,copyColsLimit);}};this.getRangedCopyableData=function(ranges){var dataSet=[];var copyableRows=[];var copyableColumns=[];arrayEach(ranges,(function(range){rangeEach(range.startRow,range.endRow,(function(row){if(copyableRows.indexOf(row)===-1){copyableRows.push(row);}}));rangeEach(range.startCol,range.endCol,(function(column){if(copyableColumns.indexOf(column)===-1){copyableColumns.push(column);}}));}));arrayEach(copyableRows,(function(row){var rowSet=[];arrayEach(copyableColumns,(function(column){rowSet.push(instance.getCopyableData(row,column));}));dataSet.push(rowSet);}));return SheetClip.stringify(dataSet);};}
function init(){var instance=this,pluginEnabled=instance.getSettings().copyPaste!==false;if(pluginEnabled&&!instance.copyPaste){instance.copyPaste=new CopyPastePlugin(instance);}else if(!pluginEnabled&&instance.copyPaste){instance.copyPaste.destroy();instance.copyPaste=null;}}
Handsontable.hooks.add('afterInit',init);Handsontable.hooks.add('afterUpdateSettings',init);Handsontable.hooks.register('afterCopyLimit');Handsontable.hooks.register('modifyCopyableRange');;},{"3rdparty/walkontable/src/cell/coords":5,"3rdparty/walkontable/src/cell/range":6,"SheetClip":"SheetClip","copyPaste":"copyPaste","helpers/array":41,"helpers/dom/event":45,"helpers/function":46,"helpers/number":48,"helpers/unicode":52,"plugins":55}],72:[function(require,module,exports){"use strict";var $___46__46__47__46__46__47_plugins__,$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_range__,$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_selection__;var registerPlugin=($___46__46__47__46__46__47_plugins__=require("plugins"),$___46__46__47__46__46__47_plugins__&&$___46__46__47__46__46__47_plugins__.__esModule&&$___46__46__47__46__46__47_plugins__||{default:$___46__46__47__46__46__47_plugins__}).registerPlugin;var WalkontableCellRange=($___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_range__=require("3rdparty/walkontable/src/cell/range"),$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_range__&&$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_range__.__esModule&&$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_range__||{default:$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_range__}).WalkontableCellRange;var WalkontableSelection=($___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_selection__=require("3rdparty/walkontable/src/selection"),$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_selection__&&$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_selection__.__esModule&&$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_selection__||{default:$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_selection__}).WalkontableSelection;function CustomBorders(){}
var instance;var checkEnable=function(customBorders){if(typeof customBorders==='boolean'){if(customBorders===true){return true;}}
if(typeof customBorders==='object'){if(customBorders.length>0){return true;}}
return false;};var init=function(){if(checkEnable(this.getSettings().customBorders)){if(!this.customBorders){instance=this;this.customBorders=new CustomBorders();}}};var getSettingIndex=function(className){for(var i=0;i<instance.view.wt.selections.length;i++){if(instance.view.wt.selections[i].settings.className==className){return i;}}
return-1;};var insertBorderIntoSettings=function(border){var coordinates={row:border.row,col:border.col};var selection=new WalkontableSelection(border,new WalkontableCellRange(coordinates,coordinates,coordinates));var index=getSettingIndex(border.className);if(index>=0){instance.view.wt.selections[index]=selection;}else{instance.view.wt.selections.push(selection);}};var prepareBorderFromCustomAdded=function(row,col,borderObj){var border=createEmptyBorders(row,col);border=extendDefaultBorder(border,borderObj);this.setCellMeta(row,col,'borders',border);insertBorderIntoSettings(border);};var prepareBorderFromCustomAddedRange=function(rowObj){var range=rowObj.range;for(var row=range.from.row;row<=range.to.row;row++){for(var col=range.from.col;col<=range.to.col;col++){var border=createEmptyBorders(row,col);var add=0;if(row==range.from.row){add++;if(rowObj.hasOwnProperty('top')){border.top=rowObj.top;}}
if(row==range.to.row){add++;if(rowObj.hasOwnProperty('bottom')){border.bottom=rowObj.bottom;}}
if(col==range.from.col){add++;if(rowObj.hasOwnProperty('left')){border.left=rowObj.left;}}
if(col==range.to.col){add++;if(rowObj.hasOwnProperty('right')){border.right=rowObj.right;}}
if(add>0){this.setCellMeta(row,col,'borders',border);insertBorderIntoSettings(border);}}}};var createClassName=function(row,col){return'border_row'+row+'col'+col;};var createDefaultCustomBorder=function(){return{width:1,color:'#000'};};var createSingleEmptyBorder=function(){return{hide:true};};var createDefaultHtBorder=function(){return{width:1,color:'#000',cornerVisible:false};};var createEmptyBorders=function(row,col){return{className:createClassName(row,col),border:createDefaultHtBorder(),row:row,col:col,top:createSingleEmptyBorder(),right:createSingleEmptyBorder(),bottom:createSingleEmptyBorder(),left:createSingleEmptyBorder()};};var extendDefaultBorder=function(defaultBorder,customBorder){if(customBorder.hasOwnProperty('border')){defaultBorder.border=customBorder.border;}
if(customBorder.hasOwnProperty('top')){defaultBorder.top=customBorder.top;}
if(customBorder.hasOwnProperty('right')){defaultBorder.right=customBorder.right;}
if(customBorder.hasOwnProperty('bottom')){defaultBorder.bottom=customBorder.bottom;}
if(customBorder.hasOwnProperty('left')){defaultBorder.left=customBorder.left;}
return defaultBorder;};var removeBordersFromDom=function(borderClassName){var borders=document.querySelectorAll('.'+borderClassName);for(var i=0;i<borders.length;i++){if(borders[i]){if(borders[i].nodeName!='TD'){var parent=borders[i].parentNode;if(parent.parentNode){parent.parentNode.removeChild(parent);}}}}};var removeAllBorders=function(row,col){var borderClassName=createClassName(row,col);removeBordersFromDom(borderClassName);this.removeCellMeta(row,col,'borders');};var setBorder=function(row,col,place,remove){var bordersMeta=this.getCellMeta(row,col).borders;if(!bordersMeta||bordersMeta.border==undefined){bordersMeta=createEmptyBorders(row,col);}
if(remove){bordersMeta[place]=createSingleEmptyBorder();}else{bordersMeta[place]=createDefaultCustomBorder();}
this.setCellMeta(row,col,'borders',bordersMeta);var borderClassName=createClassName(row,col);removeBordersFromDom(borderClassName);insertBorderIntoSettings(bordersMeta);this.render();};var prepareBorder=function(range,place,remove){if(range.from.row==range.to.row&&range.from.col==range.to.col){if(place=='noBorders'){removeAllBorders.call(this,range.from.row,range.from.col);}else{setBorder.call(this,range.from.row,range.from.col,place,remove);}}else{switch(place){case'noBorders':for(var column=range.from.col;column<=range.to.col;column++){for(var row=range.from.row;row<=range.to.row;row++){removeAllBorders.call(this,row,column);}}
break;case'top':for(var topCol=range.from.col;topCol<=range.to.col;topCol++){setBorder.call(this,range.from.row,topCol,place,remove);}
break;case'right':for(var rowRight=range.from.row;rowRight<=range.to.row;rowRight++){setBorder.call(this,rowRight,range.to.col,place);}
break;case'bottom':for(var bottomCol=range.from.col;bottomCol<=range.to.col;bottomCol++){setBorder.call(this,range.to.row,bottomCol,place);}
break;case'left':for(var rowLeft=range.from.row;rowLeft<=range.to.row;rowLeft++){setBorder.call(this,rowLeft,range.from.col,place);}
break;}}};var checkSelectionBorders=function(hot,direction){var atLeastOneHasBorder=false;hot.getSelectedRange().forAll(function(r,c){var metaBorders=hot.getCellMeta(r,c).borders;if(metaBorders){if(direction){if(!metaBorders[direction].hasOwnProperty('hide')){atLeastOneHasBorder=true;return false;}}else{atLeastOneHasBorder=true;return false;}}});return atLeastOneHasBorder;};var markSelected=function(label){return'<span class="selected">'+String.fromCharCode(10003)+'</span>'+label;};var addBordersOptionsToContextMenu=function(defaultOptions){if(!this.getSettings().customBorders){return;}
defaultOptions.items.push(Handsontable.plugins.ContextMenu.SEPARATOR);defaultOptions.items.push({key:'borders',name:'Borders',submenu:{items:[{key:'borders:top',name:function(){var label='Top';var hasBorder=checkSelectionBorders(this,'top');if(hasBorder){label=markSelected(label);}
return label;},callback:function(){var hasBorder=checkSelectionBorders(this,'top');prepareBorder.call(this,this.getSelectedRange(),'top',hasBorder);},disabled:false},{key:'borders:right',name:function(){var label='Right';var hasBorder=checkSelectionBorders(this,'right');if(hasBorder){label=markSelected(label);}
return label;},callback:function(){var hasBorder=checkSelectionBorders(this,'right');prepareBorder.call(this,this.getSelectedRange(),'right',hasBorder);},disabled:false},{key:'borders:bottom',name:function(){var label='Bottom';var hasBorder=checkSelectionBorders(this,'bottom');if(hasBorder){label=markSelected(label);}
return label;},callback:function(){var hasBorder=checkSelectionBorders(this,'bottom');prepareBorder.call(this,this.getSelectedRange(),'bottom',hasBorder);},disabled:false},{key:'borders:left',name:function(){var label='Left';var hasBorder=checkSelectionBorders(this,'left');if(hasBorder){label=markSelected(label);}
return label;},callback:function(){var hasBorder=checkSelectionBorders(this,'left');prepareBorder.call(this,this.getSelectedRange(),'left',hasBorder);},disabled:false},{key:'borders:no_borders',name:'Remove border(s)',callback:function(){prepareBorder.call(this,this.getSelectedRange(),'noBorders');},disabled:function(){return!checkSelectionBorders(this);}}]}});};Handsontable.hooks.add('beforeInit',init);Handsontable.hooks.add('afterContextMenuDefaultOptions',addBordersOptionsToContextMenu);Handsontable.hooks.add('afterInit',function(){var customBorders=this.getSettings().customBorders;if(customBorders){for(var i=0;i<customBorders.length;i++){if(customBorders[i].range){prepareBorderFromCustomAddedRange.call(this,customBorders[i]);}else{prepareBorderFromCustomAdded.call(this,customBorders[i].row,customBorders[i].col,customBorders[i]);}}
this.render();this.view.wt.draw(true);}});Handsontable.CustomBorders=CustomBorders;},{"3rdparty/walkontable/src/cell/range":6,"3rdparty/walkontable/src/selection":18,"plugins":55}],73:[function(require,module,exports){"use strict";Object.defineProperties(exports,{DragToScroll:{get:function(){return DragToScroll;}},__esModule:{value:true}});var $___46__46__47__46__46__47_eventManager__,$___46__46__47__46__46__47_plugins__;var eventManagerObject=($___46__46__47__46__46__47_eventManager__=require("eventManager"),$___46__46__47__46__46__47_eventManager__&&$___46__46__47__46__46__47_eventManager__.__esModule&&$___46__46__47__46__46__47_eventManager__||{default:$___46__46__47__46__46__47_eventManager__}).eventManager;var registerPlugin=($___46__46__47__46__46__47_plugins__=require("plugins"),$___46__46__47__46__46__47_plugins__&&$___46__46__47__46__46__47_plugins__.__esModule&&$___46__46__47__46__46__47_plugins__||{default:$___46__46__47__46__46__47_plugins__}).registerPlugin;;Handsontable.plugins.DragToScroll=DragToScroll;function DragToScroll(){this.boundaries=null;this.callback=null;}
DragToScroll.prototype.setBoundaries=function(boundaries){this.boundaries=boundaries;};DragToScroll.prototype.setCallback=function(callback){this.callback=callback;};DragToScroll.prototype.check=function(x,y){var diffX=0;var diffY=0;if(y<this.boundaries.top){diffY=y-this.boundaries.top;}else if(y>this.boundaries.bottom){diffY=y-this.boundaries.bottom;}
if(x<this.boundaries.left){diffX=x-this.boundaries.left;}else if(x>this.boundaries.right){diffX=x-this.boundaries.right;}
this.callback(diffX,diffY);};var dragToScroll;var instance;var setupListening=function(instance){instance.dragToScrollListening=false;var scrollHandler=instance.view.wt.wtTable.holder;dragToScroll=new DragToScroll();if(scrollHandler===window){return;}else{dragToScroll.setBoundaries(scrollHandler.getBoundingClientRect());}
dragToScroll.setCallback(function(scrollX,scrollY){if(scrollX<0){scrollHandler.scrollLeft-=50;}else if(scrollX>0){scrollHandler.scrollLeft+=50;}
if(scrollY<0){scrollHandler.scrollTop-=20;}else if(scrollY>0){scrollHandler.scrollTop+=20;}});instance.dragToScrollListening=true;};Handsontable.hooks.add('afterInit',function(){var instance=this;var eventManager=eventManagerObject(this);eventManager.addEventListener(document,'mouseup',function(){instance.dragToScrollListening=false;});eventManager.addEventListener(document,'mousemove',function(event){if(instance.dragToScrollListening){dragToScroll.check(event.clientX,event.clientY);}});});Handsontable.hooks.add('afterDestroy',function(){eventManagerObject(this).clear();});Handsontable.hooks.add('afterOnCellMouseDown',function(){setupListening(this);});Handsontable.hooks.add('afterOnCellCornerMouseDown',function(){setupListening(this);});Handsontable.plugins.DragToScroll=DragToScroll;},{"eventManager":40,"plugins":55}],74:[function(require,module,exports){"use strict";Object.defineProperties(exports,{ManualColumnFreeze:{get:function(){return ManualColumnFreeze;}},__esModule:{value:true}});var $___46__46__47__95_base__,$___46__46__47__46__46__47_plugins__;var BasePlugin=($___46__46__47__95_base__=require("_base"),$___46__46__47__95_base__&&$___46__46__47__95_base__.__esModule&&$___46__46__47__95_base__||{default:$___46__46__47__95_base__}).default;var registerPlugin=($___46__46__47__46__46__47_plugins__=require("plugins"),$___46__46__47__46__46__47_plugins__&&$___46__46__47__46__46__47_plugins__.__esModule&&$___46__46__47__46__46__47_plugins__||{default:$___46__46__47__46__46__47_plugins__}).registerPlugin;var ManualColumnFreeze=function ManualColumnFreeze(hotInstance){$traceurRuntime.superConstructor($ManualColumnFreeze).call(this,hotInstance);};var $ManualColumnFreeze=ManualColumnFreeze;($traceurRuntime.createClass)(ManualColumnFreeze,{isEnabled:function(){return!!this.hot.getSettings().manualColumnFreeze;},enablePlugin:function(){var $__2=this;if(this.enabled){return;}
this.addHook('modifyCol',(function(col){return $__2.onModifyCol(col);}));this.addHook('afterContextMenuDefaultOptions',(function(defaultOptions){return $__2.addContextMenuEntry(defaultOptions);}));$traceurRuntime.superGet(this,$ManualColumnFreeze.prototype,"enablePlugin").call(this);},disablePlugin:function(){$traceurRuntime.superGet(this,$ManualColumnFreeze.prototype,"disablePlugin").call(this);},init:function(){$traceurRuntime.superGet(this,$ManualColumnFreeze.prototype,"init").call(this);if(typeof this.hot.manualColumnPositionsPluginUsages==='undefined'){this.hot.manualColumnPositionsPluginUsages=['manualColumnFreeze'];}else{this.hot.manualColumnPositionsPluginUsages.push('manualColumnFreeze');}
this.fixedColumnsCount=this.hot.getSettings().fixedColumnsLeft;},onModifyCol:function(column){if(this.hot.manualColumnPositionsPluginUsages.length>1){return column;}
return this.getModifiedColumnIndex(column);},getModifiedColumnIndex:function(column){return this.hot.manualColumnPositions[column];},addContextMenuEntry:function(defaultOptions){var _this=this;defaultOptions.items.push(Handsontable.plugins.ContextMenu.SEPARATOR,{key:'freeze_column',name:function(){var selectedColumn=_this.hot.getSelected()[1];if(selectedColumn>_this.fixedColumnsCount-1){return'Freeze this column';}else{return'Unfreeze this column';}},disabled:function(){var selection=_this.hot.getSelected();return selection[1]!==selection[3];},callback:function(){var selectedColumn=_this.hot.getSelected()[1];if(selectedColumn>_this.fixedColumnsCount-1){_this.freezeColumn(selectedColumn);}else{_this.unfreezeColumn(selectedColumn);}}});},freezeColumn:function(column){if(column<=this.fixedColumnsCount-1){return;}
var modifiedColumn=this.getModifiedColumnIndex(column)||column;this.checkPositionData(modifiedColumn);this.modifyColumnOrder(modifiedColumn,column,null,'freeze');this.addFixedColumn();this.hot.view.wt.wtOverlays.leftOverlay.refresh();this.hot.view.wt.wtOverlays.adjustElementsSize();},unfreezeColumn:function(column){if(column>this.fixedColumnsCount-1){return;}
var returnCol=this.getBestColumnReturnPosition(column);var modifiedColumn=this.getModifiedColumnIndex(column)||column;this.checkPositionData(modifiedColumn);this.modifyColumnOrder(modifiedColumn,column,returnCol,'unfreeze');this.removeFixedColumn();this.hot.view.wt.wtOverlays.leftOverlay.refresh();this.hot.view.wt.wtOverlays.adjustElementsSize();},addFixedColumn:function(){this.hot.updateSettings({fixedColumnsLeft:this.fixedColumnsCount+1});this.fixedColumnsCount++;},removeFixedColumn:function(){this.hot.updateSettings({fixedColumnsLeft:this.fixedColumnsCount-1});this.fixedColumnsCount--;},checkPositionData:function(column){if(!this.hot.manualColumnPositions||this.hot.manualColumnPositions.length===0){if(!this.hot.manualColumnPositions){this.hot.manualColumnPositions=[];}}
if(column){if(!this.hot.manualColumnPositions[column]){this.createPositionData(column+1);}}else{this.createPositionData(this.hot.countCols());}},createPositionData:function(length){if(this.hot.manualColumnPositions.length<length){for(var i=this.hot.manualColumnPositions.length;i<length;i++){this.hot.manualColumnPositions[i]=i;}}},modifyColumnOrder:function(column,actualColumn,returnColumn,action){if(returnColumn==null){returnColumn=column;}
if(action==='freeze'){this.hot.manualColumnPositions.splice(this.fixedColumnsCount,0,this.hot.manualColumnPositions.splice(actualColumn,1)[0]);}else if(action==='unfreeze'){this.hot.manualColumnPositions.splice(returnColumn,0,this.hot.manualColumnPositions.splice(actualColumn,1)[0]);}},getBestColumnReturnPosition:function(column){var i=this.fixedColumnsCount;var j=this.getModifiedColumnIndex(i);var initialCol=this.getModifiedColumnIndex(column);while(j<initialCol){i++;j=this.getModifiedColumnIndex(i);}
return i-1;}},{},BasePlugin);;registerPlugin('manualColumnFreeze',ManualColumnFreeze);},{"_base":56,"plugins":55}],75:[function(require,module,exports){"use strict";Object.defineProperties(exports,{ManualColumnMove:{get:function(){return ManualColumnMove;}},__esModule:{value:true}});var $___46__46__47__46__46__47_helpers_47_dom_47_element__,$___46__46__47__46__46__47_eventManager__,$___46__46__47__46__46__47_helpers_47_dom_47_event__,$___46__46__47__46__46__47_plugins__;var $__0=($___46__46__47__46__46__47_helpers_47_dom_47_element__=require("helpers/dom/element"),$___46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_element__||{default:$___46__46__47__46__46__47_helpers_47_dom_47_element__}),addClass=$__0.addClass,hasClass=$__0.hasClass,removeClass=$__0.removeClass;var eventManagerObject=($___46__46__47__46__46__47_eventManager__=require("eventManager"),$___46__46__47__46__46__47_eventManager__&&$___46__46__47__46__46__47_eventManager__.__esModule&&$___46__46__47__46__46__47_eventManager__||{default:$___46__46__47__46__46__47_eventManager__}).eventManager;var $__2=($___46__46__47__46__46__47_helpers_47_dom_47_event__=require("helpers/dom/event"),$___46__46__47__46__46__47_helpers_47_dom_47_event__&&$___46__46__47__46__46__47_helpers_47_dom_47_event__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_event__||{default:$___46__46__47__46__46__47_helpers_47_dom_47_event__}),pageX=$__2.pageX,pageY=$__2.pageY;var registerPlugin=($___46__46__47__46__46__47_plugins__=require("plugins"),$___46__46__47__46__46__47_plugins__&&$___46__46__47__46__46__47_plugins__.__esModule&&$___46__46__47__46__46__47_plugins__||{default:$___46__46__47__46__46__47_plugins__}).registerPlugin;;function ManualColumnMove(){var startCol,endCol,startX,startOffset,currentCol,instance,currentTH,handle=document.createElement('DIV'),guide=document.createElement('DIV'),eventManager=eventManagerObject(this);handle.className='manualColumnMover';guide.className='manualColumnMoverGuide';var saveManualColumnPositions=function(){var instance=this;Handsontable.hooks.run(instance,'persistentStateSave','manualColumnPositions',instance.manualColumnPositions);};var loadManualColumnPositions=function(){var instance=this;var storedState={};Handsontable.hooks.run(instance,'persistentStateLoad','manualColumnPositions',storedState);return storedState.value;};function setupHandlePosition(TH){instance=this;currentTH=TH;var col=this.view.wt.wtTable.getCoords(TH).col;if(col>=0){currentCol=col;var box=currentTH.getBoundingClientRect();startOffset=box.left;handle.style.top=box.top+'px';handle.style.left=startOffset+'px';instance.rootElement.appendChild(handle);}}
function refreshHandlePosition(TH,delta){var box=TH.getBoundingClientRect();var handleWidth=6;if(delta>0){handle.style.left=(box.left+box.width-handleWidth)+'px';}else{handle.style.left=box.left+'px';}}
function setupGuidePosition(){var instance=this;addClass(handle,'active');addClass(guide,'active');var box=currentTH.getBoundingClientRect();guide.style.width=box.width+'px';guide.style.height=instance.view.maximumVisibleElementHeight(0)+'px';guide.style.top=handle.style.top;guide.style.left=startOffset+'px';instance.rootElement.appendChild(guide);}
function refreshGuidePosition(diff){guide.style.left=startOffset+diff+'px';}
function hideHandleAndGuide(){removeClass(handle,'active');removeClass(guide,'active');}
var checkColumnHeader=function(element){if(element.tagName!='BODY'){if(element.parentNode.tagName=='THEAD'){return true;}else{element=element.parentNode;return checkColumnHeader(element);}}
return false;};var getTHFromTargetElement=function(element){if(element.tagName!='TABLE'){if(element.tagName=='TH'){return element;}else{return getTHFromTargetElement(element.parentNode);}}
return null;};var bindEvents=function(){var instance=this;var pressed;eventManager.addEventListener(instance.rootElement,'mouseover',function(e){if(checkColumnHeader(e.target)){var th=getTHFromTargetElement(e.target);if(th){if(pressed){var col=instance.view.wt.wtTable.getCoords(th).col;if(col>=0){endCol=col;refreshHandlePosition(e.target,endCol-startCol);}}else{setupHandlePosition.call(instance,th);}}}});eventManager.addEventListener(instance.rootElement,'mousedown',function(e){if(hasClass(e.target,'manualColumnMover')){startX=pageX(e);setupGuidePosition.call(instance);pressed=instance;startCol=currentCol;endCol=currentCol;}});eventManager.addEventListener(window,'mousemove',function(e){if(pressed){refreshGuidePosition(pageX(e)-startX);}});eventManager.addEventListener(window,'mouseup',function(e){if(pressed){hideHandleAndGuide();pressed=false;createPositionData(instance.manualColumnPositions,instance.countCols());instance.manualColumnPositions.splice(endCol,0,instance.manualColumnPositions.splice(startCol,1)[0]);Handsontable.hooks.run(instance,'beforeColumnMove',startCol,endCol);instance.forceFullRender=true;instance.view.render();saveManualColumnPositions.call(instance);Handsontable.hooks.run(instance,'afterColumnMove',startCol,endCol);setupHandlePosition.call(instance,currentTH);}});instance.addHook('afterDestroy',unbindEvents);};var unbindEvents=function(){eventManager.clear();};var createPositionData=function(positionArr,len){if(positionArr.length<len){for(var i=positionArr.length;i<len;i++){positionArr[i]=i;}}};this.beforeInit=function(){this.manualColumnPositions=[];};this.init=function(source){var instance=this;var manualColMoveEnabled=!!(this.getSettings().manualColumnMove);if(manualColMoveEnabled){var initialManualColumnPositions=this.getSettings().manualColumnMove;var loadedManualColumnPositions=loadManualColumnPositions.call(instance);if(typeof loadedManualColumnPositions!='undefined'){this.manualColumnPositions=loadedManualColumnPositions;}else if(Array.isArray(initialManualColumnPositions)){this.manualColumnPositions=initialManualColumnPositions;}else{this.manualColumnPositions=[];}
if(source==='afterInit'||source==='afterUpdateSettings'&&eventManager.context.eventListeners.length===0){if(typeof instance.manualColumnPositionsPluginUsages==='undefined'){instance.manualColumnPositionsPluginUsages=['manualColumnMove'];}else{instance.manualColumnPositionsPluginUsages.push('manualColumnMove');}
bindEvents.call(this);if(this.manualColumnPositions.length>0){this.forceFullRender=true;this.render();}}}else{var pluginUsagesIndex=instance.manualColumnPositionsPluginUsages?instance.manualColumnPositionsPluginUsages.indexOf('manualColumnMove'):-1;if(pluginUsagesIndex>-1){unbindEvents.call(this);this.manualColumnPositions=[];instance.manualColumnPositionsPluginUsages[pluginUsagesIndex]=void 0;}}};this.modifyCol=function(col){if(this.getSettings().manualColumnMove){if(typeof this.manualColumnPositions[col]==='undefined'){createPositionData(this.manualColumnPositions,col+1);}
return this.manualColumnPositions[col];}
return col;};this.afterRemoveCol=function(index,amount){if(!this.getSettings().manualColumnMove){return;}
var rmindx,colpos=this.manualColumnPositions;rmindx=colpos.splice(index,amount);colpos=colpos.map(function(colpos){var i,newpos=colpos;for(i=0;i<rmindx.length;i++){if(colpos>rmindx[i]){newpos--;}}
return newpos;});this.manualColumnPositions=colpos;};this.afterCreateCol=function(index,amount){if(!this.getSettings().manualColumnMove){return;}
var colpos=this.manualColumnPositions;if(!colpos.length){return;}
var addindx=[];for(var i=0;i<amount;i++){addindx.push(index+i);}
if(index>=colpos.length){colpos.concat(addindx);}else{colpos=colpos.map(function(colpos){return(colpos>=index)?(colpos+amount):colpos;});colpos.splice.apply(colpos,[index,0].concat(addindx));}
this.manualColumnPositions=colpos;};}
var htManualColumnMove=new ManualColumnMove();Handsontable.hooks.add('beforeInit',htManualColumnMove.beforeInit);Handsontable.hooks.add('afterInit',function(){htManualColumnMove.init.call(this,'afterInit');});Handsontable.hooks.add('afterUpdateSettings',function(){htManualColumnMove.init.call(this,'afterUpdateSettings');});Handsontable.hooks.add('modifyCol',htManualColumnMove.modifyCol);Handsontable.hooks.add('afterRemoveCol',htManualColumnMove.afterRemoveCol);Handsontable.hooks.add('afterCreateCol',htManualColumnMove.afterCreateCol);Handsontable.hooks.register('beforeColumnMove');Handsontable.hooks.register('afterColumnMove');},{"eventManager":40,"helpers/dom/element":44,"helpers/dom/event":45,"plugins":55}],76:[function(require,module,exports){"use strict";Object.defineProperties(exports,{ManualColumnResize:{get:function(){return ManualColumnResize;}},__esModule:{value:true}});var $___46__46__47__95_base_46_js__,$___46__46__47__46__46__47_helpers_47_dom_47_element__,$___46__46__47__46__46__47_eventManager__,$___46__46__47__46__46__47_helpers_47_dom_47_event__,$___46__46__47__46__46__47_plugins__;var BasePlugin=($___46__46__47__95_base_46_js__=require("_base.js"),$___46__46__47__95_base_46_js__&&$___46__46__47__95_base_46_js__.__esModule&&$___46__46__47__95_base_46_js__||{default:$___46__46__47__95_base_46_js__}).default;var $__1=($___46__46__47__46__46__47_helpers_47_dom_47_element__=require("helpers/dom/element"),$___46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_element__||{default:$___46__46__47__46__46__47_helpers_47_dom_47_element__}),addClass=$__1.addClass,hasClass=$__1.hasClass,removeClass=$__1.removeClass;var eventManagerObject=($___46__46__47__46__46__47_eventManager__=require("eventManager"),$___46__46__47__46__46__47_eventManager__&&$___46__46__47__46__46__47_eventManager__.__esModule&&$___46__46__47__46__46__47_eventManager__||{default:$___46__46__47__46__46__47_eventManager__}).eventManager;var $__3=($___46__46__47__46__46__47_helpers_47_dom_47_event__=require("helpers/dom/event"),$___46__46__47__46__46__47_helpers_47_dom_47_event__&&$___46__46__47__46__46__47_helpers_47_dom_47_event__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_event__||{default:$___46__46__47__46__46__47_helpers_47_dom_47_event__}),pageX=$__3.pageX,pageY=$__3.pageY;var registerPlugin=($___46__46__47__46__46__47_plugins__=require("plugins"),$___46__46__47__46__46__47_plugins__&&$___46__46__47__46__46__47_plugins__.__esModule&&$___46__46__47__46__46__47_plugins__||{default:$___46__46__47__46__46__47_plugins__}).registerPlugin;var ManualColumnResize=function ManualColumnResize(hotInstance){$traceurRuntime.superConstructor($ManualColumnResize).call(this,hotInstance);this.currentTH=null;this.currentCol=null;this.currentWidth=null;this.newSize=null;this.startY=null;this.startWidth=null;this.startOffset=null;this.handle=document.createElement('DIV');this.guide=document.createElement('DIV');this.eventManager=eventManagerObject(this);this.pressed=null;this.dblclick=0;this.autoresizeTimeout=null;this.manualColumnWidths=[];addClass(this.handle,'manualColumnResizer');addClass(this.guide,'manualColumnResizerGuide');};var $ManualColumnResize=ManualColumnResize;($traceurRuntime.createClass)(ManualColumnResize,{isEnabled:function(){return this.hot.getSettings().manualColumnResize;},enablePlugin:function(){var $__5=this;if(this.enabled){return;}
this.manualColumnWidths=[];var initialColumnWidth=this.hot.getSettings().manualColumnResize;var loadedManualColumnWidths=this.loadManualColumnWidths();this.addHook('modifyColWidth',(function(width,col){return $__5.onModifyColWidth(width,col);}));if(typeof loadedManualColumnWidths!='undefined'){this.manualColumnWidths=loadedManualColumnWidths;}else if(Array.isArray(initialColumnWidth)){this.manualColumnWidths=initialColumnWidth;}else{this.manualColumnWidths=[];}
Handsontable.hooks.register('beforeColumnResize');Handsontable.hooks.register('afterColumnResize');this.bindEvents();$traceurRuntime.superGet(this,$ManualColumnResize.prototype,"enablePlugin").call(this);},updatePlugin:function(){var initialColumnWidth=this.hot.getSettings().manualColumnResize;if(Array.isArray(initialColumnWidth)){this.manualColumnWidths=initialColumnWidth;}else{this.manualColumnWidths=[];}},disablePlugin:function(){$traceurRuntime.superGet(this,$ManualColumnResize.prototype,"disablePlugin").call(this);},saveManualColumnWidths:function(){this.hot.runHooks('persistentStateSave','manualColumnWidths',this.manualColumnWidths);},loadManualColumnWidths:function(){var storedState={};this.hot.runHooks('persistentStateLoad','manualColumnWidths',storedState);return storedState.value;},setupHandlePosition:function(TH){this.currentTH=TH;var col=this.hot.view.wt.wtTable.getCoords(TH).col;if(col>=0){var box=this.currentTH.getBoundingClientRect();this.currentCol=col;this.startOffset=box.left-6;this.startWidth=parseInt(box.width,10);this.handle.style.top=box.top+'px';this.handle.style.left=this.startOffset+this.startWidth+'px';this.hot.rootElement.appendChild(this.handle);}},refreshHandlePosition:function(){this.handle.style.left=this.startOffset+this.currentWidth+'px';},setupGuidePosition:function(){addClass(this.handle,'active');addClass(this.guide,'active');this.guide.style.top=this.handle.style.top;this.guide.style.left=this.handle.style.left;this.guide.style.height=this.hot.view.maximumVisibleElementHeight(0)+'px';this.hot.rootElement.appendChild(this.guide);},refreshGuidePosition:function(){this.guide.style.left=this.handle.style.left;},hideHandleAndGuide:function(){removeClass(this.handle,'active');removeClass(this.guide,'active');},checkIfColumnHeader:function(element){if(element.tagName!='BODY'){if(element.parentNode.tagName=='THEAD'){return true;}else{element=element.parentNode;return this.checkIfColumnHeader(element);}}
return false;},getTHFromTargetElement:function(element){if(element.tagName!='TABLE'){if(element.tagName=='TH'){return element;}else{return this.getTHFromTargetElement(element.parentNode);}}
return null;},onMouseOver:function(event){if(this.checkIfColumnHeader(event.target)){var th=this.getTHFromTargetElement(event.target);if(!th){return;}
var colspan=th.getAttribute('colspan');if(th&&(colspan===null||colspan===1)){if(!this.pressed){this.setupHandlePosition(th);}}}},afterMouseDownTimeout:function(){if(this.dblclick>=2){var hookNewSize=this.hot.runHooks('beforeColumnResize',this.currentCol,this.newSize,true);if(hookNewSize!==void 0){this.newSize=hookNewSize;}
this.setManualSize(this.currentCol,this.newSize);this.hot.forceFullRender=true;this.hot.view.render();this.hot.view.wt.wtOverlays.adjustElementsSize(true);this.hot.runHooks('afterColumnResize',this.currentCol,this.newSize,true);}
this.dblclick=0;this.autoresizeTimeout=null;},onMouseDown:function(event){var $__5=this;if(hasClass(event.target,'manualColumnResizer')){this.setupGuidePosition();this.pressed=this.hot;if(this.autoresizeTimeout===null){this.autoresizeTimeout=setTimeout((function(){return $__5.afterMouseDownTimeout();}),500);this.hot._registerTimeout(this.autoresizeTimeout);}
this.dblclick++;this.startX=pageX(event);this.newSize=this.startWidth;}},onMouseMove:function(event){if(this.pressed){this.currentWidth=this.startWidth+(pageX(event)-this.startX);this.newSize=this.setManualSize(this.currentCol,this.currentWidth);this.refreshHandlePosition();this.refreshGuidePosition();}},onMouseUp:function(event){if(this.pressed){this.hideHandleAndGuide();this.pressed=false;if(this.newSize!=this.startWidth){this.hot.runHooks('beforeColumnResize',this.currentCol,this.newSize);this.hot.forceFullRender=true;this.hot.view.render();this.hot.view.wt.wtOverlays.adjustElementsSize(true);this.saveManualColumnWidths();this.hot.runHooks('afterColumnResize',this.currentCol,this.newSize);}
this.setupHandlePosition(this.currentTH);}},bindEvents:function(){var $__5=this;this.eventManager.addEventListener(this.hot.rootElement,'mouseover',(function(e){return $__5.onMouseOver(e);}));this.eventManager.addEventListener(this.hot.rootElement,'mousedown',(function(e){return $__5.onMouseDown(e);}));this.eventManager.addEventListener(window,'mousemove',(function(e){return $__5.onMouseMove(e);}));this.eventManager.addEventListener(window,'mouseup',(function(e){return $__5.onMouseUp(e);}));},setManualSize:function(column,width){width=Math.max(width,20);column=this.hot.runHooks('modifyCol',column);this.manualColumnWidths[column]=width;return width;},onModifyColWidth:function(width,column){if(this.enabled){column=this.hot.runHooks('modifyCol',column);if(this.hot.getSettings().manualColumnResize&&this.manualColumnWidths[column]){return this.manualColumnWidths[column];}}
return width;}},{},BasePlugin);;registerPlugin('manualColumnResize',ManualColumnResize);},{"_base.js":56,"eventManager":40,"helpers/dom/element":44,"helpers/dom/event":45,"plugins":55}],77:[function(require,module,exports){"use strict";Object.defineProperties(exports,{ManualRowMove:{get:function(){return ManualRowMove;}},__esModule:{value:true}});var $___46__46__47__46__46__47_helpers_47_dom_47_element__,$___46__46__47__46__46__47_eventManager__,$___46__46__47__46__46__47_helpers_47_dom_47_event__,$___46__46__47__46__46__47_plugins__;var $__0=($___46__46__47__46__46__47_helpers_47_dom_47_element__=require("helpers/dom/element"),$___46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_element__||{default:$___46__46__47__46__46__47_helpers_47_dom_47_element__}),addClass=$__0.addClass,hasClass=$__0.hasClass,removeClass=$__0.removeClass;var eventManagerObject=($___46__46__47__46__46__47_eventManager__=require("eventManager"),$___46__46__47__46__46__47_eventManager__&&$___46__46__47__46__46__47_eventManager__.__esModule&&$___46__46__47__46__46__47_eventManager__||{default:$___46__46__47__46__46__47_eventManager__}).eventManager;var $__2=($___46__46__47__46__46__47_helpers_47_dom_47_event__=require("helpers/dom/event"),$___46__46__47__46__46__47_helpers_47_dom_47_event__&&$___46__46__47__46__46__47_helpers_47_dom_47_event__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_event__||{default:$___46__46__47__46__46__47_helpers_47_dom_47_event__}),pageX=$__2.pageX,pageY=$__2.pageY;var registerPlugin=($___46__46__47__46__46__47_plugins__=require("plugins"),$___46__46__47__46__46__47_plugins__&&$___46__46__47__46__46__47_plugins__.__esModule&&$___46__46__47__46__46__47_plugins__||{default:$___46__46__47__46__46__47_plugins__}).registerPlugin;;function ManualRowMove(){var startRow,endRow,startY,startOffset,currentRow,currentTH,handle=document.createElement('DIV'),guide=document.createElement('DIV'),eventManager=eventManagerObject(this);handle.className='manualRowMover';guide.className='manualRowMoverGuide';var saveManualRowPositions=function(){var instance=this;Handsontable.hooks.run(instance,'persistentStateSave','manualRowPositions',instance.manualRowPositions);};var loadManualRowPositions=function(){var instance=this,storedState={};Handsontable.hooks.run(instance,'persistentStateLoad','manualRowPositions',storedState);return storedState.value;};function setupHandlePosition(TH){var instance=this;currentTH=TH;var row=this.view.wt.wtTable.getCoords(TH).row;if(row>=0){currentRow=row;var box=currentTH.getBoundingClientRect();startOffset=box.top;handle.style.top=startOffset+'px';handle.style.left=box.left+'px';instance.rootElement.appendChild(handle);}}
function refreshHandlePosition(TH,delta){var box=TH.getBoundingClientRect();var handleHeight=6;if(delta>0){handle.style.top=(box.top+box.height-handleHeight)+'px';}else{handle.style.top=box.top+'px';}}
function setupGuidePosition(){var instance=this;addClass(handle,'active');addClass(guide,'active');var box=currentTH.getBoundingClientRect();guide.style.width=instance.view.maximumVisibleElementWidth(0)+'px';guide.style.height=box.height+'px';guide.style.top=startOffset+'px';guide.style.left=handle.style.left;instance.rootElement.appendChild(guide);}
function refreshGuidePosition(diff){guide.style.top=startOffset+diff+'px';}
function hideHandleAndGuide(){removeClass(handle,'active');removeClass(guide,'active');}
var checkRowHeader=function(element){if(element.tagName!='BODY'){if(element.parentNode.tagName=='TBODY'){return true;}else{element=element.parentNode;return checkRowHeader(element);}}
return false;};var getTHFromTargetElement=function(element){if(element.tagName!='TABLE'){if(element.tagName=='TH'){return element;}else{return getTHFromTargetElement(element.parentNode);}}
return null;};var bindEvents=function(){var instance=this;var pressed;eventManager.addEventListener(instance.rootElement,'mouseover',function(e){if(checkRowHeader(e.target)){var th=getTHFromTargetElement(e.target);if(th){if(pressed){endRow=instance.view.wt.wtTable.getCoords(th).row;refreshHandlePosition(th,endRow-startRow);}else{setupHandlePosition.call(instance,th);}}}});eventManager.addEventListener(instance.rootElement,'mousedown',function(e){if(hasClass(e.target,'manualRowMover')){startY=pageY(e);setupGuidePosition.call(instance);pressed=instance;startRow=currentRow;endRow=currentRow;}});eventManager.addEventListener(window,'mousemove',function(e){if(pressed){refreshGuidePosition(pageY(e)-startY);}});eventManager.addEventListener(window,'mouseup',function(e){if(pressed){hideHandleAndGuide();pressed=false;createPositionData(instance.manualRowPositions,instance.countRows());instance.manualRowPositions.splice(endRow,0,instance.manualRowPositions.splice(startRow,1)[0]);Handsontable.hooks.run(instance,'beforeRowMove',startRow,endRow);instance.forceFullRender=true;instance.view.render();saveManualRowPositions.call(instance);Handsontable.hooks.run(instance,'afterRowMove',startRow,endRow);setupHandlePosition.call(instance,currentTH);}});instance.addHook('afterDestroy',unbindEvents);};var unbindEvents=function(){eventManager.clear();};var createPositionData=function(positionArr,len){if(positionArr.length<len){for(var i=positionArr.length;i<len;i++){positionArr[i]=i;}}};this.beforeInit=function(){this.manualRowPositions=[];};this.init=function(source){var instance=this;var manualRowMoveEnabled=!!(instance.getSettings().manualRowMove);if(manualRowMoveEnabled){var initialManualRowPositions=instance.getSettings().manualRowMove;var loadedManualRowPostions=loadManualRowPositions.call(instance);if(typeof instance.manualRowPositionsPluginUsages==='undefined'){instance.manualRowPositionsPluginUsages=['manualColumnMove'];}else{instance.manualRowPositionsPluginUsages.push('manualColumnMove');}
if(typeof loadedManualRowPostions!='undefined'){this.manualRowPositions=loadedManualRowPostions;}else if(Array.isArray(initialManualRowPositions)){this.manualRowPositions=initialManualRowPositions;}else{this.manualRowPositions=[];}
if(source==='afterInit'||source==='afterUpdateSettings'&&eventManager.context.eventListeners.length===0){bindEvents.call(this);if(this.manualRowPositions.length>0){instance.forceFullRender=true;instance.render();}}}else{var pluginUsagesIndex=instance.manualRowPositionsPluginUsages?instance.manualRowPositionsPluginUsages.indexOf('manualColumnMove'):-1;if(pluginUsagesIndex>-1){unbindEvents.call(this);instance.manualRowPositions=[];instance.manualRowPositionsPluginUsages[pluginUsagesIndex]=void 0;}}};this.modifyRow=function(row){var instance=this;if(instance.getSettings().manualRowMove){if(typeof instance.manualRowPositions[row]==='undefined'){createPositionData(this.manualRowPositions,row+1);}
return instance.manualRowPositions[row];}
return row;};}
var htManualRowMove=new ManualRowMove();Handsontable.hooks.add('beforeInit',htManualRowMove.beforeInit);Handsontable.hooks.add('afterInit',function(){htManualRowMove.init.call(this,'afterInit');});Handsontable.hooks.add('afterUpdateSettings',function(){htManualRowMove.init.call(this,'afterUpdateSettings');});Handsontable.hooks.add('modifyRow',htManualRowMove.modifyRow);Handsontable.hooks.register('beforeRowMove');Handsontable.hooks.register('afterRowMove');},{"eventManager":40,"helpers/dom/element":44,"helpers/dom/event":45,"plugins":55}],78:[function(require,module,exports){"use strict";Object.defineProperties(exports,{ManualRowResize:{get:function(){return ManualRowResize;}},__esModule:{value:true}});var $___46__46__47__95_base_46_js__,$___46__46__47__46__46__47_helpers_47_dom_47_element__,$___46__46__47__46__46__47_eventManager__,$___46__46__47__46__46__47_helpers_47_dom_47_event__,$___46__46__47__46__46__47_plugins__;var BasePlugin=($___46__46__47__95_base_46_js__=require("_base.js"),$___46__46__47__95_base_46_js__&&$___46__46__47__95_base_46_js__.__esModule&&$___46__46__47__95_base_46_js__||{default:$___46__46__47__95_base_46_js__}).default;var $__1=($___46__46__47__46__46__47_helpers_47_dom_47_element__=require("helpers/dom/element"),$___46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_element__||{default:$___46__46__47__46__46__47_helpers_47_dom_47_element__}),addClass=$__1.addClass,hasClass=$__1.hasClass,removeClass=$__1.removeClass;var eventManagerObject=($___46__46__47__46__46__47_eventManager__=require("eventManager"),$___46__46__47__46__46__47_eventManager__&&$___46__46__47__46__46__47_eventManager__.__esModule&&$___46__46__47__46__46__47_eventManager__||{default:$___46__46__47__46__46__47_eventManager__}).eventManager;var $__3=($___46__46__47__46__46__47_helpers_47_dom_47_event__=require("helpers/dom/event"),$___46__46__47__46__46__47_helpers_47_dom_47_event__&&$___46__46__47__46__46__47_helpers_47_dom_47_event__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_event__||{default:$___46__46__47__46__46__47_helpers_47_dom_47_event__}),pageX=$__3.pageX,pageY=$__3.pageY;var registerPlugin=($___46__46__47__46__46__47_plugins__=require("plugins"),$___46__46__47__46__46__47_plugins__&&$___46__46__47__46__46__47_plugins__.__esModule&&$___46__46__47__46__46__47_plugins__||{default:$___46__46__47__46__46__47_plugins__}).registerPlugin;var ManualRowResize=function ManualRowResize(hotInstance){$traceurRuntime.superConstructor($ManualRowResize).call(this,hotInstance);this.currentTH=null;this.currentRow=null;this.currentHeight=null;this.newSize=null;this.startY=null;this.startHeight=null;this.startOffset=null;this.handle=document.createElement('DIV');this.guide=document.createElement('DIV');this.eventManager=eventManagerObject(this);this.pressed=null;this.dblclick=0;this.autoresizeTimeout=null;this.manualRowHeights=[];addClass(this.handle,'manualRowResizer');addClass(this.guide,'manualRowResizerGuide');};var $ManualRowResize=ManualRowResize;($traceurRuntime.createClass)(ManualRowResize,{isEnabled:function(){return this.hot.getSettings().manualRowResize;},enablePlugin:function(){var $__5=this;if(this.enabled){return;}
this.manualRowHeights=[];var initialRowHeights=this.hot.getSettings().manualRowResize;var loadedManualRowHeights=this.loadManualRowHeights();if(typeof loadedManualRowHeights!='undefined'){this.manualRowHeights=loadedManualRowHeights;}else if(Array.isArray(initialRowHeights)){this.manualRowHeights=initialRowHeights;}else{this.manualRowHeights=[];}
this.addHook('modifyRowHeight',(function(height,row){return $__5.onModifyRowHeight(height,row);}));Handsontable.hooks.register('beforeRowResize');Handsontable.hooks.register('afterRowResize');this.bindEvents();$traceurRuntime.superGet(this,$ManualRowResize.prototype,"enablePlugin").call(this);},updatePlugin:function(){var initialRowHeights=this.hot.getSettings().manualRowResize;if(Array.isArray(initialRowHeights)){this.manualRowHeights=initialRowHeights;}else{this.manualRowHeights=[];}},disablePlugin:function(){$traceurRuntime.superGet(this,$ManualRowResize.prototype,"disablePlugin").call(this);},saveManualRowHeights:function(){this.hot.runHooks('persistentStateSave','manualRowHeights',this.manualRowHeights);},loadManualRowHeights:function(){var storedState={};this.hot.runHooks('persistentStateLoad','manualRowHeights',storedState);return storedState.value;},setupHandlePosition:function(TH){this.currentTH=TH;var row=this.hot.view.wt.wtTable.getCoords(TH).row;if(row>=0){var box=this.currentTH.getBoundingClientRect();this.currentRow=row;this.startOffset=box.top-6;this.startHeight=parseInt(box.height,10);this.handle.style.left=box.left+'px';this.handle.style.top=this.startOffset+this.startHeight+'px';this.hot.rootElement.appendChild(this.handle);}},refreshHandlePosition:function(){this.handle.style.top=this.startOffset+this.currentHeight+'px';},setupGuidePosition:function(){addClass(this.handle,'active');addClass(this.guide,'active');this.guide.style.top=this.handle.style.top;this.guide.style.left=this.handle.style.left;this.guide.style.width=this.hot.view.maximumVisibleElementWidth(0)+'px';this.hot.rootElement.appendChild(this.guide);},refreshGuidePosition:function(){this.guide.style.top=this.handle.style.top;},hideHandleAndGuide:function(){removeClass(this.handle,'active');removeClass(this.guide,'active');},checkIfRowHeader:function(element){if(element.tagName!='BODY'){if(element.parentNode.tagName=='TBODY'){return true;}else{element=element.parentNode;return this.checkIfRowHeader(element);}}
return false;},getTHFromTargetElement:function(element){if(element.tagName!='TABLE'){if(element.tagName=='TH'){return element;}else{return this.getTHFromTargetElement(element.parentNode);}}
return null;},onMouseOver:function(event){if(this.checkIfRowHeader(event.target)){var th=this.getTHFromTargetElement(event.target);if(th){if(!this.pressed){this.setupHandlePosition(th);}}}},afterMouseDownTimeout:function(){if(this.dblclick>=2){var hookNewSize=this.hot.runHooks('beforeRowResize',this.currentRow,this.newSize,true);if(hookNewSize!==void 0){this.newSize=hookNewSize;}
this.setManualSize(this.currentRow,this.newSize);this.hot.forceFullRender=true;this.hot.view.render();this.hot.view.wt.wtOverlays.adjustElementsSize(true);this.hot.runHooks('afterRowResize',this.currentRow,this.newSize,true);}
this.dblclick=0;this.autoresizeTimeout=null;},onMouseDown:function(event){var $__5=this;if(hasClass(event.target,'manualRowResizer')){this.setupGuidePosition();this.pressed=this.hot;if(this.autoresizeTimeout==null){this.autoresizeTimeout=setTimeout((function(){return $__5.afterMouseDownTimeout();}),500);this.hot._registerTimeout(this.autoresizeTimeout);}
this.dblclick++;this.startY=pageY(event);this.newSize=this.startHeight;}},onMouseMove:function(event){if(this.pressed){this.currentHeight=this.startHeight+(pageY(event)-this.startY);this.newSize=this.setManualSize(this.currentRow,this.currentHeight);this.refreshHandlePosition();this.refreshGuidePosition();}},onMouseUp:function(event){if(this.pressed){this.hideHandleAndGuide();this.pressed=false;if(this.newSize!=this.startHeight){this.hot.runHooks('beforeRowResize',this.currentRow,this.newSize);this.hot.forceFullRender=true;this.hot.view.render();this.hot.view.wt.wtOverlays.adjustElementsSize(true);this.saveManualRowHeights();this.hot.runHooks('afterRowResize',this.currentRow,this.newSize);}
this.setupHandlePosition(this.currentTH);}},bindEvents:function(){var $__5=this;this.eventManager.addEventListener(this.hot.rootElement,'mouseover',(function(e){return $__5.onMouseOver(e);}));this.eventManager.addEventListener(this.hot.rootElement,'mousedown',(function(e){return $__5.onMouseDown(e);}));this.eventManager.addEventListener(window,'mousemove',(function(e){return $__5.onMouseMove(e);}));this.eventManager.addEventListener(window,'mouseup',(function(e){return $__5.onMouseUp(e);}));},setManualSize:function(row,height){row=this.hot.runHooks('modifyRow',row);this.manualRowHeights[row]=height;return height;},onModifyRowHeight:function(height,row){if(this.enabled){var autoRowSizePlugin=this.hot.getPlugin('autoRowSize');var autoRowHeightResult=autoRowSizePlugin?autoRowSizePlugin.heights[row]:null;row=this.hot.runHooks('modifyRow',row);var manualRowHeight=this.manualRowHeights[row];if(manualRowHeight!==void 0&&(manualRowHeight===autoRowHeightResult||manualRowHeight>(height||0))){return manualRowHeight;}}
return height;}},{},BasePlugin);;registerPlugin('manualRowResize',ManualRowResize);},{"_base.js":56,"eventManager":40,"helpers/dom/element":44,"helpers/dom/event":45,"plugins":55}],79:[function(require,module,exports){"use strict";Object.defineProperties(exports,{MergeCells:{get:function(){return MergeCells;}},__esModule:{value:true}});var $___46__46__47__46__46__47_plugins__,$___46__46__47__46__46__47_helpers_47_dom_47_event__,$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__,$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_range__,$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_table__;var registerPlugin=($___46__46__47__46__46__47_plugins__=require("plugins"),$___46__46__47__46__46__47_plugins__&&$___46__46__47__46__46__47_plugins__.__esModule&&$___46__46__47__46__46__47_plugins__||{default:$___46__46__47__46__46__47_plugins__}).registerPlugin;var stopImmediatePropagation=($___46__46__47__46__46__47_helpers_47_dom_47_event__=require("helpers/dom/event"),$___46__46__47__46__46__47_helpers_47_dom_47_event__&&$___46__46__47__46__46__47_helpers_47_dom_47_event__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_event__||{default:$___46__46__47__46__46__47_helpers_47_dom_47_event__}).stopImmediatePropagation;var WalkontableCellCoords=($___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__=require("3rdparty/walkontable/src/cell/coords"),$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__&&$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__.__esModule&&$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__||{default:$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__}).WalkontableCellCoords;var WalkontableCellRange=($___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_range__=require("3rdparty/walkontable/src/cell/range"),$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_range__&&$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_range__.__esModule&&$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_range__||{default:$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_range__}).WalkontableCellRange;var WalkontableTable=($___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_table__=require("3rdparty/walkontable/src/table"),$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_table__&&$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_table__.__esModule&&$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_table__||{default:$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_table__}).WalkontableTable;;function CellInfoCollection(){var collection=[];collection.getInfo=function(row,col){for(var i=0,ilen=this.length;i<ilen;i++){if(this[i].row<=row&&this[i].row+this[i].rowspan-1>=row&&this[i].col<=col&&this[i].col+this[i].colspan-1>=col){return this[i];}}};collection.setInfo=function(info){for(var i=0,ilen=this.length;i<ilen;i++){if(this[i].row===info.row&&this[i].col===info.col){this[i]=info;return;}}
this.push(info);};collection.removeInfo=function(row,col){for(var i=0,ilen=this.length;i<ilen;i++){if(this[i].row===row&&this[i].col===col){this.splice(i,1);break;}}};return collection;}
function MergeCells(mergeCellsSetting){this.mergedCellInfoCollection=new CellInfoCollection();if(Array.isArray(mergeCellsSetting)){for(var i=0,ilen=mergeCellsSetting.length;i<ilen;i++){this.mergedCellInfoCollection.setInfo(mergeCellsSetting[i]);}}}
MergeCells.prototype.canMergeRange=function(cellRange){return!cellRange.isSingle();};MergeCells.prototype.mergeRange=function(cellRange){if(!this.canMergeRange(cellRange)){return;}
var topLeft=cellRange.getTopLeftCorner();var bottomRight=cellRange.getBottomRightCorner();var mergeParent={};mergeParent.row=topLeft.row;mergeParent.col=topLeft.col;mergeParent.rowspan=bottomRight.row-topLeft.row+1;mergeParent.colspan=bottomRight.col-topLeft.col+1;this.mergedCellInfoCollection.setInfo(mergeParent);};MergeCells.prototype.mergeOrUnmergeSelection=function(cellRange){var info=this.mergedCellInfoCollection.getInfo(cellRange.from.row,cellRange.from.col);if(info){this.unmergeSelection(cellRange.from);}else{this.mergeSelection(cellRange);}};MergeCells.prototype.mergeSelection=function(cellRange){this.mergeRange(cellRange);};MergeCells.prototype.unmergeSelection=function(cellRange){var info=this.mergedCellInfoCollection.getInfo(cellRange.row,cellRange.col);this.mergedCellInfoCollection.removeInfo(info.row,info.col);};MergeCells.prototype.applySpanProperties=function(TD,row,col){var info=this.mergedCellInfoCollection.getInfo(row,col);if(info){if(info.row===row&&info.col===col){TD.setAttribute('rowspan',info.rowspan);TD.setAttribute('colspan',info.colspan);}else{TD.removeAttribute('rowspan');TD.removeAttribute('colspan');TD.style.display='none';}}else{TD.removeAttribute('rowspan');TD.removeAttribute('colspan');}};MergeCells.prototype.modifyTransform=function(hook,currentSelectedRange,delta){var sameRowspan=function(merged,coords){if(coords.row>=merged.row&&coords.row<=(merged.row+merged.rowspan-1)){return true;}
return false;},sameColspan=function(merged,coords){if(coords.col>=merged.col&&coords.col<=(merged.col+merged.colspan-1)){return true;}
return false;},getNextPosition=function(newDelta){return new WalkontableCellCoords(currentSelectedRange.to.row+newDelta.row,currentSelectedRange.to.col+newDelta.col);};var newDelta={row:delta.row,col:delta.col};if(hook=='modifyTransformStart'){if(!this.lastDesiredCoords){this.lastDesiredCoords=new WalkontableCellCoords(null,null);}
var currentPosition=new WalkontableCellCoords(currentSelectedRange.highlight.row,currentSelectedRange.highlight.col),mergedParent=this.mergedCellInfoCollection.getInfo(currentPosition.row,currentPosition.col),currentRangeContainsMerge;for(var i=0,mergesLength=this.mergedCellInfoCollection.length;i<mergesLength;i++){var range=this.mergedCellInfoCollection[i];range=new WalkontableCellCoords(range.row+range.rowspan-1,range.col+range.colspan-1);if(currentSelectedRange.includes(range)){currentRangeContainsMerge=true;break;}}
if(mergedParent){var mergeTopLeft=new WalkontableCellCoords(mergedParent.row,mergedParent.col),mergeBottomRight=new WalkontableCellCoords(mergedParent.row+mergedParent.rowspan-1,mergedParent.col+mergedParent.colspan-1),mergeRange=new WalkontableCellRange(mergeTopLeft,mergeTopLeft,mergeBottomRight);if(!mergeRange.includes(this.lastDesiredCoords)){this.lastDesiredCoords=new WalkontableCellCoords(null,null);}
newDelta.row=this.lastDesiredCoords.row?this.lastDesiredCoords.row-currentPosition.row:newDelta.row;newDelta.col=this.lastDesiredCoords.col?this.lastDesiredCoords.col-currentPosition.col:newDelta.col;if(delta.row>0){newDelta.row=mergedParent.row+mergedParent.rowspan-1-currentPosition.row+delta.row;}else if(delta.row<0){newDelta.row=currentPosition.row-mergedParent.row+delta.row;}
if(delta.col>0){newDelta.col=mergedParent.col+mergedParent.colspan-1-currentPosition.col+delta.col;}else if(delta.col<0){newDelta.col=currentPosition.col-mergedParent.col+delta.col;}}
var nextPosition=new WalkontableCellCoords(currentSelectedRange.highlight.row+newDelta.row,currentSelectedRange.highlight.col+newDelta.col),nextParentIsMerged=this.mergedCellInfoCollection.getInfo(nextPosition.row,nextPosition.col);if(nextParentIsMerged){this.lastDesiredCoords=nextPosition;newDelta={row:nextParentIsMerged.row-currentPosition.row,col:nextParentIsMerged.col-currentPosition.col};}}else if(hook=='modifyTransformEnd'){for(var i=0,mergesLength=this.mergedCellInfoCollection.length;i<mergesLength;i++){var currentMerge=this.mergedCellInfoCollection[i],mergeTopLeft=new WalkontableCellCoords(currentMerge.row,currentMerge.col),mergeBottomRight=new WalkontableCellCoords(currentMerge.row+currentMerge.rowspan-1,currentMerge.col+currentMerge.colspan-1),mergedRange=new WalkontableCellRange(mergeTopLeft,mergeTopLeft,mergeBottomRight),sharedBorders=currentSelectedRange.getBordersSharedWith(mergedRange);if(mergedRange.isEqual(currentSelectedRange)){currentSelectedRange.setDirection('NW-SE');}else if(sharedBorders.length>0){var mergeHighlighted=(currentSelectedRange.highlight.isEqual(mergedRange.from));if(sharedBorders.indexOf('top')>-1){if(currentSelectedRange.to.isSouthEastOf(mergedRange.from)&&mergeHighlighted){currentSelectedRange.setDirection('NW-SE');}else if(currentSelectedRange.to.isSouthWestOf(mergedRange.from)&&mergeHighlighted){currentSelectedRange.setDirection('NE-SW');}}else if(sharedBorders.indexOf('bottom')>-1){if(currentSelectedRange.to.isNorthEastOf(mergedRange.from)&&mergeHighlighted){currentSelectedRange.setDirection('SW-NE');}else if(currentSelectedRange.to.isNorthWestOf(mergedRange.from)&&mergeHighlighted){currentSelectedRange.setDirection('SE-NW');}}}
var nextPosition=getNextPosition(newDelta),withinRowspan=sameRowspan(currentMerge,nextPosition),withinColspan=sameColspan(currentMerge,nextPosition);if(currentSelectedRange.includesRange(mergedRange)&&(mergedRange.includes(nextPosition)||withinRowspan||withinColspan)){if(withinRowspan){if(newDelta.row<0){newDelta.row-=currentMerge.rowspan-1;}else if(newDelta.row>0){newDelta.row+=currentMerge.rowspan-1;}}
if(withinColspan){if(newDelta.col<0){newDelta.col-=currentMerge.colspan-1;}else if(newDelta.col>0){newDelta.col+=currentMerge.colspan-1;}}}}}
if(newDelta.row!==0){delta.row=newDelta.row;}
if(newDelta.col!==0){delta.col=newDelta.col;}};MergeCells.prototype.shiftCollection=function(direction,index,count){var shiftVector=[0,0];switch(direction){case'right':shiftVector[0]+=1;break;case'left':shiftVector[0]-=1;break;case'down':shiftVector[1]+=1;break;case'up':shiftVector[1]-=1;break;}
for(var i=0;i<this.mergedCellInfoCollection.length;i++){var currentMerge=this.mergedCellInfoCollection[i];if(direction==='right'||direction==='left'){if(index<=currentMerge.col){currentMerge.col+=shiftVector[0];}}else{if(index<=currentMerge.row){currentMerge.row+=shiftVector[1];}}}};var beforeInit=function(){var instance=this;var mergeCellsSetting=instance.getSettings().mergeCells;if(mergeCellsSetting){if(!instance.mergeCells){instance.mergeCells=new MergeCells(mergeCellsSetting);}}};var afterInit=function(){var instance=this;if(instance.mergeCells){instance.view.wt.wtTable.getCell=function(coords){if(instance.getSettings().mergeCells){var mergeParent=instance.mergeCells.mergedCellInfoCollection.getInfo(coords.row,coords.col);if(mergeParent){coords=mergeParent;}}
return WalkontableTable.prototype.getCell.call(this,coords);};}};var afterUpdateSettings=function(){var instance=this;var mergeCellsSetting=instance.getSettings().mergeCells;if(mergeCellsSetting){if(instance.mergeCells){instance.mergeCells.mergedCellInfoCollection=new CellInfoCollection();if(Array.isArray(mergeCellsSetting)){for(var i=0,ilen=mergeCellsSetting.length;i<ilen;i++){instance.mergeCells.mergedCellInfoCollection.setInfo(mergeCellsSetting[i]);}}}else{instance.mergeCells=new MergeCells(mergeCellsSetting);}}else{if(instance.mergeCells){instance.mergeCells.mergedCellInfoCollection=new CellInfoCollection();}}};var onBeforeKeyDown=function(event){if(!this.mergeCells){return;}
var ctrlDown=(event.ctrlKey||event.metaKey)&&!event.altKey;if(ctrlDown){if(event.keyCode===77){this.mergeCells.mergeOrUnmergeSelection(this.getSelectedRange());this.render();stopImmediatePropagation(event);}}};var addMergeActionsToContextMenu=function(defaultOptions){if(!this.getSettings().mergeCells){return;}
defaultOptions.items.push(Handsontable.plugins.ContextMenu.SEPARATOR);defaultOptions.items.push({key:'mergeCells',name:function(){var sel=this.getSelected();var info=this.mergeCells.mergedCellInfoCollection.getInfo(sel[0],sel[1]);if(info){return'Unmerge cells';}else{return'Merge cells';}},callback:function(){this.mergeCells.mergeOrUnmergeSelection(this.getSelectedRange());this.render();},disabled:function(){return false;}});};var afterRenderer=function(TD,row,col,prop,value,cellProperties){if(this.mergeCells){this.mergeCells.applySpanProperties(TD,row,col);}};var modifyTransformFactory=function(hook){return function(delta){var mergeCellsSetting=this.getSettings().mergeCells;if(mergeCellsSetting){var currentSelectedRange=this.getSelectedRange();this.mergeCells.modifyTransform(hook,currentSelectedRange,delta);if(hook==='modifyTransformEnd'){var totalRows=this.countRows();var totalCols=this.countCols();if(currentSelectedRange.from.row<0){currentSelectedRange.from.row=0;}else if(currentSelectedRange.from.row>0&&currentSelectedRange.from.row>=totalRows){currentSelectedRange.from.row=currentSelectedRange.from-1;}
if(currentSelectedRange.from.col<0){currentSelectedRange.from.col=0;}else if(currentSelectedRange.from.col>0&&currentSelectedRange.from.col>=totalCols){currentSelectedRange.from.col=totalCols-1;}}}};};var beforeSetRangeEnd=function(coords){this.lastDesiredCoords=null;var mergeCellsSetting=this.getSettings().mergeCells;if(mergeCellsSetting){var selRange=this.getSelectedRange();selRange.highlight=new WalkontableCellCoords(selRange.highlight.row,selRange.highlight.col);selRange.to=coords;var rangeExpanded=false;do{rangeExpanded=false;for(var i=0,ilen=this.mergeCells.mergedCellInfoCollection.length;i<ilen;i++){var cellInfo=this.mergeCells.mergedCellInfoCollection[i];var mergedCellTopLeft=new WalkontableCellCoords(cellInfo.row,cellInfo.col);var mergedCellBottomRight=new WalkontableCellCoords(cellInfo.row+cellInfo.rowspan-1,cellInfo.col+cellInfo.colspan-1);var mergedCellRange=new WalkontableCellRange(mergedCellTopLeft,mergedCellTopLeft,mergedCellBottomRight);if(selRange.expandByRange(mergedCellRange)){coords.row=selRange.to.row;coords.col=selRange.to.col;rangeExpanded=true;}}}while(rangeExpanded);}};var beforeDrawAreaBorders=function(corners,className){if(className&&className=='area'){var mergeCellsSetting=this.getSettings().mergeCells;if(mergeCellsSetting){var selRange=this.getSelectedRange();var startRange=new WalkontableCellRange(selRange.from,selRange.from,selRange.from);var stopRange=new WalkontableCellRange(selRange.to,selRange.to,selRange.to);for(var i=0,ilen=this.mergeCells.mergedCellInfoCollection.length;i<ilen;i++){var cellInfo=this.mergeCells.mergedCellInfoCollection[i];var mergedCellTopLeft=new WalkontableCellCoords(cellInfo.row,cellInfo.col);var mergedCellBottomRight=new WalkontableCellCoords(cellInfo.row+cellInfo.rowspan-1,cellInfo.col+cellInfo.colspan-1);var mergedCellRange=new WalkontableCellRange(mergedCellTopLeft,mergedCellTopLeft,mergedCellBottomRight);if(startRange.expandByRange(mergedCellRange)){corners[0]=startRange.from.row;corners[1]=startRange.from.col;}
if(stopRange.expandByRange(mergedCellRange)){corners[2]=stopRange.from.row;corners[3]=stopRange.from.col;}}}}};var afterGetCellMeta=function(row,col,cellProperties){var mergeCellsSetting=this.getSettings().mergeCells;if(mergeCellsSetting){var mergeParent=this.mergeCells.mergedCellInfoCollection.getInfo(row,col);if(mergeParent&&(mergeParent.row!=row||mergeParent.col!=col)){cellProperties.copyable=false;}}};var afterViewportRowCalculatorOverride=function(calc){var mergeCellsSetting=this.getSettings().mergeCells;if(mergeCellsSetting){var colCount=this.countCols();var mergeParent;for(var c=0;c<colCount;c++){mergeParent=this.mergeCells.mergedCellInfoCollection.getInfo(calc.startRow,c);if(mergeParent){if(mergeParent.row<calc.startRow){calc.startRow=mergeParent.row;return afterViewportRowCalculatorOverride.call(this,calc);}}
mergeParent=this.mergeCells.mergedCellInfoCollection.getInfo(calc.endRow,c);if(mergeParent){var mergeEnd=mergeParent.row+mergeParent.rowspan-1;if(mergeEnd>calc.endRow){calc.endRow=mergeEnd;return afterViewportRowCalculatorOverride.call(this,calc);}}}}};var afterViewportColumnCalculatorOverride=function(calc){var mergeCellsSetting=this.getSettings().mergeCells;if(mergeCellsSetting){var rowCount=this.countRows();var mergeParent;for(var r=0;r<rowCount;r++){mergeParent=this.mergeCells.mergedCellInfoCollection.getInfo(r,calc.startColumn);if(mergeParent){if(mergeParent.col<calc.startColumn){calc.startColumn=mergeParent.col;return afterViewportColumnCalculatorOverride.call(this,calc);}}
mergeParent=this.mergeCells.mergedCellInfoCollection.getInfo(r,calc.endColumn);if(mergeParent){var mergeEnd=mergeParent.col+mergeParent.colspan-1;if(mergeEnd>calc.endColumn){calc.endColumn=mergeEnd;return afterViewportColumnCalculatorOverride.call(this,calc);}}}}};var isMultipleSelection=function(isMultiple){if(isMultiple&&this.mergeCells){var mergedCells=this.mergeCells.mergedCellInfoCollection,selectionRange=this.getSelectedRange();for(var group in mergedCells){if(selectionRange.highlight.row==mergedCells[group].row&&selectionRange.highlight.col==mergedCells[group].col&&selectionRange.to.row==mergedCells[group].row+mergedCells[group].rowspan-1&&selectionRange.to.col==mergedCells[group].col+mergedCells[group].colspan-1){return false;}}}
return isMultiple;};function afterAutofillApplyValues(select,drag){var mergeCellsSetting=this.getSettings().mergeCells;if(!mergeCellsSetting||this.selection.isMultiple()){return;}
var info=this.mergeCells.mergedCellInfoCollection.getInfo(select[0],select[1]);if(info){select[0]=info.row;select[1]=info.col;select[2]=info.row+info.rowspan-1;select[3]=info.col+info.colspan-1;}}
function onAfterCreateCol(col,count){if(this.mergeCells){this.mergeCells.shiftCollection('right',col,count);}}
function onAfterRemoveCol(col,count){if(this.mergeCells){this.mergeCells.shiftCollection('left',col,count);}}
function onAfterCreateRow(row,count){if(this.mergeCells){this.mergeCells.shiftCollection('down',row,count);}}
function onAfterRemoveRow(row,count){if(this.mergeCells){this.mergeCells.shiftCollection('up',row,count);}}
Handsontable.hooks.add('beforeInit',beforeInit);Handsontable.hooks.add('afterInit',afterInit);Handsontable.hooks.add('afterUpdateSettings',afterUpdateSettings);Handsontable.hooks.add('beforeKeyDown',onBeforeKeyDown);Handsontable.hooks.add('modifyTransformStart',modifyTransformFactory('modifyTransformStart'));Handsontable.hooks.add('modifyTransformEnd',modifyTransformFactory('modifyTransformEnd'));Handsontable.hooks.add('beforeSetRangeEnd',beforeSetRangeEnd);Handsontable.hooks.add('beforeDrawBorders',beforeDrawAreaBorders);Handsontable.hooks.add('afterIsMultipleSelection',isMultipleSelection);Handsontable.hooks.add('afterRenderer',afterRenderer);Handsontable.hooks.add('afterContextMenuDefaultOptions',addMergeActionsToContextMenu);Handsontable.hooks.add('afterGetCellMeta',afterGetCellMeta);Handsontable.hooks.add('afterViewportRowCalculatorOverride',afterViewportRowCalculatorOverride);Handsontable.hooks.add('afterViewportColumnCalculatorOverride',afterViewportColumnCalculatorOverride);Handsontable.hooks.add('afterAutofillApplyValues',afterAutofillApplyValues);Handsontable.hooks.add('afterCreateCol',onAfterCreateCol);Handsontable.hooks.add('afterRemoveCol',onAfterRemoveCol);Handsontable.hooks.add('afterCreateRow',onAfterCreateRow);Handsontable.hooks.add('afterRemoveRow',onAfterRemoveRow);Handsontable.MergeCells=MergeCells;},{"3rdparty/walkontable/src/cell/coords":5,"3rdparty/walkontable/src/cell/range":6,"3rdparty/walkontable/src/table":20,"helpers/dom/event":45,"plugins":55}],80:[function(require,module,exports){"use strict";Object.defineProperties(exports,{MultipleSelectionHandles:{get:function(){return MultipleSelectionHandles;}},__esModule:{value:true}});var $___46__46__47__46__46__47_helpers_47_dom_47_element__,$___46__46__47__95_base__,$___46__46__47__46__46__47_eventManager__,$___46__46__47__46__46__47_plugins__;var $__0=($___46__46__47__46__46__47_helpers_47_dom_47_element__=require("helpers/dom/element"),$___46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_element__||{default:$___46__46__47__46__46__47_helpers_47_dom_47_element__}),getWindowScrollTop=$__0.getWindowScrollTop,hasClass=$__0.hasClass,getWindowScrollLeft=$__0.getWindowScrollLeft;var BasePlugin=($___46__46__47__95_base__=require("_base"),$___46__46__47__95_base__&&$___46__46__47__95_base__.__esModule&&$___46__46__47__95_base__||{default:$___46__46__47__95_base__}).default;var EventManager=($___46__46__47__46__46__47_eventManager__=require("eventManager"),$___46__46__47__46__46__47_eventManager__&&$___46__46__47__46__46__47_eventManager__.__esModule&&$___46__46__47__46__46__47_eventManager__||{default:$___46__46__47__46__46__47_eventManager__}).EventManager;var registerPlugin=($___46__46__47__46__46__47_plugins__=require("plugins"),$___46__46__47__46__46__47_plugins__&&$___46__46__47__46__46__47_plugins__.__esModule&&$___46__46__47__46__46__47_plugins__||{default:$___46__46__47__46__46__47_plugins__}).registerPlugin;var MultipleSelectionHandles=function MultipleSelectionHandles(hotInstance){$traceurRuntime.superConstructor($MultipleSelectionHandles).call(this,hotInstance);this.dragged=[];this.eventManager=null;this.lastSetCell=null;};var $MultipleSelectionHandles=MultipleSelectionHandles;($traceurRuntime.createClass)(MultipleSelectionHandles,{isEnabled:function(){return Handsontable.mobileBrowser;},enablePlugin:function(){if(this.enabled){return;}
if(!this.eventManager){this.eventManager=new EventManager(this);}
this.registerListeners();$traceurRuntime.superGet(this,$MultipleSelectionHandles.prototype,"enablePlugin").call(this);},registerListeners:function(){var _this=this;function removeFromDragged(query){if(_this.dragged.length===1){_this.dragged.splice(0,_this.dragged.length);return true;}
var entryPosition=_this.dragged.indexOf(query);if(entryPosition==-1){return false;}else if(entryPosition===0){_this.dragged=_this.dragged.slice(0,1);}else if(entryPosition==1){_this.dragged=_this.dragged.slice(-1);}}
this.eventManager.addEventListener(this.hot.rootElement,'touchstart',function(event){var selectedRange;if(hasClass(event.target,'topLeftSelectionHandle-HitArea')){selectedRange=_this.hot.getSelectedRange();_this.dragged.push('topLeft');_this.touchStartRange={width:selectedRange.getWidth(),height:selectedRange.getHeight(),direction:selectedRange.getDirection()};event.preventDefault();return false;}else if(hasClass(event.target,'bottomRightSelectionHandle-HitArea')){selectedRange=_this.hot.getSelectedRange();_this.dragged.push('bottomRight');_this.touchStartRange={width:selectedRange.getWidth(),height:selectedRange.getHeight(),direction:selectedRange.getDirection()};event.preventDefault();return false;}});this.eventManager.addEventListener(this.hot.rootElement,'touchend',function(event){if(hasClass(event.target,'topLeftSelectionHandle-HitArea')){removeFromDragged.call(_this,'topLeft');_this.touchStartRange=void 0;event.preventDefault();return false;}else if(hasClass(event.target,'bottomRightSelectionHandle-HitArea')){removeFromDragged.call(_this,'bottomRight');_this.touchStartRange=void 0;event.preventDefault();return false;}});this.eventManager.addEventListener(this.hot.rootElement,'touchmove',function(event){var scrollTop=getWindowScrollTop(),scrollLeft=getWindowScrollLeft(),endTarget,targetCoords,selectedRange,rangeWidth,rangeHeight,rangeDirection,newRangeCoords;if(_this.dragged.length===0){return;}
endTarget=document.elementFromPoint(event.touches[0].screenX-scrollLeft,event.touches[0].screenY-scrollTop);if(!endTarget||endTarget===_this.lastSetCell){return;}
if(endTarget.nodeName=='TD'||endTarget.nodeName=='TH'){targetCoords=_this.hot.getCoords(endTarget);if(targetCoords.col==-1){targetCoords.col=0;}
selectedRange=_this.hot.getSelectedRange();rangeWidth=selectedRange.getWidth();rangeHeight=selectedRange.getHeight();rangeDirection=selectedRange.getDirection();if(rangeWidth==1&&rangeHeight==1){_this.hot.selection.setRangeEnd(targetCoords);}
newRangeCoords=_this.getCurrentRangeCoords(selectedRange,targetCoords,_this.touchStartRange.direction,rangeDirection,_this.dragged[0]);if(newRangeCoords.start!==null){_this.hot.selection.setRangeStart(newRangeCoords.start);}
_this.hot.selection.setRangeEnd(newRangeCoords.end);_this.lastSetCell=endTarget;}
event.preventDefault();});},getCurrentRangeCoords:function(selectedRange,currentTouch,touchStartDirection,currentDirection,draggedHandle){var topLeftCorner=selectedRange.getTopLeftCorner(),bottomRightCorner=selectedRange.getBottomRightCorner(),bottomLeftCorner=selectedRange.getBottomLeftCorner(),topRightCorner=selectedRange.getTopRightCorner();var newCoords={start:null,end:null};switch(touchStartDirection){case'NE-SW':switch(currentDirection){case'NE-SW':case'NW-SE':if(draggedHandle=='topLeft'){newCoords={start:new WalkontableCellCoords(currentTouch.row,selectedRange.highlight.col),end:new WalkontableCellCoords(bottomLeftCorner.row,currentTouch.col)};}else{newCoords={start:new WalkontableCellCoords(selectedRange.highlight.row,currentTouch.col),end:new WalkontableCellCoords(currentTouch.row,topLeftCorner.col)};}
break;case'SE-NW':if(draggedHandle=='bottomRight'){newCoords={start:new WalkontableCellCoords(bottomRightCorner.row,currentTouch.col),end:new WalkontableCellCoords(currentTouch.row,topLeftCorner.col)};}
break;}
break;case'NW-SE':switch(currentDirection){case'NE-SW':if(draggedHandle=='topLeft'){newCoords={start:currentTouch,end:bottomLeftCorner};}else{newCoords.end=currentTouch;}
break;case'NW-SE':if(draggedHandle=='topLeft'){newCoords={start:currentTouch,end:bottomRightCorner};}else{newCoords.end=currentTouch;}
break;case'SE-NW':if(draggedHandle=='topLeft'){newCoords={start:currentTouch,end:topLeftCorner};}else{newCoords.end=currentTouch;}
break;case'SW-NE':if(draggedHandle=='topLeft'){newCoords={start:currentTouch,end:topRightCorner};}else{newCoords.end=currentTouch;}
break;}
break;case'SW-NE':switch(currentDirection){case'NW-SE':if(draggedHandle=='bottomRight'){newCoords={start:new WalkontableCellCoords(currentTouch.row,topLeftCorner.col),end:new WalkontableCellCoords(bottomLeftCorner.row,currentTouch.col)};}else{newCoords={start:new WalkontableCellCoords(topLeftCorner.row,currentTouch.col),end:new WalkontableCellCoords(currentTouch.row,bottomRightCorner.col)};}
break;case'SW-NE':if(draggedHandle=='topLeft'){newCoords={start:new WalkontableCellCoords(selectedRange.highlight.row,currentTouch.col),end:new WalkontableCellCoords(currentTouch.row,bottomRightCorner.col)};}else{newCoords={start:new WalkontableCellCoords(currentTouch.row,topLeftCorner.col),end:new WalkontableCellCoords(topLeftCorner.row,currentTouch.col)};}
break;case'SE-NW':if(draggedHandle=='bottomRight'){newCoords={start:new WalkontableCellCoords(currentTouch.row,topRightCorner.col),end:new WalkontableCellCoords(topLeftCorner.row,currentTouch.col)};}else if(draggedHandle=='topLeft'){newCoords={start:bottomLeftCorner,end:currentTouch};}
break;}
break;case'SE-NW':switch(currentDirection){case'NW-SE':case'NE-SW':case'SW-NE':if(draggedHandle=='topLeft'){newCoords.end=currentTouch;}
break;case'SE-NW':if(draggedHandle=='topLeft'){newCoords.end=currentTouch;}else{newCoords={start:currentTouch,end:topLeftCorner};}
break;}
break;}
return newCoords;},isDragged:function(){return this.dragged.length>0;}},{},BasePlugin);;registerPlugin('multipleSelectionHandles',MultipleSelectionHandles);},{"_base":56,"eventManager":40,"helpers/dom/element":44,"plugins":55}],81:[function(require,module,exports){"use strict";Object.defineProperties(exports,{ObserveChanges:{get:function(){return ObserveChanges;}},__esModule:{value:true}});var $___46__46__47__46__46__47_plugins__,$__jsonpatch__;var registerPlugin=($___46__46__47__46__46__47_plugins__=require("plugins"),$___46__46__47__46__46__47_plugins__&&$___46__46__47__46__46__47_plugins__.__esModule&&$___46__46__47__46__46__47_plugins__||{default:$___46__46__47__46__46__47_plugins__}).registerPlugin;var jsonpatch=($__jsonpatch__=require("jsonpatch"),$__jsonpatch__&&$__jsonpatch__.__esModule&&$__jsonpatch__||{default:$__jsonpatch__}).default;;function ObserveChanges(){}
Handsontable.hooks.add('afterLoadData',init);Handsontable.hooks.add('afterUpdateSettings',init);Handsontable.hooks.register('afterChangesObserved');function init(){var instance=this;var pluginEnabled=instance.getSettings().observeChanges;if(pluginEnabled){if(instance.observer){destroy.call(instance);}
createObserver.call(instance);bindEvents.call(instance);}else if(!pluginEnabled){destroy.call(instance);}}
function createObserver(){var instance=this;instance.observeChangesActive=true;instance.pauseObservingChanges=function(){instance.observeChangesActive=false;};instance.resumeObservingChanges=function(){instance.observeChangesActive=true;};instance.observedData=instance.getData();instance.observer=jsonpatch.observe(instance.observedData,function(patches){if(instance.observeChangesActive){runHookForOperation.call(instance,patches);instance.render();}
instance.runHooks('afterChangesObserved');});}
function runHookForOperation(rawPatches){var instance=this;var patches=cleanPatches(rawPatches);for(var i=0,len=patches.length;i<len;i++){var patch=patches[i];var parsedPath=parsePath(patch.path);switch(patch.op){case'add':if(isNaN(parsedPath.col)){instance.runHooks('afterCreateRow',parsedPath.row);}else{instance.runHooks('afterCreateCol',parsedPath.col);}
break;case'remove':if(isNaN(parsedPath.col)){instance.runHooks('afterRemoveRow',parsedPath.row,1);}else{instance.runHooks('afterRemoveCol',parsedPath.col,1);}
break;case'replace':instance.runHooks('afterChange',[parsedPath.row,parsedPath.col,null,patch.value],'external');break;}}
function cleanPatches(rawPatches){var patches;patches=removeLengthRelatedPatches(rawPatches);patches=removeMultipleAddOrRemoveColPatches(patches);return patches;}
function removeMultipleAddOrRemoveColPatches(rawPatches){var newOrRemovedColumns=[];return rawPatches.filter(function(patch){var parsedPath=parsePath(patch.path);if(['add','remove'].indexOf(patch.op)!=-1&&!isNaN(parsedPath.col)){if(newOrRemovedColumns.indexOf(parsedPath.col)!=-1){return false;}else{newOrRemovedColumns.push(parsedPath.col);}}
return true;});}
function removeLengthRelatedPatches(rawPatches){return rawPatches.filter(function(patch){return!/[/]length/ig.test(patch.path);});}
function parsePath(path){var match=path.match(/^\/(\d+)\/?(.*)?$/);return{row:parseInt(match[1],10),col:/^\d*$/.test(match[2])?parseInt(match[2],10):match[2]};}}
function destroy(){var instance=this;if(instance.observer){destroyObserver.call(instance);unbindEvents.call(instance);}}
function destroyObserver(){var instance=this;jsonpatch.unobserve(instance.observedData,instance.observer);delete instance.observedData;delete instance.observeChangesActive;delete instance.pauseObservingChanges;delete instance.resumeObservingChanges;}
function bindEvents(){var instance=this;instance.addHook('afterDestroy',destroy);instance.addHook('afterCreateRow',afterTableAlter);instance.addHook('afterRemoveRow',afterTableAlter);instance.addHook('afterCreateCol',afterTableAlter);instance.addHook('afterRemoveCol',afterTableAlter);instance.addHook('afterChange',function(changes,source){if(source!='loadData'){afterTableAlter.call(this);}});}
function unbindEvents(){var instance=this;instance.removeHook('afterDestroy',destroy);instance.removeHook('afterCreateRow',afterTableAlter);instance.removeHook('afterRemoveRow',afterTableAlter);instance.removeHook('afterCreateCol',afterTableAlter);instance.removeHook('afterRemoveCol',afterTableAlter);instance.removeHook('afterChange',afterTableAlter);}
function afterTableAlter(){var instance=this;instance.pauseObservingChanges();instance.addHookOnce('afterChangesObserved',function(){instance.resumeObservingChanges();});}},{"jsonpatch":"jsonpatch","plugins":55}],82:[function(require,module,exports){"use strict";Object.defineProperties(exports,{HandsontablePersistentState:{get:function(){return HandsontablePersistentState;}},__esModule:{value:true}});var $___46__46__47__46__46__47_plugins__;var registerPlugin=($___46__46__47__46__46__47_plugins__=require("plugins"),$___46__46__47__46__46__47_plugins__&&$___46__46__47__46__46__47_plugins__.__esModule&&$___46__46__47__46__46__47_plugins__||{default:$___46__46__47__46__46__47_plugins__}).registerPlugin;;function Storage(prefix){var savedKeys;var saveSavedKeys=function(){window.localStorage[prefix+'__'+'persistentStateKeys']=JSON.stringify(savedKeys);};var loadSavedKeys=function(){var keysJSON=window.localStorage[prefix+'__'+'persistentStateKeys'];var keys=typeof keysJSON=='string'?JSON.parse(keysJSON):void 0;savedKeys=keys?keys:[];};var clearSavedKeys=function(){savedKeys=[];saveSavedKeys();};loadSavedKeys();this.saveValue=function(key,value){window.localStorage[prefix+'_'+key]=JSON.stringify(value);if(savedKeys.indexOf(key)==-1){savedKeys.push(key);saveSavedKeys();}};this.loadValue=function(key,defaultValue){key=typeof key==='undefined'?defaultValue:key;var value=window.localStorage[prefix+'_'+key];return typeof value=='undefined'?void 0:JSON.parse(value);};this.reset=function(key){window.localStorage.removeItem(prefix+'_'+key);};this.resetAll=function(){for(var index=0;index<savedKeys.length;index++){window.localStorage.removeItem(prefix+'_'+savedKeys[index]);}
clearSavedKeys();};}
function HandsontablePersistentState(){var plugin=this;this.init=function(){var instance=this,pluginSettings=instance.getSettings().persistentState;plugin.enabled=!!(pluginSettings);if(!plugin.enabled){removeHooks.call(instance);return;}
if(!instance.storage){instance.storage=new Storage(instance.rootElement.id);}
instance.resetState=plugin.resetValue;addHooks.call(instance);};this.saveValue=function(key,value){var instance=this;instance.storage.saveValue(key,value);};this.loadValue=function(key,saveTo){var instance=this;saveTo.value=instance.storage.loadValue(key);};this.resetValue=function(key){var instance=this;if(typeof key==='undefined'){instance.storage.resetAll();}else{instance.storage.reset(key);}};var hooks={persistentStateSave:plugin.saveValue,persistentStateLoad:plugin.loadValue,persistentStateReset:plugin.resetValue};for(var hookName in hooks){if(hooks.hasOwnProperty(hookName)){Handsontable.hooks.register(hookName);}}
function addHooks(){var instance=this;for(var hookName in hooks){if(hooks.hasOwnProperty(hookName)){instance.addHook(hookName,hooks[hookName]);}}}
function removeHooks(){var instance=this;for(var hookName in hooks){if(hooks.hasOwnProperty(hookName)){instance.removeHook(hookName,hooks[hookName]);}}}}
var htPersistentState=new HandsontablePersistentState();Handsontable.hooks.add('beforeInit',htPersistentState.init);Handsontable.hooks.add('afterUpdateSettings',htPersistentState.init);},{"plugins":55}],83:[function(require,module,exports){"use strict";var $___46__46__47__46__46__47_helpers_47_dom_47_element__,$___46__46__47__46__46__47_renderers__;var $__0=($___46__46__47__46__46__47_helpers_47_dom_47_element__=require("helpers/dom/element"),$___46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_element__||{default:$___46__46__47__46__46__47_helpers_47_dom_47_element__}),addClass=$__0.addClass,removeClass=$__0.removeClass;var $__1=($___46__46__47__46__46__47_renderers__=require("renderers"),$___46__46__47__46__46__47_renderers__&&$___46__46__47__46__46__47_renderers__.__esModule&&$___46__46__47__46__46__47_renderers__||{default:$___46__46__47__46__46__47_renderers__}),registerRenderer=$__1.registerRenderer,getRenderer=$__1.getRenderer;Handsontable.Search=function Search(instance){this.query=function(queryStr,callback,queryMethod){var rowCount=instance.countRows();var colCount=instance.countCols();var queryResult=[];if(!callback){callback=Handsontable.Search.global.getDefaultCallback();}
if(!queryMethod){queryMethod=Handsontable.Search.global.getDefaultQueryMethod();}
for(var rowIndex=0;rowIndex<rowCount;rowIndex++){for(var colIndex=0;colIndex<colCount;colIndex++){var cellData=instance.getDataAtCell(rowIndex,colIndex);var cellProperties=instance.getCellMeta(rowIndex,colIndex);var cellCallback=cellProperties.search.callback||callback;var cellQueryMethod=cellProperties.search.queryMethod||queryMethod;var testResult=cellQueryMethod(queryStr,cellData);if(testResult){var singleResult={row:rowIndex,col:colIndex,data:cellData};queryResult.push(singleResult);}
if(cellCallback){cellCallback(instance,rowIndex,colIndex,cellData,testResult);}}}
return queryResult;};};Handsontable.Search.DEFAULT_CALLBACK=function(instance,row,col,data,testResult){instance.getCellMeta(row,col).isSearchResult=testResult;};Handsontable.Search.DEFAULT_QUERY_METHOD=function(query,value){if(typeof query=='undefined'||query==null||!query.toLowerCase||query.length===0){return false;}
if(typeof value=='undefined'||value==null){return false;}
return value.toString().toLowerCase().indexOf(query.toLowerCase())!=-1;};Handsontable.Search.DEFAULT_SEARCH_RESULT_CLASS='htSearchResult';Handsontable.Search.global=(function(){var defaultCallback=Handsontable.Search.DEFAULT_CALLBACK;var defaultQueryMethod=Handsontable.Search.DEFAULT_QUERY_METHOD;var defaultSearchResultClass=Handsontable.Search.DEFAULT_SEARCH_RESULT_CLASS;return{getDefaultCallback:function(){return defaultCallback;},setDefaultCallback:function(newDefaultCallback){defaultCallback=newDefaultCallback;},getDefaultQueryMethod:function(){return defaultQueryMethod;},setDefaultQueryMethod:function(newDefaultQueryMethod){defaultQueryMethod=newDefaultQueryMethod;},getDefaultSearchResultClass:function(){return defaultSearchResultClass;},setDefaultSearchResultClass:function(newSearchResultClass){defaultSearchResultClass=newSearchResultClass;}};})();Handsontable.SearchCellDecorator=function(instance,TD,row,col,prop,value,cellProperties){var searchResultClass=(cellProperties.search!==null&&typeof cellProperties.search=='object'&&cellProperties.search.searchResultClass)||Handsontable.Search.global.getDefaultSearchResultClass();if(cellProperties.isSearchResult){addClass(TD,searchResultClass);}else{removeClass(TD,searchResultClass);}};var originalBaseRenderer=getRenderer('base');registerRenderer('base',function(instance,TD,row,col,prop,value,cellProperties){originalBaseRenderer.apply(this,arguments);Handsontable.SearchCellDecorator.apply(this,arguments);});function init(){var instance=this;var pluginEnabled=!!instance.getSettings().search;if(pluginEnabled){instance.search=new Handsontable.Search(instance);}else{delete instance.search;}}
Handsontable.hooks.add('afterInit',init);Handsontable.hooks.add('afterUpdateSettings',init);},{"helpers/dom/element":44,"renderers":86}],84:[function(require,module,exports){"use strict";Object.defineProperties(exports,{TouchScroll:{get:function(){return TouchScroll;}},__esModule:{value:true}});var $___46__46__47__46__46__47_helpers_47_dom_47_element__,$___46__46__47__95_base__,$___46__46__47__46__46__47_plugins__;var $__0=($___46__46__47__46__46__47_helpers_47_dom_47_element__=require("helpers/dom/element"),$___46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_element__||{default:$___46__46__47__46__46__47_helpers_47_dom_47_element__}),addClass=$__0.addClass,removeClass=$__0.removeClass;var BasePlugin=($___46__46__47__95_base__=require("_base"),$___46__46__47__95_base__&&$___46__46__47__95_base__.__esModule&&$___46__46__47__95_base__||{default:$___46__46__47__95_base__}).default;var registerPlugin=($___46__46__47__46__46__47_plugins__=require("plugins"),$___46__46__47__46__46__47_plugins__&&$___46__46__47__46__46__47_plugins__.__esModule&&$___46__46__47__46__46__47_plugins__||{default:$___46__46__47__46__46__47_plugins__}).registerPlugin;var TouchScroll=function TouchScroll(hotInstance){var $__3=this;$traceurRuntime.superConstructor($TouchScroll).call(this,hotInstance);this.hot.addHook('afterInit',(function(){return $__3.afterInit();}));this.hot.addHook('afterUpdateSettings',(function(){return $__3.onAfterUpdateSettings();}));this.scrollbars=[];this.clones=[];};var $TouchScroll=TouchScroll;($traceurRuntime.createClass)(TouchScroll,{afterInit:function(){this.registerEvents();this.onAfterUpdateSettings();},onAfterUpdateSettings:function(){var _this=this;this.hot.addHookOnce('afterRender',function(){var wtOverlays=_this.hot.view.wt.wtOverlays;_this.scrollbars=[];_this.scrollbars.push(wtOverlays.topOverlay);if(wtOverlays.bottomOverlay.clone){_this.scrollbars.push(wtOverlays.bottomOverlay);}
_this.scrollbars.push(wtOverlays.leftOverlay);if(wtOverlays.topLeftCornerOverlay){_this.scrollbars.push(wtOverlays.topLeftCornerOverlay);}
if(wtOverlays.bottomLeftCornerOverlay&&wtOverlays.bottomLeftCornerOverlay.clone){_this.scrollbars.push(wtOverlays.bottomLeftCornerOverlay);}
_this.clones=[];if(wtOverlays.topOverlay.needFullRender){_this.clones.push(wtOverlays.topOverlay.clone.wtTable.holder.parentNode);}
if(wtOverlays.bottomOverlay.needFullRender){_this.clones.push(wtOverlays.bottomOverlay.clone.wtTable.holder.parentNode);}
if(wtOverlays.leftOverlay.needFullRender){_this.clones.push(wtOverlays.leftOverlay.clone.wtTable.holder.parentNode);}
if(wtOverlays.topLeftCornerOverlay){_this.clones.push(wtOverlays.topLeftCornerOverlay.clone.wtTable.holder.parentNode);}
if(wtOverlays.bottomLeftCornerOverlay&&wtOverlays.bottomLeftCornerOverlay.clone){_this.clones.push(wtOverlays.bottomLeftCornerOverlay.clone.wtTable.holder.parentNode);}});},registerEvents:function(){var $__3=this;this.hot.addHook('beforeTouchScroll',(function(){return $__3.onBeforeTouchScroll();}));this.hot.addHook('afterMomentumScroll',(function(){return $__3.onAfterMomentumScroll();}));},onBeforeTouchScroll:function(){Handsontable.freezeOverlays=true;for(var i=0,cloneCount=this.clones.length;i<cloneCount;i++){addClass(this.clones[i],'hide-tween');}},onAfterMomentumScroll:function(){Handsontable.freezeOverlays=false;var _that=this;for(var i=0,cloneCount=this.clones.length;i<cloneCount;i++){removeClass(this.clones[i],'hide-tween');}
for(var i$__5=0,cloneCount$__6=this.clones.length;i$__5<cloneCount$__6;i$__5++){addClass(this.clones[i$__5],'show-tween');}
setTimeout(function(){for(var i=0,cloneCount=_that.clones.length;i<cloneCount;i++){removeClass(_that.clones[i],'show-tween');}},400);for(var i$__7=0,cloneCount$__8=this.scrollbars.length;i$__7<cloneCount$__8;i$__7++){this.scrollbars[i$__7].refresh();this.scrollbars[i$__7].resetFixedPosition();}
this.hot.view.wt.wtOverlays.syncScrollWithMaster();}},{},BasePlugin);;registerPlugin('touchScroll',TouchScroll);},{"_base":56,"helpers/dom/element":44,"plugins":55}],85:[function(require,module,exports){"use strict";var $___46__46__47__46__46__47_helpers_47_object__,$___46__46__47__46__46__47_helpers_47_dom_47_event__;var $__0=($___46__46__47__46__46__47_helpers_47_object__=require("helpers/object"),$___46__46__47__46__46__47_helpers_47_object__&&$___46__46__47__46__46__47_helpers_47_object__.__esModule&&$___46__46__47__46__46__47_helpers_47_object__||{default:$___46__46__47__46__46__47_helpers_47_object__}),inherit=$__0.inherit,deepClone=$__0.deepClone;var stopImmediatePropagation=($___46__46__47__46__46__47_helpers_47_dom_47_event__=require("helpers/dom/event"),$___46__46__47__46__46__47_helpers_47_dom_47_event__&&$___46__46__47__46__46__47_helpers_47_dom_47_event__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_event__||{default:$___46__46__47__46__46__47_helpers_47_dom_47_event__}).stopImmediatePropagation;Handsontable.UndoRedo=function(instance){var plugin=this;this.instance=instance;this.doneActions=[];this.undoneActions=[];this.ignoreNewActions=false;instance.addHook('afterChange',function(changes,origin){if(changes){var action=new Handsontable.UndoRedo.ChangeAction(changes);plugin.done(action);}});instance.addHook('afterCreateRow',function(index,amount,createdAutomatically){if(createdAutomatically){return;}
var action=new Handsontable.UndoRedo.CreateRowAction(index,amount);plugin.done(action);});instance.addHook('beforeRemoveRow',function(index,amount){var originalData=plugin.instance.getData();index=(originalData.length+index)%originalData.length;var removedData=originalData.slice(index,index+amount);var action=new Handsontable.UndoRedo.RemoveRowAction(index,removedData);plugin.done(action);});instance.addHook('afterCreateCol',function(index,amount,createdAutomatically){if(createdAutomatically){return;}
var action=new Handsontable.UndoRedo.CreateColumnAction(index,amount);plugin.done(action);});instance.addHook('beforeRemoveCol',function(index,amount){var originalData=plugin.instance.getData();index=(plugin.instance.countCols()+index)%plugin.instance.countCols();var removedData=[];for(var i=0,len=originalData.length;i<len;i++){removedData[i]=originalData[i].slice(index,index+amount);}
var headers;if(Array.isArray(instance.getSettings().colHeaders)){headers=instance.getSettings().colHeaders.slice(index,index+removedData.length);}
var action=new Handsontable.UndoRedo.RemoveColumnAction(index,removedData,headers);plugin.done(action);});instance.addHook('beforeCellAlignment',function(stateBefore,range,type,alignment){var action=new Handsontable.UndoRedo.CellAlignmentAction(stateBefore,range,type,alignment);plugin.done(action);});};Handsontable.UndoRedo.prototype.done=function(action){if(!this.ignoreNewActions){this.doneActions.push(action);this.undoneActions.length=0;}};Handsontable.UndoRedo.prototype.undo=function(){if(this.isUndoAvailable()){var action=this.doneActions.pop();this.ignoreNewActions=true;var that=this;action.undo(this.instance,function(){that.ignoreNewActions=false;that.undoneActions.push(action);});}};Handsontable.UndoRedo.prototype.redo=function(){if(this.isRedoAvailable()){var action=this.undoneActions.pop();this.ignoreNewActions=true;var that=this;action.redo(this.instance,function(){that.ignoreNewActions=false;that.doneActions.push(action);});}};Handsontable.UndoRedo.prototype.isUndoAvailable=function(){return this.doneActions.length>0;};Handsontable.UndoRedo.prototype.isRedoAvailable=function(){return this.undoneActions.length>0;};Handsontable.UndoRedo.prototype.clear=function(){this.doneActions.length=0;this.undoneActions.length=0;};Handsontable.UndoRedo.Action=function(){};Handsontable.UndoRedo.Action.prototype.undo=function(){};Handsontable.UndoRedo.Action.prototype.redo=function(){};Handsontable.UndoRedo.ChangeAction=function(changes){this.changes=changes;};inherit(Handsontable.UndoRedo.ChangeAction,Handsontable.UndoRedo.Action);Handsontable.UndoRedo.ChangeAction.prototype.undo=function(instance,undoneCallback){var data=deepClone(this.changes),emptyRowsAtTheEnd=instance.countEmptyRows(true),emptyColsAtTheEnd=instance.countEmptyCols(true);for(var i=0,len=data.length;i<len;i++){data[i].splice(3,1);}
instance.addHookOnce('afterChange',undoneCallback);instance.setDataAtRowProp(data,null,null,'undo');for(var i=0,len=data.length;i<len;i++){if(instance.getSettings().minSpareRows&&data[i][0]+1+instance.getSettings().minSpareRows===instance.countRows()&&emptyRowsAtTheEnd==instance.getSettings().minSpareRows){instance.alter('remove_row',parseInt(data[i][0]+1,10),instance.getSettings().minSpareRows);instance.undoRedo.doneActions.pop();}
if(instance.getSettings().minSpareCols&&data[i][1]+1+instance.getSettings().minSpareCols===instance.countCols()&&emptyColsAtTheEnd==instance.getSettings().minSpareCols){instance.alter('remove_col',parseInt(data[i][1]+1,10),instance.getSettings().minSpareCols);instance.undoRedo.doneActions.pop();}}};Handsontable.UndoRedo.ChangeAction.prototype.redo=function(instance,onFinishCallback){var data=deepClone(this.changes);for(var i=0,len=data.length;i<len;i++){data[i].splice(2,1);}
instance.addHookOnce('afterChange',onFinishCallback);instance.setDataAtRowProp(data,null,null,'redo');};Handsontable.UndoRedo.CreateRowAction=function(index,amount){this.index=index;this.amount=amount;};inherit(Handsontable.UndoRedo.CreateRowAction,Handsontable.UndoRedo.Action);Handsontable.UndoRedo.CreateRowAction.prototype.undo=function(instance,undoneCallback){var rowCount=instance.countRows(),minSpareRows=instance.getSettings().minSpareRows;if(this.index>=rowCount&&this.index-minSpareRows<rowCount){this.index-=minSpareRows;}
instance.addHookOnce('afterRemoveRow',undoneCallback);instance.alter('remove_row',this.index,this.amount);};Handsontable.UndoRedo.CreateRowAction.prototype.redo=function(instance,redoneCallback){instance.addHookOnce('afterCreateRow',redoneCallback);instance.alter('insert_row',this.index+1,this.amount);};Handsontable.UndoRedo.RemoveRowAction=function(index,data){this.index=index;this.data=data;};inherit(Handsontable.UndoRedo.RemoveRowAction,Handsontable.UndoRedo.Action);Handsontable.UndoRedo.RemoveRowAction.prototype.undo=function(instance,undoneCallback){var spliceArgs=[this.index,0];Array.prototype.push.apply(spliceArgs,this.data);Array.prototype.splice.apply(instance.getData(),spliceArgs);instance.addHookOnce('afterRender',undoneCallback);instance.render();};Handsontable.UndoRedo.RemoveRowAction.prototype.redo=function(instance,redoneCallback){instance.addHookOnce('afterRemoveRow',redoneCallback);instance.alter('remove_row',this.index,this.data.length);};Handsontable.UndoRedo.CreateColumnAction=function(index,amount){this.index=index;this.amount=amount;};inherit(Handsontable.UndoRedo.CreateColumnAction,Handsontable.UndoRedo.Action);Handsontable.UndoRedo.CreateColumnAction.prototype.undo=function(instance,undoneCallback){instance.addHookOnce('afterRemoveCol',undoneCallback);instance.alter('remove_col',this.index,this.amount);};Handsontable.UndoRedo.CreateColumnAction.prototype.redo=function(instance,redoneCallback){instance.addHookOnce('afterCreateCol',redoneCallback);instance.alter('insert_col',this.index+1,this.amount);};Handsontable.UndoRedo.CellAlignmentAction=function(stateBefore,range,type,alignment){this.stateBefore=stateBefore;this.range=range;this.type=type;this.alignment=alignment;};Handsontable.UndoRedo.CellAlignmentAction.prototype.undo=function(instance,undoneCallback){if(!instance.getPlugin('contextMenu').isEnabled()){return;}
for(var row=this.range.from.row;row<=this.range.to.row;row++){for(var col=this.range.from.col;col<=this.range.to.col;col++){instance.setCellMeta(row,col,'className',this.stateBefore[row][col]||' htLeft');}}
instance.addHookOnce('afterRender',undoneCallback);instance.render();};Handsontable.UndoRedo.CellAlignmentAction.prototype.redo=function(instance,undoneCallback){if(!instance.getPlugin('contextMenu').isEnabled()){return;}
instance.selectCell(this.range.from.row,this.range.from.col,this.range.to.row,this.range.to.col);instance.getPlugin('contextMenu').executeCommand('alignment:'+this.alignment.replace('ht','').toLowerCase());instance.addHookOnce('afterRender',undoneCallback);instance.render();};Handsontable.UndoRedo.RemoveColumnAction=function(index,data,headers){this.index=index;this.data=data;this.amount=this.data[0].length;this.headers=headers;};inherit(Handsontable.UndoRedo.RemoveColumnAction,Handsontable.UndoRedo.Action);Handsontable.UndoRedo.RemoveColumnAction.prototype.undo=function(instance,undoneCallback){var row,spliceArgs;for(var i=0,len=instance.getData().length;i<len;i++){row=instance.getSourceDataAtRow(i);spliceArgs=[this.index,0];Array.prototype.push.apply(spliceArgs,this.data[i]);Array.prototype.splice.apply(row,spliceArgs);}
if(typeof this.headers!='undefined'){spliceArgs=[this.index,0];Array.prototype.push.apply(spliceArgs,this.headers);Array.prototype.splice.apply(instance.getSettings().colHeaders,spliceArgs);}
instance.addHookOnce('afterRender',undoneCallback);instance.render();};Handsontable.UndoRedo.RemoveColumnAction.prototype.redo=function(instance,redoneCallback){instance.addHookOnce('afterRemoveCol',redoneCallback);instance.alter('remove_col',this.index,this.amount);};function init(){var instance=this;var pluginEnabled=typeof instance.getSettings().undo=='undefined'||instance.getSettings().undo;if(pluginEnabled){if(!instance.undoRedo){instance.undoRedo=new Handsontable.UndoRedo(instance);exposeUndoRedoMethods(instance);instance.addHook('beforeKeyDown',onBeforeKeyDown);instance.addHook('afterChange',onAfterChange);}}else{if(instance.undoRedo){delete instance.undoRedo;removeExposedUndoRedoMethods(instance);instance.removeHook('beforeKeyDown',onBeforeKeyDown);instance.removeHook('afterChange',onAfterChange);}}}
function onBeforeKeyDown(event){var instance=this;var ctrlDown=(event.ctrlKey||event.metaKey)&&!event.altKey;if(ctrlDown){if(event.keyCode===89||(event.shiftKey&&event.keyCode===90)){instance.undoRedo.redo();stopImmediatePropagation(event);}else if(event.keyCode===90){instance.undoRedo.undo();stopImmediatePropagation(event);}}}
function onAfterChange(changes,source){var instance=this;if(source=='loadData'){return instance.undoRedo.clear();}}
function exposeUndoRedoMethods(instance){instance.undo=function(){return instance.undoRedo.undo();};instance.redo=function(){return instance.undoRedo.redo();};instance.isUndoAvailable=function(){return instance.undoRedo.isUndoAvailable();};instance.isRedoAvailable=function(){return instance.undoRedo.isRedoAvailable();};instance.clearUndo=function(){return instance.undoRedo.clear();};}
function removeExposedUndoRedoMethods(instance){delete instance.undo;delete instance.redo;delete instance.isUndoAvailable;delete instance.isRedoAvailable;delete instance.clearUndo;}
Handsontable.hooks.add('afterInit',init);Handsontable.hooks.add('afterUpdateSettings',init);},{"helpers/dom/event":45,"helpers/object":49}],86:[function(require,module,exports){"use strict";Object.defineProperties(exports,{registerRenderer:{get:function(){return registerRenderer;}},getRenderer:{get:function(){return getRenderer;}},hasRenderer:{get:function(){return hasRenderer;}},__esModule:{value:true}});var $__helpers_47_string__;var toUpperCaseFirst=($__helpers_47_string__=require("helpers/string"),$__helpers_47_string__&&$__helpers_47_string__.__esModule&&$__helpers_47_string__||{default:$__helpers_47_string__}).toUpperCaseFirst;var registeredRenderers={};Handsontable.renderers=Handsontable.renderers||{};Handsontable.renderers.registerRenderer=registerRenderer;Handsontable.renderers.getRenderer=getRenderer;function registerRenderer(rendererName,rendererFunction){var registerName;registeredRenderers[rendererName]=rendererFunction;registerName=toUpperCaseFirst(rendererName)+'Renderer';Handsontable.renderers[registerName]=rendererFunction;Handsontable[registerName]=rendererFunction;}
function getRenderer(rendererName){if(typeof rendererName=='function'){return rendererName;}
if(typeof rendererName!='string'){throw Error('Only strings and functions can be passed as "renderer" parameter');}
if(!(rendererName in registeredRenderers)){throw Error('No editor registered under name "'+rendererName+'"');}
return registeredRenderers[rendererName];}
function hasRenderer(rendererName){return rendererName in registeredRenderers;};},{"helpers/string":51}],87:[function(require,module,exports){"use strict";Object.defineProperties(exports,{cellDecorator:{get:function(){return cellDecorator;}},__esModule:{value:true}});var $___46__46__47_helpers_47_dom_47_element__,$___46__46__47_renderers__;var $__0=($___46__46__47_helpers_47_dom_47_element__=require("helpers/dom/element"),$___46__46__47_helpers_47_dom_47_element__&&$___46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47_helpers_47_dom_47_element__||{default:$___46__46__47_helpers_47_dom_47_element__}),addClass=$__0.addClass,removeClass=$__0.removeClass;var registerRenderer=($___46__46__47_renderers__=require("renderers"),$___46__46__47_renderers__&&$___46__46__47_renderers__.__esModule&&$___46__46__47_renderers__||{default:$___46__46__47_renderers__}).registerRenderer;;registerRenderer('base',cellDecorator);Handsontable.renderers.cellDecorator=cellDecorator;function cellDecorator(instance,TD,row,col,prop,value,cellProperties){if(cellProperties.className){if(TD.className){TD.className=TD.className+' '+cellProperties.className;}else{TD.className=cellProperties.className;}}
if(cellProperties.readOnly){addClass(TD,cellProperties.readOnlyCellClassName);}
if(cellProperties.valid===false&&cellProperties.invalidCellClassName){addClass(TD,cellProperties.invalidCellClassName);}else{removeClass(TD,cellProperties.invalidCellClassName);}
if(cellProperties.wordWrap===false&&cellProperties.noWordWrapClassName){addClass(TD,cellProperties.noWordWrapClassName);}
if(!value&&cellProperties.placeholder){addClass(TD,cellProperties.placeholderCellClassName);}}},{"helpers/dom/element":44,"renderers":86}],88:[function(require,module,exports){"use strict";Object.defineProperties(exports,{autocompleteRenderer:{get:function(){return autocompleteRenderer;}},__esModule:{value:true}});var $___46__46__47_helpers_47_dom_47_element__,$___46__46__47_eventManager__,$___46__46__47_renderers__,$___46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__;var $__0=($___46__46__47_helpers_47_dom_47_element__=require("helpers/dom/element"),$___46__46__47_helpers_47_dom_47_element__&&$___46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47_helpers_47_dom_47_element__||{default:$___46__46__47_helpers_47_dom_47_element__}),addClass=$__0.addClass,hasClass=$__0.hasClass,empty=$__0.empty;var eventManagerObject=($___46__46__47_eventManager__=require("eventManager"),$___46__46__47_eventManager__&&$___46__46__47_eventManager__.__esModule&&$___46__46__47_eventManager__||{default:$___46__46__47_eventManager__}).eventManager;var $__2=($___46__46__47_renderers__=require("renderers"),$___46__46__47_renderers__&&$___46__46__47_renderers__.__esModule&&$___46__46__47_renderers__||{default:$___46__46__47_renderers__}),getRenderer=$__2.getRenderer,registerRenderer=$__2.registerRenderer;var WalkontableCellCoords=($___46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__=require("3rdparty/walkontable/src/cell/coords"),$___46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__&&$___46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__.__esModule&&$___46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__||{default:$___46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__}).WalkontableCellCoords;var clonableWRAPPER=document.createElement('DIV');clonableWRAPPER.className='htAutocompleteWrapper';var clonableARROW=document.createElement('DIV');clonableARROW.className='htAutocompleteArrow';clonableARROW.appendChild(document.createTextNode(String.fromCharCode(9660)));var wrapTdContentWithWrapper=function(TD,WRAPPER){WRAPPER.innerHTML=TD.innerHTML;empty(TD);TD.appendChild(WRAPPER);};function autocompleteRenderer(instance,TD,row,col,prop,value,cellProperties){var WRAPPER=clonableWRAPPER.cloneNode(true);var ARROW=clonableARROW.cloneNode(true);getRenderer('text')(instance,TD,row,col,prop,value,cellProperties);TD.appendChild(ARROW);addClass(TD,'htAutocomplete');if(!TD.firstChild){TD.appendChild(document.createTextNode(String.fromCharCode(160)));}
if(!instance.acArrowListener){var eventManager=eventManagerObject(instance);instance.acArrowListener=function(event){if(hasClass(event.target,'htAutocompleteArrow')){instance.view.wt.getSetting('onCellDblClick',null,new WalkontableCellCoords(row,col),TD);}};eventManager.addEventListener(instance.rootElement,'mousedown',instance.acArrowListener);instance.addHookOnce('afterDestroy',function(){eventManager.destroy();});}};registerRenderer('autocomplete',autocompleteRenderer);},{"3rdparty/walkontable/src/cell/coords":5,"eventManager":40,"helpers/dom/element":44,"renderers":86}],89:[function(require,module,exports){"use strict";Object.defineProperties(exports,{checkboxRenderer:{get:function(){return checkboxRenderer;}},__esModule:{value:true}});var $___46__46__47_helpers_47_dom_47_element__,$___46__46__47_helpers_47_string__,$___46__46__47_eventManager__,$___46__46__47_renderers__,$___46__46__47_helpers_47_unicode__,$___46__46__47_helpers_47_dom_47_event__;var $__0=($___46__46__47_helpers_47_dom_47_element__=require("helpers/dom/element"),$___46__46__47_helpers_47_dom_47_element__&&$___46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47_helpers_47_dom_47_element__||{default:$___46__46__47_helpers_47_dom_47_element__}),empty=$__0.empty,addClass=$__0.addClass,hasClass=$__0.hasClass;var equalsIgnoreCase=($___46__46__47_helpers_47_string__=require("helpers/string"),$___46__46__47_helpers_47_string__&&$___46__46__47_helpers_47_string__.__esModule&&$___46__46__47_helpers_47_string__||{default:$___46__46__47_helpers_47_string__}).equalsIgnoreCase;var EventManager=($___46__46__47_eventManager__=require("eventManager"),$___46__46__47_eventManager__&&$___46__46__47_eventManager__.__esModule&&$___46__46__47_eventManager__||{default:$___46__46__47_eventManager__}).EventManager;var $__3=($___46__46__47_renderers__=require("renderers"),$___46__46__47_renderers__&&$___46__46__47_renderers__.__esModule&&$___46__46__47_renderers__||{default:$___46__46__47_renderers__}),getRenderer=$__3.getRenderer,registerRenderer=$__3.registerRenderer;var KEY_CODES=($___46__46__47_helpers_47_unicode__=require("helpers/unicode"),$___46__46__47_helpers_47_unicode__&&$___46__46__47_helpers_47_unicode__.__esModule&&$___46__46__47_helpers_47_unicode__||{default:$___46__46__47_helpers_47_unicode__}).KEY_CODES;var $__5=($___46__46__47_helpers_47_dom_47_event__=require("helpers/dom/event"),$___46__46__47_helpers_47_dom_47_event__&&$___46__46__47_helpers_47_dom_47_event__.__esModule&&$___46__46__47_helpers_47_dom_47_event__||{default:$___46__46__47_helpers_47_dom_47_event__}),stopPropagation=$__5.stopPropagation,stopImmediatePropagation=$__5.stopImmediatePropagation,isImmediatePropagationStopped=$__5.isImmediatePropagationStopped;var isListeningKeyDownEvent=new WeakMap();var BAD_VALUE_CLASS='htBadValue';function checkboxRenderer(instance,TD,row,col,prop,value,cellProperties){var eventManager=new EventManager(instance);var input=createInput();var labelOptions=cellProperties.label;var badValue=false;if(typeof cellProperties.checkedTemplate==='undefined'){cellProperties.checkedTemplate=true;}
if(typeof cellProperties.uncheckedTemplate==='undefined'){cellProperties.uncheckedTemplate=false;}
empty(TD);if(value===cellProperties.checkedTemplate||equalsIgnoreCase(value,cellProperties.checkedTemplate)){input.checked=true;}else if(value===cellProperties.uncheckedTemplate||equalsIgnoreCase(value,cellProperties.uncheckedTemplate)){input.checked=false;}else if(value===null){addClass(input,'noValue');}else{input.style.display='none';addClass(input,BAD_VALUE_CLASS);badValue=true;}
if(!badValue&&labelOptions){var labelText='';if(labelOptions.value){labelText=typeof labelOptions.value==='function'?labelOptions.value.call(this,row,col,prop,value):labelOptions.value;}else if(labelOptions.property){labelText=instance.getDataAtRowProp(row,labelOptions.property);}
var label=createLabel(labelText);if(labelOptions.position==='before'){label.appendChild(input);}else{label.insertBefore(input,label.firstChild);}
input=label;}
TD.appendChild(input);if(badValue){TD.appendChild(document.createTextNode('#bad-value#'));}
if(cellProperties.readOnly){eventManager.addEventListener(input,'click',preventDefault);}else{eventManager.addEventListener(input,'mousedown',stopPropagation);eventManager.addEventListener(input,'mouseup',stopPropagation);eventManager.addEventListener(input,'change',(function(event){instance.setDataAtRowProp(row,prop,event.target.checked?cellProperties.checkedTemplate:cellProperties.uncheckedTemplate);}));}
if(!isListeningKeyDownEvent.has(instance)){isListeningKeyDownEvent.set(instance,true);instance.addHook('beforeKeyDown',onBeforeKeyDown);}
function onBeforeKeyDown(event){var allowedKeys=[KEY_CODES.SPACE,KEY_CODES.ENTER,KEY_CODES.DELETE,KEY_CODES.BACKSPACE];if(allowedKeys.indexOf(event.keyCode)!==-1&&!isImmediatePropagationStopped(event)){eachSelectedCheckboxCell(function(){stopImmediatePropagation(event);event.preventDefault();});}
if(event.keyCode==KEY_CODES.SPACE||event.keyCode==KEY_CODES.ENTER){toggleSelected();}
if(event.keyCode==KEY_CODES.DELETE||event.keyCode==KEY_CODES.BACKSPACE){toggleSelected(false);}}
function toggleSelected(){var checked=arguments[0]!==(void 0)?arguments[0]:null;eachSelectedCheckboxCell(function(checkboxes){for(var i=0,len=checkboxes.length;i<len;i++){if(hasClass(checkboxes[i],BAD_VALUE_CLASS)&&checked===null){return;}
toggleCheckbox(checkboxes[i],checked);}});}
function toggleCheckbox(checkbox){var checked=arguments[1]!==(void 0)?arguments[1]:null;if(checked===null){checkbox.checked=!checkbox.checked;}else{checkbox.checked=checked;}
eventManager.fireEvent(checkbox,'change');}
function eachSelectedCheckboxCell(callback){var selRange=instance.getSelectedRange();var topLeft=selRange.getTopLeftCorner();var bottomRight=selRange.getBottomRightCorner();for(var row=topLeft.row;row<=bottomRight.row;row++){for(var col=topLeft.col;col<=bottomRight.col;col++){var cell=instance.getCell(row,col);var cellProperties$__6=instance.getCellMeta(row,col);var checkboxes=cell.querySelectorAll('input[type=checkbox]');if(checkboxes.length>0&&!cellProperties$__6.readOnly){callback(checkboxes);}}}}};registerRenderer('checkbox',checkboxRenderer);function createInput(){var input=document.createElement('input');input.className='htCheckboxRendererInput';input.type='checkbox';input.setAttribute('autocomplete','off');return input.cloneNode(false);}
function createLabel(text){var label=document.createElement('label');label.className='htCheckboxRendererLabel';label.appendChild(document.createTextNode(text));return label.cloneNode(true);}
function preventDefault(event){event.preventDefault();}},{"eventManager":40,"helpers/dom/element":44,"helpers/dom/event":45,"helpers/string":51,"helpers/unicode":52,"renderers":86}],90:[function(require,module,exports){"use strict";Object.defineProperties(exports,{htmlRenderer:{get:function(){return htmlRenderer;}},__esModule:{value:true}});var $___46__46__47_helpers_47_dom_47_element__,$___46__46__47_renderers__;var fastInnerHTML=($___46__46__47_helpers_47_dom_47_element__=require("helpers/dom/element"),$___46__46__47_helpers_47_dom_47_element__&&$___46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47_helpers_47_dom_47_element__||{default:$___46__46__47_helpers_47_dom_47_element__}).fastInnerHTML;var $__1=($___46__46__47_renderers__=require("renderers"),$___46__46__47_renderers__&&$___46__46__47_renderers__.__esModule&&$___46__46__47_renderers__||{default:$___46__46__47_renderers__}),getRenderer=$__1.getRenderer,registerRenderer=$__1.registerRenderer;function htmlRenderer(instance,TD,row,col,prop,value,cellProperties){getRenderer('base').apply(this,arguments);fastInnerHTML(TD,value);};registerRenderer('html',htmlRenderer);},{"helpers/dom/element":44,"renderers":86}],91:[function(require,module,exports){"use strict";Object.defineProperties(exports,{numericRenderer:{get:function(){return numericRenderer;}},__esModule:{value:true}});var $__numeral__,$___46__46__47_helpers_47_dom_47_element__,$___46__46__47_renderers__,$___46__46__47_helpers_47_number__;var numeral=($__numeral__=require("numeral"),$__numeral__&&$__numeral__.__esModule&&$__numeral__||{default:$__numeral__}).default;var addClass=($___46__46__47_helpers_47_dom_47_element__=require("helpers/dom/element"),$___46__46__47_helpers_47_dom_47_element__&&$___46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47_helpers_47_dom_47_element__||{default:$___46__46__47_helpers_47_dom_47_element__}).addClass;var $__2=($___46__46__47_renderers__=require("renderers"),$___46__46__47_renderers__&&$___46__46__47_renderers__.__esModule&&$___46__46__47_renderers__||{default:$___46__46__47_renderers__}),getRenderer=$__2.getRenderer,registerRenderer=$__2.registerRenderer;var isNumeric=($___46__46__47_helpers_47_number__=require("helpers/number"),$___46__46__47_helpers_47_number__&&$___46__46__47_helpers_47_number__.__esModule&&$___46__46__47_helpers_47_number__||{default:$___46__46__47_helpers_47_number__}).isNumeric;function numericRenderer(instance,TD,row,col,prop,value,cellProperties){if(isNumeric(value)){if(typeof cellProperties.language!=='undefined'){numeral.language(cellProperties.language);}
value=numeral(value).format(cellProperties.format||'0');addClass(TD,'htNumeric');}
getRenderer('text')(instance,TD,row,col,prop,value,cellProperties);};registerRenderer('numeric',numericRenderer);},{"helpers/dom/element":44,"helpers/number":48,"numeral":"numeral","renderers":86}],92:[function(require,module,exports){"use strict";Object.defineProperties(exports,{passwordRenderer:{get:function(){return passwordRenderer;}},__esModule:{value:true}});var $___46__46__47_helpers_47_dom_47_element__,$___46__46__47_renderers__;var fastInnerHTML=($___46__46__47_helpers_47_dom_47_element__=require("helpers/dom/element"),$___46__46__47_helpers_47_dom_47_element__&&$___46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47_helpers_47_dom_47_element__||{default:$___46__46__47_helpers_47_dom_47_element__}).fastInnerHTML;var $__1=($___46__46__47_renderers__=require("renderers"),$___46__46__47_renderers__&&$___46__46__47_renderers__.__esModule&&$___46__46__47_renderers__||{default:$___46__46__47_renderers__}),getRenderer=$__1.getRenderer,registerRenderer=$__1.registerRenderer;function passwordRenderer(instance,TD,row,col,prop,value,cellProperties){getRenderer('text').apply(this,arguments);value=TD.innerHTML;var hash;var hashLength=cellProperties.hashLength||value.length;var hashSymbol=cellProperties.hashSymbol||'*';for(hash='';hash.split(hashSymbol).length-1<hashLength;hash+=hashSymbol){}
fastInnerHTML(TD,hash);};registerRenderer('password',passwordRenderer);},{"helpers/dom/element":44,"renderers":86}],93:[function(require,module,exports){"use strict";Object.defineProperties(exports,{textRenderer:{get:function(){return textRenderer;}},__esModule:{value:true}});var $___46__46__47_helpers_47_dom_47_element__,$___46__46__47_helpers_47_mixed__,$___46__46__47_renderers__;var $__0=($___46__46__47_helpers_47_dom_47_element__=require("helpers/dom/element"),$___46__46__47_helpers_47_dom_47_element__&&$___46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47_helpers_47_dom_47_element__||{default:$___46__46__47_helpers_47_dom_47_element__}),empty=$__0.empty,fastInnerText=$__0.fastInnerText;var stringify=($___46__46__47_helpers_47_mixed__=require("helpers/mixed"),$___46__46__47_helpers_47_mixed__&&$___46__46__47_helpers_47_mixed__.__esModule&&$___46__46__47_helpers_47_mixed__||{default:$___46__46__47_helpers_47_mixed__}).stringify;var $__2=($___46__46__47_renderers__=require("renderers"),$___46__46__47_renderers__&&$___46__46__47_renderers__.__esModule&&$___46__46__47_renderers__||{default:$___46__46__47_renderers__}),getRenderer=$__2.getRenderer,registerRenderer=$__2.registerRenderer;function textRenderer(instance,TD,row,col,prop,value,cellProperties){getRenderer('base').apply(this,arguments);if(!value&&cellProperties.placeholder){value=cellProperties.placeholder;}
var escaped=stringify(value);if(!instance.getSettings().trimWhitespace){escaped=escaped.replace(/ /g,String.fromCharCode(160));}
if(cellProperties.rendererTemplate){empty(TD);var TEMPLATE=document.createElement('TEMPLATE');TEMPLATE.setAttribute('bind','{{}}');TEMPLATE.innerHTML=cellProperties.rendererTemplate;HTMLTemplateElement.decorate(TEMPLATE);TEMPLATE.model=instance.getSourceDataAtRow(row);TD.appendChild(TEMPLATE);}else{fastInnerText(TD,escaped);}};registerRenderer('text',textRenderer);},{"helpers/dom/element":44,"helpers/mixed":47,"renderers":86}],94:[function(require,module,exports){"use strict";(function(global){'use strict';if(global.$traceurRuntime){return;}
var $Object=Object;var $TypeError=TypeError;var $create=$Object.create;var $defineProperties=$Object.defineProperties;var $defineProperty=$Object.defineProperty;var $freeze=$Object.freeze;var $getOwnPropertyDescriptor=$Object.getOwnPropertyDescriptor;var $getOwnPropertyNames=$Object.getOwnPropertyNames;var $keys=$Object.keys;var $hasOwnProperty=$Object.prototype.hasOwnProperty;var $preventExtensions=Object.preventExtensions;var $seal=Object.seal;var $isExtensible=Object.isExtensible;function nonEnum(value){return{configurable:true,enumerable:false,value:value,writable:true};}
var method=nonEnum;var counter=0;function newUniqueString(){return'__$'+Math.floor(Math.random()*1e9)+'$'+ ++counter+'$__';}
var symbolInternalProperty=newUniqueString();var symbolDescriptionProperty=newUniqueString();var symbolDataProperty=newUniqueString();var symbolValues=$create(null);var privateNames=$create(null);function isPrivateName(s){return privateNames[s];}
function createPrivateName(){var s=newUniqueString();privateNames[s]=true;return s;}
function isShimSymbol(symbol){return typeof symbol==='object'&&symbol instanceof SymbolValue;}
function typeOf(v){if(isShimSymbol(v))
return'symbol';return typeof v;}
function Symbol(description){var value=new SymbolValue(description);if(!(this instanceof Symbol))
return value;throw new TypeError('Symbol cannot be new\'ed');}
$defineProperty(Symbol.prototype,'constructor',nonEnum(Symbol));$defineProperty(Symbol.prototype,'toString',method(function(){var symbolValue=this[symbolDataProperty];if(!getOption('symbols'))
return symbolValue[symbolInternalProperty];if(!symbolValue)
throw TypeError('Conversion from symbol to string');var desc=symbolValue[symbolDescriptionProperty];if(desc===undefined)
desc='';return'Symbol('+desc+')';}));$defineProperty(Symbol.prototype,'valueOf',method(function(){var symbolValue=this[symbolDataProperty];if(!symbolValue)
throw TypeError('Conversion from symbol to string');if(!getOption('symbols'))
return symbolValue[symbolInternalProperty];return symbolValue;}));function SymbolValue(description){var key=newUniqueString();$defineProperty(this,symbolDataProperty,{value:this});$defineProperty(this,symbolInternalProperty,{value:key});$defineProperty(this,symbolDescriptionProperty,{value:description});freeze(this);symbolValues[key]=this;}
$defineProperty(SymbolValue.prototype,'constructor',nonEnum(Symbol));$defineProperty(SymbolValue.prototype,'toString',{value:Symbol.prototype.toString,enumerable:false});$defineProperty(SymbolValue.prototype,'valueOf',{value:Symbol.prototype.valueOf,enumerable:false});var hashProperty=createPrivateName();var hashPropertyDescriptor={value:undefined};var hashObjectProperties={hash:{value:undefined},self:{value:undefined}};var hashCounter=0;function getOwnHashObject(object){var hashObject=object[hashProperty];if(hashObject&&hashObject.self===object)
return hashObject;if($isExtensible(object)){hashObjectProperties.hash.value=hashCounter++;hashObjectProperties.self.value=object;hashPropertyDescriptor.value=$create(null,hashObjectProperties);$defineProperty(object,hashProperty,hashPropertyDescriptor);return hashPropertyDescriptor.value;}
return undefined;}
function freeze(object){getOwnHashObject(object);return $freeze.apply(this,arguments);}
function preventExtensions(object){getOwnHashObject(object);return $preventExtensions.apply(this,arguments);}
function seal(object){getOwnHashObject(object);return $seal.apply(this,arguments);}
freeze(SymbolValue.prototype);function isSymbolString(s){return symbolValues[s]||privateNames[s];}
function toProperty(name){if(isShimSymbol(name))
return name[symbolInternalProperty];return name;}
function removeSymbolKeys(array){var rv=[];for(var i=0;i<array.length;i++){if(!isSymbolString(array[i])){rv.push(array[i]);}}
return rv;}
function getOwnPropertyNames(object){return removeSymbolKeys($getOwnPropertyNames(object));}
function keys(object){return removeSymbolKeys($keys(object));}
function getOwnPropertySymbols(object){var rv=[];var names=$getOwnPropertyNames(object);for(var i=0;i<names.length;i++){var symbol=symbolValues[names[i]];if(symbol){rv.push(symbol);}}
return rv;}
function getOwnPropertyDescriptor(object,name){return $getOwnPropertyDescriptor(object,toProperty(name));}
function hasOwnProperty(name){return $hasOwnProperty.call(this,toProperty(name));}
function getOption(name){return global.traceur&&global.traceur.options[name];}
function defineProperty(object,name,descriptor){if(isShimSymbol(name)){name=name[symbolInternalProperty];}
$defineProperty(object,name,descriptor);return object;}
function polyfillObject(Object){$defineProperty(Object,'defineProperty',{value:defineProperty});$defineProperty(Object,'getOwnPropertyNames',{value:getOwnPropertyNames});$defineProperty(Object,'getOwnPropertyDescriptor',{value:getOwnPropertyDescriptor});$defineProperty(Object.prototype,'hasOwnProperty',{value:hasOwnProperty});$defineProperty(Object,'freeze',{value:freeze});$defineProperty(Object,'preventExtensions',{value:preventExtensions});$defineProperty(Object,'seal',{value:seal});$defineProperty(Object,'keys',{value:keys});}
function exportStar(object){for(var i=1;i<arguments.length;i++){var names=$getOwnPropertyNames(arguments[i]);for(var j=0;j<names.length;j++){var name=names[j];if(isSymbolString(name))
continue;(function(mod,name){$defineProperty(object,name,{get:function(){return mod[name];},enumerable:true});})(arguments[i],names[j]);}}
return object;}
function isObject(x){return x!=null&&(typeof x==='object'||typeof x==='function');}
function toObject(x){if(x==null)
throw $TypeError();return $Object(x);}
function checkObjectCoercible(argument){if(argument==null){throw new TypeError('Value cannot be converted to an Object');}
return argument;}
function polyfillSymbol(global,Symbol){if(!global.Symbol){global.Symbol=Symbol;Object.getOwnPropertySymbols=getOwnPropertySymbols;}
if(!global.Symbol.iterator){global.Symbol.iterator=Symbol('Symbol.iterator');}}
function setupGlobals(global){polyfillSymbol(global,Symbol);global.Reflect=global.Reflect||{};global.Reflect.global=global.Reflect.global||global;polyfillObject(global.Object);}
setupGlobals(global);global.$traceurRuntime={checkObjectCoercible:checkObjectCoercible,createPrivateName:createPrivateName,defineProperties:$defineProperties,defineProperty:$defineProperty,exportStar:exportStar,getOwnHashObject:getOwnHashObject,getOwnPropertyDescriptor:$getOwnPropertyDescriptor,getOwnPropertyNames:$getOwnPropertyNames,isObject:isObject,isPrivateName:isPrivateName,isSymbolString:isSymbolString,keys:$keys,setupGlobals:setupGlobals,toObject:toObject,toProperty:toProperty,typeof:typeOf};})(window);(function(){'use strict';var $toProperty=$traceurRuntime.toProperty;function spread(){var rv=[],j=0,iterResult;for(var i=0;i<arguments.length;i++){var valueToSpread=$traceurRuntime.checkObjectCoercible(arguments[i]);if(typeof valueToSpread[$toProperty(Symbol.iterator)]!=='function'){throw new TypeError('Cannot spread non-iterable object.');}
var iter=valueToSpread[$toProperty(Symbol.iterator)]();while(!(iterResult=iter.next()).done){rv[j++]=iterResult.value;}}
return rv;}
$traceurRuntime.spread=spread;})();(function(){'use strict';var $Object=Object;var $TypeError=TypeError;var $create=$Object.create;var $defineProperties=$traceurRuntime.defineProperties;var $defineProperty=$traceurRuntime.defineProperty;var $getOwnPropertyDescriptor=$traceurRuntime.getOwnPropertyDescriptor;var $getPrototypeOf=Object.getPrototypeOf;var $toProperty=$traceurRuntime.toProperty;var $__0=Object,getOwnPropertyNames=$__0.getOwnPropertyNames,getOwnPropertySymbols=$__0.getOwnPropertySymbols;function superDescriptor(homeObject,name){var proto=$getPrototypeOf(homeObject);do{var result=$getOwnPropertyDescriptor(proto,name);if(result)
return result;proto=$getPrototypeOf(proto);}while(proto);return undefined;}
function superConstructor(ctor){return ctor.__proto__;}
function superCall(self,homeObject,name,args){return superGet(self,homeObject,name).apply(self,args);}
function superGet(self,homeObject,name){var descriptor=superDescriptor(homeObject,name);if(descriptor){if(!descriptor.get)
return descriptor.value;return descriptor.get.call(self);}
return undefined;}
function superSet(self,homeObject,name,value){var descriptor=superDescriptor(homeObject,name);if(descriptor&&descriptor.set){descriptor.set.call(self,value);return value;}
throw $TypeError(("super has no setter '"+name+"'."));}
function getDescriptors(object){var descriptors={};var names=getOwnPropertyNames(object);for(var i=0;i<names.length;i++){var name=names[i];descriptors[name]=$getOwnPropertyDescriptor(object,name);}
var symbols=getOwnPropertySymbols(object);for(var i=0;i<symbols.length;i++){var symbol=symbols[i];descriptors[$toProperty(symbol)]=$getOwnPropertyDescriptor(object,$toProperty(symbol));}
return descriptors;}
function createClass(ctor,object,staticObject,superClass){$defineProperty(object,'constructor',{value:ctor,configurable:true,enumerable:false,writable:true});if(arguments.length>3){if(typeof superClass==='function')
ctor.__proto__=superClass;ctor.prototype=$create(getProtoParent(superClass),getDescriptors(object));}else{ctor.prototype=object;}
$defineProperty(ctor,'prototype',{configurable:false,writable:false});return $defineProperties(ctor,getDescriptors(staticObject));}
function getProtoParent(superClass){if(typeof superClass==='function'){var prototype=superClass.prototype;if($Object(prototype)===prototype||prototype===null)
return superClass.prototype;throw new $TypeError('super prototype must be an Object or null');}
if(superClass===null)
return null;throw new $TypeError(("Super expression must either be null or a function, not "+typeof superClass+"."));}
function defaultSuperCall(self,homeObject,args){if($getPrototypeOf(homeObject)!==null)
superCall(self,homeObject,'constructor',args);}
$traceurRuntime.createClass=createClass;$traceurRuntime.defaultSuperCall=defaultSuperCall;$traceurRuntime.superCall=superCall;$traceurRuntime.superConstructor=superConstructor;$traceurRuntime.superGet=superGet;$traceurRuntime.superSet=superSet;})();},{}],95:[function(require,module,exports){"use strict";Object.defineProperties(exports,{TableView:{get:function(){return TableView;}},__esModule:{value:true}});var $__helpers_47_dom_47_element__,$__eventManager__,$__helpers_47_dom_47_event__,$__3rdparty_47_walkontable_47_src_47_cell_47_coords__,$__3rdparty_47_walkontable_47_src_47_selection__,$__3rdparty_47_walkontable_47_src_47_core__;var $__0=($__helpers_47_dom_47_element__=require("helpers/dom/element"),$__helpers_47_dom_47_element__&&$__helpers_47_dom_47_element__.__esModule&&$__helpers_47_dom_47_element__||{default:$__helpers_47_dom_47_element__}),addClass=$__0.addClass,empty=$__0.empty,fastInnerHTML=$__0.fastInnerHTML,fastInnerText=$__0.fastInnerText,getScrollbarWidth=$__0.getScrollbarWidth,hasClass=$__0.hasClass,isChildOf=$__0.isChildOf,isInput=$__0.isInput,isOutsideInput=$__0.isOutsideInput;var eventManagerObject=($__eventManager__=require("eventManager"),$__eventManager__&&$__eventManager__.__esModule&&$__eventManager__||{default:$__eventManager__}).eventManager;var $__2=($__helpers_47_dom_47_event__=require("helpers/dom/event"),$__helpers_47_dom_47_event__&&$__helpers_47_dom_47_event__.__esModule&&$__helpers_47_dom_47_event__||{default:$__helpers_47_dom_47_event__}),stopPropagation=$__2.stopPropagation,isImmediatePropagationStopped=$__2.isImmediatePropagationStopped;var WalkontableCellCoords=($__3rdparty_47_walkontable_47_src_47_cell_47_coords__=require("3rdparty/walkontable/src/cell/coords"),$__3rdparty_47_walkontable_47_src_47_cell_47_coords__&&$__3rdparty_47_walkontable_47_src_47_cell_47_coords__.__esModule&&$__3rdparty_47_walkontable_47_src_47_cell_47_coords__||{default:$__3rdparty_47_walkontable_47_src_47_cell_47_coords__}).WalkontableCellCoords;var WalkontableSelection=($__3rdparty_47_walkontable_47_src_47_selection__=require("3rdparty/walkontable/src/selection"),$__3rdparty_47_walkontable_47_src_47_selection__&&$__3rdparty_47_walkontable_47_src_47_selection__.__esModule&&$__3rdparty_47_walkontable_47_src_47_selection__||{default:$__3rdparty_47_walkontable_47_src_47_selection__}).WalkontableSelection;var Walkontable=($__3rdparty_47_walkontable_47_src_47_core__=require("3rdparty/walkontable/src/core"),$__3rdparty_47_walkontable_47_src_47_core__&&$__3rdparty_47_walkontable_47_src_47_core__.__esModule&&$__3rdparty_47_walkontable_47_src_47_core__||{default:$__3rdparty_47_walkontable_47_src_47_core__}).Walkontable;Handsontable.TableView=TableView;function TableView(instance){var that=this;this.eventManager=eventManagerObject(instance);this.instance=instance;this.settings=instance.getSettings();var originalStyle=instance.rootElement.getAttribute('style');if(originalStyle){instance.rootElement.setAttribute('data-originalstyle',originalStyle);}
addClass(instance.rootElement,'handsontable');var table=document.createElement('TABLE');addClass(table,'htCore');if(instance.getSettings().tableClassName){addClass(table,instance.getSettings().tableClassName);}
this.THEAD=document.createElement('THEAD');table.appendChild(this.THEAD);this.TBODY=document.createElement('TBODY');table.appendChild(this.TBODY);instance.table=table;instance.container.insertBefore(table,instance.container.firstChild);this.eventManager.addEventListener(instance.rootElement,'mousedown',function(event){if(!that.isTextSelectionAllowed(event.target)){clearTextSelection();event.preventDefault();window.focus();}});this.eventManager.addEventListener(document.documentElement,'keyup',function(event){if(instance.selection.isInProgress()&&!event.shiftKey){instance.selection.finish();}});var isMouseDown;this.isMouseDown=function(){return isMouseDown;};this.eventManager.addEventListener(document.documentElement,'mouseup',function(event){if(instance.selection.isInProgress()&&event.which===1){instance.selection.finish();}
isMouseDown=false;if(isOutsideInput(document.activeElement)){instance.unlisten();}});this.eventManager.addEventListener(document.documentElement,'mousedown',function(event){var next=event.target;var eventX=event.x||event.clientX;var eventY=event.y||event.clientY;if(isMouseDown||!instance.rootElement){return;}
if(next===instance.view.wt.wtTable.holder){var scrollbarWidth=getScrollbarWidth();if(document.elementFromPoint(eventX+scrollbarWidth,eventY)!==instance.view.wt.wtTable.holder||document.elementFromPoint(eventX,eventY+scrollbarWidth)!==instance.view.wt.wtTable.holder){return;}}else{while(next!==document.documentElement){if(next===null){if(event.isTargetWebComponent){break;}
return;}
if(next===instance.rootElement){return;}
next=next.parentNode;}}
if(that.settings.outsideClickDeselects){instance.deselectCell();}else{instance.destroyEditor();}});this.eventManager.addEventListener(table,'selectstart',function(event){if(that.settings.fragmentSelection){return;}
event.preventDefault();});var clearTextSelection=function(){if(window.getSelection){if(window.getSelection().empty){window.getSelection().empty();}else if(window.getSelection().removeAllRanges){window.getSelection().removeAllRanges();}}else if(document.selection){document.selection.empty();}};var selections=[new WalkontableSelection({className:'current',border:{width:2,color:'#5292F7',cornerVisible:function(){return that.settings.fillHandle&&!that.isCellEdited()&&!instance.selection.isMultiple();},multipleSelectionHandlesVisible:function(){return!that.isCellEdited()&&!instance.selection.isMultiple();}}}),new WalkontableSelection({className:'area',border:{width:1,color:'#89AFF9',cornerVisible:function(){return that.settings.fillHandle&&!that.isCellEdited()&&instance.selection.isMultiple();},multipleSelectionHandlesVisible:function(){return!that.isCellEdited()&&instance.selection.isMultiple();}}}),new WalkontableSelection({className:'highlight',highlightRowClassName:that.settings.currentRowClassName,highlightColumnClassName:that.settings.currentColClassName}),new WalkontableSelection({className:'fill',border:{width:1,color:'red'}})];selections.current=selections[0];selections.area=selections[1];selections.highlight=selections[2];selections.fill=selections[3];var walkontableConfig={debug:function(){return that.settings.debug;},externalRowCalculator:this.instance.getPlugin('autoRowSize')&&this.instance.getPlugin('autoRowSize').isEnabled(),table:table,stretchH:this.settings.stretchH,data:instance.getDataAtCell,totalRows:instance.countRows,totalColumns:instance.countCols,fixedColumnsLeft:function(){return that.settings.fixedColumnsLeft;},fixedRowsTop:function(){return that.settings.fixedRowsTop;},fixedRowsBottom:function(){return that.settings.fixedRowsBottom;},minSpareRows:function(){return that.settings.minSpareRows;},renderAllRows:that.settings.renderAllRows,rowHeaders:function(){var arr=[];if(instance.hasRowHeaders()){arr.push(function(index,TH){that.appendRowHeader(index,TH);});}
Handsontable.hooks.run(instance,'afterGetRowHeaderRenderers',arr);return arr;},columnHeaders:function(){var arr=[];if(instance.hasColHeaders()){arr.push(function(index,TH){that.appendColHeader(index,TH);});}
Handsontable.hooks.run(instance,'afterGetColumnHeaderRenderers',arr);return arr;},columnWidth:instance.getColWidth,rowHeight:instance.getRowHeight,cellRenderer:function(row,col,TD){var prop=that.instance.colToProp(col),cellProperties=that.instance.getCellMeta(row,col),renderer=that.instance.getCellRenderer(cellProperties);var value=that.instance.getDataAtRowProp(row,prop);renderer(that.instance,TD,row,col,prop,value,cellProperties);Handsontable.hooks.run(that.instance,'afterRenderer',TD,row,col,prop,value,cellProperties);},selections:selections,hideBorderOnMouseDownOver:function(){return that.settings.fragmentSelection;},onCellMouseDown:function(event,coords,TD,wt){var colspanOffset;var TR=TD.parentNode;var THEAD=TR.parentNode;var headerLevel;var headerColspan;instance.listen();that.activeWt=wt;isMouseDown=true;Handsontable.hooks.run(instance,'beforeOnCellMouseDown',event,coords,TD);instance.selection.setSelectedHeaders(false,false);if(!isImmediatePropagationStopped(event)){if(event.button===2&&instance.selection.inInSelection(coords)){var nothing=1;}else if(event.shiftKey){if(coords.row>=0&&coords.col>=0){instance.selection.setRangeEnd(coords);}}else{if((coords.row<0||coords.col<0)&&(coords.row>=0||coords.col>=0)){if(coords.row<0){headerLevel=THEAD.childNodes.length-Array.prototype.indexOf.call(THEAD.childNodes,TR)-1;headerColspan=instance.getHeaderColspan(coords.col,headerLevel);instance.selection.setSelectedHeaders(false,true);instance.selectCell(0,coords.col,instance.countRows()-1,coords.col+Math.max(0,headerColspan-1));}
if(coords.col<0){instance.selection.setSelectedHeaders(true,false);instance.selectCell(coords.row,0,coords.row,instance.countCols()-1);}}else{coords.row=coords.row<0?0:coords.row;coords.col=coords.col<0?0:coords.col;instance.selection.setRangeStart(coords);}}
Handsontable.hooks.run(instance,'afterOnCellMouseDown',event,coords,TD);that.activeWt=that.wt;}},onCellMouseOver:function(event,coords,TD,wt){that.activeWt=wt;if(coords.row>=0&&coords.col>=0){if(isMouseDown){instance.selection.setRangeEnd(coords);}}else{if(isMouseDown){if(coords.row<0){if(instance.selection.selectedHeader.cols){instance.selection.setRangeEnd(new WalkontableCellCoords(instance.countRows()-1,coords.col));instance.selection.setSelectedHeaders(false,true);}else{instance.selection.setRangeEnd(new WalkontableCellCoords(coords.row,coords.col));}}
if(coords.col<0){if(instance.selection.selectedHeader.rows){instance.selection.setRangeEnd(new WalkontableCellCoords(coords.row,instance.countCols()-1));instance.selection.setSelectedHeaders(true,false);}else{instance.selection.setRangeEnd(new WalkontableCellCoords(coords.row,coords.col));}}}}
Handsontable.hooks.run(instance,'afterOnCellMouseOver',event,coords,TD);that.activeWt=that.wt;},onCellCornerMouseDown:function(event){event.preventDefault();Handsontable.hooks.run(instance,'afterOnCellCornerMouseDown',event);},beforeDraw:function(force){that.beforeRender(force);},onDraw:function(force){that.onDraw(force);},onScrollVertically:function(){instance.runHooks('afterScrollVertically');},onScrollHorizontally:function(){instance.runHooks('afterScrollHorizontally');},onBeforeDrawBorders:function(corners,borderClassName){instance.runHooks('beforeDrawBorders',corners,borderClassName);},onBeforeTouchScroll:function(){instance.runHooks('beforeTouchScroll');},onAfterMomentumScroll:function(){instance.runHooks('afterMomentumScroll');},viewportRowCalculatorOverride:function(calc){var rows=instance.countRows();var viewportOffset=that.settings.viewportRowRenderingOffset;if(viewportOffset==='auto'&&that.settings.fixedRowsTop){viewportOffset=10;}
if(typeof viewportOffset==='number'){calc.startRow=Math.max(calc.startRow-viewportOffset,0);calc.endRow=Math.min(calc.endRow+viewportOffset,rows-1);}
if(viewportOffset==='auto'){var center=calc.startRow+calc.endRow-calc.startRow;var offset=Math.ceil(center/rows*12);calc.startRow=Math.max(calc.startRow-offset,0);calc.endRow=Math.min(calc.endRow+offset,rows-1);}
instance.runHooks('afterViewportRowCalculatorOverride',calc);},viewportColumnCalculatorOverride:function(calc){var cols=instance.countCols();var viewportOffset=that.settings.viewportColumnRenderingOffset;if(viewportOffset==='auto'&&that.settings.fixedColumnsLeft){viewportOffset=10;}
if(typeof viewportOffset==='number'){calc.startColumn=Math.max(calc.startColumn-viewportOffset,0);calc.endColumn=Math.min(calc.endColumn+viewportOffset,cols-1);}
if(viewportOffset==='auto'){var center=calc.startColumn+calc.endColumn-calc.startColumn;var offset=Math.ceil(center/cols*12);calc.startRow=Math.max(calc.startColumn-offset,0);calc.endColumn=Math.min(calc.endColumn+offset,cols-1);}
instance.runHooks('afterViewportColumnCalculatorOverride',calc);}};Handsontable.hooks.run(instance,'beforeInitWalkontable',walkontableConfig);this.wt=new Walkontable(walkontableConfig);this.activeWt=this.wt;this.eventManager.addEventListener(that.wt.wtTable.spreader,'mousedown',function(event){if(event.target===that.wt.wtTable.spreader&&event.which===3){stopPropagation(event);}});this.eventManager.addEventListener(that.wt.wtTable.spreader,'contextmenu',function(event){if(event.target===that.wt.wtTable.spreader&&event.which===3){stopPropagation(event);}});this.eventManager.addEventListener(document.documentElement,'click',function(){if(that.settings.observeDOMVisibility){if(that.wt.drawInterrupted){that.instance.forceFullRender=true;that.render();}}});}
TableView.prototype.isTextSelectionAllowed=function(el){if(isInput(el)){return true;}
if(this.settings.fragmentSelection&&isChildOf(el,this.TBODY)){return true;}
return false;};TableView.prototype.isCellEdited=function(){var activeEditor=this.instance.getActiveEditor();return activeEditor&&activeEditor.isOpened();};TableView.prototype.beforeRender=function(force){if(force){Handsontable.hooks.run(this.instance,'beforeRender',this.instance.forceFullRender);}};TableView.prototype.onDraw=function(force){if(force){Handsontable.hooks.run(this.instance,'afterRender',this.instance.forceFullRender);}};TableView.prototype.render=function(){this.wt.draw(!this.instance.forceFullRender);this.instance.forceFullRender=false;this.instance.renderCall=false;};TableView.prototype.getCellAtCoords=function(coords,topmost){var td=this.wt.getCell(coords,topmost);if(td<0){return null;}else{return td;}};TableView.prototype.scrollViewport=function(coords){this.wt.scrollViewport(coords);};TableView.prototype.appendRowHeader=function(row,TH){if(TH.firstChild){var container=TH.firstChild;if(!hasClass(container,'relative')){empty(TH);this.appendRowHeader(row,TH);return;}
this.updateCellHeader(container.querySelector('.rowHeader'),row,this.instance.getRowHeader);}else{var div=document.createElement('div');var span=document.createElement('span');div.className='relative';span.className='rowHeader';this.updateCellHeader(span,row,this.instance.getRowHeader);div.appendChild(span);TH.appendChild(div);}
Handsontable.hooks.run(this.instance,'afterGetRowHeader',row,TH);};TableView.prototype.appendColHeader=function(col,TH){if(TH.firstChild){var container=TH.firstChild;if(!hasClass(container,'relative')){empty(TH);this.appendRowHeader(col,TH);return;}
this.updateCellHeader(container.querySelector('.colHeader'),col,this.instance.getColHeader);}else{var div=document.createElement('div');var span=document.createElement('span');div.className='relative';span.className='colHeader';this.updateCellHeader(span,col,this.instance.getColHeader);div.appendChild(span);TH.appendChild(div);}
Handsontable.hooks.run(this.instance,'afterGetColHeader',col,TH);};TableView.prototype.updateCellHeader=function(element,index,content){if(index>-1){fastInnerHTML(element,content(index));}else{fastInnerText(element,String.fromCharCode(160));addClass(element,'cornerHeader');}};TableView.prototype.maximumVisibleElementWidth=function(leftOffset){var workspaceWidth=this.wt.wtViewport.getWorkspaceWidth();var maxWidth=workspaceWidth-leftOffset;return maxWidth>0?maxWidth:0;};TableView.prototype.maximumVisibleElementHeight=function(topOffset){var workspaceHeight=this.wt.wtViewport.getWorkspaceHeight();var maxHeight=workspaceHeight-topOffset;return maxHeight>0?maxHeight:0;};TableView.prototype.mainViewIsActive=function(){return this.wt===this.activeWt;};TableView.prototype.destroy=function(){this.wt.destroy();this.eventManager.destroy();};;},{"3rdparty/walkontable/src/cell/coords":5,"3rdparty/walkontable/src/core":7,"3rdparty/walkontable/src/selection":18,"eventManager":40,"helpers/dom/element":44,"helpers/dom/event":45}],96:[function(require,module,exports){"use strict";Object.defineProperties(exports,{GhostTable:{get:function(){return GhostTable;}},__esModule:{value:true}});var $___46__46__47_helpers_47_dom_47_element__,$___46__46__47_helpers_47_array__,$___46__46__47_helpers_47_object__,$___46__46__47_helpers_47_number__,$___46__46__47_helpers_47_mixed__;var $__0=($___46__46__47_helpers_47_dom_47_element__=require("helpers/dom/element"),$___46__46__47_helpers_47_dom_47_element__&&$___46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47_helpers_47_dom_47_element__||{default:$___46__46__47_helpers_47_dom_47_element__}),addClass=$__0.addClass,outerHeight=$__0.outerHeight,outerWidth=$__0.outerWidth;var arrayEach=($___46__46__47_helpers_47_array__=require("helpers/array"),$___46__46__47_helpers_47_array__&&$___46__46__47_helpers_47_array__.__esModule&&$___46__46__47_helpers_47_array__||{default:$___46__46__47_helpers_47_array__}).arrayEach;var objectEach=($___46__46__47_helpers_47_object__=require("helpers/object"),$___46__46__47_helpers_47_object__&&$___46__46__47_helpers_47_object__.__esModule&&$___46__46__47_helpers_47_object__||{default:$___46__46__47_helpers_47_object__}).objectEach;var rangeEach=($___46__46__47_helpers_47_number__=require("helpers/number"),$___46__46__47_helpers_47_number__&&$___46__46__47_helpers_47_number__.__esModule&&$___46__46__47_helpers_47_number__||{default:$___46__46__47_helpers_47_number__}).rangeEach;var stringify=($___46__46__47_helpers_47_mixed__=require("helpers/mixed"),$___46__46__47_helpers_47_mixed__&&$___46__46__47_helpers_47_mixed__.__esModule&&$___46__46__47_helpers_47_mixed__||{default:$___46__46__47_helpers_47_mixed__}).stringify;var GhostTable=function GhostTable(hotInstance){this.hot=hotInstance;this.container=null;this.injected=false;this.rows=[];this.columns=[];this.samples=null;};($traceurRuntime.createClass)(GhostTable,{addRow:function(row,samples){if(this.columns.length){throw new Error('Doesn\'t support multi-dimensional table');}
if(!this.rows.length){this.container=this.createContainer(this.hot.rootElement.className);}
var rowObject={row:row};this.rows.push(rowObject);this.samples=samples;this.table=this.createTable(this.hot.table.className);this.table.colGroup.appendChild(this.createColGroupsCol());this.table.tr.appendChild(this.createRow(row));this.container.container.appendChild(this.table.fragment);rowObject.table=this.table.table;},addColumn:function(column,samples){if(this.rows.length){throw new Error('Doesn\'t support multi-dimensional table');}
if(!this.columns.length){this.container=this.createContainer(this.hot.rootElement.className);}
var columnObject={col:column};this.columns.push(columnObject);this.samples=samples;this.table=this.createTable(this.hot.table.className);if(this.hot.getColHeader(column)!==null){this.hot.view.appendColHeader(column,this.table.th);}
this.table.tBody.appendChild(this.createCol(column));this.container.container.appendChild(this.table.fragment);columnObject.table=this.table.table;},getHeights:function(callback){if(!this.injected){this.injectTable();}
arrayEach(this.rows,(function(row){callback(row.row,outerHeight(row.table)-1);}));},getWidths:function(callback){if(!this.injected){this.injectTable();}
arrayEach(this.columns,(function(column){callback(column.col,outerWidth(column.table));}));},createColGroupsCol:function(){var $__5=this;var d=document;var fragment=d.createDocumentFragment();fragment.appendChild(this.createColElement(-1));this.samples.forEach((function(sample){arrayEach(sample.strings,(function(string){fragment.appendChild($__5.createColElement(string.col));}));}));return fragment;},createRow:function(row){var $__5=this;var d=document;var fragment=d.createDocumentFragment();var th=d.createElement('th');if(this.hot.getRowHeader(row)!==null){this.hot.view.appendRowHeader(row,th);}
fragment.appendChild(th);this.samples.forEach((function(sample){arrayEach(sample.strings,(function(string){var column=string.col;var cellProperties=$__5.hot.getCellMeta(row,column);cellProperties.col=column;cellProperties.row=row;var renderer=$__5.hot.getCellRenderer(cellProperties);var td=d.createElement('td');renderer($__5.hot,td,row,column,$__5.hot.colToProp(column),string.value,cellProperties);fragment.appendChild(td);}));}));return fragment;},createCol:function(column){var $__5=this;var d=document;var fragment=d.createDocumentFragment();this.samples.forEach((function(sample){arrayEach(sample.strings,(function(string){var row=string.row;var cellProperties=$__5.hot.getCellMeta(row,column);cellProperties.col=column;cellProperties.row=row;var renderer=$__5.hot.getCellRenderer(cellProperties);var td=d.createElement('td');var tr=d.createElement('tr');renderer($__5.hot,td,row,column,$__5.hot.colToProp(row),string.value,cellProperties);tr.appendChild(td);fragment.appendChild(tr);}));}));return fragment;},clean:function(){this.rows.length=0;this.columns.length=0;if(this.samples){this.samples.clear();}
this.samples=null;this.removeTable();},injectTable:function(){var parent=arguments[0]!==(void 0)?arguments[0]:null;if(!this.injected){(parent||this.hot.rootElement).appendChild(this.container.fragment);this.injected=true;}},removeTable:function(){if(this.injected&&this.container.container.parentNode){this.container.container.parentNode.removeChild(this.container.container);this.container=null;this.injected=false;}},createColElement:function(column){var d=document;var col=d.createElement('col');col.style.width=this.hot.view.wt.wtTable.getStretchedColumnWidth(column)+'px';return col;},createTable:function(){var className=arguments[0]!==(void 0)?arguments[0]:'';var d=document;var fragment=d.createDocumentFragment();var table=d.createElement('table');var tHead=d.createElement('thead');var tBody=d.createElement('tbody');var colGroup=d.createElement('colgroup');var tr=d.createElement('tr');var th=d.createElement('th');if(this.isVertical()){table.appendChild(colGroup);}
if(this.isHorizontal()){tr.appendChild(th);tHead.appendChild(tr);table.style.tableLayout='auto';table.style.width='auto';}
table.appendChild(tHead);if(this.isVertical()){tBody.appendChild(tr);}
table.appendChild(tBody);addClass(table,className);fragment.appendChild(table);return{fragment:fragment,table:table,tHead:tHead,tBody:tBody,colGroup:colGroup,tr:tr,th:th};},createContainer:function(){var className=arguments[0]!==(void 0)?arguments[0]:'';var d=document;var fragment=d.createDocumentFragment();var container=d.createElement('div');className='htGhostTable htAutoSize '+className.trim();addClass(container,className);fragment.appendChild(container);return{fragment:fragment,container:container};},isVertical:function(){return this.rows.length&&!this.columns.length?true:false;},isHorizontal:function(){return this.columns.length&&!this.rows.length?true:false;}},{});;Handsontable.utils=Handsontable.utils||{};Handsontable.utils.GhostTable=GhostTable;},{"helpers/array":41,"helpers/dom/element":44,"helpers/mixed":47,"helpers/number":48,"helpers/object":49}],97:[function(require,module,exports){"use strict";var $__7;Object.defineProperties(exports,{SamplesGenerator:{get:function(){return SamplesGenerator;}},__esModule:{value:true}});var $___46__46__47_helpers_47_dom_47_element__,$___46__46__47_helpers_47_array__,$___46__46__47_helpers_47_object__,$___46__46__47_helpers_47_number__,$___46__46__47_helpers_47_mixed__;var $__0=($___46__46__47_helpers_47_dom_47_element__=require("helpers/dom/element"),$___46__46__47_helpers_47_dom_47_element__&&$___46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47_helpers_47_dom_47_element__||{default:$___46__46__47_helpers_47_dom_47_element__}),addClass=$__0.addClass,outerHeight=$__0.outerHeight,outerWidth=$__0.outerWidth;var arrayEach=($___46__46__47_helpers_47_array__=require("helpers/array"),$___46__46__47_helpers_47_array__&&$___46__46__47_helpers_47_array__.__esModule&&$___46__46__47_helpers_47_array__||{default:$___46__46__47_helpers_47_array__}).arrayEach;var objectEach=($___46__46__47_helpers_47_object__=require("helpers/object"),$___46__46__47_helpers_47_object__&&$___46__46__47_helpers_47_object__.__esModule&&$___46__46__47_helpers_47_object__||{default:$___46__46__47_helpers_47_object__}).objectEach;var rangeEach=($___46__46__47_helpers_47_number__=require("helpers/number"),$___46__46__47_helpers_47_number__&&$___46__46__47_helpers_47_number__.__esModule&&$___46__46__47_helpers_47_number__||{default:$___46__46__47_helpers_47_number__}).rangeEach;var stringify=($___46__46__47_helpers_47_mixed__=require("helpers/mixed"),$___46__46__47_helpers_47_mixed__&&$___46__46__47_helpers_47_mixed__.__esModule&&$___46__46__47_helpers_47_mixed__||{default:$___46__46__47_helpers_47_mixed__}).stringify;var SamplesGenerator=function SamplesGenerator(dataFactory){this.samples=null;this.dataFactory=dataFactory;};var $SamplesGenerator=SamplesGenerator;($traceurRuntime.createClass)(SamplesGenerator,($__7={},Object.defineProperty($__7,"generateRowSamples",{value:function(rowRange,colRange){return this.generateSamples('row',colRange,rowRange);},configurable:true,enumerable:true,writable:true}),Object.defineProperty($__7,"generateColumnSamples",{value:function(colRange,rowRange){return this.generateSamples('col',rowRange,colRange);},configurable:true,enumerable:true,writable:true}),Object.defineProperty($__7,"generateSamples",{value:function(type,range,specifierRange){var $__5=this;var samples=new Map();if(typeof specifierRange==='number'){specifierRange={from:specifierRange,to:specifierRange};}
rangeEach(specifierRange.from,specifierRange.to,(function(index){var sample=$__5.generateSample(type,range,index);samples.set(index,sample);}));return samples;},configurable:true,enumerable:true,writable:true}),Object.defineProperty($__7,"generateSample",{value:function(type,range,specifierValue){var $__5=this;var samples=new Map();rangeEach(range.from,range.to,(function(index){var $__7;var value;if(type==='row'){value=$__5.dataFactory(specifierValue,index);}else if(type==='col'){value=$__5.dataFactory(index,specifierValue);}else{throw new Error('Unsupported sample type');}
if(!Array.isArray(value)){value=stringify(value);}
var len=value.length;if(!samples.has(len)){samples.set(len,{needed:$SamplesGenerator.SAMPLE_COUNT,strings:[]});}
var sample=samples.get(len);if(sample.needed){var computedKey=type==='row'?'col':'row';sample.strings.push(($__7={},Object.defineProperty($__7,"value",{value:value,configurable:true,enumerable:true,writable:true}),Object.defineProperty($__7,computedKey,{value:index,configurable:true,enumerable:true,writable:true}),$__7));sample.needed--;}}));return samples;},configurable:true,enumerable:true,writable:true}),$__7),{get SAMPLE_COUNT(){return 3;}});;Handsontable.utils=Handsontable.utils||{};Handsontable.utils.SamplesGenerator=SamplesGenerator;},{"helpers/array":41,"helpers/dom/element":44,"helpers/mixed":47,"helpers/number":48,"helpers/object":49}],98:[function(require,module,exports){"use strict";var $___46__46__47_helpers_47_mixed__;var stringify=($___46__46__47_helpers_47_mixed__=require("helpers/mixed"),$___46__46__47_helpers_47_mixed__&&$___46__46__47_helpers_47_mixed__.__esModule&&$___46__46__47_helpers_47_mixed__||{default:$___46__46__47_helpers_47_mixed__}).stringify;Handsontable.AutocompleteValidator=function(value,callback){if(this.strict&&this.source){if(typeof this.source==='function'){this.source(value,process(value,callback));}else{process(value,callback)(this.source);}}else{callback(true);}};function process(value,callback){var originalVal=value;var lowercaseVal=typeof originalVal==='string'?originalVal.toLowerCase():null;return function(source){var found=false;for(var s=0,slen=source.length;s<slen;s++){if(originalVal===source[s]){found=true;break;}else if(lowercaseVal===stringify(source[s]).toLowerCase()){found=true;break;}}
callback(found);};}},{"helpers/mixed":47}],99:[function(require,module,exports){"use strict";var $__moment__,$___46__46__47_editors__;var moment=($__moment__=require("moment"),$__moment__&&$__moment__.__esModule&&$__moment__||{default:$__moment__}).default;var getEditor=($___46__46__47_editors__=require("editors"),$___46__46__47_editors__&&$___46__46__47_editors__.__esModule&&$___46__46__47_editors__||{default:$___46__46__47_editors__}).getEditor;Handsontable.DateValidator=function(value,callback){var valid=true;var dateEditor=getEditor('date',this.instance);if(value===null){value='';}
var isValidDate=moment(new Date(value)).isValid();var isValidFormat=moment(value,this.dateFormat||dateEditor.defaultDateFormat,true).isValid();if(!isValidDate){valid=false;}
if(!isValidDate&&isValidFormat){valid=true;}
if(isValidDate&&!isValidFormat){if(this.correctFormat===true){var correctedValue=correctFormat(value,this.dateFormat);this.instance.setDataAtCell(this.row,this.col,correctedValue,'dateValidator');valid=true;}else{valid=false;}}
callback(valid);};var correctFormat=function correctFormat(value,dateFormat){var date=moment(new Date(value));var year=date.format('YYYY');var yearNow=moment().format('YYYY');if(year.substr(0,2)!==yearNow.substr(0,2)){if(!value.match(new RegExp(year))){date.year(year.replace(year.substr(0,2),yearNow.substr(0,2)));}}else if(year.length>4){date.year((date.year()+'').substr(0,4));}
return date.format(dateFormat);};},{"editors":28,"moment":undefined}],100:[function(require,module,exports){"use strict";Handsontable.NumericValidator=function(value,callback){if(value===null){value='';}
callback(/^-?\d*(\.|\,)?\d*$/.test(value));};},{}],"SheetClip":[function(require,module,exports){"use strict";(function(global){"use strict";function countQuotes(str){return str.split('"').length-1;}
var SheetClip={parse:function(str){var r,rLen,rows,arr=[],a=0,c,cLen,multiline,last;rows=str.split('\n');if(rows.length>1&&rows[rows.length-1]===''){rows.pop();}
for(r=0,rLen=rows.length;r<rLen;r+=1){rows[r]=rows[r].split('\t');for(c=0,cLen=rows[r].length;c<cLen;c+=1){if(!arr[a]){arr[a]=[];}
if(multiline&&c===0){last=arr[a].length-1;arr[a][last]=arr[a][last]+'\n'+rows[r][0];if(multiline&&(countQuotes(rows[r][0])&1)){multiline=false;arr[a][last]=arr[a][last].substring(0,arr[a][last].length-1).replace(/""/g,'"');}}else{if(c===cLen-1&&rows[r][c].indexOf('"')===0&&(countQuotes(rows[r][c])&1)){arr[a].push(rows[r][c].substring(1).replace(/""/g,'"'));multiline=true;}else{arr[a].push(rows[r][c].replace(/""/g,'"'));multiline=false;}}}
if(!multiline){a+=1;}}
return arr;},stringify:function(arr){var r,rLen,c,cLen,str='',val;for(r=0,rLen=arr.length;r<rLen;r+=1){cLen=arr[r].length;for(c=0;c<cLen;c+=1){if(c>0){str+='\t';}
val=arr[r][c];if(typeof val==='string'){if(val.indexOf('\n')>-1){str+='"'+val.replace(/"/g,'""')+'"';}else{str+=val;}}else if(val===null||val===void 0){str+='';}else{str+=val;}}
str+='\n';}
return str;}};if(typeof exports!=='undefined'){exports.parse=SheetClip.parse;exports.stringify=SheetClip.stringify;}else{global.SheetClip=SheetClip;}}(window));},{}],"autoResize":[function(require,module,exports){"use strict";function autoResize(){var defaults={minHeight:200,maxHeight:300,minWidth:100,maxWidth:300},el,body=document.body,text=document.createTextNode(''),span=document.createElement('SPAN'),observe=function(element,event,handler){if(window.attachEvent){element.attachEvent('on'+event,handler);}else{element.addEventListener(event,handler,false);}},unObserve=function(element,event,handler){if(window.removeEventListener){element.removeEventListener(event,handler,false);}else{element.detachEvent('on'+event,handler);}},resize=function(newChar){var width,scrollHeight;if(!newChar){newChar="";}else if(!/^[a-zA-Z \.,\\\/\|0-9]$/.test(newChar)){newChar=".";}
if(text.textContent!==void 0){text.textContent=el.value+newChar;}else{text.data=el.value+newChar;}
span.style.fontSize=Handsontable.Dom.getComputedStyle(el).fontSize;span.style.fontFamily=Handsontable.Dom.getComputedStyle(el).fontFamily;span.style.whiteSpace="pre";body.appendChild(span);width=span.clientWidth+2;body.removeChild(span);el.style.height=defaults.minHeight+'px';if(defaults.minWidth>width){el.style.width=defaults.minWidth+'px';}else if(width>defaults.maxWidth){el.style.width=defaults.maxWidth+'px';}else{el.style.width=width+'px';}
scrollHeight=el.scrollHeight?el.scrollHeight-1:0;if(defaults.minHeight>scrollHeight){el.style.height=defaults.minHeight+'px';}else if(defaults.maxHeight<scrollHeight){el.style.height=defaults.maxHeight+'px';el.style.overflowY='visible';}else{el.style.height=scrollHeight+'px';}},delayedResize=function(){window.setTimeout(resize,0);},extendDefaults=function(config){if(config&&config.minHeight){if(config.minHeight=='inherit'){defaults.minHeight=el.clientHeight;}else{var minHeight=parseInt(config.minHeight);if(!isNaN(minHeight)){defaults.minHeight=minHeight;}}}
if(config&&config.maxHeight){if(config.maxHeight=='inherit'){defaults.maxHeight=el.clientHeight;}else{var maxHeight=parseInt(config.maxHeight);if(!isNaN(maxHeight)){defaults.maxHeight=maxHeight;}}}
if(config&&config.minWidth){if(config.minWidth=='inherit'){defaults.minWidth=el.clientWidth;}else{var minWidth=parseInt(config.minWidth);if(!isNaN(minWidth)){defaults.minWidth=minWidth;}}}
if(config&&config.maxWidth){if(config.maxWidth=='inherit'){defaults.maxWidth=el.clientWidth;}else{var maxWidth=parseInt(config.maxWidth);if(!isNaN(maxWidth)){defaults.maxWidth=maxWidth;}}}
if(!span.firstChild){span.className="autoResize";span.style.display='inline-block';span.appendChild(text);}},init=function(el_,config,doObserve){el=el_;extendDefaults(config);if(el.nodeName=='TEXTAREA'){el.style.resize='none';el.style.overflowY='';el.style.height=defaults.minHeight+'px';el.style.minWidth=defaults.minWidth+'px';el.style.maxWidth=defaults.maxWidth+'px';el.style.overflowY='hidden';}
if(doObserve){observe(el,'change',resize);observe(el,'cut',delayedResize);observe(el,'paste',delayedResize);observe(el,'drop',delayedResize);observe(el,'keydown',delayedResize);}
resize();};return{init:function(el_,config,doObserve){init(el_,config,doObserve);},unObserve:function(){unObserve(el,'change',resize);unObserve(el,'cut',delayedResize);unObserve(el,'paste',delayedResize);unObserve(el,'drop',delayedResize);unObserve(el,'keydown',delayedResize);},resize:resize};}
if(typeof exports!=='undefined'){module.exports=autoResize;}},{}],"copyPaste":[function(require,module,exports){"use strict";var instance;function copyPaste(){if(!instance){instance=new CopyPasteClass();}else if(instance.hasBeenDestroyed()){instance.init();}
instance.refCounter++;return instance;}
if(typeof exports!=='undefined'){module.exports=copyPaste;}
function CopyPasteClass(){this.refCounter=0;this.init();}
CopyPasteClass.prototype.init=function(){var style,parent;this.copyCallbacks=[];this.cutCallbacks=[];this.pasteCallbacks=[];parent=document.body;if(document.getElementById('CopyPasteDiv')){this.elDiv=document.getElementById('CopyPasteDiv');this.elTextarea=this.elDiv.firstChild;}else{this.elDiv=document.createElement('div');this.elDiv.id='CopyPasteDiv';style=this.elDiv.style;style.position='fixed';style.top='-10000px';style.left='-10000px';parent.appendChild(this.elDiv);this.elTextarea=document.createElement('textarea');this.elTextarea.className='copyPaste';this.elTextarea.onpaste=function(event){var clipboardContents,temp;if('WebkitAppearance'in document.documentElement.style){clipboardContents=event.clipboardData.getData("Text");if(navigator.userAgent.indexOf('Safari')!==-1&&navigator.userAgent.indexOf('Chrome')===-1){temp=clipboardContents.split('\n');if(temp[temp.length-1]===''){temp.pop();}
clipboardContents=temp.join('\n');}
this.value=clipboardContents;return false;}};style=this.elTextarea.style;style.width='10000px';style.height='10000px';style.overflow='hidden';this.elDiv.appendChild(this.elTextarea);if(typeof style.opacity!=='undefined'){style.opacity=0;}}
this.onKeyDownRef=this.onKeyDown.bind(this);document.documentElement.addEventListener('keydown',this.onKeyDownRef,false);};CopyPasteClass.prototype.onKeyDown=function(event){var _this=this,isCtrlDown=false;function isActiveElementEditable(){var element=document.activeElement;if(element.shadowRoot&&element.shadowRoot.activeElement){element=element.shadowRoot.activeElement;}
return['INPUT','SELECT','TEXTAREA'].indexOf(element.nodeName)>-1||element.contentEditable==='true';}
if(event.metaKey){isCtrlDown=true;}else if(event.ctrlKey&&navigator.userAgent.indexOf('Mac')===-1){isCtrlDown=true;}
if(isCtrlDown){if(document.activeElement!==this.elTextarea&&(this.getSelectionText()!==''||isActiveElementEditable())){return;}
this.selectNodeText(this.elTextarea);setTimeout(function(){if(document.activeElement!==_this.elTextarea){_this.selectNodeText(_this.elTextarea);}},0);}
if(isCtrlDown&&(event.keyCode===67||event.keyCode===86||event.keyCode===88)){if(event.keyCode===88){setTimeout(function(){_this.triggerCut(event);},0);}else if(event.keyCode===86){setTimeout(function(){_this.triggerPaste(event);},0);}}};CopyPasteClass.prototype.selectNodeText=function(element){if(element){element.select();}};CopyPasteClass.prototype.getSelectionText=function(){var text='';if(window.getSelection){text=window.getSelection().toString();}else if(document.selection&&document.selection.type!=='Control'){text=document.selection.createRange().text;}
return text;};CopyPasteClass.prototype.copyable=function(string){if(typeof string!=='string'&&string.toString===void 0){throw new Error('copyable requires string parameter');}
this.elTextarea.value=string;this.selectNodeText(this.elTextarea);};CopyPasteClass.prototype.onCut=function(callback){this.cutCallbacks.push(callback);};CopyPasteClass.prototype.onPaste=function(callback){this.pasteCallbacks.push(callback);};CopyPasteClass.prototype.removeCallback=function(callback){var i,len;for(i=0,len=this.copyCallbacks.length;i<len;i++){if(this.copyCallbacks[i]===callback){this.copyCallbacks.splice(i,1);return true;}}
for(i=0,len=this.cutCallbacks.length;i<len;i++){if(this.cutCallbacks[i]===callback){this.cutCallbacks.splice(i,1);return true;}}
for(i=0,len=this.pasteCallbacks.length;i<len;i++){if(this.pasteCallbacks[i]===callback){this.pasteCallbacks.splice(i,1);return true;}}
return false;};CopyPasteClass.prototype.triggerCut=function(event){var _this=this;if(_this.cutCallbacks){setTimeout(function(){for(var i=0,len=_this.cutCallbacks.length;i<len;i++){_this.cutCallbacks[i](event);}},50);}};CopyPasteClass.prototype.triggerPaste=function(event,string){var _this=this;if(_this.pasteCallbacks){setTimeout(function(){var val=string||_this.elTextarea.value;for(var i=0,len=_this.pasteCallbacks.length;i<len;i++){_this.pasteCallbacks[i](val,event);}},50);}};CopyPasteClass.prototype.destroy=function(){if(!this.hasBeenDestroyed()&&--this.refCounter===0){if(this.elDiv&&this.elDiv.parentNode){this.elDiv.parentNode.removeChild(this.elDiv);this.elDiv=null;this.elTextarea=null;}
document.documentElement.removeEventListener('keydown',this.onKeyDownRef);this.onKeyDownRef=null;}};CopyPasteClass.prototype.hasBeenDestroyed=function(){return!this.refCounter;};},{}],"es6collections":[function(require,module,exports){"use strict";(function(exports){'use strict';var i;var defineProperty=Object.defineProperty,is=function(a,b){return isNaN(a)?isNaN(b):a===b;};if(typeof WeakMap=='undefined'){exports.WeakMap=createCollection({'delete':sharedDelete,clear:sharedClear,get:sharedGet,has:mapHas,set:sharedSet},true);}
if(typeof Map=='undefined'){exports.Map=createCollection({'delete':sharedDelete,has:mapHas,get:sharedGet,set:sharedSet,keys:sharedKeys,values:sharedValues,entries:mapEntries,forEach:sharedForEach,clear:sharedClear});}
if(typeof Set=='undefined'){exports.Set=createCollection({has:setHas,add:sharedAdd,'delete':sharedDelete,clear:sharedClear,keys:sharedValues,values:sharedValues,entries:setEntries,forEach:sharedForEach});}
if(typeof WeakSet=='undefined'){exports.WeakSet=createCollection({'delete':sharedDelete,add:sharedAdd,clear:sharedClear,has:setHas},true);}
function createCollection(proto,objectOnly){function Collection(a){if(!this||this.constructor!==Collection)
return new Collection(a);this._keys=[];this._values=[];this._itp=[];this.objectOnly=objectOnly;if(a)
init.call(this,a);}
if(!objectOnly){defineProperty(proto,'size',{get:sharedSize});}
proto.constructor=Collection;Collection.prototype=proto;return Collection;}
function init(a){var i;if(this.add)
a.forEach(this.add,this);else
a.forEach(function(a){this.set(a[0],a[1]);},this);}
function sharedDelete(key){if(this.has(key)){this._keys.splice(i,1);this._values.splice(i,1);this._itp.forEach(function(p){if(i<p[0])
p[0]--;});}
return-1<i;};function sharedGet(key){return this.has(key)?this._values[i]:undefined;}
function has(list,key){if(this.objectOnly&&key!==Object(key))
throw new TypeError("Invalid value used as weak collection key");if(key!=key||key===0)
for(i=list.length;i--&&!is(list[i],key);){}
else
i=list.indexOf(key);return-1<i;}
function setHas(value){return has.call(this,this._values,value);}
function mapHas(value){return has.call(this,this._keys,value);}
function sharedSet(key,value){this.has(key)?this._values[i]=value:this._values[this._keys.push(key)-1]=value;return this;}
function sharedAdd(value){if(!this.has(value))
this._values.push(value);return this;}
function sharedClear(){this._values.length=0;}
function sharedKeys(){return sharedIterator(this._itp,this._keys);}
function sharedValues(){return sharedIterator(this._itp,this._values);}
function mapEntries(){return sharedIterator(this._itp,this._keys,this._values);}
function setEntries(){return sharedIterator(this._itp,this._values,this._values);}
function sharedIterator(itp,array,array2){var p=[0],done=false;itp.push(p);return{next:function(){var v,k=p[0];if(!done&&k<array.length){v=array2?[array[k],array2[k]]:array[k];p[0]++;}else{done=true;itp.splice(itp.indexOf(p),1);}
return{done:done,value:v};}};}
function sharedSize(){return this._values.length;}
function sharedForEach(callback,context){var it=this.entries();for(;;){var r=it.next();if(r.done)
break;callback.call(context,r.value[1],r.value[0],this);}}})(typeof exports!='undefined'&&typeof global!='undefined'?global:window);},{}],"jsonpatch":[function(require,module,exports){"use strict";var jsonpatch;(function(jsonpatch){var objOps={add:function(obj,key){obj[key]=this.value;return true;},remove:function(obj,key){delete obj[key];return true;},replace:function(obj,key){obj[key]=this.value;return true;},move:function(obj,key,tree){var temp={op:"_get",path:this.from};apply(tree,[temp]);apply(tree,[{op:"remove",path:this.from}]);apply(tree,[{op:"add",path:this.path,value:temp.value}]);return true;},copy:function(obj,key,tree){var temp={op:"_get",path:this.from};apply(tree,[temp]);apply(tree,[{op:"add",path:this.path,value:temp.value}]);return true;},test:function(obj,key){return(JSON.stringify(obj[key])===JSON.stringify(this.value));},_get:function(obj,key){this.value=obj[key];}};var arrOps={add:function(arr,i){arr.splice(i,0,this.value);return true;},remove:function(arr,i){arr.splice(i,1);return true;},replace:function(arr,i){arr[i]=this.value;return true;},move:objOps.move,copy:objOps.copy,test:objOps.test,_get:objOps._get};var observeOps={add:function(patches,path){var patch={op:"add",path:path+escapePathComponent(this.name),value:this.object[this.name]};patches.push(patch);},'delete':function(patches,path){var patch={op:"remove",path:path+escapePathComponent(this.name)};patches.push(patch);},update:function(patches,path){var patch={op:"replace",path:path+escapePathComponent(this.name),value:this.object[this.name]};patches.push(patch);}};function escapePathComponent(str){if(str.indexOf('/')===-1&&str.indexOf('~')===-1){return str;}
return str.replace(/~/g,'~0').replace(/\//g,'~1');}
function _getPathRecursive(root,obj){var found;for(var key in root){if(root.hasOwnProperty(key)){if(root[key]===obj){return escapePathComponent(key)+'/';}else if(typeof root[key]==='object'){found=_getPathRecursive(root[key],obj);if(found!=''){return escapePathComponent(key)+'/'+found;}}}}
return'';}
function getPath(root,obj){if(root===obj){return'/';}
var path=_getPathRecursive(root,obj);if(path===''){throw new Error("Object not found in root");}
return'/'+path;}
var beforeDict=[];jsonpatch.intervals;var Mirror=(function(){function Mirror(obj){this.observers=[];this.obj=obj;}
return Mirror;})();var ObserverInfo=(function(){function ObserverInfo(callback,observer){this.callback=callback;this.observer=observer;}
return ObserverInfo;})();function getMirror(obj){for(var i=0,ilen=beforeDict.length;i<ilen;i++){if(beforeDict[i].obj===obj){return beforeDict[i];}}}
function removeMirror(obj){for(var i=0,ilen=beforeDict.length;i<ilen;i++){if(beforeDict[i]===obj){beforeDict.splice(i,1);}}}
function getObserverFromMirror(mirror,callback){for(var j=0,jlen=mirror.observers.length;j<jlen;j++){if(mirror.observers[j].callback===callback){return mirror.observers[j].observer;}}}
function removeObserverFromMirror(mirror,observer){for(var j=0,jlen=mirror.observers.length;j<jlen;j++){if(mirror.observers[j].observer===observer){mirror.observers.splice(j,1);if(!mirror.observers.length){removeMirror(mirror);}
return;}}}
function unobserve(root,observer){generate(observer);if(Object.observe){_unobserve(observer,root);}else{clearTimeout(observer.next);}
var mirror=getMirror(root);removeObserverFromMirror(mirror,observer);}
jsonpatch.unobserve=unobserve;function observe(obj,callback){var patches=[];var root=obj;var observer;var mirror=getMirror(obj);if(!mirror){mirror=new Mirror(obj);beforeDict.push(mirror);}else{observer=getObserverFromMirror(mirror,callback);}
if(observer){return observer;}
if(Object.observe){observer=function(arr){_unobserve(observer,obj);_observe(observer,obj);var a=0,alen=arr.length;while(a<alen){if(!(arr[a].name==='length'&&_isArray(arr[a].object))&&!(arr[a].name==='__Jasmine_been_here_before__')){var type=arr[a].type;switch(type){case'new':type='add';break;case'deleted':type='delete';break;case'updated':type='update';break;}
observeOps[type].call(arr[a],patches,getPath(root,arr[a].object));}
a++;}
if(patches){if(callback){callback(patches);}}
observer.patches=patches;patches=[];};}else{observer={};mirror.value=JSON.parse(JSON.stringify(obj));if(callback){observer.callback=callback;observer.next=null;var intervals=this.intervals||[100,1000,10000,60000];var currentInterval=0;var dirtyCheck=function(){generate(observer);};var fastCheck=function(){clearTimeout(observer.next);observer.next=setTimeout(function(){dirtyCheck();currentInterval=0;observer.next=setTimeout(slowCheck,intervals[currentInterval++]);},0);};var slowCheck=function(){dirtyCheck();if(currentInterval==intervals.length){currentInterval=intervals.length-1;}
observer.next=setTimeout(slowCheck,intervals[currentInterval++]);};if(typeof window!=='undefined'){if(window.addEventListener){window.addEventListener('mousedown',fastCheck);window.addEventListener('mouseup',fastCheck);window.addEventListener('keydown',fastCheck);}else{window.attachEvent('onmousedown',fastCheck);window.attachEvent('onmouseup',fastCheck);window.attachEvent('onkeydown',fastCheck);}}
observer.next=setTimeout(slowCheck,intervals[currentInterval++]);}}
observer.patches=patches;observer.object=obj;mirror.observers.push(new ObserverInfo(callback,observer));return _observe(observer,obj);}
jsonpatch.observe=observe;function _observe(observer,obj){if(Object.observe){Object.observe(obj,observer);for(var key in obj){if(obj.hasOwnProperty(key)){var v=obj[key];if(v&&typeof(v)==="object"){_observe(observer,v);}}}}
return observer;}
function _unobserve(observer,obj){if(Object.observe){Object.unobserve(obj,observer);for(var key in obj){if(obj.hasOwnProperty(key)){var v=obj[key];if(v&&typeof(v)==="object"){_unobserve(observer,v);}}}}
return observer;}
function generate(observer){if(Object.observe){Object.deliverChangeRecords(observer);}else{var mirror;for(var i=0,ilen=beforeDict.length;i<ilen;i++){if(beforeDict[i].obj===observer.object){mirror=beforeDict[i];break;}}
if(mirror){_generate(mirror.value,observer.object,observer.patches,"");}}
var temp=observer.patches;if(temp.length>0){observer.patches=[];if(observer.callback){observer.callback(temp);}}
return temp;}
jsonpatch.generate=generate;var _objectKeys;if(Object.keys){_objectKeys=Object.keys;}else{_objectKeys=function(obj){var keys=[];for(var o in obj){if(obj.hasOwnProperty(o)){keys.push(o);}}
return keys;};}
function _generate(mirror,obj,patches,path){var newKeys=_objectKeys(obj);var oldKeys=_objectKeys(mirror);var changed=false;var deleted=false;for(var t=oldKeys.length-1;t>=0;t--){var key=oldKeys[t];var oldVal=mirror[key];if(obj.hasOwnProperty(key)){var newVal=obj[key];if(oldVal instanceof Object){_generate(oldVal,newVal,patches,path+"/"+escapePathComponent(key));}else{if(oldVal!=newVal){changed=true;patches.push({op:"replace",path:path+"/"+escapePathComponent(key),value:newVal});mirror[key]=newVal;}}}else{patches.push({op:"remove",path:path+"/"+escapePathComponent(key)});delete mirror[key];deleted=true;}}
if(!deleted&&newKeys.length==oldKeys.length){return;}
for(var t=0;t<newKeys.length;t++){var key=newKeys[t];if(!mirror.hasOwnProperty(key)){patches.push({op:"add",path:path+"/"+escapePathComponent(key),value:obj[key]});mirror[key]=JSON.parse(JSON.stringify(obj[key]));}}}
var _isArray;if(Array.isArray){_isArray=Array.isArray;}else{_isArray=function(obj){return obj.push&&typeof obj.length==='number';};}
function apply(tree,patches){var result=false,p=0,plen=patches.length,patch;while(p<plen){patch=patches[p];var keys=patch.path.split('/');var obj=tree;var t=1;var len=keys.length;while(true){if(_isArray(obj)){var index=parseInt(keys[t],10);t++;if(t>=len){result=arrOps[patch.op].call(patch,obj,index,tree);break;}
obj=obj[index];}else{var key=keys[t];if(key.indexOf('~')!=-1){key=key.replace(/~1/g,'/').replace(/~0/g,'~');}
t++;if(t>=len){result=objOps[patch.op].call(patch,obj,key,tree);break;}
obj=obj[key];}}
p++;}
return result;}
jsonpatch.apply=apply;})(jsonpatch||(jsonpatch={}));if(typeof exports!=="undefined"){exports.apply=jsonpatch.apply;exports.observe=jsonpatch.observe;exports.unobserve=jsonpatch.unobserve;exports.generate=jsonpatch.generate;}},{}],"numeral":[function(require,module,exports){"use strict";(function(){var numeral,VERSION='1.5.3',languages={},currentLanguage='en',zeroFormat=null,defaultFormat='0,0',hasModule=(typeof module!=='undefined'&&module.exports);function Numeral(number){this._value=number;}
function toFixed(value,precision,roundingFunction,optionals){var power=Math.pow(10,precision),optionalsRegExp,output;output=(roundingFunction(value*power)/power).toFixed(precision);if(optionals){optionalsRegExp=new RegExp('0{1,'+optionals+'}$');output=output.replace(optionalsRegExp,'');}
return output;}
function formatNumeral(n,format,roundingFunction){var output;if(format.indexOf('$')>-1){output=formatCurrency(n,format,roundingFunction);}else if(format.indexOf('%')>-1){output=formatPercentage(n,format,roundingFunction);}else if(format.indexOf(':')>-1){output=formatTime(n,format);}else{output=formatNumber(n._value,format,roundingFunction);}
return output;}
function unformatNumeral(n,string){var stringOriginal=string,thousandRegExp,millionRegExp,billionRegExp,trillionRegExp,suffixes=['KB','MB','GB','TB','PB','EB','ZB','YB'],bytesMultiplier=false,power;if(string.indexOf(':')>-1){n._value=unformatTime(string);}else{if(string===zeroFormat){n._value=0;}else{if(languages[currentLanguage].delimiters.decimal!=='.'){string=string.replace(/\./g,'').replace(languages[currentLanguage].delimiters.decimal,'.');}
thousandRegExp=new RegExp('[^a-zA-Z]'+languages[currentLanguage].abbreviations.thousand+'(?:\\)|(\\'+languages[currentLanguage].currency.symbol+')?(?:\\))?)?$');millionRegExp=new RegExp('[^a-zA-Z]'+languages[currentLanguage].abbreviations.million+'(?:\\)|(\\'+languages[currentLanguage].currency.symbol+')?(?:\\))?)?$');billionRegExp=new RegExp('[^a-zA-Z]'+languages[currentLanguage].abbreviations.billion+'(?:\\)|(\\'+languages[currentLanguage].currency.symbol+')?(?:\\))?)?$');trillionRegExp=new RegExp('[^a-zA-Z]'+languages[currentLanguage].abbreviations.trillion+'(?:\\)|(\\'+languages[currentLanguage].currency.symbol+')?(?:\\))?)?$');for(power=0;power<=suffixes.length;power++){bytesMultiplier=(string.indexOf(suffixes[power])>-1)?Math.pow(1024,power+1):false;if(bytesMultiplier){break;}}
n._value=((bytesMultiplier)?bytesMultiplier:1)*((stringOriginal.match(thousandRegExp))?Math.pow(10,3):1)*((stringOriginal.match(millionRegExp))?Math.pow(10,6):1)*((stringOriginal.match(billionRegExp))?Math.pow(10,9):1)*((stringOriginal.match(trillionRegExp))?Math.pow(10,12):1)*((string.indexOf('%')>-1)?0.01:1)*(((string.split('-').length+Math.min(string.split('(').length-1,string.split(')').length-1))%2)?1:-1)*Number(string.replace(/[^0-9\.]+/g,''));n._value=(bytesMultiplier)?Math.ceil(n._value):n._value;}}
return n._value;}
function formatCurrency(n,format,roundingFunction){var symbolIndex=format.indexOf('$'),openParenIndex=format.indexOf('('),minusSignIndex=format.indexOf('-'),space='',spliceIndex,output;if(format.indexOf(' $')>-1){space=' ';format=format.replace(' $','');}else if(format.indexOf('$ ')>-1){space=' ';format=format.replace('$ ','');}else{format=format.replace('$','');}
output=formatNumber(n._value,format,roundingFunction);if(symbolIndex<=1){if(output.indexOf('(')>-1||output.indexOf('-')>-1){output=output.split('');spliceIndex=1;if(symbolIndex<openParenIndex||symbolIndex<minusSignIndex){spliceIndex=0;}
output.splice(spliceIndex,0,languages[currentLanguage].currency.symbol+space);output=output.join('');}else{output=languages[currentLanguage].currency.symbol+space+output;}}else{if(output.indexOf(')')>-1){output=output.split('');output.splice(-1,0,space+languages[currentLanguage].currency.symbol);output=output.join('');}else{output=output+space+languages[currentLanguage].currency.symbol;}}
return output;}
function formatPercentage(n,format,roundingFunction){var space='',output,value=n._value*100;if(format.indexOf(' %')>-1){space=' ';format=format.replace(' %','');}else{format=format.replace('%','');}
output=formatNumber(value,format,roundingFunction);if(output.indexOf(')')>-1){output=output.split('');output.splice(-1,0,space+'%');output=output.join('');}else{output=output+space+'%';}
return output;}
function formatTime(n){var hours=Math.floor(n._value/60/60),minutes=Math.floor((n._value-(hours*60*60))/60),seconds=Math.round(n._value-(hours*60*60)-(minutes*60));return hours+':'+((minutes<10)?'0'+minutes:minutes)+':'+((seconds<10)?'0'+seconds:seconds);}
function unformatTime(string){var timeArray=string.split(':'),seconds=0;if(timeArray.length===3){seconds=seconds+(Number(timeArray[0])*60*60);seconds=seconds+(Number(timeArray[1])*60);seconds=seconds+Number(timeArray[2]);}else if(timeArray.length===2){seconds=seconds+(Number(timeArray[0])*60);seconds=seconds+Number(timeArray[1]);}
return Number(seconds);}
function formatNumber(value,format,roundingFunction){var negP=false,signed=false,optDec=false,abbr='',abbrK=false,abbrM=false,abbrB=false,abbrT=false,abbrForce=false,bytes='',ord='',abs=Math.abs(value),suffixes=['B','KB','MB','GB','TB','PB','EB','ZB','YB'],min,max,power,w,precision,thousands,d='',neg=false;if(value===0&&zeroFormat!==null){return zeroFormat;}else{if(format.indexOf('(')>-1){negP=true;format=format.slice(1,-1);}else if(format.indexOf('+')>-1){signed=true;format=format.replace(/\+/g,'');}
if(format.indexOf('a')>-1){abbrK=format.indexOf('aK')>=0;abbrM=format.indexOf('aM')>=0;abbrB=format.indexOf('aB')>=0;abbrT=format.indexOf('aT')>=0;abbrForce=abbrK||abbrM||abbrB||abbrT;if(format.indexOf(' a')>-1){abbr=' ';format=format.replace(' a','');}else{format=format.replace('a','');}
if(abs>=Math.pow(10,12)&&!abbrForce||abbrT){abbr=abbr+languages[currentLanguage].abbreviations.trillion;value=value/Math.pow(10,12);}else if(abs<Math.pow(10,12)&&abs>=Math.pow(10,9)&&!abbrForce||abbrB){abbr=abbr+languages[currentLanguage].abbreviations.billion;value=value/Math.pow(10,9);}else if(abs<Math.pow(10,9)&&abs>=Math.pow(10,6)&&!abbrForce||abbrM){abbr=abbr+languages[currentLanguage].abbreviations.million;value=value/Math.pow(10,6);}else if(abs<Math.pow(10,6)&&abs>=Math.pow(10,3)&&!abbrForce||abbrK){abbr=abbr+languages[currentLanguage].abbreviations.thousand;value=value/Math.pow(10,3);}}
if(format.indexOf('b')>-1){if(format.indexOf(' b')>-1){bytes=' ';format=format.replace(' b','');}else{format=format.replace('b','');}
for(power=0;power<=suffixes.length;power++){min=Math.pow(1024,power);max=Math.pow(1024,power+1);if(value>=min&&value<max){bytes=bytes+suffixes[power];if(min>0){value=value/min;}
break;}}}
if(format.indexOf('o')>-1){if(format.indexOf(' o')>-1){ord=' ';format=format.replace(' o','');}else{format=format.replace('o','');}
ord=ord+languages[currentLanguage].ordinal(value);}
if(format.indexOf('[.]')>-1){optDec=true;format=format.replace('[.]','.');}
w=value.toString().split('.')[0];precision=format.split('.')[1];thousands=format.indexOf(',');if(precision){if(precision.indexOf('[')>-1){precision=precision.replace(']','');precision=precision.split('[');d=toFixed(value,(precision[0].length+precision[1].length),roundingFunction,precision[1].length);}else{d=toFixed(value,precision.length,roundingFunction);}
w=d.split('.')[0];if(d.split('.')[1].length){d=languages[currentLanguage].delimiters.decimal+d.split('.')[1];}else{d='';}
if(optDec&&Number(d.slice(1))===0){d='';}}else{w=toFixed(value,null,roundingFunction);}
if(w.indexOf('-')>-1){w=w.slice(1);neg=true;}
if(thousands>-1){w=w.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,'$1'+languages[currentLanguage].delimiters.thousands);}
if(format.indexOf('.')===0){w='';}
return((negP&&neg)?'(':'')+((!negP&&neg)?'-':'')+((!neg&&signed)?'+':'')+w+d+((ord)?ord:'')+((abbr)?abbr:'')+((bytes)?bytes:'')+((negP&&neg)?')':'');}}
numeral=function(input){if(numeral.isNumeral(input)){input=input.value();}else if(input===0||typeof input==='undefined'){input=0;}else if(!Number(input)){input=numeral.fn.unformat(input);}
return new Numeral(Number(input));};numeral.version=VERSION;numeral.isNumeral=function(obj){return obj instanceof Numeral;};numeral.language=function(key,values){if(!key){return currentLanguage;}
if(key&&!values){if(!languages[key]){throw new Error('Unknown language : '+key);}
currentLanguage=key;}
if(values||!languages[key]){loadLanguage(key,values);}
return numeral;};numeral.languageData=function(key){if(!key){return languages[currentLanguage];}
if(!languages[key]){throw new Error('Unknown language : '+key);}
return languages[key];};numeral.language('en',{delimiters:{thousands:',',decimal:'.'},abbreviations:{thousand:'k',million:'m',billion:'b',trillion:'t'},ordinal:function(number){var b=number%10;return(~~(number%100/10)===1)?'th':(b===1)?'st':(b===2)?'nd':(b===3)?'rd':'th';},currency:{symbol:'$'}});numeral.zeroFormat=function(format){zeroFormat=typeof(format)==='string'?format:null;};numeral.defaultFormat=function(format){defaultFormat=typeof(format)==='string'?format:'0.0';};numeral.validate=function(val,culture){var _decimalSep,_thousandSep,_currSymbol,_valArray,_abbrObj,_thousandRegEx,languageData,temp;if(typeof val!=='string'){val+='';if(console.warn){console.warn('Numeral.js: Value is not string. It has been co-erced to: ',val);}}
val=val.trim();if(val===''){return false;}
val=val.replace(/^[+-]?/,'');try{languageData=numeral.languageData(culture);}catch(e){languageData=numeral.languageData(numeral.language());}
_currSymbol=languageData.currency.symbol;_abbrObj=languageData.abbreviations;_decimalSep=languageData.delimiters.decimal;if(languageData.delimiters.thousands==='.'){_thousandSep='\\.';}else{_thousandSep=languageData.delimiters.thousands;}
temp=val.match(/^[^\d\.\,]+/);if(temp!==null){val=val.substr(1);if(temp[0]!==_currSymbol){return false;}}
temp=val.match(/[^\d]+$/);if(temp!==null){val=val.slice(0,-1);if(temp[0]!==_abbrObj.thousand&&temp[0]!==_abbrObj.million&&temp[0]!==_abbrObj.billion&&temp[0]!==_abbrObj.trillion){return false;}}
if(!!val.match(/^\d+$/)){return true;}
_thousandRegEx=new RegExp(_thousandSep+'{2}');if(!val.match(/[^\d.,]/g)){_valArray=val.split(_decimalSep);if(_valArray.length>2){return false;}else{if(_valArray.length<2){return(!!_valArray[0].match(/^\d+.*\d$/)&&!_valArray[0].match(_thousandRegEx));}else{if(_valArray[0]===''){return(!_valArray[0].match(_thousandRegEx)&&!!_valArray[1].match(/^\d+$/));}else if(_valArray[0].length===1){return(!!_valArray[0].match(/^\d+$/)&&!_valArray[0].match(_thousandRegEx)&&!!_valArray[1].match(/^\d+$/));}else{return(!!_valArray[0].match(/^\d+.*\d$/)&&!_valArray[0].match(_thousandRegEx)&&!!_valArray[1].match(/^\d+$/));}}}}
return false;};function loadLanguage(key,values){languages[key]=values;}
if('function'!==typeof Array.prototype.reduce){Array.prototype.reduce=function(callback,opt_initialValue){'use strict';if(null===this||'undefined'===typeof this){throw new TypeError('Array.prototype.reduce called on null or undefined');}
if('function'!==typeof callback){throw new TypeError(callback+' is not a function');}
var index,value,length=this.length>>>0,isValueSet=false;if(1<arguments.length){value=opt_initialValue;isValueSet=true;}
for(index=0;length>index;++index){if(this.hasOwnProperty(index)){if(isValueSet){value=callback(value,this[index],index,this);}else{value=this[index];isValueSet=true;}}}
if(!isValueSet){throw new TypeError('Reduce of empty array with no initial value');}
return value;};}
function multiplier(x){var parts=x.toString().split('.');if(parts.length<2){return 1;}
return Math.pow(10,parts[1].length);}
function correctionFactor(){var args=Array.prototype.slice.call(arguments);return args.reduce(function(prev,next){var mp=multiplier(prev),mn=multiplier(next);return mp>mn?mp:mn;},-Infinity);}
numeral.fn=Numeral.prototype={clone:function(){return numeral(this);},format:function(inputString,roundingFunction){return formatNumeral(this,inputString?inputString:defaultFormat,(roundingFunction!==undefined)?roundingFunction:Math.round);},unformat:function(inputString){if(Object.prototype.toString.call(inputString)==='[object Number]'){return inputString;}
return unformatNumeral(this,inputString?inputString:defaultFormat);},value:function(){return this._value;},valueOf:function(){return this._value;},set:function(value){this._value=Number(value);return this;},add:function(value){var corrFactor=correctionFactor.call(null,this._value,value);function cback(accum,curr,currI,O){return accum+corrFactor*curr;}
this._value=[this._value,value].reduce(cback,0)/corrFactor;return this;},subtract:function(value){var corrFactor=correctionFactor.call(null,this._value,value);function cback(accum,curr,currI,O){return accum-corrFactor*curr;}
this._value=[value].reduce(cback,this._value*corrFactor)/corrFactor;return this;},multiply:function(value){function cback(accum,curr,currI,O){var corrFactor=correctionFactor(accum,curr);return(accum*corrFactor)*(curr*corrFactor)/(corrFactor*corrFactor);}
this._value=[this._value,value].reduce(cback,1);return this;},divide:function(value){function cback(accum,curr,currI,O){var corrFactor=correctionFactor(accum,curr);return(accum*corrFactor)/(curr*corrFactor);}
this._value=[this._value,value].reduce(cback);return this;},difference:function(value){return Math.abs(numeral(this._value).subtract(value).value());}};if(hasModule){module.exports=numeral;}
if(typeof ender==='undefined'){this['numeral']=numeral;}
if(typeof define==='function'&&define.amd){define([],function(){return numeral;});}}).call(window);},{}]},{},[23,57,59,58,60,81,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,82,83,84,85,98,99,100,88,89,90,91,92,93,30,34,31,32,39,33,35,36,37,38])("numeral")});var Path={version:"0.8.4",map:function(a){if(Path.routes.defined.hasOwnProperty(a)){return Path.routes.defined[a]}else{return new Path.core.route(a)}},root:function(a){Path.routes.root=a},rescue:function(a){Path.routes.rescue=a},history:{initial:{},pushState:function(a,b,c){if(Path.history.supported){if(Path.dispatch(c)){history.pushState(a,b,c)}}else{if(Path.history.fallback){window.location.hash="#"+c}}},popState:function(a){var b=!Path.history.initial.popped&&location.href==Path.history.initial.URL;Path.history.initial.popped=true;if(b)return;Path.dispatch(document.location.pathname)},listen:function(a){Path.history.supported=!!(window.history&&window.history.pushState);Path.history.fallback=a;if(Path.history.supported){Path.history.initial.popped="state"in window.history,Path.history.initial.URL=location.href;window.onpopstate=Path.history.popState}else{if(Path.history.fallback){for(route in Path.routes.defined){if(route.charAt(0)!="#"){Path.routes.defined["#"+route]=Path.routes.defined[route];Path.routes.defined["#"+route].path="#"+route}}Path.listen()}}}},match:function(a,b){var c={},d=null,e,f,g,h,i;for(d in Path.routes.defined){if(d!==null&&d!==undefined){d=Path.routes.defined[d];e=d.partition();for(h=0;h<e.length;h++){f=e[h];i=a;if(f.search(/:/)>0){for(g=0;g<f.split("/").length;g++){if(g<i.split("/").length&&f.split("/")[g].charAt(0)===":"){c[f.split("/")[g].replace(/:/,"")]=i.split("/")[g];i=i.replace(i.split("/")[g],f.split("/")[g])}}}if(f===i){if(b){d.params=c}return d}}}}return null},dispatch:function(a){var b,c;if(Path.routes.current!==a){Path.routes.previous=Path.routes.current;Path.routes.current=a;c=Path.match(a,true);if(Path.routes.previous){b=Path.match(Path.routes.previous);if(b!==null&&b.do_exit!==null){b.do_exit()}}if(c!==null){c.run();return true}else{if(Path.routes.rescue!==null){Path.routes.rescue()}}}},listen:function(){var a=function(){Path.dispatch(location.hash)};if(location.hash===""){if(Path.routes.root!==null){location.hash=Path.routes.root}}if("onhashchange"in window&&(!document.documentMode||document.documentMode>=8)){window.onhashchange=a}else{setInterval(a,50)}if(location.hash!==""){Path.dispatch(location.hash)}},core:{route:function(a){this.path=a;this.action=null;this.do_enter=[];this.do_exit=null;this.params={};Path.routes.defined[a]=this}},routes:{current:null,root:null,rescue:null,previous:null,defined:{}}};Path.core.route.prototype={to:function(a){this.action=a;return this},enter:function(a){if(a instanceof Array){this.do_enter=this.do_enter.concat(a)}else{this.do_enter.push(a)}return this},exit:function(a){this.do_exit=a;return this},partition:function(){var a=[],b=[],c=/\(([^}]+?)\)/g,d,e;while(d=c.exec(this.path)){a.push(d[1])}b.push(this.path.split("(")[0]);for(e=0;e<a.length;e++){b.push(b[b.length-1]+a[e])}return b},run:function(){var a=false,b,c,d;if(Path.routes.defined[this.path].hasOwnProperty("do_enter")){if(Path.routes.defined[this.path].do_enter.length>0){for(b=0;b<Path.routes.defined[this.path].do_enter.length;b++){c=Path.routes.defined[this.path].do_enter[b]();if(c===false){a=true;break}}}}if(!a){Path.routes.defined[this.path].action()}}};var infoBox=infoBox||{};(function($){var infoBoxBase={$el:null,options:{position:'center'},_init:function(){this._removeAll();this._createBox();if(this.options.movable){this._makeMovable();}},_createBox:function(){var me=this,$box;$('.infoBox-unique.'+me.options.boxType).remove();$box=$('<div class="infoBox infoBox-unique '+me.options.boxType+'"></div>');this.$el=$box;if(me.options.position){$box.addClass(me.options.position)}
if(me.options.hasHeader){var $header=$('<div class="infoBox-header"></div>');if(me.options.movable){$header.addClass('movable');}
if(me.options.title){$header.append('<div class="ellipsis infoBox-title">'+me.options.title+'</div>');}
if(me.options.hasClose){var $close=$('<div class="infoBox-close"></div>');$header.append($close);$close.click(function(){me._destroy();})}
if(me.options.hasResize){var $zoomIn=$('<div class="infoBox-resize"><span class="glyphicon glyphicon-resize-full" aria-hidden="true"></span></div>');$header.append($zoomIn);$zoomIn.off('click.resizeFull').on('click.resizeFull','.glyphicon-resize-full',function(){me._resizeFull();});$zoomIn.off('click.resizeSmall').on('click.resizeSmall','.glyphicon-resize-small',function(){me._resizeSmall();})}
$box.append($header);}
var $body=$('<div class="infoBox-body scrollbar"></div>');if(me.options.icon){$body.append('<div class="infoBox-icon"><img src="/static/scripts/lib/beopNotification/image/'+me.options.icon+'"></div>');}
if(me.options.msg){me.options.msg=me.options.msg.replace(/\n/g,'<br/>')}
var infoBoxMsgBox=$('<div class="infoBox-msg">').appendTo($body);infoBoxMsgBox.append('<div class="infoBox-msg" style="margin: 0;">'+me.options.msg+'</div>');if(me.options.input){infoBoxMsgBox.append('<input class="form-control" style="width:250px;margin-top:10px;display:inline-block" />')}
$box.append($body);if(me.options.buttons){var $footer=$('<div class="infoBox-footer"></div>');$box.append($footer);for(var btnKey in me.options.buttons){$footer.append(me._createBtn(me.options.buttons[btnKey]));}}
if(me.options.delay){var $progress=$('<div class="progress progress-bar-success"><div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" style="width:0%"><span class="sr-only"</span></div></div>');$progress.insertBefore($body);$progress.animate({width:"100%"},+me.options.delay?+me.options.delay:20000,function(){me._destroy();});}
if(me.options.modal&&$('#infoBoxModal').length==0){var modalHtml='<div id="infoBoxModal"></div>';$('body').append(modalHtml);}
$box.appendTo(document.body);return $box;},_processInput:function(options){options.boxType=this.constructor.name?this.constructor.name:'';return options;},_show:function(){this.$el.fadeIn('fast');I18n.fillArea(this.$el);var $btn=this.$el.find('[i18n]');$btn.each(function(i,item){var arr=['OK','Cancel'];var $item=$(item);if(I18n.getI18nValue($item.attr('i18n'))===undefined){$item.html(arr[i]);}});},_hide:function(){this.$el.hide();},_click:function(){var _this=this;this.$el.click(function(){_this._destroy();});},_destroy:function(){var me=this;me.$el.fadeOut('fast',function(){me.$el.remove();});if(me.options.modal){$('#infoBoxModal').remove();}},_resizeFull:function(){this.$el.addClass('full-size');this.$el.find('.infoBox-resize>.glyphicon').removeClass('glyphicon-resize-full').addClass('glyphicon-resize-small');},_resizeSmall:function(){this.$el.removeClass('full-size');this.$el.find('.infoBox-resize>.glyphicon').removeClass('glyphicon-resize-small').addClass('glyphicon-resize-full');},_makeMovable:function(){var me=this;me.$el.mousedown(function(){me.$el.mousemove(function(e){var thisX=event.pageX-$(this).width()/2,thisY=event.pageY-$(this).height()/2;me.$el.offset({left:thisX,top:thisY});})}).mouseup(function(){me.$el.off('mousemove');})},_removeAll:function(){if(this.options.boxType){if(this.options.boxType=='remind'){$(document.body).children('.remind').remove();}else{}}else{$(document.body).children('.infoBox-unique').remove();}},_createBtn:function(option){var me=this;var $button=$('<button class="btn btn-info alert-button"></button>');$button.attr('i18n',option.i18n);$button.text(option.text);$button.click(function(){me._destroy();option.callback&&option.callback();});$button.addClass(option.css);this.$el.find('.infoBox-footer').append($button);},close:function(){this._destroy();}};function infoBoxTip(msg,options){var _this=this;this.type=((options&&options.type)||infoBox.tip.base.type);if(!options){options={msg:msg}}else{options=$.extend(options,{msg:msg});}
this.options=this._processInput(options);this._init();this._show();this._click();setTimeout(function(){_this._destroy();},3000);if(options.delay&&!isNaN(options.delay)){var timeout=setTimeout(function(){_this._destroy();timeout=null;},options.delay)}}
infoBoxTip.prototype=$.extend({},infoBoxBase,{constructor:infoBoxTip,_processInput:function(options){var mergedOptions=infoBoxBase._processInput.call(this,options);options=$.extend(true,{},infoBox.tip.base,infoBox.tip.options[this.type],mergedOptions);return options;},_init:function(){infoBoxBase._init.call(this);}});infoBox.tip=function(msg,options){return new infoBoxTip(msg,options);};infoBox.tip.base={position:'center',type:'info',modal:true,movable:false};infoBox.tip.options={success:{icon:'alert-success.png'},warning:{icon:'alert-warning.png'},danger:{icon:'alert-danger.png'},info:{icon:'alert-info.png'}};function infoBoxPrompt(msg,callback,options){var _this=this;this.type=(options&&options.type)||infoBox.prompt.base.type;if(!options){options={msg:msg}}else{options=$.extend(options,{msg:msg});}
options=$.extend(true,options,{buttons:{ok:{callback:function(){callback(_this.$el.find('input').val());}}}});this.options=this._processInput(options);this._init();this._show();if(options.delay&&!isNaN(options.delay)){var timeout=setTimeout(function(){_this._destroy();timeout=null;},option.delay)}}
infoBoxPrompt.prototype=$.extend({},infoBoxBase,{constructor:infoBoxPrompt,_processInput:function(options){var mergedOptions=infoBoxBase._processInput.call(this,options);options=$.extend(true,{},infoBox.prompt.base,infoBox.prompt.options[this.type],mergedOptions);return options;},_init:function(){infoBoxBase._init.call(this);}});infoBox.prompt=function(msg,callback,options){return new infoBoxPrompt(msg,callback,options);};infoBox.prompt.base={type:'info',buttons:{ok:{text:'OK',i18n:'common.CONFIRM',class:'alert-button',callback:''},cancel:{text:'Cancel',i18n:'common.CANCEL',class:'alert-button',callback:''}},input:{},modal:true,hasHeader:true,hasClose:true,movable:false};infoBox.prompt.options={success:{icon:'alert-success.png'},warning:{icon:'alert-warning.png'},danger:{icon:'alert-danger.png'},info:{icon:'alert-info.png'}};function infoBoxAlert(msg,options){var _this=this;this.type=(options&&options.type)||infoBox.alert.base.type;if(!options){options={msg:msg}}else{options=$.extend(options,{msg:msg});}
this.options=this._processInput(options);this._init();this._show();if(options.delay&&!isNaN(options.delay)){var timeout=setTimeout(function(){_this._destroy();timeout=null;},options.delay)}}
infoBoxAlert.prototype=$.extend({},infoBoxBase,{constructor:infoBoxAlert,_processInput:function(options){var mergedOptions=infoBoxBase._processInput.call(this,options);options=$.extend(true,{},infoBox.alert.base,infoBox.alert.options[this.type],mergedOptions);return options;},_init:function(){infoBoxBase._init.call(this);}});infoBox.alert=function(msg,options){if(!options){options={};}
options['type']='info';return new infoBoxAlert(msg,options);};infoBox.alert.warning=function(msg,options){if(!options){options={};}
options['type']='warning';return new infoBoxAlert(msg,options);};infoBox.alert.success=function(msg,options){if(!options){options={};}
options['type']='success';return new infoBoxAlert(msg,options);};infoBox.alert.danger=function(msg,options){if(!options){options={};}
options['type']='danger';return new infoBoxAlert(msg,options);};infoBox.alert.base={type:'info',buttons:{ok:{text:'OK',i18n:'common.CONFIRM',class:'alert-button',callback:''}},modal:true,hasHeader:true,hasClose:true,movable:false};infoBox.alert.options={success:{icon:'alert-success.png'},warning:{icon:'alert-warning.png'},danger:{icon:'alert-danger.png'},info:{icon:'alert-info.png'}};function infoBoxConfirm(msg,okCallback,cancelCallback,options){this.type=(options&&options.type)||infoBox.confirm.base.type;if(!okCallback&&!cancelCallback){okCallback=function(){};cancelCallback=function(){};this.type='danger';msg='warning:you not pass the callback to confirm function';}
options=$.extend(options,{msg:msg,buttons:{ok:{callback:okCallback},cancel:{callback:cancelCallback}}});this.options=this._processInput(options);this._init();this._show();}
infoBoxConfirm.prototype=$.extend({},infoBoxBase,{constructor:infoBoxConfirm,_processInput:function(options){var mergedOptions=infoBoxBase._processInput.call(this,options);options=$.extend(true,{},infoBox.confirm.base,infoBox.confirm.options[this.type],mergedOptions);return options;},_init:function(){infoBoxBase._init.call(this);}});infoBox.confirm=function(msg,okCallback,cancelCallback,options){return new infoBoxConfirm(msg,okCallback,cancelCallback,options);};infoBox.confirm.base={type:'info',buttons:{ok:{text:'OK',i18n:'common.CONFIRM',class:'alert-button',callback:function(){return true;}},cancel:{text:'Cancel',i18n:'common.CANCEL',class:'alert-button',callback:function(){return false;}}},modal:true,hasHeader:true,hasClose:true,movable:false};infoBox.confirm.options={success:{icon:'alert-success.png'},warning:{icon:'alert-warning.png'},danger:{icon:'alert-danger.png'},info:{icon:'alert-info.png'}};function infoBoxRemind(typeOrMsg,options){if(!options){this.type=infoBox.remind.base.type;options={msg:typeOrMsg}}
if(!typeOrMsg){this.type=infoBox.remind.base.type;}else if(infoBox.remind.options[typeOrMsg]){this.type=typeOrMsg;}else{options=$.extend(options,{msg:typeOrMsg});}
this.options=this._processInput(options);this._init();this.$el.slideDown(1000);}
infoBoxRemind.prototype=$.extend({},infoBoxBase,{constructor:infoBoxRemind,_processInput:function(options){var mergedOptions=infoBoxBase._processInput.call(this,options);options=$.extend(true,{},infoBox.remind.base,infoBox.remind.options[this.type],mergedOptions);return options;},_init:function(){infoBoxBase._init.call(this);}});infoBox.remind=function(type,options){return new infoBoxRemind(type,options);};infoBox.remind.base={type:'info',modal:false,hasHeader:true,hasClose:true};infoBox.remind.options={};function infoBoxVersion(title,content){this.options=this._processInput({'msg':content});this._init();var $versionTitle='<div class="ellipsis infoBoxVersion-title" title="'+title+'">'+'<span class="dib mr5"></span><span>'+title+'</span></div>';this.$el.find('.infoBox-header').append($versionTitle);this.$el.slideDown(1000);}
infoBoxVersion.prototype=$.extend({},infoBoxBase,{constructor:infoBoxVersion,_processInput:function(options){var mergedOptions=infoBoxBase._processInput.call(this,options);options=$.extend(true,{},infoBox.version.base,infoBox.version.options[this.type],mergedOptions);return options;},_init:function(){infoBoxBase._init.call(this);}});infoBox.version=function(title,content){return new infoBoxVersion(title,content);};infoBox.version.base={modal:false,hasHeader:true,hasClose:true,delay:10000};infoBox.version.options={};function infoBoxMessage(content,options){this.options=this._processInput({'msg':content});this._init();var $messageTitle='<div style="position: relative; top: -10px;"><span class="fl">'+i18n_resource.workflow.message.MESSAGE+'</span>'+'<span class="fr header-right" style="cursor: pointer;"><span class="mr5 markAsAllRead">'+i18n_resource.workflow.message.ALL_READ+'</span><span class="glyphicon glyphicon-envelope"></span></span></div>';this.$el.find('.infoBox-header').append($messageTitle);options.initCb&&options.initCb.call(this);this.$el.slideDown(300);}
infoBoxMessage.prototype=$.extend({},infoBoxBase,{constructor:infoBoxMessage,_processInput:function(options){var mergedOptions=infoBoxBase._processInput.call(this,options);options=$.extend(true,{},infoBox.message.base,infoBox.message.options[this.type],mergedOptions);return options;},_init:function(){infoBoxBase._init.call(this);}});infoBox.message=function(content,options){return new infoBoxMessage(content,options);};infoBox.message.base={modal:false,hasHeader:true};infoBox.message.options={};})(jQuery);try{if(infoBox){alert=infoBox.alert;tip=infoBox.tip;confirm=infoBox.confirm;remindInfoBox=infoBox.remind;versionInfoBox=infoBox.version;messageInfoBox=infoBox.message;}}catch(e){console.warn(''+e);};(function(mod){if(typeof exports=="object"&&typeof module=="object")
module.exports=mod();else if(typeof define=="function"&&define.amd)
return define([],mod);else
(this||window).CodeMirror=mod();})(function(){"use strict";var userAgent=navigator.userAgent;var platform=navigator.platform;var gecko=/gecko\/\d/i.test(userAgent);var ie_upto10=/MSIE \d/.test(userAgent);var ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(userAgent);var ie=ie_upto10||ie_11up;var ie_version=ie&&(ie_upto10?document.documentMode||6:ie_11up[1]);var webkit=/WebKit\//.test(userAgent);var qtwebkit=webkit&&/Qt\/\d+\.\d+/.test(userAgent);var chrome=/Chrome\//.test(userAgent);var presto=/Opera\//.test(userAgent);var safari=/Apple Computer/.test(navigator.vendor);var mac_geMountainLion=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(userAgent);var phantom=/PhantomJS/.test(userAgent);var ios=/AppleWebKit/.test(userAgent)&&/Mobile\/\w+/.test(userAgent);var mobile=ios||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(userAgent);var mac=ios||/Mac/.test(platform);var windows=/win/i.test(platform);var presto_version=presto&&userAgent.match(/Version\/(\d*\.\d*)/);if(presto_version)presto_version=Number(presto_version[1]);if(presto_version&&presto_version>=15){presto=false;webkit=true;}
var flipCtrlCmd=mac&&(qtwebkit||presto&&(presto_version==null||presto_version<12.11));var captureRightClick=gecko||(ie&&ie_version>=9);var sawReadOnlySpans=false,sawCollapsedSpans=false;function CodeMirror(place,options){if(!(this instanceof CodeMirror))return new CodeMirror(place,options);this.options=options=options?copyObj(options):{};copyObj(defaults,options,false);setGuttersForLineNumbers(options);var doc=options.value;if(typeof doc=="string")doc=new Doc(doc,options.mode,null,options.lineSeparator);this.doc=doc;var input=new CodeMirror.inputStyles[options.inputStyle](this);var display=this.display=new Display(place,doc,input);display.wrapper.CodeMirror=this;updateGutters(this);themeChanged(this);if(options.lineWrapping)
this.display.wrapper.className+=" CodeMirror-wrap";if(options.autofocus&&!mobile)display.input.focus();initScrollbars(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:false,delayingBlurEvent:false,focused:false,suppressEdits:false,pasteIncoming:false,cutIncoming:false,selectingText:false,draggingText:false,highlight:new Delayed(),keySeq:null,specialChars:null};var cm=this;if(ie&&ie_version<11)setTimeout(function(){cm.display.input.reset(true);},20);registerEventHandlers(this);ensureGlobalHandlers();startOperation(this);this.curOp.forceUpdate=true;attachDoc(this,doc);if((options.autofocus&&!mobile)||cm.hasFocus())
setTimeout(bind(onFocus,this),20);else
onBlur(this);for(var opt in optionHandlers)if(optionHandlers.hasOwnProperty(opt))
optionHandlers[opt](this,options[opt],Init);maybeUpdateLineNumberWidth(this);if(options.finishInit)options.finishInit(this);for(var i=0;i<initHooks.length;++i)initHooks[i](this);endOperation(this);if(webkit&&options.lineWrapping&&getComputedStyle(display.lineDiv).textRendering=="optimizelegibility")
display.lineDiv.style.textRendering="auto";}
function Display(place,doc,input){var d=this;this.input=input;d.scrollbarFiller=elt("div",null,"CodeMirror-scrollbar-filler");d.scrollbarFiller.setAttribute("cm-not-content","true");d.gutterFiller=elt("div",null,"CodeMirror-gutter-filler");d.gutterFiller.setAttribute("cm-not-content","true");d.lineDiv=elt("div",null,"CodeMirror-code");d.selectionDiv=elt("div",null,null,"position: relative; z-index: 1");d.cursorDiv=elt("div",null,"CodeMirror-cursors");d.measure=elt("div",null,"CodeMirror-measure");d.lineMeasure=elt("div",null,"CodeMirror-measure");d.lineSpace=elt("div",[d.measure,d.lineMeasure,d.selectionDiv,d.cursorDiv,d.lineDiv],null,"position: relative; outline: none");d.mover=elt("div",[elt("div",[d.lineSpace],"CodeMirror-lines")],null,"position: relative");d.sizer=elt("div",[d.mover],"CodeMirror-sizer");d.sizerWidth=null;d.heightForcer=elt("div",null,null,"position: absolute; height: "+scrollerGap+"px; width: 1px;");d.gutters=elt("div",null,"CodeMirror-gutters");d.lineGutter=null;d.scroller=elt("div",[d.sizer,d.heightForcer,d.gutters],"CodeMirror-scroll");d.scroller.setAttribute("tabIndex","-1");d.wrapper=elt("div",[d.scrollbarFiller,d.gutterFiller,d.scroller],"CodeMirror");if(ie&&ie_version<8){d.gutters.style.zIndex=-1;d.scroller.style.paddingRight=0;}
if(!webkit&&!(gecko&&mobile))d.scroller.draggable=true;if(place){if(place.appendChild)place.appendChild(d.wrapper);else place(d.wrapper);}
d.viewFrom=d.viewTo=doc.first;d.reportedViewFrom=d.reportedViewTo=doc.first;d.view=[];d.renderedView=null;d.externalMeasured=null;d.viewOffset=0;d.lastWrapHeight=d.lastWrapWidth=0;d.updateLineNumbers=null;d.nativeBarWidth=d.barHeight=d.barWidth=0;d.scrollbarsClipped=false;d.lineNumWidth=d.lineNumInnerWidth=d.lineNumChars=null;d.alignWidgets=false;d.cachedCharWidth=d.cachedTextHeight=d.cachedPaddingH=null;d.maxLine=null;d.maxLineLength=0;d.maxLineChanged=false;d.wheelDX=d.wheelDY=d.wheelStartX=d.wheelStartY=null;d.shift=false;d.selForContextMenu=null;d.activeTouch=null;input.init(d);}
function loadMode(cm){cm.doc.mode=CodeMirror.getMode(cm.options,cm.doc.modeOption);resetModeState(cm);}
function resetModeState(cm){cm.doc.iter(function(line){if(line.stateAfter)line.stateAfter=null;if(line.styles)line.styles=null;});cm.doc.frontier=cm.doc.first;startWorker(cm,100);cm.state.modeGen++;if(cm.curOp)regChange(cm);}
function wrappingChanged(cm){if(cm.options.lineWrapping){addClass(cm.display.wrapper,"CodeMirror-wrap");cm.display.sizer.style.minWidth="";cm.display.sizerWidth=null;}else{rmClass(cm.display.wrapper,"CodeMirror-wrap");findMaxLine(cm);}
estimateLineHeights(cm);regChange(cm);clearCaches(cm);setTimeout(function(){updateScrollbars(cm);},100);}
function estimateHeight(cm){var th=textHeight(cm.display),wrapping=cm.options.lineWrapping;var perLine=wrapping&&Math.max(5,cm.display.scroller.clientWidth/charWidth(cm.display)-3);return function(line){if(lineIsHidden(cm.doc,line))return 0;var widgetsHeight=0;if(line.widgets)for(var i=0;i<line.widgets.length;i++){if(line.widgets[i].height)widgetsHeight+=line.widgets[i].height;}
if(wrapping)
return widgetsHeight+(Math.ceil(line.text.length/perLine)||1)*th;else
return widgetsHeight+th;};}
function estimateLineHeights(cm){var doc=cm.doc,est=estimateHeight(cm);doc.iter(function(line){var estHeight=est(line);if(estHeight!=line.height)updateLineHeight(line,estHeight);});}
function themeChanged(cm){cm.display.wrapper.className=cm.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+
cm.options.theme.replace(/(^|\s)\s*/g," cm-s-");clearCaches(cm);}
function guttersChanged(cm){updateGutters(cm);regChange(cm);setTimeout(function(){alignHorizontally(cm);},20);}
function updateGutters(cm){var gutters=cm.display.gutters,specs=cm.options.gutters;removeChildren(gutters);for(var i=0;i<specs.length;++i){var gutterClass=specs[i];var gElt=gutters.appendChild(elt("div",null,"CodeMirror-gutter "+gutterClass));if(gutterClass=="CodeMirror-linenumbers"){cm.display.lineGutter=gElt;gElt.style.width=(cm.display.lineNumWidth||1)+"px";}}
gutters.style.display=i?"":"none";updateGutterSpace(cm);}
function updateGutterSpace(cm){var width=cm.display.gutters.offsetWidth;cm.display.sizer.style.marginLeft=width+"px";}
function lineLength(line){if(line.height==0)return 0;var len=line.text.length,merged,cur=line;while(merged=collapsedSpanAtStart(cur)){var found=merged.find(0,true);cur=found.from.line;len+=found.from.ch-found.to.ch;}
cur=line;while(merged=collapsedSpanAtEnd(cur)){var found=merged.find(0,true);len-=cur.text.length-found.from.ch;cur=found.to.line;len+=cur.text.length-found.to.ch;}
return len;}
function findMaxLine(cm){var d=cm.display,doc=cm.doc;d.maxLine=getLine(doc,doc.first);d.maxLineLength=lineLength(d.maxLine);d.maxLineChanged=true;doc.iter(function(line){var len=lineLength(line);if(len>d.maxLineLength){d.maxLineLength=len;d.maxLine=line;}});}
function setGuttersForLineNumbers(options){var found=indexOf(options.gutters,"CodeMirror-linenumbers");if(found==-1&&options.lineNumbers){options.gutters=options.gutters.concat(["CodeMirror-linenumbers"]);}else if(found>-1&&!options.lineNumbers){options.gutters=options.gutters.slice(0);options.gutters.splice(found,1);}}
function measureForScrollbars(cm){var d=cm.display,gutterW=d.gutters.offsetWidth;var docH=Math.round(cm.doc.height+paddingVert(cm.display));return{clientHeight:d.scroller.clientHeight,viewHeight:d.wrapper.clientHeight,scrollWidth:d.scroller.scrollWidth,clientWidth:d.scroller.clientWidth,viewWidth:d.wrapper.clientWidth,barLeft:cm.options.fixedGutter?gutterW:0,docHeight:docH,scrollHeight:docH+scrollGap(cm)+d.barHeight,nativeBarWidth:d.nativeBarWidth,gutterWidth:gutterW};}
function NativeScrollbars(place,scroll,cm){this.cm=cm;var vert=this.vert=elt("div",[elt("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar");var horiz=this.horiz=elt("div",[elt("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");place(vert);place(horiz);on(vert,"scroll",function(){if(vert.clientHeight)scroll(vert.scrollTop,"vertical");});on(horiz,"scroll",function(){if(horiz.clientWidth)scroll(horiz.scrollLeft,"horizontal");});this.checkedZeroWidth=false;if(ie&&ie_version<8)this.horiz.style.minHeight=this.vert.style.minWidth="18px";}
NativeScrollbars.prototype=copyObj({update:function(measure){var needsH=measure.scrollWidth>measure.clientWidth+1;var needsV=measure.scrollHeight>measure.clientHeight+1;var sWidth=measure.nativeBarWidth;if(needsV){this.vert.style.display="block";this.vert.style.bottom=needsH?sWidth+"px":"0";var totalHeight=measure.viewHeight-(needsH?sWidth:0);this.vert.firstChild.style.height=Math.max(0,measure.scrollHeight-measure.clientHeight+totalHeight)+"px";}else{this.vert.style.display="";this.vert.firstChild.style.height="0";}
if(needsH){this.horiz.style.display="block";this.horiz.style.right=needsV?sWidth+"px":"0";this.horiz.style.left=measure.barLeft+"px";var totalWidth=measure.viewWidth-measure.barLeft-(needsV?sWidth:0);this.horiz.firstChild.style.width=(measure.scrollWidth-measure.clientWidth+totalWidth)+"px";}else{this.horiz.style.display="";this.horiz.firstChild.style.width="0";}
if(!this.checkedZeroWidth&&measure.clientHeight>0){if(sWidth==0)this.zeroWidthHack();this.checkedZeroWidth=true;}
return{right:needsV?sWidth:0,bottom:needsH?sWidth:0};},setScrollLeft:function(pos){if(this.horiz.scrollLeft!=pos)this.horiz.scrollLeft=pos;if(this.disableHoriz)this.enableZeroWidthBar(this.horiz,this.disableHoriz);},setScrollTop:function(pos){if(this.vert.scrollTop!=pos)this.vert.scrollTop=pos;if(this.disableVert)this.enableZeroWidthBar(this.vert,this.disableVert);},zeroWidthHack:function(){var w=mac&&!mac_geMountainLion?"12px":"18px";this.horiz.style.height=this.vert.style.width=w;this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none";this.disableHoriz=new Delayed;this.disableVert=new Delayed;},enableZeroWidthBar:function(bar,delay){bar.style.pointerEvents="auto";function maybeDisable(){var box=bar.getBoundingClientRect();var elt=document.elementFromPoint(box.left+1,box.bottom-1);if(elt!=bar)bar.style.pointerEvents="none";else delay.set(1000,maybeDisable);}
delay.set(1000,maybeDisable);},clear:function(){var parent=this.horiz.parentNode;parent.removeChild(this.horiz);parent.removeChild(this.vert);}},NativeScrollbars.prototype);function NullScrollbars(){}
NullScrollbars.prototype=copyObj({update:function(){return{bottom:0,right:0};},setScrollLeft:function(){},setScrollTop:function(){},clear:function(){}},NullScrollbars.prototype);CodeMirror.scrollbarModel={"native":NativeScrollbars,"null":NullScrollbars};function initScrollbars(cm){if(cm.display.scrollbars){cm.display.scrollbars.clear();if(cm.display.scrollbars.addClass)
rmClass(cm.display.wrapper,cm.display.scrollbars.addClass);}
cm.display.scrollbars=new CodeMirror.scrollbarModel[cm.options.scrollbarStyle](function(node){cm.display.wrapper.insertBefore(node,cm.display.scrollbarFiller);on(node,"mousedown",function(){if(cm.state.focused)setTimeout(function(){cm.display.input.focus();},0);});node.setAttribute("cm-not-content","true");},function(pos,axis){if(axis=="horizontal")setScrollLeft(cm,pos);else setScrollTop(cm,pos);},cm);if(cm.display.scrollbars.addClass)
addClass(cm.display.wrapper,cm.display.scrollbars.addClass);}
function updateScrollbars(cm,measure){if(!measure)measure=measureForScrollbars(cm);var startWidth=cm.display.barWidth,startHeight=cm.display.barHeight;updateScrollbarsInner(cm,measure);for(var i=0;i<4&&startWidth!=cm.display.barWidth||startHeight!=cm.display.barHeight;i++){if(startWidth!=cm.display.barWidth&&cm.options.lineWrapping)
updateHeightsInViewport(cm);updateScrollbarsInner(cm,measureForScrollbars(cm));startWidth=cm.display.barWidth;startHeight=cm.display.barHeight;}}
function updateScrollbarsInner(cm,measure){var d=cm.display;var sizes=d.scrollbars.update(measure);d.sizer.style.paddingRight=(d.barWidth=sizes.right)+"px";d.sizer.style.paddingBottom=(d.barHeight=sizes.bottom)+"px";if(sizes.right&&sizes.bottom){d.scrollbarFiller.style.display="block";d.scrollbarFiller.style.height=sizes.bottom+"px";d.scrollbarFiller.style.width=sizes.right+"px";}else d.scrollbarFiller.style.display="";if(sizes.bottom&&cm.options.coverGutterNextToScrollbar&&cm.options.fixedGutter){d.gutterFiller.style.display="block";d.gutterFiller.style.height=sizes.bottom+"px";d.gutterFiller.style.width=measure.gutterWidth+"px";}else d.gutterFiller.style.display="";}
function visibleLines(display,doc,viewport){var top=viewport&&viewport.top!=null?Math.max(0,viewport.top):display.scroller.scrollTop;top=Math.floor(top-paddingTop(display));var bottom=viewport&&viewport.bottom!=null?viewport.bottom:top+display.wrapper.clientHeight;var from=lineAtHeight(doc,top),to=lineAtHeight(doc,bottom);if(viewport&&viewport.ensure){var ensureFrom=viewport.ensure.from.line,ensureTo=viewport.ensure.to.line;if(ensureFrom<from){from=ensureFrom;to=lineAtHeight(doc,heightAtLine(getLine(doc,ensureFrom))+display.wrapper.clientHeight);}else if(Math.min(ensureTo,doc.lastLine())>=to){from=lineAtHeight(doc,heightAtLine(getLine(doc,ensureTo))-display.wrapper.clientHeight);to=ensureTo;}}
return{from:from,to:Math.max(to,from+1)};}
function alignHorizontally(cm){var display=cm.display,view=display.view;if(!display.alignWidgets&&(!display.gutters.firstChild||!cm.options.fixedGutter))return;var comp=compensateForHScroll(display)-display.scroller.scrollLeft+cm.doc.scrollLeft;var gutterW=display.gutters.offsetWidth,left=comp+"px";for(var i=0;i<view.length;i++)if(!view[i].hidden){if(cm.options.fixedGutter&&view[i].gutter)
view[i].gutter.style.left=left;var align=view[i].alignable;if(align)for(var j=0;j<align.length;j++)
align[j].style.left=left;}
if(cm.options.fixedGutter)
display.gutters.style.left=(comp+gutterW)+"px";}
function maybeUpdateLineNumberWidth(cm){if(!cm.options.lineNumbers)return false;var doc=cm.doc,last=lineNumberFor(cm.options,doc.first+doc.size-1),display=cm.display;if(last.length!=display.lineNumChars){var test=display.measure.appendChild(elt("div",[elt("div",last)],"CodeMirror-linenumber CodeMirror-gutter-elt"));var innerW=test.firstChild.offsetWidth,padding=test.offsetWidth-innerW;display.lineGutter.style.width="";display.lineNumInnerWidth=Math.max(innerW,display.lineGutter.offsetWidth-padding)+1;display.lineNumWidth=display.lineNumInnerWidth+padding;display.lineNumChars=display.lineNumInnerWidth?last.length:-1;display.lineGutter.style.width=display.lineNumWidth+"px";updateGutterSpace(cm);return true;}
return false;}
function lineNumberFor(options,i){return String(options.lineNumberFormatter(i+options.firstLineNumber));}
function compensateForHScroll(display){return display.scroller.getBoundingClientRect().left-display.sizer.getBoundingClientRect().left;}
function DisplayUpdate(cm,viewport,force){var display=cm.display;this.viewport=viewport;this.visible=visibleLines(display,cm.doc,viewport);this.editorIsHidden=!display.wrapper.offsetWidth;this.wrapperHeight=display.wrapper.clientHeight;this.wrapperWidth=display.wrapper.clientWidth;this.oldDisplayWidth=displayWidth(cm);this.force=force;this.dims=getDimensions(cm);this.events=[];}
DisplayUpdate.prototype.signal=function(emitter,type){if(hasHandler(emitter,type))
this.events.push(arguments);};DisplayUpdate.prototype.finish=function(){for(var i=0;i<this.events.length;i++)
signal.apply(null,this.events[i]);};function maybeClipScrollbars(cm){var display=cm.display;if(!display.scrollbarsClipped&&display.scroller.offsetWidth){display.nativeBarWidth=display.scroller.offsetWidth-display.scroller.clientWidth;display.heightForcer.style.height=scrollGap(cm)+"px";display.sizer.style.marginBottom=-display.nativeBarWidth+"px";display.sizer.style.borderRightWidth=scrollGap(cm)+"px";display.scrollbarsClipped=true;}}
function updateDisplayIfNeeded(cm,update){var display=cm.display,doc=cm.doc;if(update.editorIsHidden){resetView(cm);return false;}
if(!update.force&&update.visible.from>=display.viewFrom&&update.visible.to<=display.viewTo&&(display.updateLineNumbers==null||display.updateLineNumbers>=display.viewTo)&&display.renderedView==display.view&&countDirtyView(cm)==0)
return false;if(maybeUpdateLineNumberWidth(cm)){resetView(cm);update.dims=getDimensions(cm);}
var end=doc.first+doc.size;var from=Math.max(update.visible.from-cm.options.viewportMargin,doc.first);var to=Math.min(end,update.visible.to+cm.options.viewportMargin);if(display.viewFrom<from&&from-display.viewFrom<20)from=Math.max(doc.first,display.viewFrom);if(display.viewTo>to&&display.viewTo-to<20)to=Math.min(end,display.viewTo);if(sawCollapsedSpans){from=visualLineNo(cm.doc,from);to=visualLineEndNo(cm.doc,to);}
var different=from!=display.viewFrom||to!=display.viewTo||display.lastWrapHeight!=update.wrapperHeight||display.lastWrapWidth!=update.wrapperWidth;adjustView(cm,from,to);display.viewOffset=heightAtLine(getLine(cm.doc,display.viewFrom));cm.display.mover.style.top=display.viewOffset+"px";var toUpdate=countDirtyView(cm);if(!different&&toUpdate==0&&!update.force&&display.renderedView==display.view&&(display.updateLineNumbers==null||display.updateLineNumbers>=display.viewTo))
return false;var focused=activeElt();if(toUpdate>4)display.lineDiv.style.display="none";patchDisplay(cm,display.updateLineNumbers,update.dims);if(toUpdate>4)display.lineDiv.style.display="";display.renderedView=display.view;if(focused&&activeElt()!=focused&&focused.offsetHeight)focused.focus();removeChildren(display.cursorDiv);removeChildren(display.selectionDiv);display.gutters.style.height=display.sizer.style.minHeight=0;if(different){display.lastWrapHeight=update.wrapperHeight;display.lastWrapWidth=update.wrapperWidth;startWorker(cm,400);}
display.updateLineNumbers=null;return true;}
function postUpdateDisplay(cm,update){var viewport=update.viewport;for(var first=true;;first=false){if(!first||!cm.options.lineWrapping||update.oldDisplayWidth==displayWidth(cm)){if(viewport&&viewport.top!=null)
viewport={top:Math.min(cm.doc.height+paddingVert(cm.display)-displayHeight(cm),viewport.top)};update.visible=visibleLines(cm.display,cm.doc,viewport);if(update.visible.from>=cm.display.viewFrom&&update.visible.to<=cm.display.viewTo)
break;}
if(!updateDisplayIfNeeded(cm,update))break;updateHeightsInViewport(cm);var barMeasure=measureForScrollbars(cm);updateSelection(cm);setDocumentHeight(cm,barMeasure);updateScrollbars(cm,barMeasure);}
update.signal(cm,"update",cm);if(cm.display.viewFrom!=cm.display.reportedViewFrom||cm.display.viewTo!=cm.display.reportedViewTo){update.signal(cm,"viewportChange",cm,cm.display.viewFrom,cm.display.viewTo);cm.display.reportedViewFrom=cm.display.viewFrom;cm.display.reportedViewTo=cm.display.viewTo;}}
function updateDisplaySimple(cm,viewport){var update=new DisplayUpdate(cm,viewport);if(updateDisplayIfNeeded(cm,update)){updateHeightsInViewport(cm);postUpdateDisplay(cm,update);var barMeasure=measureForScrollbars(cm);updateSelection(cm);setDocumentHeight(cm,barMeasure);updateScrollbars(cm,barMeasure);update.finish();}}
function setDocumentHeight(cm,measure){cm.display.sizer.style.minHeight=measure.docHeight+"px";var total=measure.docHeight+cm.display.barHeight;cm.display.heightForcer.style.top=total+"px";cm.display.gutters.style.height=Math.max(total+scrollGap(cm),measure.clientHeight)+"px";}
function updateHeightsInViewport(cm){var display=cm.display;var prevBottom=display.lineDiv.offsetTop;for(var i=0;i<display.view.length;i++){var cur=display.view[i],height;if(cur.hidden)continue;if(ie&&ie_version<8){var bot=cur.node.offsetTop+cur.node.offsetHeight;height=bot-prevBottom;prevBottom=bot;}else{var box=cur.node.getBoundingClientRect();height=box.bottom-box.top;}
var diff=cur.line.height-height;if(height<2)height=textHeight(display);if(diff>.001||diff<-.001){updateLineHeight(cur.line,height);updateWidgetHeight(cur.line);if(cur.rest)for(var j=0;j<cur.rest.length;j++)
updateWidgetHeight(cur.rest[j]);}}}
function updateWidgetHeight(line){if(line.widgets)for(var i=0;i<line.widgets.length;++i)
line.widgets[i].height=line.widgets[i].node.parentNode.offsetHeight;}
function getDimensions(cm){var d=cm.display,left={},width={};var gutterLeft=d.gutters.clientLeft;for(var n=d.gutters.firstChild,i=0;n;n=n.nextSibling,++i){left[cm.options.gutters[i]]=n.offsetLeft+n.clientLeft+gutterLeft;width[cm.options.gutters[i]]=n.clientWidth;}
return{fixedPos:compensateForHScroll(d),gutterTotalWidth:d.gutters.offsetWidth,gutterLeft:left,gutterWidth:width,wrapperWidth:d.wrapper.clientWidth};}
function patchDisplay(cm,updateNumbersFrom,dims){var display=cm.display,lineNumbers=cm.options.lineNumbers;var container=display.lineDiv,cur=container.firstChild;function rm(node){var next=node.nextSibling;if(webkit&&mac&&cm.display.currentWheelTarget==node)
node.style.display="none";else
node.parentNode.removeChild(node);return next;}
var view=display.view,lineN=display.viewFrom;for(var i=0;i<view.length;i++){var lineView=view[i];if(lineView.hidden){}else if(!lineView.node||lineView.node.parentNode!=container){var node=buildLineElement(cm,lineView,lineN,dims);container.insertBefore(node,cur);}else{while(cur!=lineView.node)cur=rm(cur);var updateNumber=lineNumbers&&updateNumbersFrom!=null&&updateNumbersFrom<=lineN&&lineView.lineNumber;if(lineView.changes){if(indexOf(lineView.changes,"gutter")>-1)updateNumber=false;updateLineForChanges(cm,lineView,lineN,dims);}
if(updateNumber){removeChildren(lineView.lineNumber);lineView.lineNumber.appendChild(document.createTextNode(lineNumberFor(cm.options,lineN)));}
cur=lineView.node.nextSibling;}
lineN+=lineView.size;}
while(cur)cur=rm(cur);}
function updateLineForChanges(cm,lineView,lineN,dims){for(var j=0;j<lineView.changes.length;j++){var type=lineView.changes[j];if(type=="text")updateLineText(cm,lineView);else if(type=="gutter")updateLineGutter(cm,lineView,lineN,dims);else if(type=="class")updateLineClasses(lineView);else if(type=="widget")updateLineWidgets(cm,lineView,dims);}
lineView.changes=null;}
function ensureLineWrapped(lineView){if(lineView.node==lineView.text){lineView.node=elt("div",null,null,"position: relative");if(lineView.text.parentNode)
lineView.text.parentNode.replaceChild(lineView.node,lineView.text);lineView.node.appendChild(lineView.text);if(ie&&ie_version<8)lineView.node.style.zIndex=2;}
return lineView.node;}
function updateLineBackground(lineView){var cls=lineView.bgClass?lineView.bgClass+" "+(lineView.line.bgClass||""):lineView.line.bgClass;if(cls)cls+=" CodeMirror-linebackground";if(lineView.background){if(cls)lineView.background.className=cls;else{lineView.background.parentNode.removeChild(lineView.background);lineView.background=null;}}else if(cls){var wrap=ensureLineWrapped(lineView);lineView.background=wrap.insertBefore(elt("div",null,cls),wrap.firstChild);}}
function getLineContent(cm,lineView){var ext=cm.display.externalMeasured;if(ext&&ext.line==lineView.line){cm.display.externalMeasured=null;lineView.measure=ext.measure;return ext.built;}
return buildLineContent(cm,lineView);}
function updateLineText(cm,lineView){var cls=lineView.text.className;var built=getLineContent(cm,lineView);if(lineView.text==lineView.node)lineView.node=built.pre;lineView.text.parentNode.replaceChild(built.pre,lineView.text);lineView.text=built.pre;if(built.bgClass!=lineView.bgClass||built.textClass!=lineView.textClass){lineView.bgClass=built.bgClass;lineView.textClass=built.textClass;updateLineClasses(lineView);}else if(cls){lineView.text.className=cls;}}
function updateLineClasses(lineView){updateLineBackground(lineView);if(lineView.line.wrapClass)
ensureLineWrapped(lineView).className=lineView.line.wrapClass;else if(lineView.node!=lineView.text)
lineView.node.className="";var textClass=lineView.textClass?lineView.textClass+" "+(lineView.line.textClass||""):lineView.line.textClass;lineView.text.className=textClass||"";}
function updateLineGutter(cm,lineView,lineN,dims){if(lineView.gutter){lineView.node.removeChild(lineView.gutter);lineView.gutter=null;}
if(lineView.gutterBackground){lineView.node.removeChild(lineView.gutterBackground);lineView.gutterBackground=null;}
if(lineView.line.gutterClass){var wrap=ensureLineWrapped(lineView);lineView.gutterBackground=elt("div",null,"CodeMirror-gutter-background "+lineView.line.gutterClass,"left: "+(cm.options.fixedGutter?dims.fixedPos:-dims.gutterTotalWidth)+"px; width: "+dims.gutterTotalWidth+"px");wrap.insertBefore(lineView.gutterBackground,lineView.text);}
var markers=lineView.line.gutterMarkers;if(cm.options.lineNumbers||markers){var wrap=ensureLineWrapped(lineView);var gutterWrap=lineView.gutter=elt("div",null,"CodeMirror-gutter-wrapper","left: "+
(cm.options.fixedGutter?dims.fixedPos:-dims.gutterTotalWidth)+"px");cm.display.input.setUneditable(gutterWrap);wrap.insertBefore(gutterWrap,lineView.text);if(lineView.line.gutterClass)
gutterWrap.className+=" "+lineView.line.gutterClass;if(cm.options.lineNumbers&&(!markers||!markers["CodeMirror-linenumbers"]))
lineView.lineNumber=gutterWrap.appendChild(elt("div",lineNumberFor(cm.options,lineN),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+dims.gutterLeft["CodeMirror-linenumbers"]+"px; width: "
+cm.display.lineNumInnerWidth+"px"));if(markers)for(var k=0;k<cm.options.gutters.length;++k){var id=cm.options.gutters[k],found=markers.hasOwnProperty(id)&&markers[id];if(found)
gutterWrap.appendChild(elt("div",[found],"CodeMirror-gutter-elt","left: "+
dims.gutterLeft[id]+"px; width: "+dims.gutterWidth[id]+"px"));}}}
function updateLineWidgets(cm,lineView,dims){if(lineView.alignable)lineView.alignable=null;for(var node=lineView.node.firstChild,next;node;node=next){var next=node.nextSibling;if(node.className=="CodeMirror-linewidget")
lineView.node.removeChild(node);}
insertLineWidgets(cm,lineView,dims);}
function buildLineElement(cm,lineView,lineN,dims){var built=getLineContent(cm,lineView);lineView.text=lineView.node=built.pre;if(built.bgClass)lineView.bgClass=built.bgClass;if(built.textClass)lineView.textClass=built.textClass;updateLineClasses(lineView);updateLineGutter(cm,lineView,lineN,dims);insertLineWidgets(cm,lineView,dims);return lineView.node;}
function insertLineWidgets(cm,lineView,dims){insertLineWidgetsFor(cm,lineView.line,lineView,dims,true);if(lineView.rest)for(var i=0;i<lineView.rest.length;i++)
insertLineWidgetsFor(cm,lineView.rest[i],lineView,dims,false);}
function insertLineWidgetsFor(cm,line,lineView,dims,allowAbove){if(!line.widgets)return;var wrap=ensureLineWrapped(lineView);for(var i=0,ws=line.widgets;i<ws.length;++i){var widget=ws[i],node=elt("div",[widget.node],"CodeMirror-linewidget");if(!widget.handleMouseEvents)node.setAttribute("cm-ignore-events","true");positionLineWidget(widget,node,lineView,dims);cm.display.input.setUneditable(node);if(allowAbove&&widget.above)
wrap.insertBefore(node,lineView.gutter||lineView.text);else
wrap.appendChild(node);signalLater(widget,"redraw");}}
function positionLineWidget(widget,node,lineView,dims){if(widget.noHScroll){(lineView.alignable||(lineView.alignable=[])).push(node);var width=dims.wrapperWidth;node.style.left=dims.fixedPos+"px";if(!widget.coverGutter){width-=dims.gutterTotalWidth;node.style.paddingLeft=dims.gutterTotalWidth+"px";}
node.style.width=width+"px";}
if(widget.coverGutter){node.style.zIndex=5;node.style.position="relative";if(!widget.noHScroll)node.style.marginLeft=-dims.gutterTotalWidth+"px";}}
var Pos=CodeMirror.Pos=function(line,ch){if(!(this instanceof Pos))return new Pos(line,ch);this.line=line;this.ch=ch;};var cmp=CodeMirror.cmpPos=function(a,b){return a.line-b.line||a.ch-b.ch;};function copyPos(x){return Pos(x.line,x.ch);}
function maxPos(a,b){return cmp(a,b)<0?b:a;}
function minPos(a,b){return cmp(a,b)<0?a:b;}
function ensureFocus(cm){if(!cm.state.focused){cm.display.input.focus();onFocus(cm);}}
var lastCopied=null;function applyTextInput(cm,inserted,deleted,sel,origin){var doc=cm.doc;cm.display.shift=false;if(!sel)sel=doc.sel;var paste=cm.state.pasteIncoming||origin=="paste";var textLines=doc.splitLines(inserted),multiPaste=null;if(paste&&sel.ranges.length>1){if(lastCopied&&lastCopied.join("\n")==inserted){if(sel.ranges.length%lastCopied.length==0){multiPaste=[];for(var i=0;i<lastCopied.length;i++)
multiPaste.push(doc.splitLines(lastCopied[i]));}}else if(textLines.length==sel.ranges.length){multiPaste=map(textLines,function(l){return[l];});}}
for(var i=sel.ranges.length-1;i>=0;i--){var range=sel.ranges[i];var from=range.from(),to=range.to();if(range.empty()){if(deleted&&deleted>0)
from=Pos(from.line,from.ch-deleted);else if(cm.state.overwrite&&!paste)
to=Pos(to.line,Math.min(getLine(doc,to.line).text.length,to.ch+lst(textLines).length));}
var updateInput=cm.curOp.updateInput;var changeEvent={from:from,to:to,text:multiPaste?multiPaste[i%multiPaste.length]:textLines,origin:origin||(paste?"paste":cm.state.cutIncoming?"cut":"+input")};makeChange(cm.doc,changeEvent);signalLater(cm,"inputRead",cm,changeEvent);}
if(inserted&&!paste)
triggerElectric(cm,inserted);ensureCursorVisible(cm);cm.curOp.updateInput=updateInput;cm.curOp.typing=true;cm.state.pasteIncoming=cm.state.cutIncoming=false;}
function handlePaste(e,cm){var pasted=e.clipboardData&&e.clipboardData.getData("text/plain");if(pasted){e.preventDefault();if(!cm.isReadOnly()&&!cm.options.disableInput)
runInOp(cm,function(){applyTextInput(cm,pasted,0,null,"paste");});return true;}}
function triggerElectric(cm,inserted){if(!cm.options.electricChars||!cm.options.smartIndent)return;var sel=cm.doc.sel;for(var i=sel.ranges.length-1;i>=0;i--){var range=sel.ranges[i];if(range.head.ch>100||(i&&sel.ranges[i-1].head.line==range.head.line))continue;var mode=cm.getModeAt(range.head);var indented=false;if(mode.electricChars){for(var j=0;j<mode.electricChars.length;j++)
if(inserted.indexOf(mode.electricChars.charAt(j))>-1){indented=indentLine(cm,range.head.line,"smart");break;}}else if(mode.electricInput){if(mode.electricInput.test(getLine(cm.doc,range.head.line).text.slice(0,range.head.ch)))
indented=indentLine(cm,range.head.line,"smart");}
if(indented)signalLater(cm,"electricInput",cm,range.head.line);}}
function copyableRanges(cm){var text=[],ranges=[];for(var i=0;i<cm.doc.sel.ranges.length;i++){var line=cm.doc.sel.ranges[i].head.line;var lineRange={anchor:Pos(line,0),head:Pos(line+1,0)};ranges.push(lineRange);text.push(cm.getRange(lineRange.anchor,lineRange.head));}
return{text:text,ranges:ranges};}
function disableBrowserMagic(field){field.setAttribute("autocorrect","off");field.setAttribute("autocapitalize","off");field.setAttribute("spellcheck","false");}
function TextareaInput(cm){this.cm=cm;this.prevInput="";this.pollingFast=false;this.polling=new Delayed();this.inaccurateSelection=false;this.hasSelection=false;this.composing=null;};function hiddenTextarea(){var te=elt("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none");var div=elt("div",[te],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");if(webkit)te.style.width="1000px";else te.setAttribute("wrap","off");if(ios)te.style.border="1px solid black";disableBrowserMagic(te);return div;}
TextareaInput.prototype=copyObj({init:function(display){var input=this,cm=this.cm;var div=this.wrapper=hiddenTextarea();var te=this.textarea=div.firstChild;display.wrapper.insertBefore(div,display.wrapper.firstChild);if(ios)te.style.width="0px";on(te,"input",function(){if(ie&&ie_version>=9&&input.hasSelection)input.hasSelection=null;input.poll();});on(te,"paste",function(e){if(signalDOMEvent(cm,e)||handlePaste(e,cm))return
cm.state.pasteIncoming=true;input.fastPoll();});function prepareCopyCut(e){if(signalDOMEvent(cm,e))return
if(cm.somethingSelected()){lastCopied=cm.getSelections();if(input.inaccurateSelection){input.prevInput="";input.inaccurateSelection=false;te.value=lastCopied.join("\n");selectInput(te);}}else if(!cm.options.lineWiseCopyCut){return;}else{var ranges=copyableRanges(cm);lastCopied=ranges.text;if(e.type=="cut"){cm.setSelections(ranges.ranges,null,sel_dontScroll);}else{input.prevInput="";te.value=ranges.text.join("\n");selectInput(te);}}
if(e.type=="cut")cm.state.cutIncoming=true;}
on(te,"cut",prepareCopyCut);on(te,"copy",prepareCopyCut);on(display.scroller,"paste",function(e){if(eventInWidget(display,e)||signalDOMEvent(cm,e))return;cm.state.pasteIncoming=true;input.focus();});on(display.lineSpace,"selectstart",function(e){if(!eventInWidget(display,e))e_preventDefault(e);});on(te,"compositionstart",function(){var start=cm.getCursor("from");if(input.composing)input.composing.range.clear()
input.composing={start:start,range:cm.markText(start,cm.getCursor("to"),{className:"CodeMirror-composing"})};});on(te,"compositionend",function(){if(input.composing){input.poll();input.composing.range.clear();input.composing=null;}});},prepareSelection:function(){var cm=this.cm,display=cm.display,doc=cm.doc;var result=prepareSelection(cm);if(cm.options.moveInputWithCursor){var headPos=cursorCoords(cm,doc.sel.primary().head,"div");var wrapOff=display.wrapper.getBoundingClientRect(),lineOff=display.lineDiv.getBoundingClientRect();result.teTop=Math.max(0,Math.min(display.wrapper.clientHeight-10,headPos.top+lineOff.top-wrapOff.top));result.teLeft=Math.max(0,Math.min(display.wrapper.clientWidth-10,headPos.left+lineOff.left-wrapOff.left));}
return result;},showSelection:function(drawn){var cm=this.cm,display=cm.display;removeChildrenAndAdd(display.cursorDiv,drawn.cursors);removeChildrenAndAdd(display.selectionDiv,drawn.selection);if(drawn.teTop!=null){this.wrapper.style.top=drawn.teTop+"px";this.wrapper.style.left=drawn.teLeft+"px";}},reset:function(typing){if(this.contextMenuPending)return;var minimal,selected,cm=this.cm,doc=cm.doc;if(cm.somethingSelected()){this.prevInput="";var range=doc.sel.primary();minimal=hasCopyEvent&&(range.to().line-range.from().line>100||(selected=cm.getSelection()).length>1000);var content=minimal?"-":selected||cm.getSelection();this.textarea.value=content;if(cm.state.focused)selectInput(this.textarea);if(ie&&ie_version>=9)this.hasSelection=content;}else if(!typing){this.prevInput=this.textarea.value="";if(ie&&ie_version>=9)this.hasSelection=null;}
this.inaccurateSelection=minimal;},getField:function(){return this.textarea;},supportsTouch:function(){return false;},focus:function(){if(this.cm.options.readOnly!="nocursor"&&(!mobile||activeElt()!=this.textarea)){try{this.textarea.focus();}
catch(e){}}},blur:function(){this.textarea.blur();},resetPosition:function(){this.wrapper.style.top=this.wrapper.style.left=0;},receivedFocus:function(){this.slowPoll();},slowPoll:function(){var input=this;if(input.pollingFast)return;input.polling.set(this.cm.options.pollInterval,function(){input.poll();if(input.cm.state.focused)input.slowPoll();});},fastPoll:function(){var missed=false,input=this;input.pollingFast=true;function p(){var changed=input.poll();if(!changed&&!missed){missed=true;input.polling.set(60,p);}
else{input.pollingFast=false;input.slowPoll();}}
input.polling.set(20,p);},poll:function(){var cm=this.cm,input=this.textarea,prevInput=this.prevInput;if(this.contextMenuPending||!cm.state.focused||(hasSelection(input)&&!prevInput&&!this.composing)||cm.isReadOnly()||cm.options.disableInput||cm.state.keySeq)
return false;var text=input.value;if(text==prevInput&&!cm.somethingSelected())return false;if(ie&&ie_version>=9&&this.hasSelection===text||mac&&/[\uf700-\uf7ff]/.test(text)){cm.display.input.reset();return false;}
if(cm.doc.sel==cm.display.selForContextMenu){var first=text.charCodeAt(0);if(first==0x200b&&!prevInput)prevInput="\u200b";if(first==0x21da){this.reset();return this.cm.execCommand("undo");}}
var same=0,l=Math.min(prevInput.length,text.length);while(same<l&&prevInput.charCodeAt(same)==text.charCodeAt(same))++same;var self=this;runInOp(cm,function(){applyTextInput(cm,text.slice(same),prevInput.length-same,null,self.composing?"*compose":null);if(text.length>1000||text.indexOf("\n")>-1)input.value=self.prevInput="";else self.prevInput=text;if(self.composing){self.composing.range.clear();self.composing.range=cm.markText(self.composing.start,cm.getCursor("to"),{className:"CodeMirror-composing"});}});return true;},ensurePolled:function(){if(this.pollingFast&&this.poll())this.pollingFast=false;},onKeyPress:function(){if(ie&&ie_version>=9)this.hasSelection=null;this.fastPoll();},onContextMenu:function(e){var input=this,cm=input.cm,display=cm.display,te=input.textarea;var pos=posFromMouse(cm,e),scrollPos=display.scroller.scrollTop;if(!pos||presto)return;var reset=cm.options.resetSelectionOnContextMenu;if(reset&&cm.doc.sel.contains(pos)==-1)
operation(cm,setSelection)(cm.doc,simpleSelection(pos),sel_dontScroll);var oldCSS=te.style.cssText;input.wrapper.style.position="absolute";te.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: "+
(ie?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";if(webkit)var oldScrollY=window.scrollY;display.input.focus();if(webkit)window.scrollTo(null,oldScrollY);display.input.reset();if(!cm.somethingSelected())te.value=input.prevInput=" ";input.contextMenuPending=true;display.selForContextMenu=cm.doc.sel;clearTimeout(display.detectingSelectAll);function prepareSelectAllHack(){if(te.selectionStart!=null){var selected=cm.somethingSelected();var extval="\u200b"+(selected?te.value:"");te.value="\u21da";te.value=extval;input.prevInput=selected?"":"\u200b";te.selectionStart=1;te.selectionEnd=extval.length;display.selForContextMenu=cm.doc.sel;}}
function rehide(){input.contextMenuPending=false;input.wrapper.style.position="relative";te.style.cssText=oldCSS;if(ie&&ie_version<9)display.scrollbars.setScrollTop(display.scroller.scrollTop=scrollPos);if(te.selectionStart!=null){if(!ie||(ie&&ie_version<9))prepareSelectAllHack();var i=0,poll=function(){if(display.selForContextMenu==cm.doc.sel&&te.selectionStart==0&&te.selectionEnd>0&&input.prevInput=="\u200b")
operation(cm,commands.selectAll)(cm);else if(i++<10)display.detectingSelectAll=setTimeout(poll,500);else display.input.reset();};display.detectingSelectAll=setTimeout(poll,200);}}
if(ie&&ie_version>=9)prepareSelectAllHack();if(captureRightClick){e_stop(e);var mouseup=function(){off(window,"mouseup",mouseup);setTimeout(rehide,20);};on(window,"mouseup",mouseup);}else{setTimeout(rehide,50);}},readOnlyChanged:function(val){if(!val)this.reset();},setUneditable:nothing,needsContentAttribute:false},TextareaInput.prototype);function ContentEditableInput(cm){this.cm=cm;this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null;this.polling=new Delayed();this.gracePeriod=false;}
ContentEditableInput.prototype=copyObj({init:function(display){var input=this,cm=input.cm;var div=input.div=display.lineDiv;disableBrowserMagic(div);on(div,"paste",function(e){if(!signalDOMEvent(cm,e))handlePaste(e,cm);})
on(div,"compositionstart",function(e){var data=e.data;input.composing={sel:cm.doc.sel,data:data,startData:data};if(!data)return;var prim=cm.doc.sel.primary();var line=cm.getLine(prim.head.line);var found=line.indexOf(data,Math.max(0,prim.head.ch-data.length));if(found>-1&&found<=prim.head.ch)
input.composing.sel=simpleSelection(Pos(prim.head.line,found),Pos(prim.head.line,found+data.length));});on(div,"compositionupdate",function(e){input.composing.data=e.data;});on(div,"compositionend",function(e){var ours=input.composing;if(!ours)return;if(e.data!=ours.startData&&!/\u200b/.test(e.data))
ours.data=e.data;setTimeout(function(){if(!ours.handled)
input.applyComposition(ours);if(input.composing==ours)
input.composing=null;},50);});on(div,"touchstart",function(){input.forceCompositionEnd();});on(div,"input",function(){if(input.composing)return;if(cm.isReadOnly()||!input.pollContent())
runInOp(input.cm,function(){regChange(cm);});});function onCopyCut(e){if(signalDOMEvent(cm,e))return
if(cm.somethingSelected()){lastCopied=cm.getSelections();if(e.type=="cut")cm.replaceSelection("",null,"cut");}else if(!cm.options.lineWiseCopyCut){return;}else{var ranges=copyableRanges(cm);lastCopied=ranges.text;if(e.type=="cut"){cm.operation(function(){cm.setSelections(ranges.ranges,0,sel_dontScroll);cm.replaceSelection("",null,"cut");});}}
if(e.clipboardData&&!ios){e.preventDefault();e.clipboardData.clearData();e.clipboardData.setData("text/plain",lastCopied.join("\n"));}else{var kludge=hiddenTextarea(),te=kludge.firstChild;cm.display.lineSpace.insertBefore(kludge,cm.display.lineSpace.firstChild);te.value=lastCopied.join("\n");var hadFocus=document.activeElement;selectInput(te);setTimeout(function(){cm.display.lineSpace.removeChild(kludge);hadFocus.focus();},50);}}
on(div,"copy",onCopyCut);on(div,"cut",onCopyCut);},prepareSelection:function(){var result=prepareSelection(this.cm,false);result.focus=this.cm.state.focused;return result;},showSelection:function(info){if(!info||!this.cm.display.view.length)return;if(info.focus)this.showPrimarySelection();this.showMultipleSelections(info);},showPrimarySelection:function(){var sel=window.getSelection(),prim=this.cm.doc.sel.primary();var curAnchor=domToPos(this.cm,sel.anchorNode,sel.anchorOffset);var curFocus=domToPos(this.cm,sel.focusNode,sel.focusOffset);if(curAnchor&&!curAnchor.bad&&curFocus&&!curFocus.bad&&cmp(minPos(curAnchor,curFocus),prim.from())==0&&cmp(maxPos(curAnchor,curFocus),prim.to())==0)
return;var start=posToDOM(this.cm,prim.from());var end=posToDOM(this.cm,prim.to());if(!start&&!end)return;var view=this.cm.display.view;var old=sel.rangeCount&&sel.getRangeAt(0);if(!start){start={node:view[0].measure.map[2],offset:0};}else if(!end){var measure=view[view.length-1].measure;var map=measure.maps?measure.maps[measure.maps.length-1]:measure.map;end={node:map[map.length-1],offset:map[map.length-2]-map[map.length-3]};}
try{var rng=range(start.node,start.offset,end.offset,end.node);}
catch(e){}
if(rng){if(!gecko&&this.cm.state.focused){sel.collapse(start.node,start.offset);if(!rng.collapsed)sel.addRange(rng);}else{sel.removeAllRanges();sel.addRange(rng);}
if(old&&sel.anchorNode==null)sel.addRange(old);else if(gecko)this.startGracePeriod();}
this.rememberSelection();},startGracePeriod:function(){var input=this;clearTimeout(this.gracePeriod);this.gracePeriod=setTimeout(function(){input.gracePeriod=false;if(input.selectionChanged())
input.cm.operation(function(){input.cm.curOp.selectionChanged=true;});},20);},showMultipleSelections:function(info){removeChildrenAndAdd(this.cm.display.cursorDiv,info.cursors);removeChildrenAndAdd(this.cm.display.selectionDiv,info.selection);},rememberSelection:function(){var sel=window.getSelection();this.lastAnchorNode=sel.anchorNode;this.lastAnchorOffset=sel.anchorOffset;this.lastFocusNode=sel.focusNode;this.lastFocusOffset=sel.focusOffset;},selectionInEditor:function(){var sel=window.getSelection();if(!sel.rangeCount)return false;var node=sel.getRangeAt(0).commonAncestorContainer;return contains(this.div,node);},focus:function(){if(this.cm.options.readOnly!="nocursor")this.div.focus();},blur:function(){this.div.blur();},getField:function(){return this.div;},supportsTouch:function(){return true;},receivedFocus:function(){var input=this;if(this.selectionInEditor())
this.pollSelection();else
runInOp(this.cm,function(){input.cm.curOp.selectionChanged=true;});function poll(){if(input.cm.state.focused){input.pollSelection();input.polling.set(input.cm.options.pollInterval,poll);}}
this.polling.set(this.cm.options.pollInterval,poll);},selectionChanged:function(){var sel=window.getSelection();return sel.anchorNode!=this.lastAnchorNode||sel.anchorOffset!=this.lastAnchorOffset||sel.focusNode!=this.lastFocusNode||sel.focusOffset!=this.lastFocusOffset;},pollSelection:function(){if(!this.composing&&!this.gracePeriod&&this.selectionChanged()){var sel=window.getSelection(),cm=this.cm;this.rememberSelection();var anchor=domToPos(cm,sel.anchorNode,sel.anchorOffset);var head=domToPos(cm,sel.focusNode,sel.focusOffset);if(anchor&&head)runInOp(cm,function(){setSelection(cm.doc,simpleSelection(anchor,head),sel_dontScroll);if(anchor.bad||head.bad)cm.curOp.selectionChanged=true;});}},pollContent:function(){var cm=this.cm,display=cm.display,sel=cm.doc.sel.primary();var from=sel.from(),to=sel.to();if(from.line<display.viewFrom||to.line>display.viewTo-1)return false;var fromIndex;if(from.line==display.viewFrom||(fromIndex=findViewIndex(cm,from.line))==0){var fromLine=lineNo(display.view[0].line);var fromNode=display.view[0].node;}else{var fromLine=lineNo(display.view[fromIndex].line);var fromNode=display.view[fromIndex-1].node.nextSibling;}
var toIndex=findViewIndex(cm,to.line);if(toIndex==display.view.length-1){var toLine=display.viewTo-1;var toNode=display.lineDiv.lastChild;}else{var toLine=lineNo(display.view[toIndex+1].line)-1;var toNode=display.view[toIndex+1].node.previousSibling;}
var newText=cm.doc.splitLines(domTextBetween(cm,fromNode,toNode,fromLine,toLine));var oldText=getBetween(cm.doc,Pos(fromLine,0),Pos(toLine,getLine(cm.doc,toLine).text.length));while(newText.length>1&&oldText.length>1){if(lst(newText)==lst(oldText)){newText.pop();oldText.pop();toLine--;}
else if(newText[0]==oldText[0]){newText.shift();oldText.shift();fromLine++;}
else break;}
var cutFront=0,cutEnd=0;var newTop=newText[0],oldTop=oldText[0],maxCutFront=Math.min(newTop.length,oldTop.length);while(cutFront<maxCutFront&&newTop.charCodeAt(cutFront)==oldTop.charCodeAt(cutFront))
++cutFront;var newBot=lst(newText),oldBot=lst(oldText);var maxCutEnd=Math.min(newBot.length-(newText.length==1?cutFront:0),oldBot.length-(oldText.length==1?cutFront:0));while(cutEnd<maxCutEnd&&newBot.charCodeAt(newBot.length-cutEnd-1)==oldBot.charCodeAt(oldBot.length-cutEnd-1))
++cutEnd;newText[newText.length-1]=newBot.slice(0,newBot.length-cutEnd);newText[0]=newText[0].slice(cutFront);var chFrom=Pos(fromLine,cutFront);var chTo=Pos(toLine,oldText.length?lst(oldText).length-cutEnd:0);if(newText.length>1||newText[0]||cmp(chFrom,chTo)){replaceRange(cm.doc,newText,chFrom,chTo,"+input");return true;}},ensurePolled:function(){this.forceCompositionEnd();},reset:function(){this.forceCompositionEnd();},forceCompositionEnd:function(){if(!this.composing||this.composing.handled)return;this.applyComposition(this.composing);this.composing.handled=true;this.div.blur();this.div.focus();},applyComposition:function(composing){if(this.cm.isReadOnly())
operation(this.cm,regChange)(this.cm)
else if(composing.data&&composing.data!=composing.startData)
operation(this.cm,applyTextInput)(this.cm,composing.data,0,composing.sel);},setUneditable:function(node){node.contentEditable="false"},onKeyPress:function(e){e.preventDefault();if(!this.cm.isReadOnly())
operation(this.cm,applyTextInput)(this.cm,String.fromCharCode(e.charCode==null?e.keyCode:e.charCode),0);},readOnlyChanged:function(val){this.div.contentEditable=String(val!="nocursor")},onContextMenu:nothing,resetPosition:nothing,needsContentAttribute:true},ContentEditableInput.prototype);function posToDOM(cm,pos){var view=findViewForLine(cm,pos.line);if(!view||view.hidden)return null;var line=getLine(cm.doc,pos.line);var info=mapFromLineView(view,line,pos.line);var order=getOrder(line),side="left";if(order){var partPos=getBidiPartAt(order,pos.ch);side=partPos%2?"right":"left";}
var result=nodeAndOffsetInLineMap(info.map,pos.ch,side);result.offset=result.collapse=="right"?result.end:result.start;return result;}
function badPos(pos,bad){if(bad)pos.bad=true;return pos;}
function domToPos(cm,node,offset){var lineNode;if(node==cm.display.lineDiv){lineNode=cm.display.lineDiv.childNodes[offset];if(!lineNode)return badPos(cm.clipPos(Pos(cm.display.viewTo-1)),true);node=null;offset=0;}else{for(lineNode=node;;lineNode=lineNode.parentNode){if(!lineNode||lineNode==cm.display.lineDiv)return null;if(lineNode.parentNode&&lineNode.parentNode==cm.display.lineDiv)break;}}
for(var i=0;i<cm.display.view.length;i++){var lineView=cm.display.view[i];if(lineView.node==lineNode)
return locateNodeInLineView(lineView,node,offset);}}
function locateNodeInLineView(lineView,node,offset){var wrapper=lineView.text.firstChild,bad=false;if(!node||!contains(wrapper,node))return badPos(Pos(lineNo(lineView.line),0),true);if(node==wrapper){bad=true;node=wrapper.childNodes[offset];offset=0;if(!node){var line=lineView.rest?lst(lineView.rest):lineView.line;return badPos(Pos(lineNo(line),line.text.length),bad);}}
var textNode=node.nodeType==3?node:null,topNode=node;if(!textNode&&node.childNodes.length==1&&node.firstChild.nodeType==3){textNode=node.firstChild;if(offset)offset=textNode.nodeValue.length;}
while(topNode.parentNode!=wrapper)topNode=topNode.parentNode;var measure=lineView.measure,maps=measure.maps;function find(textNode,topNode,offset){for(var i=-1;i<(maps?maps.length:0);i++){var map=i<0?measure.map:maps[i];for(var j=0;j<map.length;j+=3){var curNode=map[j+2];if(curNode==textNode||curNode==topNode){var line=lineNo(i<0?lineView.line:lineView.rest[i]);var ch=map[j]+offset;if(offset<0||curNode!=textNode)ch=map[j+(offset?1:0)];return Pos(line,ch);}}}}
var found=find(textNode,topNode,offset);if(found)return badPos(found,bad);for(var after=topNode.nextSibling,dist=textNode?textNode.nodeValue.length-offset:0;after;after=after.nextSibling){found=find(after,after.firstChild,0);if(found)
return badPos(Pos(found.line,found.ch-dist),bad);else
dist+=after.textContent.length;}
for(var before=topNode.previousSibling,dist=offset;before;before=before.previousSibling){found=find(before,before.firstChild,-1);if(found)
return badPos(Pos(found.line,found.ch+dist),bad);else
dist+=after.textContent.length;}}
function domTextBetween(cm,from,to,fromLine,toLine){var text="",closing=false,lineSep=cm.doc.lineSeparator();function recognizeMarker(id){return function(marker){return marker.id==id;};}
function walk(node){if(node.nodeType==1){var cmText=node.getAttribute("cm-text");if(cmText!=null){if(cmText=="")cmText=node.textContent.replace(/\u200b/g,"");text+=cmText;return;}
var markerID=node.getAttribute("cm-marker"),range;if(markerID){var found=cm.findMarks(Pos(fromLine,0),Pos(toLine+1,0),recognizeMarker(+markerID));if(found.length&&(range=found[0].find()))
text+=getBetween(cm.doc,range.from,range.to).join(lineSep);return;}
if(node.getAttribute("contenteditable")=="false")return;for(var i=0;i<node.childNodes.length;i++)
walk(node.childNodes[i]);if(/^(pre|div|p)$/i.test(node.nodeName))
closing=true;}else if(node.nodeType==3){var val=node.nodeValue;if(!val)return;if(closing){text+=lineSep;closing=false;}
text+=val;}}
for(;;){walk(from);if(from==to)break;from=from.nextSibling;}
return text;}
CodeMirror.inputStyles={"textarea":TextareaInput,"contenteditable":ContentEditableInput};function Selection(ranges,primIndex){this.ranges=ranges;this.primIndex=primIndex;}
Selection.prototype={primary:function(){return this.ranges[this.primIndex];},equals:function(other){if(other==this)return true;if(other.primIndex!=this.primIndex||other.ranges.length!=this.ranges.length)return false;for(var i=0;i<this.ranges.length;i++){var here=this.ranges[i],there=other.ranges[i];if(cmp(here.anchor,there.anchor)!=0||cmp(here.head,there.head)!=0)return false;}
return true;},deepCopy:function(){for(var out=[],i=0;i<this.ranges.length;i++)
out[i]=new Range(copyPos(this.ranges[i].anchor),copyPos(this.ranges[i].head));return new Selection(out,this.primIndex);},somethingSelected:function(){for(var i=0;i<this.ranges.length;i++)
if(!this.ranges[i].empty())return true;return false;},contains:function(pos,end){if(!end)end=pos;for(var i=0;i<this.ranges.length;i++){var range=this.ranges[i];if(cmp(end,range.from())>=0&&cmp(pos,range.to())<=0)
return i;}
return-1;}};function Range(anchor,head){this.anchor=anchor;this.head=head;}
Range.prototype={from:function(){return minPos(this.anchor,this.head);},to:function(){return maxPos(this.anchor,this.head);},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch;}};function normalizeSelection(ranges,primIndex){var prim=ranges[primIndex];ranges.sort(function(a,b){return cmp(a.from(),b.from());});primIndex=indexOf(ranges,prim);for(var i=1;i<ranges.length;i++){var cur=ranges[i],prev=ranges[i-1];if(cmp(prev.to(),cur.from())>=0){var from=minPos(prev.from(),cur.from()),to=maxPos(prev.to(),cur.to());var inv=prev.empty()?cur.from()==cur.head:prev.from()==prev.head;if(i<=primIndex)--primIndex;ranges.splice(--i,2,new Range(inv?to:from,inv?from:to));}}
return new Selection(ranges,primIndex);}
function simpleSelection(anchor,head){return new Selection([new Range(anchor,head||anchor)],0);}
function clipLine(doc,n){return Math.max(doc.first,Math.min(n,doc.first+doc.size-1));}
function clipPos(doc,pos){if(pos.line<doc.first)return Pos(doc.first,0);var last=doc.first+doc.size-1;if(pos.line>last)return Pos(last,getLine(doc,last).text.length);return clipToLen(pos,getLine(doc,pos.line).text.length);}
function clipToLen(pos,linelen){var ch=pos.ch;if(ch==null||ch>linelen)return Pos(pos.line,linelen);else if(ch<0)return Pos(pos.line,0);else return pos;}
function isLine(doc,l){return l>=doc.first&&l<doc.first+doc.size;}
function clipPosArray(doc,array){for(var out=[],i=0;i<array.length;i++)out[i]=clipPos(doc,array[i]);return out;}
function extendRange(doc,range,head,other){if(doc.cm&&doc.cm.display.shift||doc.extend){var anchor=range.anchor;if(other){var posBefore=cmp(head,anchor)<0;if(posBefore!=(cmp(other,anchor)<0)){anchor=head;head=other;}else if(posBefore!=(cmp(head,other)<0)){head=other;}}
return new Range(anchor,head);}else{return new Range(other||head,head);}}
function extendSelection(doc,head,other,options){setSelection(doc,new Selection([extendRange(doc,doc.sel.primary(),head,other)],0),options);}
function extendSelections(doc,heads,options){for(var out=[],i=0;i<doc.sel.ranges.length;i++)
out[i]=extendRange(doc,doc.sel.ranges[i],heads[i],null);var newSel=normalizeSelection(out,doc.sel.primIndex);setSelection(doc,newSel,options);}
function replaceOneSelection(doc,i,range,options){var ranges=doc.sel.ranges.slice(0);ranges[i]=range;setSelection(doc,normalizeSelection(ranges,doc.sel.primIndex),options);}
function setSimpleSelection(doc,anchor,head,options){setSelection(doc,simpleSelection(anchor,head),options);}
function filterSelectionChange(doc,sel,options){var obj={ranges:sel.ranges,update:function(ranges){this.ranges=[];for(var i=0;i<ranges.length;i++)
this.ranges[i]=new Range(clipPos(doc,ranges[i].anchor),clipPos(doc,ranges[i].head));},origin:options&&options.origin};signal(doc,"beforeSelectionChange",doc,obj);if(doc.cm)signal(doc.cm,"beforeSelectionChange",doc.cm,obj);if(obj.ranges!=sel.ranges)return normalizeSelection(obj.ranges,obj.ranges.length-1);else return sel;}
function setSelectionReplaceHistory(doc,sel,options){var done=doc.history.done,last=lst(done);if(last&&last.ranges){done[done.length-1]=sel;setSelectionNoUndo(doc,sel,options);}else{setSelection(doc,sel,options);}}
function setSelection(doc,sel,options){setSelectionNoUndo(doc,sel,options);addSelectionToHistory(doc,doc.sel,doc.cm?doc.cm.curOp.id:NaN,options);}
function setSelectionNoUndo(doc,sel,options){if(hasHandler(doc,"beforeSelectionChange")||doc.cm&&hasHandler(doc.cm,"beforeSelectionChange"))
sel=filterSelectionChange(doc,sel,options);var bias=options&&options.bias||(cmp(sel.primary().head,doc.sel.primary().head)<0?-1:1);setSelectionInner(doc,skipAtomicInSelection(doc,sel,bias,true));if(!(options&&options.scroll===false)&&doc.cm)
ensureCursorVisible(doc.cm);}
function setSelectionInner(doc,sel){if(sel.equals(doc.sel))return;doc.sel=sel;if(doc.cm){doc.cm.curOp.updateInput=doc.cm.curOp.selectionChanged=true;signalCursorActivity(doc.cm);}
signalLater(doc,"cursorActivity",doc);}
function reCheckSelection(doc){setSelectionInner(doc,skipAtomicInSelection(doc,doc.sel,null,false),sel_dontScroll);}
function skipAtomicInSelection(doc,sel,bias,mayClear){var out;for(var i=0;i<sel.ranges.length;i++){var range=sel.ranges[i];var old=sel.ranges.length==doc.sel.ranges.length&&doc.sel.ranges[i];var newAnchor=skipAtomic(doc,range.anchor,old&&old.anchor,bias,mayClear);var newHead=skipAtomic(doc,range.head,old&&old.head,bias,mayClear);if(out||newAnchor!=range.anchor||newHead!=range.head){if(!out)out=sel.ranges.slice(0,i);out[i]=new Range(newAnchor,newHead);}}
return out?normalizeSelection(out,sel.primIndex):sel;}
function skipAtomicInner(doc,pos,oldPos,dir,mayClear){var line=getLine(doc,pos.line);if(line.markedSpans)for(var i=0;i<line.markedSpans.length;++i){var sp=line.markedSpans[i],m=sp.marker;if((sp.from==null||(m.inclusiveLeft?sp.from<=pos.ch:sp.from<pos.ch))&&(sp.to==null||(m.inclusiveRight?sp.to>=pos.ch:sp.to>pos.ch))){if(mayClear){signal(m,"beforeCursorEnter");if(m.explicitlyCleared){if(!line.markedSpans)break;else{--i;continue;}}}
if(!m.atomic)continue;if(oldPos){var near=m.find(dir<0?1:-1),diff;if(dir<0?m.inclusiveRight:m.inclusiveLeft)near=movePos(doc,near,-dir,line);if(near&&near.line==pos.line&&(diff=cmp(near,oldPos))&&(dir<0?diff<0:diff>0))
return skipAtomicInner(doc,near,pos,dir,mayClear);}
var far=m.find(dir<0?-1:1);if(dir<0?m.inclusiveLeft:m.inclusiveRight)far=movePos(doc,far,dir,line);return far?skipAtomicInner(doc,far,pos,dir,mayClear):null;}}
return pos;}
function skipAtomic(doc,pos,oldPos,bias,mayClear){var dir=bias||1;var found=skipAtomicInner(doc,pos,oldPos,dir,mayClear)||(!mayClear&&skipAtomicInner(doc,pos,oldPos,dir,true))||skipAtomicInner(doc,pos,oldPos,-dir,mayClear)||(!mayClear&&skipAtomicInner(doc,pos,oldPos,-dir,true));if(!found){doc.cantEdit=true;return Pos(doc.first,0);}
return found;}
function movePos(doc,pos,dir,line){if(dir<0&&pos.ch==0){if(pos.line>doc.first)return clipPos(doc,Pos(pos.line-1));else return null;}else if(dir>0&&pos.ch==(line||getLine(doc,pos.line)).text.length){if(pos.line<doc.first+doc.size-1)return Pos(pos.line+1,0);else return null;}else{return new Pos(pos.line,pos.ch+dir);}}
function updateSelection(cm){cm.display.input.showSelection(cm.display.input.prepareSelection());}
function prepareSelection(cm,primary){var doc=cm.doc,result={};var curFragment=result.cursors=document.createDocumentFragment();var selFragment=result.selection=document.createDocumentFragment();for(var i=0;i<doc.sel.ranges.length;i++){if(primary===false&&i==doc.sel.primIndex)continue;var range=doc.sel.ranges[i];var collapsed=range.empty();if(collapsed||cm.options.showCursorWhenSelecting)
drawSelectionCursor(cm,range.head,curFragment);if(!collapsed)
drawSelectionRange(cm,range,selFragment);}
return result;}
function drawSelectionCursor(cm,head,output){var pos=cursorCoords(cm,head,"div",null,null,!cm.options.singleCursorHeightPerLine);var cursor=output.appendChild(elt("div","\u00a0","CodeMirror-cursor"));cursor.style.left=pos.left+"px";cursor.style.top=pos.top+"px";cursor.style.height=Math.max(0,pos.bottom-pos.top)*cm.options.cursorHeight+"px";if(pos.other){var otherCursor=output.appendChild(elt("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor"));otherCursor.style.display="";otherCursor.style.left=pos.other.left+"px";otherCursor.style.top=pos.other.top+"px";otherCursor.style.height=(pos.other.bottom-pos.other.top)*.85+"px";}}
function drawSelectionRange(cm,range,output){var display=cm.display,doc=cm.doc;var fragment=document.createDocumentFragment();var padding=paddingH(cm.display),leftSide=padding.left;var rightSide=Math.max(display.sizerWidth,displayWidth(cm)-display.sizer.offsetLeft)-padding.right;function add(left,top,width,bottom){if(top<0)top=0;top=Math.round(top);bottom=Math.round(bottom);fragment.appendChild(elt("div",null,"CodeMirror-selected","position: absolute; left: "+left+"px; top: "+top+"px; width: "+(width==null?rightSide-left:width)+"px; height: "+(bottom-top)+"px"));}
function drawForLine(line,fromArg,toArg){var lineObj=getLine(doc,line);var lineLen=lineObj.text.length;var start,end;function coords(ch,bias){return charCoords(cm,Pos(line,ch),"div",lineObj,bias);}
iterateBidiSections(getOrder(lineObj),fromArg||0,toArg==null?lineLen:toArg,function(from,to,dir){var leftPos=coords(from,"left"),rightPos,left,right;if(from==to){rightPos=leftPos;left=right=leftPos.left;}else{rightPos=coords(to-1,"right");if(dir=="rtl"){var tmp=leftPos;leftPos=rightPos;rightPos=tmp;}
left=leftPos.left;right=rightPos.right;}
if(fromArg==null&&from==0)left=leftSide;if(rightPos.top-leftPos.top>3){add(left,leftPos.top,null,leftPos.bottom);left=leftSide;if(leftPos.bottom<rightPos.top)add(left,leftPos.bottom,null,rightPos.top);}
if(toArg==null&&to==lineLen)right=rightSide;if(!start||leftPos.top<start.top||leftPos.top==start.top&&leftPos.left<start.left)
start=leftPos;if(!end||rightPos.bottom>end.bottom||rightPos.bottom==end.bottom&&rightPos.right>end.right)
end=rightPos;if(left<leftSide+1)left=leftSide;add(left,rightPos.top,right-left,rightPos.bottom);});return{start:start,end:end};}
var sFrom=range.from(),sTo=range.to();if(sFrom.line==sTo.line){drawForLine(sFrom.line,sFrom.ch,sTo.ch);}else{var fromLine=getLine(doc,sFrom.line),toLine=getLine(doc,sTo.line);var singleVLine=visualLine(fromLine)==visualLine(toLine);var leftEnd=drawForLine(sFrom.line,sFrom.ch,singleVLine?fromLine.text.length+1:null).end;var rightStart=drawForLine(sTo.line,singleVLine?0:null,sTo.ch).start;if(singleVLine){if(leftEnd.top<rightStart.top-2){add(leftEnd.right,leftEnd.top,null,leftEnd.bottom);add(leftSide,rightStart.top,rightStart.left,rightStart.bottom);}else{add(leftEnd.right,leftEnd.top,rightStart.left-leftEnd.right,leftEnd.bottom);}}
if(leftEnd.bottom<rightStart.top)
add(leftSide,leftEnd.bottom,null,rightStart.top);}
output.appendChild(fragment);}
function restartBlink(cm){if(!cm.state.focused)return;var display=cm.display;clearInterval(display.blinker);var on=true;display.cursorDiv.style.visibility="";if(cm.options.cursorBlinkRate>0)
display.blinker=setInterval(function(){display.cursorDiv.style.visibility=(on=!on)?"":"hidden";},cm.options.cursorBlinkRate);else if(cm.options.cursorBlinkRate<0)
display.cursorDiv.style.visibility="hidden";}
function startWorker(cm,time){if(cm.doc.mode.startState&&cm.doc.frontier<cm.display.viewTo)
cm.state.highlight.set(time,bind(highlightWorker,cm));}
function highlightWorker(cm){var doc=cm.doc;if(doc.frontier<doc.first)doc.frontier=doc.first;if(doc.frontier>=cm.display.viewTo)return;var end=+new Date+cm.options.workTime;var state=copyState(doc.mode,getStateBefore(cm,doc.frontier));var changedLines=[];doc.iter(doc.frontier,Math.min(doc.first+doc.size,cm.display.viewTo+500),function(line){if(doc.frontier>=cm.display.viewFrom){var oldStyles=line.styles,tooLong=line.text.length>cm.options.maxHighlightLength;var highlighted=highlightLine(cm,line,tooLong?copyState(doc.mode,state):state,true);line.styles=highlighted.styles;var oldCls=line.styleClasses,newCls=highlighted.classes;if(newCls)line.styleClasses=newCls;else if(oldCls)line.styleClasses=null;var ischange=!oldStyles||oldStyles.length!=line.styles.length||oldCls!=newCls&&(!oldCls||!newCls||oldCls.bgClass!=newCls.bgClass||oldCls.textClass!=newCls.textClass);for(var i=0;!ischange&&i<oldStyles.length;++i)ischange=oldStyles[i]!=line.styles[i];if(ischange)changedLines.push(doc.frontier);line.stateAfter=tooLong?state:copyState(doc.mode,state);}else{if(line.text.length<=cm.options.maxHighlightLength)
processLine(cm,line.text,state);line.stateAfter=doc.frontier%5==0?copyState(doc.mode,state):null;}
++doc.frontier;if(+new Date>end){startWorker(cm,cm.options.workDelay);return true;}});if(changedLines.length)runInOp(cm,function(){for(var i=0;i<changedLines.length;i++)
regLineChange(cm,changedLines[i],"text");});}
function findStartLine(cm,n,precise){var minindent,minline,doc=cm.doc;var lim=precise?-1:n-(cm.doc.mode.innerMode?1000:100);for(var search=n;search>lim;--search){if(search<=doc.first)return doc.first;var line=getLine(doc,search-1);if(line.stateAfter&&(!precise||search<=doc.frontier))return search;var indented=countColumn(line.text,null,cm.options.tabSize);if(minline==null||minindent>indented){minline=search-1;minindent=indented;}}
return minline;}
function getStateBefore(cm,n,precise){var doc=cm.doc,display=cm.display;if(!doc.mode.startState)return true;var pos=findStartLine(cm,n,precise),state=pos>doc.first&&getLine(doc,pos-1).stateAfter;if(!state)state=startState(doc.mode);else state=copyState(doc.mode,state);doc.iter(pos,n,function(line){processLine(cm,line.text,state);var save=pos==n-1||pos%5==0||pos>=display.viewFrom&&pos<display.viewTo;line.stateAfter=save?copyState(doc.mode,state):null;++pos;});if(precise)doc.frontier=pos;return state;}
function paddingTop(display){return display.lineSpace.offsetTop;}
function paddingVert(display){return display.mover.offsetHeight-display.lineSpace.offsetHeight;}
function paddingH(display){if(display.cachedPaddingH)return display.cachedPaddingH;var e=removeChildrenAndAdd(display.measure,elt("pre","x"));var style=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle;var data={left:parseInt(style.paddingLeft),right:parseInt(style.paddingRight)};if(!isNaN(data.left)&&!isNaN(data.right))display.cachedPaddingH=data;return data;}
function scrollGap(cm){return scrollerGap-cm.display.nativeBarWidth;}
function displayWidth(cm){return cm.display.scroller.clientWidth-scrollGap(cm)-cm.display.barWidth;}
function displayHeight(cm){return cm.display.scroller.clientHeight-scrollGap(cm)-cm.display.barHeight;}
function ensureLineHeights(cm,lineView,rect){var wrapping=cm.options.lineWrapping;var curWidth=wrapping&&displayWidth(cm);if(!lineView.measure.heights||wrapping&&lineView.measure.width!=curWidth){var heights=lineView.measure.heights=[];if(wrapping){lineView.measure.width=curWidth;var rects=lineView.text.firstChild.getClientRects();for(var i=0;i<rects.length-1;i++){var cur=rects[i],next=rects[i+1];if(Math.abs(cur.bottom-next.bottom)>2)
heights.push((cur.bottom+next.top)/2-rect.top);}}
heights.push(rect.bottom-rect.top);}}
function mapFromLineView(lineView,line,lineN){if(lineView.line==line)
return{map:lineView.measure.map,cache:lineView.measure.cache};for(var i=0;i<lineView.rest.length;i++)
if(lineView.rest[i]==line)
return{map:lineView.measure.maps[i],cache:lineView.measure.caches[i]};for(var i=0;i<lineView.rest.length;i++)
if(lineNo(lineView.rest[i])>lineN)
return{map:lineView.measure.maps[i],cache:lineView.measure.caches[i],before:true};}
function updateExternalMeasurement(cm,line){line=visualLine(line);var lineN=lineNo(line);var view=cm.display.externalMeasured=new LineView(cm.doc,line,lineN);view.lineN=lineN;var built=view.built=buildLineContent(cm,view);view.text=built.pre;removeChildrenAndAdd(cm.display.lineMeasure,built.pre);return view;}
function measureChar(cm,line,ch,bias){return measureCharPrepared(cm,prepareMeasureForLine(cm,line),ch,bias);}
function findViewForLine(cm,lineN){if(lineN>=cm.display.viewFrom&&lineN<cm.display.viewTo)
return cm.display.view[findViewIndex(cm,lineN)];var ext=cm.display.externalMeasured;if(ext&&lineN>=ext.lineN&&lineN<ext.lineN+ext.size)
return ext;}
function prepareMeasureForLine(cm,line){var lineN=lineNo(line);var view=findViewForLine(cm,lineN);if(view&&!view.text){view=null;}else if(view&&view.changes){updateLineForChanges(cm,view,lineN,getDimensions(cm));cm.curOp.forceUpdate=true;}
if(!view)
view=updateExternalMeasurement(cm,line);var info=mapFromLineView(view,line,lineN);return{line:line,view:view,rect:null,map:info.map,cache:info.cache,before:info.before,hasHeights:false};}
function measureCharPrepared(cm,prepared,ch,bias,varHeight){if(prepared.before)ch=-1;var key=ch+(bias||""),found;if(prepared.cache.hasOwnProperty(key)){found=prepared.cache[key];}else{if(!prepared.rect)
prepared.rect=prepared.view.text.getBoundingClientRect();if(!prepared.hasHeights){ensureLineHeights(cm,prepared.view,prepared.rect);prepared.hasHeights=true;}
found=measureCharInner(cm,prepared,ch,bias);if(!found.bogus)prepared.cache[key]=found;}
return{left:found.left,right:found.right,top:varHeight?found.rtop:found.top,bottom:varHeight?found.rbottom:found.bottom};}
var nullRect={left:0,right:0,top:0,bottom:0};function nodeAndOffsetInLineMap(map,ch,bias){var node,start,end,collapse;for(var i=0;i<map.length;i+=3){var mStart=map[i],mEnd=map[i+1];if(ch<mStart){start=0;end=1;collapse="left";}else if(ch<mEnd){start=ch-mStart;end=start+1;}else if(i==map.length-3||ch==mEnd&&map[i+3]>ch){end=mEnd-mStart;start=end-1;if(ch>=mEnd)collapse="right";}
if(start!=null){node=map[i+2];if(mStart==mEnd&&bias==(node.insertLeft?"left":"right"))
collapse=bias;if(bias=="left"&&start==0)
while(i&&map[i-2]==map[i-3]&&map[i-1].insertLeft){node=map[(i-=3)+2];collapse="left";}
if(bias=="right"&&start==mEnd-mStart)
while(i<map.length-3&&map[i+3]==map[i+4]&&!map[i+5].insertLeft){node=map[(i+=3)+2];collapse="right";}
break;}}
return{node:node,start:start,end:end,collapse:collapse,coverStart:mStart,coverEnd:mEnd};}
function measureCharInner(cm,prepared,ch,bias){var place=nodeAndOffsetInLineMap(prepared.map,ch,bias);var node=place.node,start=place.start,end=place.end,collapse=place.collapse;var rect;if(node.nodeType==3){for(var i=0;i<4;i++){while(start&&isExtendingChar(prepared.line.text.charAt(place.coverStart+start)))--start;while(place.coverStart+end<place.coverEnd&&isExtendingChar(prepared.line.text.charAt(place.coverStart+end)))++end;if(ie&&ie_version<9&&start==0&&end==place.coverEnd-place.coverStart){rect=node.parentNode.getBoundingClientRect();}else if(ie&&cm.options.lineWrapping){var rects=range(node,start,end).getClientRects();if(rects.length)
rect=rects[bias=="right"?rects.length-1:0];else
rect=nullRect;}else{rect=range(node,start,end).getBoundingClientRect()||nullRect;}
if(rect.left||rect.right||start==0)break;end=start;start=start-1;collapse="right";}
if(ie&&ie_version<11)rect=maybeUpdateRectForZooming(cm.display.measure,rect);}else{if(start>0)collapse=bias="right";var rects;if(cm.options.lineWrapping&&(rects=node.getClientRects()).length>1)
rect=rects[bias=="right"?rects.length-1:0];else
rect=node.getBoundingClientRect();}
if(ie&&ie_version<9&&!start&&(!rect||!rect.left&&!rect.right)){var rSpan=node.parentNode.getClientRects()[0];if(rSpan)
rect={left:rSpan.left,right:rSpan.left+charWidth(cm.display),top:rSpan.top,bottom:rSpan.bottom};else
rect=nullRect;}
var rtop=rect.top-prepared.rect.top,rbot=rect.bottom-prepared.rect.top;var mid=(rtop+rbot)/2;var heights=prepared.view.measure.heights;for(var i=0;i<heights.length-1;i++)
if(mid<heights[i])break;var top=i?heights[i-1]:0,bot=heights[i];var result={left:(collapse=="right"?rect.right:rect.left)-prepared.rect.left,right:(collapse=="left"?rect.left:rect.right)-prepared.rect.left,top:top,bottom:bot};if(!rect.left&&!rect.right)result.bogus=true;if(!cm.options.singleCursorHeightPerLine){result.rtop=rtop;result.rbottom=rbot;}
return result;}
function maybeUpdateRectForZooming(measure,rect){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!hasBadZoomedRects(measure))
return rect;var scaleX=screen.logicalXDPI/screen.deviceXDPI;var scaleY=screen.logicalYDPI/screen.deviceYDPI;return{left:rect.left*scaleX,right:rect.right*scaleX,top:rect.top*scaleY,bottom:rect.bottom*scaleY};}
function clearLineMeasurementCacheFor(lineView){if(lineView.measure){lineView.measure.cache={};lineView.measure.heights=null;if(lineView.rest)for(var i=0;i<lineView.rest.length;i++)
lineView.measure.caches[i]={};}}
function clearLineMeasurementCache(cm){cm.display.externalMeasure=null;removeChildren(cm.display.lineMeasure);for(var i=0;i<cm.display.view.length;i++)
clearLineMeasurementCacheFor(cm.display.view[i]);}
function clearCaches(cm){clearLineMeasurementCache(cm);cm.display.cachedCharWidth=cm.display.cachedTextHeight=cm.display.cachedPaddingH=null;if(!cm.options.lineWrapping)cm.display.maxLineChanged=true;cm.display.lineNumChars=null;}
function pageScrollX(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft;}
function pageScrollY(){return window.pageYOffset||(document.documentElement||document.body).scrollTop;}
function intoCoordSystem(cm,lineObj,rect,context){if(lineObj.widgets)for(var i=0;i<lineObj.widgets.length;++i)if(lineObj.widgets[i].above){var size=widgetHeight(lineObj.widgets[i]);rect.top+=size;rect.bottom+=size;}
if(context=="line")return rect;if(!context)context="local";var yOff=heightAtLine(lineObj);if(context=="local")yOff+=paddingTop(cm.display);else yOff-=cm.display.viewOffset;if(context=="page"||context=="window"){var lOff=cm.display.lineSpace.getBoundingClientRect();yOff+=lOff.top+(context=="window"?0:pageScrollY());var xOff=lOff.left+(context=="window"?0:pageScrollX());rect.left+=xOff;rect.right+=xOff;}
rect.top+=yOff;rect.bottom+=yOff;return rect;}
function fromCoordSystem(cm,coords,context){if(context=="div")return coords;var left=coords.left,top=coords.top;if(context=="page"){left-=pageScrollX();top-=pageScrollY();}else if(context=="local"||!context){var localBox=cm.display.sizer.getBoundingClientRect();left+=localBox.left;top+=localBox.top;}
var lineSpaceBox=cm.display.lineSpace.getBoundingClientRect();return{left:left-lineSpaceBox.left,top:top-lineSpaceBox.top};}
function charCoords(cm,pos,context,lineObj,bias){if(!lineObj)lineObj=getLine(cm.doc,pos.line);return intoCoordSystem(cm,lineObj,measureChar(cm,lineObj,pos.ch,bias),context);}
function cursorCoords(cm,pos,context,lineObj,preparedMeasure,varHeight){lineObj=lineObj||getLine(cm.doc,pos.line);if(!preparedMeasure)preparedMeasure=prepareMeasureForLine(cm,lineObj);function get(ch,right){var m=measureCharPrepared(cm,preparedMeasure,ch,right?"right":"left",varHeight);if(right)m.left=m.right;else m.right=m.left;return intoCoordSystem(cm,lineObj,m,context);}
function getBidi(ch,partPos){var part=order[partPos],right=part.level%2;if(ch==bidiLeft(part)&&partPos&&part.level<order[partPos-1].level){part=order[--partPos];ch=bidiRight(part)-(part.level%2?0:1);right=true;}else if(ch==bidiRight(part)&&partPos<order.length-1&&part.level<order[partPos+1].level){part=order[++partPos];ch=bidiLeft(part)-part.level%2;right=false;}
if(right&&ch==part.to&&ch>part.from)return get(ch-1);return get(ch,right);}
var order=getOrder(lineObj),ch=pos.ch;if(!order)return get(ch);var partPos=getBidiPartAt(order,ch);var val=getBidi(ch,partPos);if(bidiOther!=null)val.other=getBidi(ch,bidiOther);return val;}
function estimateCoords(cm,pos){var left=0,pos=clipPos(cm.doc,pos);if(!cm.options.lineWrapping)left=charWidth(cm.display)*pos.ch;var lineObj=getLine(cm.doc,pos.line);var top=heightAtLine(lineObj)+paddingTop(cm.display);return{left:left,right:left,top:top,bottom:top+lineObj.height};}
function PosWithInfo(line,ch,outside,xRel){var pos=Pos(line,ch);pos.xRel=xRel;if(outside)pos.outside=true;return pos;}
function coordsChar(cm,x,y){var doc=cm.doc;y+=cm.display.viewOffset;if(y<0)return PosWithInfo(doc.first,0,true,-1);var lineN=lineAtHeight(doc,y),last=doc.first+doc.size-1;if(lineN>last)
return PosWithInfo(doc.first+doc.size-1,getLine(doc,last).text.length,true,1);if(x<0)x=0;var lineObj=getLine(doc,lineN);for(;;){var found=coordsCharInner(cm,lineObj,lineN,x,y);var merged=collapsedSpanAtEnd(lineObj);var mergedPos=merged&&merged.find(0,true);if(merged&&(found.ch>mergedPos.from.ch||found.ch==mergedPos.from.ch&&found.xRel>0))
lineN=lineNo(lineObj=mergedPos.to.line);else
return found;}}
function coordsCharInner(cm,lineObj,lineNo,x,y){var innerOff=y-heightAtLine(lineObj);var wrongLine=false,adjust=2*cm.display.wrapper.clientWidth;var preparedMeasure=prepareMeasureForLine(cm,lineObj);function getX(ch){var sp=cursorCoords(cm,Pos(lineNo,ch),"line",lineObj,preparedMeasure);wrongLine=true;if(innerOff>sp.bottom)return sp.left-adjust;else if(innerOff<sp.top)return sp.left+adjust;else wrongLine=false;return sp.left;}
var bidi=getOrder(lineObj),dist=lineObj.text.length;var from=lineLeft(lineObj),to=lineRight(lineObj);var fromX=getX(from),fromOutside=wrongLine,toX=getX(to),toOutside=wrongLine;if(x>toX)return PosWithInfo(lineNo,to,toOutside,1);for(;;){if(bidi?to==from||to==moveVisually(lineObj,from,1):to-from<=1){var ch=x<fromX||x-fromX<=toX-x?from:to;var xDiff=x-(ch==from?fromX:toX);while(isExtendingChar(lineObj.text.charAt(ch)))++ch;var pos=PosWithInfo(lineNo,ch,ch==from?fromOutside:toOutside,xDiff<-1?-1:xDiff>1?1:0);return pos;}
var step=Math.ceil(dist/2),middle=from+step;if(bidi){middle=from;for(var i=0;i<step;++i)middle=moveVisually(lineObj,middle,1);}
var middleX=getX(middle);if(middleX>x){to=middle;toX=middleX;if(toOutside=wrongLine)toX+=1000;dist=step;}
else{from=middle;fromX=middleX;fromOutside=wrongLine;dist-=step;}}}
var measureText;function textHeight(display){if(display.cachedTextHeight!=null)return display.cachedTextHeight;if(measureText==null){measureText=elt("pre");for(var i=0;i<49;++i){measureText.appendChild(document.createTextNode("x"));measureText.appendChild(elt("br"));}
measureText.appendChild(document.createTextNode("x"));}
removeChildrenAndAdd(display.measure,measureText);var height=measureText.offsetHeight/50;if(height>3)display.cachedTextHeight=height;removeChildren(display.measure);return height||1;}
function charWidth(display){if(display.cachedCharWidth!=null)return display.cachedCharWidth;var anchor=elt("span","xxxxxxxxxx");var pre=elt("pre",[anchor]);removeChildrenAndAdd(display.measure,pre);var rect=anchor.getBoundingClientRect(),width=(rect.right-rect.left)/10;if(width>2)display.cachedCharWidth=width;return width||10;}
var operationGroup=null;var nextOpId=0;function startOperation(cm){cm.curOp={cm:cm,viewChanged:false,startHeight:cm.doc.height,forceUpdate:false,updateInput:null,typing:false,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:false,updateMaxLine:false,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:false,id:++nextOpId};if(operationGroup){operationGroup.ops.push(cm.curOp);}else{cm.curOp.ownsGroup=operationGroup={ops:[cm.curOp],delayedCallbacks:[]};}}
function fireCallbacksForOps(group){var callbacks=group.delayedCallbacks,i=0;do{for(;i<callbacks.length;i++)
callbacks[i].call(null);for(var j=0;j<group.ops.length;j++){var op=group.ops[j];if(op.cursorActivityHandlers)
while(op.cursorActivityCalled<op.cursorActivityHandlers.length)
op.cursorActivityHandlers[op.cursorActivityCalled++].call(null,op.cm);}}while(i<callbacks.length);}
function endOperation(cm){var op=cm.curOp,group=op.ownsGroup;if(!group)return;try{fireCallbacksForOps(group);}
finally{operationGroup=null;for(var i=0;i<group.ops.length;i++)
group.ops[i].cm.curOp=null;endOperations(group);}}
function endOperations(group){var ops=group.ops;for(var i=0;i<ops.length;i++)
endOperation_R1(ops[i]);for(var i=0;i<ops.length;i++)
endOperation_W1(ops[i]);for(var i=0;i<ops.length;i++)
endOperation_R2(ops[i]);for(var i=0;i<ops.length;i++)
endOperation_W2(ops[i]);for(var i=0;i<ops.length;i++)
endOperation_finish(ops[i]);}
function endOperation_R1(op){var cm=op.cm,display=cm.display;maybeClipScrollbars(cm);if(op.updateMaxLine)findMaxLine(cm);op.mustUpdate=op.viewChanged||op.forceUpdate||op.scrollTop!=null||op.scrollToPos&&(op.scrollToPos.from.line<display.viewFrom||op.scrollToPos.to.line>=display.viewTo)||display.maxLineChanged&&cm.options.lineWrapping;op.update=op.mustUpdate&&new DisplayUpdate(cm,op.mustUpdate&&{top:op.scrollTop,ensure:op.scrollToPos},op.forceUpdate);}
function endOperation_W1(op){op.updatedDisplay=op.mustUpdate&&updateDisplayIfNeeded(op.cm,op.update);}
function endOperation_R2(op){var cm=op.cm,display=cm.display;if(op.updatedDisplay)updateHeightsInViewport(cm);op.barMeasure=measureForScrollbars(cm);if(display.maxLineChanged&&!cm.options.lineWrapping){op.adjustWidthTo=measureChar(cm,display.maxLine,display.maxLine.text.length).left+3;cm.display.sizerWidth=op.adjustWidthTo;op.barMeasure.scrollWidth=Math.max(display.scroller.clientWidth,display.sizer.offsetLeft+op.adjustWidthTo+scrollGap(cm)+cm.display.barWidth);op.maxScrollLeft=Math.max(0,display.sizer.offsetLeft+op.adjustWidthTo-displayWidth(cm));}
if(op.updatedDisplay||op.selectionChanged)
op.preparedSelection=display.input.prepareSelection();}
function endOperation_W2(op){var cm=op.cm;if(op.adjustWidthTo!=null){cm.display.sizer.style.minWidth=op.adjustWidthTo+"px";if(op.maxScrollLeft<cm.doc.scrollLeft)
setScrollLeft(cm,Math.min(cm.display.scroller.scrollLeft,op.maxScrollLeft),true);cm.display.maxLineChanged=false;}
if(op.preparedSelection)
cm.display.input.showSelection(op.preparedSelection);if(op.updatedDisplay)
setDocumentHeight(cm,op.barMeasure);if(op.updatedDisplay||op.startHeight!=cm.doc.height)
updateScrollbars(cm,op.barMeasure);if(op.selectionChanged)restartBlink(cm);if(cm.state.focused&&op.updateInput)
cm.display.input.reset(op.typing);if(op.focus&&op.focus==activeElt()&&(!document.hasFocus||document.hasFocus()))
ensureFocus(op.cm);}
function endOperation_finish(op){var cm=op.cm,display=cm.display,doc=cm.doc;if(op.updatedDisplay)postUpdateDisplay(cm,op.update);if(display.wheelStartX!=null&&(op.scrollTop!=null||op.scrollLeft!=null||op.scrollToPos))
display.wheelStartX=display.wheelStartY=null;if(op.scrollTop!=null&&(display.scroller.scrollTop!=op.scrollTop||op.forceScroll)){doc.scrollTop=Math.max(0,Math.min(display.scroller.scrollHeight-display.scroller.clientHeight,op.scrollTop));display.scrollbars.setScrollTop(doc.scrollTop);display.scroller.scrollTop=doc.scrollTop;}
if(op.scrollLeft!=null&&(display.scroller.scrollLeft!=op.scrollLeft||op.forceScroll)){doc.scrollLeft=Math.max(0,Math.min(display.scroller.scrollWidth-displayWidth(cm),op.scrollLeft));display.scrollbars.setScrollLeft(doc.scrollLeft);display.scroller.scrollLeft=doc.scrollLeft;alignHorizontally(cm);}
if(op.scrollToPos){var coords=scrollPosIntoView(cm,clipPos(doc,op.scrollToPos.from),clipPos(doc,op.scrollToPos.to),op.scrollToPos.margin);if(op.scrollToPos.isCursor&&cm.state.focused)maybeScrollWindow(cm,coords);}
var hidden=op.maybeHiddenMarkers,unhidden=op.maybeUnhiddenMarkers;if(hidden)for(var i=0;i<hidden.length;++i)
if(!hidden[i].lines.length)signal(hidden[i],"hide");if(unhidden)for(var i=0;i<unhidden.length;++i)
if(unhidden[i].lines.length)signal(unhidden[i],"unhide");if(display.wrapper.offsetHeight)
doc.scrollTop=cm.display.scroller.scrollTop;if(op.changeObjs)
signal(cm,"changes",cm,op.changeObjs);if(op.update)
op.update.finish();}
function runInOp(cm,f){if(cm.curOp)return f();startOperation(cm);try{return f();}
finally{endOperation(cm);}}
function operation(cm,f){return function(){if(cm.curOp)return f.apply(cm,arguments);startOperation(cm);try{return f.apply(cm,arguments);}
finally{endOperation(cm);}};}
function methodOp(f){return function(){if(this.curOp)return f.apply(this,arguments);startOperation(this);try{return f.apply(this,arguments);}
finally{endOperation(this);}};}
function docMethodOp(f){return function(){var cm=this.cm;if(!cm||cm.curOp)return f.apply(this,arguments);startOperation(cm);try{return f.apply(this,arguments);}
finally{endOperation(cm);}};}
function LineView(doc,line,lineN){this.line=line;this.rest=visualLineContinued(line);this.size=this.rest?lineNo(lst(this.rest))-lineN+1:1;this.node=this.text=null;this.hidden=lineIsHidden(doc,line);}
function buildViewArray(cm,from,to){var array=[],nextPos;for(var pos=from;pos<to;pos=nextPos){var view=new LineView(cm.doc,getLine(cm.doc,pos),pos);nextPos=pos+view.size;array.push(view);}
return array;}
function regChange(cm,from,to,lendiff){if(from==null)from=cm.doc.first;if(to==null)to=cm.doc.first+cm.doc.size;if(!lendiff)lendiff=0;var display=cm.display;if(lendiff&&to<display.viewTo&&(display.updateLineNumbers==null||display.updateLineNumbers>from))
display.updateLineNumbers=from;cm.curOp.viewChanged=true;if(from>=display.viewTo){if(sawCollapsedSpans&&visualLineNo(cm.doc,from)<display.viewTo)
resetView(cm);}else if(to<=display.viewFrom){if(sawCollapsedSpans&&visualLineEndNo(cm.doc,to+lendiff)>display.viewFrom){resetView(cm);}else{display.viewFrom+=lendiff;display.viewTo+=lendiff;}}else if(from<=display.viewFrom&&to>=display.viewTo){resetView(cm);}else if(from<=display.viewFrom){var cut=viewCuttingPoint(cm,to,to+lendiff,1);if(cut){display.view=display.view.slice(cut.index);display.viewFrom=cut.lineN;display.viewTo+=lendiff;}else{resetView(cm);}}else if(to>=display.viewTo){var cut=viewCuttingPoint(cm,from,from,-1);if(cut){display.view=display.view.slice(0,cut.index);display.viewTo=cut.lineN;}else{resetView(cm);}}else{var cutTop=viewCuttingPoint(cm,from,from,-1);var cutBot=viewCuttingPoint(cm,to,to+lendiff,1);if(cutTop&&cutBot){display.view=display.view.slice(0,cutTop.index).concat(buildViewArray(cm,cutTop.lineN,cutBot.lineN)).concat(display.view.slice(cutBot.index));display.viewTo+=lendiff;}else{resetView(cm);}}
var ext=display.externalMeasured;if(ext){if(to<ext.lineN)
ext.lineN+=lendiff;else if(from<ext.lineN+ext.size)
display.externalMeasured=null;}}
function regLineChange(cm,line,type){cm.curOp.viewChanged=true;var display=cm.display,ext=cm.display.externalMeasured;if(ext&&line>=ext.lineN&&line<ext.lineN+ext.size)
display.externalMeasured=null;if(line<display.viewFrom||line>=display.viewTo)return;var lineView=display.view[findViewIndex(cm,line)];if(lineView.node==null)return;var arr=lineView.changes||(lineView.changes=[]);if(indexOf(arr,type)==-1)arr.push(type);}
function resetView(cm){cm.display.viewFrom=cm.display.viewTo=cm.doc.first;cm.display.view=[];cm.display.viewOffset=0;}
function findViewIndex(cm,n){if(n>=cm.display.viewTo)return null;n-=cm.display.viewFrom;if(n<0)return null;var view=cm.display.view;for(var i=0;i<view.length;i++){n-=view[i].size;if(n<0)return i;}}
function viewCuttingPoint(cm,oldN,newN,dir){var index=findViewIndex(cm,oldN),diff,view=cm.display.view;if(!sawCollapsedSpans||newN==cm.doc.first+cm.doc.size)
return{index:index,lineN:newN};for(var i=0,n=cm.display.viewFrom;i<index;i++)
n+=view[i].size;if(n!=oldN){if(dir>0){if(index==view.length-1)return null;diff=(n+view[index].size)-oldN;index++;}else{diff=n-oldN;}
oldN+=diff;newN+=diff;}
while(visualLineNo(cm.doc,newN)!=newN){if(index==(dir<0?0:view.length-1))return null;newN+=dir*view[index-(dir<0?1:0)].size;index+=dir;}
return{index:index,lineN:newN};}
function adjustView(cm,from,to){var display=cm.display,view=display.view;if(view.length==0||from>=display.viewTo||to<=display.viewFrom){display.view=buildViewArray(cm,from,to);display.viewFrom=from;}else{if(display.viewFrom>from)
display.view=buildViewArray(cm,from,display.viewFrom).concat(display.view);else if(display.viewFrom<from)
display.view=display.view.slice(findViewIndex(cm,from));display.viewFrom=from;if(display.viewTo<to)
display.view=display.view.concat(buildViewArray(cm,display.viewTo,to));else if(display.viewTo>to)
display.view=display.view.slice(0,findViewIndex(cm,to));}
display.viewTo=to;}
function countDirtyView(cm){var view=cm.display.view,dirty=0;for(var i=0;i<view.length;i++){var lineView=view[i];if(!lineView.hidden&&(!lineView.node||lineView.changes))++dirty;}
return dirty;}
function registerEventHandlers(cm){var d=cm.display;on(d.scroller,"mousedown",operation(cm,onMouseDown));if(ie&&ie_version<11)
on(d.scroller,"dblclick",operation(cm,function(e){if(signalDOMEvent(cm,e))return;var pos=posFromMouse(cm,e);if(!pos||clickInGutter(cm,e)||eventInWidget(cm.display,e))return;e_preventDefault(e);var word=cm.findWordAt(pos);extendSelection(cm.doc,word.anchor,word.head);}));else
on(d.scroller,"dblclick",function(e){signalDOMEvent(cm,e)||e_preventDefault(e);});if(!captureRightClick)on(d.scroller,"contextmenu",function(e){onContextMenu(cm,e);});var touchFinished,prevTouch={end:0};function finishTouch(){if(d.activeTouch){touchFinished=setTimeout(function(){d.activeTouch=null;},1000);prevTouch=d.activeTouch;prevTouch.end=+new Date;}};function isMouseLikeTouchEvent(e){if(e.touches.length!=1)return false;var touch=e.touches[0];return touch.radiusX<=1&&touch.radiusY<=1;}
function farAway(touch,other){if(other.left==null)return true;var dx=other.left-touch.left,dy=other.top-touch.top;return dx*dx+dy*dy>20*20;}
on(d.scroller,"touchstart",function(e){if(!signalDOMEvent(cm,e)&&!isMouseLikeTouchEvent(e)){clearTimeout(touchFinished);var now=+new Date;d.activeTouch={start:now,moved:false,prev:now-prevTouch.end<=300?prevTouch:null};if(e.touches.length==1){d.activeTouch.left=e.touches[0].pageX;d.activeTouch.top=e.touches[0].pageY;}}});on(d.scroller,"touchmove",function(){if(d.activeTouch)d.activeTouch.moved=true;});on(d.scroller,"touchend",function(e){var touch=d.activeTouch;if(touch&&!eventInWidget(d,e)&&touch.left!=null&&!touch.moved&&new Date-touch.start<300){var pos=cm.coordsChar(d.activeTouch,"page"),range;if(!touch.prev||farAway(touch,touch.prev))
range=new Range(pos,pos);else if(!touch.prev.prev||farAway(touch,touch.prev.prev))
range=cm.findWordAt(pos);else
range=new Range(Pos(pos.line,0),clipPos(cm.doc,Pos(pos.line+1,0)));cm.setSelection(range.anchor,range.head);cm.focus();e_preventDefault(e);}
finishTouch();});on(d.scroller,"touchcancel",finishTouch);on(d.scroller,"scroll",function(){if(d.scroller.clientHeight){setScrollTop(cm,d.scroller.scrollTop);setScrollLeft(cm,d.scroller.scrollLeft,true);signal(cm,"scroll",cm);}});on(d.scroller,"mousewheel",function(e){onScrollWheel(cm,e);});on(d.scroller,"DOMMouseScroll",function(e){onScrollWheel(cm,e);});on(d.wrapper,"scroll",function(){d.wrapper.scrollTop=d.wrapper.scrollLeft=0;});d.dragFunctions={enter:function(e){if(!signalDOMEvent(cm,e))e_stop(e);},over:function(e){if(!signalDOMEvent(cm,e)){onDragOver(cm,e);e_stop(e);}},start:function(e){onDragStart(cm,e);},drop:operation(cm,onDrop),leave:function(){clearDragCursor(cm);}};var inp=d.input.getField();on(inp,"keyup",function(e){onKeyUp.call(cm,e);});on(inp,"keydown",operation(cm,onKeyDown));on(inp,"keypress",operation(cm,onKeyPress));on(inp,"focus",bind(onFocus,cm));on(inp,"blur",bind(onBlur,cm));}
function dragDropChanged(cm,value,old){var wasOn=old&&old!=CodeMirror.Init;if(!value!=!wasOn){var funcs=cm.display.dragFunctions;var toggle=value?on:off;toggle(cm.display.scroller,"dragstart",funcs.start);toggle(cm.display.scroller,"dragenter",funcs.enter);toggle(cm.display.scroller,"dragover",funcs.over);toggle(cm.display.scroller,"dragleave",funcs.leave);toggle(cm.display.scroller,"drop",funcs.drop);}}
function onResize(cm){var d=cm.display;if(d.lastWrapHeight==d.wrapper.clientHeight&&d.lastWrapWidth==d.wrapper.clientWidth)
return;d.cachedCharWidth=d.cachedTextHeight=d.cachedPaddingH=null;d.scrollbarsClipped=false;cm.setSize();}
function eventInWidget(display,e){for(var n=e_target(e);n!=display.wrapper;n=n.parentNode){if(!n||(n.nodeType==1&&n.getAttribute("cm-ignore-events")=="true")||(n.parentNode==display.sizer&&n!=display.mover))
return true;}}
function posFromMouse(cm,e,liberal,forRect){var display=cm.display;if(!liberal&&e_target(e).getAttribute("cm-not-content")=="true")return null;var x,y,space=display.lineSpace.getBoundingClientRect();try{x=e.clientX-space.left;y=e.clientY-space.top;}
catch(e){return null;}
var coords=coordsChar(cm,x,y),line;if(forRect&&coords.xRel==1&&(line=getLine(cm.doc,coords.line).text).length==coords.ch){var colDiff=countColumn(line,line.length,cm.options.tabSize)-line.length;coords=Pos(coords.line,Math.max(0,Math.round((x-paddingH(cm.display).left)/charWidth(cm.display))-colDiff));}
return coords;}
function onMouseDown(e){var cm=this,display=cm.display;if(signalDOMEvent(cm,e)||display.activeTouch&&display.input.supportsTouch())return;display.shift=e.shiftKey;if(eventInWidget(display,e)){if(!webkit){display.scroller.draggable=false;setTimeout(function(){display.scroller.draggable=true;},100);}
return;}
if(clickInGutter(cm,e))return;var start=posFromMouse(cm,e);window.focus();switch(e_button(e)){case 1:if(cm.state.selectingText)
cm.state.selectingText(e);else if(start)
leftButtonDown(cm,e,start);else if(e_target(e)==display.scroller)
e_preventDefault(e);break;case 2:if(webkit)cm.state.lastMiddleDown=+new Date;if(start)extendSelection(cm.doc,start);setTimeout(function(){display.input.focus();},20);e_preventDefault(e);break;case 3:if(captureRightClick)onContextMenu(cm,e);else delayBlurEvent(cm);break;}}
var lastClick,lastDoubleClick;function leftButtonDown(cm,e,start){if(ie)setTimeout(bind(ensureFocus,cm),0);else cm.curOp.focus=activeElt();var now=+new Date,type;if(lastDoubleClick&&lastDoubleClick.time>now-400&&cmp(lastDoubleClick.pos,start)==0){type="triple";}else if(lastClick&&lastClick.time>now-400&&cmp(lastClick.pos,start)==0){type="double";lastDoubleClick={time:now,pos:start};}else{type="single";lastClick={time:now,pos:start};}
var sel=cm.doc.sel,modifier=mac?e.metaKey:e.ctrlKey,contained;if(cm.options.dragDrop&&dragAndDrop&&!cm.isReadOnly()&&type=="single"&&(contained=sel.contains(start))>-1&&(cmp((contained=sel.ranges[contained]).from(),start)<0||start.xRel>0)&&(cmp(contained.to(),start)>0||start.xRel<0))
leftButtonStartDrag(cm,e,start,modifier);else
leftButtonSelect(cm,e,start,type,modifier);}
function leftButtonStartDrag(cm,e,start,modifier){var display=cm.display,startTime=+new Date;var dragEnd=operation(cm,function(e2){if(webkit)display.scroller.draggable=false;cm.state.draggingText=false;off(document,"mouseup",dragEnd);off(display.scroller,"drop",dragEnd);if(Math.abs(e.clientX-e2.clientX)+Math.abs(e.clientY-e2.clientY)<10){e_preventDefault(e2);if(!modifier&&+new Date-200<startTime)
extendSelection(cm.doc,start);if(webkit||ie&&ie_version==9)
setTimeout(function(){document.body.focus();display.input.focus();},20);else
display.input.focus();}});if(webkit)display.scroller.draggable=true;cm.state.draggingText=dragEnd;if(display.scroller.dragDrop)display.scroller.dragDrop();on(document,"mouseup",dragEnd);on(display.scroller,"drop",dragEnd);}
function leftButtonSelect(cm,e,start,type,addNew){var display=cm.display,doc=cm.doc;e_preventDefault(e);var ourRange,ourIndex,startSel=doc.sel,ranges=startSel.ranges;if(addNew&&!e.shiftKey){ourIndex=doc.sel.contains(start);if(ourIndex>-1)
ourRange=ranges[ourIndex];else
ourRange=new Range(start,start);}else{ourRange=doc.sel.primary();ourIndex=doc.sel.primIndex;}
if(e.altKey){type="rect";if(!addNew)ourRange=new Range(start,start);start=posFromMouse(cm,e,true,true);ourIndex=-1;}else if(type=="double"){var word=cm.findWordAt(start);if(cm.display.shift||doc.extend)
ourRange=extendRange(doc,ourRange,word.anchor,word.head);else
ourRange=word;}else if(type=="triple"){var line=new Range(Pos(start.line,0),clipPos(doc,Pos(start.line+1,0)));if(cm.display.shift||doc.extend)
ourRange=extendRange(doc,ourRange,line.anchor,line.head);else
ourRange=line;}else{ourRange=extendRange(doc,ourRange,start);}
if(!addNew){ourIndex=0;setSelection(doc,new Selection([ourRange],0),sel_mouse);startSel=doc.sel;}else if(ourIndex==-1){ourIndex=ranges.length;setSelection(doc,normalizeSelection(ranges.concat([ourRange]),ourIndex),{scroll:false,origin:"*mouse"});}else if(ranges.length>1&&ranges[ourIndex].empty()&&type=="single"&&!e.shiftKey){setSelection(doc,normalizeSelection(ranges.slice(0,ourIndex).concat(ranges.slice(ourIndex+1)),0),{scroll:false,origin:"*mouse"});startSel=doc.sel;}else{replaceOneSelection(doc,ourIndex,ourRange,sel_mouse);}
var lastPos=start;function extendTo(pos){if(cmp(lastPos,pos)==0)return;lastPos=pos;if(type=="rect"){var ranges=[],tabSize=cm.options.tabSize;var startCol=countColumn(getLine(doc,start.line).text,start.ch,tabSize);var posCol=countColumn(getLine(doc,pos.line).text,pos.ch,tabSize);var left=Math.min(startCol,posCol),right=Math.max(startCol,posCol);for(var line=Math.min(start.line,pos.line),end=Math.min(cm.lastLine(),Math.max(start.line,pos.line));line<=end;line++){var text=getLine(doc,line).text,leftPos=findColumn(text,left,tabSize);if(left==right)
ranges.push(new Range(Pos(line,leftPos),Pos(line,leftPos)));else if(text.length>leftPos)
ranges.push(new Range(Pos(line,leftPos),Pos(line,findColumn(text,right,tabSize))));}
if(!ranges.length)ranges.push(new Range(start,start));setSelection(doc,normalizeSelection(startSel.ranges.slice(0,ourIndex).concat(ranges),ourIndex),{origin:"*mouse",scroll:false});cm.scrollIntoView(pos);}else{var oldRange=ourRange;var anchor=oldRange.anchor,head=pos;if(type!="single"){if(type=="double")
var range=cm.findWordAt(pos);else
var range=new Range(Pos(pos.line,0),clipPos(doc,Pos(pos.line+1,0)));if(cmp(range.anchor,anchor)>0){head=range.head;anchor=minPos(oldRange.from(),range.anchor);}else{head=range.anchor;anchor=maxPos(oldRange.to(),range.head);}}
var ranges=startSel.ranges.slice(0);ranges[ourIndex]=new Range(clipPos(doc,anchor),head);setSelection(doc,normalizeSelection(ranges,ourIndex),sel_mouse);}}
var editorSize=display.wrapper.getBoundingClientRect();var counter=0;function extend(e){var curCount=++counter;var cur=posFromMouse(cm,e,true,type=="rect");if(!cur)return;if(cmp(cur,lastPos)!=0){cm.curOp.focus=activeElt();extendTo(cur);var visible=visibleLines(display,doc);if(cur.line>=visible.to||cur.line<visible.from)
setTimeout(operation(cm,function(){if(counter==curCount)extend(e);}),150);}else{var outside=e.clientY<editorSize.top?-20:e.clientY>editorSize.bottom?20:0;if(outside)setTimeout(operation(cm,function(){if(counter!=curCount)return;display.scroller.scrollTop+=outside;extend(e);}),50);}}
function done(e){cm.state.selectingText=false;counter=Infinity;e_preventDefault(e);display.input.focus();off(document,"mousemove",move);off(document,"mouseup",up);doc.history.lastSelOrigin=null;}
var move=operation(cm,function(e){if(!e_button(e))done(e);else extend(e);});var up=operation(cm,done);cm.state.selectingText=up;on(document,"mousemove",move);on(document,"mouseup",up);}
function gutterEvent(cm,e,type,prevent){try{var mX=e.clientX,mY=e.clientY;}
catch(e){return false;}
if(mX>=Math.floor(cm.display.gutters.getBoundingClientRect().right))return false;if(prevent)e_preventDefault(e);var display=cm.display;var lineBox=display.lineDiv.getBoundingClientRect();if(mY>lineBox.bottom||!hasHandler(cm,type))return e_defaultPrevented(e);mY-=lineBox.top-display.viewOffset;for(var i=0;i<cm.options.gutters.length;++i){var g=display.gutters.childNodes[i];if(g&&g.getBoundingClientRect().right>=mX){var line=lineAtHeight(cm.doc,mY);var gutter=cm.options.gutters[i];signal(cm,type,cm,line,gutter,e);return e_defaultPrevented(e);}}}
function clickInGutter(cm,e){return gutterEvent(cm,e,"gutterClick",true);}
var lastDrop=0;function onDrop(e){var cm=this;clearDragCursor(cm);if(signalDOMEvent(cm,e)||eventInWidget(cm.display,e))
return;e_preventDefault(e);if(ie)lastDrop=+new Date;var pos=posFromMouse(cm,e,true),files=e.dataTransfer.files;if(!pos||cm.isReadOnly())return;if(files&&files.length&&window.FileReader&&window.File){var n=files.length,text=Array(n),read=0;var loadFile=function(file,i){if(cm.options.allowDropFileTypes&&indexOf(cm.options.allowDropFileTypes,file.type)==-1)
return;var reader=new FileReader;reader.onload=operation(cm,function(){var content=reader.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(content))content="";text[i]=content;if(++read==n){pos=clipPos(cm.doc,pos);var change={from:pos,to:pos,text:cm.doc.splitLines(text.join(cm.doc.lineSeparator())),origin:"paste"};makeChange(cm.doc,change);setSelectionReplaceHistory(cm.doc,simpleSelection(pos,changeEnd(change)));}});reader.readAsText(file);};for(var i=0;i<n;++i)loadFile(files[i],i);}else{if(cm.state.draggingText&&cm.doc.sel.contains(pos)>-1){cm.state.draggingText(e);setTimeout(function(){cm.display.input.focus();},20);return;}
try{var text=e.dataTransfer.getData("Text");if(text){if(cm.state.draggingText&&!(mac?e.altKey:e.ctrlKey))
var selected=cm.listSelections();setSelectionNoUndo(cm.doc,simpleSelection(pos,pos));if(selected)for(var i=0;i<selected.length;++i)
replaceRange(cm.doc,"",selected[i].anchor,selected[i].head,"drag");cm.replaceSelection(text,"around","paste");cm.display.input.focus();}}
catch(e){}}}
function onDragStart(cm,e){if(ie&&(!cm.state.draggingText||+new Date-lastDrop<100)){e_stop(e);return;}
if(signalDOMEvent(cm,e)||eventInWidget(cm.display,e))return;e.dataTransfer.setData("Text",cm.getSelection());if(e.dataTransfer.setDragImage&&!safari){var img=elt("img",null,null,"position: fixed; left: 0; top: 0;");img.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";if(presto){img.width=img.height=1;cm.display.wrapper.appendChild(img);img._top=img.offsetTop;}
e.dataTransfer.setDragImage(img,0,0);if(presto)img.parentNode.removeChild(img);}}
function onDragOver(cm,e){var pos=posFromMouse(cm,e);if(!pos)return;var frag=document.createDocumentFragment();drawSelectionCursor(cm,pos,frag);if(!cm.display.dragCursor){cm.display.dragCursor=elt("div",null,"CodeMirror-cursors CodeMirror-dragcursors");cm.display.lineSpace.insertBefore(cm.display.dragCursor,cm.display.cursorDiv);}
removeChildrenAndAdd(cm.display.dragCursor,frag);}
function clearDragCursor(cm){if(cm.display.dragCursor){cm.display.lineSpace.removeChild(cm.display.dragCursor);cm.display.dragCursor=null;}}
function setScrollTop(cm,val){if(Math.abs(cm.doc.scrollTop-val)<2)return;cm.doc.scrollTop=val;if(!gecko)updateDisplaySimple(cm,{top:val});if(cm.display.scroller.scrollTop!=val)cm.display.scroller.scrollTop=val;cm.display.scrollbars.setScrollTop(val);if(gecko)updateDisplaySimple(cm);startWorker(cm,100);}
function setScrollLeft(cm,val,isScroller){if(isScroller?val==cm.doc.scrollLeft:Math.abs(cm.doc.scrollLeft-val)<2)return;val=Math.min(val,cm.display.scroller.scrollWidth-cm.display.scroller.clientWidth);cm.doc.scrollLeft=val;alignHorizontally(cm);if(cm.display.scroller.scrollLeft!=val)cm.display.scroller.scrollLeft=val;cm.display.scrollbars.setScrollLeft(val);}
var wheelSamples=0,wheelPixelsPerUnit=null;if(ie)wheelPixelsPerUnit=-.53;else if(gecko)wheelPixelsPerUnit=15;else if(chrome)wheelPixelsPerUnit=-.7;else if(safari)wheelPixelsPerUnit=-1/3;var wheelEventDelta=function(e){var dx=e.wheelDeltaX,dy=e.wheelDeltaY;if(dx==null&&e.detail&&e.axis==e.HORIZONTAL_AXIS)dx=e.detail;if(dy==null&&e.detail&&e.axis==e.VERTICAL_AXIS)dy=e.detail;else if(dy==null)dy=e.wheelDelta;return{x:dx,y:dy};};CodeMirror.wheelEventPixels=function(e){var delta=wheelEventDelta(e);delta.x*=wheelPixelsPerUnit;delta.y*=wheelPixelsPerUnit;return delta;};function onScrollWheel(cm,e){var delta=wheelEventDelta(e),dx=delta.x,dy=delta.y;var display=cm.display,scroll=display.scroller;var canScrollX=scroll.scrollWidth>scroll.clientWidth;var canScrollY=scroll.scrollHeight>scroll.clientHeight;if(!(dx&&canScrollX||dy&&canScrollY))return;if(dy&&mac&&webkit){outer:for(var cur=e.target,view=display.view;cur!=scroll;cur=cur.parentNode){for(var i=0;i<view.length;i++){if(view[i].node==cur){cm.display.currentWheelTarget=cur;break outer;}}}}
if(dx&&!gecko&&!presto&&wheelPixelsPerUnit!=null){if(dy&&canScrollY)
setScrollTop(cm,Math.max(0,Math.min(scroll.scrollTop+dy*wheelPixelsPerUnit,scroll.scrollHeight-scroll.clientHeight)));setScrollLeft(cm,Math.max(0,Math.min(scroll.scrollLeft+dx*wheelPixelsPerUnit,scroll.scrollWidth-scroll.clientWidth)));if(!dy||(dy&&canScrollY))
e_preventDefault(e);display.wheelStartX=null;return;}
if(dy&&wheelPixelsPerUnit!=null){var pixels=dy*wheelPixelsPerUnit;var top=cm.doc.scrollTop,bot=top+display.wrapper.clientHeight;if(pixels<0)top=Math.max(0,top+pixels-50);else bot=Math.min(cm.doc.height,bot+pixels+50);updateDisplaySimple(cm,{top:top,bottom:bot});}
if(wheelSamples<20){if(display.wheelStartX==null){display.wheelStartX=scroll.scrollLeft;display.wheelStartY=scroll.scrollTop;display.wheelDX=dx;display.wheelDY=dy;setTimeout(function(){if(display.wheelStartX==null)return;var movedX=scroll.scrollLeft-display.wheelStartX;var movedY=scroll.scrollTop-display.wheelStartY;var sample=(movedY&&display.wheelDY&&movedY/display.wheelDY)||(movedX&&display.wheelDX&&movedX/display.wheelDX);display.wheelStartX=display.wheelStartY=null;if(!sample)return;wheelPixelsPerUnit=(wheelPixelsPerUnit*wheelSamples+sample)/(wheelSamples+1);++wheelSamples;},200);}else{display.wheelDX+=dx;display.wheelDY+=dy;}}}
function doHandleBinding(cm,bound,dropShift){if(typeof bound=="string"){bound=commands[bound];if(!bound)return false;}
cm.display.input.ensurePolled();var prevShift=cm.display.shift,done=false;try{if(cm.isReadOnly())cm.state.suppressEdits=true;if(dropShift)cm.display.shift=false;done=bound(cm)!=Pass;}finally{cm.display.shift=prevShift;cm.state.suppressEdits=false;}
return done;}
function lookupKeyForEditor(cm,name,handle){for(var i=0;i<cm.state.keyMaps.length;i++){var result=lookupKey(name,cm.state.keyMaps[i],handle,cm);if(result)return result;}
return(cm.options.extraKeys&&lookupKey(name,cm.options.extraKeys,handle,cm))||lookupKey(name,cm.options.keyMap,handle,cm);}
var stopSeq=new Delayed;function dispatchKey(cm,name,e,handle){var seq=cm.state.keySeq;if(seq){if(isModifierKey(name))return"handled";stopSeq.set(50,function(){if(cm.state.keySeq==seq){cm.state.keySeq=null;cm.display.input.reset();}});name=seq+" "+name;}
var result=lookupKeyForEditor(cm,name,handle);if(result=="multi")
cm.state.keySeq=name;if(result=="handled")
signalLater(cm,"keyHandled",cm,name,e);if(result=="handled"||result=="multi"){e_preventDefault(e);restartBlink(cm);}
if(seq&&!result&&/\'$/.test(name)){e_preventDefault(e);return true;}
return!!result;}
function handleKeyBinding(cm,e){var name=keyName(e,true);if(!name)return false;if(e.shiftKey&&!cm.state.keySeq){return dispatchKey(cm,"Shift-"+name,e,function(b){return doHandleBinding(cm,b,true);})||dispatchKey(cm,name,e,function(b){if(typeof b=="string"?/^go[A-Z]/.test(b):b.motion)
return doHandleBinding(cm,b);});}else{return dispatchKey(cm,name,e,function(b){return doHandleBinding(cm,b);});}}
function handleCharBinding(cm,e,ch){return dispatchKey(cm,"'"+ch+"'",e,function(b){return doHandleBinding(cm,b,true);});}
var lastStoppedKey=null;function onKeyDown(e){var cm=this;cm.curOp.focus=activeElt();if(signalDOMEvent(cm,e))return;if(ie&&ie_version<11&&e.keyCode==27)e.returnValue=false;var code=e.keyCode;cm.display.shift=code==16||e.shiftKey;var handled=handleKeyBinding(cm,e);if(presto){lastStoppedKey=handled?code:null;if(!handled&&code==88&&!hasCopyEvent&&(mac?e.metaKey:e.ctrlKey))
cm.replaceSelection("",null,"cut");}
if(code==18&&!/\bCodeMirror-crosshair\b/.test(cm.display.lineDiv.className))
showCrossHair(cm);}
function showCrossHair(cm){var lineDiv=cm.display.lineDiv;addClass(lineDiv,"CodeMirror-crosshair");function up(e){if(e.keyCode==18||!e.altKey){rmClass(lineDiv,"CodeMirror-crosshair");off(document,"keyup",up);off(document,"mouseover",up);}}
on(document,"keyup",up);on(document,"mouseover",up);}
function onKeyUp(e){if(e.keyCode==16)this.doc.sel.shift=false;signalDOMEvent(this,e);}
function onKeyPress(e){var cm=this;if(eventInWidget(cm.display,e)||signalDOMEvent(cm,e)||e.ctrlKey&&!e.altKey||mac&&e.metaKey)return;var keyCode=e.keyCode,charCode=e.charCode;if(presto&&keyCode==lastStoppedKey){lastStoppedKey=null;e_preventDefault(e);return;}
if((presto&&(!e.which||e.which<10))&&handleKeyBinding(cm,e))return;var ch=String.fromCharCode(charCode==null?keyCode:charCode);if(handleCharBinding(cm,e,ch))return;cm.display.input.onKeyPress(e);}
function delayBlurEvent(cm){cm.state.delayingBlurEvent=true;setTimeout(function(){if(cm.state.delayingBlurEvent){cm.state.delayingBlurEvent=false;onBlur(cm);}},100);}
function onFocus(cm){if(cm.state.delayingBlurEvent)cm.state.delayingBlurEvent=false;if(cm.options.readOnly=="nocursor")return;if(!cm.state.focused){signal(cm,"focus",cm);cm.state.focused=true;addClass(cm.display.wrapper,"CodeMirror-focused");if(!cm.curOp&&cm.display.selForContextMenu!=cm.doc.sel){cm.display.input.reset();if(webkit)setTimeout(function(){cm.display.input.reset(true);},20);}
cm.display.input.receivedFocus();}
restartBlink(cm);}
function onBlur(cm){if(cm.state.delayingBlurEvent)return;if(cm.state.focused){signal(cm,"blur",cm);cm.state.focused=false;rmClass(cm.display.wrapper,"CodeMirror-focused");}
clearInterval(cm.display.blinker);setTimeout(function(){if(!cm.state.focused)cm.display.shift=false;},150);}
function onContextMenu(cm,e){if(eventInWidget(cm.display,e)||contextMenuInGutter(cm,e))return;if(signalDOMEvent(cm,e,"contextmenu"))return;cm.display.input.onContextMenu(e);}
function contextMenuInGutter(cm,e){if(!hasHandler(cm,"gutterContextMenu"))return false;return gutterEvent(cm,e,"gutterContextMenu",false);}
var changeEnd=CodeMirror.changeEnd=function(change){if(!change.text)return change.to;return Pos(change.from.line+change.text.length-1,lst(change.text).length+(change.text.length==1?change.from.ch:0));};function adjustForChange(pos,change){if(cmp(pos,change.from)<0)return pos;if(cmp(pos,change.to)<=0)return changeEnd(change);var line=pos.line+change.text.length-(change.to.line-change.from.line)-1,ch=pos.ch;if(pos.line==change.to.line)ch+=changeEnd(change).ch-change.to.ch;return Pos(line,ch);}
function computeSelAfterChange(doc,change){var out=[];for(var i=0;i<doc.sel.ranges.length;i++){var range=doc.sel.ranges[i];out.push(new Range(adjustForChange(range.anchor,change),adjustForChange(range.head,change)));}
return normalizeSelection(out,doc.sel.primIndex);}
function offsetPos(pos,old,nw){if(pos.line==old.line)
return Pos(nw.line,pos.ch-old.ch+nw.ch);else
return Pos(nw.line+(pos.line-old.line),pos.ch);}
function computeReplacedSel(doc,changes,hint){var out=[];var oldPrev=Pos(doc.first,0),newPrev=oldPrev;for(var i=0;i<changes.length;i++){var change=changes[i];var from=offsetPos(change.from,oldPrev,newPrev);var to=offsetPos(changeEnd(change),oldPrev,newPrev);oldPrev=change.to;newPrev=to;if(hint=="around"){var range=doc.sel.ranges[i],inv=cmp(range.head,range.anchor)<0;out[i]=new Range(inv?to:from,inv?from:to);}else{out[i]=new Range(from,from);}}
return new Selection(out,doc.sel.primIndex);}
function filterChange(doc,change,update){var obj={canceled:false,from:change.from,to:change.to,text:change.text,origin:change.origin,cancel:function(){this.canceled=true;}};if(update)obj.update=function(from,to,text,origin){if(from)this.from=clipPos(doc,from);if(to)this.to=clipPos(doc,to);if(text)this.text=text;if(origin!==undefined)this.origin=origin;};signal(doc,"beforeChange",doc,obj);if(doc.cm)signal(doc.cm,"beforeChange",doc.cm,obj);if(obj.canceled)return null;return{from:obj.from,to:obj.to,text:obj.text,origin:obj.origin};}
function makeChange(doc,change,ignoreReadOnly){if(doc.cm){if(!doc.cm.curOp)return operation(doc.cm,makeChange)(doc,change,ignoreReadOnly);if(doc.cm.state.suppressEdits)return;}
if(hasHandler(doc,"beforeChange")||doc.cm&&hasHandler(doc.cm,"beforeChange")){change=filterChange(doc,change,true);if(!change)return;}
var split=sawReadOnlySpans&&!ignoreReadOnly&&removeReadOnlyRanges(doc,change.from,change.to);if(split){for(var i=split.length-1;i>=0;--i)
makeChangeInner(doc,{from:split[i].from,to:split[i].to,text:i?[""]:change.text});}else{makeChangeInner(doc,change);}}
function makeChangeInner(doc,change){if(change.text.length==1&&change.text[0]==""&&cmp(change.from,change.to)==0)return;var selAfter=computeSelAfterChange(doc,change);addChangeToHistory(doc,change,selAfter,doc.cm?doc.cm.curOp.id:NaN);makeChangeSingleDoc(doc,change,selAfter,stretchSpansOverChange(doc,change));var rebased=[];linkedDocs(doc,function(doc,sharedHist){if(!sharedHist&&indexOf(rebased,doc.history)==-1){rebaseHist(doc.history,change);rebased.push(doc.history);}
makeChangeSingleDoc(doc,change,null,stretchSpansOverChange(doc,change));});}
function makeChangeFromHistory(doc,type,allowSelectionOnly){if(doc.cm&&doc.cm.state.suppressEdits)return;var hist=doc.history,event,selAfter=doc.sel;var source=type=="undo"?hist.done:hist.undone,dest=type=="undo"?hist.undone:hist.done;for(var i=0;i<source.length;i++){event=source[i];if(allowSelectionOnly?event.ranges&&!event.equals(doc.sel):!event.ranges)
break;}
if(i==source.length)return;hist.lastOrigin=hist.lastSelOrigin=null;for(;;){event=source.pop();if(event.ranges){pushSelectionToHistory(event,dest);if(allowSelectionOnly&&!event.equals(doc.sel)){setSelection(doc,event,{clearRedo:false});return;}
selAfter=event;}
else break;}
var antiChanges=[];pushSelectionToHistory(selAfter,dest);dest.push({changes:antiChanges,generation:hist.generation});hist.generation=event.generation||++hist.maxGeneration;var filter=hasHandler(doc,"beforeChange")||doc.cm&&hasHandler(doc.cm,"beforeChange");for(var i=event.changes.length-1;i>=0;--i){var change=event.changes[i];change.origin=type;if(filter&&!filterChange(doc,change,false)){source.length=0;return;}
antiChanges.push(historyChangeFromChange(doc,change));var after=i?computeSelAfterChange(doc,change):lst(source);makeChangeSingleDoc(doc,change,after,mergeOldSpans(doc,change));if(!i&&doc.cm)doc.cm.scrollIntoView({from:change.from,to:changeEnd(change)});var rebased=[];linkedDocs(doc,function(doc,sharedHist){if(!sharedHist&&indexOf(rebased,doc.history)==-1){rebaseHist(doc.history,change);rebased.push(doc.history);}
makeChangeSingleDoc(doc,change,null,mergeOldSpans(doc,change));});}}
function shiftDoc(doc,distance){if(distance==0)return;doc.first+=distance;doc.sel=new Selection(map(doc.sel.ranges,function(range){return new Range(Pos(range.anchor.line+distance,range.anchor.ch),Pos(range.head.line+distance,range.head.ch));}),doc.sel.primIndex);if(doc.cm){regChange(doc.cm,doc.first,doc.first-distance,distance);for(var d=doc.cm.display,l=d.viewFrom;l<d.viewTo;l++)
regLineChange(doc.cm,l,"gutter");}}
function makeChangeSingleDoc(doc,change,selAfter,spans){if(doc.cm&&!doc.cm.curOp)
return operation(doc.cm,makeChangeSingleDoc)(doc,change,selAfter,spans);if(change.to.line<doc.first){shiftDoc(doc,change.text.length-1-(change.to.line-change.from.line));return;}
if(change.from.line>doc.lastLine())return;if(change.from.line<doc.first){var shift=change.text.length-1-(doc.first-change.from.line);shiftDoc(doc,shift);change={from:Pos(doc.first,0),to:Pos(change.to.line+shift,change.to.ch),text:[lst(change.text)],origin:change.origin};}
var last=doc.lastLine();if(change.to.line>last){change={from:change.from,to:Pos(last,getLine(doc,last).text.length),text:[change.text[0]],origin:change.origin};}
change.removed=getBetween(doc,change.from,change.to);if(!selAfter)selAfter=computeSelAfterChange(doc,change);if(doc.cm)makeChangeSingleDocInEditor(doc.cm,change,spans);else updateDoc(doc,change,spans);setSelectionNoUndo(doc,selAfter,sel_dontScroll);}
function makeChangeSingleDocInEditor(cm,change,spans){var doc=cm.doc,display=cm.display,from=change.from,to=change.to;var recomputeMaxLength=false,checkWidthStart=from.line;if(!cm.options.lineWrapping){checkWidthStart=lineNo(visualLine(getLine(doc,from.line)));doc.iter(checkWidthStart,to.line+1,function(line){if(line==display.maxLine){recomputeMaxLength=true;return true;}});}
if(doc.sel.contains(change.from,change.to)>-1)
signalCursorActivity(cm);updateDoc(doc,change,spans,estimateHeight(cm));if(!cm.options.lineWrapping){doc.iter(checkWidthStart,from.line+change.text.length,function(line){var len=lineLength(line);if(len>display.maxLineLength){display.maxLine=line;display.maxLineLength=len;display.maxLineChanged=true;recomputeMaxLength=false;}});if(recomputeMaxLength)cm.curOp.updateMaxLine=true;}
doc.frontier=Math.min(doc.frontier,from.line);startWorker(cm,400);var lendiff=change.text.length-(to.line-from.line)-1;if(change.full)
regChange(cm);else if(from.line==to.line&&change.text.length==1&&!isWholeLineUpdate(cm.doc,change))
regLineChange(cm,from.line,"text");else
regChange(cm,from.line,to.line+1,lendiff);var changesHandler=hasHandler(cm,"changes"),changeHandler=hasHandler(cm,"change");if(changeHandler||changesHandler){var obj={from:from,to:to,text:change.text,removed:change.removed,origin:change.origin};if(changeHandler)signalLater(cm,"change",cm,obj);if(changesHandler)(cm.curOp.changeObjs||(cm.curOp.changeObjs=[])).push(obj);}
cm.display.selForContextMenu=null;}
function replaceRange(doc,code,from,to,origin){if(!to)to=from;if(cmp(to,from)<0){var tmp=to;to=from;from=tmp;}
if(typeof code=="string")code=doc.splitLines(code);makeChange(doc,{from:from,to:to,text:code,origin:origin});}
function maybeScrollWindow(cm,coords){if(signalDOMEvent(cm,"scrollCursorIntoView"))return;var display=cm.display,box=display.sizer.getBoundingClientRect(),doScroll=null;if(coords.top+box.top<0)doScroll=true;else if(coords.bottom+box.top>(window.innerHeight||document.documentElement.clientHeight))doScroll=false;if(doScroll!=null&&!phantom){var scrollNode=elt("div","\u200b",null,"position: absolute; top: "+
(coords.top-display.viewOffset-paddingTop(cm.display))+"px; height: "+
(coords.bottom-coords.top+scrollGap(cm)+display.barHeight)+"px; left: "+
coords.left+"px; width: 2px;");cm.display.lineSpace.appendChild(scrollNode);scrollNode.scrollIntoView(doScroll);cm.display.lineSpace.removeChild(scrollNode);}}
function scrollPosIntoView(cm,pos,end,margin){if(margin==null)margin=0;for(var limit=0;limit<5;limit++){var changed=false,coords=cursorCoords(cm,pos);var endCoords=!end||end==pos?coords:cursorCoords(cm,end);var scrollPos=calculateScrollPos(cm,Math.min(coords.left,endCoords.left),Math.min(coords.top,endCoords.top)-margin,Math.max(coords.left,endCoords.left),Math.max(coords.bottom,endCoords.bottom)+margin);var startTop=cm.doc.scrollTop,startLeft=cm.doc.scrollLeft;if(scrollPos.scrollTop!=null){setScrollTop(cm,scrollPos.scrollTop);if(Math.abs(cm.doc.scrollTop-startTop)>1)changed=true;}
if(scrollPos.scrollLeft!=null){setScrollLeft(cm,scrollPos.scrollLeft);if(Math.abs(cm.doc.scrollLeft-startLeft)>1)changed=true;}
if(!changed)break;}
return coords;}
function scrollIntoView(cm,x1,y1,x2,y2){var scrollPos=calculateScrollPos(cm,x1,y1,x2,y2);if(scrollPos.scrollTop!=null)setScrollTop(cm,scrollPos.scrollTop);if(scrollPos.scrollLeft!=null)setScrollLeft(cm,scrollPos.scrollLeft);}
function calculateScrollPos(cm,x1,y1,x2,y2){var display=cm.display,snapMargin=textHeight(cm.display);if(y1<0)y1=0;var screentop=cm.curOp&&cm.curOp.scrollTop!=null?cm.curOp.scrollTop:display.scroller.scrollTop;var screen=displayHeight(cm),result={};if(y2-y1>screen)y2=y1+screen;var docBottom=cm.doc.height+paddingVert(display);var atTop=y1<snapMargin,atBottom=y2>docBottom-snapMargin;if(y1<screentop){result.scrollTop=atTop?0:y1;}else if(y2>screentop+screen){var newTop=Math.min(y1,(atBottom?docBottom:y2)-screen);if(newTop!=screentop)result.scrollTop=newTop;}
var screenleft=cm.curOp&&cm.curOp.scrollLeft!=null?cm.curOp.scrollLeft:display.scroller.scrollLeft;var screenw=displayWidth(cm)-(cm.options.fixedGutter?display.gutters.offsetWidth:0);var tooWide=x2-x1>screenw;if(tooWide)x2=x1+screenw;if(x1<10)
result.scrollLeft=0;else if(x1<screenleft)
result.scrollLeft=Math.max(0,x1-(tooWide?0:10));else if(x2>screenw+screenleft-3)
result.scrollLeft=x2+(tooWide?0:10)-screenw;return result;}
function addToScrollPos(cm,left,top){if(left!=null||top!=null)resolveScrollToPos(cm);if(left!=null)
cm.curOp.scrollLeft=(cm.curOp.scrollLeft==null?cm.doc.scrollLeft:cm.curOp.scrollLeft)+left;if(top!=null)
cm.curOp.scrollTop=(cm.curOp.scrollTop==null?cm.doc.scrollTop:cm.curOp.scrollTop)+top;}
function ensureCursorVisible(cm){resolveScrollToPos(cm);var cur=cm.getCursor(),from=cur,to=cur;if(!cm.options.lineWrapping){from=cur.ch?Pos(cur.line,cur.ch-1):cur;to=Pos(cur.line,cur.ch+1);}
cm.curOp.scrollToPos={from:from,to:to,margin:cm.options.cursorScrollMargin,isCursor:true};}
function resolveScrollToPos(cm){var range=cm.curOp.scrollToPos;if(range){cm.curOp.scrollToPos=null;var from=estimateCoords(cm,range.from),to=estimateCoords(cm,range.to);var sPos=calculateScrollPos(cm,Math.min(from.left,to.left),Math.min(from.top,to.top)-range.margin,Math.max(from.right,to.right),Math.max(from.bottom,to.bottom)+range.margin);cm.scrollTo(sPos.scrollLeft,sPos.scrollTop);}}
function indentLine(cm,n,how,aggressive){var doc=cm.doc,state;if(how==null)how="add";if(how=="smart"){if(!doc.mode.indent)how="prev";else state=getStateBefore(cm,n);}
var tabSize=cm.options.tabSize;var line=getLine(doc,n),curSpace=countColumn(line.text,null,tabSize);if(line.stateAfter)line.stateAfter=null;var curSpaceString=line.text.match(/^\s*/)[0],indentation;if(!aggressive&&!/\S/.test(line.text)){indentation=0;how="not";}else if(how=="smart"){indentation=doc.mode.indent(state,line.text.slice(curSpaceString.length),line.text);if(indentation==Pass||indentation>150){if(!aggressive)return;how="prev";}}
if(how=="prev"){if(n>doc.first)indentation=countColumn(getLine(doc,n-1).text,null,tabSize);else indentation=0;}else if(how=="add"){indentation=curSpace+cm.options.indentUnit;}else if(how=="subtract"){indentation=curSpace-cm.options.indentUnit;}else if(typeof how=="number"){indentation=curSpace+how;}
indentation=Math.max(0,indentation);var indentString="",pos=0;if(cm.options.indentWithTabs)
for(var i=Math.floor(indentation/tabSize);i;--i){pos+=tabSize;indentString+="\t";}
if(pos<indentation)indentString+=spaceStr(indentation-pos);if(indentString!=curSpaceString){replaceRange(doc,indentString,Pos(n,0),Pos(n,curSpaceString.length),"+input");line.stateAfter=null;return true;}else{for(var i=0;i<doc.sel.ranges.length;i++){var range=doc.sel.ranges[i];if(range.head.line==n&&range.head.ch<curSpaceString.length){var pos=Pos(n,curSpaceString.length);replaceOneSelection(doc,i,new Range(pos,pos));break;}}}}
function changeLine(doc,handle,changeType,op){var no=handle,line=handle;if(typeof handle=="number")line=getLine(doc,clipLine(doc,handle));else no=lineNo(handle);if(no==null)return null;if(op(line,no)&&doc.cm)regLineChange(doc.cm,no,changeType);return line;}
function deleteNearSelection(cm,compute){var ranges=cm.doc.sel.ranges,kill=[];for(var i=0;i<ranges.length;i++){var toKill=compute(ranges[i]);while(kill.length&&cmp(toKill.from,lst(kill).to)<=0){var replaced=kill.pop();if(cmp(replaced.from,toKill.from)<0){toKill.from=replaced.from;break;}}
kill.push(toKill);}
runInOp(cm,function(){for(var i=kill.length-1;i>=0;i--)
replaceRange(cm.doc,"",kill[i].from,kill[i].to,"+delete");ensureCursorVisible(cm);});}
function findPosH(doc,pos,dir,unit,visually){var line=pos.line,ch=pos.ch,origDir=dir;var lineObj=getLine(doc,line);function findNextLine(){var l=line+dir;if(l<doc.first||l>=doc.first+doc.size)return false
line=l;return lineObj=getLine(doc,l);}
function moveOnce(boundToLine){var next=(visually?moveVisually:moveLogically)(lineObj,ch,dir,true);if(next==null){if(!boundToLine&&findNextLine()){if(visually)ch=(dir<0?lineRight:lineLeft)(lineObj);else ch=dir<0?lineObj.text.length:0;}else return false}else ch=next;return true;}
if(unit=="char"){moveOnce()}else if(unit=="column"){moveOnce(true)}else if(unit=="word"||unit=="group"){var sawType=null,group=unit=="group";var helper=doc.cm&&doc.cm.getHelper(pos,"wordChars");for(var first=true;;first=false){if(dir<0&&!moveOnce(!first))break;var cur=lineObj.text.charAt(ch)||"\n";var type=isWordChar(cur,helper)?"w":group&&cur=="\n"?"n":!group||/\s/.test(cur)?null:"p";if(group&&!first&&!type)type="s";if(sawType&&sawType!=type){if(dir<0){dir=1;moveOnce();}
break;}
if(type)sawType=type;if(dir>0&&!moveOnce(!first))break;}}
var result=skipAtomic(doc,Pos(line,ch),pos,origDir,true);if(!cmp(pos,result))result.hitSide=true;return result;}
function findPosV(cm,pos,dir,unit){var doc=cm.doc,x=pos.left,y;if(unit=="page"){var pageSize=Math.min(cm.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);y=pos.top+dir*(pageSize-(dir<0?1.5:.5)*textHeight(cm.display));}else if(unit=="line"){y=dir>0?pos.bottom+3:pos.top-3;}
for(;;){var target=coordsChar(cm,x,y);if(!target.outside)break;if(dir<0?y<=0:y>=doc.height){target.hitSide=true;break;}
y+=dir*5;}
return target;}
CodeMirror.prototype={constructor:CodeMirror,focus:function(){window.focus();this.display.input.focus();},setOption:function(option,value){var options=this.options,old=options[option];if(options[option]==value&&option!="mode")return;options[option]=value;if(optionHandlers.hasOwnProperty(option))
operation(this,optionHandlers[option])(this,value,old);},getOption:function(option){return this.options[option];},getDoc:function(){return this.doc;},addKeyMap:function(map,bottom){this.state.keyMaps[bottom?"push":"unshift"](getKeyMap(map));},removeKeyMap:function(map){var maps=this.state.keyMaps;for(var i=0;i<maps.length;++i)
if(maps[i]==map||maps[i].name==map){maps.splice(i,1);return true;}},addOverlay:methodOp(function(spec,options){var mode=spec.token?spec:CodeMirror.getMode(this.options,spec);if(mode.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:mode,modeSpec:spec,opaque:options&&options.opaque});this.state.modeGen++;regChange(this);}),removeOverlay:methodOp(function(spec){var overlays=this.state.overlays;for(var i=0;i<overlays.length;++i){var cur=overlays[i].modeSpec;if(cur==spec||typeof spec=="string"&&cur.name==spec){overlays.splice(i,1);this.state.modeGen++;regChange(this);return;}}}),indentLine:methodOp(function(n,dir,aggressive){if(typeof dir!="string"&&typeof dir!="number"){if(dir==null)dir=this.options.smartIndent?"smart":"prev";else dir=dir?"add":"subtract";}
if(isLine(this.doc,n))indentLine(this,n,dir,aggressive);}),indentSelection:methodOp(function(how){var ranges=this.doc.sel.ranges,end=-1;for(var i=0;i<ranges.length;i++){var range=ranges[i];if(!range.empty()){var from=range.from(),to=range.to();var start=Math.max(end,from.line);end=Math.min(this.lastLine(),to.line-(to.ch?0:1))+1;for(var j=start;j<end;++j)
indentLine(this,j,how);var newRanges=this.doc.sel.ranges;if(from.ch==0&&ranges.length==newRanges.length&&newRanges[i].from().ch>0)
replaceOneSelection(this.doc,i,new Range(from,newRanges[i].to()),sel_dontScroll);}else if(range.head.line>end){indentLine(this,range.head.line,how,true);end=range.head.line;if(i==this.doc.sel.primIndex)ensureCursorVisible(this);}}}),getTokenAt:function(pos,precise){return takeToken(this,pos,precise);},getLineTokens:function(line,precise){return takeToken(this,Pos(line),precise,true);},getTokenTypeAt:function(pos){pos=clipPos(this.doc,pos);var styles=getLineStyles(this,getLine(this.doc,pos.line));var before=0,after=(styles.length-1)/2,ch=pos.ch;var type;if(ch==0)type=styles[2];else for(;;){var mid=(before+after)>>1;if((mid?styles[mid*2-1]:0)>=ch)after=mid;else if(styles[mid*2+1]<ch)before=mid+1;else{type=styles[mid*2+2];break;}}
var cut=type?type.indexOf("cm-overlay "):-1;return cut<0?type:cut==0?null:type.slice(0,cut-1);},getModeAt:function(pos){var mode=this.doc.mode;if(!mode.innerMode)return mode;return CodeMirror.innerMode(mode,this.getTokenAt(pos).state).mode;},getHelper:function(pos,type){return this.getHelpers(pos,type)[0];},getHelpers:function(pos,type){var found=[];if(!helpers.hasOwnProperty(type))return found;var help=helpers[type],mode=this.getModeAt(pos);if(typeof mode[type]=="string"){if(help[mode[type]])found.push(help[mode[type]]);}else if(mode[type]){for(var i=0;i<mode[type].length;i++){var val=help[mode[type][i]];if(val)found.push(val);}}else if(mode.helperType&&help[mode.helperType]){found.push(help[mode.helperType]);}else if(help[mode.name]){found.push(help[mode.name]);}
for(var i=0;i<help._global.length;i++){var cur=help._global[i];if(cur.pred(mode,this)&&indexOf(found,cur.val)==-1)
found.push(cur.val);}
return found;},getStateAfter:function(line,precise){var doc=this.doc;line=clipLine(doc,line==null?doc.first+doc.size-1:line);return getStateBefore(this,line+1,precise);},cursorCoords:function(start,mode){var pos,range=this.doc.sel.primary();if(start==null)pos=range.head;else if(typeof start=="object")pos=clipPos(this.doc,start);else pos=start?range.from():range.to();return cursorCoords(this,pos,mode||"page");},charCoords:function(pos,mode){return charCoords(this,clipPos(this.doc,pos),mode||"page");},coordsChar:function(coords,mode){coords=fromCoordSystem(this,coords,mode||"page");return coordsChar(this,coords.left,coords.top);},lineAtHeight:function(height,mode){height=fromCoordSystem(this,{top:height,left:0},mode||"page").top;return lineAtHeight(this.doc,height+this.display.viewOffset);},heightAtLine:function(line,mode){var end=false,lineObj;if(typeof line=="number"){var last=this.doc.first+this.doc.size-1;if(line<this.doc.first)line=this.doc.first;else if(line>last){line=last;end=true;}
lineObj=getLine(this.doc,line);}else{lineObj=line;}
return intoCoordSystem(this,lineObj,{top:0,left:0},mode||"page").top+
(end?this.doc.height-heightAtLine(lineObj):0);},defaultTextHeight:function(){return textHeight(this.display);},defaultCharWidth:function(){return charWidth(this.display);},setGutterMarker:methodOp(function(line,gutterID,value){return changeLine(this.doc,line,"gutter",function(line){var markers=line.gutterMarkers||(line.gutterMarkers={});markers[gutterID]=value;if(!value&&isEmpty(markers))line.gutterMarkers=null;return true;});}),clearGutter:methodOp(function(gutterID){var cm=this,doc=cm.doc,i=doc.first;doc.iter(function(line){if(line.gutterMarkers&&line.gutterMarkers[gutterID]){line.gutterMarkers[gutterID]=null;regLineChange(cm,i,"gutter");if(isEmpty(line.gutterMarkers))line.gutterMarkers=null;}
++i;});}),lineInfo:function(line){if(typeof line=="number"){if(!isLine(this.doc,line))return null;var n=line;line=getLine(this.doc,line);if(!line)return null;}else{var n=lineNo(line);if(n==null)return null;}
return{line:n,handle:line,text:line.text,gutterMarkers:line.gutterMarkers,textClass:line.textClass,bgClass:line.bgClass,wrapClass:line.wrapClass,widgets:line.widgets};},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo};},addWidget:function(pos,node,scroll,vert,horiz){var display=this.display;pos=cursorCoords(this,clipPos(this.doc,pos));var top=pos.bottom,left=pos.left;node.style.position="absolute";node.setAttribute("cm-ignore-events","true");this.display.input.setUneditable(node);display.sizer.appendChild(node);if(vert=="over"){top=pos.top;}else if(vert=="above"||vert=="near"){var vspace=Math.max(display.wrapper.clientHeight,this.doc.height),hspace=Math.max(display.sizer.clientWidth,display.lineSpace.clientWidth);if((vert=='above'||pos.bottom+node.offsetHeight>vspace)&&pos.top>node.offsetHeight)
top=pos.top-node.offsetHeight;else if(pos.bottom+node.offsetHeight<=vspace)
top=pos.bottom;if(left+node.offsetWidth>hspace)
left=hspace-node.offsetWidth;}
node.style.top=top+"px";node.style.left=node.style.right="";if(horiz=="right"){left=display.sizer.clientWidth-node.offsetWidth;node.style.right="0px";}else{if(horiz=="left")left=0;else if(horiz=="middle")left=(display.sizer.clientWidth-node.offsetWidth)/2;node.style.left=left+"px";}
if(scroll)
scrollIntoView(this,left,top,left+node.offsetWidth,top+node.offsetHeight);},triggerOnKeyDown:methodOp(onKeyDown),triggerOnKeyPress:methodOp(onKeyPress),triggerOnKeyUp:onKeyUp,execCommand:function(cmd){if(commands.hasOwnProperty(cmd))
return commands[cmd].call(null,this);},triggerElectric:methodOp(function(text){triggerElectric(this,text);}),findPosH:function(from,amount,unit,visually){var dir=1;if(amount<0){dir=-1;amount=-amount;}
for(var i=0,cur=clipPos(this.doc,from);i<amount;++i){cur=findPosH(this.doc,cur,dir,unit,visually);if(cur.hitSide)break;}
return cur;},moveH:methodOp(function(dir,unit){var cm=this;cm.extendSelectionsBy(function(range){if(cm.display.shift||cm.doc.extend||range.empty())
return findPosH(cm.doc,range.head,dir,unit,cm.options.rtlMoveVisually);else
return dir<0?range.from():range.to();},sel_move);}),deleteH:methodOp(function(dir,unit){var sel=this.doc.sel,doc=this.doc;if(sel.somethingSelected())
doc.replaceSelection("",null,"+delete");else
deleteNearSelection(this,function(range){var other=findPosH(doc,range.head,dir,unit,false);return dir<0?{from:other,to:range.head}:{from:range.head,to:other};});}),findPosV:function(from,amount,unit,goalColumn){var dir=1,x=goalColumn;if(amount<0){dir=-1;amount=-amount;}
for(var i=0,cur=clipPos(this.doc,from);i<amount;++i){var coords=cursorCoords(this,cur,"div");if(x==null)x=coords.left;else coords.left=x;cur=findPosV(this,coords,dir,unit);if(cur.hitSide)break;}
return cur;},moveV:methodOp(function(dir,unit){var cm=this,doc=this.doc,goals=[];var collapse=!cm.display.shift&&!doc.extend&&doc.sel.somethingSelected();doc.extendSelectionsBy(function(range){if(collapse)
return dir<0?range.from():range.to();var headPos=cursorCoords(cm,range.head,"div");if(range.goalColumn!=null)headPos.left=range.goalColumn;goals.push(headPos.left);var pos=findPosV(cm,headPos,dir,unit);if(unit=="page"&&range==doc.sel.primary())
addToScrollPos(cm,null,charCoords(cm,pos,"div").top-headPos.top);return pos;},sel_move);if(goals.length)for(var i=0;i<doc.sel.ranges.length;i++)
doc.sel.ranges[i].goalColumn=goals[i];}),findWordAt:function(pos){var doc=this.doc,line=getLine(doc,pos.line).text;var start=pos.ch,end=pos.ch;if(line){var helper=this.getHelper(pos,"wordChars");if((pos.xRel<0||end==line.length)&&start)--start;else++end;var startChar=line.charAt(start);var check=isWordChar(startChar,helper)?function(ch){return isWordChar(ch,helper);}:/\s/.test(startChar)?function(ch){return/\s/.test(ch);}:function(ch){return!/\s/.test(ch)&&!isWordChar(ch);};while(start>0&&check(line.charAt(start-1)))--start;while(end<line.length&&check(line.charAt(end)))++end;}
return new Range(Pos(pos.line,start),Pos(pos.line,end));},toggleOverwrite:function(value){if(value!=null&&value==this.state.overwrite)return;if(this.state.overwrite=!this.state.overwrite)
addClass(this.display.cursorDiv,"CodeMirror-overwrite");else
rmClass(this.display.cursorDiv,"CodeMirror-overwrite");signal(this,"overwriteToggle",this,this.state.overwrite);},hasFocus:function(){return this.display.input.getField()==activeElt();},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit);},scrollTo:methodOp(function(x,y){if(x!=null||y!=null)resolveScrollToPos(this);if(x!=null)this.curOp.scrollLeft=x;if(y!=null)this.curOp.scrollTop=y;}),getScrollInfo:function(){var scroller=this.display.scroller;return{left:scroller.scrollLeft,top:scroller.scrollTop,height:scroller.scrollHeight-scrollGap(this)-this.display.barHeight,width:scroller.scrollWidth-scrollGap(this)-this.display.barWidth,clientHeight:displayHeight(this),clientWidth:displayWidth(this)};},scrollIntoView:methodOp(function(range,margin){if(range==null){range={from:this.doc.sel.primary().head,to:null};if(margin==null)margin=this.options.cursorScrollMargin;}else if(typeof range=="number"){range={from:Pos(range,0),to:null};}else if(range.from==null){range={from:range,to:null};}
if(!range.to)range.to=range.from;range.margin=margin||0;if(range.from.line!=null){resolveScrollToPos(this);this.curOp.scrollToPos=range;}else{var sPos=calculateScrollPos(this,Math.min(range.from.left,range.to.left),Math.min(range.from.top,range.to.top)-range.margin,Math.max(range.from.right,range.to.right),Math.max(range.from.bottom,range.to.bottom)+range.margin);this.scrollTo(sPos.scrollLeft,sPos.scrollTop);}}),setSize:methodOp(function(width,height){var cm=this;function interpret(val){return typeof val=="number"||/^\d+$/.test(String(val))?val+"px":val;}
if(width!=null)cm.display.wrapper.style.width=interpret(width);if(height!=null)cm.display.wrapper.style.height=interpret(height);if(cm.options.lineWrapping)clearLineMeasurementCache(this);var lineNo=cm.display.viewFrom;cm.doc.iter(lineNo,cm.display.viewTo,function(line){if(line.widgets)for(var i=0;i<line.widgets.length;i++)
if(line.widgets[i].noHScroll){regLineChange(cm,lineNo,"widget");break;}
++lineNo;});cm.curOp.forceUpdate=true;signal(cm,"refresh",this);}),operation:function(f){return runInOp(this,f);},refresh:methodOp(function(){var oldHeight=this.display.cachedTextHeight;regChange(this);this.curOp.forceUpdate=true;clearCaches(this);this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop);updateGutterSpace(this);if(oldHeight==null||Math.abs(oldHeight-textHeight(this.display))>.5)
estimateLineHeights(this);signal(this,"refresh",this);}),swapDoc:methodOp(function(doc){var old=this.doc;old.cm=null;attachDoc(this,doc);clearCaches(this);this.display.input.reset();this.scrollTo(doc.scrollLeft,doc.scrollTop);this.curOp.forceScroll=true;signalLater(this,"swapDoc",this,old);return old;}),getInputField:function(){return this.display.input.getField();},getWrapperElement:function(){return this.display.wrapper;},getScrollerElement:function(){return this.display.scroller;},getGutterElement:function(){return this.display.gutters;}};eventMixin(CodeMirror);var defaults=CodeMirror.defaults={};var optionHandlers=CodeMirror.optionHandlers={};function option(name,deflt,handle,notOnInit){CodeMirror.defaults[name]=deflt;if(handle)optionHandlers[name]=notOnInit?function(cm,val,old){if(old!=Init)handle(cm,val,old);}:handle;}
var Init=CodeMirror.Init={toString:function(){return"CodeMirror.Init";}};option("value","",function(cm,val){cm.setValue(val);},true);option("mode",null,function(cm,val){cm.doc.modeOption=val;loadMode(cm);},true);option("indentUnit",2,loadMode,true);option("indentWithTabs",false);option("smartIndent",true);option("tabSize",4,function(cm){resetModeState(cm);clearCaches(cm);regChange(cm);},true);option("lineSeparator",null,function(cm,val){cm.doc.lineSep=val;if(!val)return;var newBreaks=[],lineNo=cm.doc.first;cm.doc.iter(function(line){for(var pos=0;;){var found=line.text.indexOf(val,pos);if(found==-1)break;pos=found+val.length;newBreaks.push(Pos(lineNo,found));}
lineNo++;});for(var i=newBreaks.length-1;i>=0;i--)
replaceRange(cm.doc,val,newBreaks[i],Pos(newBreaks[i].line,newBreaks[i].ch+val.length))});option("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(cm,val,old){cm.state.specialChars=new RegExp(val.source+(val.test("\t")?"":"|\t"),"g");if(old!=CodeMirror.Init)cm.refresh();});option("specialCharPlaceholder",defaultSpecialCharPlaceholder,function(cm){cm.refresh();},true);option("electricChars",true);option("inputStyle",mobile?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor");},true);option("rtlMoveVisually",!windows);option("wholeLineUpdateBefore",true);option("theme","default",function(cm){themeChanged(cm);guttersChanged(cm);},true);option("keyMap","default",function(cm,val,old){var next=getKeyMap(val);var prev=old!=CodeMirror.Init&&getKeyMap(old);if(prev&&prev.detach)prev.detach(cm,next);if(next.attach)next.attach(cm,prev||null);});option("extraKeys",null);option("lineWrapping",false,wrappingChanged,true);option("gutters",[],function(cm){setGuttersForLineNumbers(cm.options);guttersChanged(cm);},true);option("fixedGutter",true,function(cm,val){cm.display.gutters.style.left=val?compensateForHScroll(cm.display)+"px":"0";cm.refresh();},true);option("coverGutterNextToScrollbar",false,function(cm){updateScrollbars(cm);},true);option("scrollbarStyle","native",function(cm){initScrollbars(cm);updateScrollbars(cm);cm.display.scrollbars.setScrollTop(cm.doc.scrollTop);cm.display.scrollbars.setScrollLeft(cm.doc.scrollLeft);},true);option("lineNumbers",false,function(cm){setGuttersForLineNumbers(cm.options);guttersChanged(cm);},true);option("firstLineNumber",1,guttersChanged,true);option("lineNumberFormatter",function(integer){return integer;},guttersChanged,true);option("showCursorWhenSelecting",false,updateSelection,true);option("resetSelectionOnContextMenu",true);option("lineWiseCopyCut",true);option("readOnly",false,function(cm,val){if(val=="nocursor"){onBlur(cm);cm.display.input.blur();cm.display.disabled=true;}else{cm.display.disabled=false;}
cm.display.input.readOnlyChanged(val)});option("disableInput",false,function(cm,val){if(!val)cm.display.input.reset();},true);option("dragDrop",true,dragDropChanged);option("allowDropFileTypes",null);option("cursorBlinkRate",530);option("cursorScrollMargin",0);option("cursorHeight",1,updateSelection,true);option("singleCursorHeightPerLine",true,updateSelection,true);option("workTime",100);option("workDelay",100);option("flattenSpans",true,resetModeState,true);option("addModeClass",false,resetModeState,true);option("pollInterval",100);option("undoDepth",200,function(cm,val){cm.doc.history.undoDepth=val;});option("historyEventDelay",1250);option("viewportMargin",10,function(cm){cm.refresh();},true);option("maxHighlightLength",10000,resetModeState,true);option("moveInputWithCursor",true,function(cm,val){if(!val)cm.display.input.resetPosition();});option("tabindex",null,function(cm,val){cm.display.input.getField().tabIndex=val||"";});option("autofocus",null);var modes=CodeMirror.modes={},mimeModes=CodeMirror.mimeModes={};CodeMirror.defineMode=function(name,mode){if(!CodeMirror.defaults.mode&&name!="null")CodeMirror.defaults.mode=name;if(arguments.length>2)
mode.dependencies=Array.prototype.slice.call(arguments,2);modes[name]=mode;};CodeMirror.defineMIME=function(mime,spec){mimeModes[mime]=spec;};CodeMirror.resolveMode=function(spec){if(typeof spec=="string"&&mimeModes.hasOwnProperty(spec)){spec=mimeModes[spec];}else if(spec&&typeof spec.name=="string"&&mimeModes.hasOwnProperty(spec.name)){var found=mimeModes[spec.name];if(typeof found=="string")found={name:found};spec=createObj(found,spec);spec.name=found.name;}else if(typeof spec=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(spec)){return CodeMirror.resolveMode("application/xml");}
if(typeof spec=="string")return{name:spec};else return spec||{name:"null"};};CodeMirror.getMode=function(options,spec){var spec=CodeMirror.resolveMode(spec);var mfactory=modes[spec.name];if(!mfactory)return CodeMirror.getMode(options,"text/plain");var modeObj=mfactory(options,spec);if(modeExtensions.hasOwnProperty(spec.name)){var exts=modeExtensions[spec.name];for(var prop in exts){if(!exts.hasOwnProperty(prop))continue;if(modeObj.hasOwnProperty(prop))modeObj["_"+prop]=modeObj[prop];modeObj[prop]=exts[prop];}}
modeObj.name=spec.name;if(spec.helperType)modeObj.helperType=spec.helperType;if(spec.modeProps)for(var prop in spec.modeProps)
modeObj[prop]=spec.modeProps[prop];return modeObj;};CodeMirror.defineMode("null",function(){return{token:function(stream){stream.skipToEnd();}};});CodeMirror.defineMIME("text/plain","null");var modeExtensions=CodeMirror.modeExtensions={};CodeMirror.extendMode=function(mode,properties){var exts=modeExtensions.hasOwnProperty(mode)?modeExtensions[mode]:(modeExtensions[mode]={});copyObj(properties,exts);};CodeMirror.defineExtension=function(name,func){CodeMirror.prototype[name]=func;};CodeMirror.defineDocExtension=function(name,func){Doc.prototype[name]=func;};CodeMirror.defineOption=option;var initHooks=[];CodeMirror.defineInitHook=function(f){initHooks.push(f);};var helpers=CodeMirror.helpers={};CodeMirror.registerHelper=function(type,name,value){if(!helpers.hasOwnProperty(type))helpers[type]=CodeMirror[type]={_global:[]};helpers[type][name]=value;};CodeMirror.registerGlobalHelper=function(type,name,predicate,value){CodeMirror.registerHelper(type,name,value);helpers[type]._global.push({pred:predicate,val:value});};var copyState=CodeMirror.copyState=function(mode,state){if(state===true)return state;if(mode.copyState)return mode.copyState(state);var nstate={};for(var n in state){var val=state[n];if(val instanceof Array)val=val.concat([]);nstate[n]=val;}
return nstate;};var startState=CodeMirror.startState=function(mode,a1,a2){return mode.startState?mode.startState(a1,a2):true;};CodeMirror.innerMode=function(mode,state){while(mode.innerMode){var info=mode.innerMode(state);if(!info||info.mode==mode)break;state=info.state;mode=info.mode;}
return info||{mode:mode,state:state};};var commands=CodeMirror.commands={selectAll:function(cm){cm.setSelection(Pos(cm.firstLine(),0),Pos(cm.lastLine()),sel_dontScroll);},singleSelection:function(cm){cm.setSelection(cm.getCursor("anchor"),cm.getCursor("head"),sel_dontScroll);},killLine:function(cm){deleteNearSelection(cm,function(range){if(range.empty()){var len=getLine(cm.doc,range.head.line).text.length;if(range.head.ch==len&&range.head.line<cm.lastLine())
return{from:range.head,to:Pos(range.head.line+1,0)};else
return{from:range.head,to:Pos(range.head.line,len)};}else{return{from:range.from(),to:range.to()};}});},deleteLine:function(cm){deleteNearSelection(cm,function(range){return{from:Pos(range.from().line,0),to:clipPos(cm.doc,Pos(range.to().line+1,0))};});},delLineLeft:function(cm){deleteNearSelection(cm,function(range){return{from:Pos(range.from().line,0),to:range.from()};});},delWrappedLineLeft:function(cm){deleteNearSelection(cm,function(range){var top=cm.charCoords(range.head,"div").top+5;var leftPos=cm.coordsChar({left:0,top:top},"div");return{from:leftPos,to:range.from()};});},delWrappedLineRight:function(cm){deleteNearSelection(cm,function(range){var top=cm.charCoords(range.head,"div").top+5;var rightPos=cm.coordsChar({left:cm.display.lineDiv.offsetWidth+100,top:top},"div");return{from:range.from(),to:rightPos};});},undo:function(cm){cm.undo();},redo:function(cm){cm.redo();},undoSelection:function(cm){cm.undoSelection();},redoSelection:function(cm){cm.redoSelection();},goDocStart:function(cm){cm.extendSelection(Pos(cm.firstLine(),0));},goDocEnd:function(cm){cm.extendSelection(Pos(cm.lastLine()));},goLineStart:function(cm){cm.extendSelectionsBy(function(range){return lineStart(cm,range.head.line);},{origin:"+move",bias:1});},goLineStartSmart:function(cm){cm.extendSelectionsBy(function(range){return lineStartSmart(cm,range.head);},{origin:"+move",bias:1});},goLineEnd:function(cm){cm.extendSelectionsBy(function(range){return lineEnd(cm,range.head.line);},{origin:"+move",bias:-1});},goLineRight:function(cm){cm.extendSelectionsBy(function(range){var top=cm.charCoords(range.head,"div").top+5;return cm.coordsChar({left:cm.display.lineDiv.offsetWidth+100,top:top},"div");},sel_move);},goLineLeft:function(cm){cm.extendSelectionsBy(function(range){var top=cm.charCoords(range.head,"div").top+5;return cm.coordsChar({left:0,top:top},"div");},sel_move);},goLineLeftSmart:function(cm){cm.extendSelectionsBy(function(range){var top=cm.charCoords(range.head,"div").top+5;var pos=cm.coordsChar({left:0,top:top},"div");if(pos.ch<cm.getLine(pos.line).search(/\S/))return lineStartSmart(cm,range.head);return pos;},sel_move);},goLineUp:function(cm){cm.moveV(-1,"line");},goLineDown:function(cm){cm.moveV(1,"line");},goPageUp:function(cm){cm.moveV(-1,"page");},goPageDown:function(cm){cm.moveV(1,"page");},goCharLeft:function(cm){cm.moveH(-1,"char");},goCharRight:function(cm){cm.moveH(1,"char");},goColumnLeft:function(cm){cm.moveH(-1,"column");},goColumnRight:function(cm){cm.moveH(1,"column");},goWordLeft:function(cm){cm.moveH(-1,"word");},goGroupRight:function(cm){cm.moveH(1,"group");},goGroupLeft:function(cm){cm.moveH(-1,"group");},goWordRight:function(cm){cm.moveH(1,"word");},delCharBefore:function(cm){cm.deleteH(-1,"char");},delCharAfter:function(cm){cm.deleteH(1,"char");},delWordBefore:function(cm){cm.deleteH(-1,"word");},delWordAfter:function(cm){cm.deleteH(1,"word");},delGroupBefore:function(cm){cm.deleteH(-1,"group");},delGroupAfter:function(cm){cm.deleteH(1,"group");},indentAuto:function(cm){cm.indentSelection("smart");},indentMore:function(cm){cm.indentSelection("add");},indentLess:function(cm){cm.indentSelection("subtract");},insertTab:function(cm){cm.replaceSelection("\t");},insertSoftTab:function(cm){var spaces=[],ranges=cm.listSelections(),tabSize=cm.options.tabSize;for(var i=0;i<ranges.length;i++){var pos=ranges[i].from();var col=countColumn(cm.getLine(pos.line),pos.ch,tabSize);spaces.push(new Array(tabSize-col%tabSize+1).join(" "));}
cm.replaceSelections(spaces);},defaultTab:function(cm){if(cm.somethingSelected())cm.indentSelection("add");else cm.execCommand("insertTab");},transposeChars:function(cm){runInOp(cm,function(){var ranges=cm.listSelections(),newSel=[];for(var i=0;i<ranges.length;i++){var cur=ranges[i].head,line=getLine(cm.doc,cur.line).text;if(line){if(cur.ch==line.length)cur=new Pos(cur.line,cur.ch-1);if(cur.ch>0){cur=new Pos(cur.line,cur.ch+1);cm.replaceRange(line.charAt(cur.ch-1)+line.charAt(cur.ch-2),Pos(cur.line,cur.ch-2),cur,"+transpose");}else if(cur.line>cm.doc.first){var prev=getLine(cm.doc,cur.line-1).text;if(prev)
cm.replaceRange(line.charAt(0)+cm.doc.lineSeparator()+
prev.charAt(prev.length-1),Pos(cur.line-1,prev.length-1),Pos(cur.line,1),"+transpose");}}
newSel.push(new Range(cur,cur));}
cm.setSelections(newSel);});},newlineAndIndent:function(cm){runInOp(cm,function(){var len=cm.listSelections().length;for(var i=0;i<len;i++){var range=cm.listSelections()[i];cm.replaceRange(cm.doc.lineSeparator(),range.anchor,range.head,"+input");cm.indentLine(range.from().line+1,null,true);}
ensureCursorVisible(cm);});},toggleOverwrite:function(cm){cm.toggleOverwrite();}};var keyMap=CodeMirror.keyMap={};keyMap.basic={"Left":"goCharLeft","Right":"goCharRight","Up":"goLineUp","Down":"goLineDown","End":"goLineEnd","Home":"goLineStartSmart","PageUp":"goPageUp","PageDown":"goPageDown","Delete":"delCharAfter","Backspace":"delCharBefore","Shift-Backspace":"delCharBefore","Tab":"defaultTab","Shift-Tab":"indentAuto","Enter":"newlineAndIndent","Insert":"toggleOverwrite","Esc":"singleSelection"};keyMap.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"};keyMap.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};keyMap.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]};keyMap["default"]=mac?keyMap.macDefault:keyMap.pcDefault;function normalizeKeyName(name){var parts=name.split(/-(?!$)/),name=parts[parts.length-1];var alt,ctrl,shift,cmd;for(var i=0;i<parts.length-1;i++){var mod=parts[i];if(/^(cmd|meta|m)$/i.test(mod))cmd=true;else if(/^a(lt)?$/i.test(mod))alt=true;else if(/^(c|ctrl|control)$/i.test(mod))ctrl=true;else if(/^s(hift)$/i.test(mod))shift=true;else throw new Error("Unrecognized modifier name: "+mod);}
if(alt)name="Alt-"+name;if(ctrl)name="Ctrl-"+name;if(cmd)name="Cmd-"+name;if(shift)name="Shift-"+name;return name;}
CodeMirror.normalizeKeyMap=function(keymap){var copy={};for(var keyname in keymap)if(keymap.hasOwnProperty(keyname)){var value=keymap[keyname];if(/^(name|fallthrough|(de|at)tach)$/.test(keyname))continue;if(value=="..."){delete keymap[keyname];continue;}
var keys=map(keyname.split(" "),normalizeKeyName);for(var i=0;i<keys.length;i++){var val,name;if(i==keys.length-1){name=keys.join(" ");val=value;}else{name=keys.slice(0,i+1).join(" ");val="...";}
var prev=copy[name];if(!prev)copy[name]=val;else if(prev!=val)throw new Error("Inconsistent bindings for "+name);}
delete keymap[keyname];}
for(var prop in copy)keymap[prop]=copy[prop];return keymap;};var lookupKey=CodeMirror.lookupKey=function(key,map,handle,context){map=getKeyMap(map);var found=map.call?map.call(key,context):map[key];if(found===false)return"nothing";if(found==="...")return"multi";if(found!=null&&handle(found))return"handled";if(map.fallthrough){if(Object.prototype.toString.call(map.fallthrough)!="[object Array]")
return lookupKey(key,map.fallthrough,handle,context);for(var i=0;i<map.fallthrough.length;i++){var result=lookupKey(key,map.fallthrough[i],handle,context);if(result)return result;}}};var isModifierKey=CodeMirror.isModifierKey=function(value){var name=typeof value=="string"?value:keyNames[value.keyCode];return name=="Ctrl"||name=="Alt"||name=="Shift"||name=="Mod";};var keyName=CodeMirror.keyName=function(event,noShift){if(presto&&event.keyCode==34&&event["char"])return false;var base=keyNames[event.keyCode],name=base;if(name==null||event.altGraphKey)return false;if(event.altKey&&base!="Alt")name="Alt-"+name;if((flipCtrlCmd?event.metaKey:event.ctrlKey)&&base!="Ctrl")name="Ctrl-"+name;if((flipCtrlCmd?event.ctrlKey:event.metaKey)&&base!="Cmd")name="Cmd-"+name;if(!noShift&&event.shiftKey&&base!="Shift")name="Shift-"+name;return name;};function getKeyMap(val){return typeof val=="string"?keyMap[val]:val;}
CodeMirror.fromTextArea=function(textarea,options){options=options?copyObj(options):{};options.value=textarea.value;if(!options.tabindex&&textarea.tabIndex)
options.tabindex=textarea.tabIndex;if(!options.placeholder&&textarea.placeholder)
options.placeholder=textarea.placeholder;if(options.autofocus==null){var hasFocus=activeElt();options.autofocus=hasFocus==textarea||textarea.getAttribute("autofocus")!=null&&hasFocus==document.body;}
function save(){textarea.value=cm.getValue();}
if(textarea.form){on(textarea.form,"submit",save);if(!options.leaveSubmitMethodAlone){var form=textarea.form,realSubmit=form.submit;try{var wrappedSubmit=form.submit=function(){save();form.submit=realSubmit;form.submit();form.submit=wrappedSubmit;};}catch(e){}}}
options.finishInit=function(cm){cm.save=save;cm.getTextArea=function(){return textarea;};cm.toTextArea=function(){cm.toTextArea=isNaN;save();textarea.parentNode.removeChild(cm.getWrapperElement());textarea.style.display="";if(textarea.form){off(textarea.form,"submit",save);if(typeof textarea.form.submit=="function")
textarea.form.submit=realSubmit;}};};textarea.style.display="none";var cm=CodeMirror(function(node){textarea.parentNode.insertBefore(node,textarea.nextSibling);},options);return cm;};var StringStream=CodeMirror.StringStream=function(string,tabSize){this.pos=this.start=0;this.string=string;this.tabSize=tabSize||8;this.lastColumnPos=this.lastColumnValue=0;this.lineStart=0;};StringStream.prototype={eol:function(){return this.pos>=this.string.length;},sol:function(){return this.pos==this.lineStart;},peek:function(){return this.string.charAt(this.pos)||undefined;},next:function(){if(this.pos<this.string.length)
return this.string.charAt(this.pos++);},eat:function(match){var ch=this.string.charAt(this.pos);if(typeof match=="string")var ok=ch==match;else var ok=ch&&(match.test?match.test(ch):match(ch));if(ok){++this.pos;return ch;}},eatWhile:function(match){var start=this.pos;while(this.eat(match)){}
return this.pos>start;},eatSpace:function(){var start=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos)))++this.pos;return this.pos>start;},skipToEnd:function(){this.pos=this.string.length;},skipTo:function(ch){var found=this.string.indexOf(ch,this.pos);if(found>-1){this.pos=found;return true;}},backUp:function(n){this.pos-=n;},column:function(){if(this.lastColumnPos<this.start){this.lastColumnValue=countColumn(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue);this.lastColumnPos=this.start;}
return this.lastColumnValue-(this.lineStart?countColumn(this.string,this.lineStart,this.tabSize):0);},indentation:function(){return countColumn(this.string,null,this.tabSize)-
(this.lineStart?countColumn(this.string,this.lineStart,this.tabSize):0);},match:function(pattern,consume,caseInsensitive){if(typeof pattern=="string"){var cased=function(str){return caseInsensitive?str.toLowerCase():str;};var substr=this.string.substr(this.pos,pattern.length);if(cased(substr)==cased(pattern)){if(consume!==false)this.pos+=pattern.length;return true;}}else{var match=this.string.slice(this.pos).match(pattern);if(match&&match.index>0)return null;if(match&&consume!==false)this.pos+=match[0].length;return match;}},current:function(){return this.string.slice(this.start,this.pos);},hideFirstChars:function(n,inner){this.lineStart+=n;try{return inner();}
finally{this.lineStart-=n;}}};var nextMarkerId=0;var TextMarker=CodeMirror.TextMarker=function(doc,type){this.lines=[];this.type=type;this.doc=doc;this.id=++nextMarkerId;};eventMixin(TextMarker);TextMarker.prototype.clear=function(){if(this.explicitlyCleared)return;var cm=this.doc.cm,withOp=cm&&!cm.curOp;if(withOp)startOperation(cm);if(hasHandler(this,"clear")){var found=this.find();if(found)signalLater(this,"clear",found.from,found.to);}
var min=null,max=null;for(var i=0;i<this.lines.length;++i){var line=this.lines[i];var span=getMarkedSpanFor(line.markedSpans,this);if(cm&&!this.collapsed)regLineChange(cm,lineNo(line),"text");else if(cm){if(span.to!=null)max=lineNo(line);if(span.from!=null)min=lineNo(line);}
line.markedSpans=removeMarkedSpan(line.markedSpans,span);if(span.from==null&&this.collapsed&&!lineIsHidden(this.doc,line)&&cm)
updateLineHeight(line,textHeight(cm.display));}
if(cm&&this.collapsed&&!cm.options.lineWrapping)for(var i=0;i<this.lines.length;++i){var visual=visualLine(this.lines[i]),len=lineLength(visual);if(len>cm.display.maxLineLength){cm.display.maxLine=visual;cm.display.maxLineLength=len;cm.display.maxLineChanged=true;}}
if(min!=null&&cm&&this.collapsed)regChange(cm,min,max+1);this.lines.length=0;this.explicitlyCleared=true;if(this.atomic&&this.doc.cantEdit){this.doc.cantEdit=false;if(cm)reCheckSelection(cm.doc);}
if(cm)signalLater(cm,"markerCleared",cm,this);if(withOp)endOperation(cm);if(this.parent)this.parent.clear();};TextMarker.prototype.find=function(side,lineObj){if(side==null&&this.type=="bookmark")side=1;var from,to;for(var i=0;i<this.lines.length;++i){var line=this.lines[i];var span=getMarkedSpanFor(line.markedSpans,this);if(span.from!=null){from=Pos(lineObj?line:lineNo(line),span.from);if(side==-1)return from;}
if(span.to!=null){to=Pos(lineObj?line:lineNo(line),span.to);if(side==1)return to;}}
return from&&{from:from,to:to};};TextMarker.prototype.changed=function(){var pos=this.find(-1,true),widget=this,cm=this.doc.cm;if(!pos||!cm)return;runInOp(cm,function(){var line=pos.line,lineN=lineNo(pos.line);var view=findViewForLine(cm,lineN);if(view){clearLineMeasurementCacheFor(view);cm.curOp.selectionChanged=cm.curOp.forceUpdate=true;}
cm.curOp.updateMaxLine=true;if(!lineIsHidden(widget.doc,line)&&widget.height!=null){var oldHeight=widget.height;widget.height=null;var dHeight=widgetHeight(widget)-oldHeight;if(dHeight)
updateLineHeight(line,line.height+dHeight);}});};TextMarker.prototype.attachLine=function(line){if(!this.lines.length&&this.doc.cm){var op=this.doc.cm.curOp;if(!op.maybeHiddenMarkers||indexOf(op.maybeHiddenMarkers,this)==-1)
(op.maybeUnhiddenMarkers||(op.maybeUnhiddenMarkers=[])).push(this);}
this.lines.push(line);};TextMarker.prototype.detachLine=function(line){this.lines.splice(indexOf(this.lines,line),1);if(!this.lines.length&&this.doc.cm){var op=this.doc.cm.curOp;(op.maybeHiddenMarkers||(op.maybeHiddenMarkers=[])).push(this);}};var nextMarkerId=0;function markText(doc,from,to,options,type){if(options&&options.shared)return markTextShared(doc,from,to,options,type);if(doc.cm&&!doc.cm.curOp)return operation(doc.cm,markText)(doc,from,to,options,type);var marker=new TextMarker(doc,type),diff=cmp(from,to);if(options)copyObj(options,marker,false);if(diff>0||diff==0&&marker.clearWhenEmpty!==false)
return marker;if(marker.replacedWith){marker.collapsed=true;marker.widgetNode=elt("span",[marker.replacedWith],"CodeMirror-widget");if(!options.handleMouseEvents)marker.widgetNode.setAttribute("cm-ignore-events","true");if(options.insertLeft)marker.widgetNode.insertLeft=true;}
if(marker.collapsed){if(conflictingCollapsedRange(doc,from.line,from,to,marker)||from.line!=to.line&&conflictingCollapsedRange(doc,to.line,from,to,marker))
throw new Error("Inserting collapsed marker partially overlapping an existing one");sawCollapsedSpans=true;}
if(marker.addToHistory)
addChangeToHistory(doc,{from:from,to:to,origin:"markText"},doc.sel,NaN);var curLine=from.line,cm=doc.cm,updateMaxLine;doc.iter(curLine,to.line+1,function(line){if(cm&&marker.collapsed&&!cm.options.lineWrapping&&visualLine(line)==cm.display.maxLine)
updateMaxLine=true;if(marker.collapsed&&curLine!=from.line)updateLineHeight(line,0);addMarkedSpan(line,new MarkedSpan(marker,curLine==from.line?from.ch:null,curLine==to.line?to.ch:null));++curLine;});if(marker.collapsed)doc.iter(from.line,to.line+1,function(line){if(lineIsHidden(doc,line))updateLineHeight(line,0);});if(marker.clearOnEnter)on(marker,"beforeCursorEnter",function(){marker.clear();});if(marker.readOnly){sawReadOnlySpans=true;if(doc.history.done.length||doc.history.undone.length)
doc.clearHistory();}
if(marker.collapsed){marker.id=++nextMarkerId;marker.atomic=true;}
if(cm){if(updateMaxLine)cm.curOp.updateMaxLine=true;if(marker.collapsed)
regChange(cm,from.line,to.line+1);else if(marker.className||marker.title||marker.startStyle||marker.endStyle||marker.css)
for(var i=from.line;i<=to.line;i++)regLineChange(cm,i,"text");if(marker.atomic)reCheckSelection(cm.doc);signalLater(cm,"markerAdded",cm,marker);}
return marker;}
var SharedTextMarker=CodeMirror.SharedTextMarker=function(markers,primary){this.markers=markers;this.primary=primary;for(var i=0;i<markers.length;++i)
markers[i].parent=this;};eventMixin(SharedTextMarker);SharedTextMarker.prototype.clear=function(){if(this.explicitlyCleared)return;this.explicitlyCleared=true;for(var i=0;i<this.markers.length;++i)
this.markers[i].clear();signalLater(this,"clear");};SharedTextMarker.prototype.find=function(side,lineObj){return this.primary.find(side,lineObj);};function markTextShared(doc,from,to,options,type){options=copyObj(options);options.shared=false;var markers=[markText(doc,from,to,options,type)],primary=markers[0];var widget=options.widgetNode;linkedDocs(doc,function(doc){if(widget)options.widgetNode=widget.cloneNode(true);markers.push(markText(doc,clipPos(doc,from),clipPos(doc,to),options,type));for(var i=0;i<doc.linked.length;++i)
if(doc.linked[i].isParent)return;primary=lst(markers);});return new SharedTextMarker(markers,primary);}
function findSharedMarkers(doc){return doc.findMarks(Pos(doc.first,0),doc.clipPos(Pos(doc.lastLine())),function(m){return m.parent;});}
function copySharedMarkers(doc,markers){for(var i=0;i<markers.length;i++){var marker=markers[i],pos=marker.find();var mFrom=doc.clipPos(pos.from),mTo=doc.clipPos(pos.to);if(cmp(mFrom,mTo)){var subMark=markText(doc,mFrom,mTo,marker.primary,marker.primary.type);marker.markers.push(subMark);subMark.parent=marker;}}}
function detachSharedMarkers(markers){for(var i=0;i<markers.length;i++){var marker=markers[i],linked=[marker.primary.doc];;linkedDocs(marker.primary.doc,function(d){linked.push(d);});for(var j=0;j<marker.markers.length;j++){var subMarker=marker.markers[j];if(indexOf(linked,subMarker.doc)==-1){subMarker.parent=null;marker.markers.splice(j--,1);}}}}
function MarkedSpan(marker,from,to){this.marker=marker;this.from=from;this.to=to;}
function getMarkedSpanFor(spans,marker){if(spans)for(var i=0;i<spans.length;++i){var span=spans[i];if(span.marker==marker)return span;}}
function removeMarkedSpan(spans,span){for(var r,i=0;i<spans.length;++i)
if(spans[i]!=span)(r||(r=[])).push(spans[i]);return r;}
function addMarkedSpan(line,span){line.markedSpans=line.markedSpans?line.markedSpans.concat([span]):[span];span.marker.attachLine(line);}
function markedSpansBefore(old,startCh,isInsert){if(old)for(var i=0,nw;i<old.length;++i){var span=old[i],marker=span.marker;var startsBefore=span.from==null||(marker.inclusiveLeft?span.from<=startCh:span.from<startCh);if(startsBefore||span.from==startCh&&marker.type=="bookmark"&&(!isInsert||!span.marker.insertLeft)){var endsAfter=span.to==null||(marker.inclusiveRight?span.to>=startCh:span.to>startCh);(nw||(nw=[])).push(new MarkedSpan(marker,span.from,endsAfter?null:span.to));}}
return nw;}
function markedSpansAfter(old,endCh,isInsert){if(old)for(var i=0,nw;i<old.length;++i){var span=old[i],marker=span.marker;var endsAfter=span.to==null||(marker.inclusiveRight?span.to>=endCh:span.to>endCh);if(endsAfter||span.from==endCh&&marker.type=="bookmark"&&(!isInsert||span.marker.insertLeft)){var startsBefore=span.from==null||(marker.inclusiveLeft?span.from<=endCh:span.from<endCh);(nw||(nw=[])).push(new MarkedSpan(marker,startsBefore?null:span.from-endCh,span.to==null?null:span.to-endCh));}}
return nw;}
function stretchSpansOverChange(doc,change){if(change.full)return null;var oldFirst=isLine(doc,change.from.line)&&getLine(doc,change.from.line).markedSpans;var oldLast=isLine(doc,change.to.line)&&getLine(doc,change.to.line).markedSpans;if(!oldFirst&&!oldLast)return null;var startCh=change.from.ch,endCh=change.to.ch,isInsert=cmp(change.from,change.to)==0;var first=markedSpansBefore(oldFirst,startCh,isInsert);var last=markedSpansAfter(oldLast,endCh,isInsert);var sameLine=change.text.length==1,offset=lst(change.text).length+(sameLine?startCh:0);if(first){for(var i=0;i<first.length;++i){var span=first[i];if(span.to==null){var found=getMarkedSpanFor(last,span.marker);if(!found)span.to=startCh;else if(sameLine)span.to=found.to==null?null:found.to+offset;}}}
if(last){for(var i=0;i<last.length;++i){var span=last[i];if(span.to!=null)span.to+=offset;if(span.from==null){var found=getMarkedSpanFor(first,span.marker);if(!found){span.from=offset;if(sameLine)(first||(first=[])).push(span);}}else{span.from+=offset;if(sameLine)(first||(first=[])).push(span);}}}
if(first)first=clearEmptySpans(first);if(last&&last!=first)last=clearEmptySpans(last);var newMarkers=[first];if(!sameLine){var gap=change.text.length-2,gapMarkers;if(gap>0&&first)
for(var i=0;i<first.length;++i)
if(first[i].to==null)
(gapMarkers||(gapMarkers=[])).push(new MarkedSpan(first[i].marker,null,null));for(var i=0;i<gap;++i)
newMarkers.push(gapMarkers);newMarkers.push(last);}
return newMarkers;}
function clearEmptySpans(spans){for(var i=0;i<spans.length;++i){var span=spans[i];if(span.from!=null&&span.from==span.to&&span.marker.clearWhenEmpty!==false)
spans.splice(i--,1);}
if(!spans.length)return null;return spans;}
function mergeOldSpans(doc,change){var old=getOldSpans(doc,change);var stretched=stretchSpansOverChange(doc,change);if(!old)return stretched;if(!stretched)return old;for(var i=0;i<old.length;++i){var oldCur=old[i],stretchCur=stretched[i];if(oldCur&&stretchCur){spans:for(var j=0;j<stretchCur.length;++j){var span=stretchCur[j];for(var k=0;k<oldCur.length;++k)
if(oldCur[k].marker==span.marker)continue spans;oldCur.push(span);}}else if(stretchCur){old[i]=stretchCur;}}
return old;}
function removeReadOnlyRanges(doc,from,to){var markers=null;doc.iter(from.line,to.line+1,function(line){if(line.markedSpans)for(var i=0;i<line.markedSpans.length;++i){var mark=line.markedSpans[i].marker;if(mark.readOnly&&(!markers||indexOf(markers,mark)==-1))
(markers||(markers=[])).push(mark);}});if(!markers)return null;var parts=[{from:from,to:to}];for(var i=0;i<markers.length;++i){var mk=markers[i],m=mk.find(0);for(var j=0;j<parts.length;++j){var p=parts[j];if(cmp(p.to,m.from)<0||cmp(p.from,m.to)>0)continue;var newParts=[j,1],dfrom=cmp(p.from,m.from),dto=cmp(p.to,m.to);if(dfrom<0||!mk.inclusiveLeft&&!dfrom)
newParts.push({from:p.from,to:m.from});if(dto>0||!mk.inclusiveRight&&!dto)
newParts.push({from:m.to,to:p.to});parts.splice.apply(parts,newParts);j+=newParts.length-1;}}
return parts;}
function detachMarkedSpans(line){var spans=line.markedSpans;if(!spans)return;for(var i=0;i<spans.length;++i)
spans[i].marker.detachLine(line);line.markedSpans=null;}
function attachMarkedSpans(line,spans){if(!spans)return;for(var i=0;i<spans.length;++i)
spans[i].marker.attachLine(line);line.markedSpans=spans;}
function extraLeft(marker){return marker.inclusiveLeft?-1:0;}
function extraRight(marker){return marker.inclusiveRight?1:0;}
function compareCollapsedMarkers(a,b){var lenDiff=a.lines.length-b.lines.length;if(lenDiff!=0)return lenDiff;var aPos=a.find(),bPos=b.find();var fromCmp=cmp(aPos.from,bPos.from)||extraLeft(a)-extraLeft(b);if(fromCmp)return-fromCmp;var toCmp=cmp(aPos.to,bPos.to)||extraRight(a)-extraRight(b);if(toCmp)return toCmp;return b.id-a.id;}
function collapsedSpanAtSide(line,start){var sps=sawCollapsedSpans&&line.markedSpans,found;if(sps)for(var sp,i=0;i<sps.length;++i){sp=sps[i];if(sp.marker.collapsed&&(start?sp.from:sp.to)==null&&(!found||compareCollapsedMarkers(found,sp.marker)<0))
found=sp.marker;}
return found;}
function collapsedSpanAtStart(line){return collapsedSpanAtSide(line,true);}
function collapsedSpanAtEnd(line){return collapsedSpanAtSide(line,false);}
function conflictingCollapsedRange(doc,lineNo,from,to,marker){var line=getLine(doc,lineNo);var sps=sawCollapsedSpans&&line.markedSpans;if(sps)for(var i=0;i<sps.length;++i){var sp=sps[i];if(!sp.marker.collapsed)continue;var found=sp.marker.find(0);var fromCmp=cmp(found.from,from)||extraLeft(sp.marker)-extraLeft(marker);var toCmp=cmp(found.to,to)||extraRight(sp.marker)-extraRight(marker);if(fromCmp>=0&&toCmp<=0||fromCmp<=0&&toCmp>=0)continue;if(fromCmp<=0&&(cmp(found.to,from)>0||(sp.marker.inclusiveRight&&marker.inclusiveLeft))||fromCmp>=0&&(cmp(found.from,to)<0||(sp.marker.inclusiveLeft&&marker.inclusiveRight)))
return true;}}
function visualLine(line){var merged;while(merged=collapsedSpanAtStart(line))
line=merged.find(-1,true).line;return line;}
function visualLineContinued(line){var merged,lines;while(merged=collapsedSpanAtEnd(line)){line=merged.find(1,true).line;(lines||(lines=[])).push(line);}
return lines;}
function visualLineNo(doc,lineN){var line=getLine(doc,lineN),vis=visualLine(line);if(line==vis)return lineN;return lineNo(vis);}
function visualLineEndNo(doc,lineN){if(lineN>doc.lastLine())return lineN;var line=getLine(doc,lineN),merged;if(!lineIsHidden(doc,line))return lineN;while(merged=collapsedSpanAtEnd(line))
line=merged.find(1,true).line;return lineNo(line)+1;}
function lineIsHidden(doc,line){var sps=sawCollapsedSpans&&line.markedSpans;if(sps)for(var sp,i=0;i<sps.length;++i){sp=sps[i];if(!sp.marker.collapsed)continue;if(sp.from==null)return true;if(sp.marker.widgetNode)continue;if(sp.from==0&&sp.marker.inclusiveLeft&&lineIsHiddenInner(doc,line,sp))
return true;}}
function lineIsHiddenInner(doc,line,span){if(span.to==null){var end=span.marker.find(1,true);return lineIsHiddenInner(doc,end.line,getMarkedSpanFor(end.line.markedSpans,span.marker));}
if(span.marker.inclusiveRight&&span.to==line.text.length)
return true;for(var sp,i=0;i<line.markedSpans.length;++i){sp=line.markedSpans[i];if(sp.marker.collapsed&&!sp.marker.widgetNode&&sp.from==span.to&&(sp.to==null||sp.to!=span.from)&&(sp.marker.inclusiveLeft||span.marker.inclusiveRight)&&lineIsHiddenInner(doc,line,sp))return true;}}
var LineWidget=CodeMirror.LineWidget=function(doc,node,options){if(options)for(var opt in options)if(options.hasOwnProperty(opt))
this[opt]=options[opt];this.doc=doc;this.node=node;};eventMixin(LineWidget);function adjustScrollWhenAboveVisible(cm,line,diff){if(heightAtLine(line)<((cm.curOp&&cm.curOp.scrollTop)||cm.doc.scrollTop))
addToScrollPos(cm,null,diff);}
LineWidget.prototype.clear=function(){var cm=this.doc.cm,ws=this.line.widgets,line=this.line,no=lineNo(line);if(no==null||!ws)return;for(var i=0;i<ws.length;++i)if(ws[i]==this)ws.splice(i--,1);if(!ws.length)line.widgets=null;var height=widgetHeight(this);updateLineHeight(line,Math.max(0,line.height-height));if(cm)runInOp(cm,function(){adjustScrollWhenAboveVisible(cm,line,-height);regLineChange(cm,no,"widget");});};LineWidget.prototype.changed=function(){var oldH=this.height,cm=this.doc.cm,line=this.line;this.height=null;var diff=widgetHeight(this)-oldH;if(!diff)return;updateLineHeight(line,line.height+diff);if(cm)runInOp(cm,function(){cm.curOp.forceUpdate=true;adjustScrollWhenAboveVisible(cm,line,diff);});};function widgetHeight(widget){if(widget.height!=null)return widget.height;var cm=widget.doc.cm;if(!cm)return 0;if(!contains(document.body,widget.node)){var parentStyle="position: relative;";if(widget.coverGutter)
parentStyle+="margin-left: -"+cm.display.gutters.offsetWidth+"px;";if(widget.noHScroll)
parentStyle+="width: "+cm.display.wrapper.clientWidth+"px;";removeChildrenAndAdd(cm.display.measure,elt("div",[widget.node],null,parentStyle));}
return widget.height=widget.node.parentNode.offsetHeight;}
function addLineWidget(doc,handle,node,options){var widget=new LineWidget(doc,node,options);var cm=doc.cm;if(cm&&widget.noHScroll)cm.display.alignWidgets=true;changeLine(doc,handle,"widget",function(line){var widgets=line.widgets||(line.widgets=[]);if(widget.insertAt==null)widgets.push(widget);else widgets.splice(Math.min(widgets.length-1,Math.max(0,widget.insertAt)),0,widget);widget.line=line;if(cm&&!lineIsHidden(doc,line)){var aboveVisible=heightAtLine(line)<doc.scrollTop;updateLineHeight(line,line.height+widgetHeight(widget));if(aboveVisible)addToScrollPos(cm,null,widget.height);cm.curOp.forceUpdate=true;}
return true;});return widget;}
var Line=CodeMirror.Line=function(text,markedSpans,estimateHeight){this.text=text;attachMarkedSpans(this,markedSpans);this.height=estimateHeight?estimateHeight(this):1;};eventMixin(Line);Line.prototype.lineNo=function(){return lineNo(this);};function updateLine(line,text,markedSpans,estimateHeight){line.text=text;if(line.stateAfter)line.stateAfter=null;if(line.styles)line.styles=null;if(line.order!=null)line.order=null;detachMarkedSpans(line);attachMarkedSpans(line,markedSpans);var estHeight=estimateHeight?estimateHeight(line):1;if(estHeight!=line.height)updateLineHeight(line,estHeight);}
function cleanUpLine(line){line.parent=null;detachMarkedSpans(line);}
function extractLineClasses(type,output){if(type)for(;;){var lineClass=type.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!lineClass)break;type=type.slice(0,lineClass.index)+type.slice(lineClass.index+lineClass[0].length);var prop=lineClass[1]?"bgClass":"textClass";if(output[prop]==null)
output[prop]=lineClass[2];else if(!(new RegExp("(?:^|\s)"+lineClass[2]+"(?:$|\s)")).test(output[prop]))
output[prop]+=" "+lineClass[2];}
return type;}
function callBlankLine(mode,state){if(mode.blankLine)return mode.blankLine(state);if(!mode.innerMode)return;var inner=CodeMirror.innerMode(mode,state);if(inner.mode.blankLine)return inner.mode.blankLine(inner.state);}
function readToken(mode,stream,state,inner){for(var i=0;i<10;i++){if(inner)inner[0]=CodeMirror.innerMode(mode,state).mode;var style=mode.token(stream,state);if(stream.pos>stream.start)return style;}
throw new Error("Mode "+mode.name+" failed to advance stream.");}
function takeToken(cm,pos,precise,asArray){function getObj(copy){return{start:stream.start,end:stream.pos,string:stream.current(),type:style||null,state:copy?copyState(doc.mode,state):state};}
var doc=cm.doc,mode=doc.mode,style;pos=clipPos(doc,pos);var line=getLine(doc,pos.line),state=getStateBefore(cm,pos.line,precise);var stream=new StringStream(line.text,cm.options.tabSize),tokens;if(asArray)tokens=[];while((asArray||stream.pos<pos.ch)&&!stream.eol()){stream.start=stream.pos;style=readToken(mode,stream,state);if(asArray)tokens.push(getObj(true));}
return asArray?tokens:getObj();}
function runMode(cm,text,mode,state,f,lineClasses,forceToEnd){var flattenSpans=mode.flattenSpans;if(flattenSpans==null)flattenSpans=cm.options.flattenSpans;var curStart=0,curStyle=null;var stream=new StringStream(text,cm.options.tabSize),style;var inner=cm.options.addModeClass&&[null];if(text=="")extractLineClasses(callBlankLine(mode,state),lineClasses);while(!stream.eol()){if(stream.pos>cm.options.maxHighlightLength){flattenSpans=false;if(forceToEnd)processLine(cm,text,state,stream.pos);stream.pos=text.length;style=null;}else{style=extractLineClasses(readToken(mode,stream,state,inner),lineClasses);}
if(inner){var mName=inner[0].name;if(mName)style="m-"+(style?mName+" "+style:mName);}
if(!flattenSpans||curStyle!=style){while(curStart<stream.start){curStart=Math.min(stream.start,curStart+50000);f(curStart,curStyle);}
curStyle=style;}
stream.start=stream.pos;}
while(curStart<stream.pos){var pos=Math.min(stream.pos,curStart+50000);f(pos,curStyle);curStart=pos;}}
function highlightLine(cm,line,state,forceToEnd){var st=[cm.state.modeGen],lineClasses={};runMode(cm,line.text,cm.doc.mode,state,function(end,style){st.push(end,style);},lineClasses,forceToEnd);for(var o=0;o<cm.state.overlays.length;++o){var overlay=cm.state.overlays[o],i=1,at=0;runMode(cm,line.text,overlay.mode,true,function(end,style){var start=i;while(at<end){var i_end=st[i];if(i_end>end)
st.splice(i,1,end,st[i+1],i_end);i+=2;at=Math.min(end,i_end);}
if(!style)return;if(overlay.opaque){st.splice(start,i-start,end,"cm-overlay "+style);i=start+2;}else{for(;start<i;start+=2){var cur=st[start+1];st[start+1]=(cur?cur+" ":"")+"cm-overlay "+style;}}},lineClasses);}
return{styles:st,classes:lineClasses.bgClass||lineClasses.textClass?lineClasses:null};}
function getLineStyles(cm,line,updateFrontier){if(!line.styles||line.styles[0]!=cm.state.modeGen){var state=getStateBefore(cm,lineNo(line));var result=highlightLine(cm,line,line.text.length>cm.options.maxHighlightLength?copyState(cm.doc.mode,state):state);line.stateAfter=state;line.styles=result.styles;if(result.classes)line.styleClasses=result.classes;else if(line.styleClasses)line.styleClasses=null;if(updateFrontier===cm.doc.frontier)cm.doc.frontier++;}
return line.styles;}
function processLine(cm,text,state,startAt){var mode=cm.doc.mode;var stream=new StringStream(text,cm.options.tabSize);stream.start=stream.pos=startAt||0;if(text=="")callBlankLine(mode,state);while(!stream.eol()){readToken(mode,stream,state);stream.start=stream.pos;}}
var styleToClassCache={},styleToClassCacheWithMode={};function interpretTokenStyle(style,options){if(!style||/^\s*$/.test(style))return null;var cache=options.addModeClass?styleToClassCacheWithMode:styleToClassCache;return cache[style]||(cache[style]=style.replace(/\S+/g,"cm-$&"));}
function buildLineContent(cm,lineView){var content=elt("span",null,null,webkit?"padding-right: .1px":null);var builder={pre:elt("pre",[content],"CodeMirror-line"),content:content,col:0,pos:0,cm:cm,splitSpaces:(ie||webkit)&&cm.getOption("lineWrapping")};lineView.measure={};for(var i=0;i<=(lineView.rest?lineView.rest.length:0);i++){var line=i?lineView.rest[i-1]:lineView.line,order;builder.pos=0;builder.addToken=buildToken;if(hasBadBidiRects(cm.display.measure)&&(order=getOrder(line)))
builder.addToken=buildTokenBadBidi(builder.addToken,order);builder.map=[];var allowFrontierUpdate=lineView!=cm.display.externalMeasured&&lineNo(line);insertLineContent(line,builder,getLineStyles(cm,line,allowFrontierUpdate));if(line.styleClasses){if(line.styleClasses.bgClass)
builder.bgClass=joinClasses(line.styleClasses.bgClass,builder.bgClass||"");if(line.styleClasses.textClass)
builder.textClass=joinClasses(line.styleClasses.textClass,builder.textClass||"");}
if(builder.map.length==0)
builder.map.push(0,0,builder.content.appendChild(zeroWidthElement(cm.display.measure)));if(i==0){lineView.measure.map=builder.map;lineView.measure.cache={};}else{(lineView.measure.maps||(lineView.measure.maps=[])).push(builder.map);(lineView.measure.caches||(lineView.measure.caches=[])).push({});}}
if(webkit&&/\bcm-tab\b/.test(builder.content.lastChild.className))
builder.content.className="cm-tab-wrap-hack";signal(cm,"renderLine",cm,lineView.line,builder.pre);if(builder.pre.className)
builder.textClass=joinClasses(builder.pre.className,builder.textClass||"");return builder;}
function defaultSpecialCharPlaceholder(ch){var token=elt("span","\u2022","cm-invalidchar");token.title="\\u"+ch.charCodeAt(0).toString(16);token.setAttribute("aria-label",token.title);return token;}
function buildToken(builder,text,style,startStyle,endStyle,title,css){if(!text)return;var displayText=builder.splitSpaces?text.replace(/ {3,}/g,splitSpaces):text;var special=builder.cm.state.specialChars,mustWrap=false;if(!special.test(text)){builder.col+=text.length;var content=document.createTextNode(displayText);builder.map.push(builder.pos,builder.pos+text.length,content);if(ie&&ie_version<9)mustWrap=true;builder.pos+=text.length;}else{var content=document.createDocumentFragment(),pos=0;while(true){special.lastIndex=pos;var m=special.exec(text);var skipped=m?m.index-pos:text.length-pos;if(skipped){var txt=document.createTextNode(displayText.slice(pos,pos+skipped));if(ie&&ie_version<9)content.appendChild(elt("span",[txt]));else content.appendChild(txt);builder.map.push(builder.pos,builder.pos+skipped,txt);builder.col+=skipped;builder.pos+=skipped;}
if(!m)break;pos+=skipped+1;if(m[0]=="\t"){var tabSize=builder.cm.options.tabSize,tabWidth=tabSize-builder.col%tabSize;var txt=content.appendChild(elt("span",spaceStr(tabWidth),"cm-tab"));txt.setAttribute("role","presentation");txt.setAttribute("cm-text","\t");builder.col+=tabWidth;}else if(m[0]=="\r"||m[0]=="\n"){var txt=content.appendChild(elt("span",m[0]=="\r"?"\u240d":"\u2424","cm-invalidchar"));txt.setAttribute("cm-text",m[0]);builder.col+=1;}else{var txt=builder.cm.options.specialCharPlaceholder(m[0]);txt.setAttribute("cm-text",m[0]);if(ie&&ie_version<9)content.appendChild(elt("span",[txt]));else content.appendChild(txt);builder.col+=1;}
builder.map.push(builder.pos,builder.pos+1,txt);builder.pos++;}}
if(style||startStyle||endStyle||mustWrap||css){var fullStyle=style||"";if(startStyle)fullStyle+=startStyle;if(endStyle)fullStyle+=endStyle;var token=elt("span",[content],fullStyle,css);if(title)token.title=title;return builder.content.appendChild(token);}
builder.content.appendChild(content);}
function splitSpaces(old){var out=" ";for(var i=0;i<old.length-2;++i)out+=i%2?" ":"\u00a0";out+=" ";return out;}
function buildTokenBadBidi(inner,order){return function(builder,text,style,startStyle,endStyle,title,css){style=style?style+" cm-force-border":"cm-force-border";var start=builder.pos,end=start+text.length;for(;;){for(var i=0;i<order.length;i++){var part=order[i];if(part.to>start&&part.from<=start)break;}
if(part.to>=end)return inner(builder,text,style,startStyle,endStyle,title,css);inner(builder,text.slice(0,part.to-start),style,startStyle,null,title,css);startStyle=null;text=text.slice(part.to-start);start=part.to;}};}
function buildCollapsedSpan(builder,size,marker,ignoreWidget){var widget=!ignoreWidget&&marker.widgetNode;if(widget)builder.map.push(builder.pos,builder.pos+size,widget);if(!ignoreWidget&&builder.cm.display.input.needsContentAttribute){if(!widget)
widget=builder.content.appendChild(document.createElement("span"));widget.setAttribute("cm-marker",marker.id);}
if(widget){builder.cm.display.input.setUneditable(widget);builder.content.appendChild(widget);}
builder.pos+=size;}
function insertLineContent(line,builder,styles){var spans=line.markedSpans,allText=line.text,at=0;if(!spans){for(var i=1;i<styles.length;i+=2)
builder.addToken(builder,allText.slice(at,at=styles[i]),interpretTokenStyle(styles[i+1],builder.cm.options));return;}
var len=allText.length,pos=0,i=1,text="",style,css;var nextChange=0,spanStyle,spanEndStyle,spanStartStyle,title,collapsed;for(;;){if(nextChange==pos){spanStyle=spanEndStyle=spanStartStyle=title=css="";collapsed=null;nextChange=Infinity;var foundBookmarks=[],endStyles
for(var j=0;j<spans.length;++j){var sp=spans[j],m=sp.marker;if(m.type=="bookmark"&&sp.from==pos&&m.widgetNode){foundBookmarks.push(m);}else if(sp.from<=pos&&(sp.to==null||sp.to>pos||m.collapsed&&sp.to==pos&&sp.from==pos)){if(sp.to!=null&&sp.to!=pos&&nextChange>sp.to){nextChange=sp.to;spanEndStyle="";}
if(m.className)spanStyle+=" "+m.className;if(m.css)css=(css?css+";":"")+m.css;if(m.startStyle&&sp.from==pos)spanStartStyle+=" "+m.startStyle;if(m.endStyle&&sp.to==nextChange)(endStyles||(endStyles=[])).push(m.endStyle,sp.to)
if(m.title&&!title)title=m.title;if(m.collapsed&&(!collapsed||compareCollapsedMarkers(collapsed.marker,m)<0))
collapsed=sp;}else if(sp.from>pos&&nextChange>sp.from){nextChange=sp.from;}}
if(endStyles)for(var j=0;j<endStyles.length;j+=2)
if(endStyles[j+1]==nextChange)spanEndStyle+=" "+endStyles[j]
if(!collapsed||collapsed.from==pos)for(var j=0;j<foundBookmarks.length;++j)
buildCollapsedSpan(builder,0,foundBookmarks[j]);if(collapsed&&(collapsed.from||0)==pos){buildCollapsedSpan(builder,(collapsed.to==null?len+1:collapsed.to)-pos,collapsed.marker,collapsed.from==null);if(collapsed.to==null)return;if(collapsed.to==pos)collapsed=false;}}
if(pos>=len)break;var upto=Math.min(len,nextChange);while(true){if(text){var end=pos+text.length;if(!collapsed){var tokenText=end>upto?text.slice(0,upto-pos):text;builder.addToken(builder,tokenText,style?style+spanStyle:spanStyle,spanStartStyle,pos+tokenText.length==nextChange?spanEndStyle:"",title,css);}
if(end>=upto){text=text.slice(upto-pos);pos=upto;break;}
pos=end;spanStartStyle="";}
text=allText.slice(at,at=styles[i++]);style=interpretTokenStyle(styles[i++],builder.cm.options);}}}
function isWholeLineUpdate(doc,change){return change.from.ch==0&&change.to.ch==0&&lst(change.text)==""&&(!doc.cm||doc.cm.options.wholeLineUpdateBefore);}
function updateDoc(doc,change,markedSpans,estimateHeight){function spansFor(n){return markedSpans?markedSpans[n]:null;}
function update(line,text,spans){updateLine(line,text,spans,estimateHeight);signalLater(line,"change",line,change);}
function linesFor(start,end){for(var i=start,result=[];i<end;++i)
result.push(new Line(text[i],spansFor(i),estimateHeight));return result;}
var from=change.from,to=change.to,text=change.text;var firstLine=getLine(doc,from.line),lastLine=getLine(doc,to.line);var lastText=lst(text),lastSpans=spansFor(text.length-1),nlines=to.line-from.line;if(change.full){doc.insert(0,linesFor(0,text.length));doc.remove(text.length,doc.size-text.length);}else if(isWholeLineUpdate(doc,change)){var added=linesFor(0,text.length-1);update(lastLine,lastLine.text,lastSpans);if(nlines)doc.remove(from.line,nlines);if(added.length)doc.insert(from.line,added);}else if(firstLine==lastLine){if(text.length==1){update(firstLine,firstLine.text.slice(0,from.ch)+lastText+firstLine.text.slice(to.ch),lastSpans);}else{var added=linesFor(1,text.length-1);added.push(new Line(lastText+firstLine.text.slice(to.ch),lastSpans,estimateHeight));update(firstLine,firstLine.text.slice(0,from.ch)+text[0],spansFor(0));doc.insert(from.line+1,added);}}else if(text.length==1){update(firstLine,firstLine.text.slice(0,from.ch)+text[0]+lastLine.text.slice(to.ch),spansFor(0));doc.remove(from.line+1,nlines);}else{update(firstLine,firstLine.text.slice(0,from.ch)+text[0],spansFor(0));update(lastLine,lastText+lastLine.text.slice(to.ch),lastSpans);var added=linesFor(1,text.length-1);if(nlines>1)doc.remove(from.line+1,nlines-1);doc.insert(from.line+1,added);}
signalLater(doc,"change",doc,change);}
function LeafChunk(lines){this.lines=lines;this.parent=null;for(var i=0,height=0;i<lines.length;++i){lines[i].parent=this;height+=lines[i].height;}
this.height=height;}
LeafChunk.prototype={chunkSize:function(){return this.lines.length;},removeInner:function(at,n){for(var i=at,e=at+n;i<e;++i){var line=this.lines[i];this.height-=line.height;cleanUpLine(line);signalLater(line,"delete");}
this.lines.splice(at,n);},collapse:function(lines){lines.push.apply(lines,this.lines);},insertInner:function(at,lines,height){this.height+=height;this.lines=this.lines.slice(0,at).concat(lines).concat(this.lines.slice(at));for(var i=0;i<lines.length;++i)lines[i].parent=this;},iterN:function(at,n,op){for(var e=at+n;at<e;++at)
if(op(this.lines[at]))return true;}};function BranchChunk(children){this.children=children;var size=0,height=0;for(var i=0;i<children.length;++i){var ch=children[i];size+=ch.chunkSize();height+=ch.height;ch.parent=this;}
this.size=size;this.height=height;this.parent=null;}
BranchChunk.prototype={chunkSize:function(){return this.size;},removeInner:function(at,n){this.size-=n;for(var i=0;i<this.children.length;++i){var child=this.children[i],sz=child.chunkSize();if(at<sz){var rm=Math.min(n,sz-at),oldHeight=child.height;child.removeInner(at,rm);this.height-=oldHeight-child.height;if(sz==rm){this.children.splice(i--,1);child.parent=null;}
if((n-=rm)==0)break;at=0;}else at-=sz;}
if(this.size-n<25&&(this.children.length>1||!(this.children[0]instanceof LeafChunk))){var lines=[];this.collapse(lines);this.children=[new LeafChunk(lines)];this.children[0].parent=this;}},collapse:function(lines){for(var i=0;i<this.children.length;++i)this.children[i].collapse(lines);},insertInner:function(at,lines,height){this.size+=lines.length;this.height+=height;for(var i=0;i<this.children.length;++i){var child=this.children[i],sz=child.chunkSize();if(at<=sz){child.insertInner(at,lines,height);if(child.lines&&child.lines.length>50){while(child.lines.length>50){var spilled=child.lines.splice(child.lines.length-25,25);var newleaf=new LeafChunk(spilled);child.height-=newleaf.height;this.children.splice(i+1,0,newleaf);newleaf.parent=this;}
this.maybeSpill();}
break;}
at-=sz;}},maybeSpill:function(){if(this.children.length<=10)return;var me=this;do{var spilled=me.children.splice(me.children.length-5,5);var sibling=new BranchChunk(spilled);if(!me.parent){var copy=new BranchChunk(me.children);copy.parent=me;me.children=[copy,sibling];me=copy;}else{me.size-=sibling.size;me.height-=sibling.height;var myIndex=indexOf(me.parent.children,me);me.parent.children.splice(myIndex+1,0,sibling);}
sibling.parent=me.parent;}while(me.children.length>10);me.parent.maybeSpill();},iterN:function(at,n,op){for(var i=0;i<this.children.length;++i){var child=this.children[i],sz=child.chunkSize();if(at<sz){var used=Math.min(n,sz-at);if(child.iterN(at,used,op))return true;if((n-=used)==0)break;at=0;}else at-=sz;}}};var nextDocId=0;var Doc=CodeMirror.Doc=function(text,mode,firstLine,lineSep){if(!(this instanceof Doc))return new Doc(text,mode,firstLine,lineSep);if(firstLine==null)firstLine=0;BranchChunk.call(this,[new LeafChunk([new Line("",null)])]);this.first=firstLine;this.scrollTop=this.scrollLeft=0;this.cantEdit=false;this.cleanGeneration=1;this.frontier=firstLine;var start=Pos(firstLine,0);this.sel=simpleSelection(start);this.history=new History(null);this.id=++nextDocId;this.modeOption=mode;this.lineSep=lineSep;this.extend=false;if(typeof text=="string")text=this.splitLines(text);updateDoc(this,{from:start,to:start,text:text});setSelection(this,simpleSelection(start),sel_dontScroll);};Doc.prototype=createObj(BranchChunk.prototype,{constructor:Doc,iter:function(from,to,op){if(op)this.iterN(from-this.first,to-from,op);else this.iterN(this.first,this.first+this.size,from);},insert:function(at,lines){var height=0;for(var i=0;i<lines.length;++i)height+=lines[i].height;this.insertInner(at-this.first,lines,height);},remove:function(at,n){this.removeInner(at-this.first,n);},getValue:function(lineSep){var lines=getLines(this,this.first,this.first+this.size);if(lineSep===false)return lines;return lines.join(lineSep||this.lineSeparator());},setValue:docMethodOp(function(code){var top=Pos(this.first,0),last=this.first+this.size-1;makeChange(this,{from:top,to:Pos(last,getLine(this,last).text.length),text:this.splitLines(code),origin:"setValue",full:true},true);setSelection(this,simpleSelection(top));}),replaceRange:function(code,from,to,origin){from=clipPos(this,from);to=to?clipPos(this,to):from;replaceRange(this,code,from,to,origin);},getRange:function(from,to,lineSep){var lines=getBetween(this,clipPos(this,from),clipPos(this,to));if(lineSep===false)return lines;return lines.join(lineSep||this.lineSeparator());},getLine:function(line){var l=this.getLineHandle(line);return l&&l.text;},getLineHandle:function(line){if(isLine(this,line))return getLine(this,line);},getLineNumber:function(line){return lineNo(line);},getLineHandleVisualStart:function(line){if(typeof line=="number")line=getLine(this,line);return visualLine(line);},lineCount:function(){return this.size;},firstLine:function(){return this.first;},lastLine:function(){return this.first+this.size-1;},clipPos:function(pos){return clipPos(this,pos);},getCursor:function(start){var range=this.sel.primary(),pos;if(start==null||start=="head")pos=range.head;else if(start=="anchor")pos=range.anchor;else if(start=="end"||start=="to"||start===false)pos=range.to();else pos=range.from();return pos;},listSelections:function(){return this.sel.ranges;},somethingSelected:function(){return this.sel.somethingSelected();},setCursor:docMethodOp(function(line,ch,options){setSimpleSelection(this,clipPos(this,typeof line=="number"?Pos(line,ch||0):line),null,options);}),setSelection:docMethodOp(function(anchor,head,options){setSimpleSelection(this,clipPos(this,anchor),clipPos(this,head||anchor),options);}),extendSelection:docMethodOp(function(head,other,options){extendSelection(this,clipPos(this,head),other&&clipPos(this,other),options);}),extendSelections:docMethodOp(function(heads,options){extendSelections(this,clipPosArray(this,heads),options);}),extendSelectionsBy:docMethodOp(function(f,options){var heads=map(this.sel.ranges,f);extendSelections(this,clipPosArray(this,heads),options);}),setSelections:docMethodOp(function(ranges,primary,options){if(!ranges.length)return;for(var i=0,out=[];i<ranges.length;i++)
out[i]=new Range(clipPos(this,ranges[i].anchor),clipPos(this,ranges[i].head));if(primary==null)primary=Math.min(ranges.length-1,this.sel.primIndex);setSelection(this,normalizeSelection(out,primary),options);}),addSelection:docMethodOp(function(anchor,head,options){var ranges=this.sel.ranges.slice(0);ranges.push(new Range(clipPos(this,anchor),clipPos(this,head||anchor)));setSelection(this,normalizeSelection(ranges,ranges.length-1),options);}),getSelection:function(lineSep){var ranges=this.sel.ranges,lines;for(var i=0;i<ranges.length;i++){var sel=getBetween(this,ranges[i].from(),ranges[i].to());lines=lines?lines.concat(sel):sel;}
if(lineSep===false)return lines;else return lines.join(lineSep||this.lineSeparator());},getSelections:function(lineSep){var parts=[],ranges=this.sel.ranges;for(var i=0;i<ranges.length;i++){var sel=getBetween(this,ranges[i].from(),ranges[i].to());if(lineSep!==false)sel=sel.join(lineSep||this.lineSeparator());parts[i]=sel;}
return parts;},replaceSelection:function(code,collapse,origin){var dup=[];for(var i=0;i<this.sel.ranges.length;i++)
dup[i]=code;this.replaceSelections(dup,collapse,origin||"+input");},replaceSelections:docMethodOp(function(code,collapse,origin){var changes=[],sel=this.sel;for(var i=0;i<sel.ranges.length;i++){var range=sel.ranges[i];changes[i]={from:range.from(),to:range.to(),text:this.splitLines(code[i]),origin:origin};}
var newSel=collapse&&collapse!="end"&&computeReplacedSel(this,changes,collapse);for(var i=changes.length-1;i>=0;i--)
makeChange(this,changes[i]);if(newSel)setSelectionReplaceHistory(this,newSel);else if(this.cm)ensureCursorVisible(this.cm);}),undo:docMethodOp(function(){makeChangeFromHistory(this,"undo");}),redo:docMethodOp(function(){makeChangeFromHistory(this,"redo");}),undoSelection:docMethodOp(function(){makeChangeFromHistory(this,"undo",true);}),redoSelection:docMethodOp(function(){makeChangeFromHistory(this,"redo",true);}),setExtending:function(val){this.extend=val;},getExtending:function(){return this.extend;},historySize:function(){var hist=this.history,done=0,undone=0;for(var i=0;i<hist.done.length;i++)if(!hist.done[i].ranges)++done;for(var i=0;i<hist.undone.length;i++)if(!hist.undone[i].ranges)++undone;return{undo:done,redo:undone};},clearHistory:function(){this.history=new History(this.history.maxGeneration);},markClean:function(){this.cleanGeneration=this.changeGeneration(true);},changeGeneration:function(forceSplit){if(forceSplit)
this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null;return this.history.generation;},isClean:function(gen){return this.history.generation==(gen||this.cleanGeneration);},getHistory:function(){return{done:copyHistoryArray(this.history.done),undone:copyHistoryArray(this.history.undone)};},setHistory:function(histData){var hist=this.history=new History(this.history.maxGeneration);hist.done=copyHistoryArray(histData.done.slice(0),null,true);hist.undone=copyHistoryArray(histData.undone.slice(0),null,true);},addLineClass:docMethodOp(function(handle,where,cls){return changeLine(this,handle,where=="gutter"?"gutter":"class",function(line){var prop=where=="text"?"textClass":where=="background"?"bgClass":where=="gutter"?"gutterClass":"wrapClass";if(!line[prop])line[prop]=cls;else if(classTest(cls).test(line[prop]))return false;else line[prop]+=" "+cls;return true;});}),removeLineClass:docMethodOp(function(handle,where,cls){return changeLine(this,handle,where=="gutter"?"gutter":"class",function(line){var prop=where=="text"?"textClass":where=="background"?"bgClass":where=="gutter"?"gutterClass":"wrapClass";var cur=line[prop];if(!cur)return false;else if(cls==null)line[prop]=null;else{var found=cur.match(classTest(cls));if(!found)return false;var end=found.index+found[0].length;line[prop]=cur.slice(0,found.index)+(!found.index||end==cur.length?"":" ")+cur.slice(end)||null;}
return true;});}),addLineWidget:docMethodOp(function(handle,node,options){return addLineWidget(this,handle,node,options);}),removeLineWidget:function(widget){widget.clear();},markText:function(from,to,options){return markText(this,clipPos(this,from),clipPos(this,to),options,options&&options.type||"range");},setBookmark:function(pos,options){var realOpts={replacedWith:options&&(options.nodeType==null?options.widget:options),insertLeft:options&&options.insertLeft,clearWhenEmpty:false,shared:options&&options.shared,handleMouseEvents:options&&options.handleMouseEvents};pos=clipPos(this,pos);return markText(this,pos,pos,realOpts,"bookmark");},findMarksAt:function(pos){pos=clipPos(this,pos);var markers=[],spans=getLine(this,pos.line).markedSpans;if(spans)for(var i=0;i<spans.length;++i){var span=spans[i];if((span.from==null||span.from<=pos.ch)&&(span.to==null||span.to>=pos.ch))
markers.push(span.marker.parent||span.marker);}
return markers;},findMarks:function(from,to,filter){from=clipPos(this,from);to=clipPos(this,to);var found=[],lineNo=from.line;this.iter(from.line,to.line+1,function(line){var spans=line.markedSpans;if(spans)for(var i=0;i<spans.length;i++){var span=spans[i];if(!(lineNo==from.line&&from.ch>span.to||span.from==null&&lineNo!=from.line||lineNo==to.line&&span.from>to.ch)&&(!filter||filter(span.marker)))
found.push(span.marker.parent||span.marker);}
++lineNo;});return found;},getAllMarks:function(){var markers=[];this.iter(function(line){var sps=line.markedSpans;if(sps)for(var i=0;i<sps.length;++i)
if(sps[i].from!=null)markers.push(sps[i].marker);});return markers;},posFromIndex:function(off){var ch,lineNo=this.first;this.iter(function(line){var sz=line.text.length+1;if(sz>off){ch=off;return true;}
off-=sz;++lineNo;});return clipPos(this,Pos(lineNo,ch));},indexFromPos:function(coords){coords=clipPos(this,coords);var index=coords.ch;if(coords.line<this.first||coords.ch<0)return 0;this.iter(this.first,coords.line,function(line){index+=line.text.length+1;});return index;},copy:function(copyHistory){var doc=new Doc(getLines(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep);doc.scrollTop=this.scrollTop;doc.scrollLeft=this.scrollLeft;doc.sel=this.sel;doc.extend=false;if(copyHistory){doc.history.undoDepth=this.history.undoDepth;doc.setHistory(this.getHistory());}
return doc;},linkedDoc:function(options){if(!options)options={};var from=this.first,to=this.first+this.size;if(options.from!=null&&options.from>from)from=options.from;if(options.to!=null&&options.to<to)to=options.to;var copy=new Doc(getLines(this,from,to),options.mode||this.modeOption,from,this.lineSep);if(options.sharedHist)copy.history=this.history;(this.linked||(this.linked=[])).push({doc:copy,sharedHist:options.sharedHist});copy.linked=[{doc:this,isParent:true,sharedHist:options.sharedHist}];copySharedMarkers(copy,findSharedMarkers(this));return copy;},unlinkDoc:function(other){if(other instanceof CodeMirror)other=other.doc;if(this.linked)for(var i=0;i<this.linked.length;++i){var link=this.linked[i];if(link.doc!=other)continue;this.linked.splice(i,1);other.unlinkDoc(this);detachSharedMarkers(findSharedMarkers(this));break;}
if(other.history==this.history){var splitIds=[other.id];linkedDocs(other,function(doc){splitIds.push(doc.id);},true);other.history=new History(null);other.history.done=copyHistoryArray(this.history.done,splitIds);other.history.undone=copyHistoryArray(this.history.undone,splitIds);}},iterLinkedDocs:function(f){linkedDocs(this,f);},getMode:function(){return this.mode;},getEditor:function(){return this.cm;},splitLines:function(str){if(this.lineSep)return str.split(this.lineSep);return splitLinesAuto(str);},lineSeparator:function(){return this.lineSep||"\n";}});Doc.prototype.eachLine=Doc.prototype.iter;var dontDelegate="iter insert remove copy getEditor constructor".split(" ");for(var prop in Doc.prototype)if(Doc.prototype.hasOwnProperty(prop)&&indexOf(dontDelegate,prop)<0)
CodeMirror.prototype[prop]=(function(method){return function(){return method.apply(this.doc,arguments);};})(Doc.prototype[prop]);eventMixin(Doc);function linkedDocs(doc,f,sharedHistOnly){function propagate(doc,skip,sharedHist){if(doc.linked)for(var i=0;i<doc.linked.length;++i){var rel=doc.linked[i];if(rel.doc==skip)continue;var shared=sharedHist&&rel.sharedHist;if(sharedHistOnly&&!shared)continue;f(rel.doc,shared);propagate(rel.doc,doc,shared);}}
propagate(doc,null,true);}
function attachDoc(cm,doc){if(doc.cm)throw new Error("This document is already in use.");cm.doc=doc;doc.cm=cm;estimateLineHeights(cm);loadMode(cm);if(!cm.options.lineWrapping)findMaxLine(cm);cm.options.mode=doc.modeOption;regChange(cm);}
function getLine(doc,n){n-=doc.first;if(n<0||n>=doc.size)throw new Error("There is no line "+(n+doc.first)+" in the document.");for(var chunk=doc;!chunk.lines;){for(var i=0;;++i){var child=chunk.children[i],sz=child.chunkSize();if(n<sz){chunk=child;break;}
n-=sz;}}
return chunk.lines[n];}
function getBetween(doc,start,end){var out=[],n=start.line;doc.iter(start.line,end.line+1,function(line){var text=line.text;if(n==end.line)text=text.slice(0,end.ch);if(n==start.line)text=text.slice(start.ch);out.push(text);++n;});return out;}
function getLines(doc,from,to){var out=[];doc.iter(from,to,function(line){out.push(line.text);});return out;}
function updateLineHeight(line,height){var diff=height-line.height;if(diff)for(var n=line;n;n=n.parent)n.height+=diff;}
function lineNo(line){if(line.parent==null)return null;var cur=line.parent,no=indexOf(cur.lines,line);for(var chunk=cur.parent;chunk;cur=chunk,chunk=chunk.parent){for(var i=0;;++i){if(chunk.children[i]==cur)break;no+=chunk.children[i].chunkSize();}}
return no+cur.first;}
function lineAtHeight(chunk,h){var n=chunk.first;outer:do{for(var i=0;i<chunk.children.length;++i){var child=chunk.children[i],ch=child.height;if(h<ch){chunk=child;continue outer;}
h-=ch;n+=child.chunkSize();}
return n;}while(!chunk.lines);for(var i=0;i<chunk.lines.length;++i){var line=chunk.lines[i],lh=line.height;if(h<lh)break;h-=lh;}
return n+i;}
function heightAtLine(lineObj){lineObj=visualLine(lineObj);var h=0,chunk=lineObj.parent;for(var i=0;i<chunk.lines.length;++i){var line=chunk.lines[i];if(line==lineObj)break;else h+=line.height;}
for(var p=chunk.parent;p;chunk=p,p=chunk.parent){for(var i=0;i<p.children.length;++i){var cur=p.children[i];if(cur==chunk)break;else h+=cur.height;}}
return h;}
function getOrder(line){var order=line.order;if(order==null)order=line.order=bidiOrdering(line.text);return order;}
function History(startGen){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOp=this.lastSelOp=null;this.lastOrigin=this.lastSelOrigin=null;this.generation=this.maxGeneration=startGen||1;}
function historyChangeFromChange(doc,change){var histChange={from:copyPos(change.from),to:changeEnd(change),text:getBetween(doc,change.from,change.to)};attachLocalSpans(doc,histChange,change.from.line,change.to.line+1);linkedDocs(doc,function(doc){attachLocalSpans(doc,histChange,change.from.line,change.to.line+1);},true);return histChange;}
function clearSelectionEvents(array){while(array.length){var last=lst(array);if(last.ranges)array.pop();else break;}}
function lastChangeEvent(hist,force){if(force){clearSelectionEvents(hist.done);return lst(hist.done);}else if(hist.done.length&&!lst(hist.done).ranges){return lst(hist.done);}else if(hist.done.length>1&&!hist.done[hist.done.length-2].ranges){hist.done.pop();return lst(hist.done);}}
function addChangeToHistory(doc,change,selAfter,opId){var hist=doc.history;hist.undone.length=0;var time=+new Date,cur;if((hist.lastOp==opId||hist.lastOrigin==change.origin&&change.origin&&((change.origin.charAt(0)=="+"&&doc.cm&&hist.lastModTime>time-doc.cm.options.historyEventDelay)||change.origin.charAt(0)=="*"))&&(cur=lastChangeEvent(hist,hist.lastOp==opId))){var last=lst(cur.changes);if(cmp(change.from,change.to)==0&&cmp(change.from,last.to)==0){last.to=changeEnd(change);}else{cur.changes.push(historyChangeFromChange(doc,change));}}else{var before=lst(hist.done);if(!before||!before.ranges)
pushSelectionToHistory(doc.sel,hist.done);cur={changes:[historyChangeFromChange(doc,change)],generation:hist.generation};hist.done.push(cur);while(hist.done.length>hist.undoDepth){hist.done.shift();if(!hist.done[0].ranges)hist.done.shift();}}
hist.done.push(selAfter);hist.generation=++hist.maxGeneration;hist.lastModTime=hist.lastSelTime=time;hist.lastOp=hist.lastSelOp=opId;hist.lastOrigin=hist.lastSelOrigin=change.origin;if(!last)signal(doc,"historyAdded");}
function selectionEventCanBeMerged(doc,origin,prev,sel){var ch=origin.charAt(0);return ch=="*"||ch=="+"&&prev.ranges.length==sel.ranges.length&&prev.somethingSelected()==sel.somethingSelected()&&new Date-doc.history.lastSelTime<=(doc.cm?doc.cm.options.historyEventDelay:500);}
function addSelectionToHistory(doc,sel,opId,options){var hist=doc.history,origin=options&&options.origin;if(opId==hist.lastSelOp||(origin&&hist.lastSelOrigin==origin&&(hist.lastModTime==hist.lastSelTime&&hist.lastOrigin==origin||selectionEventCanBeMerged(doc,origin,lst(hist.done),sel))))
hist.done[hist.done.length-1]=sel;else
pushSelectionToHistory(sel,hist.done);hist.lastSelTime=+new Date;hist.lastSelOrigin=origin;hist.lastSelOp=opId;if(options&&options.clearRedo!==false)
clearSelectionEvents(hist.undone);}
function pushSelectionToHistory(sel,dest){var top=lst(dest);if(!(top&&top.ranges&&top.equals(sel)))
dest.push(sel);}
function attachLocalSpans(doc,change,from,to){var existing=change["spans_"+doc.id],n=0;doc.iter(Math.max(doc.first,from),Math.min(doc.first+doc.size,to),function(line){if(line.markedSpans)
(existing||(existing=change["spans_"+doc.id]={}))[n]=line.markedSpans;++n;});}
function removeClearedSpans(spans){if(!spans)return null;for(var i=0,out;i<spans.length;++i){if(spans[i].marker.explicitlyCleared){if(!out)out=spans.slice(0,i);}
else if(out)out.push(spans[i]);}
return!out?spans:out.length?out:null;}
function getOldSpans(doc,change){var found=change["spans_"+doc.id];if(!found)return null;for(var i=0,nw=[];i<change.text.length;++i)
nw.push(removeClearedSpans(found[i]));return nw;}
function copyHistoryArray(events,newGroup,instantiateSel){for(var i=0,copy=[];i<events.length;++i){var event=events[i];if(event.ranges){copy.push(instantiateSel?Selection.prototype.deepCopy.call(event):event);continue;}
var changes=event.changes,newChanges=[];copy.push({changes:newChanges});for(var j=0;j<changes.length;++j){var change=changes[j],m;newChanges.push({from:change.from,to:change.to,text:change.text});if(newGroup)for(var prop in change)if(m=prop.match(/^spans_(\d+)$/)){if(indexOf(newGroup,Number(m[1]))>-1){lst(newChanges)[prop]=change[prop];delete change[prop];}}}}
return copy;}
function rebaseHistSelSingle(pos,from,to,diff){if(to<pos.line){pos.line+=diff;}else if(from<pos.line){pos.line=from;pos.ch=0;}}
function rebaseHistArray(array,from,to,diff){for(var i=0;i<array.length;++i){var sub=array[i],ok=true;if(sub.ranges){if(!sub.copied){sub=array[i]=sub.deepCopy();sub.copied=true;}
for(var j=0;j<sub.ranges.length;j++){rebaseHistSelSingle(sub.ranges[j].anchor,from,to,diff);rebaseHistSelSingle(sub.ranges[j].head,from,to,diff);}
continue;}
for(var j=0;j<sub.changes.length;++j){var cur=sub.changes[j];if(to<cur.from.line){cur.from=Pos(cur.from.line+diff,cur.from.ch);cur.to=Pos(cur.to.line+diff,cur.to.ch);}else if(from<=cur.to.line){ok=false;break;}}
if(!ok){array.splice(0,i+1);i=0;}}}
function rebaseHist(hist,change){var from=change.from.line,to=change.to.line,diff=change.text.length-(to-from)-1;rebaseHistArray(hist.done,from,to,diff);rebaseHistArray(hist.undone,from,to,diff);}
var e_preventDefault=CodeMirror.e_preventDefault=function(e){if(e.preventDefault)e.preventDefault();else e.returnValue=false;};var e_stopPropagation=CodeMirror.e_stopPropagation=function(e){if(e.stopPropagation)e.stopPropagation();else e.cancelBubble=true;};function e_defaultPrevented(e){return e.defaultPrevented!=null?e.defaultPrevented:e.returnValue==false;}
var e_stop=CodeMirror.e_stop=function(e){e_preventDefault(e);e_stopPropagation(e);};function e_target(e){return e.target||e.srcElement;}
function e_button(e){var b=e.which;if(b==null){if(e.button&1)b=1;else if(e.button&2)b=3;else if(e.button&4)b=2;}
if(mac&&e.ctrlKey&&b==1)b=3;return b;}
var on=CodeMirror.on=function(emitter,type,f){if(emitter.addEventListener)
emitter.addEventListener(type,f,false);else if(emitter.attachEvent)
emitter.attachEvent("on"+type,f);else{var map=emitter._handlers||(emitter._handlers={});var arr=map[type]||(map[type]=[]);arr.push(f);}};var noHandlers=[]
function getHandlers(emitter,type,copy){var arr=emitter._handlers&&emitter._handlers[type]
if(copy)return arr&&arr.length>0?arr.slice():noHandlers
else return arr||noHandlers}
var off=CodeMirror.off=function(emitter,type,f){if(emitter.removeEventListener)
emitter.removeEventListener(type,f,false);else if(emitter.detachEvent)
emitter.detachEvent("on"+type,f);else{var handlers=getHandlers(emitter,type,false)
for(var i=0;i<handlers.length;++i)
if(handlers[i]==f){handlers.splice(i,1);break;}}};var signal=CodeMirror.signal=function(emitter,type){var handlers=getHandlers(emitter,type,true)
if(!handlers.length)return;var args=Array.prototype.slice.call(arguments,2);for(var i=0;i<handlers.length;++i)handlers[i].apply(null,args);};var orphanDelayedCallbacks=null;function signalLater(emitter,type){var arr=getHandlers(emitter,type,false)
if(!arr.length)return;var args=Array.prototype.slice.call(arguments,2),list;if(operationGroup){list=operationGroup.delayedCallbacks;}else if(orphanDelayedCallbacks){list=orphanDelayedCallbacks;}else{list=orphanDelayedCallbacks=[];setTimeout(fireOrphanDelayed,0);}
function bnd(f){return function(){f.apply(null,args);};};for(var i=0;i<arr.length;++i)
list.push(bnd(arr[i]));}
function fireOrphanDelayed(){var delayed=orphanDelayedCallbacks;orphanDelayedCallbacks=null;for(var i=0;i<delayed.length;++i)delayed[i]();}
function signalDOMEvent(cm,e,override){if(typeof e=="string")
e={type:e,preventDefault:function(){this.defaultPrevented=true;}};signal(cm,override||e.type,cm,e);return e_defaultPrevented(e)||e.codemirrorIgnore;}
function signalCursorActivity(cm){var arr=cm._handlers&&cm._handlers.cursorActivity;if(!arr)return;var set=cm.curOp.cursorActivityHandlers||(cm.curOp.cursorActivityHandlers=[]);for(var i=0;i<arr.length;++i)if(indexOf(set,arr[i])==-1)
set.push(arr[i]);}
function hasHandler(emitter,type){return getHandlers(emitter,type).length>0}
function eventMixin(ctor){ctor.prototype.on=function(type,f){on(this,type,f);};ctor.prototype.off=function(type,f){off(this,type,f);};}
var scrollerGap=30;var Pass=CodeMirror.Pass={toString:function(){return"CodeMirror.Pass";}};var sel_dontScroll={scroll:false},sel_mouse={origin:"*mouse"},sel_move={origin:"+move"};function Delayed(){this.id=null;}
Delayed.prototype.set=function(ms,f){clearTimeout(this.id);this.id=setTimeout(f,ms);};var countColumn=CodeMirror.countColumn=function(string,end,tabSize,startIndex,startValue){if(end==null){end=string.search(/[^\s\u00a0]/);if(end==-1)end=string.length;}
for(var i=startIndex||0,n=startValue||0;;){var nextTab=string.indexOf("\t",i);if(nextTab<0||nextTab>=end)
return n+(end-i);n+=nextTab-i;n+=tabSize-(n%tabSize);i=nextTab+1;}};var findColumn=CodeMirror.findColumn=function(string,goal,tabSize){for(var pos=0,col=0;;){var nextTab=string.indexOf("\t",pos);if(nextTab==-1)nextTab=string.length;var skipped=nextTab-pos;if(nextTab==string.length||col+skipped>=goal)
return pos+Math.min(skipped,goal-col);col+=nextTab-pos;col+=tabSize-(col%tabSize);pos=nextTab+1;if(col>=goal)return pos;}}
var spaceStrs=[""];function spaceStr(n){while(spaceStrs.length<=n)
spaceStrs.push(lst(spaceStrs)+" ");return spaceStrs[n];}
function lst(arr){return arr[arr.length-1];}
var selectInput=function(node){node.select();};if(ios)
selectInput=function(node){node.selectionStart=0;node.selectionEnd=node.value.length;};else if(ie)
selectInput=function(node){try{node.select();}catch(_e){}};function indexOf(array,elt){for(var i=0;i<array.length;++i)
if(array[i]==elt)return i;return-1;}
function map(array,f){var out=[];for(var i=0;i<array.length;i++)out[i]=f(array[i],i);return out;}
function nothing(){}
function createObj(base,props){var inst;if(Object.create){inst=Object.create(base);}else{nothing.prototype=base;inst=new nothing();}
if(props)copyObj(props,inst);return inst;};function copyObj(obj,target,overwrite){if(!target)target={};for(var prop in obj)
if(obj.hasOwnProperty(prop)&&(overwrite!==false||!target.hasOwnProperty(prop)))
target[prop]=obj[prop];return target;}
function bind(f){var args=Array.prototype.slice.call(arguments,1);return function(){return f.apply(null,args);};}
var nonASCIISingleCaseWordChar=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;var isWordCharBasic=CodeMirror.isWordChar=function(ch){return/\w/.test(ch)||ch>"\x80"&&(ch.toUpperCase()!=ch.toLowerCase()||nonASCIISingleCaseWordChar.test(ch));};function isWordChar(ch,helper){if(!helper)return isWordCharBasic(ch);if(helper.source.indexOf("\\w")>-1&&isWordCharBasic(ch))return true;return helper.test(ch);}
function isEmpty(obj){for(var n in obj)if(obj.hasOwnProperty(n)&&obj[n])return false;return true;}
var extendingChars=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function isExtendingChar(ch){return ch.charCodeAt(0)>=768&&extendingChars.test(ch);}
function elt(tag,content,className,style){var e=document.createElement(tag);if(className)e.className=className;if(style)e.style.cssText=style;if(typeof content=="string")e.appendChild(document.createTextNode(content));else if(content)for(var i=0;i<content.length;++i)e.appendChild(content[i]);return e;}
var range;if(document.createRange)range=function(node,start,end,endNode){var r=document.createRange();r.setEnd(endNode||node,end);r.setStart(node,start);return r;};else range=function(node,start,end){var r=document.body.createTextRange();try{r.moveToElementText(node.parentNode);}
catch(e){return r;}
r.collapse(true);r.moveEnd("character",end);r.moveStart("character",start);return r;};function removeChildren(e){for(var count=e.childNodes.length;count>0;--count)
e.removeChild(e.firstChild);return e;}
function removeChildrenAndAdd(parent,e){return removeChildren(parent).appendChild(e);}
var contains=CodeMirror.contains=function(parent,child){if(child.nodeType==3)
child=child.parentNode;if(parent.contains)
return parent.contains(child);do{if(child.nodeType==11)child=child.host;if(child==parent)return true;}while(child=child.parentNode);};function activeElt(){var activeElement=document.activeElement;while(activeElement&&activeElement.root&&activeElement.root.activeElement)
activeElement=activeElement.root.activeElement;return activeElement;}
if(ie&&ie_version<11)activeElt=function(){try{return document.activeElement;}
catch(e){return document.body;}};function classTest(cls){return new RegExp("(^|\\s)"+cls+"(?:$|\\s)\\s*");}
var rmClass=CodeMirror.rmClass=function(node,cls){var current=node.className;var match=classTest(cls).exec(current);if(match){var after=current.slice(match.index+match[0].length);node.className=current.slice(0,match.index)+(after?match[1]+after:"");}};var addClass=CodeMirror.addClass=function(node,cls){var current=node.className;if(!classTest(cls).test(current))node.className+=(current?" ":"")+cls;};function joinClasses(a,b){var as=a.split(" ");for(var i=0;i<as.length;i++)
if(as[i]&&!classTest(as[i]).test(b))b+=" "+as[i];return b;}
function forEachCodeMirror(f){if(!document.body.getElementsByClassName)return;var byClass=document.body.getElementsByClassName("CodeMirror");for(var i=0;i<byClass.length;i++){var cm=byClass[i].CodeMirror;if(cm)f(cm);}}
var globalsRegistered=false;function ensureGlobalHandlers(){if(globalsRegistered)return;registerGlobalHandlers();globalsRegistered=true;}
function registerGlobalHandlers(){var resizeTimer;on(window,"resize",function(){if(resizeTimer==null)resizeTimer=setTimeout(function(){resizeTimer=null;forEachCodeMirror(onResize);},100);});on(window,"blur",function(){forEachCodeMirror(onBlur);});}
var dragAndDrop=function(){if(ie&&ie_version<9)return false;var div=elt('div');return"draggable"in div||"dragDrop"in div;}();var zwspSupported;function zeroWidthElement(measure){if(zwspSupported==null){var test=elt("span","\u200b");removeChildrenAndAdd(measure,elt("span",[test,document.createTextNode("x")]));if(measure.firstChild.offsetHeight!=0)
zwspSupported=test.offsetWidth<=1&&test.offsetHeight>2&&!(ie&&ie_version<8);}
var node=zwspSupported?elt("span","\u200b"):elt("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px");node.setAttribute("cm-text","");return node;}
var badBidiRects;function hasBadBidiRects(measure){if(badBidiRects!=null)return badBidiRects;var txt=removeChildrenAndAdd(measure,document.createTextNode("A\u062eA"));var r0=range(txt,0,1).getBoundingClientRect();if(!r0||r0.left==r0.right)return false;var r1=range(txt,1,2).getBoundingClientRect();return badBidiRects=(r1.right-r0.right<3);}
var splitLinesAuto=CodeMirror.splitLines="\n\nb".split(/\n/).length!=3?function(string){var pos=0,result=[],l=string.length;while(pos<=l){var nl=string.indexOf("\n",pos);if(nl==-1)nl=string.length;var line=string.slice(pos,string.charAt(nl-1)=="\r"?nl-1:nl);var rt=line.indexOf("\r");if(rt!=-1){result.push(line.slice(0,rt));pos+=rt+1;}else{result.push(line);pos=nl+1;}}
return result;}:function(string){return string.split(/\r\n?|\n/);};var hasSelection=window.getSelection?function(te){try{return te.selectionStart!=te.selectionEnd;}
catch(e){return false;}}:function(te){try{var range=te.ownerDocument.selection.createRange();}
catch(e){}
if(!range||range.parentElement()!=te)return false;return range.compareEndPoints("StartToEnd",range)!=0;};var hasCopyEvent=(function(){var e=elt("div");if("oncopy"in e)return true;e.setAttribute("oncopy","return;");return typeof e.oncopy=="function";})();var badZoomedRects=null;function hasBadZoomedRects(measure){if(badZoomedRects!=null)return badZoomedRects;var node=removeChildrenAndAdd(measure,elt("span","x"));var normal=node.getBoundingClientRect();var fromRange=range(node,0,1).getBoundingClientRect();return badZoomedRects=Math.abs(normal.left-fromRange.left)>1;}
var keyNames=CodeMirror.keyNames={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};(function(){for(var i=0;i<10;i++)keyNames[i+48]=keyNames[i+96]=String(i);for(var i=65;i<=90;i++)keyNames[i]=String.fromCharCode(i);for(var i=1;i<=12;i++)keyNames[i+111]=keyNames[i+63235]="F"+i;})();function iterateBidiSections(order,from,to,f){if(!order)return f(from,to,"ltr");var found=false;for(var i=0;i<order.length;++i){var part=order[i];if(part.from<to&&part.to>from||from==to&&part.to==from){f(Math.max(part.from,from),Math.min(part.to,to),part.level==1?"rtl":"ltr");found=true;}}
if(!found)f(from,to,"ltr");}
function bidiLeft(part){return part.level%2?part.to:part.from;}
function bidiRight(part){return part.level%2?part.from:part.to;}
function lineLeft(line){var order=getOrder(line);return order?bidiLeft(order[0]):0;}
function lineRight(line){var order=getOrder(line);if(!order)return line.text.length;return bidiRight(lst(order));}
function lineStart(cm,lineN){var line=getLine(cm.doc,lineN);var visual=visualLine(line);if(visual!=line)lineN=lineNo(visual);var order=getOrder(visual);var ch=!order?0:order[0].level%2?lineRight(visual):lineLeft(visual);return Pos(lineN,ch);}
function lineEnd(cm,lineN){var merged,line=getLine(cm.doc,lineN);while(merged=collapsedSpanAtEnd(line)){line=merged.find(1,true).line;lineN=null;}
var order=getOrder(line);var ch=!order?line.text.length:order[0].level%2?lineLeft(line):lineRight(line);return Pos(lineN==null?lineNo(line):lineN,ch);}
function lineStartSmart(cm,pos){var start=lineStart(cm,pos.line);var line=getLine(cm.doc,start.line);var order=getOrder(line);if(!order||order[0].level==0){var firstNonWS=Math.max(0,line.text.search(/\S/));var inWS=pos.line==start.line&&pos.ch<=firstNonWS&&pos.ch;return Pos(start.line,inWS?0:firstNonWS);}
return start;}
function compareBidiLevel(order,a,b){var linedir=order[0].level;if(a==linedir)return true;if(b==linedir)return false;return a<b;}
var bidiOther;function getBidiPartAt(order,pos){bidiOther=null;for(var i=0,found;i<order.length;++i){var cur=order[i];if(cur.from<pos&&cur.to>pos)return i;if((cur.from==pos||cur.to==pos)){if(found==null){found=i;}else if(compareBidiLevel(order,cur.level,order[found].level)){if(cur.from!=cur.to)bidiOther=found;return i;}else{if(cur.from!=cur.to)bidiOther=i;return found;}}}
return found;}
function moveInLine(line,pos,dir,byUnit){if(!byUnit)return pos+dir;do pos+=dir;while(pos>0&&isExtendingChar(line.text.charAt(pos)));return pos;}
function moveVisually(line,start,dir,byUnit){var bidi=getOrder(line);if(!bidi)return moveLogically(line,start,dir,byUnit);var pos=getBidiPartAt(bidi,start),part=bidi[pos];var target=moveInLine(line,start,part.level%2?-dir:dir,byUnit);for(;;){if(target>part.from&&target<part.to)return target;if(target==part.from||target==part.to){if(getBidiPartAt(bidi,target)==pos)return target;part=bidi[pos+=dir];return(dir>0)==part.level%2?part.to:part.from;}else{part=bidi[pos+=dir];if(!part)return null;if((dir>0)==part.level%2)
target=moveInLine(line,part.to,-1,byUnit);else
target=moveInLine(line,part.from,1,byUnit);}}}
function moveLogically(line,start,dir,byUnit){var target=start+dir;if(byUnit)while(target>0&&isExtendingChar(line.text.charAt(target)))target+=dir;return target<0||target>line.text.length?null:target;}
var bidiOrdering=(function(){var lowTypes="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN";var arabicTypes="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm";function charType(code){if(code<=0xf7)return lowTypes.charAt(code);else if(0x590<=code&&code<=0x5f4)return"R";else if(0x600<=code&&code<=0x6ed)return arabicTypes.charAt(code-0x600);else if(0x6ee<=code&&code<=0x8ac)return"r";else if(0x2000<=code&&code<=0x200b)return"w";else if(code==0x200c)return"b";else return"L";}
var bidiRE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;var isNeutral=/[stwN]/,isStrong=/[LRr]/,countsAsLeft=/[Lb1n]/,countsAsNum=/[1n]/;var outerType="L";function BidiSpan(level,from,to){this.level=level;this.from=from;this.to=to;}
return function(str){if(!bidiRE.test(str))return false;var len=str.length,types=[];for(var i=0,type;i<len;++i)
types.push(type=charType(str.charCodeAt(i)));for(var i=0,prev=outerType;i<len;++i){var type=types[i];if(type=="m")types[i]=prev;else prev=type;}
for(var i=0,cur=outerType;i<len;++i){var type=types[i];if(type=="1"&&cur=="r")types[i]="n";else if(isStrong.test(type)){cur=type;if(type=="r")types[i]="R";}}
for(var i=1,prev=types[0];i<len-1;++i){var type=types[i];if(type=="+"&&prev=="1"&&types[i+1]=="1")types[i]="1";else if(type==","&&prev==types[i+1]&&(prev=="1"||prev=="n"))types[i]=prev;prev=type;}
for(var i=0;i<len;++i){var type=types[i];if(type==",")types[i]="N";else if(type=="%"){for(var end=i+1;end<len&&types[end]=="%";++end){}
var replace=(i&&types[i-1]=="!")||(end<len&&types[end]=="1")?"1":"N";for(var j=i;j<end;++j)types[j]=replace;i=end-1;}}
for(var i=0,cur=outerType;i<len;++i){var type=types[i];if(cur=="L"&&type=="1")types[i]="L";else if(isStrong.test(type))cur=type;}
for(var i=0;i<len;++i){if(isNeutral.test(types[i])){for(var end=i+1;end<len&&isNeutral.test(types[end]);++end){}
var before=(i?types[i-1]:outerType)=="L";var after=(end<len?types[end]:outerType)=="L";var replace=before||after?"L":"R";for(var j=i;j<end;++j)types[j]=replace;i=end-1;}}
var order=[],m;for(var i=0;i<len;){if(countsAsLeft.test(types[i])){var start=i;for(++i;i<len&&countsAsLeft.test(types[i]);++i){}
order.push(new BidiSpan(0,start,i));}else{var pos=i,at=order.length;for(++i;i<len&&types[i]!="L";++i){}
for(var j=pos;j<i;){if(countsAsNum.test(types[j])){if(pos<j)order.splice(at,0,new BidiSpan(1,pos,j));var nstart=j;for(++j;j<i&&countsAsNum.test(types[j]);++j){}
order.splice(at,0,new BidiSpan(2,nstart,j));pos=j;}else++j;}
if(pos<i)order.splice(at,0,new BidiSpan(1,pos,i));}}
if(order[0].level==1&&(m=str.match(/^\s+/))){order[0].from=m[0].length;order.unshift(new BidiSpan(0,0,m[0].length));}
if(lst(order).level==1&&(m=str.match(/\s+$/))){lst(order).to-=m[0].length;order.push(new BidiSpan(0,len-m[0].length,len));}
if(order[0].level==2)
order.unshift(new BidiSpan(1,order[0].to,order[0].to));if(order[0].level!=lst(order).level)
order.push(new BidiSpan(order[0].level,len,len));return order;};})();CodeMirror.version="5.11.0";return CodeMirror;});(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else
mod(CodeMirror);})(function(CodeMirror){"use strict";var HINT_ELEMENT_CLASS="CodeMirror-hint";var ACTIVE_HINT_ELEMENT_CLASS="CodeMirror-hint-active";CodeMirror.showHint=function(cm,getHints,options){if(!getHints)return cm.showHint(options);if(options&&options.async)getHints.async=true;var newOpts={hint:getHints};if(options)for(var prop in options)newOpts[prop]=options[prop];return cm.showHint(newOpts);};CodeMirror.defineExtension("showHint",function(options){options=parseOptions(this,this.getCursor("start"),options);var selections=this.listSelections()
if(selections.length>1)return;if(this.somethingSelected()){if(!options.hint.supportsSelection)return;for(var i=0;i<selections.length;i++)
if(selections[i].head.line!=selections[i].anchor.line)return;}
if(this.state.completionActive)this.state.completionActive.close();var completion=this.state.completionActive=new Completion(this,options);if(!completion.options.hint)return;CodeMirror.signal(this,"startCompletion",this);completion.update(true);});function Completion(cm,options){this.cm=cm;this.options=options;this.widget=null;this.debounce=0;this.tick=0;this.startPos=this.cm.getCursor("start");this.startLen=this.cm.getLine(this.startPos.line).length-this.cm.getSelection().length;var self=this;cm.on("cursorActivity",this.activityFunc=function(){self.cursorActivity();});}
var requestAnimationFrame=window.requestAnimationFrame||function(fn){return setTimeout(fn,1000/60);};var cancelAnimationFrame=window.cancelAnimationFrame||clearTimeout;Completion.prototype={close:function(){if(!this.active())return;this.cm.state.completionActive=null;this.tick=null;this.cm.off("cursorActivity",this.activityFunc);if(this.widget&&this.data)CodeMirror.signal(this.data,"close");if(this.widget)this.widget.close();CodeMirror.signal(this.cm,"endCompletion",this.cm);},active:function(){return this.cm.state.completionActive==this;},pick:function(data,i){var completion=data.list[i];if(completion.hint)completion.hint(this.cm,data,completion);else this.cm.replaceRange(getText(completion),completion.from||data.from,completion.to||data.to,"complete");CodeMirror.signal(data,"pick",completion);this.close();},cursorActivity:function(){if(this.debounce){cancelAnimationFrame(this.debounce);this.debounce=0;}
var pos=this.cm.getCursor(),line=this.cm.getLine(pos.line);if(pos.line!=this.startPos.line||line.length-pos.ch!=this.startLen-this.startPos.ch||pos.ch<this.startPos.ch||this.cm.somethingSelected()||(pos.ch&&this.options.closeCharacters.test(line.charAt(pos.ch-1)))){this.close();}else{var self=this;this.debounce=requestAnimationFrame(function(){self.update();});if(this.widget)this.widget.disable();}},update:function(first){if(this.tick==null)return;if(!this.options.hint.async){this.finishUpdate(this.options.hint(this.cm,this.options),first);}else{var myTick=++this.tick,self=this;this.options.hint(this.cm,function(data){if(self.tick==myTick)self.finishUpdate(data,first);},this.options);}},finishUpdate:function(data,first){if(this.data)CodeMirror.signal(this.data,"update");var picked=(this.widget&&this.widget.picked)||(first&&this.options.completeSingle);if(this.widget)this.widget.close();if(data&&this.data&&isNewCompletion(this.data,data))return;this.data=data;if(data&&data.list.length){if(picked&&data.list.length==1){this.pick(data,0);}else{this.widget=new Widget(this,data);CodeMirror.signal(data,"shown");}}}};function isNewCompletion(old,nw){var moved=CodeMirror.cmpPos(nw.from,old.from)
return moved>0&&old.to.ch-old.from.ch!=nw.to.ch-nw.from.ch}
function parseOptions(cm,pos,options){var editor=cm.options.hintOptions;var out={};for(var prop in defaultOptions)out[prop]=defaultOptions[prop];if(editor)for(var prop in editor)
if(editor[prop]!==undefined)out[prop]=editor[prop];if(options)for(var prop in options)
if(options[prop]!==undefined)out[prop]=options[prop];if(out.hint.resolve)out.hint=out.hint.resolve(cm,pos)
return out;}
function getText(completion){if(typeof completion=="string")return completion;else return completion.text;}
function buildKeyMap(completion,handle){var baseMap={Up:function(){handle.moveFocus(-1);},Down:function(){handle.moveFocus(1);},PageUp:function(){handle.moveFocus(-handle.menuSize()+1,true);},PageDown:function(){handle.moveFocus(handle.menuSize()-1,true);},Home:function(){handle.setFocus(0);},End:function(){handle.setFocus(handle.length-1);},Enter:handle.pick,Tab:handle.pick,Esc:handle.close};var custom=completion.options.customKeys;var ourMap=custom?{}:baseMap;function addBinding(key,val){var bound;if(typeof val!="string")
bound=function(cm){return val(cm,handle);};else if(baseMap.hasOwnProperty(val))
bound=baseMap[val];else
bound=val;ourMap[key]=bound;}
if(custom)
for(var key in custom)if(custom.hasOwnProperty(key))
addBinding(key,custom[key]);var extra=completion.options.extraKeys;if(extra)
for(var key in extra)if(extra.hasOwnProperty(key))
addBinding(key,extra[key]);return ourMap;}
function getHintElement(hintsElement,el){while(el&&el!=hintsElement){if(el.nodeName.toUpperCase()==="LI"&&el.parentNode==hintsElement)return el;el=el.parentNode;}}
function Widget(completion,data){this.completion=completion;this.data=data;this.picked=false;var widget=this,cm=completion.cm;var hints=this.hints=document.createElement("ul");hints.className="CodeMirror-hints";this.selectedHint=data.selectedHint||0;var completions=data.list;for(var i=0;i<completions.length;++i){var elt=hints.appendChild(document.createElement("li")),cur=completions[i];var className=HINT_ELEMENT_CLASS+(i!=this.selectedHint?"":" "+ACTIVE_HINT_ELEMENT_CLASS);if(cur.className!=null)className=cur.className+" "+className;elt.className=className;if(cur.render)cur.render(elt,data,cur);else elt.appendChild(document.createTextNode(cur.displayText||getText(cur)));elt.hintId=i;}
var pos=cm.cursorCoords(completion.options.alignWithWord?data.from:null);var left=pos.left,top=pos.bottom,below=true;hints.style.left=left+"px";hints.style.top=top+"px";var winW=window.innerWidth||Math.max(document.body.offsetWidth,document.documentElement.offsetWidth);var winH=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);(completion.options.container||document.body).appendChild(hints);var box=hints.getBoundingClientRect(),overlapY=box.bottom-winH;if(overlapY>0){var height=box.bottom-box.top,curTop=pos.top-(pos.bottom-box.top);if(curTop-height>0){hints.style.top=(top=pos.top-height)+"px";below=false;}else if(height>winH){hints.style.height=(winH-5)+"px";hints.style.top=(top=pos.bottom-box.top)+"px";var cursor=cm.getCursor();if(data.from.ch!=cursor.ch){pos=cm.cursorCoords(cursor);hints.style.left=(left=pos.left)+"px";box=hints.getBoundingClientRect();}}}
var overlapX=box.right-winW;if(overlapX>0){if(box.right-box.left>winW){hints.style.width=(winW-5)+"px";overlapX-=(box.right-box.left)-winW;}
hints.style.left=(left=pos.left-overlapX)+"px";}
cm.addKeyMap(this.keyMap=buildKeyMap(completion,{moveFocus:function(n,avoidWrap){widget.changeActive(widget.selectedHint+n,avoidWrap);},setFocus:function(n){widget.changeActive(n);},menuSize:function(){return widget.screenAmount();},length:completions.length,close:function(){completion.close();},pick:function(){widget.pick();},data:data}));if(completion.options.closeOnUnfocus){var closingOnBlur;cm.on("blur",this.onBlur=function(){closingOnBlur=setTimeout(function(){completion.close();},100);});cm.on("focus",this.onFocus=function(){clearTimeout(closingOnBlur);});}
var startScroll=cm.getScrollInfo();cm.on("scroll",this.onScroll=function(){var curScroll=cm.getScrollInfo(),editor=cm.getWrapperElement().getBoundingClientRect();var newTop=top+startScroll.top-curScroll.top;var point=newTop-(window.pageYOffset||(document.documentElement||document.body).scrollTop);if(!below)point+=hints.offsetHeight;if(point<=editor.top||point>=editor.bottom)return completion.close();hints.style.top=newTop+"px";hints.style.left=(left+startScroll.left-curScroll.left)+"px";});CodeMirror.on(hints,"dblclick",function(e){var t=getHintElement(hints,e.target||e.srcElement);if(t&&t.hintId!=null){widget.changeActive(t.hintId);widget.pick();}});CodeMirror.on(hints,"click",function(e){var t=getHintElement(hints,e.target||e.srcElement);if(t&&t.hintId!=null){widget.changeActive(t.hintId);if(completion.options.completeOnSingleClick)widget.pick();}});CodeMirror.on(hints,"mousedown",function(){setTimeout(function(){cm.focus();},20);});CodeMirror.signal(data,"select",completions[0],hints.firstChild);return true;}
Widget.prototype={close:function(){if(this.completion.widget!=this)return;this.completion.widget=null;this.hints.parentNode.removeChild(this.hints);this.completion.cm.removeKeyMap(this.keyMap);var cm=this.completion.cm;if(this.completion.options.closeOnUnfocus){cm.off("blur",this.onBlur);cm.off("focus",this.onFocus);}
cm.off("scroll",this.onScroll);},disable:function(){this.completion.cm.removeKeyMap(this.keyMap);var widget=this;this.keyMap={Enter:function(){widget.picked=true;}};this.completion.cm.addKeyMap(this.keyMap);},pick:function(){this.completion.pick(this.data,this.selectedHint);},changeActive:function(i,avoidWrap){if(i>=this.data.list.length)
i=avoidWrap?this.data.list.length-1:0;else if(i<0)
i=avoidWrap?0:this.data.list.length-1;if(this.selectedHint==i)return;var node=this.hints.childNodes[this.selectedHint];node.className=node.className.replace(" "+ACTIVE_HINT_ELEMENT_CLASS,"");node=this.hints.childNodes[this.selectedHint=i];node.className+=" "+ACTIVE_HINT_ELEMENT_CLASS;if(node.offsetTop<this.hints.scrollTop)
this.hints.scrollTop=node.offsetTop-3;else if(node.offsetTop+node.offsetHeight>this.hints.scrollTop+this.hints.clientHeight)
this.hints.scrollTop=node.offsetTop+node.offsetHeight-this.hints.clientHeight+3;CodeMirror.signal(this.data,"select",this.data.list[this.selectedHint],node);},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1;}};function applicableHelpers(cm,helpers){if(!cm.somethingSelected())return helpers
var result=[]
for(var i=0;i<helpers.length;i++)
if(helpers[i].supportsSelection)result.push(helpers[i])
return result}
function resolveAutoHints(cm,pos){var helpers=cm.getHelpers(pos,"hint"),words
if(helpers.length){var async=false,resolved
for(var i=0;i<helpers.length;i++)if(helpers[i].async)async=true
if(async){resolved=function(cm,callback,options){var app=applicableHelpers(cm,helpers)
function run(i,result){if(i==app.length)return callback(null)
var helper=app[i]
if(helper.async){helper(cm,function(result){if(result)callback(result)
else run(i+1)},options)}else{var result=helper(cm,options)
if(result)callback(result)
else run(i+1)}}
run(0)}
resolved.async=true}else{resolved=function(cm,options){var app=applicableHelpers(cm,helpers)
for(var i=0;i<app.length;i++){var cur=app[i](cm,options)
if(cur&&cur.list.length)return cur}}}
resolved.supportsSelection=true
return resolved}else if(words=cm.getHelper(cm.getCursor(),"hintWords")){return function(cm){return CodeMirror.hint.fromList(cm,{words:words})}}else if(CodeMirror.hint.anyword){return function(cm,options){return CodeMirror.hint.anyword(cm,options)}}else{return function(){}}}
CodeMirror.registerHelper("hint","auto",{resolve:resolveAutoHints});CodeMirror.registerHelper("hint","fromList",function(cm,options){var cur=cm.getCursor(),token=cm.getTokenAt(cur);var to=CodeMirror.Pos(cur.line,token.end);if(token.string&&/\w/.test(token.string[token.string.length-1])){var term=token.string,from=CodeMirror.Pos(cur.line,token.start);}else{var term="",from=to;}
var found=[];for(var i=0;i<options.words.length;i++){var word=options.words[i];if(word.slice(0,term.length)==term)
found.push(word);}
if(found.length)return{list:found,from:from,to:to};});CodeMirror.commands.autocomplete=CodeMirror.showHint;var defaultOptions={hint:CodeMirror.hint.auto,completeSingle:true,alignWithWord:true,closeCharacters:/[\s()\[\]{};:>,]/,closeOnUnfocus:true,completeOnSingleClick:true,container:null,customKeys:null,extraKeys:null};CodeMirror.defineOption("hintOptions",null);});(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else
mod(CodeMirror);})(function(CodeMirror){"use strict";function wordRegexp(words){return new RegExp("^(("+words.join(")|(")+"))\\b");}
var wordOperators=wordRegexp(["and","or","not","is"]);var commonKeywords=["as","assert","break","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","lambda","pass","raise","return","try","while","with","yield","in"];var commonBuiltins=["abs","all","any","bin","bool","bytearray","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip","__import__","NotImplemented","Ellipsis","__debug__"];var py2={builtins:["apply","basestring","buffer","cmp","coerce","execfile","file","intern","long","raw_input","reduce","reload","unichr","unicode","xrange","False","True","None"],keywords:["exec","print"]};var py3={builtins:["ascii","bytes","exec","print"],keywords:["nonlocal","False","True","None","async","await"]};CodeMirror.registerHelper("hintWords","python",commonKeywords.concat(commonBuiltins));function top(state){return state.scopes[state.scopes.length-1];}
CodeMirror.defineMode("python",function(conf,parserConf){var ERRORCLASS="error";var singleDelimiters=parserConf.singleDelimiters||/^[\(\)\[\]\{\}@,:`=;\.]/;var doubleOperators=parserConf.doubleOperators||/^([!<>]==|<>|<<|>>|\/\/|\*\*)/;var doubleDelimiters=parserConf.doubleDelimiters||/^(\+=|\-=|\*=|%=|\/=|&=|\|=|\^=)/;var tripleDelimiters=parserConf.tripleDelimiters||/^(\/\/=|>>=|<<=|\*\*=)/;if(parserConf.version&&parseInt(parserConf.version,10)==3){var singleOperators=parserConf.singleOperators||/^[\+\-\*\/%&|\^~<>!@]/;var identifiers=parserConf.identifiers||/^[_A-Za-z\u00A1-\uFFFF][_A-Za-z0-9\u00A1-\uFFFF]*/;}else{var singleOperators=parserConf.singleOperators||/^[\+\-\*\/%&|\^~<>!]/;var identifiers=parserConf.identifiers||/^[_A-Za-z][_A-Za-z0-9]*/;}
var hangingIndent=parserConf.hangingIndent||conf.indentUnit;var myKeywords=commonKeywords,myBuiltins=commonBuiltins;if(parserConf.extra_keywords!=undefined)
myKeywords=myKeywords.concat(parserConf.extra_keywords);if(parserConf.extra_builtins!=undefined)
myBuiltins=myBuiltins.concat(parserConf.extra_builtins);if(parserConf.version&&parseInt(parserConf.version,10)==3){myKeywords=myKeywords.concat(py3.keywords);myBuiltins=myBuiltins.concat(py3.builtins);var stringPrefixes=new RegExp("^(([rb]|(br))?('{3}|\"{3}|['\"]))","i");}else{myKeywords=myKeywords.concat(py2.keywords);myBuiltins=myBuiltins.concat(py2.builtins);var stringPrefixes=new RegExp("^(([rub]|(ur)|(br))?('{3}|\"{3}|['\"]))","i");}
var keywords=wordRegexp(myKeywords);var builtins=wordRegexp(myBuiltins);function tokenBase(stream,state){if(stream.sol())state.indent=stream.indentation()
if(stream.sol()&&top(state).type=="py"){var scopeOffset=top(state).offset;if(stream.eatSpace()){var lineOffset=stream.indentation();if(lineOffset>scopeOffset)
pushPyScope(state);else if(lineOffset<scopeOffset&&dedent(stream,state))
state.errorToken=true;return null;}else{var style=tokenBaseInner(stream,state);if(scopeOffset>0&&dedent(stream,state))
style+=" "+ERRORCLASS;return style;}}
return tokenBaseInner(stream,state);}
function tokenBaseInner(stream,state){if(stream.eatSpace())return null;var ch=stream.peek();if(ch=="#"){stream.skipToEnd();return"comment";}
if(stream.match(/^[0-9\.]/,false)){var floatLiteral=false;if(stream.match(/^\d*\.\d+(e[\+\-]?\d+)?/i)){floatLiteral=true;}
if(stream.match(/^\d+\.\d*/)){floatLiteral=true;}
if(stream.match(/^\.\d+/)){floatLiteral=true;}
if(floatLiteral){stream.eat(/J/i);return"number";}
var intLiteral=false;if(stream.match(/^0x[0-9a-f]+/i))intLiteral=true;if(stream.match(/^0b[01]+/i))intLiteral=true;if(stream.match(/^0o[0-7]+/i))intLiteral=true;if(stream.match(/^[1-9]\d*(e[\+\-]?\d+)?/)){stream.eat(/J/i);intLiteral=true;}
if(stream.match(/^0(?![\dx])/i))intLiteral=true;if(intLiteral){stream.eat(/L/i);return"number";}}
if(stream.match(stringPrefixes)){state.tokenize=tokenStringFactory(stream.current());return state.tokenize(stream,state);}
if(stream.match(tripleDelimiters)||stream.match(doubleDelimiters))
return"punctuation";if(stream.match(doubleOperators)||stream.match(singleOperators))
return"operator";if(stream.match(singleDelimiters))
return"punctuation";if(state.lastToken=="."&&stream.match(identifiers))
return"property";if(stream.match(keywords)||stream.match(wordOperators))
return"keyword";if(stream.match(builtins))
return"builtin";if(stream.match(/^(self|cls)\b/))
return"variable-2";if(stream.match(identifiers)){if(state.lastToken=="def"||state.lastToken=="class")
return"def";return"variable";}
stream.next();return ERRORCLASS;}
function tokenStringFactory(delimiter){while("rub".indexOf(delimiter.charAt(0).toLowerCase())>=0)
delimiter=delimiter.substr(1);var singleline=delimiter.length==1;var OUTCLASS="string";function tokenString(stream,state){while(!stream.eol()){stream.eatWhile(/[^'"\\]/);if(stream.eat("\\")){stream.next();if(singleline&&stream.eol())
return OUTCLASS;}else if(stream.match(delimiter)){state.tokenize=tokenBase;return OUTCLASS;}else{stream.eat(/['"]/);}}
if(singleline){if(parserConf.singleLineStringErrors)
return ERRORCLASS;else
state.tokenize=tokenBase;}
return OUTCLASS;}
tokenString.isString=true;return tokenString;}
function pushPyScope(state){while(top(state).type!="py")state.scopes.pop()
state.scopes.push({offset:top(state).offset+conf.indentUnit,type:"py",align:null})}
function pushBracketScope(stream,state,type){var align=stream.match(/^([\s\[\{\(]|#.*)*$/,false)?null:stream.column()+1
state.scopes.push({offset:state.indent+hangingIndent,type:type,align:align})}
function dedent(stream,state){var indented=stream.indentation();while(top(state).offset>indented){if(top(state).type!="py")return true;state.scopes.pop();}
return top(state).offset!=indented;}
function tokenLexer(stream,state){var style=state.tokenize(stream,state);var current=stream.current();if(current=="@"){if(parserConf.version&&parseInt(parserConf.version,10)==3)
return stream.match(identifiers,false)?"meta":"operator";else
return stream.match(identifiers,false)?"meta":ERRORCLASS;}
if((style=="variable"||style=="builtin")&&state.lastToken=="meta")
style="meta";if(current=="pass"||current=="return")
state.dedent+=1;if(current=="lambda")state.lambda=true;if(current==":"&&!state.lambda&&top(state).type=="py")
pushPyScope(state);var delimiter_index=current.length==1?"[({".indexOf(current):-1;if(delimiter_index!=-1)
pushBracketScope(stream,state,"])}".slice(delimiter_index,delimiter_index+1));delimiter_index="])}".indexOf(current);if(delimiter_index!=-1){if(top(state).type==current)state.indent=state.scopes.pop().offset-hangingIndent
else return ERRORCLASS;}
if(state.dedent>0&&stream.eol()&&top(state).type=="py"){if(state.scopes.length>1)state.scopes.pop();state.dedent-=1;}
return style;}
var external={startState:function(basecolumn){return{tokenize:tokenBase,scopes:[{offset:basecolumn||0,type:"py",align:null}],indent:basecolumn||0,lastToken:null,lambda:false,dedent:0};},token:function(stream,state){var addErr=state.errorToken;if(addErr)state.errorToken=false;var style=tokenLexer(stream,state);if(style&&style!="comment")
state.lastToken=(style=="keyword"||style=="punctuation")?stream.current():style;if(style=="punctuation")style=null;if(stream.eol()&&state.lambda)
state.lambda=false;return addErr?style+" "+ERRORCLASS:style;},indent:function(state,textAfter){if(state.tokenize!=tokenBase)
return state.tokenize.isString?CodeMirror.Pass:0;var scope=top(state),closing=scope.type==textAfter.charAt(0)
if(scope.align!=null)
return scope.align-(closing?1:0)
else
return scope.offset-(closing?hangingIndent:0)},electricInput:/^\s*[\}\]\)]$/,closeBrackets:{triples:"'\""},lineComment:"#",fold:"indent"};return external;});CodeMirror.defineMIME("text/x-python","python");var words=function(str){return str.split(" ");};CodeMirror.defineMIME("text/x-cython",{name:"python",extra_keywords:words("by cdef cimport cpdef ctypedef enum except"+"extern gil include nogil property public"+"readonly struct union DEF IF ELIF ELSE")});});(function(q){var I,J,K,L,M,N,v,s={},w={},x={},O={treeId:"",treeObj:null,view:{addDiyDom:null,autoCancelSelected:!0,dblClickExpand:!0,expandSpeed:"fast",fontCss:{},nameIsHTML:!1,selectedMulti:!0,showIcon:!0,showLine:!0,showTitle:!0,txtSelectedEnable:!1},data:{key:{children:"children",name:"name",title:"",url:"url",icon:"icon"},simpleData:{enable:!1,idKey:"id",pIdKey:"pId",rootPId:null},keep:{parent:!1,leaf:!1}},async:{enable:!1,contentType:"application/x-www-form-urlencoded",type:"post",dataType:"text",url:"",autoParam:[],otherParam:[],dataFilter:null},callback:{beforeAsync:null,beforeClick:null,beforeDblClick:null,beforeRightClick:null,beforeMouseDown:null,beforeMouseUp:null,beforeExpand:null,beforeCollapse:null,beforeRemove:null,onAsyncError:null,onAsyncSuccess:null,onNodeCreated:null,onClick:null,onDblClick:null,onRightClick:null,onMouseDown:null,onMouseUp:null,onExpand:null,onCollapse:null,onRemove:null}},y=[function(b){var a=b.treeObj,c=f.event;a.bind(c.NODECREATED,function(a,c,g){j.apply(b.callback.onNodeCreated,[a,c,g])});a.bind(c.CLICK,function(a,c,g,m,h){j.apply(b.callback.onClick,[c,g,m,h])});a.bind(c.EXPAND,function(a,c,g){j.apply(b.callback.onExpand,[a,c,g])});a.bind(c.COLLAPSE,function(a,c,g){j.apply(b.callback.onCollapse,[a,c,g])});a.bind(c.ASYNC_SUCCESS,function(a,c,g,h){j.apply(b.callback.onAsyncSuccess,[a,c,g,h])});a.bind(c.ASYNC_ERROR,function(a,c,g,h,f,i){j.apply(b.callback.onAsyncError,[a,c,g,h,f,i])});a.bind(c.REMOVE,function(a,c,g){j.apply(b.callback.onRemove,[a,c,g])});a.bind(c.SELECTED,function(a,c,g){j.apply(b.callback.onSelected,[c,g])});a.bind(c.UNSELECTED,function(a,c,g){j.apply(b.callback.onUnSelected,[c,g])})}],z=[function(b){var a=f.event;b.treeObj.unbind(a.NODECREATED).unbind(a.CLICK).unbind(a.EXPAND).unbind(a.COLLAPSE).unbind(a.ASYNC_SUCCESS).unbind(a.ASYNC_ERROR).unbind(a.REMOVE).unbind(a.SELECTED).unbind(a.UNSELECTED)}],A=[function(b){var a=h.getCache(b);a||(a={},h.setCache(b,a));a.nodes=[];a.doms=[]}],B=[function(b,a,c,d,e,g){if(c){var m=h.getRoot(b),f=b.data.key.children;c.level=a;c.tId=b.treeId+"_"+ ++m.zId;c.parentTId=d?d.tId:null;c.open=typeof c.open=="string"?j.eqs(c.open,"true"):!!c.open;c[f]&&c[f].length>0?(c.isParent=!0,c.zAsync=!0):(c.isParent=typeof c.isParent=="string"?j.eqs(c.isParent,"true"):!!c.isParent,c.open=c.isParent&&!b.async.enable?c.open:!1,c.zAsync=!c.isParent);c.isFirstNode=e;c.isLastNode=g;c.getParentNode=function(){return h.getNodeCache(b,c.parentTId)};c.getPreNode=function(){return h.getPreNode(b,c)};c.getNextNode=function(){return h.getNextNode(b,c)};c.getIndex=function(){return h.getNodeIndex(b,c)};c.getPath=function(){return h.getNodePath(b,c)};c.isAjaxing=!1;h.fixPIdKeyValue(b,c)}}],u=[function(b){var a=b.target,c=h.getSetting(b.data.treeId),d="",e=null,g="",m="",i=null,n=null,k=null;if(j.eqs(b.type,"mousedown"))m="mousedown";else if(j.eqs(b.type,"mouseup"))m="mouseup";else if(j.eqs(b.type,"contextmenu"))m="contextmenu";else if(j.eqs(b.type,"click"))if(j.eqs(a.tagName,"span")&&a.getAttribute("treeNode"+f.id.SWITCH)!==null)d=j.getNodeMainDom(a).id,g="switchNode";else{if(k=j.getMDom(c,a,[{tagName:"a",attrName:"treeNode"+f.id.A}]))d=j.getNodeMainDom(k).id,g="clickNode"}else if(j.eqs(b.type,"dblclick")&&(m="dblclick",k=j.getMDom(c,a,[{tagName:"a",attrName:"treeNode"+f.id.A}])))d=j.getNodeMainDom(k).id,g="switchNode";if(m.length>0&&d.length==0&&(k=j.getMDom(c,a,[{tagName:"a",attrName:"treeNode"+f.id.A}])))d=j.getNodeMainDom(k).id;if(d.length>0)switch(e=h.getNodeCache(c,d),g){case"switchNode":e.isParent?j.eqs(b.type,"click")||j.eqs(b.type,"dblclick")&&j.apply(c.view.dblClickExpand,[c.treeId,e],c.view.dblClickExpand)?i=I:g="":g="";break;case"clickNode":i=J}switch(m){case"mousedown":n=K;break;case"mouseup":n=L;break;case"dblclick":n=M;break;case"contextmenu":n=N}return{stop:!1,node:e,nodeEventType:g,nodeEventCallback:i,treeEventType:m,treeEventCallback:n}}],C=[function(b){var a=h.getRoot(b);a||(a={},h.setRoot(b,a));a[b.data.key.children]=[];a.expandTriggerFlag=!1;a.curSelectedList=[];a.noSelection=!0;a.createdNodes=[];a.zId=0;a._ver=(new Date).getTime()}],D=[],E=[],F=[],G=[],H=[],h={addNodeCache:function(b,a){h.getCache(b).nodes[h.getNodeCacheId(a.tId)]=a},getNodeCacheId:function(b){return b.substring(b.lastIndexOf("_")+1)},addAfterA:function(b){E.push(b)},addBeforeA:function(b){D.push(b)},addInnerAfterA:function(b){G.push(b)},addInnerBeforeA:function(b){F.push(b)},addInitBind:function(b){y.push(b)},addInitUnBind:function(b){z.push(b)},addInitCache:function(b){A.push(b)},addInitNode:function(b){B.push(b)},addInitProxy:function(b,a){a?u.splice(0,0,b):u.push(b)},addInitRoot:function(b){C.push(b)},addNodesData:function(b,a,c,d){var e=b.data.key.children;a[e]?c>=a[e].length&&(c=-1):(a[e]=[],c=-1);if(a[e].length>0&&c===0)a[e][0].isFirstNode=!1,i.setNodeLineIcos(b,a[e][0]);else if(a[e].length>0&&c<0)a[e][a[e].length-1].isLastNode=!1,i.setNodeLineIcos(b,a[e][a[e].length-1]);a.isParent=!0;c<0?a[e]=a[e].concat(d):(b=[c,0].concat(d),a[e].splice.apply(a[e],b))},addSelectedNode:function(b,a){var c=h.getRoot(b);h.isSelectedNode(b,a)||c.curSelectedList.push(a)},addCreatedNode:function(b,a){(b.callback.onNodeCreated||b.view.addDiyDom)&&h.getRoot(b).createdNodes.push(a)},addZTreeTools:function(b){H.push(b)},exSetting:function(b){q.extend(!0,O,b)},fixPIdKeyValue:function(b,a){b.data.simpleData.enable&&(a[b.data.simpleData.pIdKey]=a.parentTId?a.getParentNode()[b.data.simpleData.idKey]:b.data.simpleData.rootPId)},getAfterA:function(b,a,c){for(var d=0,e=E.length;d<e;d++)E[d].apply(this,arguments)},getBeforeA:function(b,a,c){for(var d=0,e=D.length;d<e;d++)D[d].apply(this,arguments)},getInnerAfterA:function(b,a,c){for(var d=0,e=G.length;d<e;d++)G[d].apply(this,arguments)},getInnerBeforeA:function(b,a,c){for(var d=0,e=F.length;d<e;d++)F[d].apply(this,arguments)},getCache:function(b){return x[b.treeId]},getNodeIndex:function(b,a){if(!a)return null;for(var c=b.data.key.children,d=a.parentTId?a.getParentNode():h.getRoot(b),e=0,g=d[c].length-1;e<=g;e++)if(d[c][e]===a)return e;return-1},getNextNode:function(b,a){if(!a)return null;for(var c=b.data.key.children,d=a.parentTId?a.getParentNode():h.getRoot(b),e=0,g=d[c].length-1;e<=g;e++)if(d[c][e]===a)return e==g?null:d[c][e+1];return null},getNodeByParam:function(b,a,c,d){if(!a||!c)return null;for(var e=b.data.key.children,g=0,f=a.length;g<f;g++){if(a[g][c]==d)return a[g];var i=h.getNodeByParam(b,a[g][e],c,d);if(i)return i}return null},getNodeCache:function(b,a){if(!a)return null;var c=x[b.treeId].nodes[h.getNodeCacheId(a)];return c?c:null},getNodeName:function(b,a){return""+a[b.data.key.name]},getNodePath:function(b,a){if(!a)return null;var c;(c=a.parentTId?a.getParentNode().getPath():[])&&c.push(a);return c},getNodeTitle:function(b,a){return""+a[b.data.key.title===""?b.data.key.name:b.data.key.title]},getNodes:function(b){return h.getRoot(b)[b.data.key.children]},getNodesByParam:function(b,a,c,d){if(!a||!c)return[];for(var e=b.data.key.children,g=[],f=0,i=a.length;f<i;f++)a[f][c]==d&&g.push(a[f]),g=g.concat(h.getNodesByParam(b,a[f][e],c,d));return g},getNodesByParamFuzzy:function(b,a,c,d){if(!a||!c)return[];for(var e=b.data.key.children,g=[],d=d.toLowerCase(),f=0,i=a.length;f<i;f++)typeof a[f][c]=="string"&&a[f][c].toLowerCase().indexOf(d)>-1&&g.push(a[f]),g=g.concat(h.getNodesByParamFuzzy(b,a[f][e],c,d));return g},getNodesByFilter:function(b,a,c,d,e){if(!a)return d?null:[];for(var g=b.data.key.children,f=d?null:[],i=0,n=a.length;i<n;i++){if(j.apply(c,[a[i],e],!1)){if(d)return a[i];f.push(a[i])}var k=h.getNodesByFilter(b,a[i][g],c,d,e);if(d&&k)return k;f=d?k:f.concat(k)}return f},getPreNode:function(b,a){if(!a)return null;for(var c=b.data.key.children,d=a.parentTId?a.getParentNode():h.getRoot(b),e=0,g=d[c].length;e<g;e++)if(d[c][e]===a)return e==0?null:d[c][e-1];return null},getRoot:function(b){return b?w[b.treeId]:null},getRoots:function(){return w},getSetting:function(b){return s[b]},getSettings:function(){return s},getZTreeTools:function(b){return(b=this.getRoot(this.getSetting(b)))?b.treeTools:null},initCache:function(b){for(var a=0,c=A.length;a<c;a++)A[a].apply(this,arguments)},initNode:function(b,a,c,d,e,g){for(var f=0,h=B.length;f<h;f++)B[f].apply(this,arguments)},initRoot:function(b){for(var a=0,c=C.length;a<c;a++)C[a].apply(this,arguments)},isSelectedNode:function(b,a){for(var c=h.getRoot(b),d=0,e=c.curSelectedList.length;d<e;d++)if(a===c.curSelectedList[d])return!0;return!1},removeNodeCache:function(b,a){var c=b.data.key.children;if(a[c])for(var d=0,e=a[c].length;d<e;d++)arguments.callee(b,a[c][d]);h.getCache(b).nodes[h.getNodeCacheId(a.tId)]=null},removeSelectedNode:function(b,a){for(var c=h.getRoot(b),d=0,e=c.curSelectedList.length;d<e;d++)if(a===c.curSelectedList[d]||!h.getNodeCache(b,c.curSelectedList[d].tId))c.curSelectedList.splice(d,1),b.treeObj.trigger(f.event.UNSELECTED,[b.treeId,a]),d--,e--},setCache:function(b,a){x[b.treeId]=a},setRoot:function(b,a){w[b.treeId]=a},setZTreeTools:function(b,a){for(var c=0,d=H.length;c<d;c++)H[c].apply(this,arguments)},transformToArrayFormat:function(b,a){if(!a)return[];var c=b.data.key.children,d=[];if(j.isArray(a))for(var e=0,g=a.length;e<g;e++)d.push(a[e]),a[e][c]&&(d=d.concat(h.transformToArrayFormat(b,a[e][c])));else d.push(a),a[c]&&(d=d.concat(h.transformToArrayFormat(b,a[c])));return d},transformTozTreeFormat:function(b,a){var c,d,e=b.data.simpleData.idKey,g=b.data.simpleData.pIdKey,f=b.data.key.children;if(!e||e==""||!a)return[];if(j.isArray(a)){var h=[],i=[];for(c=0,d=a.length;c<d;c++)i[a[c][e]]=a[c];for(c=0,d=a.length;c<d;c++)i[a[c][g]]&&a[c][e]!=a[c][g]?(i[a[c][g]][f]||(i[a[c][g]][f]=[]),i[a[c][g]][f].push(a[c])):h.push(a[c]);return h}else return[a]}},l={bindEvent:function(b){for(var a=0,c=y.length;a<c;a++)y[a].apply(this,arguments)},unbindEvent:function(b){for(var a=0,c=z.length;a<c;a++)z[a].apply(this,arguments)},bindTree:function(b){var a={treeId:b.treeId},c=b.treeObj;b.view.txtSelectedEnable||c.bind("selectstart",v).css({"-moz-user-select":"-moz-none"});c.bind("click",a,l.proxy);c.bind("dblclick",a,l.proxy);c.bind("mouseover",a,l.proxy);c.bind("mouseout",a,l.proxy);c.bind("mousedown",a,l.proxy);c.bind("mouseup",a,l.proxy);c.bind("contextmenu",a,l.proxy)},unbindTree:function(b){b.treeObj.unbind("selectstart",v).unbind("click",l.proxy).unbind("dblclick",l.proxy).unbind("mouseover",l.proxy).unbind("mouseout",l.proxy).unbind("mousedown",l.proxy).unbind("mouseup",l.proxy).unbind("contextmenu",l.proxy)},doProxy:function(b){for(var a=[],c=0,d=u.length;c<d;c++){var e=u[c].apply(this,arguments);a.push(e);if(e.stop)break}return a},proxy:function(b){var a=h.getSetting(b.data.treeId);if(!j.uCanDo(a,b))return!0;for(var a=l.doProxy(b),c=!0,d=0,e=a.length;d<e;d++){var g=a[d];g.nodeEventCallback&&(c=g.nodeEventCallback.apply(g,[b,g.node])&&c);g.treeEventCallback&&(c=g.treeEventCallback.apply(g,[b,g.node])&&c)}return c}};I=function(b,a){var c=h.getSetting(b.data.treeId);if(a.open){if(j.apply(c.callback.beforeCollapse,[c.treeId,a],!0)==!1)return!0}else if(j.apply(c.callback.beforeExpand,[c.treeId,a],!0)==!1)return!0;h.getRoot(c).expandTriggerFlag=!0;i.switchNode(c,a);return!0};J=function(b,a){var c=h.getSetting(b.data.treeId),d=c.view.autoCancelSelected&&(b.ctrlKey||b.metaKey)&&h.isSelectedNode(c,a)?0:c.view.autoCancelSelected&&(b.ctrlKey||b.metaKey)&&c.view.selectedMulti?2:1;if(j.apply(c.callback.beforeClick,[c.treeId,a,d],!0)==!1)return!0;d===0?i.cancelPreSelectedNode(c,a):i.selectNode(c,a,d===2);c.treeObj.trigger(f.event.CLICK,[b,c.treeId,a,d]);return!0};K=function(b,a){var c=h.getSetting(b.data.treeId);j.apply(c.callback.beforeMouseDown,[c.treeId,a],!0)&&j.apply(c.callback.onMouseDown,[b,c.treeId,a]);return!0};L=function(b,a){var c=h.getSetting(b.data.treeId);j.apply(c.callback.beforeMouseUp,[c.treeId,a],!0)&&j.apply(c.callback.onMouseUp,[b,c.treeId,a]);return!0};M=function(b,a){var c=h.getSetting(b.data.treeId);j.apply(c.callback.beforeDblClick,[c.treeId,a],!0)&&j.apply(c.callback.onDblClick,[b,c.treeId,a]);return!0};N=function(b,a){var c=h.getSetting(b.data.treeId);j.apply(c.callback.beforeRightClick,[c.treeId,a],!0)&&j.apply(c.callback.onRightClick,[b,c.treeId,a]);return typeof c.callback.onRightClick!="function"};v=function(b){b=b.originalEvent.srcElement.nodeName.toLowerCase();return b==="input"||b==="textarea"};var j={apply:function(b,a,c){return typeof b=="function"?b.apply(P,a?a:[]):c},canAsync:function(b,a){var c=b.data.key.children;return b.async.enable&&a&&a.isParent&&!(a.zAsync||a[c]&&a[c].length>0)},clone:function(b){if(b===null)return null;var a=j.isArray(b)?[]:{},c;for(c in b)a[c]=b[c]instanceof Date?new Date(b[c].getTime()):typeof b[c]==="object"?arguments.callee(b[c]):b[c];return a},eqs:function(b,a){return b.toLowerCase()===a.toLowerCase()},isArray:function(b){return Object.prototype.toString.apply(b)==="[object Array]"},$:function(b,a,c){a&&typeof a!="string"&&(c=a,a="");return typeof b=="string"?q(b,c?c.treeObj.get(0).ownerDocument:null):q("#"+b.tId+a,c?c.treeObj:null)},getMDom:function(b,a,c){if(!a)return null;for(;a&&a.id!==b.treeId;){for(var d=0,e=c.length;a.tagName&&d<e;d++)if(j.eqs(a.tagName,c[d].tagName)&&a.getAttribute(c[d].attrName)!==null)return a;a=a.parentNode}return null},getNodeMainDom:function(b){return q(b).parent("li").get(0)||q(b).parentsUntil("li").parent().get(0)},isChildOrSelf:function(b,a){return q(b).closest("#"+a).length>0},uCanDo:function(){return!0}},i={addNodes:function(b,a,c,d,e){if(!b.data.keep.leaf||!a||a.isParent)if(j.isArray(d)||(d=[d]),b.data.simpleData.enable&&(d=h.transformTozTreeFormat(b,d)),a){var g=k(a,f.id.SWITCH,b),m=k(a,f.id.ICON,b),o=k(a,f.id.UL,b);if(!a.open)i.replaceSwitchClass(a,g,f.folder.CLOSE),i.replaceIcoClass(a,m,f.folder.CLOSE),a.open=!1,o.css({display:"none"});h.addNodesData(b,a,c,d);i.createNodes(b,a.level+1,d,a,c);e||i.expandCollapseParentNode(b,a,!0)}else h.addNodesData(b,h.getRoot(b),c,d),i.createNodes(b,0,d,null,c)},appendNodes:function(b,a,c,d,e,g,f){if(!c)return[];var j=[],k=b.data.key.children,l=(d?d:h.getRoot(b))[k],r,Q;if(!l||e>=l.length)e=-1;for(var t=0,q=c.length;t<q;t++){var p=c[t];g&&(r=(e===0||l.length==c.length)&&t==0,Q=e<0&&t==c.length-1,h.initNode(b,a,p,d,r,Q,f),h.addNodeCache(b,p));r=[];p[k]&&p[k].length>0&&(r=i.appendNodes(b,a+1,p[k],p,-1,g,f&&p.open));f&&(i.makeDOMNodeMainBefore(j,b,p),i.makeDOMNodeLine(j,b,p),h.getBeforeA(b,p,j),i.makeDOMNodeNameBefore(j,b,p),h.getInnerBeforeA(b,p,j),i.makeDOMNodeIcon(j,b,p),h.getInnerAfterA(b,p,j),i.makeDOMNodeNameAfter(j,b,p),h.getAfterA(b,p,j),p.isParent&&p.open&&i.makeUlHtml(b,p,j,r.join("")),i.makeDOMNodeMainAfter(j,b,p),h.addCreatedNode(b,p))}return j},appendParentULDom:function(b,a){var c=[],d=k(a,b);!d.get(0)&&a.parentTId&&(i.appendParentULDom(b,a.getParentNode()),d=k(a,b));var e=k(a,f.id.UL,b);e.get(0)&&e.remove();e=i.appendNodes(b,a.level+1,a[b.data.key.children],a,-1,!1,!0);i.makeUlHtml(b,a,c,e.join(""));d.append(c.join(""))},asyncNode:function(b,a,c,d){var e,g;if(a&&!a.isParent)return j.apply(d),!1;else if(a&&a.isAjaxing)return!1;else if(j.apply(b.callback.beforeAsync,[b.treeId,a],!0)==!1)return j.apply(d),!1;if(a)a.isAjaxing=!0,k(a,f.id.ICON,b).attr({style:"","class":f.className.BUTTON+" "+f.className.ICO_LOADING});var m={};for(e=0,g=b.async.autoParam.length;a&&e<g;e++){var o=b.async.autoParam[e].split("="),n=o;o.length>1&&(n=o[1],o=o[0]);m[n]=a[o]}if(j.isArray(b.async.otherParam))for(e=0,g=b.async.otherParam.length;e<g;e+=2)m[b.async.otherParam[e]]=b.async.otherParam[e+1];else for(var l in b.async.otherParam)m[l]=b.async.otherParam[l];var r=h.getRoot(b)._ver;q.ajax({contentType:b.async.contentType,cache:!1,type:b.async.type,url:j.apply(b.async.url,[b.treeId,a],b.async.url),data:m,dataType:b.async.dataType,success:function(e){if(r==h.getRoot(b)._ver){var g=[];try{g=!e||e.length==0?[]:typeof e=="string"?eval("("+e+")"):e}catch(m){g=e}if(a)a.isAjaxing=null,a.zAsync=!0;i.setNodeLineIcos(b,a);g&&g!==""?(g=j.apply(b.async.dataFilter,[b.treeId,a,g],g),i.addNodes(b,a,-1,g?j.clone(g):[],!!c)):i.addNodes(b,a,-1,[],!!c);b.treeObj.trigger(f.event.ASYNC_SUCCESS,[b.treeId,a,e]);j.apply(d)}},error:function(c,d,e){if(r==h.getRoot(b)._ver){if(a)a.isAjaxing=null;i.setNodeLineIcos(b,a);b.treeObj.trigger(f.event.ASYNC_ERROR,[b.treeId,a,c,d,e])}}});return!0},cancelPreSelectedNode:function(b,a,c){var d=h.getRoot(b).curSelectedList,e,g;for(e=d.length-1;e>=0;e--)if(g=d[e],a===g||!a&&(!c||c!==g))if(k(g,f.id.A,b).removeClass(f.node.CURSELECTED),a){h.removeSelectedNode(b,a);break}else d.splice(e,1),b.treeObj.trigger(f.event.UNSELECTED,[b.treeId,g])},createNodeCallback:function(b){if(b.callback.onNodeCreated||b.view.addDiyDom)for(var a=h.getRoot(b);a.createdNodes.length>0;){var c=a.createdNodes.shift();j.apply(b.view.addDiyDom,[b.treeId,c]);b.callback.onNodeCreated&&b.treeObj.trigger(f.event.NODECREATED,[b.treeId,c])}},createNodes:function(b,a,c,d,e){if(c&&c.length!=0){var g=h.getRoot(b),j=b.data.key.children,j=!d||d.open||!!k(d[j][0],b).get(0);g.createdNodes=[];var a=i.appendNodes(b,a,c,d,e,!0,j),o,n;d?(d=k(d,f.id.UL,b),d.get(0)&&(o=d)):o=b.treeObj;o&&(e>=0&&(n=o.children()[e]),e>=0&&n?q(n).before(a.join("")):o.append(a.join("")));i.createNodeCallback(b)}},destroy:function(b){b&&(h.initCache(b),h.initRoot(b),l.unbindTree(b),l.unbindEvent(b),b.treeObj.empty(),delete s[b.treeId])},expandCollapseNode:function(b,a,c,d,e){var g=h.getRoot(b),m=b.data.key.children;if(a){if(g.expandTriggerFlag){var o=e,e=function(){o&&o();a.open?b.treeObj.trigger(f.event.EXPAND,[b.treeId,a]):b.treeObj.trigger(f.event.COLLAPSE,[b.treeId,a])};g.expandTriggerFlag=!1}if(!a.open&&a.isParent&&(!k(a,f.id.UL,b).get(0)||a[m]&&a[m].length>0&&!k(a[m][0],b).get(0)))i.appendParentULDom(b,a),i.createNodeCallback(b);if(a.open==c)j.apply(e,[]);else{var c=k(a,f.id.UL,b),g=k(a,f.id.SWITCH,b),n=k(a,f.id.ICON,b);a.isParent?(a.open=!a.open,a.iconOpen&&a.iconClose&&n.attr("style",i.makeNodeIcoStyle(b,a)),a.open?(i.replaceSwitchClass(a,g,f.folder.OPEN),i.replaceIcoClass(a,n,f.folder.OPEN),d==!1||b.view.expandSpeed==""?(c.show(),j.apply(e,[])):a[m]&&a[m].length>0?c.slideDown(b.view.expandSpeed,e):(c.show(),j.apply(e,[]))):(i.replaceSwitchClass(a,g,f.folder.CLOSE),i.replaceIcoClass(a,n,f.folder.CLOSE),d==!1||b.view.expandSpeed==""||!(a[m]&&a[m].length>0)?(c.hide(),j.apply(e,[])):c.slideUp(b.view.expandSpeed,e))):j.apply(e,[])}}else j.apply(e,[])},expandCollapseParentNode:function(b,a,c,d,e){a&&(a.parentTId?(i.expandCollapseNode(b,a,c,d),a.parentTId&&i.expandCollapseParentNode(b,a.getParentNode(),c,d,e)):i.expandCollapseNode(b,a,c,d,e))},expandCollapseSonNode:function(b,a,c,d,e){var g=h.getRoot(b),f=b.data.key.children,g=a?a[f]:g[f],f=a?!1:d,j=h.getRoot(b).expandTriggerFlag;h.getRoot(b).expandTriggerFlag=!1;if(g)for(var k=0,l=g.length;k<l;k++)g[k]&&i.expandCollapseSonNode(b,g[k],c,f);h.getRoot(b).expandTriggerFlag=j;i.expandCollapseNode(b,a,c,d,e)},isSelectedNode:function(b,a){if(!a)return!1;var c=h.getRoot(b).curSelectedList,d;for(d=c.length-
1;d>=0;d--)if(a===c[d])return!0;return!1},makeDOMNodeIcon:function(b,a,c){var d=h.getNodeName(a,c),d=a.view.nameIsHTML?d:d.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");b.push("<span id='",c.tId,f.id.ICON,"' title='' treeNode",f.id.ICON," class='",i.makeNodeIcoClass(a,c),"' style='",i.makeNodeIcoStyle(a,c),"'></span><span id='",c.tId,f.id.SPAN,"'>",d,"</span>")},makeDOMNodeLine:function(b,a,c){b.push("<span id='",c.tId,f.id.SWITCH,"' title='' class='",i.makeNodeLineClass(a,c),"' treeNode",f.id.SWITCH,"></span>")},makeDOMNodeMainAfter:function(b){b.push("</li>")},makeDOMNodeMainBefore:function(b,a,c){b.push("<li id='",c.tId,"' class='",f.className.LEVEL,c.level,"' tabindex='0' hidefocus='true' treenode>")},makeDOMNodeNameAfter:function(b){b.push("</a>")},makeDOMNodeNameBefore:function(b,a,c){var d=h.getNodeTitle(a,c),e=i.makeNodeUrl(a,c),g=i.makeNodeFontCss(a,c),m=[],k;for(k in g)m.push(k,":",g[k],";");b.push("<a id='",c.tId,f.id.A,"' class='",f.className.LEVEL,c.level,"' treeNode",f.id.A,' onclick="',c.click||"",'" ',e!=null&&e.length>0?"href='"+e+"'":""," target='",i.makeNodeTarget(c),"' style='",m.join(""),"'");j.apply(a.view.showTitle,[a.treeId,c],a.view.showTitle)&&d&&b.push("title='",d.replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"'");b.push(">")},makeNodeFontCss:function(b,a){var c=j.apply(b.view.fontCss,[b.treeId,a],b.view.fontCss);return c&&typeof c!="function"?c:{}},makeNodeIcoClass:function(b,a){var c=["ico"];a.isAjaxing||(c[0]=(a.iconSkin?a.iconSkin+"_":"")+c[0],a.isParent?c.push(a.open?f.folder.OPEN:f.folder.CLOSE):c.push(f.folder.DOCU));return f.className.BUTTON+" "+c.join("_")},makeNodeIcoStyle:function(b,a){var c=[];if(!a.isAjaxing){var d=a.isParent&&a.iconOpen&&a.iconClose?a.open?a.iconOpen:a.iconClose:a[b.data.key.icon];d&&c.push("background:url(",d,") 0 0 no-repeat;");(b.view.showIcon==!1||!j.apply(b.view.showIcon,[b.treeId,a],!0))&&c.push("width:0px;height:0px;")}return c.join("")},makeNodeLineClass:function(b,a){var c=[];b.view.showLine?a.level==0&&a.isFirstNode&&a.isLastNode?c.push(f.line.ROOT):a.level==0&&a.isFirstNode?c.push(f.line.ROOTS):a.isLastNode?c.push(f.line.BOTTOM):c.push(f.line.CENTER):c.push(f.line.NOLINE);a.isParent?c.push(a.open?f.folder.OPEN:f.folder.CLOSE):c.push(f.folder.DOCU);return i.makeNodeLineClassEx(a)+c.join("_")},makeNodeLineClassEx:function(b){return f.className.BUTTON+" "+f.className.LEVEL+b.level+" "+f.className.SWITCH+" "},makeNodeTarget:function(b){return b.target||"_blank"},makeNodeUrl:function(b,a){var c=b.data.key.url;return a[c]?a[c]:null},makeUlHtml:function(b,a,c,d){c.push("<ul id='",a.tId,f.id.UL,"' class='",f.className.LEVEL,a.level," ",i.makeUlLineClass(b,a),"' style='display:",a.open?"block":"none","'>");c.push(d);c.push("</ul>")},makeUlLineClass:function(b,a){return b.view.showLine&&!a.isLastNode?f.line.LINE:""},removeChildNodes:function(b,a){if(a){var c=b.data.key.children,d=a[c];if(d){for(var e=0,g=d.length;e<g;e++)h.removeNodeCache(b,d[e]);h.removeSelectedNode(b);delete a[c];b.data.keep.parent?k(a,f.id.UL,b).empty():(a.isParent=!1,a.open=!1,c=k(a,f.id.SWITCH,b),d=k(a,f.id.ICON,b),i.replaceSwitchClass(a,c,f.folder.DOCU),i.replaceIcoClass(a,d,f.folder.DOCU),k(a,f.id.UL,b).remove())}}},setFirstNode:function(b,a){var c=b.data.key.children;if(a[c].length>0)a[c][0].isFirstNode=!0},setLastNode:function(b,a){var c=b.data.key.children,d=a[c].length;if(d>0)a[c][d-1].isLastNode=!0},removeNode:function(b,a){var c=h.getRoot(b),d=b.data.key.children,e=a.parentTId?a.getParentNode():c;a.isFirstNode=!1;a.isLastNode=!1;a.getPreNode=function(){return null};a.getNextNode=function(){return null};if(h.getNodeCache(b,a.tId)){k(a,b).remove();h.removeNodeCache(b,a);h.removeSelectedNode(b,a);for(var g=0,j=e[d].length;g<j;g++)if(e[d][g].tId==a.tId){e[d].splice(g,1);break}i.setFirstNode(b,e);i.setLastNode(b,e);var o,g=e[d].length;if(!b.data.keep.parent&&g==0)e.isParent=!1,e.open=!1,g=k(e,f.id.UL,b),j=k(e,f.id.SWITCH,b),o=k(e,f.id.ICON,b),i.replaceSwitchClass(e,j,f.folder.DOCU),i.replaceIcoClass(e,o,f.folder.DOCU),g.css("display","none");else if(b.view.showLine&&g>0){var n=e[d][g-1],g=k(n,f.id.UL,b),j=k(n,f.id.SWITCH,b);o=k(n,f.id.ICON,b);e==c?e[d].length==1?i.replaceSwitchClass(n,j,f.line.ROOT):(c=k(e[d][0],f.id.SWITCH,b),i.replaceSwitchClass(e[d][0],c,f.line.ROOTS),i.replaceSwitchClass(n,j,f.line.BOTTOM)):i.replaceSwitchClass(n,j,f.line.BOTTOM);g.removeClass(f.line.LINE)}}},replaceIcoClass:function(b,a,c){if(a&&!b.isAjaxing&&(b=a.attr("class"),b!=void 0)){b=b.split("_");switch(c){case f.folder.OPEN:case f.folder.CLOSE:case f.folder.DOCU:b[b.length-
1]=c}a.attr("class",b.join("_"))}},replaceSwitchClass:function(b,a,c){if(a){var d=a.attr("class");if(d!=void 0){d=d.split("_");switch(c){case f.line.ROOT:case f.line.ROOTS:case f.line.CENTER:case f.line.BOTTOM:case f.line.NOLINE:d[0]=i.makeNodeLineClassEx(b)+c;break;case f.folder.OPEN:case f.folder.CLOSE:case f.folder.DOCU:d[1]=c}a.attr("class",d.join("_"));c!==f.folder.DOCU?a.removeAttr("disabled"):a.attr("disabled","disabled")}}},selectNode:function(b,a,c){c||i.cancelPreSelectedNode(b,null,a);k(a,f.id.A,b).addClass(f.node.CURSELECTED);h.addSelectedNode(b,a);b.treeObj.trigger(f.event.SELECTED,[b.treeId,a])},setNodeFontCss:function(b,a){var c=k(a,f.id.A,b),d=i.makeNodeFontCss(b,a);d&&c.css(d)},setNodeLineIcos:function(b,a){if(a){var c=k(a,f.id.SWITCH,b),d=k(a,f.id.UL,b),e=k(a,f.id.ICON,b),g=i.makeUlLineClass(b,a);g.length==0?d.removeClass(f.line.LINE):d.addClass(g);c.attr("class",i.makeNodeLineClass(b,a));a.isParent?c.removeAttr("disabled"):c.attr("disabled","disabled");e.removeAttr("style");e.attr("style",i.makeNodeIcoStyle(b,a));e.attr("class",i.makeNodeIcoClass(b,a))}},setNodeName:function(b,a){var c=h.getNodeTitle(b,a),d=k(a,f.id.SPAN,b);d.empty();b.view.nameIsHTML?d.html(h.getNodeName(b,a)):d.text(h.getNodeName(b,a));j.apply(b.view.showTitle,[b.treeId,a],b.view.showTitle)&&k(a,f.id.A,b).attr("title",!c?"":c)},setNodeTarget:function(b,a){k(a,f.id.A,b).attr("target",i.makeNodeTarget(a))},setNodeUrl:function(b,a){var c=k(a,f.id.A,b),d=i.makeNodeUrl(b,a);d==null||d.length==0?c.removeAttr("href"):c.attr("href",d)},switchNode:function(b,a){a.open||!j.canAsync(b,a)?i.expandCollapseNode(b,a,!a.open):b.async.enable?i.asyncNode(b,a)||i.expandCollapseNode(b,a,!a.open):a&&i.expandCollapseNode(b,a,!a.open)}};q.fn.zTree={consts:{className:{BUTTON:"button",LEVEL:"level",ICO_LOADING:"ico_loading",SWITCH:"switch"},event:{NODECREATED:"ztree_nodeCreated",CLICK:"ztree_click",EXPAND:"ztree_expand",COLLAPSE:"ztree_collapse",ASYNC_SUCCESS:"ztree_async_success",ASYNC_ERROR:"ztree_async_error",REMOVE:"ztree_remove",SELECTED:"ztree_selected",UNSELECTED:"ztree_unselected"},id:{A:"_a",ICON:"_ico",SPAN:"_span",SWITCH:"_switch",UL:"_ul"},line:{ROOT:"root",ROOTS:"roots",CENTER:"center",BOTTOM:"bottom",NOLINE:"noline",LINE:"line"},folder:{OPEN:"open",CLOSE:"close",DOCU:"docu"},node:{CURSELECTED:"curSelectedNode"}},_z:{tools:j,view:i,event:l,data:h},getZTreeObj:function(b){return(b=h.getZTreeTools(b))?b:null},destroy:function(b){if(b&&b.length>0)i.destroy(h.getSetting(b));else for(var a in s)i.destroy(s[a])},init:function(b,a,c){var d=j.clone(O);q.extend(!0,d,a);d.treeId=b.attr("id");d.treeObj=b;d.treeObj.empty();s[d.treeId]=d;if(typeof document.body.style.maxHeight==="undefined")d.view.expandSpeed="";h.initRoot(d);b=h.getRoot(d);a=d.data.key.children;c=c?j.clone(j.isArray(c)?c:[c]):[];b[a]=d.data.simpleData.enable?h.transformTozTreeFormat(d,c):c;h.initCache(d);l.unbindTree(d);l.bindTree(d);l.unbindEvent(d);l.bindEvent(d);c={setting:d,addNodes:function(a,b,c,f){function h(){i.addNodes(d,a,b,l,f==!0)}a||(a=null);if(a&&!a.isParent&&d.data.keep.leaf)return null;var k=parseInt(b,10);isNaN(k)?(f=!!c,c=b,b=-1):b=k;if(!c)return null;var l=j.clone(j.isArray(c)?c:[c]);j.canAsync(d,a)?i.asyncNode(d,a,f,h):h();return l},cancelSelectedNode:function(a){i.cancelPreSelectedNode(d,a)},destroy:function(){i.destroy(d)},expandAll:function(a){a=!!a;i.expandCollapseSonNode(d,null,a,!0);return a},expandNode:function(a,b,c,f,n){if(!a||!a.isParent)return null;b!==!0&&b!==!1&&(b=!a.open);if((n=!!n)&&b&&j.apply(d.callback.beforeExpand,[d.treeId,a],!0)==!1)return null;else if(n&&!b&&j.apply(d.callback.beforeCollapse,[d.treeId,a],!0)==!1)return null;b&&a.parentTId&&i.expandCollapseParentNode(d,a.getParentNode(),b,!1);if(b===a.open&&!c)return null;h.getRoot(d).expandTriggerFlag=n;if(!j.canAsync(d,a)&&c)i.expandCollapseSonNode(d,a,b,!0,function(){if(f!==!1)try{k(a,d).focus().blur()}catch(b){}});else if(a.open=!b,i.switchNode(this.setting,a),f!==!1)try{k(a,d).focus().blur()}catch(l){}return b},getNodes:function(){return h.getNodes(d)},getNodeByParam:function(a,b,c){return!a?null:h.getNodeByParam(d,c?c[d.data.key.children]:h.getNodes(d),a,b)},getNodeByTId:function(a){return h.getNodeCache(d,a)},getNodesByParam:function(a,b,c){return!a?null:h.getNodesByParam(d,c?c[d.data.key.children]:h.getNodes(d),a,b)},getNodesByParamFuzzy:function(a,b,c){return!a?null:h.getNodesByParamFuzzy(d,c?c[d.data.key.children]:h.getNodes(d),a,b)},getNodesByFilter:function(a,b,c,f){b=!!b;return!a||typeof a!="function"?b?null:[]:h.getNodesByFilter(d,c?c[d.data.key.children]:h.getNodes(d),a,b,f)},getNodeIndex:function(a){if(!a)return null;for(var b=d.data.key.children,c=a.parentTId?a.getParentNode():h.getRoot(d),f=0,i=c[b].length;f<i;f++)if(c[b][f]==a)return f;return-1},getSelectedNodes:function(){for(var a=[],b=h.getRoot(d).curSelectedList,c=0,f=b.length;c<f;c++)a.push(b[c]);return a},isSelectedNode:function(a){return h.isSelectedNode(d,a)},reAsyncChildNodes:function(a,b,c){if(this.setting.async.enable){var j=!a;j&&(a=h.getRoot(d));if(b=="refresh"){for(var b=this.setting.data.key.children,l=0,q=a[b]?a[b].length:0;l<q;l++)h.removeNodeCache(d,a[b][l]);h.removeSelectedNode(d);a[b]=[];j?this.setting.treeObj.empty():k(a,f.id.UL,d).empty()}i.asyncNode(this.setting,j?null:a,!!c)}},refresh:function(){this.setting.treeObj.empty();var a=h.getRoot(d),b=a[d.data.key.children];h.initRoot(d);a[d.data.key.children]=b;h.initCache(d);i.createNodes(d,0,a[d.data.key.children],null,-1)},removeChildNodes:function(a){if(!a)return null;var b=a[d.data.key.children];i.removeChildNodes(d,a);return b?b:null},removeNode:function(a,b){a&&(b=!!b,b&&j.apply(d.callback.beforeRemove,[d.treeId,a],!0)==!1||(i.removeNode(d,a),b&&this.setting.treeObj.trigger(f.event.REMOVE,[d.treeId,a])))},selectNode:function(a,b){if(a&&j.uCanDo(d)){b=d.view.selectedMulti&&b;if(a.parentTId)i.expandCollapseParentNode(d,a.getParentNode(),!0,!1,function(){try{k(a,d).focus().blur()}catch(b){}});else try{k(a,d).focus().blur()}catch(c){}i.selectNode(d,a,b)}},transformTozTreeNodes:function(a){return h.transformTozTreeFormat(d,a)},transformToArray:function(a){return h.transformToArrayFormat(d,a)},updateNode:function(a){a&&k(a,d).get(0)&&j.uCanDo(d)&&(i.setNodeName(d,a),i.setNodeTarget(d,a),i.setNodeUrl(d,a),i.setNodeLineIcos(d,a),i.setNodeFontCss(d,a))}};b.treeTools=c;h.setZTreeTools(d,c);b[a]&&b[a].length>0?i.createNodes(d,0,b[a],null,-1):d.async.enable&&d.async.url&&d.async.url!==""&&i.asyncNode(d);return c}};var P=q.fn.zTree,k=j.$,f=P.consts})(jQuery);(function(m){var p,q,r,o={event:{CHECK:"ztree_check"},id:{CHECK:"_check"},checkbox:{STYLE:"checkbox",DEFAULT:"chk",DISABLED:"disable",FALSE:"false",TRUE:"true",FULL:"full",PART:"part",FOCUS:"focus"},radio:{STYLE:"radio",TYPE_ALL:"all",TYPE_LEVEL:"level"}},v={check:{enable:!1,autoCheckTrigger:!1,chkStyle:o.checkbox.STYLE,nocheckInherit:!1,chkDisabledInherit:!1,radioType:o.radio.TYPE_LEVEL,chkboxType:{Y:"ps",N:"ps"}},data:{key:{checked:"checked"}},callback:{beforeCheck:null,onCheck:null}};p=function(c,a){if(a.chkDisabled===!0)return!1;var b=g.getSetting(c.data.treeId),d=b.data.key.checked;if(k.apply(b.callback.beforeCheck,[b.treeId,a],!0)==!1)return!0;a[d]=!a[d];e.checkNodeRelation(b,a);d=n(a,j.id.CHECK,b);e.setChkClass(b,d,a);e.repairParentChkClassWithSelf(b,a);b.treeObj.trigger(j.event.CHECK,[c,b.treeId,a]);return!0};q=function(c,a){if(a.chkDisabled===!0)return!1;var b=g.getSetting(c.data.treeId),d=n(a,j.id.CHECK,b);a.check_Focus=!0;e.setChkClass(b,d,a);return!0};r=function(c,a){if(a.chkDisabled===!0)return!1;var b=g.getSetting(c.data.treeId),d=n(a,j.id.CHECK,b);a.check_Focus=!1;e.setChkClass(b,d,a);return!0};m.extend(!0,m.fn.zTree.consts,o);m.extend(!0,m.fn.zTree._z,{tools:{},view:{checkNodeRelation:function(c,a){var b,d,h,i=c.data.key.children,l=c.data.key.checked;b=j.radio;if(c.check.chkStyle==b.STYLE){var f=g.getRadioCheckedList(c);if(a[l])if(c.check.radioType==b.TYPE_ALL){for(d=f.length-1;d>=0;d--)b=f[d],b[l]&&b!=a&&(b[l]=!1,f.splice(d,1),e.setChkClass(c,n(b,j.id.CHECK,c),b),b.parentTId!=a.parentTId&&e.repairParentChkClassWithSelf(c,b));f.push(a)}else{f=a.parentTId?a.getParentNode():g.getRoot(c);for(d=0,h=f[i].length;d<h;d++)b=f[i][d],b[l]&&b!=a&&(b[l]=!1,e.setChkClass(c,n(b,j.id.CHECK,c),b))}else if(c.check.radioType==b.TYPE_ALL)for(d=0,h=f.length;d<h;d++)if(a==f[d]){f.splice(d,1);break}}else a[l]&&(!a[i]||a[i].length==0||c.check.chkboxType.Y.indexOf("s")>-1)&&e.setSonNodeCheckBox(c,a,!0),!a[l]&&(!a[i]||a[i].length==0||c.check.chkboxType.N.indexOf("s")>-1)&&e.setSonNodeCheckBox(c,a,!1),a[l]&&c.check.chkboxType.Y.indexOf("p")>-1&&e.setParentNodeCheckBox(c,a,!0),!a[l]&&c.check.chkboxType.N.indexOf("p")>-1&&e.setParentNodeCheckBox(c,a,!1)},makeChkClass:function(c,a){var b=c.data.key.checked,d=j.checkbox,h=j.radio,i="",i=a.chkDisabled===!0?d.DISABLED:a.halfCheck?d.PART:c.check.chkStyle==h.STYLE?a.check_Child_State<1?d.FULL:d.PART:a[b]?a.check_Child_State===2||a.check_Child_State===-1?d.FULL:d.PART:a.check_Child_State<1?d.FULL:d.PART,b=c.check.chkStyle+"_"+(a[b]?d.TRUE:d.FALSE)+"_"+i,b=a.check_Focus&&a.chkDisabled!==!0?b+"_"+d.FOCUS:b;return j.className.BUTTON+" "+d.DEFAULT+" "+b},repairAllChk:function(c,a){if(c.check.enable&&c.check.chkStyle===j.checkbox.STYLE)for(var b=c.data.key.checked,d=c.data.key.children,h=g.getRoot(c),i=0,l=h[d].length;i<l;i++){var f=h[d][i];f.nocheck!==!0&&f.chkDisabled!==!0&&(f[b]=a);e.setSonNodeCheckBox(c,f,a)}},repairChkClass:function(c,a){if(a&&(g.makeChkFlag(c,a),a.nocheck!==!0)){var b=n(a,j.id.CHECK,c);e.setChkClass(c,b,a)}},repairParentChkClass:function(c,a){if(a&&a.parentTId){var b=a.getParentNode();e.repairChkClass(c,b);e.repairParentChkClass(c,b)}},repairParentChkClassWithSelf:function(c,a){if(a){var b=c.data.key.children;a[b]&&a[b].length>0?e.repairParentChkClass(c,a[b][0]):e.repairParentChkClass(c,a)}},repairSonChkDisabled:function(c,a,b,d){if(a){var h=c.data.key.children;if(a.chkDisabled!=b)a.chkDisabled=b;e.repairChkClass(c,a);if(a[h]&&d)for(var i=0,l=a[h].length;i<l;i++)e.repairSonChkDisabled(c,a[h][i],b,d)}},repairParentChkDisabled:function(c,a,b,d){if(a){if(a.chkDisabled!=b&&d)a.chkDisabled=b;e.repairChkClass(c,a);e.repairParentChkDisabled(c,a.getParentNode(),b,d)}},setChkClass:function(c,a,b){a&&(b.nocheck===!0?a.hide():a.show(),a.attr("class",e.makeChkClass(c,b)))},setParentNodeCheckBox:function(c,a,b,d){var h=c.data.key.children,i=c.data.key.checked,l=n(a,j.id.CHECK,c);d||(d=a);g.makeChkFlag(c,a);a.nocheck!==!0&&a.chkDisabled!==!0&&(a[i]=b,e.setChkClass(c,l,a),c.check.autoCheckTrigger&&a!=d&&c.treeObj.trigger(j.event.CHECK,[null,c.treeId,a]));if(a.parentTId){l=!0;if(!b)for(var h=a.getParentNode()[h],f=0,k=h.length;f<k;f++)if(h[f].nocheck!==!0&&h[f].chkDisabled!==!0&&h[f][i]||(h[f].nocheck===!0||h[f].chkDisabled===!0)&&h[f].check_Child_State>0){l=!1;break}l&&e.setParentNodeCheckBox(c,a.getParentNode(),b,d)}},setSonNodeCheckBox:function(c,a,b,d){if(a){var h=c.data.key.children,i=c.data.key.checked,l=n(a,j.id.CHECK,c);d||(d=a);var f=!1;if(a[h])for(var k=0,m=a[h].length;k<m&&a.chkDisabled!==!0;k++){var o=a[h][k];e.setSonNodeCheckBox(c,o,b,d);o.chkDisabled===!0&&(f=!0)}if(a!=g.getRoot(c)&&a.chkDisabled!==!0){f&&a.nocheck!==!0&&g.makeChkFlag(c,a);if(a.nocheck!==!0&&a.chkDisabled!==!0){if(a[i]=b,!f)a.check_Child_State=a[h]&&a[h].length>0?b?2:0:-1}else a.check_Child_State=-1;e.setChkClass(c,l,a);c.check.autoCheckTrigger&&a!=d&&a.nocheck!==!0&&a.chkDisabled!==!0&&c.treeObj.trigger(j.event.CHECK,[null,c.treeId,a])}}}},event:{},data:{getRadioCheckedList:function(c){for(var a=g.getRoot(c).radioCheckedList,b=0,d=a.length;b<d;b++)g.getNodeCache(c,a[b].tId)||(a.splice(b,1),b--,d--);return a},getCheckStatus:function(c,a){if(!c.check.enable||a.nocheck||a.chkDisabled)return null;var b=c.data.key.checked;return{checked:a[b],half:a.halfCheck?a.halfCheck:c.check.chkStyle==j.radio.STYLE?a.check_Child_State===2:a[b]?a.check_Child_State>-1&&a.check_Child_State<2:a.check_Child_State>0}},getTreeCheckedNodes:function(c,a,b,d){if(!a)return[];for(var h=c.data.key.children,i=c.data.key.checked,e=b&&c.check.chkStyle==j.radio.STYLE&&c.check.radioType==j.radio.TYPE_ALL,d=!d?[]:d,f=0,k=a.length;f<k;f++){if(a[f].nocheck!==!0&&a[f].chkDisabled!==!0&&a[f][i]==b&&(d.push(a[f]),e))break;g.getTreeCheckedNodes(c,a[f][h],b,d);if(e&&d.length>0)break}return d},getTreeChangeCheckedNodes:function(c,a,b){if(!a)return[];for(var d=c.data.key.children,h=c.data.key.checked,b=!b?[]:b,i=0,e=a.length;i<e;i++)a[i].nocheck!==!0&&a[i].chkDisabled!==!0&&a[i][h]!=a[i].checkedOld&&b.push(a[i]),g.getTreeChangeCheckedNodes(c,a[i][d],b);return b},makeChkFlag:function(c,a){if(a){var b=c.data.key.children,d=c.data.key.checked,h=-1;if(a[b])for(var i=0,e=a[b].length;i<e;i++){var f=a[b][i],g=-1;if(c.check.chkStyle==j.radio.STYLE)if(g=f.nocheck===!0||f.chkDisabled===!0?f.check_Child_State:f.halfCheck===!0?2:f[d]?2:f.check_Child_State>0?2:0,g==2){h=2;break}else g==0&&(h=0);else if(c.check.chkStyle==j.checkbox.STYLE)if(g=f.nocheck===!0||f.chkDisabled===!0?f.check_Child_State:f.halfCheck===!0?1:f[d]?f.check_Child_State===-1||f.check_Child_State===2?2:1:f.check_Child_State>0?1:0,g===1){h=1;break}else if(g===2&&h>-1&&i>0&&g!==h){h=1;break}else if(h===2&&g>-1&&g<2){h=1;break}else g>-1&&(h=g)}a.check_Child_State=h}}}});var m=m.fn.zTree,k=m._z.tools,j=m.consts,e=m._z.view,g=m._z.data,n=k.$;g.exSetting(v);g.addInitBind(function(c){c.treeObj.bind(j.event.CHECK,function(a,b,d,h){a.srcEvent=b;k.apply(c.callback.onCheck,[a,d,h])})});g.addInitUnBind(function(c){c.treeObj.unbind(j.event.CHECK)});g.addInitCache(function(){});g.addInitNode(function(c,a,b,d){if(b){a=c.data.key.checked;typeof b[a]=="string"&&(b[a]=k.eqs(b[a],"true"));b[a]=!!b[a];b.checkedOld=b[a];if(typeof b.nocheck=="string")b.nocheck=k.eqs(b.nocheck,"true");b.nocheck=!!b.nocheck||c.check.nocheckInherit&&d&&!!d.nocheck;if(typeof b.chkDisabled=="string")b.chkDisabled=k.eqs(b.chkDisabled,"true");b.chkDisabled=!!b.chkDisabled||c.check.chkDisabledInherit&&d&&!!d.chkDisabled;if(typeof b.halfCheck=="string")b.halfCheck=k.eqs(b.halfCheck,"true");b.halfCheck=!!b.halfCheck;b.check_Child_State=-1;b.check_Focus=!1;b.getCheckStatus=function(){return g.getCheckStatus(c,b)};c.check.chkStyle==j.radio.STYLE&&c.check.radioType==j.radio.TYPE_ALL&&b[a]&&g.getRoot(c).radioCheckedList.push(b)}});g.addInitProxy(function(c){var a=c.target,b=g.getSetting(c.data.treeId),d="",h=null,e="",l=null;if(k.eqs(c.type,"mouseover")){if(b.check.enable&&k.eqs(a.tagName,"span")&&a.getAttribute("treeNode"+j.id.CHECK)!==null)d=k.getNodeMainDom(a).id,e="mouseoverCheck"}else if(k.eqs(c.type,"mouseout")){if(b.check.enable&&k.eqs(a.tagName,"span")&&a.getAttribute("treeNode"+j.id.CHECK)!==null)d=k.getNodeMainDom(a).id,e="mouseoutCheck"}else if(k.eqs(c.type,"click")&&b.check.enable&&k.eqs(a.tagName,"span")&&a.getAttribute("treeNode"+j.id.CHECK)!==null)d=k.getNodeMainDom(a).id,e="checkNode";if(d.length>0)switch(h=g.getNodeCache(b,d),e){case"checkNode":l=p;break;case"mouseoverCheck":l=q;break;case"mouseoutCheck":l=r}return{stop:e==="checkNode",node:h,nodeEventType:e,nodeEventCallback:l,treeEventType:"",treeEventCallback:null}},!0);g.addInitRoot(function(c){g.getRoot(c).radioCheckedList=[]});g.addBeforeA(function(c,a,b){c.check.enable&&(g.makeChkFlag(c,a),b.push("<span ID='",a.tId,j.id.CHECK,"' class='",e.makeChkClass(c,a),"' treeNode",j.id.CHECK,a.nocheck===!0?" style='display:none;'":"","></span>"))});g.addZTreeTools(function(c,a){a.checkNode=function(a,b,c,g){var f=this.setting.data.key.checked;if(a.chkDisabled!==!0&&(b!==!0&&b!==!1&&(b=!a[f]),g=!!g,(a[f]!==b||c)&&!(g&&k.apply(this.setting.callback.beforeCheck,[this.setting.treeId,a],!0)==!1)&&k.uCanDo(this.setting)&&this.setting.check.enable&&a.nocheck!==!0))a[f]=b,b=n(a,j.id.CHECK,this.setting),(c||this.setting.check.chkStyle===j.radio.STYLE)&&e.checkNodeRelation(this.setting,a),e.setChkClass(this.setting,b,a),e.repairParentChkClassWithSelf(this.setting,a),g&&this.setting.treeObj.trigger(j.event.CHECK,[null,this.setting.treeId,a])};a.checkAllNodes=function(a){e.repairAllChk(this.setting,!!a)};a.getCheckedNodes=function(a){var b=this.setting.data.key.children;return g.getTreeCheckedNodes(this.setting,g.getRoot(this.setting)[b],a!==!1)};a.getChangeCheckedNodes=function(){var a=this.setting.data.key.children;return g.getTreeChangeCheckedNodes(this.setting,g.getRoot(this.setting)[a])};a.setChkDisabled=function(a,b,c,g){b=!!b;c=!!c;e.repairSonChkDisabled(this.setting,a,b,!!g);e.repairParentChkDisabled(this.setting,a.getParentNode(),b,c)};var b=a.updateNode;a.updateNode=function(c,g){b&&b.apply(a,arguments);if(c&&this.setting.check.enable&&n(c,this.setting).get(0)&&k.uCanDo(this.setting)){var i=n(c,j.id.CHECK,this.setting);(g==!0||this.setting.check.chkStyle===j.radio.STYLE)&&e.checkNodeRelation(this.setting,c);e.setChkClass(this.setting,i,c);e.repairParentChkClassWithSelf(this.setting,c)}}});var s=e.createNodes;e.createNodes=function(c,a,b,d,g){s&&s.apply(e,arguments);b&&e.repairParentChkClassWithSelf(c,d)};var t=e.removeNode;e.removeNode=function(c,a){var b=a.getParentNode();t&&t.apply(e,arguments);a&&b&&(e.repairChkClass(c,b),e.repairParentChkClass(c,b))};var u=e.appendNodes;e.appendNodes=function(c,a,b,d,h,i,j){var f="";u&&(f=u.apply(e,arguments));d&&g.makeChkFlag(c,d);return f}})(jQuery);(function(i){i.extend(!0,i.fn.zTree._z,{view:{clearOldFirstNode:function(c,a){for(var b=a.getNextNode();b;){if(b.isFirstNode){b.isFirstNode=!1;d.setNodeLineIcos(c,b);break}if(b.isLastNode)break;b=b.getNextNode()}},clearOldLastNode:function(c,a,b){for(a=a.getPreNode();a;){if(a.isLastNode){a.isLastNode=!1;b&&d.setNodeLineIcos(c,a);break}if(a.isFirstNode)break;a=a.getPreNode()}},makeDOMNodeMainBefore:function(c,a,b){c.push("<li ",b.isHidden?"style='display:none;' ":"","id='",b.tId,"' class='",l.className.LEVEL,b.level,"' tabindex='0' hidefocus='true' treenode>")},showNode:function(c,a){a.isHidden=!1;f.initShowForExCheck(c,a);j(a,c).show()},showNodes:function(c,a,b){if(a&&a.length!=0){var e={},g,k;for(g=0,k=a.length;g<k;g++){var h=a[g];if(!e[h.parentTId]){var i=h.getParentNode();e[h.parentTId]=i===null?f.getRoot(c):h.getParentNode()}d.showNode(c,h,b)}for(var j in e)a=e[j][c.data.key.children],d.setFirstNodeForShow(c,a),d.setLastNodeForShow(c,a)}},hideNode:function(c,a){a.isHidden=!0;a.isFirstNode=!1;a.isLastNode=!1;f.initHideForExCheck(c,a);d.cancelPreSelectedNode(c,a);j(a,c).hide()},hideNodes:function(c,a,b){if(a&&a.length!=0){var e={},g,k;for(g=0,k=a.length;g<k;g++){var h=a[g];if((h.isFirstNode||h.isLastNode)&&!e[h.parentTId]){var i=h.getParentNode();e[h.parentTId]=i===null?f.getRoot(c):h.getParentNode()}d.hideNode(c,h,b)}for(var j in e)a=e[j][c.data.key.children],d.setFirstNodeForHide(c,a),d.setLastNodeForHide(c,a)}},setFirstNode:function(c,a){var b=c.data.key.children,e=a[b].length;e>0&&!a[b][0].isHidden?a[b][0].isFirstNode=!0:e>0&&d.setFirstNodeForHide(c,a[b])},setLastNode:function(c,a){var b=c.data.key.children,e=a[b].length;e>0&&!a[b][0].isHidden?a[b][e-1].isLastNode=!0:e>0&&d.setLastNodeForHide(c,a[b])},setFirstNodeForHide:function(c,a){var b,e,g;for(e=0,g=a.length;e<g;e++){b=a[e];if(b.isFirstNode)break;if(!b.isHidden&&!b.isFirstNode){b.isFirstNode=!0;d.setNodeLineIcos(c,b);break}else b=null}return b},setFirstNodeForShow:function(c,a){var b,e,g,f,h;for(e=0,g=a.length;e<g;e++)if(b=a[e],!f&&!b.isHidden&&b.isFirstNode){f=b;break}else if(!f&&!b.isHidden&&!b.isFirstNode)b.isFirstNode=!0,f=b,d.setNodeLineIcos(c,b);else if(f&&b.isFirstNode){b.isFirstNode=!1;h=b;d.setNodeLineIcos(c,b);break}return{"new":f,old:h}},setLastNodeForHide:function(c,a){var b,e;for(e=a.length-1;e>=0;e--){b=a[e];if(b.isLastNode)break;if(!b.isHidden&&!b.isLastNode){b.isLastNode=!0;d.setNodeLineIcos(c,b);break}else b=null}return b},setLastNodeForShow:function(c,a){var b,e,g,f;for(e=a.length-1;e>=0;e--)if(b=a[e],!g&&!b.isHidden&&b.isLastNode){g=b;break}else if(!g&&!b.isHidden&&!b.isLastNode)b.isLastNode=!0,g=b,d.setNodeLineIcos(c,b);else if(g&&b.isLastNode){b.isLastNode=!1;f=b;d.setNodeLineIcos(c,b);break}return{"new":g,old:f}}},data:{initHideForExCheck:function(c,a){if(a.isHidden&&c.check&&c.check.enable){if(typeof a._nocheck=="undefined")a._nocheck=!!a.nocheck,a.nocheck=!0;a.check_Child_State=-1;d.repairParentChkClassWithSelf&&d.repairParentChkClassWithSelf(c,a)}},initShowForExCheck:function(c,a){if(!a.isHidden&&c.check&&c.check.enable){if(typeof a._nocheck!="undefined")a.nocheck=a._nocheck,delete a._nocheck;if(d.setChkClass){var b=j(a,l.id.CHECK,c);d.setChkClass(c,b,a)}d.repairParentChkClassWithSelf&&d.repairParentChkClassWithSelf(c,a)}}}});var i=i.fn.zTree,m=i._z.tools,l=i.consts,d=i._z.view,f=i._z.data,j=m.$;f.addInitNode(function(c,a,b){if(typeof b.isHidden=="string")b.isHidden=m.eqs(b.isHidden,"true");b.isHidden=!!b.isHidden;f.initHideForExCheck(c,b)});f.addBeforeA(function(){});f.addZTreeTools(function(c,a){a.showNodes=function(a,b){d.showNodes(c,a,b)};a.showNode=function(a,b){a&&d.showNodes(c,[a],b)};a.hideNodes=function(a,b){d.hideNodes(c,a,b)};a.hideNode=function(a,b){a&&d.hideNodes(c,[a],b)};var b=a.checkNode;if(b)a.checkNode=function(c,d,f,h){(!c||!c.isHidden)&&b.apply(a,arguments)}});var n=f.initNode;f.initNode=function(c,a,b,e,g,i,h){var j=(e?e:f.getRoot(c))[c.data.key.children];f.tmpHideFirstNode=d.setFirstNodeForHide(c,j);f.tmpHideLastNode=d.setLastNodeForHide(c,j);h&&(d.setNodeLineIcos(c,f.tmpHideFirstNode),d.setNodeLineIcos(c,f.tmpHideLastNode));g=f.tmpHideFirstNode===b;i=f.tmpHideLastNode===b;n&&n.apply(f,arguments);h&&i&&d.clearOldLastNode(c,b,h)};var o=f.makeChkFlag;if(o)f.makeChkFlag=function(c,a){(!a||!a.isHidden)&&o.apply(f,arguments)};var p=f.getTreeCheckedNodes;if(p)f.getTreeCheckedNodes=function(c,a,b,e){if(a&&a.length>0){var d=a[0].getParentNode();if(d&&d.isHidden)return[]}return p.apply(f,arguments)};var q=f.getTreeChangeCheckedNodes;if(q)f.getTreeChangeCheckedNodes=function(c,a,b){if(a&&a.length>0){var d=a[0].getParentNode();if(d&&d.isHidden)return[]}return q.apply(f,arguments)};var r=d.expandCollapseSonNode;if(r)d.expandCollapseSonNode=function(c,a,b,e,f){(!a||!a.isHidden)&&r.apply(d,arguments)};var s=d.setSonNodeCheckBox;if(s)d.setSonNodeCheckBox=function(c,a,b,e){(!a||!a.isHidden)&&s.apply(d,arguments)};var t=d.repairParentChkClassWithSelf;if(t)d.repairParentChkClassWithSelf=function(c,a){(!a||!a.isHidden)&&t.apply(d,arguments)}})(jQuery);(function(v){var I={event:{DRAG:"ztree_drag",DROP:"ztree_drop",RENAME:"ztree_rename",DRAGMOVE:"ztree_dragmove"},id:{EDIT:"_edit",INPUT:"_input",REMOVE:"_remove"},move:{TYPE_INNER:"inner",TYPE_PREV:"prev",TYPE_NEXT:"next"},node:{CURSELECTED_EDIT:"curSelectedNode_Edit",TMPTARGET_TREE:"tmpTargetzTree",TMPTARGET_NODE:"tmpTargetNode"}},x={onHoverOverNode:function(b,a){var c=m.getSetting(b.data.treeId),d=m.getRoot(c);if(d.curHoverNode!=a)x.onHoverOutNode(b);d.curHoverNode=a;f.addHoverDom(c,a)},onHoverOutNode:function(b){var b=m.getSetting(b.data.treeId),a=m.getRoot(b);if(a.curHoverNode&&!m.isSelectedNode(b,a.curHoverNode))f.removeTreeDom(b,a.curHoverNode),a.curHoverNode=null},onMousedownNode:function(b,a){function c(b){if(B.dragFlag==0&&Math.abs(N-b.clientX)<e.edit.drag.minMoveSize&&Math.abs(O-b.clientY)<e.edit.drag.minMoveSize)return!0;var a,c,n,k,i;i=e.data.key.children;M.css("cursor","pointer");if(B.dragFlag==0){if(g.apply(e.callback.beforeDrag,[e.treeId,l],!0)==!1)return r(b),!0;for(a=0,c=l.length;a<c;a++){if(a==0)B.dragNodeShowBefore=[];n=l[a];n.isParent&&n.open?(f.expandCollapseNode(e,n,!n.open),B.dragNodeShowBefore[n.tId]=!0):B.dragNodeShowBefore[n.tId]=!1}B.dragFlag=1;t.showHoverDom=!1;g.showIfameMask(e,!0);n=!0;k=-1;if(l.length>1){var j=l[0].parentTId?l[0].getParentNode()[i]:m.getNodes(e);i=[];for(a=0,c=j.length;a<c;a++)if(B.dragNodeShowBefore[j[a].tId]!==void 0&&(n&&k>-1&&k+1!==a&&(n=!1),i.push(j[a]),k=a),l.length===i.length){l=i;break}}n&&(H=l[0].getPreNode(),R=l[l.length-1].getNextNode());D=o("<ul class='zTreeDragUL'></ul>",e);for(a=0,c=l.length;a<c;a++)n=l[a],n.editNameFlag=!1,f.selectNode(e,n,a>0),f.removeTreeDom(e,n),a>e.edit.drag.maxShowNodeNum-1||(k=o("<li id='"+n.tId+"_tmp'></li>",e),k.append(o(n,d.id.A,e).clone()),k.css("padding","0"),k.children("#"+n.tId+d.id.A).removeClass(d.node.CURSELECTED),D.append(k),a==e.edit.drag.maxShowNodeNum-1&&(k=o("<li id='"+n.tId+"_moretmp'><a>  ...  </a></li>",e),D.append(k)));D.attr("id",l[0].tId+d.id.UL+"_tmp");D.addClass(e.treeObj.attr("class"));D.appendTo(M);A=o("<span class='tmpzTreeMove_arrow'></span>",e);A.attr("id","zTreeMove_arrow_tmp");A.appendTo(M);e.treeObj.trigger(d.event.DRAG,[b,e.treeId,l])}if(B.dragFlag==1){s&&A.attr("id")==b.target.id&&u&&b.clientX+F.scrollLeft()+2>v("#"+u+d.id.A,s).offset().left?(n=v("#"+u+d.id.A,s),b.target=n.length>0?n.get(0):b.target):s&&(s.removeClass(d.node.TMPTARGET_TREE),u&&v("#"+u+d.id.A,s).removeClass(d.node.TMPTARGET_NODE+"_"+d.move.TYPE_PREV).removeClass(d.node.TMPTARGET_NODE+"_"+I.move.TYPE_NEXT).removeClass(d.node.TMPTARGET_NODE+"_"+I.move.TYPE_INNER));u=s=null;J=!1;h=e;n=m.getSettings();for(var y in n)if(n[y].treeId&&n[y].edit.enable&&n[y].treeId!=e.treeId&&(b.target.id==n[y].treeId||v(b.target).parents("#"+n[y].treeId).length>0))J=!0,h=n[y];y=F.scrollTop();k=F.scrollLeft();i=h.treeObj.offset();a=h.treeObj.get(0).scrollHeight;n=h.treeObj.get(0).scrollWidth;c=b.clientY+y-i.top;var p=h.treeObj.height()+i.top-b.clientY-y,q=b.clientX+k-i.left,x=h.treeObj.width()+i.left-b.clientX-k;i=c<e.edit.drag.borderMax&&c>e.edit.drag.borderMin;var j=p<e.edit.drag.borderMax&&p>e.edit.drag.borderMin,K=q<e.edit.drag.borderMax&&q>e.edit.drag.borderMin,G=x<e.edit.drag.borderMax&&x>e.edit.drag.borderMin,p=c>e.edit.drag.borderMin&&p>e.edit.drag.borderMin&&q>e.edit.drag.borderMin&&x>e.edit.drag.borderMin,q=i&&h.treeObj.scrollTop()<=0,x=j&&h.treeObj.scrollTop()+h.treeObj.height()+10>=a,P=K&&h.treeObj.scrollLeft()<=0,Q=G&&h.treeObj.scrollLeft()+h.treeObj.width()+10>=n;if(b.target&&g.isChildOrSelf(b.target,h.treeId)){for(var E=b.target;E&&E.tagName&&!g.eqs(E.tagName,"li")&&E.id!=h.treeId;)E=E.parentNode;var S=!0;for(a=0,c=l.length;a<c;a++)if(n=l[a],E.id===n.tId){S=!1;break}else if(o(n,e).find("#"+E.id).length>0){S=!1;break}if(S&&b.target&&g.isChildOrSelf(b.target,E.id+d.id.A))s=v(E),u=E.id}n=l[0];if(p&&g.isChildOrSelf(b.target,h.treeId)){if(!s&&(b.target.id==h.treeId||q||x||P||Q)&&(J||!J&&n.parentTId))s=h.treeObj;i?h.treeObj.scrollTop(h.treeObj.scrollTop()-10):j&&h.treeObj.scrollTop(h.treeObj.scrollTop()+10);K?h.treeObj.scrollLeft(h.treeObj.scrollLeft()-10):G&&h.treeObj.scrollLeft(h.treeObj.scrollLeft()+
10);s&&s!=h.treeObj&&s.offset().left<h.treeObj.offset().left&&h.treeObj.scrollLeft(h.treeObj.scrollLeft()+s.offset().left-h.treeObj.offset().left)}D.css({top:b.clientY+y+3+"px",left:b.clientX+k+3+"px"});i=a=0;if(s&&s.attr("id")!=h.treeId){var z=u==null?null:m.getNodeCache(h,u);c=(b.ctrlKey||b.metaKey)&&e.edit.drag.isMove&&e.edit.drag.isCopy||!e.edit.drag.isMove&&e.edit.drag.isCopy;a=!!(H&&u===H.tId);i=!!(R&&u===R.tId);k=n.parentTId&&n.parentTId==u;n=(c||!i)&&g.apply(h.edit.drag.prev,[h.treeId,l,z],!!h.edit.drag.prev);a=(c||!a)&&g.apply(h.edit.drag.next,[h.treeId,l,z],!!h.edit.drag.next);G=(c||!k)&&!(h.data.keep.leaf&&!z.isParent)&&g.apply(h.edit.drag.inner,[h.treeId,l,z],!!h.edit.drag.inner);if(!n&&!a&&!G){if(s=null,u="",w=d.move.TYPE_INNER,A.css({display:"none"}),window.zTreeMoveTimer)clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null}else{c=v("#"+u+d.id.A,s);i=z.isLastNode?null:v("#"+z.getNextNode().tId+d.id.A,s.next());j=c.offset().top;k=c.offset().left;K=n?G?0.25:a?0.5:1:-1;G=a?G?0.75:n?0.5:0:-1;y=(b.clientY+y-j)/c.height();(K==1||y<=K&&y>=-0.2)&&n?(a=1-A.width(),i=j-A.height()/2,w=d.move.TYPE_PREV):(G==0||y>=G&&y<=1.2)&&a?(a=1-A.width(),i=i==null||z.isParent&&z.open?j+c.height()-A.height()/2:i.offset().top-A.height()/2,w=d.move.TYPE_NEXT):(a=5-A.width(),i=j,w=d.move.TYPE_INNER);A.css({display:"block",top:i+"px",left:k+a+"px"});c.addClass(d.node.TMPTARGET_NODE+"_"+w);if(T!=u||U!=w)L=(new Date).getTime();if(z&&z.isParent&&w==d.move.TYPE_INNER&&(y=!0,window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId!==z.tId?(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null):window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId===z.tId&&(y=!1),y))window.zTreeMoveTimer=setTimeout(function(){w==d.move.TYPE_INNER&&z&&z.isParent&&!z.open&&(new Date).getTime()-L>h.edit.drag.autoOpenTime&&g.apply(h.callback.beforeDragOpen,[h.treeId,z],!0)&&(f.switchNode(h,z),h.edit.drag.autoExpandTrigger&&h.treeObj.trigger(d.event.EXPAND,[h.treeId,z]))},h.edit.drag.autoOpenTime+50),window.zTreeMoveTargetNodeTId=z.tId}}else if(w=d.move.TYPE_INNER,s&&g.apply(h.edit.drag.inner,[h.treeId,l,null],!!h.edit.drag.inner)?s.addClass(d.node.TMPTARGET_TREE):s=null,A.css({display:"none"}),window.zTreeMoveTimer)clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null;T=u;U=w;e.treeObj.trigger(d.event.DRAGMOVE,[b,e.treeId,l])}return!1}function r(b){if(window.zTreeMoveTimer)clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null;U=T=null;F.unbind("mousemove",c);F.unbind("mouseup",r);F.unbind("selectstart",k);M.css("cursor","auto");s&&(s.removeClass(d.node.TMPTARGET_TREE),u&&v("#"+u+d.id.A,s).removeClass(d.node.TMPTARGET_NODE+"_"+d.move.TYPE_PREV).removeClass(d.node.TMPTARGET_NODE+"_"+I.move.TYPE_NEXT).removeClass(d.node.TMPTARGET_NODE+"_"+I.move.TYPE_INNER));g.showIfameMask(e,!1);t.showHoverDom=!0;if(B.dragFlag!=0){B.dragFlag=0;var a,i,j;for(a=0,i=l.length;a<i;a++)j=l[a],j.isParent&&B.dragNodeShowBefore[j.tId]&&!j.open&&(f.expandCollapseNode(e,j,!j.open),delete B.dragNodeShowBefore[j.tId]);D&&D.remove();A&&A.remove();var p=(b.ctrlKey||b.metaKey)&&e.edit.drag.isMove&&e.edit.drag.isCopy||!e.edit.drag.isMove&&e.edit.drag.isCopy;!p&&s&&u&&l[0].parentTId&&u==l[0].parentTId&&w==d.move.TYPE_INNER&&(s=null);if(s){var q=u==null?null:m.getNodeCache(h,u);if(g.apply(e.callback.beforeDrop,[h.treeId,l,q,w,p],!0)==!1)f.selectNodes(x,l);else{var C=p?g.clone(l):l;a=function(){if(J){if(!p)for(var a=0,c=l.length;a<c;a++)f.removeNode(e,l[a]);w==d.move.TYPE_INNER?f.addNodes(h,q,-1,C):f.addNodes(h,q.getParentNode(),w==d.move.TYPE_PREV?q.getIndex():q.getIndex()+1,C)}else if(p&&w==d.move.TYPE_INNER)f.addNodes(h,q,-1,C);else if(p)f.addNodes(h,q.getParentNode(),w==d.move.TYPE_PREV?q.getIndex():q.getIndex()+1,C);else if(w!=d.move.TYPE_NEXT)for(a=0,c=C.length;a<c;a++)f.moveNode(h,q,C[a],w,!1);else for(a=-1,c=C.length-1;a<c;c--)f.moveNode(h,q,C[c],w,!1);f.selectNodes(h,C);o(C[0],e).focus().blur();e.treeObj.trigger(d.event.DROP,[b,h.treeId,C,q,w,p])};w==d.move.TYPE_INNER&&g.canAsync(h,q)?f.asyncNode(h,q,!1,a):a()}}else f.selectNodes(x,l),e.treeObj.trigger(d.event.DROP,[b,e.treeId,l,null,null,null])}}function k(){return!1}var i,j,e=m.getSetting(b.data.treeId),B=m.getRoot(e),t=m.getRoots();if(b.button==2||!e.edit.enable||!e.edit.drag.isCopy&&!e.edit.drag.isMove)return!0;var p=b.target,q=m.getRoot(e).curSelectedList,l=[];if(m.isSelectedNode(e,a))for(i=0,j=q.length;i<j;i++){if(q[i].editNameFlag&&g.eqs(p.tagName,"input")&&p.getAttribute("treeNode"+d.id.INPUT)!==null)return!0;l.push(q[i]);if(l[0].parentTId!==q[i].parentTId){l=[a];break}}else l=[a];f.editNodeBlur=!0;f.cancelCurEditNode(e);var F=v(e.treeObj.get(0).ownerDocument),M=v(e.treeObj.get(0).ownerDocument.body),D,A,s,J=!1,h=e,x=e,H,R,T=null,U=null,u=null,w=d.move.TYPE_INNER,N=b.clientX,O=b.clientY,L=(new Date).getTime();g.uCanDo(e)&&F.bind("mousemove",c);F.bind("mouseup",r);F.bind("selectstart",k);b.preventDefault&&b.preventDefault();return!0}};v.extend(!0,v.fn.zTree.consts,I);v.extend(!0,v.fn.zTree._z,{tools:{getAbs:function(b){b=b.getBoundingClientRect();return[b.left+(document.body.scrollLeft+document.documentElement.scrollLeft),b.top+(document.body.scrollTop+document.documentElement.scrollTop)]},inputFocus:function(b){b.get(0)&&(b.focus(),g.setCursorPosition(b.get(0),b.val().length))},inputSelect:function(b){b.get(0)&&(b.focus(),b.select())},setCursorPosition:function(b,a){if(b.setSelectionRange)b.focus(),b.setSelectionRange(a,a);else if(b.createTextRange){var c=b.createTextRange();c.collapse(!0);c.moveEnd("character",a);c.moveStart("character",a);c.select()}},showIfameMask:function(b,a){for(var c=m.getRoot(b);c.dragMaskList.length>0;)c.dragMaskList[0].remove(),c.dragMaskList.shift();if(a)for(var d=o("iframe",b),f=0,i=d.length;f<i;f++){var j=d.get(f),e=g.getAbs(j),j=o("<div id='zTreeMask_"+f+"' class='zTreeMask' style='top:"+e[1]+"px; left:"+e[0]+"px; width:"+j.offsetWidth+"px; height:"+j.offsetHeight+"px;'></div>",b);j.appendTo(o("body",b));c.dragMaskList.push(j)}}},view:{addEditBtn:function(b,a){if(!(a.editNameFlag||o(a,d.id.EDIT,b).length>0)&&g.apply(b.edit.showRenameBtn,[b.treeId,a],b.edit.showRenameBtn)){var c=o(a,d.id.A,b),r="<span class='"+d.className.BUTTON+" edit' id='"+a.tId+d.id.EDIT+"' title='"+g.apply(b.edit.renameTitle,[b.treeId,a],b.edit.renameTitle)+"' treeNode"+d.id.EDIT+" style='display:none;'></span>";c.append(r);o(a,d.id.EDIT,b).bind("click",function(){if(!g.uCanDo(b)||g.apply(b.callback.beforeEditName,[b.treeId,a],!0)==!1)return!1;f.editNode(b,a);return!1}).show()}},addRemoveBtn:function(b,a){if(!(a.editNameFlag||o(a,d.id.REMOVE,b).length>0)&&g.apply(b.edit.showRemoveBtn,[b.treeId,a],b.edit.showRemoveBtn)){var c=o(a,d.id.A,b),r="<span class='"+d.className.BUTTON+" remove' id='"+a.tId+d.id.REMOVE+"' title='"+g.apply(b.edit.removeTitle,[b.treeId,a],b.edit.removeTitle)+"' treeNode"+d.id.REMOVE+" style='display:none;'></span>";c.append(r);o(a,d.id.REMOVE,b).bind("click",function(){if(!g.uCanDo(b)||g.apply(b.callback.beforeRemove,[b.treeId,a],!0)==!1)return!1;f.removeNode(b,a);b.treeObj.trigger(d.event.REMOVE,[b.treeId,a]);return!1}).bind("mousedown",function(){return!0}).show()}},addHoverDom:function(b,a){if(m.getRoots().showHoverDom)a.isHover=!0,b.edit.enable&&(f.addEditBtn(b,a),f.addRemoveBtn(b,a)),g.apply(b.view.addHoverDom,[b.treeId,a])},cancelCurEditNode:function(b,a,c){var r=m.getRoot(b),k=b.data.key.name,i=r.curEditNode;if(i){var j=r.curEditInput,a=a?a:c?i[k]:j.val();if(g.apply(b.callback.beforeRename,[b.treeId,i,a,c],!0)===!1)return!1;i[k]=a;o(i,d.id.A,b).removeClass(d.node.CURSELECTED_EDIT);j.unbind();f.setNodeName(b,i);i.editNameFlag=!1;r.curEditNode=null;r.curEditInput=null;f.selectNode(b,i,!1);b.treeObj.trigger(d.event.RENAME,[b.treeId,i,c])}return r.noSelection=!0},editNode:function(b,a){var c=m.getRoot(b);f.editNodeBlur=!1;if(m.isSelectedNode(b,a)&&c.curEditNode==a&&a.editNameFlag)setTimeout(function(){g.inputFocus(c.curEditInput)},0);else{var r=b.data.key.name;a.editNameFlag=!0;f.removeTreeDom(b,a);f.cancelCurEditNode(b);f.selectNode(b,a,!1);o(a,d.id.SPAN,b).html("<input type=text class='rename' id='"+
a.tId+d.id.INPUT+"' treeNode"+d.id.INPUT+" >");var k=o(a,d.id.INPUT,b);k.attr("value",a[r]);b.edit.editNameSelectAll?g.inputSelect(k):g.inputFocus(k);k.bind("blur",function(){f.editNodeBlur||f.cancelCurEditNode(b)}).bind("keydown",function(a){a.keyCode=="13"?(f.editNodeBlur=!0,f.cancelCurEditNode(b)):a.keyCode=="27"&&f.cancelCurEditNode(b,null,!0)}).bind("click",function(){return!1}).bind("dblclick",function(){return!1});o(a,d.id.A,b).addClass(d.node.CURSELECTED_EDIT);c.curEditInput=k;c.noSelection=!1;c.curEditNode=a}},moveNode:function(b,a,c,r,k,i){var j=m.getRoot(b),e=b.data.key.children;if(a!=c&&(!b.data.keep.leaf||!a||a.isParent||r!=d.move.TYPE_INNER)){var g=c.parentTId?c.getParentNode():j,t=a===null||a==j;t&&a===null&&(a=j);if(t)r=d.move.TYPE_INNER;j=a.parentTId?a.getParentNode():j;if(r!=d.move.TYPE_PREV&&r!=d.move.TYPE_NEXT)r=d.move.TYPE_INNER;if(r==d.move.TYPE_INNER)if(t)c.parentTId=null;else{if(!a.isParent)a.isParent=!0,a.open=!!a.open,f.setNodeLineIcos(b,a);c.parentTId=a.tId}var p;t?p=t=b.treeObj:(!i&&r==d.move.TYPE_INNER?f.expandCollapseNode(b,a,!0,!1):i||f.expandCollapseNode(b,a.getParentNode(),!0,!1),t=o(a,b),p=o(a,d.id.UL,b),t.get(0)&&!p.get(0)&&(p=[],f.makeUlHtml(b,a,p,""),t.append(p.join(""))),p=o(a,d.id.UL,b));var q=o(c,b);q.get(0)?t.get(0)||q.remove():q=f.appendNodes(b,c.level,[c],null,-1,!1,!0).join("");p.get(0)&&r==d.move.TYPE_INNER?p.append(q):t.get(0)&&r==d.move.TYPE_PREV?t.before(q):t.get(0)&&r==d.move.TYPE_NEXT&&t.after(q);var l=-1,v=0,x=null,t=null,D=c.level;if(c.isFirstNode){if(l=0,g[e].length>1)x=g[e][1],x.isFirstNode=!0}else if(c.isLastNode)l=g[e].length-1,x=g[e][l-1],x.isLastNode=!0;else for(p=0,q=g[e].length;p<q;p++)if(g[e][p].tId==c.tId){l=p;break}l>=0&&g[e].splice(l,1);if(r!=d.move.TYPE_INNER)for(p=0,q=j[e].length;p<q;p++)j[e][p].tId==a.tId&&(v=p);if(r==d.move.TYPE_INNER){a[e]||(a[e]=[]);if(a[e].length>0)t=a[e][a[e].length-1],t.isLastNode=!1;a[e].splice(a[e].length,0,c);c.isLastNode=!0;c.isFirstNode=a[e].length==1}else a.isFirstNode&&r==d.move.TYPE_PREV?(j[e].splice(v,0,c),t=a,t.isFirstNode=!1,c.parentTId=a.parentTId,c.isFirstNode=!0,c.isLastNode=!1):a.isLastNode&&r==d.move.TYPE_NEXT?(j[e].splice(v+1,0,c),t=a,t.isLastNode=!1,c.parentTId=a.parentTId,c.isFirstNode=!1,c.isLastNode=!0):(r==d.move.TYPE_PREV?j[e].splice(v,0,c):j[e].splice(v+1,0,c),c.parentTId=a.parentTId,c.isFirstNode=!1,c.isLastNode=!1);m.fixPIdKeyValue(b,c);m.setSonNodeLevel(b,c.getParentNode(),c);f.setNodeLineIcos(b,c);f.repairNodeLevelClass(b,c,D);!b.data.keep.parent&&g[e].length<1?(g.isParent=!1,g.open=!1,a=o(g,d.id.UL,b),r=o(g,d.id.SWITCH,b),e=o(g,d.id.ICON,b),f.replaceSwitchClass(g,r,d.folder.DOCU),f.replaceIcoClass(g,e,d.folder.DOCU),a.css("display","none")):x&&f.setNodeLineIcos(b,x);t&&f.setNodeLineIcos(b,t);b.check&&b.check.enable&&f.repairChkClass&&(f.repairChkClass(b,g),f.repairParentChkClassWithSelf(b,g),g!=c.parent&&f.repairParentChkClassWithSelf(b,c));i||f.expandCollapseParentNode(b,c.getParentNode(),!0,k)}},removeEditBtn:function(b,a){o(a,d.id.EDIT,b).unbind().remove()},removeRemoveBtn:function(b,a){o(a,d.id.REMOVE,b).unbind().remove()},removeTreeDom:function(b,a){a.isHover=!1;f.removeEditBtn(b,a);f.removeRemoveBtn(b,a);g.apply(b.view.removeHoverDom,[b.treeId,a])},repairNodeLevelClass:function(b,a,c){if(c!==a.level){var f=o(a,b),g=o(a,d.id.A,b),b=o(a,d.id.UL,b),c=d.className.LEVEL+c,a=d.className.LEVEL+a.level;f.removeClass(c);f.addClass(a);g.removeClass(c);g.addClass(a);b.removeClass(c);b.addClass(a)}},selectNodes:function(b,a){for(var c=0,d=a.length;c<d;c++)f.selectNode(b,a[c],c>0)}},event:{},data:{setSonNodeLevel:function(b,a,c){if(c){var d=b.data.key.children;c.level=a?a.level+1:0;if(c[d])for(var a=0,f=c[d].length;a<f;a++)c[d][a]&&m.setSonNodeLevel(b,c,c[d][a])}}}});var H=v.fn.zTree,g=H._z.tools,d=H.consts,f=H._z.view,m=H._z.data,o=g.$;m.exSetting({edit:{enable:!1,editNameSelectAll:!1,showRemoveBtn:!0,showRenameBtn:!0,removeTitle:"remove",renameTitle:"rename",drag:{autoExpandTrigger:!1,isCopy:!0,isMove:!0,prev:!0,next:!0,inner:!0,minMoveSize:5,borderMax:10,borderMin:-5,maxShowNodeNum:5,autoOpenTime:500}},view:{addHoverDom:null,removeHoverDom:null},callback:{beforeDrag:null,beforeDragOpen:null,beforeDrop:null,beforeEditName:null,beforeRename:null,onDrag:null,onDragMove:null,onDrop:null,onRename:null}});m.addInitBind(function(b){var a=b.treeObj,c=d.event;a.bind(c.RENAME,function(a,c,d,f){g.apply(b.callback.onRename,[a,c,d,f])});a.bind(c.DRAG,function(a,c,d,f){g.apply(b.callback.onDrag,[c,d,f])});a.bind(c.DRAGMOVE,function(a,c,d,f){g.apply(b.callback.onDragMove,[c,d,f])});a.bind(c.DROP,function(a,c,d,f,e,m,o){g.apply(b.callback.onDrop,[c,d,f,e,m,o])})});m.addInitUnBind(function(b){var b=b.treeObj,a=d.event;b.unbind(a.RENAME);b.unbind(a.DRAG);b.unbind(a.DRAGMOVE);b.unbind(a.DROP)});m.addInitCache(function(){});m.addInitNode(function(b,a,c){if(c)c.isHover=!1,c.editNameFlag=!1});m.addInitProxy(function(b){var a=b.target,c=m.getSetting(b.data.treeId),f=b.relatedTarget,k="",i=null,j="",e=null,o=null;if(g.eqs(b.type,"mouseover")){if(o=g.getMDom(c,a,[{tagName:"a",attrName:"treeNode"+d.id.A}]))k=g.getNodeMainDom(o).id,j="hoverOverNode"}else if(g.eqs(b.type,"mouseout"))o=g.getMDom(c,f,[{tagName:"a",attrName:"treeNode"+d.id.A}]),o||(k="remove",j="hoverOutNode");else if(g.eqs(b.type,"mousedown")&&(o=g.getMDom(c,a,[{tagName:"a",attrName:"treeNode"+d.id.A}])))k=g.getNodeMainDom(o).id,j="mousedownNode";if(k.length>0)switch(i=m.getNodeCache(c,k),j){case"mousedownNode":e=x.onMousedownNode;break;case"hoverOverNode":e=x.onHoverOverNode;break;case"hoverOutNode":e=x.onHoverOutNode}return{stop:!1,node:i,nodeEventType:j,nodeEventCallback:e,treeEventType:"",treeEventCallback:null}});m.addInitRoot(function(b){var b=m.getRoot(b),a=m.getRoots();b.curEditNode=null;b.curEditInput=null;b.curHoverNode=null;b.dragFlag=0;b.dragNodeShowBefore=[];b.dragMaskList=[];a.showHoverDom=!0});m.addZTreeTools(function(b,a){a.cancelEditName=function(a){m.getRoot(this.setting).curEditNode&&f.cancelCurEditNode(this.setting,a?a:null,!0)};a.copyNode=function(a,b,k,i){if(!b)return null;if(a&&!a.isParent&&this.setting.data.keep.leaf&&k===d.move.TYPE_INNER)return null;var j=this,e=g.clone(b);if(!a)a=null,k=d.move.TYPE_INNER;k==d.move.TYPE_INNER?(b=function(){f.addNodes(j.setting,a,-1,[e],i)},g.canAsync(this.setting,a)?f.asyncNode(this.setting,a,i,b):b()):(f.addNodes(this.setting,a.parentNode,-1,[e],i),f.moveNode(this.setting,a,e,k,!1,i));return e};a.editName=function(a){a&&a.tId&&a===m.getNodeCache(this.setting,a.tId)&&(a.parentTId&&f.expandCollapseParentNode(this.setting,a.getParentNode(),!0),f.editNode(this.setting,a))};a.moveNode=function(a,b,k,i){function j(){f.moveNode(e.setting,a,b,k,!1,i)}if(!b)return b;if(a&&!a.isParent&&this.setting.data.keep.leaf&&k===d.move.TYPE_INNER)return null;else if(a&&(b.parentTId==a.tId&&k==d.move.TYPE_INNER||o(b,this.setting).find("#"+a.tId).length>0))return null;else a||(a=null);var e=this;g.canAsync(this.setting,a)&&k===d.move.TYPE_INNER?f.asyncNode(this.setting,a,i,j):j();return b};a.setEditable=function(a){this.setting.edit.enable=a;return this.refresh()}});var N=f.cancelPreSelectedNode;f.cancelPreSelectedNode=function(b,a){for(var c=m.getRoot(b).curSelectedList,d=0,g=c.length;d<g;d++)if(!a||a===c[d])if(f.removeTreeDom(b,c[d]),a)break;N&&N.apply(f,arguments)};var O=f.createNodes;f.createNodes=function(b,a,c,d,g){O&&O.apply(f,arguments);c&&f.repairParentChkClassWithSelf&&f.repairParentChkClassWithSelf(b,d)};var V=f.makeNodeUrl;f.makeNodeUrl=function(b,a){return b.edit.enable?null:V.apply(f,arguments)};var L=f.removeNode;f.removeNode=function(b,a){var c=m.getRoot(b);if(c.curEditNode===a)c.curEditNode=null;L&&L.apply(f,arguments)};var P=f.selectNode;f.selectNode=function(b,a,c){var d=m.getRoot(b);if(m.isSelectedNode(b,a)&&d.curEditNode==a&&a.editNameFlag)return!1;P&&P.apply(f,arguments);f.addHoverDom(b,a);return!0};var Q=g.uCanDo;g.uCanDo=function(b,a){var c=m.getRoot(b);if(a&&(g.eqs(a.type,"mouseover")||g.eqs(a.type,"mouseout")||g.eqs(a.type,"mousedown")||g.eqs(a.type,"mouseup")))return!0;if(c.curEditNode)f.editNodeBlur=!1,c.curEditInput.focus();return!c.curEditNode&&(Q?Q.apply(f,arguments):!0)}})(jQuery);!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.echarts=e():t.echarts=e()}(this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return t[n].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){t.exports=i(2),i(94),i(88),i(99),i(174),i(299),i(288),i(309),i(263),i(259),i(255),i(295),i(304),i(241),i(246),i(252),i(284),i(276),i(36),i(187),i(210),i(332),i(329),i(228),i(336),i(322),i(201),i(177),i(347),i(194),i(193),i(192),i(337),i(202),i(218)},function(t,e){function i(t){if("object"==typeof t&&null!==t){var e=t;if(t instanceof Array){e=[];for(var n=0,r=t.length;r>n;n++)e[n]=i(t[n])}else if(!M(t)&&!A(t)){e={};for(var o in t)t.hasOwnProperty(o)&&(e[o]=i(t[o]))}return e}return t}function n(t,e,r){if(!S(e)||!S(t))return r?i(e):t;for(var o in e)if(e.hasOwnProperty(o)){var a=t[o],s=e[o];!S(s)||!S(a)||_(s)||_(a)||A(s)||A(a)||M(s)||M(a)?!r&&o in t||(t[o]=i(e[o],!0)):n(a,s,r)}return t}function r(t,e){for(var i=t[0],r=1,o=t.length;o>r;r++)i=n(i,t[r],e);return i}function o(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function a(t,e,i){for(var n in e)e.hasOwnProperty(n)&&(i?null!=e[n]:null==t[n])&&(t[n]=e[n]);return t}function s(){return document.createElement("canvas")}function l(){return C||(C=N.createCanvas().getContext("2d")),C}function u(t,e){if(t){if(t.indexOf)return t.indexOf(e);for(var i=0,n=t.length;n>i;i++)if(t[i]===e)return i}return-1}function h(t,e){function i(){}var n=t.prototype;i.prototype=e.prototype,t.prototype=new i;for(var r in n)t.prototype[r]=n[r];t.prototype.constructor=t,t.superClass=e}function c(t,e,i){t="prototype"in t?t.prototype:t,e="prototype"in e?e.prototype:e,a(t,e,i)}function d(t){return t?"string"==typeof t?!1:"number"==typeof t.length:void 0}function f(t,e,i){if(t&&e)if(t.forEach&&t.forEach===z)t.forEach(e,i);else if(t.length===+t.length)for(var n=0,r=t.length;r>n;n++)e.call(i,t[n],n,t);else for(var o in t)t.hasOwnProperty(o)&&e.call(i,t[o],o,t)}function p(t,e,i){if(t&&e){if(t.map&&t.map===R)return t.map(e,i);for(var n=[],r=0,o=t.length;o>r;r++)n.push(e.call(i,t[r],r,t));return n}}function g(t,e,i,n){if(t&&e){if(t.reduce&&t.reduce===V)return t.reduce(e,i,n);for(var r=0,o=t.length;o>r;r++)i=e.call(n,i,t[r],r,t);return i}}function v(t,e,i){if(t&&e){if(t.filter&&t.filter===O)return t.filter(e,i);for(var n=[],r=0,o=t.length;o>r;r++)e.call(i,t[r],r,t)&&n.push(t[r]);return n}}function m(t,e,i){if(t&&e)for(var n=0,r=t.length;r>n;n++)if(e.call(i,t[n],n,t))return t[n]}function y(t,e){var i=E.call(arguments,2);return function(){return t.apply(e,i.concat(E.call(arguments)))}}function x(t){var e=E.call(arguments,1);return function(){return t.apply(this,e.concat(E.call(arguments)))}}function _(t){return"[object Array]"===P.call(t)}function b(t){return"function"==typeof t}function w(t){return"[object String]"===P.call(t)}function S(t){var e=typeof t;return"function"===e||!!t&&"object"==e}function M(t){return!!D[P.call(t)]}function A(t){return t&&1===t.nodeType&&"string"==typeof t.nodeName}function I(t){for(var e=0,i=arguments.length;i>e;e++)if(null!=arguments[e])return arguments[e]}function T(){return Function.call.apply(E,arguments)}function L(t,e){if(!t)throw new Error(e)}var C,D={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1,"[object CanvasPattern]":1,"[object Image]":1},P=Object.prototype.toString,k=Array.prototype,z=k.forEach,O=k.filter,E=k.slice,R=k.map,V=k.reduce,N={inherits:h,mixin:c,clone:i,merge:n,mergeAll:r,extend:o,defaults:a,getContext:l,createCanvas:s,indexOf:u,slice:T,find:m,isArrayLike:d,each:f,map:p,reduce:g,filter:v,bind:y,curry:x,isArray:_,isString:w,isObject:S,isFunction:b,isBuildInObject:M,isDom:A,retrieve:I,assert:L,noop:function(){}};t.exports=N},function(t,e,i){function n(t){return function(e,i,n){e=e&&e.toLowerCase(),P.prototype[t].call(this,e,i,n)}}function r(){P.call(this)}function o(t,e,i){function n(t,e){return t.prio-e.prio}i=i||{},"string"==typeof e&&(e=K[e]),this.id,this.group,this._dom=t,this._zr=L.init(t,{renderer:i.renderer||"canvas",devicePixelRatio:i.devicePixelRatio}),this._theme=C.clone(e),this._chartsViews=[],this._chartsMap={},this._componentsViews=[],this._componentsMap={},this._api=new _(this),this._coordSysMgr=new b,P.call(this),this._messageCenter=new r,this._initEvents(),this.resize=C.bind(this.resize,this),this._pendingActions=[],k(Q,n),k(Y,n)}function a(t,e){var i=this._model;i&&i.eachComponent({mainType:"series",query:e},function(n,r){var o=this._chartsMap[n.__viewId];o&&o.__alive&&o[t](n,i,this._api,e)},this)}function s(t,e,i){var n=this._api;z(this._componentsViews,function(r){var o=r.__model;r[t](o,e,n,i),v(o,r)},this),e.eachSeries(function(r,o){var a=this._chartsMap[r.__viewId];a[t](r,e,n,i),v(r,a),g(r,a)},this),p(this._zr,e)}function l(t,e){for(var i="component"===t,n=i?this._componentsViews:this._chartsViews,r=i?this._componentsMap:this._chartsMap,o=this._zr,a=0;a<n.length;a++)n[a].__alive=!1;e[i?"eachComponent":"eachSeries"](function(t,a){if(i){if("series"===t)return}else a=t;var s=a.id+"_"+a.type,l=r[s];if(!l){var u=S.parseClassType(a.type),h=i?A.getClass(u.main,u.sub):I.getClass(u.sub);if(!h)return;l=new h,l.init(e,this._api),r[s]=l,n.push(l),o.add(l.group)}a.__viewId=s,l.__alive=!0,l.__id=s,l.__model=a},this);for(var a=0;a<n.length;){var s=n[a];s.__alive?a++:(o.remove(s.group),s.dispose(e,this._api),n.splice(a,1),delete r[s.__id])}}function u(t,e){z(Y,function(i){i.func(t,e)})}function h(t){var e={};t.eachSeries(function(t){var i=t.get("stack"),n=t.getData();if(i&&"list"===n.type){var r=e[i];r&&(n.stackedOn=r),e[i]=n}})}function c(t,e){var i=this._api;z(Q,function(n){n.isLayout&&n.func(t,i,e)})}function d(t,e){var i=this._api;t.clearColorPalette(),t.eachSeries(function(t){t.clearColorPalette()}),z(Q,function(n){n.func(t,i,e)})}function f(t,e){var i=this._api;z(this._componentsViews,function(n){var r=n.__model;n.render(r,t,i,e),v(r,n)},this),z(this._chartsViews,function(t){t.__alive=!1},this),t.eachSeries(function(n,r){var o=this._chartsMap[n.__viewId];o.__alive=!0,o.render(n,t,i,e),o.group.silent=!!n.get("silent"),v(n,o),g(n,o)},this),p(this._zr,t),z(this._chartsViews,function(e){e.__alive||e.remove(t,i)},this)}function p(t,e){var i=t.storage,n=0;i.traverse(function(t){t.isGroup||n++}),n>e.get("hoverLayerThreshold")&&!y.node&&i.traverse(function(t){t.isGroup||(t.useHoverLayer=!0)})}function g(t,e){var i=0;e.group.traverse(function(t){"group"===t.type||t.ignore||i++});var n=+t.get("progressive"),r=i>t.get("progressiveThreshold")&&n&&!y.node;r&&e.group.traverse(function(t){t.isGroup||(t.progressive=r?Math.floor(i++/n):-1,r&&t.stopAnimation(!0))});var o=t.get("blendMode")||null;e.group.traverse(function(t){t.isGroup||t.setStyle("blend",o)})}function v(t,e){var i=t.get("z"),n=t.get("zlevel");e.group.traverse(function(t){"group"!==t.type&&(null!=i&&(t.z=i),null!=n&&(t.zlevel=n))})}function m(t){function e(t,e){for(var i=0;i<t.length;i++){var n=t[i];n[o]=e}}var i=0,n=1,r=2,o="__connectUpdateStatus";C.each(X,function(a,s){t._messageCenter.on(s,function(a){if(tt[t.group]&&t[o]!==i){var s=t.makeActionFromEvent(a),l=[];for(var u in J){var h=J[u];h!==t&&h.group===t.group&&l.push(h)}e(l,i),z(l,function(t){t[o]!==n&&t.dispatchAction(s)}),e(l,r)}})})}
var y=i(12),x=i(121),_=i(87),b=i(23),w=i(122),S=i(11),M=i(15),A=i(57),I=i(27),T=i(3),L=i(76),C=i(1),D=i(18),P=i(20),k=i(44),z=C.each,O=1e3,E=5e3,R=1e3,V=2e3,N=3e3,B=4e3,G=5e3,F="__flag_in_main_process",H="_hasGradientOrPatternBg";r.prototype.on=n("on"),r.prototype.off=n("off"),r.prototype.one=n("one"),C.mixin(r,P);var W=o.prototype;W.getDom=function(){return this._dom},W.getZr=function(){return this._zr},W.setOption=function(t,e,i){if(this[F]=!0,!this._model||e){var n=new w(this._api),r=this._theme,o=this._model=new x(null,null,r,n);o.init(null,null,r,n)}this._model.setOption(t,$),Z.prepareAndUpdate.call(this),this[F]=!1,this._flushPendingActions(),!i&&this._zr.refreshImmediately()},W.setTheme=function(){console.log("ECharts#setTheme() is DEPRECATED in ECharts 3.0")},W.getModel=function(){return this._model},W.getOption=function(){return this._model.getOption()},W.getWidth=function(){return this._zr.getWidth()},W.getHeight=function(){return this._zr.getHeight()},W.getRenderedCanvas=function(t){if(y.canvasSupported){t=t||{},t.pixelRatio=t.pixelRatio||1,t.backgroundColor=t.backgroundColor||this._model.get("backgroundColor");var e=this._zr,i=e.storage.getDisplayList();return C.each(i,function(t){t.stopAnimation(!0)}),e.painter.getRenderedCanvas(t)}},W.getDataURL=function(t){t=t||{};var e=t.excludeComponents,i=this._model,n=[],r=this;z(e,function(t){i.eachComponent({mainType:t},function(t){var e=r._componentsMap[t.__viewId];e.group.ignore||(n.push(e),e.group.ignore=!0)})});var o=this.getRenderedCanvas(t).toDataURL("image/"+(t&&t.type||"png"));return z(n,function(t){t.group.ignore=!1}),o},W.getConnectedDataURL=function(t){if(y.canvasSupported){var e=this.group,i=Math.min,n=Math.max,r=1/0;if(tt[e]){var o=r,a=r,s=-r,l=-r,u=[],h=t&&t.pixelRatio||1;for(var c in J){var d=J[c];if(d.group===e){var f=d.getRenderedCanvas(C.clone(t)),p=d.getDom().getBoundingClientRect();o=i(p.left,o),a=i(p.top,a),s=n(p.right,s),l=n(p.bottom,l),u.push({dom:f,left:p.left,top:p.top})}}o*=h,a*=h,s*=h,l*=h;var g=s-o,v=l-a,m=C.createCanvas();m.width=g,m.height=v;var x=L.init(m);return z(u,function(t){var e=new T.Image({style:{x:t.left*h-o,y:t.top*h-a,image:t.dom}});x.add(e)}),x.refreshImmediately(),m.toDataURL("image/"+(t&&t.type||"png"))}return this.getDataURL(t)}};var Z={update:function(t){var e=this._model,i=this._api,n=this._coordSysMgr,r=this._zr;if(e){e.restoreData(),n.create(this._model,this._api),u.call(this,e,i),h.call(this,e),n.update(e,i),d.call(this,e,t),f.call(this,e,t);var o=e.get("backgroundColor")||"transparent",a=r.painter;if(a.isSingleCanvas&&a.isSingleCanvas())r.configLayer(0,{clearColor:o});else{if(!y.canvasSupported){var s=D.parse(o);o=D.stringify(s,"rgb"),0===s[3]&&(o="transparent")}o.colorStops||o.image?(r.configLayer(0,{clearColor:o}),this[H]=!0,this._dom.style.background="transparent"):(this[H]&&r.configLayer(0,{clearColor:null}),this[H]=!1,this._dom.style.background=o)}}},updateView:function(t){var e=this._model;e&&(e.eachSeries(function(t){t.getData().clearAllVisual()}),d.call(this,e,t),s.call(this,"updateView",e,t))},updateVisual:function(t){var e=this._model;e&&(e.eachSeries(function(t){t.getData().clearAllVisual()}),d.call(this,e,t),s.call(this,"updateVisual",e,t))},updateLayout:function(t){var e=this._model;e&&(c.call(this,e,t),s.call(this,"updateLayout",e,t))},highlight:function(t){a.call(this,"highlight",t)},downplay:function(t){a.call(this,"downplay",t)},prepareAndUpdate:function(t){var e=this._model;l.call(this,"component",e),l.call(this,"chart",e),Z.update.call(this,t)}};W.resize=function(){this[F]=!0,this._zr.resize();var t=this._model&&this._model.resetOption("media");Z[t?"prepareAndUpdate":"update"].call(this),this._loadingFX&&this._loadingFX.resize(),this[F]=!1,this._flushPendingActions()};var q=i(120);W.showLoading=function(t,e){C.isObject(t)&&(e=t,t="default"),this.hideLoading();var i=q(this._api,e),n=this._zr;this._loadingFX=i,n.add(i)},W.hideLoading=function(){this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},W.makeActionFromEvent=function(t){var e=C.extend({},t);return e.type=X[t.type],e},W.dispatchAction=function(t,e){var i=U[t.type];if(i){var n=i.actionInfo,r=n.update||"update";if(this[F])return void this._pendingActions.push(t);this[F]=!0;var o=[t],a=!1;t.batch&&(a=!0,o=C.map(t.batch,function(e){return e=C.defaults(C.extend({},e),t),e.batch=null,e}));for(var s,l=[],u="highlight"===t.type||"downplay"===t.type,h=0;h<o.length;h++){var c=o[h];s=i.action(c,this._model),s=s||C.extend({},c),s.type=n.event||s.type,l.push(s),u&&Z[r].call(this,c)}"none"!==r&&!u&&Z[r].call(this,t),s=a?{type:n.event||t.type,batch:l}:l[0],this[F]=!1,!e&&this._messageCenter.trigger(s.type,s),this._flushPendingActions()}},W._flushPendingActions=function(){for(var t=this._pendingActions;t.length;){var e=t.shift();this.dispatchAction(e)}},W.on=n("on"),W.off=n("off"),W.one=n("one");var j=["click","dblclick","mouseover","mouseout","mousedown","mouseup","globalout"];W._initEvents=function(){z(j,function(t){this._zr.on(t,function(e){var i=this.getModel(),n=e.target;if(n&&null!=n.dataIndex){var r=n.dataModel||i.getSeriesByIndex(n.seriesIndex),o=r&&r.getDataParams(n.dataIndex,n.dataType)||{};o.event=e,o.type=t,this.trigger(t,o)}else n&&n.eventData&&this.trigger(t,n.eventData)},this)},this),z(X,function(t,e){this._messageCenter.on(e,function(t){this.trigger(e,t)},this)},this)},W.isDisposed=function(){return this._disposed},W.clear=function(){this.setOption({},!0)},W.dispose=function(){if(!this._disposed){this._disposed=!0;var t=this._api,e=this._model;z(this._componentsViews,function(i){i.dispose(e,t)}),z(this._chartsViews,function(i){i.dispose(e,t)}),this._zr.dispose(),delete J[this.id]}},C.mixin(o,P);var U=[],X={},Y=[],$=[],Q=[],K={},J={},tt={},et=new Date-0,it=new Date-0,nt="_echarts_instance_",rt={version:"3.2.2",dependencies:{zrender:"3.1.2"}};rt.init=function(t,e,i){var n=new o(t,e,i);return n.id="ec_"+et++,J[n.id]=n,t.setAttribute&&t.setAttribute(nt,n.id),m(n),n},rt.connect=function(t){if(C.isArray(t)){var e=t;t=null,C.each(e,function(e){null!=e.group&&(t=e.group)}),t=t||"g_"+it++,C.each(e,function(e){e.group=t})}return tt[t]=!0,t},rt.disConnect=function(t){tt[t]=!1},rt.dispose=function(t){C.isDom(t)?t=rt.getInstanceByDom(t):"string"==typeof t&&(t=J[t]),t instanceof o&&!t.isDisposed()&&t.dispose()},rt.getInstanceByDom=function(t){var e=t.getAttribute(nt);return J[e]},rt.getInstanceById=function(t){return J[t]},rt.registerTheme=function(t,e){K[t]=e},rt.registerPreprocessor=function(t){$.push(t)},rt.registerProcessor=function(t,e){"function"==typeof t&&(e=t,t=O),Y.push({prio:t,func:e})},rt.registerAction=function(t,e,i){"function"==typeof e&&(i=e,e="");var n=C.isObject(t)?t.type:[t,t={event:e}][0];t.event=(t.event||n).toLowerCase(),e=t.event,U[n]||(U[n]={action:i,actionInfo:t}),X[e]=n},rt.registerCoordinateSystem=function(t,e){b.register(t,e)},rt.registerLayout=function(t,e){"function"==typeof t&&(e=t,t=R),Q.push({prio:t,func:e,isLayout:!0})},rt.registerVisual=function(t,e){"function"==typeof t&&(e=t,t=N),Q.push({prio:t,func:e})};var ot=S.parseClassType;rt.extendComponentModel=function(t,e){var i=S;if(e){var n=ot(e);i=S.getClass(n.main,n.sub,!0)}return i.extend(t)},rt.extendComponentView=function(t,e){var i=A;if(e){var n=ot(e);i=A.getClass(n.main,n.sub,!0)}return i.extend(t)},rt.extendSeriesModel=function(t,e){var i=M;if(e){e="series."+e.replace("series.","");var n=ot(e);i=M.getClass(n.main,n.sub,!0)}return i.extend(t)},rt.extendChartView=function(t,e){var i=I;if(e){e.replace("series.","");var n=ot(e);i=I.getClass(n.main,!0)}return I.extend(t)},rt.setCanvasCreator=function(t){C.createCanvas=t},rt.registerVisual(V,i(135)),rt.registerPreprocessor(i(129)),rt.registerAction({type:"highlight",event:"highlight",update:"highlight"},C.noop),rt.registerAction({type:"downplay",event:"downplay",update:"downplay"},C.noop),rt.List=i(14),rt.Model=i(8),rt.graphic=i(3),rt.number=i(4),rt.format=i(9),rt.matrix=i(19),rt.vector=i(5),rt.color=i(18),rt.util={},z(["map","each","filter","indexOf","inherits","reduce","filter","bind","curry","isArray","isString","isObject","isFunction","extend","defaults"],function(t){rt.util[t]=C[t]}),rt.PRIORITY={PROCESSOR:{FILTER:O,STATISTIC:E},VISUAL:{LAYOUT:R,GLOBAL:V,CHART:N,COMPONENT:B,BRUSH:G}},t.exports=rt},function(t,e,i){"use strict";function n(t){return null!=t&&"none"!=t}function r(t){return"string"==typeof t?_.lift(t,-.1):t}function o(t){if(t.__hoverStlDirty){var e=t.style.stroke,i=t.style.fill,o=t.__hoverStl;o.fill=o.fill||(n(i)?r(i):null),o.stroke=o.stroke||(n(e)?r(e):null);var a={};for(var s in o)o.hasOwnProperty(s)&&(a[s]=t.style[s]);t.__normalStl=a,t.__hoverStlDirty=!1}}function a(t){t.__isHover||(o(t),t.useHoverLayer?t.__zr&&t.__zr.addHover(t,t.__hoverStl):(t.setStyle(t.__hoverStl),t.z2+=1),t.__isHover=!0)}function s(t){if(t.__isHover){var e=t.__normalStl;t.useHoverLayer?t.__zr&&t.__zr.removeHover(t):(e&&t.setStyle(e),t.z2-=1),t.__isHover=!1}}function l(t){"group"===t.type?t.traverse(function(t){"group"!==t.type&&a(t)}):a(t)}function u(t){"group"===t.type?t.traverse(function(t){"group"!==t.type&&s(t)}):s(t)}function h(t,e){t.__hoverStl=t.hoverStyle||e||{},t.__hoverStlDirty=!0,t.__isHover&&o(t)}function c(){!this.__isEmphasis&&l(this)}function d(){!this.__isEmphasis&&u(this)}function f(){this.__isEmphasis=!0,l(this)}function p(){this.__isEmphasis=!1,u(this)}function g(t,e,i,n,r,o){"function"==typeof r&&(o=r,r=null);var a=n&&(n.ifEnableAnimation?n.ifEnableAnimation():n.getShallow("animation"));if(a){var s=t?"Update":"",l=n&&n.getShallow("animationDuration"+s),u=n&&n.getShallow("animationEasing"+s),h=n&&n.getShallow("animationDelay"+s);"function"==typeof h&&(h=h(r)),l>0?e.animateTo(i,l,h||0,u,o):(e.attr(i),o&&o())}else e.attr(i),o&&o()}var v=i(1),m=i(165),y=Math.round,x=i(6),_=i(18),b=i(19),w=i(5),S=(i(29),{});S.Group=i(34),S.Image=i(48),S.Text=i(74),S.Circle=i(156),S.Sector=i(162),S.Ring=i(161),S.Polygon=i(158),S.Polyline=i(159),S.Rect=i(160),S.Line=i(157),S.BezierCurve=i(155),S.Arc=i(154),S.CompoundPath=i(149),S.LinearGradient=i(85),S.RadialGradient=i(150),S.BoundingRect=i(7),S.extendShape=function(t){return x.extend(t)},S.extendPath=function(t,e){return m.extendFromString(t,e)},S.makePath=function(t,e,i,n){var r=m.createFromString(t,e),o=r.getBoundingRect();if(i){var a=o.width/o.height;if("center"===n){var s,l=i.height*a;l<=i.width?s=i.height:(l=i.width,s=l/a);var u=i.x+i.width/2,h=i.y+i.height/2;i.x=u-l/2,i.y=h-s/2,i.width=l,i.height=s}this.resizePath(r,i)}return r},S.mergePath=m.mergePath,S.resizePath=function(t,e){if(t.applyTransform){var i=t.getBoundingRect(),n=i.calculateTransform(e);t.applyTransform(n)}},S.subPixelOptimizeLine=function(t){var e=S.subPixelOptimize,i=t.shape,n=t.style.lineWidth;return y(2*i.x1)===y(2*i.x2)&&(i.x1=i.x2=e(i.x1,n,!0)),y(2*i.y1)===y(2*i.y2)&&(i.y1=i.y2=e(i.y1,n,!0)),t},S.subPixelOptimizeRect=function(t){var e=S.subPixelOptimize,i=t.shape,n=t.style.lineWidth,r=i.x,o=i.y,a=i.width,s=i.height;return i.x=e(i.x,n,!0),i.y=e(i.y,n,!0),i.width=Math.max(e(r+a,n,!1)-i.x,0===a?0:1),i.height=Math.max(e(o+s,n,!1)-i.y,0===s?0:1),t},S.subPixelOptimize=function(t,e,i){var n=y(2*t);return(n+y(e))%2===0?n/2:(n+(i?1:-1))/2},S.setHoverStyle=function(t,e){"group"===t.type?t.traverse(function(t){"group"!==t.type&&h(t,e)}):h(t,e),t.on("mouseover",c).on("mouseout",d),t.on("emphasis",f).on("normal",p)},S.setText=function(t,e,i){var n=e.getShallow("position")||"inside",r=n.indexOf("inside")>=0?"white":i,o=e.getModel("textStyle");v.extend(t,{textDistance:e.getShallow("distance")||5,textFont:o.getFont(),textPosition:n,textFill:o.getTextColor()||r})},S.updateProps=function(t,e,i,n,r){g(!0,t,e,i,n,r)},S.initProps=function(t,e,i,n,r){g(!1,t,e,i,n,r)},S.getTransform=function(t,e){for(var i=b.identity([]);t&&t!==e;)b.mul(i,t.getLocalTransform(),i),t=t.parent;return i},S.applyTransform=function(t,e,i){return i&&(e=b.invert([],e)),w.applyTransform([],t,e)},S.transformDirection=function(t,e,i){var n=0===e[4]||0===e[5]||0===e[0]?1:Math.abs(2*e[4]/e[0]),r=0===e[4]||0===e[5]||0===e[2]?1:Math.abs(2*e[4]/e[2]),o=["left"===t?-n:"right"===t?n:0,"top"===t?-r:"bottom"===t?r:0];return o=S.applyTransform(o,e,i),Math.abs(o[0])>Math.abs(o[1])?o[0]>0?"right":"left":o[1]>0?"bottom":"top"},S.groupTransition=function(t,e,i,n){function r(t){var e={};return t.traverse(function(t){!t.isGroup&&t.anid&&(e[t.anid]=t)}),e}function o(t){var e={position:w.clone(t.position),rotation:t.rotation};return t.shape&&(e.shape=v.extend({},t.shape)),e}if(t&&e){var a=r(t);e.traverse(function(t){if(!t.isGroup&&t.anid){var e=a[t.anid];if(e){var n=o(t);t.attr(o(e)),S.updateProps(t,n,i,t.dataIndex)}}})}},t.exports=S},function(t,e){function i(t){return t.replace(/^\s+/,"").replace(/\s+$/,"")}var n={},r=1e-4;n.linearMap=function(t,e,i,n){var r=e[1]-e[0],o=i[1]-i[0];if(0===r)return 0===o?i[0]:(i[0]+i[1])/2;if(n)if(r>0){if(t<=e[0])return i[0];if(t>=e[1])return i[1]}else{if(t>=e[0])return i[0];if(t<=e[1])return i[1]}else{if(t===e[0])return i[0];if(t===e[1])return i[1]}return(t-e[0])/r*o+i[0]},n.parsePercent=function(t,e){switch(t){case"center":case"middle":t="50%";break;case"left":case"top":t="0%";break;case"right":case"bottom":t="100%"}return"string"==typeof t?i(t).match(/%$/)?parseFloat(t)/100*e:parseFloat(t):null==t?NaN:+t},n.round=function(t){return+(+t).toFixed(10)},n.asc=function(t){return t.sort(function(t,e){return t-e}),t},n.getPrecision=function(t){if(t=+t,isNaN(t))return 0;for(var e=1,i=0;Math.round(t*e)/e!==t;)e*=10,i++;return i},n.getPixelPrecision=function(t,e){var i=Math.log,n=Math.LN10,r=Math.floor(i(t[1]-t[0])/n),o=Math.round(i(Math.abs(e[1]-e[0]))/n);return Math.max(-r+o,0)},n.MAX_SAFE_INTEGER=9007199254740991,n.remRadian=function(t){var e=2*Math.PI;return(t%e+e)%e},n.isRadianAroundZero=function(t){return t>-r&&r>t},n.parseDate=function(t){return t instanceof Date?t:new Date("string"==typeof t?new Date(t.replace(/-/g,"/"))-new Date("1970/01/01"):Math.round(t))},n.quantity=function(t){return Math.pow(10,Math.floor(Math.log(t)/Math.LN10))},n.nice=function(t,e){var i,r=n.quantity(t),o=t/r;return i=e?1.5>o?1:2.5>o?2:4>o?3:7>o?5:10:1>o?1:2>o?2:3>o?3:5>o?5:10,i*r},t.exports=n},function(t,e){var i="undefined"==typeof Float32Array?Array:Float32Array,n={create:function(t,e){var n=new i(2);return null==t&&(t=0),null==e&&(e=0),n[0]=t,n[1]=e,n},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t},clone:function(t){var e=new i(2);return e[0]=t[0],e[1]=t[1],e},set:function(t,e,i){return t[0]=e,t[1]=i,t},add:function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t},scaleAndAdd:function(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t},sub:function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t},len:function(t){return Math.sqrt(this.lenSquare(t))},lenSquare:function(t){return t[0]*t[0]+t[1]*t[1]},mul:function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t},div:function(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]},scale:function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t},normalize:function(t,e){var i=n.len(e);return 0===i?(t[0]=0,t[1]=0):(t[0]=e[0]/i,t[1]=e[1]/i),t},distance:function(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))},distanceSquare:function(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])},negate:function(t,e){return t[0]=-e[0],t[1]=-e[1],t},lerp:function(t,e,i,n){return t[0]=e[0]+n*(i[0]-e[0]),t[1]=e[1]+n*(i[1]-e[1]),t},applyTransform:function(t,e,i){var n=e[0],r=e[1];return t[0]=i[0]*n+i[2]*r+i[4],t[1]=i[1]*n+i[3]*r+i[5],t},min:function(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t},max:function(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t}};n.length=n.len,n.lengthSquare=n.lenSquare,n.dist=n.distance,n.distSquare=n.distanceSquare,t.exports=n},function(t,e,i){function n(t){r.call(this,t),this.path=new a}var r=i(37),o=i(1),a=i(28),s=i(145),l=i(63),u=l.prototype.getCanvasPattern,h=Math.abs;n.prototype={constructor:n,type:"path",__dirtyPath:!0,strokeContainThreshold:5,brush:function(t,e){var i=this.style,n=this.path,r=i.hasStroke(),o=i.hasFill(),a=i.fill,s=i.stroke,l=o&&!!a.colorStops,h=r&&!!s.colorStops,c=o&&!!a.image,d=r&&!!s.image;if(i.bind(t,this,e),this.setTransform(t),this.__dirty){var f=this.getBoundingRect();l&&(this._fillGradient=i.getGradient(t,a,f)),h&&(this._strokeGradient=i.getGradient(t,s,f))}l?t.fillStyle=this._fillGradient:c&&(t.fillStyle=u.call(a,t)),h?t.strokeStyle=this._strokeGradient:d&&(t.strokeStyle=u.call(s,t));var p=i.lineDash,g=i.lineDashOffset,v=!!t.setLineDash,m=this.getGlobalScale();n.setScale(m[0],m[1]),this.__dirtyPath||p&&!v&&r?(n=this.path.beginPath(t),p&&!v&&(n.setLineDash(p),n.setLineDashOffset(g)),this.buildPath(n,this.shape,!1),this.__dirtyPath=!1):(t.beginPath(),this.path.rebuildPath(t)),o&&n.fill(t),p&&v&&(t.setLineDash(p),t.lineDashOffset=g),r&&n.stroke(t),p&&v&&t.setLineDash([]),this.restoreTransform(t),(i.text||0===i.text)&&this.drawRectText(t,this.getBoundingRect())},buildPath:function(t,e,i){},getBoundingRect:function(){var t=this._rect,e=this.style,i=!t;if(i){var n=this.path;this.__dirtyPath&&(n.beginPath(),this.buildPath(n,this.shape,!1)),t=n.getBoundingRect()}if(this._rect=t,e.hasStroke()){var r=this._rectWithStroke||(this._rectWithStroke=t.clone());if(this.__dirty||i){r.copy(t);var o=e.lineWidth,a=e.strokeNoScale?this.getLineScale():1;e.hasFill()||(o=Math.max(o,this.strokeContainThreshold||4)),a>1e-10&&(r.width+=o/a,r.height+=o/a,r.x-=o/a/2,r.y-=o/a/2)}return r}return t},contain:function(t,e){var i=this.transformCoordToLocal(t,e),n=this.getBoundingRect(),r=this.style;if(t=i[0],e=i[1],n.contain(t,e)){var o=this.path.data;if(r.hasStroke()){var a=r.lineWidth,l=r.strokeNoScale?this.getLineScale():1;if(l>1e-10&&(r.hasFill()||(a=Math.max(a,this.strokeContainThreshold)),s.containStroke(o,a/l,t,e)))return!0}if(r.hasFill())return s.contain(o,t,e)}return!1},dirty:function(t){null==t&&(t=!0),t&&(this.__dirtyPath=t,this._rect=null),this.__dirty=!0,this.__zr&&this.__zr.refresh(),this.__clipTarget&&this.__clipTarget.dirty()},animateShape:function(t){return this.animate("shape",t)},attrKV:function(t,e){"shape"===t?(this.setShape(e),this.__dirtyPath=!0,this._rect=null):r.prototype.attrKV.call(this,t,e)},setShape:function(t,e){var i=this.shape;if(i){if(o.isObject(t))for(var n in t)i[n]=t[n];else i[t]=e;this.dirty(!0)}return this},getLineScale:function(){var t=this.transform;return t&&h(t[0]-1)>1e-10&&h(t[3]-1)>1e-10?Math.sqrt(h(t[0]*t[3]-t[2]*t[1])):1}},n.extend=function(t){var e=function(e){n.call(this,e),t.style&&this.style.extendFrom(t.style,!1);var i=t.shape;if(i){this.shape=this.shape||{};var r=this.shape;for(var o in i)!r.hasOwnProperty(o)&&i.hasOwnProperty(o)&&(r[o]=i[o])}t.init&&t.init.call(this,e)};o.inherits(e,n);for(var i in t)"style"!==i&&"shape"!==i&&(e.prototype[i]=t[i]);return e},o.inherits(n,r),t.exports=n},function(t,e,i){"use strict";function n(t,e,i,n){this.x=t,this.y=e,this.width=i,this.height=n}var r=i(5),o=i(19),a=r.applyTransform,s=Math.min,l=Math.abs,u=Math.max;n.prototype={constructor:n,union:function(t){var e=s(t.x,this.x),i=s(t.y,this.y);this.width=u(t.x+t.width,this.x+this.width)-e,this.height=u(t.y+t.height,this.y+this.height)-i,this.x=e,this.y=i},applyTransform:function(){var t=[],e=[];return function(i){i&&(t[0]=this.x,t[1]=this.y,e[0]=this.x+this.width,e[1]=this.y+this.height,a(t,t,i),a(e,e,i),this.x=s(t[0],e[0]),this.y=s(t[1],e[1]),this.width=l(e[0]-t[0]),this.height=l(e[1]-t[1]))}}(),calculateTransform:function(t){var e=this,i=t.width/e.width,n=t.height/e.height,r=o.create();return o.translate(r,r,[-e.x,-e.y]),o.scale(r,r,[i,n]),o.translate(r,r,[t.x,t.y]),r},intersect:function(t){var e=this,i=e.x,n=e.x+e.width,r=e.y,o=e.y+e.height,a=t.x,s=t.x+t.width,l=t.y,u=t.y+t.height;return!(a>n||i>s||l>o||r>u)},contain:function(t,e){var i=this;return t>=i.x&&t<=i.x+i.width&&e>=i.y&&e<=i.y+i.height},clone:function(){return new n(this.x,this.y,this.width,this.height)},copy:function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height}},t.exports=n},function(t,e,i){function n(t,e,i){this.parentModel=e,this.ecModel=i,this.option=t}var r=i(1),o=i(21);n.prototype={constructor:n,init:null,mergeOption:function(t){r.merge(this.option,t,!0)},get:function(t,e){if(!t)return this.option;"string"==typeof t&&(t=t.split("."));for(var i=this.option,n=this.parentModel,r=0;r<t.length&&(!t[r]||(i=i&&"object"==typeof i?i[t[r]]:null,null!=i));r++);return null==i&&n&&!e&&(i=n.get(t)),i},getShallow:function(t,e){var i=this.option,n=i&&i[t],r=this.parentModel;return null==n&&r&&!e&&(n=r.getShallow(t)),n},getModel:function(t,e){var i=this.get(t,!0),r=this.parentModel,o=new n(i,e||r&&r.getModel(t),this.ecModel);return o},isEmpty:function(){return null==this.option},restoreData:function(){},clone:function(){var t=this.constructor;return new t(r.clone(this.option))},setReadOnly:function(t){o.setReadOnly(this,t)}},o.enableClassExtend(n);var a=r.mixin;a(n,i(127)),a(n,i(124)),a(n,i(128)),a(n,i(126)),t.exports=n},function(t,e,i){function n(t){return isNaN(t)?"-":(t=(t+"").split("."),t[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(t.length>1?"."+t[1]:""))}function r(t){return t.toLowerCase().replace(/-(.)/g,function(t,e){return e.toUpperCase()})}function o(t){var e=t.length;return"number"==typeof t?[t,t,t,t]:2===e?[t[0],t[1],t[0],t[1]]:3===e?[t[0],t[1],t[2],t[1]]:t}function a(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function s(t,e){return"{"+t+(null==e?"":e)+"}"}function l(t,e){c.isArray(e)||(e=[e]);var i=e.length;if(!i)return"";for(var n=e[0].$vars||[],r=0;r<n.length;r++){var o=p[r];t=t.replace(s(o),s(o,0))}for(var a=0;i>a;a++)for(var l=0;l<n.length;l++)t=t.replace(s(p[l],a),e[a][n[l]]);return t}function u(t,e){"week"!==t&&"month"!==t&&"quarter"!==t&&"half-year"!==t&&"year"!==t||(t="MM-dd\nyyyy");var i=d.parseDate(e),n=i.getFullYear(),r=i.getMonth()+1,o=i.getDate(),a=i.getHours(),s=i.getMinutes(),l=i.getSeconds();return t=t.replace("MM",h(r)).toLowerCase().replace("yyyy",n).replace("yy",n%100).replace("dd",h(o)).replace("d",o).replace("hh",h(a)).replace("h",a).replace("mm",h(s)).replace("m",s).replace("ss",h(l)).replace("s",l)}function h(t){return 10>t?"0"+t:t}var c=i(1),d=i(4),f=i(16),p=["a","b","c","d","e","f","g"];t.exports={normalizeCssArray:o,addCommas:n,toCamelCase:r,encodeHTML:a,formatTpl:l,formatTime:u,truncateText:f.truncateText}},function(t,e,i){var n=i(9),r=i(4),o=i(8),a=i(1),s=["x","y","z","radius","angle"],l={};l.createNameEach=function(t,e){t=t.slice();var i=a.map(t,l.capitalFirst);e=(e||[]).slice();var n=a.map(e,l.capitalFirst);return function(r,o){a.each(t,function(t,a){for(var s={name:t,capital:i[a]},l=0;l<e.length;l++)s[e[l]]=t+n[l];r.call(o,s)})}},l.capitalFirst=function(t){return t?t.charAt(0).toUpperCase()+t.substr(1):t},l.eachAxisDim=l.createNameEach(s,["axisIndex","axis","index"]),l.normalizeToArray=function(t){return t instanceof Array?t:null==t?[]:[t]},l.createLinkedNodesFinder=function(t,e,i){function n(t,e){return a.indexOf(e.nodes,t)>=0}function r(t,n){var r=!1;return e(function(e){a.each(i(t,e)||[],function(t){n.records[e.name][t]&&(r=!0)})}),r}function o(t,n){n.nodes.push(t),e(function(e){a.each(i(t,e)||[],function(t){n.records[e.name][t]=!0})})}return function(i){function a(t){!n(t,s)&&r(t,s)&&(o(t,s),l=!0)}var s={nodes:[],records:{}};if(e(function(t){s.records[t.name]={}}),!i)return s;o(i,s);var l;do l=!1,t(a);while(l);return s}},l.defaultEmphasis=function(t,e){if(t){var i=t.emphasis=t.emphasis||{},n=t.normal=t.normal||{};a.each(e,function(t){var e=a.retrieve(i[t],n[t]);null!=e&&(i[t]=e)})}},l.LABEL_OPTIONS=["position","show","textStyle","distance","formatter"],l.getDataItemValue=function(t){return t&&(null==t.value?t:t.value)},l.isDataItemOption=function(t){return a.isObject(t)&&!(t instanceof Array)},l.converDataValue=function(t,e){var i=e&&e.type;return"ordinal"===i?t:("time"!==i||isFinite(t)||null==t||"-"===t||(t=+r.parseDate(t)),null==t||""===t?NaN:+t)},l.createDataFormatModel=function(t,e){var i=new o;return a.mixin(i,l.dataFormatMixin),i.seriesIndex=e.seriesIndex,i.name=e.name||"",i.mainType=e.mainType,i.subType=e.subType,i.getData=function(){return t},i},l.dataFormatMixin={getDataParams:function(t,e){var i=this.getData(e),n=this.seriesIndex,r=this.name,o=this.getRawValue(t,e),a=i.getRawIndex(t),s=i.getName(t,!0),l=i.getRawDataItem(t);return{componentType:this.mainType,componentSubType:this.subType,seriesType:"series"===this.mainType?this.subType:null,seriesIndex:n,seriesName:r,name:s,dataIndex:a,data:l,dataType:e,value:o,color:i.getItemVisual(t,"color"),$vars:["seriesName","name","value"]}},getFormattedLabel:function(t,e,i,r){e=e||"normal";var o=this.getData(i),a=o.getItemModel(t),s=this.getDataParams(t,i);null!=r&&s.value instanceof Array&&(s.value=s.value[r]);var l=a.get(["label",e,"formatter"]);return"function"==typeof l?(s.status=e,l(s)):"string"==typeof l?n.formatTpl(l,s):void 0},getRawValue:function(t,e){var i=this.getData(e),n=i.getRawDataItem(t);return null!=n?!a.isObject(n)||n instanceof Array?n:n.value:void 0},formatTooltip:a.noop},l.mappingToExists=function(t,e){e=(e||[]).slice();var i=a.map(t||[],function(t,e){return{exist:t}});return a.each(e,function(t,n){if(a.isObject(t))for(var r=0;r<i.length;r++){var o=i[r].exist;if(!i[r].option&&(null!=t.id&&o.id===t.id+""||null!=t.name&&!l.isIdInner(t)&&!l.isIdInner(o)&&o.name===t.name+"")){i[r].option=t,e[n]=null;break}}}),a.each(e,function(t,e){if(a.isObject(t)){for(var n=0;n<i.length;n++){var r=i[n].exist;if(!i[n].option&&!l.isIdInner(r)&&null==t.id){i[n].option=t;break}}n>=i.length&&i.push({option:t})}}),i},l.isIdInner=function(t){return a.isObject(t)&&t.id&&0===(t.id+"").indexOf("\x00_ec_\x00")},l.compressBatches=function(t,e){function i(t,e,i){for(var n=0,r=t.length;r>n;n++)for(var o=t[n].seriesId,a=l.normalizeToArray(t[n].dataIndex),s=i&&i[o],u=0,h=a.length;h>u;u++){var c=a[u];s&&s[c]?s[c]=null:(e[o]||(e[o]={}))[c]=1}}function n(t,e){var i=[];for(var r in t)if(t.hasOwnProperty(r)&&null!=t[r])if(e)i.push(+r);else{var o=n(t[r],!0);o.length&&i.push({seriesId:r,dataIndex:o})}return i}var r={},o={};return i(t||[],r),i(e||[],o,r),[n(r),n(o)]},t.exports=l},function(t,e,i){function n(t){var e=[];return o.each(h.getClassesByMainType(t),function(t){a.apply(e,t.prototype.dependencies||[])}),o.map(e,function(t){return l.parseClassType(t).main})}var r=i(8),o=i(1),a=Array.prototype.push,s=i(43),l=i(21),u=i(13),h=r.extend({type:"component",id:"",name:"",mainType:"",subType:"",componentIndex:0,defaultOption:null,ecModel:null,dependentModels:[],uid:null,layoutMode:null,$constructor:function(t,e,i,n){r.call(this,t,e,i,n),o.extend(this,n),this.uid=s.getUID("componentModel")},init:function(t,e,i,n){this.mergeDefaultAndTheme(t,i)},mergeDefaultAndTheme:function(t,e){var i=this.layoutMode,n=i?u.getLayoutParams(t):{},r=e.getTheme();o.merge(t,r.get(this.mainType)),o.merge(t,this.getDefaultOption()),i&&u.mergeLayoutParam(t,n,i)},mergeOption:function(t){o.merge(this.option,t,!0);var e=this.layoutMode;e&&u.mergeLayoutParam(this.option,t,e)},optionUpdated:function(t,e){},getDefaultOption:function(){if(!this.hasOwnProperty("__defaultOption")){for(var t=[],e=this.constructor;e;){var i=e.prototype.defaultOption;i&&t.push(i),e=e.superClass}for(var n={},r=t.length-1;r>=0;r--)n=o.merge(n,t[r],!0);this.__defaultOption=n}return this.__defaultOption}});l.enableClassManagement(h,{registerWhenExtend:!0}),s.enableSubTypeDefaulter(h),s.enableTopologicalTravel(h,n),o.mixin(h,i(125)),t.exports=h},function(t,e){function i(t){var e={},i={},n=t.match(/Firefox\/([\d.]+)/),r=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/.+?rv:(([\d.]+))/),o=t.match(/Edge\/([\d.]+)/);return n&&(i.firefox=!0,i.version=n[1]),r&&(i.ie=!0,i.version=r[1]),r&&(i.ie=!0,i.version=r[1]),o&&(i.edge=!0,i.version=o[1]),{browser:i,os:e,node:!1,canvasSupported:!!document.createElement("canvas").getContext,touchEventsSupported:"ontouchstart"in window&&!i.ie&&!i.edge,pointerEventsSupported:"onpointerdown"in window&&(i.edge||i.ie&&i.version>=10)}}var n={};n="undefined"==typeof navigator?{browser:{},os:{},node:!0,canvasSupported:!0}:i(navigator.userAgent),t.exports=n},function(t,e,i){"use strict";function n(t,e,i,n,r){var o=0,a=0;null==n&&(n=1/0),null==r&&(r=1/0);var s=0;e.eachChild(function(l,u){var h,c,d=l.position,f=l.getBoundingRect(),p=e.childAt(u+1),g=p&&p.getBoundingRect();if("horizontal"===t){var v=f.width+(g?-g.x+f.x:0);h=o+v,h>n||l.newline?(o=0,h=v,a+=s+i,s=f.height):s=Math.max(s,f.height)}else{var m=f.height+(g?-g.y+f.y:0);c=a+m,c>r||l.newline?(o+=s+i,a=0,c=m,s=f.width):s=Math.max(s,f.width)}l.newline||(d[0]=o,d[1]=a,"horizontal"===t?o=h+i:a=c+i)})}var r=i(1),o=i(7),a=i(4),s=i(9),l=a.parsePercent,u=r.each,h={},c=["left","right","top","bottom","width","height"];h.box=n,h.vbox=r.curry(n,"vertical"),h.hbox=r.curry(n,"horizontal"),h.getAvailableSize=function(t,e,i){var n=e.width,r=e.height,o=l(t.x,n),a=l(t.y,r),u=l(t.x2,n),h=l(t.y2,r);return(isNaN(o)||isNaN(parseFloat(t.x)))&&(o=0),(isNaN(u)||isNaN(parseFloat(t.x2)))&&(u=n),(isNaN(a)||isNaN(parseFloat(t.y)))&&(a=0),(isNaN(h)||isNaN(parseFloat(t.y2)))&&(h=r),i=s.normalizeCssArray(i||0),{width:Math.max(u-o-i[1]-i[3],0),height:Math.max(h-a-i[0]-i[2],0)}},h.getLayoutRect=function(t,e,i){i=s.normalizeCssArray(i||0);var n=e.width,r=e.height,a=l(t.left,n),u=l(t.top,r),h=l(t.right,n),c=l(t.bottom,r),d=l(t.width,n),f=l(t.height,r),p=i[2]+i[0],g=i[1]+i[3],v=t.aspect;switch(isNaN(d)&&(d=n-h-g-a),isNaN(f)&&(f=r-c-p-u),isNaN(d)&&isNaN(f)&&(v>n/r?d=.8*n:f=.8*r),null!=v&&(isNaN(d)&&(d=v*f),isNaN(f)&&(f=d/v)),isNaN(a)&&(a=n-h-d-g),isNaN(u)&&(u=r-c-f-p),t.left||t.right){case"center":a=n/2-d/2-i[3];break;case"right":a=n-d-g}switch(t.top||t.bottom){case"middle":case"center":u=r/2-f/2-i[0];break;case"bottom":u=r-f-p}a=a||0,u=u||0,isNaN(d)&&(d=n-a-(h||0)),isNaN(f)&&(f=r-u-(c||0));var m=new o(a+i[3],u+i[0],d,f);return m.margin=i,m},h.positionGroup=function(t,e,i,n){var o=t.getBoundingRect();e=r.extend(r.clone(e),{width:o.width,height:o.height}),e=h.getLayoutRect(e,i,n),t.attr("position",[e.x-o.x,e.y-o.y])},h.mergeLayoutParam=function(t,e,i){function n(n){var r={},s=0,l={},h=0,c=i.ignoreSize?1:2;if(u(n,function(e){l[e]=t[e]}),u(n,function(t){o(e,t)&&(r[t]=l[t]=e[t]),a(r,t)&&s++,a(l,t)&&h++}),h!==c&&s){if(s>=c)return r;for(var d=0;d<n.length;d++){var f=n[d];if(!o(r,f)&&o(t,f)){r[f]=t[f];break}}return r}return l}function o(t,e){return t.hasOwnProperty(e)}function a(t,e){return null!=t[e]&&"auto"!==t[e]}function s(t,e,i){u(t,function(t){e[t]=i[t]})}!r.isObject(i)&&(i={});var l=["width","left","right"],h=["height","top","bottom"],c=n(l),d=n(h);s(l,t,c),s(h,t,d)},h.getLayoutParams=function(t){return h.copyLayoutParams({},t)},h.copyLayoutParams=function(t,e){return e&&t&&u(c,function(i){e.hasOwnProperty(i)&&(t[i]=e[i])}),t},t.exports=h},function(t,e,i){(function(e){function n(t){return d.isArray(t)||(t=[t]),t}function r(t,e){var i=t.dimensions,n=new m(d.map(i,t.getDimensionInfo,t),t.hostModel);v(n,t);for(var r=n._storage={},o=t._storage,a=0;a<i.length;a++){var s=i[a],l=o[s];d.indexOf(e,s)>=0?r[s]=new l.constructor(o[s].length):r[s]=o[s]}return n}var o="undefined",a="undefined"==typeof window?e:window,s=typeof a.Float64Array===o?Array:a.Float64Array,l=typeof a.Int32Array===o?Array:a.Int32Array,u={"float":s,"int":l,ordinal:Array,number:Array,time:Array},h=i(8),c=i(45),d=i(1),f=i(10),p=d.isObject,g=["stackedOn","hasItemOption","_nameList","_idList","_rawData"],v=function(t,e){d.each(g.concat(e.__wrappedMethods||[]),function(i){e.hasOwnProperty(i)&&(t[i]=e[i])}),t.__wrappedMethods=e.__wrappedMethods},m=function(t,e){t=t||["x","y"];for(var i={},n=[],r=0;r<t.length;r++){var o,a={};"string"==typeof t[r]?(o=t[r],a={name:o,stackable:!1,type:"number"}):(a=t[r],o=a.name,a.type=a.type||"number"),n.push(o),i[o]=a}this.dimensions=n,this._dimensionInfos=i,this.hostModel=e,this.dataType,this.indices=[],this._storage={},this._nameList=[],this._idList=[],this._optionModels=[],this.stackedOn=null,this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._rawData,this._extent},y=m.prototype;y.type="list",y.hasItemOption=!0,y.getDimension=function(t){return isNaN(t)||(t=this.dimensions[t]||t),t},y.getDimensionInfo=function(t){return d.clone(this._dimensionInfos[this.getDimension(t)])},y.initData=function(t,e,i){t=t||[],this._rawData=t;var n=this._storage={},r=this.indices=[],o=this.dimensions,a=t.length,s=this._dimensionInfos,l=[],h={};e=e||[];for(var c=0;c<o.length;c++){var d=s[o[c]],p=u[d.type];n[o[c]]=new p(a)}var g=this;i||(g.hasItemOption=!1),i=i||function(t,e,i,n){var r=f.getDataItemValue(t);return f.isDataItemOption(t)&&(g.hasItemOption=!0),f.converDataValue(r instanceof Array?r[n]:r,s[e])};for(var v=0;v<t.length;v++){for(var m=t[v],y=0;y<o.length;y++){var x=o[y],_=n[x];_[v]=i(m,x,v,y)}r.push(v)}for(var c=0;c<t.length;c++){e[c]||t[c]&&null!=t[c].name&&(e[c]=t[c].name);var b=e[c]||"",w=t[c]&&t[c].id;!w&&b&&(h[b]=h[b]||0,w=b,h[b]>0&&(w+="__ec__"+h[b]),h[b]++),w&&(l[c]=w)}this._nameList=e,this._idList=l},y.count=function(){return this.indices.length},y.get=function(t,e,i){var n=this._storage,r=this.indices[e];if(null==r)return NaN;var o=n[t]&&n[t][r];if(i){var a=this._dimensionInfos[t];if(a&&a.stackable)for(var s=this.stackedOn;s;){var l=s.get(t,e);(o>=0&&l>0||0>=o&&0>l)&&(o+=l),s=s.stackedOn}}return o},y.getValues=function(t,e,i){var n=[];d.isArray(t)||(i=e,e=t,t=this.dimensions);for(var r=0,o=t.length;o>r;r++)n.push(this.get(t[r],e,i));return n},y.hasValue=function(t){for(var e=this.dimensions,i=this._dimensionInfos,n=0,r=e.length;r>n;n++)if("ordinal"!==i[e[n]].type&&isNaN(this.get(e[n],t)))return!1;return!0},y.getDataExtent=function(t,e){t=this.getDimension(t);var i=this._storage[t],n=this.getDimensionInfo(t);e=n&&n.stackable&&e;var r,o=(this._extent||(this._extent={}))[t+!!e];if(o)return o;if(i){for(var a=1/0,s=-(1/0),l=0,u=this.count();u>l;l++)r=this.get(t,l,e),a>r&&(a=r),r>s&&(s=r);return this._extent[t+!!e]=[a,s]}return[1/0,-(1/0)]},y.getSum=function(t,e){var i=this._storage[t],n=0;if(i)for(var r=0,o=this.count();o>r;r++){var a=this.get(t,r,e);isNaN(a)||(n+=a)}return n},y.indexOf=function(t,e){var i=this._storage,n=i[t],r=this.indices;if(n)for(var o=0,a=r.length;a>o;o++){var s=r[o];if(n[s]===e)return o}return-1},y.indexOfName=function(t){for(var e=this.indices,i=this._nameList,n=0,r=e.length;r>n;n++){var o=e[n];if(i[o]===t)return n}return-1},y.indexOfRawIndex=function(t){for(var e=this.indices,i=0,n=e.length-1;n>=i;){var r=(i+n)/2|0;if(e[r]<t)i=r+1;else{if(!(e[r]>t))return r;n=r-1}}return-1},y.indexOfNearest=function(t,e,i,n){var r=this._storage,o=r[t];null==n&&(n=1/0);var a=-1;if(o)for(var s=Number.MAX_VALUE,l=0,u=this.count();u>l;l++){var h=e-this.get(t,l,i),c=Math.abs(h);n>=h&&(s>c||c===s&&h>0)&&(s=c,a=l)}return a},y.getRawIndex=function(t){var e=this.indices[t];return null==e?-1:e},y.getRawDataItem=function(t){return this._rawData[this.getRawIndex(t)]},y.getName=function(t){return this._nameList[this.indices[t]]||""},y.getId=function(t){return this._idList[this.indices[t]]||this.getRawIndex(t)+""},y.each=function(t,e,i,r){"function"==typeof t&&(r=i,i=e,e=t,t=[]),t=d.map(n(t),this.getDimension,this);var o=[],a=t.length,s=this.indices;r=r||this;for(var l=0;l<s.length;l++)switch(a){case 0:e.call(r,l);break;case 1:e.call(r,this.get(t[0],l,i),l);break;case 2:e.call(r,this.get(t[0],l,i),this.get(t[1],l,i),l);break;default:for(var u=0;a>u;u++)o[u]=this.get(t[u],l,i);o[u]=l,e.apply(r,o)}},y.filterSelf=function(t,e,i,r){"function"==typeof t&&(r=i,i=e,e=t,t=[]),t=d.map(n(t),this.getDimension,this);var o=[],a=[],s=t.length,l=this.indices;r=r||this;for(var u=0;u<l.length;u++){var h;if(1===s)h=e.call(r,this.get(t[0],u,i),u);else{for(var c=0;s>c;c++)a[c]=this.get(t[c],u,i);a[c]=u,h=e.apply(r,a)}h&&o.push(l[u])}return this.indices=o,this._extent={},this},y.mapArray=function(t,e,i,n){"function"==typeof t&&(n=i,i=e,e=t,t=[]);var r=[];return this.each(t,function(){r.push(e&&e.apply(this,arguments))},i,n),r},y.map=function(t,e,i,o){t=d.map(n(t),this.getDimension,this);var a=r(this,t),s=a.indices=this.indices,l=a._storage,u=[];return this.each(t,function(){var i=arguments[arguments.length-1],n=e&&e.apply(this,arguments);if(null!=n){"number"==typeof n&&(u[0]=n,n=u);for(var r=0;r<n.length;r++){var o=t[r],a=l[o],h=s[i];a&&(a[h]=n[r])}}},i,o),a},y.downSample=function(t,e,i,n){for(var o=r(this,[t]),a=this._storage,s=o._storage,l=this.indices,u=o.indices=[],h=[],c=[],d=Math.floor(1/e),f=s[t],p=this.count(),g=0;g<a[t].length;g++)s[t][g]=a[t][g];for(var g=0;p>g;g+=d){d>p-g&&(d=p-g,h.length=d);for(var v=0;d>v;v++){var m=l[g+v];h[v]=f[m],c[v]=m}var y=i(h),m=c[n(h,y)||0];f[m]=y,u.push(m)}return o},y.getItemModel=function(t){var e=this.hostModel;return t=this.indices[t],new h(this._rawData[t],e,e&&e.ecModel)},y.diff=function(t){var e=this._idList,i=t&&t._idList;return new c(t?t.indices:[],this.indices,function(t){return i[t]||t+""},function(t){return e[t]||t+""})},y.getVisual=function(t){var e=this._visual;return e&&e[t]},y.setVisual=function(t,e){if(p(t))for(var i in t)t.hasOwnProperty(i)&&this.setVisual(i,t[i]);else this._visual=this._visual||{},this._visual[t]=e},y.setLayout=function(t,e){if(p(t))for(var i in t)t.hasOwnProperty(i)&&this.setLayout(i,t[i]);else this._layout[t]=e},y.getLayout=function(t){return this._layout[t]},y.getItemLayout=function(t){return this._itemLayouts[t]},y.setItemLayout=function(t,e,i){this._itemLayouts[t]=i?d.extend(this._itemLayouts[t]||{},e):e},y.clearItemLayouts=function(){this._itemLayouts.length=0},y.getItemVisual=function(t,e,i){var n=this._itemVisuals[t],r=n&&n[e];return null!=r||i?r:this.getVisual(e)},y.setItemVisual=function(t,e,i){var n=this._itemVisuals[t]||{};if(this._itemVisuals[t]=n,p(e))for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);else n[e]=i},y.clearAllVisual=function(){this._visual={},this._itemVisuals=[]};var x=function(t){t.seriesIndex=this.seriesIndex,t.dataIndex=this.dataIndex,t.dataType=this.dataType};y.setItemGraphicEl=function(t,e){var i=this.hostModel;e&&(e.dataIndex=t,e.dataType=this.dataType,e.seriesIndex=i&&i.seriesIndex,"group"===e.type&&e.traverse(x,e)),this._graphicEls[t]=e},y.getItemGraphicEl=function(t){return this._graphicEls[t]},y.eachItemGraphicEl=function(t,e){d.each(this._graphicEls,function(i,n){i&&t&&t.call(e,i,n)})},y.cloneShallow=function(){var t=d.map(this.dimensions,this.getDimensionInfo,this),e=new m(t,this.hostModel);return e._storage=this._storage,v(e,this),e.indices=this.indices.slice(),this._extent&&(e._extent=d.extend({},this._extent)),e},y.wrapMethod=function(t,e){var i=this[t];"function"==typeof i&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var t=i.apply(this,arguments);return e.apply(this,[t].concat(d.slice(arguments)))})},y.TRANSFERABLE_METHODS=["cloneShallow","downSample","map"],y.CHANGABLE_METHODS=["filterSelf"],t.exports=m}).call(e,function(){return this}())},function(t,e,i){"use strict";var n=i(1),r=i(9),o=i(10),a=i(11),s=i(56),l=i(12),u=r.encodeHTML,h=r.addCommas,c=a.extend({type:"series.__base__",seriesIndex:0,coordinateSystem:null,defaultOption:null,legendDataProvider:null,visualColorAccessPath:"itemStyle.normal.color",init:function(t,e,i,n){this.seriesIndex=this.componentIndex,this.mergeDefaultAndTheme(t,i),this._dataBeforeProcessed=this.getInitialData(t,i),this._data=this._dataBeforeProcessed.cloneShallow()},mergeDefaultAndTheme:function(t,e){n.merge(t,e.getTheme().get(this.subType)),n.merge(t,this.getDefaultOption()),o.defaultEmphasis(t.label,o.LABEL_OPTIONS),this.fillDataTextStyle(t.data)},mergeOption:function(t,e){t=n.merge(this.option,t,!0),this.fillDataTextStyle(t.data);var i=this.getInitialData(t,e);i&&(this._data=i,this._dataBeforeProcessed=i.cloneShallow())},fillDataTextStyle:function(t){if(t)for(var e=0;e<t.length;e++)t[e]&&t[e].label&&o.defaultEmphasis(t[e].label,o.LABEL_OPTIONS)},getInitialData:function(){},getData:function(t){return null==t?this._data:this._data.getLinkedData(t)},setData:function(t){this._data=t},getRawData:function(){return this._dataBeforeProcessed},coordDimToDataDim:function(t){return[t]},dataDimToCoordDim:function(t){return t},getBaseAxis:function(){var t=this.coordinateSystem;return t&&t.getBaseAxis&&t.getBaseAxis()},formatTooltip:function(t,e,i){function o(t){return n.map(t,function(t,i){var n=a.getDimensionInfo(i),o=n&&n.type;return"ordinal"===o?t:"time"===o?e?"":r.formatTime("yyyy/mm/dd hh:mm:ss",t):h(t)}).filter(function(t){return!!t}).join(", ")}var a=this._data,s=this.getRawValue(t),l=n.isArray(s)?o(s):h(s),c=a.getName(t),d=a.getItemVisual(t,"color"),f='<span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:'+d+'"></span>',p=this.name;return"\x00-"===p&&(p=""),e?f+u(this.name)+" : "+l:(p&&u(p)+"<br />")+f+(c?u(c)+" : "+l:l)},ifEnableAnimation:function(){if(l.node)return!1;var t=this.getShallow("animation");return t&&this.getData().count()>this.getShallow("animationThreshold")&&(t=!1),t},restoreData:function(){this._data=this._dataBeforeProcessed.cloneShallow()},getColorFromPalette:function(t,e){var i=this.ecModel,n=s.getColorFromPalette.call(this,t,e);return n||(n=i.getColorFromPalette(t,e)),n},getAxisTooltipDataIndex:null});n.mixin(c,o.dataFormatMixin),n.mixin(c,s),t.exports=c},function(t,e,i){function n(t,e){var i=t+":"+e;if(l[i])return l[i];for(var n=(t+"").split("\n"),r=0,o=0,a=n.length;a>o;o++)r=Math.max(p.measureText(n[o],e).width,r);return u>h&&(u=0,l={}),u++,l[i]=r,r}function r(t,e,i,r){var o=((t||"")+"").split("\n").length,a=n(t,e),s=n("",e),l=o*s,u=new d(0,0,a,l);switch(u.lineHeight=s,r){case"bottom":case"alphabetic":u.y-=s;break;case"middle":u.y-=s/2}switch(i){case"end":case"right":u.x-=u.width;break;case"center":u.x-=u.width/2}return u}function o(t,e,i,n){var r=e.x,o=e.y,a=e.height,s=e.width,l=i.height,u=a/2-l/2,h="left";switch(t){case"left":r-=n,o+=u,h="right";break;case"right":r+=n+s,o+=u,h="left";break;case"top":r+=s/2,o-=n+l,h="center";break;case"bottom":r+=s/2,o+=a+n,h="center";break;case"inside":r+=s/2,o+=u,h="center";break;case"insideLeft":r+=n,o+=u,h="left";break;case"insideRight":r+=s-n,o+=u,h="right";break;case"insideTop":r+=s/2,o+=n,h="center";break;case"insideBottom":r+=s/2,o+=a-l-n,h="center";break;case"insideTopLeft":r+=n,o+=n,h="left";break;case"insideTopRight":r+=s-n,o+=n,h="right";break;case"insideBottomLeft":r+=n,o+=a-l-n;break;case"insideBottomRight":r+=s-n,o+=a-l-n,h="right"}return{x:r,y:o,textAlign:h,textBaseline:"top"}}function a(t,e,i,r,o){if(!e)return"";o=o||{},r=f(r,"...");for(var a=f(o.maxIterations,2),l=f(o.minChar,0),u=n("",i),h=n("a",i),c=f(o.placeholder,""),d=e=Math.max(0,e-1),p=0;l>p&&d>=h;p++)d-=h;var g=n(r);g>d&&(r="",g=0),d=e-g;for(var v=(t+"").split("\n"),p=0,m=v.length;m>p;p++){var y=v[p],x=n(y,i);if(!(e>=x)){for(var _=0;;_++){if(d>=x||_>=a){y+=r;break}var b=0===_?s(y,d,h,u):x>0?Math.floor(y.length*d/x):0;y=y.substr(0,b),x=n(y,i)}""===y&&(y=c),v[p]=y}}return v.join("\n")}function s(t,e,i,n){for(var r=0,o=0,a=t.length;a>o&&e>r;o++){var s=t.charCodeAt(o);r+=s>=0&&127>=s?i:n}return o}var l={},u=0,h=5e3,c=i(1),d=i(7),f=c.retrieve,p={getWidth:n,getBoundingRect:r,adjustTextPositionOnRect:o,truncateText:a,measureText:function(t,e){var i=c.getContext();return i.font=e||"12px sans-serif",i.measureText(t)}};t.exports=p},function(t,e,i){"use strict";function n(t){return t>-w&&w>t}function r(t){return t>w||-w>t}function o(t,e,i,n,r){var o=1-r;return o*o*(o*t+3*r*e)+r*r*(r*n+3*o*i)}function a(t,e,i,n,r){var o=1-r;return 3*(((e-t)*o+2*(i-e)*r)*o+(n-i)*r*r)}function s(t,e,i,r,o,a){var s=r+3*(e-i)-t,l=3*(i-2*e+t),u=3*(e-t),h=t-o,c=l*l-3*s*u,d=l*u-9*s*h,f=u*u-3*l*h,p=0;if(n(c)&&n(d))if(n(l))a[0]=0;else{var g=-u/l;g>=0&&1>=g&&(a[p++]=g)}else{var v=d*d-4*c*f;if(n(v)){var m=d/c,g=-l/s+m,y=-m/2;g>=0&&1>=g&&(a[p++]=g),y>=0&&1>=y&&(a[p++]=y)}else if(v>0){var x=b(v),w=c*l+1.5*s*(-d+x),S=c*l+1.5*s*(-d-x);w=0>w?-_(-w,A):_(w,A),S=0>S?-_(-S,A):_(S,A);var g=(-l-(w+S))/(3*s);g>=0&&1>=g&&(a[p++]=g)}else{var I=(2*c*l-3*s*d)/(2*b(c*c*c)),T=Math.acos(I)/3,L=b(c),C=Math.cos(T),g=(-l-2*L*C)/(3*s),y=(-l+L*(C+M*Math.sin(T)))/(3*s),D=(-l+L*(C-M*Math.sin(T)))/(3*s);g>=0&&1>=g&&(a[p++]=g),y>=0&&1>=y&&(a[p++]=y),D>=0&&1>=D&&(a[p++]=D)}}return p}function l(t,e,i,o,a){var s=6*i-12*e+6*t,l=9*e+3*o-3*t-9*i,u=3*e-3*t,h=0;if(n(l)){if(r(s)){var c=-u/s;c>=0&&1>=c&&(a[h++]=c)}}else{var d=s*s-4*l*u;if(n(d))a[0]=-s/(2*l);else if(d>0){var f=b(d),c=(-s+f)/(2*l),p=(-s-f)/(2*l);c>=0&&1>=c&&(a[h++]=c),p>=0&&1>=p&&(a[h++]=p)}}return h}function u(t,e,i,n,r,o){var a=(e-t)*r+t,s=(i-e)*r+e,l=(n-i)*r+i,u=(s-a)*r+a,h=(l-s)*r+s,c=(h-u)*r+u;o[0]=t,o[1]=a,o[2]=u,o[3]=c,o[4]=c,o[5]=h,o[6]=l,o[7]=n}function h(t,e,i,n,r,a,s,l,u,h,c){var d,f,p,g,v,m=.005,y=1/0;I[0]=u,I[1]=h;for(var _=0;1>_;_+=.05)T[0]=o(t,i,r,s,_),T[1]=o(e,n,a,l,_),g=x(I,T),y>g&&(d=_,y=g);y=1/0;for(var w=0;32>w&&!(S>m);w++)f=d-m,p=d+m,T[0]=o(t,i,r,s,f),T[1]=o(e,n,a,l,f),g=x(T,I),f>=0&&y>g?(d=f,y=g):(L[0]=o(t,i,r,s,p),L[1]=o(e,n,a,l,p),v=x(L,I),1>=p&&y>v?(d=p,y=v):m*=.5);return c&&(c[0]=o(t,i,r,s,d),c[1]=o(e,n,a,l,d)),b(y)}function c(t,e,i,n){var r=1-n;return r*(r*t+2*n*e)+n*n*i}function d(t,e,i,n){return 2*((1-n)*(e-t)+n*(i-e))}function f(t,e,i,o,a){var s=t-2*e+i,l=2*(e-t),u=t-o,h=0;if(n(s)){if(r(l)){var c=-u/l;c>=0&&1>=c&&(a[h++]=c)}}else{var d=l*l-4*s*u;if(n(d)){var c=-l/(2*s);c>=0&&1>=c&&(a[h++]=c)}else if(d>0){var f=b(d),c=(-l+f)/(2*s),p=(-l-f)/(2*s);c>=0&&1>=c&&(a[h++]=c),p>=0&&1>=p&&(a[h++]=p)}}return h}function p(t,e,i){var n=t+i-2*e;return 0===n?.5:(t-e)/n}function g(t,e,i,n,r){var o=(e-t)*n+t,a=(i-e)*n+e,s=(a-o)*n+o;r[0]=t,r[1]=o,r[2]=s,r[3]=s,r[4]=a,r[5]=i}function v(t,e,i,n,r,o,a,s,l){var u,h=.005,d=1/0;I[0]=a,I[1]=s;for(var f=0;1>f;f+=.05){T[0]=c(t,i,r,f),T[1]=c(e,n,o,f);var p=x(I,T);d>p&&(u=f,d=p)}d=1/0;for(var g=0;32>g&&!(S>h);g++){var v=u-h,m=u+h;T[0]=c(t,i,r,v),T[1]=c(e,n,o,v);var p=x(T,I);if(v>=0&&d>p)u=v,d=p;else{L[0]=c(t,i,r,m),L[1]=c(e,n,o,m);var y=x(L,I);1>=m&&d>y?(u=m,d=y):h*=.5}}return l&&(l[0]=c(t,i,r,u),l[1]=c(e,n,o,u)),b(d)}var m=i(5),y=m.create,x=m.distSquare,_=Math.pow,b=Math.sqrt,w=1e-8,S=1e-4,M=b(3),A=1/3,I=y(),T=y(),L=y();t.exports={cubicAt:o,cubicDerivativeAt:a,cubicRootAt:s,cubicExtrema:l,cubicSubdivide:u,cubicProjectPoint:h,quadraticAt:c,quadraticDerivativeAt:d,quadraticRootAt:f,quadraticExtremum:p,quadraticSubdivide:g,quadraticProjectPoint:v}},function(t,e){function i(t){return t=Math.round(t),0>t?0:t>255?255:t}function n(t){return t=Math.round(t),0>t?0:t>360?360:t}function r(t){return 0>t?0:t>1?1:t}function o(t){return i(t.length&&"%"===t.charAt(t.length-1)?parseFloat(t)/100*255:parseInt(t,10))}function a(t){return r(t.length&&"%"===t.charAt(t.length-1)?parseFloat(t)/100:parseFloat(t))}function s(t,e,i){return 0>i?i+=1:i>1&&(i-=1),1>6*i?t+(e-t)*i*6:1>2*i?e:2>3*i?t+(e-t)*(2/3-i)*6:t}function l(t,e,i){return t+(e-t)*i}function u(t){if(t){t+="";var e=t.replace(/ /g,"").toLowerCase();if(e in x)return x[e].slice();if("#"!==e.charAt(0)){var i=e.indexOf("("),n=e.indexOf(")");if(-1!==i&&n+1===e.length){var r=e.substr(0,i),s=e.substr(i+1,n-(i+1)).split(","),l=1;switch(r){case"rgba":if(4!==s.length)return;l=a(s.pop());case"rgb":if(3!==s.length)return;return[o(s[0]),o(s[1]),o(s[2]),l];case"hsla":if(4!==s.length)return;return s[3]=a(s[3]),h(s);case"hsl":if(3!==s.length)return;return h(s);default:return}}}else{if(4===e.length){var u=parseInt(e.substr(1),16);if(!(u>=0&&4095>=u))return;return[(3840&u)>>4|(3840&u)>>8,240&u|(240&u)>>4,15&u|(15&u)<<4,1]}if(7===e.length){var u=parseInt(e.substr(1),16);if(!(u>=0&&16777215>=u))return;return[(16711680&u)>>16,(65280&u)>>8,255&u,1]}}}}function h(t){var e=(parseFloat(t[0])%360+360)%360/360,n=a(t[1]),r=a(t[2]),o=.5>=r?r*(n+1):r+n-r*n,l=2*r-o,u=[i(255*s(l,o,e+1/3)),i(255*s(l,o,e)),i(255*s(l,o,e-1/3))];return 4===t.length&&(u[3]=t[3]),u}function c(t){if(t){var e,i,n=t[0]/255,r=t[1]/255,o=t[2]/255,a=Math.min(n,r,o),s=Math.max(n,r,o),l=s-a,u=(s+a)/2;if(0===l)e=0,i=0;else{i=.5>u?l/(s+a):l/(2-s-a);var h=((s-n)/6+l/2)/l,c=((s-r)/6+l/2)/l,d=((s-o)/6+l/2)/l;n===s?e=d-c:r===s?e=1/3+h-d:o===s&&(e=2/3+c-h),0>e&&(e+=1),e>1&&(e-=1)}var f=[360*e,i,u];return null!=t[3]&&f.push(t[3]),f}}function d(t,e){var i=u(t);if(i){for(var n=0;3>n;n++)0>e?i[n]=i[n]*(1-e)|0:i[n]=(255-i[n])*e+i[n]|0;return y(i,4===i.length?"rgba":"rgb")}}function f(t,e){var i=u(t);return i?((1<<24)+(i[0]<<16)+(i[1]<<8)+ +i[2]).toString(16).slice(1):void 0}function p(t,e,n){if(e&&e.length&&t>=0&&1>=t){n=n||[0,0,0,0];var r=t*(e.length-1),o=Math.floor(r),a=Math.ceil(r),s=e[o],u=e[a],h=r-o;return n[0]=i(l(s[0],u[0],h)),n[1]=i(l(s[1],u[1],h)),n[2]=i(l(s[2],u[2],h)),n[3]=i(l(s[3],u[3],h)),n}}function g(t,e,n){if(e&&e.length&&t>=0&&1>=t){var o=t*(e.length-1),a=Math.floor(o),s=Math.ceil(o),h=u(e[a]),c=u(e[s]),d=o-a,f=y([i(l(h[0],c[0],d)),i(l(h[1],c[1],d)),i(l(h[2],c[2],d)),r(l(h[3],c[3],d))],"rgba");return n?{color:f,leftIndex:a,rightIndex:s,value:o}:f}}function v(t,e,i,r){return t=u(t),t?(t=c(t),null!=e&&(t[0]=n(e)),null!=i&&(t[1]=a(i)),null!=r&&(t[2]=a(r)),y(h(t),"rgba")):void 0}function m(t,e){return t=u(t),t&&null!=e?(t[3]=r(e),y(t,"rgba")):void 0}function y(t,e){var i=t[0]+","+t[1]+","+t[2];return"rgba"!==e&&"hsva"!==e&&"hsla"!==e||(i+=","+t[3]),e+"("+i+")"}var x={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};t.exports={parse:u,lift:d,toHex:f,fastMapToColor:p,mapToColor:g,modifyHSL:v,modifyAlpha:m,stringify:y}},function(t,e){var i="undefined"==typeof Float32Array?Array:Float32Array,n={create:function(){var t=new i(6);return n.identity(t),t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},mul:function(t,e,i){var n=e[0]*i[0]+e[2]*i[1],r=e[1]*i[0]+e[3]*i[1],o=e[0]*i[2]+e[2]*i[3],a=e[1]*i[2]+e[3]*i[3],s=e[0]*i[4]+e[2]*i[5]+e[4],l=e[1]*i[4]+e[3]*i[5]+e[5];return t[0]=n,t[1]=r,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t},translate:function(t,e,i){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+i[0],t[5]=e[5]+i[1],t},rotate:function(t,e,i){var n=e[0],r=e[2],o=e[4],a=e[1],s=e[3],l=e[5],u=Math.sin(i),h=Math.cos(i);return t[0]=n*h+a*u,t[1]=-n*u+a*h,t[2]=r*h+s*u,t[3]=-r*u+h*s,t[4]=h*o+u*l,t[5]=h*l-u*o,t},scale:function(t,e,i){var n=i[0],r=i[1];return t[0]=e[0]*n,t[1]=e[1]*r,t[2]=e[2]*n,t[3]=e[3]*r,t[4]=e[4]*n,t[5]=e[5]*r,t},invert:function(t,e){var i=e[0],n=e[2],r=e[4],o=e[1],a=e[3],s=e[5],l=i*a-o*n;return l?(l=1/l,t[0]=a*l,t[1]=-o*l,t[2]=-n*l,t[3]=i*l,t[4]=(n*s-a*r)*l,t[5]=(o*r-i*s)*l,t):null}};t.exports=n},function(t,e){var i=Array.prototype.slice,n=function(){this._$handlers={}};n.prototype={constructor:n,one:function(t,e,i){var n=this._$handlers;if(!e||!t)return this;n[t]||(n[t]=[]);for(var r=0;r<n[t].length;r++)if(n[t][r].h===e)return this;return n[t].push({h:e,one:!0,ctx:i||this}),this},on:function(t,e,i){var n=this._$handlers;if(!e||!t)return this;n[t]||(n[t]=[]);for(var r=0;r<n[t].length;r++)if(n[t][r].h===e)return this;return n[t].push({h:e,one:!1,ctx:i||this}),this},isSilent:function(t){var e=this._$handlers;return e[t]&&e[t].length},off:function(t,e){var i=this._$handlers;if(!t)return this._$handlers={},this;if(e){if(i[t]){for(var n=[],r=0,o=i[t].length;o>r;r++)i[t][r].h!=e&&n.push(i[t][r]);i[t]=n}i[t]&&0===i[t].length&&delete i[t]}else delete i[t];return this},trigger:function(t){if(this._$handlers[t]){var e=arguments,n=e.length;n>3&&(e=i.call(e,1));for(var r=this._$handlers[t],o=r.length,a=0;o>a;){switch(n){case 1:r[a].h.call(r[a].ctx);break;case 2:r[a].h.call(r[a].ctx,e[1]);break;case 3:r[a].h.call(r[a].ctx,e[1],e[2]);break;default:r[a].h.apply(r[a].ctx,e)}r[a].one?(r.splice(a,1),o--):a++}}return this},triggerWithContext:function(t){if(this._$handlers[t]){var e=arguments,n=e.length;n>4&&(e=i.call(e,1,e.length-1));for(var r=e[e.length-1],o=this._$handlers[t],a=o.length,s=0;a>s;){switch(n){case 1:o[s].h.call(r);break;case 2:o[s].h.call(r,e[1]);break;case 3:o[s].h.call(r,e[1],e[2]);break;default:o[s].h.apply(r,e)}o[s].one?(o.splice(s,1),a--):s++}}return this}},t.exports=n},function(t,e,i){function n(t,e){var i=o.slice(arguments,2);return this.superClass.prototype[e].apply(t,i)}function r(t,e,i){return this.superClass.prototype[e].apply(t,i)}var o=i(1),a={},s=".",l="___EC__COMPONENT__CONTAINER___",u=a.parseClassType=function(t){var e={main:"",sub:""};return t&&(t=t.split(s),e.main=t[0]||"",e.sub=t[1]||""),e};a.enableClassExtend=function(t){t.$constructor=t,t.extend=function(t){var e=this,i=function(){t.$constructor?t.$constructor.apply(this,arguments):e.apply(this,arguments)};return o.extend(i.prototype,t),i.extend=this.extend,i.superCall=n,i.superApply=r,o.inherits(i,this),i.superClass=e,i}},a.enableClassManagement=function(t,e){function i(t){var e=n[t.main];return e&&e[l]||(e=n[t.main]={},e[l]=!0),e}e=e||{};var n={};if(t.registerClass=function(t,e){if(e)if(e=u(e),e.sub){if(e.sub!==l){var r=i(e);r[e.sub]=t}}else n[e.main]=t;return t},t.getClass=function(t,e,i){var r=n[t];if(r&&r[l]&&(r=e?r[e]:null),i&&!r)throw new Error("Component "+t+"."+(e||"")+" not exists. Load it first.");return r},t.getClassesByMainType=function(t){t=u(t);var e=[],i=n[t.main];return i&&i[l]?o.each(i,function(t,i){i!==l&&e.push(t)}):e.push(i),e},t.hasClass=function(t){return t=u(t),!!n[t.main]},t.getAllClassMainTypes=function(){var t=[];return o.each(n,function(e,i){t.push(i)}),t},t.hasSubTypes=function(t){t=u(t);var e=n[t.main];return e&&e[l]},t.parseClassType=u,e.registerWhenExtend){var r=t.extend;r&&(t.extend=function(e){var i=r.call(this,e);return t.registerClass(i,e.type)})}return t},a.setReadOnly=function(t,e){},t.exports=a},function(t,e,i){var n=i(133),r=i(38);i(134),i(132);var o=i(32),a=i(4),s=i(1),l=i(16),u={};u.getScaleExtent=function(t,e){var i=t.scale,n=i.getExtent(),r=n[1]-n[0];if("ordinal"===i.type)return isFinite(r)?n:[0,0];var o=e.getMin?e.getMin():e.get("min"),l=e.getMax?e.getMax():e.get("max"),u=e.getNeedCrossZero?e.getNeedCrossZero():!e.get("scale"),h=e.get("boundaryGap");s.isArray(h)||(h=[h||0,h||0]),h[0]=a.parsePercent(h[0],1),h[1]=a.parsePercent(h[1],1);var c=!0,d=!0;return null==o&&(o=n[0]-h[0]*r,c=!1),null==l&&(l=n[1]+h[1]*r,d=!1),"dataMin"===o&&(o=n[0]),"dataMax"===l&&(l=n[1]),u&&(o>0&&l>0&&!c&&(o=0),0>o&&0>l&&!d&&(l=0)),[o,l]},u.niceScaleExtent=function(t,e){var i=t.scale,n=u.getScaleExtent(t,e),r=null!=(e.getMin?e.getMin():e.get("min")),o=null!=(e.getMax?e.getMax():e.get("max")),a=e.get("splitNumber");i.setExtent(n[0],n[1]),i.niceExtent(a,r,o);var s=e.get("minInterval");if(isFinite(s)&&!r&&!o&&"interval"===i.type){var l=i.getInterval(),h=Math.max(Math.abs(l),s)/l;n=i.getExtent(),i.setExtent(h*n[0],n[1]*h),i.niceExtent(a)}var l=e.get("interval");null!=l&&i.setInterval&&i.setInterval(l)},u.createScaleByModel=function(t,e){if(e=e||t.get("type"))switch(e){case"category":return new n(t.getCategories(),[1/0,-(1/0)]);case"value":return new r;default:return(o.getClass(e)||r).create(t)}},u.ifAxisCrossZero=function(t){var e=t.scale.getExtent(),i=e[0],n=e[1];return!(i>0&&n>0||0>i&&0>n)},u.getAxisLabelInterval=function(t,e,i,n){var r,o=0,a=0,s=1;e.length>40&&(s=Math.floor(e.length/40));for(var u=0;u<t.length;u+=s){var h=t[u],c=l.getBoundingRect(e[u],i,"center","top");c[n?"x":"y"]+=h,c[n?"width":"height"]*=1.3,r?r.intersect(c)?(a++,o=Math.max(o,a)):(r.union(c),a=0):r=c.clone()}return 0===o&&s>1?s:(o+1)*s-1},u.getFormattedLabels=function(t,e){var i=t.scale,n=i.getTicksLabels(),r=i.getTicks();return"string"==typeof e?(e=function(t){return function(e){return t.replace("{value}",e)}}(e),s.map(n,e)):"function"==typeof e?s.map(r,function(n,r){return e("category"===t.type?i.getLabel(n):n,r)},this):n},t.exports=u},function(t,e){"use strict";function i(){this._coordinateSystems=[]}var n={};i.prototype={constructor:i,create:function(t,e){var i=[];for(var r in n){var o=n[r].create(t,e);o&&(i=i.concat(o))}this._coordinateSystems=i},update:function(t,e){for(var i=this._coordinateSystems,n=0;n<i.length;n++)i[n].update&&i[n].update(t,e)}},i.register=function(t,e){n[t]=e},i.get=function(t){return n[t]},t.exports=i},function(t,e,i){"use strict";function n(t){return t.getBoundingClientRect?t.getBoundingClientRect():{left:0,top:0}}function r(t,e,i){var r=n(t);return i=i||{},i.zrX=e.clientX-r.left,i.zrY=e.clientY-r.top,i}function o(t,e){if(e=e||window.event,null!=e.zrX)return e;var i=e.type,n=i&&i.indexOf("touch")>=0;if(n){var o="touchend"!=i?e.targetTouches[0]:e.changedTouches[0];o&&r(t,o,e)}else r(t,e,e),e.zrDelta=e.wheelDelta?e.wheelDelta/120:-(e.detail||0)/3;return e}function a(t,e,i){u?t.addEventListener(e,i):t.attachEvent("on"+e,i)}function s(t,e,i){u?t.removeEventListener(e,i):t.detachEvent("on"+e,i)}var l=i(20),u="undefined"!=typeof window&&!!window.addEventListener,h=u?function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0}:function(t){t.returnValue=!1,t.cancelBubble=!0};t.exports={clientToLocal:r,normalizeEvent:o,addEventListener:a,removeEventListener:s,stop:h,Dispatcher:l}},function(t,e){"use strict";var i={};t.exports={register:function(t,e){i[t]=e},get:function(t){return i[t]}}},function(t,e,i){"use strict";var n=i(3),r=i(7),o=n.extendShape({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var i=e.cx,n=e.cy,r=e.width/2,o=e.height/2;t.moveTo(i,n-o),t.lineTo(i+r,n+o),t.lineTo(i-r,n+o),t.closePath()}}),a=n.extendShape({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var i=e.cx,n=e.cy,r=e.width/2,o=e.height/2;t.moveTo(i,n-o),t.lineTo(i+r,n),t.lineTo(i,n+o),t.lineTo(i-r,n),t.closePath()}}),s=n.extendShape({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var i=e.x,n=e.y,r=e.width/5*3,o=Math.max(r,e.height),a=r/2,s=a*a/(o-a),l=n-o+a+s,u=Math.asin(s/a),h=Math.cos(u)*a,c=Math.sin(u),d=Math.cos(u);t.arc(i,l,a,Math.PI-u,2*Math.PI+u);var f=.6*a,p=.7*a;t.bezierCurveTo(i+h-c*f,l+s+d*f,i,n-p,i,n),t.bezierCurveTo(i,n-p,i-h+c*f,l+s+d*f,i-h,l+s),t.closePath()}}),l=n.extendShape({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var i=e.height,n=e.width,r=e.x,o=e.y,a=n/3*2;t.moveTo(r,o),t.lineTo(r+a,o+i),t.lineTo(r,o+i/4*3),t.lineTo(r-a,o+i),t.lineTo(r,o),t.closePath()}}),u={line:n.Line,rect:n.Rect,roundRect:n.Rect,square:n.Rect,circle:n.Circle,diamond:a,pin:s,arrow:l,triangle:o},h={line:function(t,e,i,n,r){r.x1=t,r.y1=e+n/2,r.x2=t+i,r.y2=e+n/2},rect:function(t,e,i,n,r){r.x=t,r.y=e,r.width=i,r.height=n},roundRect:function(t,e,i,n,r){r.x=t,r.y=e,r.width=i,r.height=n,r.r=Math.min(i,n)/4},square:function(t,e,i,n,r){var o=Math.min(i,n);r.x=t,r.y=e,r.width=o,r.height=o},circle:function(t,e,i,n,r){r.cx=t+i/2,r.cy=e+n/2,r.r=Math.min(i,n)/2},diamond:function(t,e,i,n,r){r.cx=t+i/2,r.cy=e+n/2,r.width=i,r.height=n},pin:function(t,e,i,n,r){r.x=t+i/2,r.y=e+n/2,r.width=i,r.height=n},arrow:function(t,e,i,n,r){r.x=t+i/2,r.y=e+n/2,r.width=i,r.height=n},triangle:function(t,e,i,n,r){r.cx=t+i/2,r.cy=e+n/2,r.width=i,r.height=n}},c={};for(var d in u)c[d]=new u[d];var f=n.extendShape({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},beforeBrush:function(){var t=this.style,e=this.shape;"pin"===e.symbolType&&"inside"===t.textPosition&&(t.textPosition=["50%","40%"],t.textAlign="center",t.textVerticalAlign="middle")},buildPath:function(t,e,i){var n=e.symbolType,r=c[n];"none"!==e.symbolType&&(r||(n="rect",r=c[n]),h[n](e.x,e.y,e.width,e.height,r.shape),r.buildPath(t,r.shape,i))}}),p=function(t){if("image"!==this.type){var e=this.style,i=this.shape;i&&"line"===i.symbolType?e.stroke=t:this.__isEmptyBrush?(e.stroke=t,e.fill="#fff"):(e.fill&&(e.fill=t),e.stroke&&(e.stroke=t)),this.dirty(!1)}},g={createSymbol:function(t,e,i,o,a,s){var l=0===t.indexOf("empty");l&&(t=t.substr(5,1).toLowerCase()+t.substr(6));var u;return u=0===t.indexOf("image://")?new n.Image({style:{image:t.slice(8),x:e,y:i,width:o,height:a}}):0===t.indexOf("path://")?n.makePath(t.slice(7),{},new r(e,i,o,a)):new f({shape:{symbolType:t,x:e,y:i,width:o,height:a}}),u.__isEmptyBrush=l,u.setColor=p,u.setColor(s),u}};t.exports=g},function(t,e,i){function n(){this.group=new a,this.uid=s.getUID("viewChart")}function r(t,e){if(t&&(t.trigger(e),"group"===t.type))for(var i=0;i<t.childCount();i++)r(t.childAt(i),e)}function o(t,e,i){var n=e&&e.dataIndex,o=e&&e.name;if(null!=n)for(var a=n instanceof Array?n:[n],s=0,l=a.length;l>s;s++)r(t.getItemGraphicEl(a[s]),i);else if(o)for(var u=o instanceof Array?o:[o],s=0,l=u.length;l>s;s++){var n=t.indexOfName(u[s]);r(t.getItemGraphicEl(n),i)}else t.eachItemGraphicEl(function(t){r(t,i)})}var a=i(34),s=i(43),l=i(21);n.prototype={type:"chart",init:function(t,e){},render:function(t,e,i,n){},highlight:function(t,e,i,n){o(t.getData(),n,"emphasis")},downplay:function(t,e,i,n){o(t.getData(),n,"normal")},remove:function(t,e){this.group.removeAll()},dispose:function(){}};var u=n.prototype;u.updateView=u.updateLayout=u.updateVisual=function(t,e,i,n){this.render(t,e,i,n)},l.enableClassExtend(n),l.enableClassManagement(n,{registerWhenExtend:!0}),t.exports=n},function(t,e,i){"use strict";var n=i(17),r=i(5),o=i(73),a=i(7),s=i(33).devicePixelRatio,l={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},u=[],h=[],c=[],d=[],f=Math.min,p=Math.max,g=Math.cos,v=Math.sin,m=Math.sqrt,y=Math.abs,x="undefined"!=typeof Float32Array,_=function(){this.data=[],this._len=0,this._ctx=null,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._ux=0,this._uy=0};_.prototype={constructor:_,_lineDash:null,_dashOffset:0,_dashIdx:0,_dashSum:0,setScale:function(t,e){this._ux=y(1/s/t)||0,this._uy=y(1/s/e)||0},getContext:function(){return this._ctx},beginPath:function(t){return this._ctx=t,t&&t.beginPath(),this._len=0,this._lineDash&&(this._lineDash=null,this._dashOffset=0),this},moveTo:function(t,e){return this.addData(l.M,t,e),this._ctx&&this._ctx.moveTo(t,e),this._x0=t,this._y0=e,this._xi=t,this._yi=e,this},lineTo:function(t,e){var i=y(t-this._xi)>this._ux||y(e-this._yi)>this._uy||this._len<5;return this.addData(l.L,t,e),this._ctx&&i&&(this._needsDash()?this._dashedLineTo(t,e):this._ctx.lineTo(t,e)),i&&(this._xi=t,this._yi=e),this},bezierCurveTo:function(t,e,i,n,r,o){return this.addData(l.C,t,e,i,n,r,o),this._ctx&&(this._needsDash()?this._dashedBezierTo(t,e,i,n,r,o):this._ctx.bezierCurveTo(t,e,i,n,r,o)),this._xi=r,this._yi=o,this},quadraticCurveTo:function(t,e,i,n){return this.addData(l.Q,t,e,i,n),this._ctx&&(this._needsDash()?this._dashedQuadraticTo(t,e,i,n):this._ctx.quadraticCurveTo(t,e,i,n)),this._xi=i,this._yi=n,this},arc:function(t,e,i,n,r,o){return this.addData(l.A,t,e,i,i,n,r-n,0,o?0:1),this._ctx&&this._ctx.arc(t,e,i,n,r,o),this._xi=g(r)*i+t,this._xi=v(r)*i+t,this},arcTo:function(t,e,i,n,r){return this._ctx&&this._ctx.arcTo(t,e,i,n,r),this},rect:function(t,e,i,n){return this._ctx&&this._ctx.rect(t,e,i,n),this.addData(l.R,t,e,i,n),this},closePath:function(){this.addData(l.Z);var t=this._ctx,e=this._x0,i=this._y0;return t&&(this._needsDash()&&this._dashedLineTo(e,i),t.closePath()),this._xi=e,this._yi=i,this},fill:function(t){t&&t.fill(),this.toStatic()},stroke:function(t){t&&t.stroke(),this.toStatic()},setLineDash:function(t){if(t instanceof Array){this._lineDash=t,this._dashIdx=0;for(var e=0,i=0;i<t.length;i++)e+=t[i];this._dashSum=e}return this},setLineDashOffset:function(t){return this._dashOffset=t,this},len:function(){return this._len},setData:function(t){var e=t.length;this.data&&this.data.length==e||!x||(this.data=new Float32Array(e));for(var i=0;e>i;i++)this.data[i]=t[i];this._len=e},appendPath:function(t){t instanceof Array||(t=[t]);for(var e=t.length,i=0,n=this._len,r=0;e>r;r++)i+=t[r].len();x&&this.data instanceof Float32Array&&(this.data=new Float32Array(n+i));for(var r=0;e>r;r++)for(var o=t[r].data,a=0;a<o.length;a++)this.data[n++]=o[a];this._len=n},addData:function(t){var e=this.data;this._len+arguments.length>e.length&&(this._expandData(),e=this.data);for(var i=0;i<arguments.length;i++)e[this._len++]=arguments[i];this._prevCmd=t},_expandData:function(){if(!(this.data instanceof Array)){for(var t=[],e=0;e<this._len;e++)t[e]=this.data[e];this.data=t}},_needsDash:function(){return this._lineDash},_dashedLineTo:function(t,e){var i,n,r=this._dashSum,o=this._dashOffset,a=this._lineDash,s=this._ctx,l=this._xi,u=this._yi,h=t-l,c=e-u,d=m(h*h+c*c),g=l,v=u,y=a.length;for(h/=d,c/=d,0>o&&(o=r+o),o%=r,g-=o*h,v-=o*c;h>0&&t>=g||0>h&&g>=t||0==h&&(c>0&&e>=v||0>c&&v>=e);)n=this._dashIdx,i=a[n],g+=h*i,v+=c*i,this._dashIdx=(n+1)%y,h>0&&l>g||0>h&&g>l||c>0&&u>v||0>c&&v>u||s[n%2?"moveTo":"lineTo"](h>=0?f(g,t):p(g,t),c>=0?f(v,e):p(v,e));h=g-t,c=v-e,this._dashOffset=-m(h*h+c*c)},_dashedBezierTo:function(t,e,i,r,o,a){var s,l,u,h,c,d=this._dashSum,f=this._dashOffset,p=this._lineDash,g=this._ctx,v=this._xi,y=this._yi,x=n.cubicAt,_=0,b=this._dashIdx,w=p.length,S=0;for(0>f&&(f=d+f),f%=d,s=0;1>s;s+=.1)l=x(v,t,i,o,s+.1)-x(v,t,i,o,s),u=x(y,e,r,a,s+.1)-x(y,e,r,a,s),_+=m(l*l+u*u);for(;w>b&&(S+=p[b],!(S>f));b++);for(s=(S-f)/_;1>=s;)h=x(v,t,i,o,s),c=x(y,e,r,a,s),b%2?g.moveTo(h,c):g.lineTo(h,c),s+=p[b]/_,b=(b+1)%w;b%2!==0&&g.lineTo(o,a),l=o-h,u=a-c,this._dashOffset=-m(l*l+u*u)},_dashedQuadraticTo:function(t,e,i,n){var r=i,o=n;i=(i+2*t)/3,n=(n+2*e)/3,t=(this._xi+2*t)/3,e=(this._yi+2*e)/3,this._dashedBezierTo(t,e,i,n,r,o)},toStatic:function(){var t=this.data;t instanceof Array&&(t.length=this._len,x&&(this.data=new Float32Array(t)))},getBoundingRect:function(){u[0]=u[1]=c[0]=c[1]=Number.MAX_VALUE,h[0]=h[1]=d[0]=d[1]=-Number.MAX_VALUE;for(var t=this.data,e=0,i=0,n=0,s=0,f=0;f<t.length;){var p=t[f++];switch(1==f&&(e=t[f],i=t[f+1],n=e,s=i),p){case l.M:n=t[f++],s=t[f++],e=n,i=s,c[0]=n,c[1]=s,d[0]=n,d[1]=s;break;case l.L:o.fromLine(e,i,t[f],t[f+1],c,d),e=t[f++],i=t[f++];break;case l.C:o.fromCubic(e,i,t[f++],t[f++],t[f++],t[f++],t[f],t[f+1],c,d),e=t[f++],i=t[f++];break;case l.Q:o.fromQuadratic(e,i,t[f++],t[f++],t[f],t[f+1],c,d),e=t[f++],i=t[f++];break;case l.A:var m=t[f++],y=t[f++],x=t[f++],_=t[f++],b=t[f++],w=t[f++]+b,S=(t[f++],1-t[f++]);1==f&&(n=g(b)*x+m,s=v(b)*_+y),o.fromArc(m,y,x,_,b,w,S,c,d),e=g(w)*x+m,i=v(w)*_+y;break;case l.R:n=e=t[f++],s=i=t[f++];var M=t[f++],A=t[f++];o.fromLine(n,s,n+M,s+A,c,d);break;case l.Z:e=n,i=s}r.min(u,u,c),r.max(h,h,d)}return 0===f&&(u[0]=u[1]=h[0]=h[1]=0),new a(u[0],u[1],h[0]-u[0],h[1]-u[1])},rebuildPath:function(t){for(var e,i,n,r,o,a,s=this.data,u=this._ux,h=this._uy,c=this._len,d=0;c>d;){var f=s[d++];switch(1==d&&(n=s[d],r=s[d+1],e=n,i=r),f){case l.M:e=n=s[d++],i=r=s[d++],t.moveTo(n,r);break;case l.L:o=s[d++],a=s[d++],(y(o-n)>u||y(a-r)>h||d===c-1)&&(t.lineTo(o,a),n=o,r=a);break;case l.C:t.bezierCurveTo(s[d++],s[d++],s[d++],s[d++],s[d++],s[d++]),n=s[d-2],r=s[d-1];break;case l.Q:t.quadraticCurveTo(s[d++],s[d++],s[d++],s[d++]),n=s[d-2],r=s[d-1];break;case l.A:var p=s[d++],m=s[d++],x=s[d++],_=s[d++],b=s[d++],w=s[d++],S=s[d++],M=s[d++],A=x>_?x:_,I=x>_?1:x/_,T=x>_?_/x:1,L=Math.abs(x-_)>.001,C=b+w;L?(t.translate(p,m),t.rotate(S),t.scale(I,T),t.arc(0,0,A,b,C,1-M),t.scale(1/I,1/T),t.rotate(-S),t.translate(-p,-m)):t.arc(p,m,A,b,C,1-M),1==d&&(e=g(b)*x+p,i=v(b)*_+m),n=g(C)*x+p,r=v(C)*_+m;break;case l.R:e=n=s[d],i=r=s[d+1],t.rect(s[d++],s[d++],s[d++],s[d++]);break;case l.Z:t.closePath(),n=e,r=i}}}},_.CMD=l,t.exports=_},function(t,e){var i=function(t){this.colorStops=t||[]};i.prototype={constructor:i,addColorStop:function(t,e){this.colorStops.push({offset:t,color:e})}},t.exports=i},function(t,e,i){function n(t,e,i,n){if(!e)return t;var s=r(e[0]),l=o.isArray(s)&&s.length||1;i=i||[],n=n||"extra";for(var u=0;l>u;u++)if(!t[u]){var h=i[u]||n+(u-i.length);t[u]=a(e,u)?{type:"ordinal",name:h}:h}return t}function r(t){return o.isArray(t)?t:o.isObject(t)?t.value:t}var o=i(1),a=n.guessOrdinal=function(t,e){for(var i=0,n=t.length;n>i;i++){var a=r(t[i]);if(!o.isArray(a))return!1;var a=a[e];if(null!=a&&isFinite(a))return!1;if(o.isString(a)&&"-"!==a)return!0}return!1};t.exports=n},function(t,e,i){var n=i(1);t.exports=function(t){for(var e=0;e<t.length;e++)t[e][1]||(t[e][1]=t[e][0]);return function(e){for(var i={},r=0;r<t.length;r++){var o=t[r][1];if(!(e&&n.indexOf(e,o)>=0)){var a=this.getShallow(o);null!=a&&(i[t[r][0]]=a)}}return i}}},function(t,e,i){function n(){this._extent=[1/0,-(1/0)],this._interval=0,this.init&&this.init.apply(this,arguments)}var r=i(21),o=n.prototype;o.parse=function(t){return t},o.contain=function(t){var e=this._extent;return t>=e[0]&&t<=e[1]},o.normalize=function(t){var e=this._extent;return e[1]===e[0]?.5:(t-e[0])/(e[1]-e[0])},o.scale=function(t){var e=this._extent;return t*(e[1]-e[0])+e[0]},o.unionExtent=function(t){var e=this._extent;t[0]<e[0]&&(e[0]=t[0]),t[1]>e[1]&&(e[1]=t[1])},o.getExtent=function(){return this._extent.slice()},o.setExtent=function(t,e){var i=this._extent;isNaN(t)||(i[0]=t),isNaN(e)||(i[1]=e)},o.getTicksLabels=function(){for(var t=[],e=this.getTicks(),i=0;i<e.length;i++)t.push(this.getLabel(e[i]));return t},r.enableClassExtend(n),r.enableClassManagement(n,{registerWhenExtend:!0}),t.exports=n},function(t,e){var i=1;"undefined"!=typeof window&&(i=Math.max(window.devicePixelRatio||1,1));var n={debugMode:0,devicePixelRatio:i};t.exports=n},function(t,e,i){var n=i(1),r=i(58),o=i(7),a=function(t){t=t||{},r.call(this,t);for(var e in t)this[e]=t[e];this._children=[],this.__storage=null,this.__dirty=!0};a.prototype={constructor:a,isGroup:!0,type:"group",silent:!1,children:function(){return this._children.slice()},childAt:function(t){return this._children[t]},childOfName:function(t){for(var e=this._children,i=0;i<e.length;i++)if(e[i].name===t)return e[i]},childCount:function(){return this._children.length},add:function(t){return t&&t!==this&&t.parent!==this&&(this._children.push(t),this._doAdd(t)),this},addBefore:function(t,e){if(t&&t!==this&&t.parent!==this&&e&&e.parent===this){var i=this._children,n=i.indexOf(e);n>=0&&(i.splice(n,0,t),this._doAdd(t))}return this},_doAdd:function(t){t.parent&&t.parent.remove(t),t.parent=this;var e=this.__storage,i=this.__zr;e&&e!==t.__storage&&(e.addToMap(t),t instanceof a&&t.addChildrenToStorage(e)),i&&i.refresh()},remove:function(t){var e=this.__zr,i=this.__storage,r=this._children,o=n.indexOf(r,t);return 0>o?this:(r.splice(o,1),t.parent=null,i&&(i.delFromMap(t.id),t instanceof a&&t.delChildrenFromStorage(i)),e&&e.refresh(),this)},removeAll:function(){var t,e,i=this._children,n=this.__storage;for(e=0;e<i.length;e++)t=i[e],n&&(n.delFromMap(t.id),t instanceof a&&t.delChildrenFromStorage(n)),t.parent=null;return i.length=0,this},eachChild:function(t,e){for(var i=this._children,n=0;n<i.length;n++){var r=i[n];t.call(e,r,n)}return this},traverse:function(t,e){for(var i=0;i<this._children.length;i++){var n=this._children[i];t.call(e,n),"group"===n.type&&n.traverse(t,e)}return this},addChildrenToStorage:function(t){for(var e=0;e<this._children.length;e++){var i=this._children[e];t.addToMap(i),i instanceof a&&i.addChildrenToStorage(t)}},delChildrenFromStorage:function(t){for(var e=0;e<this._children.length;e++){var i=this._children[e];t.delFromMap(i.id),i instanceof a&&i.delChildrenFromStorage(t)}},dirty:function(){return this.__dirty=!0,this.__zr&&this.__zr.refresh(),this},getBoundingRect:function(t){for(var e=null,i=new o(0,0,0,0),n=t||this._children,r=[],a=0;a<n.length;a++){var s=n[a];if(!s.ignore&&!s.invisible){var l=s.getBoundingRect(),u=s.getLocalTransform(r);u?(i.copy(l),i.applyTransform(u),e=e||i.clone(),e.union(i)):(e=e||l.clone(),e.union(l))}}return e||i}},n.inherits(a,r),t.exports=a},function(t,e,i){"use strict";function n(t){for(var e=0;e<t.length&&null==t[e];)e++;return t[e]}function r(t){var e=n(t);return null!=e&&!c.isArray(p(e))}function o(t,e,i){t=t||[];var n=e.get("coordinateSystem"),o=v[n],a=f.get(n),s=o&&o(t,e,i),m=s&&s.dimensions;m||(m=a&&a.dimensions||["x","y"],m=h(m,t,m.concat(["value"])));var y=s?s.categoryIndex:-1,x=new u(m,e),_=l(s,t),b={},w=y>=0&&r(t)?function(t,e,i,n){return d.isDataItemOption(t)&&(x.hasItemOption=!0),n===y?i:g(p(t),m[n])}:function(t,e,i,n){var r=p(t),o=g(r&&r[n],m[n]);d.isDataItemOption(t)&&(x.hasItemOption=!0);var a=s&&s.categoryAxesModels;return a&&a[e]&&"string"==typeof o&&(b[e]=b[e]||a[e].getCategories(),o=c.indexOf(b[e],o),0>o&&!isNaN(o)&&(o=+o)),o};return x.hasItemOption=!1,x.initData(t,_,w),x}function a(t){return"category"!==t&&"time"!==t}function s(t){return"category"===t?"ordinal":"time"===t?"time":"float"}function l(t,e){var i,n=[],r=t&&t.dimensions[t.categoryIndex];if(r&&(i=t.categoryAxesModels[r.name]),i){var o=i.getCategories();if(o){var a=e.length;if(c.isArray(e[0])&&e[0].length>1){n=[];for(var s=0;a>s;s++)n[s]=o[e[s][t.categoryIndex||0]]}else n=o.slice(0)}}return n}var u=i(14),h=i(30),c=i(1),d=i(10),f=i(23),p=d.getDataItemValue,g=d.converDataValue,v={cartesian2d:function(t,e,i){var n=i.getComponent("xAxis",e.get("xAxisIndex")),r=i.getComponent("yAxis",e.get("yAxisIndex")),o=n.get("type"),l=r.get("type"),u=[{name:"x",type:s(o),stackable:a(o)},{name:"y",type:s(l),stackable:a(l)}],c="category"===o,d="category"===l;h(u,t,["x","y","z"]);var f={};return c&&(f.x=n),d&&(f.y=r),{dimensions:u,categoryIndex:c?0:d?1:-1,categoryAxesModels:f}},polar:function(t,e,i){var n=e.get("polarIndex")||0,r=function(t){return t.get("polarIndex")===n},o=i.findComponents({mainType:"angleAxis",filter:r})[0],l=i.findComponents({mainType:"radiusAxis",filter:r})[0],u=l.get("type"),c=o.get("type"),d=[{name:"radius",type:s(u),stackable:a(u)},{name:"angle",type:s(c),stackable:a(c)}],f="category"===c,p="category"===u;h(d,t,["radius","angle","value"]);var g={};return p&&(g.radius=l),f&&(g.angle=o),{dimensions:d,categoryIndex:f?1:p?0:-1,categoryAxesModels:g}},geo:function(t,e,i){return{dimensions:h([{name:"lng"},{name:"lat"}],t,["lng","lat","value"])}}};t.exports=o},function(t,e,i){"use strict";var n=i(3),r=i(1);i(54),i(104),i(2).extendComponentView({type:"grid",render:function(t,e){this.group.removeAll(),t.get("show")&&this.group.add(new n.Rect({shape:t.coordinateSystem.getRect(),style:r.defaults({fill:t.get("backgroundColor")},t.getItemStyle()),silent:!0}))}})},function(t,e,i){function n(t){t=t||{},a.call(this,t);for(var e in t)t.hasOwnProperty(e)&&"style"!==e&&(this[e]=t[e]);this.style=new o(t.style),this._rect=null,this.__clipPaths=[]}var r=i(1),o=i(64),a=i(58),s=i(75);n.prototype={constructor:n,type:"displayable",__dirty:!0,invisible:!1,z:0,z2:0,zlevel:0,draggable:!1,dragging:!1,silent:!1,culling:!1,cursor:"pointer",rectHover:!1,progressive:-1,beforeBrush:function(t){},afterBrush:function(t){},brush:function(t,e){},getBoundingRect:function(){},contain:function(t,e){return this.rectContain(t,e)},traverse:function(t,e){t.call(e,this)},rectContain:function(t,e){var i=this.transformCoordToLocal(t,e),n=this.getBoundingRect();return n.contain(i[0],i[1])},dirty:function(){this.__dirty=!0,this._rect=null,this.__zr&&this.__zr.refresh()},animateStyle:function(t){return this.animate("style",t)},attrKV:function(t,e){"style"!==t?a.prototype.attrKV.call(this,t,e):this.style.set(e)},setStyle:function(t,e){return this.style.set(t,e),this.dirty(!1),this},useStyle:function(t){return this.style=new o(t),this.dirty(!1),this}},r.inherits(n,a),r.mixin(n,s),t.exports=n},function(t,e,i){var n=i(4),r=i(9),o=i(32),a=Math.floor,s=Math.ceil,l=o.extend({type:"interval",_interval:0,setExtent:function(t,e){var i=this._extent;isNaN(t)||(i[0]=parseFloat(t)),isNaN(e)||(i[1]=parseFloat(e))},unionExtent:function(t){var e=this._extent;t[0]<e[0]&&(e[0]=t[0]),t[1]>e[1]&&(e[1]=t[1]),l.prototype.setExtent.call(this,e[0],e[1])},getInterval:function(){return this._interval||this.niceTicks(),this._interval},setInterval:function(t){this._interval=t,this._niceExtent=this._extent.slice()},getTicks:function(){this._interval||this.niceTicks();var t=this._interval,e=this._extent,i=[],r=1e4;if(t){var o=this._niceExtent;e[0]<o[0]&&i.push(e[0]);for(var a=o[0];a<=o[1];)if(i.push(a),a=n.round(a+t),i.length>r)return[];e[1]>o[1]&&i.push(e[1])}return i},getTicksLabels:function(){for(var t=[],e=this.getTicks(),i=0;i<e.length;i++)t.push(this.getLabel(e[i]));return t},getLabel:function(t){return r.addCommas(t)},niceTicks:function(t){t=t||5;var e=this._extent,i=e[1]-e[0];if(isFinite(i)){0>i&&(i=-i,e.reverse());var r=n.nice(i/t,!0),o=[n.round(s(e[0]/r)*r),n.round(a(e[1]/r)*r)];this._interval=r,this._niceExtent=o}},niceExtent:function(t,e,i){var r=this._extent;if(r[0]===r[1])if(0!==r[0]){var o=r[0];i?r[0]-=o/2:(r[1]+=o/2,r[0]-=o/2)}else r[1]=1;var l=r[1]-r[0];isFinite(l)||(r[0]=0,r[1]=1),this.niceTicks(t);var u=this._interval;e||(r[0]=n.round(a(r[0]/u)*u)),i||(r[1]=n.round(s(r[1]/u)*u))}});l.create=function(){return new l},t.exports=l},function(t,e,i){function n(t){this.group=new o.Group,this._symbolCtor=t||a}function r(t,e,i){var n=t.getItemLayout(e);return n&&!isNaN(n[0])&&!isNaN(n[1])&&!(i&&i(e))&&"none"!==t.getItemVisual(e,"symbol")}var o=i(3),a=i(49),s=n.prototype;s.updateData=function(t,e){var i=this.group,n=t.hostModel,a=this._data,s=this._symbolCtor,l={itemStyle:n.getModel("itemStyle.normal").getItemStyle(["color"]),hoverItemStyle:n.getModel("itemStyle.emphasis").getItemStyle(),symbolRotate:n.get("symbolRotate"),symbolOffset:n.get("symbolOffset"),hoverAnimation:n.get("hoverAnimation"),labelModel:n.getModel("label.normal"),hoverLabelModel:n.getModel("label.emphasis")};t.diff(a).add(function(n){var o=t.getItemLayout(n);if(r(t,n,e)){var a=new s(t,n,l);a.attr("position",o),t.setItemGraphicEl(n,a),i.add(a)}}).update(function(u,h){var c=a.getItemGraphicEl(h),d=t.getItemLayout(u);return r(t,u,e)?(c?(c.updateData(t,u,l),o.updateProps(c,{position:d},n)):(c=new s(t,u),c.attr("position",d)),i.add(c),void t.setItemGraphicEl(u,c)):void i.remove(c)}).remove(function(t){var e=a.getItemGraphicEl(t);e&&e.fadeOut(function(){i.remove(e)})}).execute(),this._data=t},s.updateLayout=function(){var t=this._data;t&&t.eachItemGraphicEl(function(e,i){var n=t.getItemLayout(i);e.attr("position",n)})},s.remove=function(t){var e=this.group,i=this._data;i&&(t?i.eachItemGraphicEl(function(t){t.fadeOut(function(){e.remove(t)})}):e.removeAll())},t.exports=n},function(t,e,i){function n(t){var e={};return h(["start","end","startValue","endValue","throttle"],function(i){t.hasOwnProperty(i)&&(e[i]=t[i])}),e}function r(t,e,i,n){null!=i[e]&&null==i[t]&&(n[t]=null)}var o=i(1),a=i(12),s=i(2),l=i(10),u=i(178),h=o.each,c=l.eachAxisDim,d=s.extendComponentModel({type:"dataZoom",dependencies:["xAxis","yAxis","zAxis","radiusAxis","angleAxis","series"],defaultOption:{zlevel:0,z:4,orient:null,xAxisIndex:null,yAxisIndex:null,angleAxisIndex:null,radiusAxisIndex:null,filterMode:"filter",throttle:null,start:0,end:100,startValue:null,endValue:null},init:function(t,e,i){this._dataIntervalByAxis={},this._dataInfo={},this._axisProxies={},this.textStyleModel,this._autoThrottle=!0;var r=n(t);this.mergeDefaultAndTheme(t,i),this.doInit(r)},mergeOption:function(t){var e=n(t);o.merge(this.option,t,!0),this.doInit(e)},doInit:function(t){var e=this.option;a.canvasSupported||(e.realtime=!1),this._setDefaultThrottle(t),r("start","startValue",t,e),r("end","endValue",t,e),this.textStyleModel=this.getModel("textStyle"),this._resetTarget(),this._giveAxisProxies()},_giveAxisProxies:function(){var t=this._axisProxies;this.eachTargetAxis(function(e,i,n,r){var o=this.dependentModels[e.axis][i],a=o.__dzAxisProxy||(o.__dzAxisProxy=new u(e.name,i,this,r));t[e.name+"_"+i]=a},this)},_resetTarget:function(){var t=this.option,e=this._judgeAutoMode();c(function(e){var i=e.axisIndex;t[i]=l.normalizeToArray(t[i])},this),"axisIndex"===e?this._autoSetAxisIndex():"orient"===e&&this._autoSetOrient()},_judgeAutoMode:function(){var t=this.option,e=!1;c(function(i){null!=t[i.axisIndex]&&(e=!0)},this);var i=t.orient;return null==i&&e?"orient":e?void 0:(null==i&&(t.orient="horizontal"),"axisIndex")},_autoSetAxisIndex:function(){var t=!0,e=this.get("orient",!0),i=this.option;if(t){var n="vertical"===e?{dim:"y",axisIndex:"yAxisIndex",axis:"yAxis"}:{dim:"x",axisIndex:"xAxisIndex",axis:"xAxis"};this.dependentModels[n.axis].length&&(i[n.axisIndex]=[0],t=!1)}t&&c(function(e){if(t){var n=[],r=this.dependentModels[e.axis];if(r.length&&!n.length)for(var o=0,a=r.length;a>o;o++)"category"===r[o].get("type")&&n.push(o);i[e.axisIndex]=n,n.length&&(t=!1)}},this),t&&this.ecModel.eachSeries(function(t){this._isSeriesHasAllAxesTypeOf(t,"value")&&c(function(e){var n=i[e.axisIndex],r=t.get(e.axisIndex);o.indexOf(n,r)<0&&n.push(r)})},this)},_autoSetOrient:function(){var t;this.eachTargetAxis(function(e){!t&&(t=e.name)},this),this.option.orient="y"===t?"vertical":"horizontal"},_isSeriesHasAllAxesTypeOf:function(t,e){var i=!0;return c(function(n){var r=t.get(n.axisIndex),o=this.dependentModels[n.axis][r];o&&o.get("type")===e||(i=!1)},this),i},_setDefaultThrottle:function(t){if(t.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var e=this.ecModel.option;this.option.throttle=e.animation&&e.animationDurationUpdate>0?100:20}},getFirstTargetAxisModel:function(){var t;return c(function(e){if(null==t){var i=this.get(e.axisIndex);i.length&&(t=this.dependentModels[e.axis][i[0]])}},this),t},eachTargetAxis:function(t,e){var i=this.ecModel;c(function(n){h(this.get(n.axisIndex),function(r){t.call(e,n,r,this,i)},this)},this)},getAxisProxy:function(t,e){return this._axisProxies[t+"_"+e]},setRawRange:function(t){h(["start","end","startValue","endValue"],function(e){this.option[e]=t[e]},this)},getPercentRange:function(){var t=this.findRepresentativeAxisProxy();return t?t.getDataPercentWindow():void 0},getValueRange:function(t,e){if(null!=t||null!=e)return this.getAxisProxy(t,e).getDataValueWindow();var i=this.findRepresentativeAxisProxy();return i?i.getDataValueWindow():void 0},findRepresentativeAxisProxy:function(){var t=this._axisProxies;for(var e in t)if(t.hasOwnProperty(e)&&t[e].hostedBy(this))return t[e];for(var e in t)if(t.hasOwnProperty(e)&&!t[e].hostedBy(this))return t[e]}});t.exports=d},function(t,e,i){var n=i(57);t.exports=n.extend({type:"dataZoom",render:function(t,e,i,n){this.dataZoomModel=t,this.ecModel=e,this.api=i},getTargetInfo:function(){function t(t,e,i,n){for(var r,o=0;o<i.length;o++)if(i[o].model===t){r=i[o];break}r||i.push(r={model:t,axisModels:[],coordIndex:n}),r.axisModels.push(e)}var e=this.dataZoomModel,i=this.ecModel,n=[],r=[],o=[];return e.eachTargetAxis(function(e,a){var s=i.getComponent(e.axis,a);if(s){o.push(s);var l=s.get("gridIndex"),u=s.get("polarIndex");if(null!=l){var h=i.getComponent("grid",l);t(h,s,n,l)}else if(null!=u){var h=i.getComponent("polar",u);t(h,s,r,u)}}},this),{cartesians:n,polars:r,axisModels:o}}})},function(t,e,i){function n(t,e){var i=t[1]-t[0],n=e,r=i/n/2;t[0]+=r,t[1]-=r}var r=i(4),o=r.linearMap,a=i(1),s=[0,1],l=function(t,e,i){this.dim=t,this.scale=e,this._extent=i||[0,0],this.inverse=!1,this.onBand=!1};l.prototype={constructor:l,contain:function(t){var e=this._extent,i=Math.min(e[0],e[1]),n=Math.max(e[0],e[1]);return t>=i&&n>=t},containData:function(t){return this.contain(this.dataToCoord(t))},getExtent:function(){var t=this._extent.slice();return t},getPixelPrecision:function(t){return r.getPixelPrecision(t||this.scale.getExtent(),this._extent)},setExtent:function(t,e){var i=this._extent;i[0]=t,i[1]=e},dataToCoord:function(t,e){var i=this._extent,r=this.scale;return t=r.normalize(t),this.onBand&&"ordinal"===r.type&&(i=i.slice(),n(i,r.count())),o(t,s,i,e)},coordToData:function(t,e){var i=this._extent,r=this.scale;this.onBand&&"ordinal"===r.type&&(i=i.slice(),n(i,r.count()));var a=o(t,i,s,e);return this.scale.scale(a)},getTicksCoords:function(t){if(this.onBand&&!t){for(var e=this.getBands(),i=[],n=0;n<e.length;n++)i.push(e[n][0]);return e[n-1]&&i.push(e[n-1][1]),i}return a.map(this.scale.getTicks(),this.dataToCoord,this)},getLabelsCoords:function(){return a.map(this.scale.getTicks(),this.dataToCoord,this)},getBands:function(){for(var t=this.getExtent(),e=[],i=this.scale.count(),n=t[0],r=t[1],o=r-n,a=0;i>a;a++)e.push([o*a/i+n,o*(a+1)/i+n]);return e},getBandWidth:function(){var t=this._extent,e=this.scale.getExtent(),i=e[1]-e[0]+(this.onBand?1:0);0===i&&(i=1);var n=Math.abs(t[1]-t[0]);return Math.abs(n)/i}},t.exports=l},function(t,e,i){var n=i(1),r=i(21),o=r.parseClassType,a=0,s={},l="_";s.getUID=function(t){return[t||"",a++,Math.random()].join(l)},s.enableSubTypeDefaulter=function(t){var e={};return t.registerSubTypeDefaulter=function(t,i){t=o(t),e[t.main]=i},t.determineSubType=function(i,n){var r=n.type;if(!r){var a=o(i).main;t.hasSubTypes(i)&&e[a]&&(r=e[a](n))}return r},t},s.enableTopologicalTravel=function(t,e){function i(t){var i={},a=[];return n.each(t,function(s){var l=r(i,s),u=l.originalDeps=e(s),h=o(u,t);l.entryCount=h.length,0===l.entryCount&&a.push(s),n.each(h,function(t){n.indexOf(l.predecessor,t)<0&&l.predecessor.push(t);var e=r(i,t);n.indexOf(e.successor,t)<0&&e.successor.push(s)})}),{graph:i,noEntryList:a}}function r(t,e){return t[e]||(t[e]={predecessor:[],successor:[]}),t[e]}function o(t,e){var i=[];return n.each(t,function(t){n.indexOf(e,t)>=0&&i.push(t)}),i}t.topologicalTravel=function(t,e,r,o){function a(t){u[t].entryCount--,0===u[t].entryCount&&h.push(t)}function s(t){c[t]=!0,a(t)}if(t.length){var l=i(e),u=l.graph,h=l.noEntryList,c={};for(n.each(t,function(t){c[t]=!0});h.length;){var d=h.pop(),f=u[d],p=!!c[d];p&&(r.call(o,d,f.originalDeps.slice()),delete c[d]),n.each(f.successor,p?s:a)}n.each(c,function(){throw new Error("Circle dependency may exists")})}}},t.exports=s},function(t,e){function i(t){for(var e=0;t>=h;)e|=1&t,t>>=1;return t+e}function n(t,e,i,n){var o=e+1;if(o===i)return 1;if(n(t[o++],t[e])<0){for(;i>o&&n(t[o],t[o-1])<0;)o++;r(t,e,o)}else for(;i>o&&n(t[o],t[o-1])>=0;)o++;return o-e}function r(t,e,i){for(i--;i>e;){var n=t[e];t[e++]=t[i],t[i--]=n}}function o(t,e,i,n,r){for(n===e&&n++;i>n;n++){for(var o,a=t[n],s=e,l=n;l>s;)o=s+l>>>1,r(a,t[o])<0?l=o:s=o+1;var u=n-s;switch(u){case 3:t[s+3]=t[s+2];case 2:t[s+2]=t[s+1];case 1:t[s+1]=t[s];break;default:for(;u>0;)t[s+u]=t[s+u-1],u--}t[s]=a}}function a(t,e,i,n,r,o){var a=0,s=0,l=1;if(o(t,e[i+r])>0){for(s=n-r;s>l&&o(t,e[i+r+l])>0;)a=l,l=(l<<1)+1,0>=l&&(l=s);l>s&&(l=s),a+=r,l+=r}else{for(s=r+1;s>l&&o(t,e[i+r-l])<=0;)a=l,l=(l<<1)+1,0>=l&&(l=s);l>s&&(l=s);var u=a;a=r-l,l=r-u}for(a++;l>a;){var h=a+(l-a>>>1);o(t,e[i+h])>0?a=h+1:l=h}return l}function s(t,e,i,n,r,o){var a=0,s=0,l=1;if(o(t,e[i+r])<0){for(s=r+1;s>l&&o(t,e[i+r-l])<0;)a=l,l=(l<<1)+1,0>=l&&(l=s);l>s&&(l=s);var u=a;a=r-l,l=r-u}else{for(s=n-r;s>l&&o(t,e[i+r+l])>=0;)a=l,l=(l<<1)+1,0>=l&&(l=s);l>s&&(l=s),a+=r,l+=r}for(a++;l>a;){var h=a+(l-a>>>1);o(t,e[i+h])<0?l=h:a=h+1}return l}function l(t,e){function i(t,e){h[y]=t,f[y]=e,y+=1}function n(){for(;y>1;){var t=y-2;if(t>=1&&f[t-1]<=f[t]+f[t+1]||t>=2&&f[t-2]<=f[t]+f[t-1])f[t-1]<f[t+1]&&t--;else if(f[t]>f[t+1])break;o(t)}}function r(){for(;y>1;){var t=y-2;t>0&&f[t-1]<f[t+1]&&t--,o(t)}}function o(i){var n=h[i],r=f[i],o=h[i+1],c=f[i+1];f[i]=r+c,i===y-3&&(h[i+1]=h[i+2],f[i+1]=f[i+2]),y--;var d=s(t[o],t,n,r,0,e);n+=d,r-=d,0!==r&&(c=a(t[n+r-1],t,o,c,c-1,e),0!==c&&(c>=r?l(n,r,o,c):u(n,r,o,c)))}function l(i,n,r,o){var l=0;for(l=0;n>l;l++)x[l]=t[i+l];var u=0,h=r,d=i;if(t[d++]=t[h++],0!==--o){if(1===n){for(l=0;o>l;l++)t[d+l]=t[h+l];return void(t[d+o]=x[u])}for(var f,g,v,m=p;;){f=0,g=0,v=!1;do if(e(t[h],x[u])<0){if(t[d++]=t[h++],g++,f=0,0===--o){v=!0;break}}else if(t[d++]=x[u++],f++,g=0,1===--n){v=!0;break}while(m>(f|g));if(v)break;do{if(f=s(t[h],x,u,n,0,e),0!==f){for(l=0;f>l;l++)t[d+l]=x[u+l];if(d+=f,u+=f,n-=f,1>=n){v=!0;break}}if(t[d++]=t[h++],0===--o){v=!0;break}if(g=a(x[u],t,h,o,0,e),0!==g){for(l=0;g>l;l++)t[d+l]=t[h+l];if(d+=g,h+=g,o-=g,0===o){v=!0;break}}if(t[d++]=x[u++],1===--n){v=!0;break}m--}while(f>=c||g>=c);if(v)break;0>m&&(m=0),m+=2}if(p=m,1>p&&(p=1),1===n){for(l=0;o>l;l++)t[d+l]=t[h+l];t[d+o]=x[u]}else{if(0===n)throw new Error;for(l=0;n>l;l++)t[d+l]=x[u+l]}}else for(l=0;n>l;l++)t[d+l]=x[u+l]}function u(i,n,r,o){var l=0;for(l=0;o>l;l++)x[l]=t[r+l];var u=i+n-1,h=o-1,d=r+o-1,f=0,g=0;if(t[d--]=t[u--],0!==--n){if(1===o){for(d-=n,u-=n,g=d+1,f=u+1,l=n-1;l>=0;l--)t[g+l]=t[f+l];return void(t[d]=x[h])}for(var v=p;;){var m=0,y=0,_=!1;do if(e(x[h],t[u])<0){if(t[d--]=t[u--],m++,y=0,0===--n){_=!0;break}}else if(t[d--]=x[h--],y++,m=0,1===--o){_=!0;break}while(v>(m|y));if(_)break;do{if(m=n-s(x[h],t,i,n,n-1,e),0!==m){for(d-=m,u-=m,n-=m,g=d+1,f=u+1,l=m-1;l>=0;l--)t[g+l]=t[f+l];if(0===n){_=!0;break}}if(t[d--]=x[h--],1===--o){_=!0;break}if(y=o-a(t[u],x,0,o,o-1,e),0!==y){for(d-=y,h-=y,o-=y,g=d+1,f=h+1,l=0;y>l;l++)t[g+l]=x[f+l];if(1>=o){_=!0;break}}if(t[d--]=t[u--],0===--n){_=!0;break}v--}while(m>=c||y>=c);if(_)break;0>v&&(v=0),v+=2}if(p=v,1>p&&(p=1),1===o){for(d-=n,u-=n,g=d+1,f=u+1,l=n-1;l>=0;l--)t[g+l]=t[f+l];t[d]=x[h]}else{if(0===o)throw new Error;for(f=d-(o-1),l=0;o>l;l++)t[f+l]=x[l]}}else for(f=d-(o-1),l=0;o>l;l++)t[f+l]=x[l]}var h,f,p=c,g=0,v=d,m=0,y=0;g=t.length,2*d>g&&(v=g>>>1);var x=[];m=120>g?5:1542>g?10:119151>g?19:40,h=[],f=[],this.mergeRuns=n,this.forceMergeRuns=r,this.pushRun=i}function u(t,e,r,a){r||(r=0),a||(a=t.length);var s=a-r;if(!(2>s)){var u=0;if(h>s)return u=n(t,r,a,e),void o(t,r,a,r+u,e);var c=new l(t,e),d=i(s);do{if(u=n(t,r,a,e),d>u){var f=s;f>d&&(f=d),o(t,r,r+f,r+u,e),u=f}c.pushRun(r,u),c.mergeRuns(),s-=u,r+=u}while(0!==s);c.forceMergeRuns()}}var h=32,c=7,d=256;t.exports=u},function(t,e){"use strict";function i(t){return t}function n(t,e,n,r){this._old=t,this._new=e,this._oldKeyGetter=n||i,this._newKeyGetter=r||i}function r(t,e,i,n){for(var r=0;r<t.length;r++){var o=n(t[r],r),a=e[o];null==a?(i.push(o),e[o]=r):(a.length||(e[o]=a=[a]),a.push(r))}}n.prototype={constructor:n,add:function(t){return this._add=t,this},update:function(t){return this._update=t,this},remove:function(t){return this._remove=t,this},execute:function(){var t,e=this._old,i=this._new,n=this._oldKeyGetter,o=this._newKeyGetter,a={},s={},l=[],u=[];for(r(e,a,l,n),r(i,s,u,o),t=0;t<e.length;t++){var h=l[t],c=s[h];if(null!=c){var d=c.length;d?(1===d&&(s[h]=null),c=c.unshift()):s[h]=null,this._update&&this._update(c,t)}else this._remove&&this._remove(t)}for(var t=0;t<u.length;t++){var h=u[t];if(s.hasOwnProperty(h)){var c=s[h];if(null==c)continue;if(c.length)for(var f=0,d=c.length;d>f;f++)this._add&&this._add(c[f]);else this._add&&this._add(c)}}}},t.exports=n},function(t,e){t.exports=function(t,e,i,n,r){n.eachRawSeriesByType(t,function(t){var r=t.getData(),o=t.get("symbol")||e,a=t.get("symbolSize");r.setVisual({legendSymbol:i||o,symbol:o,symbolSize:a}),n.isSeriesFiltered(t)||("function"==typeof a&&r.each(function(e){var i=t.getRawValue(e),n=t.getDataParams(e);r.setItemVisual(e,"symbolSize",a(i,n))}),r.each(function(t){var e=r.getItemModel(t),i=e.getShallow("symbol",!0),n=e.getShallow("symbolSize",!0);null!=i&&r.setItemVisual(t,"symbol",i),null!=n&&r.setItemVisual(t,"symbolSize",n)}))})}},function(t,e,i){var n=i(33);t.exports=function(){if(0!==n.debugMode)if(1==n.debugMode)for(var t in arguments)throw new Error(arguments[t]);else if(n.debugMode>1)for(var t in arguments)console.log(arguments[t])}},function(t,e,i){function n(t){r.call(this,t)}var r=i(37),o=i(7),a=i(1),s=i(147),l=new s(50);n.prototype={constructor:n,type:"image",brush:function(t,e){var i,n=this.style,r=n.image;if(n.bind(t,this,e),i="string"==typeof r?this._image:r,!i&&r){var o=l.get(r);if(!o)return i=new Image,i.onload=function(){i.onload=null;for(var t=0;t<o.pending.length;t++)o.pending[t].dirty()},o={image:i,pending:[this]},i.src=r,l.put(r,o),void(this._image=i);if(i=o.image,this._image=i,!i.width||!i.height)return void o.pending.push(this)}if(i){var a=n.width||i.width,s=n.height||i.height,u=n.x||0,h=n.y||0;if(!i.width||!i.height)return;if(this.setTransform(t),n.sWidth&&n.sHeight){var c=n.sx||0,d=n.sy||0;t.drawImage(i,c,d,n.sWidth,n.sHeight,u,h,a,s)}else if(n.sx&&n.sy){var c=n.sx,d=n.sy,f=a-c,p=s-d;t.drawImage(i,c,d,f,p,u,h,a,s)}else t.drawImage(i,u,h,a,s);null==n.width&&(n.width=a),null==n.height&&(n.height=s),this.restoreTransform(t),null!=n.text&&this.drawRectText(t,this.getBoundingRect())}},getBoundingRect:function(){var t=this.style;return this._rect||(this._rect=new o(t.x||0,t.y||0,t.width||0,t.height||0)),this._rect}},a.inherits(n,r),t.exports=n},function(t,e,i){function n(t){return t instanceof Array||(t=[+t,+t]),t}function r(t,e,i){l.Group.call(this),this.updateData(t,e,i)}function o(t,e){this.parent.drift(t,e)}var a=i(1),s=i(26),l=i(3),u=i(4),h=r.prototype;h._createSymbol=function(t,e,i){this.removeAll();var r=e.hostModel,a=e.getItemVisual(i,"color"),u=s.createSymbol(t,-.5,-.5,1,1,a);u.attr({z2:100,culling:!0,scale:[0,0]}),u.drift=o;var h=n(e.getItemVisual(i,"symbolSize"));l.initProps(u,{scale:h},r,i),this._symbolType=t,this.add(u)},h.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(t)},h.getScale=function(){return this.childAt(0).scale},h.highlight=function(){this.childAt(0).trigger("emphasis");},h.downplay=function(){this.childAt(0).trigger("normal")},h.setZ=function(t,e){var i=this.childAt(0);i.zlevel=t,i.z=e},h.setDraggable=function(t){var e=this.childAt(0);e.draggable=t,e.cursor=t?"move":"pointer"},h.updateData=function(t,e,i){this.silent=!1;var r=t.getItemVisual(e,"symbol")||"circle",o=t.hostModel,a=n(t.getItemVisual(e,"symbolSize"));if(r!==this._symbolType)this._createSymbol(r,t,e);else{var s=this.childAt(0);l.updateProps(s,{scale:a},o,e)}this._updateCommon(t,e,a,i),this._seriesModel=o};var c=["itemStyle","normal"],d=["itemStyle","emphasis"],f=["label","normal"],p=["label","emphasis"];h._updateCommon=function(t,e,i,r){var o=this.childAt(0),s=t.hostModel,h=t.getItemVisual(e,"color");"image"!==o.type&&o.useStyle({strokeNoScale:!0}),r=r||null;var g=r&&r.itemStyle,v=r&&r.hoverItemStyle,m=r&&r.symbolRotate,y=r&&r.symbolOffset,x=r&&r.labelModel,_=r&&r.hoverLabelModel,b=r&&r.hoverAnimation;if(!r||t.hasItemOption){var w=t.getItemModel(e);g=w.getModel(c).getItemStyle(["color"]),v=w.getModel(d).getItemStyle(),m=w.getShallow("symbolRotate"),y=w.getShallow("symbolOffset"),x=w.getModel(f),_=w.getModel(p),b=w.getShallow("hoverAnimation")}else v=a.extend({},v);var S=o.style;o.rotation=(m||0)*Math.PI/180||0,y&&o.attr("position",[u.parsePercent(y[0],i[0]),u.parsePercent(y[1],i[1])]),o.setColor(h),o.setStyle(g);var M=t.getItemVisual(e,"opacity");null!=M&&(S.opacity=M);for(var A,I,T=t.dimensions.slice();T.length&&(A=T.pop(),I=t.getDimensionInfo(A).type,"ordinal"===I||"time"===I););null!=A&&x.getShallow("show")?(l.setText(S,x,h),S.text=a.retrieve(s.getFormattedLabel(e,"normal"),t.get(A,e))):S.text="",null!=A&&_.getShallow("show")?(l.setText(v,_,h),v.text=a.retrieve(s.getFormattedLabel(e,"emphasis"),t.get(A,e))):v.text="";var L=n(t.getItemVisual(e,"symbolSize"));if(o.off("mouseover").off("mouseout").off("emphasis").off("normal"),l.setHoverStyle(o,v),b&&s.ifEnableAnimation()){var C=function(){var t=L[1]/L[0];this.animateTo({scale:[Math.max(1.1*L[0],L[0]+3),Math.max(1.1*L[1],L[1]+3*t)]},400,"elasticOut")},D=function(){this.animateTo({scale:L},400,"elasticOut")};o.on("mouseover",C).on("mouseout",D).on("emphasis",C).on("normal",D)}},h.fadeOut=function(t){var e=this.childAt(0);this.silent=!0,e.style.text="",l.updateProps(e,{scale:[0,0]},this._seriesModel,this.dataIndex,t)},a.inherits(r,l.Group),t.exports=r},function(t,e,i){function n(t){var e={componentType:t.mainType};return e[t.mainType+"Index"]=t.componentIndex,e}function r(t,e,i){var n,r,o=d(e-t.rotation);return f(o)?(r=i>0?"top":"bottom",n="center"):f(o-m)?(r=i>0?"bottom":"top",n="center"):(r="middle",n=o>0&&m>o?i>0?"right":"left":i>0?"left":"right"),{rotation:o,textAlign:n,verticalAlign:r}}function o(t,e,i,n){var r,o,a=d(i-t.rotation),s=n[0]>n[1],l="start"===e&&!s||"start"!==e&&s;return f(a-m/2)?(o=l?"bottom":"top",r="center"):f(a-1.5*m)?(o=l?"top":"bottom",r="center"):(o="middle",r=1.5*m>a&&a>m/2?l?"left":"right":l?"right":"left"),{rotation:a,textAlign:r,verticalAlign:o}}function a(t){var e=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||e&&e.show)}var s=i(1),l=i(9),u=i(3),h=i(8),c=i(4),d=c.remRadian,f=c.isRadianAroundZero,p=i(5),g=p.applyTransform,v=s.retrieve,m=Math.PI,y=function(t,e){this.opt=e,this.axisModel=t,s.defaults(e,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0}),this.group=new u.Group;var i=new u.Group({position:e.position.slice(),rotation:e.rotation});i.updateTransform(),this._transform=i.transform,this._dumbGroup=i};y.prototype={constructor:y,hasBuilder:function(t){return!!x[t]},add:function(t){x[t].call(this)},getGroup:function(){return this.group}};var x={axisLine:function(){var t=this.opt,e=this.axisModel;if(e.get("axisLine.show")){var i=this.axisModel.axis.getExtent(),n=this._transform,r=[i[0],0],o=[i[1],0];n&&(g(r,r,n),g(o,o,n)),this.group.add(new u.Line(u.subPixelOptimizeLine({anid:"line",shape:{x1:r[0],y1:r[1],x2:o[0],y2:o[1]},style:s.extend({lineCap:"round"},e.getModel("axisLine.lineStyle").getLineStyle()),strokeContainThreshold:t.strokeContainThreshold||5,silent:!0,z2:1})))}},axisTick:function(){var t=this.axisModel;if(t.get("axisTick.show"))for(var e=t.axis,i=t.getModel("axisTick"),n=this.opt,r=i.getModel("lineStyle"),o=i.get("length"),a=b(i,n.labelInterval),l=e.getTicksCoords(i.get("alignWithLabel")),h=e.scale.getTicks(),c=[],d=[],f=this._transform,p=0;p<l.length;p++)if(!_(e,p,a)){var v=l[p];c[0]=v,c[1]=0,d[0]=v,d[1]=n.tickDirection*o,f&&(g(c,c,f),g(d,d,f)),this.group.add(new u.Line(u.subPixelOptimizeLine({anid:"tick_"+h[p],shape:{x1:c[0],y1:c[1],x2:d[0],y2:d[1]},style:s.defaults(r.getLineStyle(),{stroke:t.get("axisLine.lineStyle.color")}),z2:2,silent:!0})))}},axisLabel:function(){function t(t,e){var i=t&&t.getBoundingRect().clone(),n=e&&e.getBoundingRect().clone();return i&&n?(i.applyTransform(t.getLocalTransform()),n.applyTransform(e.getLocalTransform()),i.intersect(n)):void 0}var e=this.opt,i=this.axisModel,o=v(e.axisLabelShow,i.get("axisLabel.show"));if(o){var s=i.axis,l=i.getModel("axisLabel"),c=l.getModel("textStyle"),d=l.get("margin"),f=s.scale.getTicks(),p=i.getFormattedLabels(),g=v(e.labelRotation,l.get("rotate"))||0;g=g*m/180;for(var y=r(e,g,e.labelDirection),x=i.get("data"),b=[],w=a(i),S=i.get("triggerEvent"),M=0;M<f.length;M++)if(!_(s,M,e.labelInterval)){var A=c;x&&x[M]&&x[M].textStyle&&(A=new h(x[M].textStyle,c,i.ecModel));var I=A.getTextColor()||i.get("axisLine.lineStyle.color"),T=s.dataToCoord(f[M]),L=[T,e.labelOffset+e.labelDirection*d],C=s.scale.getLabel(f[M]),D=new u.Text({anid:"label_"+f[M],style:{text:p[M],textAlign:A.get("align",!0)||y.textAlign,textVerticalAlign:A.get("baseline",!0)||y.verticalAlign,textFont:A.getFont(),fill:"function"==typeof I?I(C):I},position:L,rotation:y.rotation,silent:w,z2:10});S&&(D.eventData=n(i),D.eventData.targetType="axisLabel",D.eventData.value=C),this._dumbGroup.add(D),D.updateTransform(),b.push(D),this.group.add(D),D.decomposeTransform()}if("category"!==s.type){if(i.getMin?i.getMin():i.get("min")){var P=b[0],k=b[1];t(P,k)&&(P.ignore=!0)}if(i.getMax?i.getMax():i.get("max")){var z=b[b.length-1],O=b[b.length-2];t(O,z)&&(z.ignore=!0)}}}},axisName:function(){var t=this.opt,e=this.axisModel,i=v(t.axisName,e.get("name"));if(i){var h,c=e.get("nameLocation"),d=t.nameDirection,f=e.getModel("nameTextStyle"),p=e.get("nameGap")||0,g=this.axisModel.axis.getExtent(),y=g[0]>g[1]?-1:1,x=["start"===c?g[0]-y*p:"end"===c?g[1]+y*p:(g[0]+g[1])/2,"middle"===c?t.labelOffset+d*p:0],_=e.get("nameRotate");null!=_&&(_=_*m/180);var b;"middle"===c?h=r(t,null!=_?_:t.rotation,d):(h=o(t,c,_||0,g),b=t.axisNameAvailableWidth,null!=b&&(b=Math.abs(b/Math.sin(h.rotation)),!isFinite(b)&&(b=null)));var w=f.getFont(),S=e.get("nameTruncate",!0)||{},M=S.ellipsis,A=v(S.maxWidth,b),I=null!=M&&null!=A?l.truncateText(i,A,w,M,{minChar:2,placeholder:S.placeholder}):i,T=e.get("tooltip",!0),L=e.mainType,C={componentType:L,name:i,$vars:["name"]};C[L+"Index"]=e.componentIndex;var D=new u.Text({anid:"name",__fullText:i,__truncatedText:I,style:{text:I,textFont:w,fill:f.getTextColor()||e.get("axisLine.lineStyle.color"),textAlign:h.textAlign,textVerticalAlign:h.verticalAlign},position:x,rotation:h.rotation,silent:a(e),z2:1,tooltip:T&&T.show?s.extend({content:i,formatter:function(){return i},formatterParams:C},T):null});e.get("triggerEvent")&&(D.eventData=n(e),D.eventData.targetType="axisName",D.eventData.name=i),this._dumbGroup.add(D),D.updateTransform(),this.group.add(D),D.decomposeTransform()}}},_=y.ifIgnoreOnTick=function(t,e,i){var n,r=t.scale;return"ordinal"===r.type&&("function"==typeof i?(n=r.getTicks()[e],!i(n,r.getLabel(n))):e%(i+1))},b=y.getInterval=function(t,e){var i=t.get("interval");return null!=i&&"auto"!=i||(i=e),i};t.exports=y},function(t,e,i){function n(t){return a.isObject(t)&&null!=t.value?t.value:t}function r(){return"category"===this.get("type")&&a.map(this.get("data"),n)}function o(){return s.getFormattedLabels(this.axis,this.get("axisLabel.formatter"))}var a=i(1),s=i(22);t.exports={getFormattedLabels:o,getCategories:r}},function(t,e,i){var n=i(80),r=i(1),o=i(11),a=i(13),s=["value","category","time","log"];t.exports=function(t,e,i,l){r.each(s,function(o){e.extend({type:t+"Axis."+o,mergeDefaultAndTheme:function(e,n){var s=this.layoutMode,l=s?a.getLayoutParams(e):{},u=n.getTheme();r.merge(e,u.get(o+"Axis")),r.merge(e,this.getDefaultOption()),e.type=i(t,e),s&&a.mergeLayoutParam(e,l,s)},defaultOption:r.mergeAll([{},n[o+"Axis"],l],!0)})}),o.registerSubTypeDefaulter(t+"Axis",r.curry(i,t))}},function(t,e,i){"use strict";function n(t,e){return e.type||(e.data?"category":"value")}var r=i(11),o=i(1),a=i(52),s=r.extend({type:"cartesian2dAxis",axis:null,init:function(){s.superApply(this,"init",arguments),this._resetRange()},mergeOption:function(){s.superApply(this,"mergeOption",arguments),this._resetRange()},restoreData:function(){s.superApply(this,"restoreData",arguments),this._resetRange()},setRange:function(t,e){this.option.rangeStart=t,this.option.rangeEnd=e},getMin:function(){var t=this.option;return null!=t.rangeStart?t.rangeStart:t.min},getMax:function(){var t=this.option;return null!=t.rangeEnd?t.rangeEnd:t.max},getNeedCrossZero:function(){var t=this.option;return null!=t.rangeStart||null!=t.rangeEnd?!1:!t.scale},_resetRange:function(){this.option.rangeStart=this.option.rangeEnd=null}});o.merge(s.prototype,i(51));var l={gridIndex:0,offset:0};a("x",s,n,l),a("y",s,n,l),t.exports=s},function(t,e,i){function n(t,e,i){return i.getComponent("grid",t.get("gridIndex"))===e}function r(t){var e,i=t.model,n=i.getFormattedLabels(),r=1,o=n.length;o>40&&(r=Math.ceil(o/40));for(var a=0;o>a;a+=r)if(!t.isLabelIgnored(a)){var s=i.getTextRect(n[a]);e?e.union(s):e=s}return e}function o(t,e,i){this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this._initCartesian(t,e,i),this._model=t}function a(t,e){var i=t.getExtent(),n=i[0]+i[1];t.toGlobalCoord="x"===t.dim?function(t){return t+e}:function(t){return n-t+e},t.toLocalCoord="x"===t.dim?function(t){return t-e}:function(t){return n-t+e}}var s=i(13),l=i(22),u=i(1),h=i(116),c=i(114),d=u.each,f=l.ifAxisCrossZero,p=l.niceScaleExtent;i(117);var g=o.prototype;g.type="grid",g.getRect=function(){return this._rect},g.update=function(t,e){function i(t){var e=n[t];for(var i in e){var r=e[i];if(r&&("category"===r.type||!f(r)))return!0}return!1}var n=this._axesMap;this._updateScale(t,this._model),d(n.x,function(t){p(t,t.model)}),d(n.y,function(t){p(t,t.model)}),d(n.x,function(t){i("y")&&(t.onZero=!1)}),d(n.y,function(t){i("x")&&(t.onZero=!1)}),this.resize(this._model,e)},g.resize=function(t,e){function i(){d(o,function(t){var e=t.isHorizontal(),i=e?[0,n.width]:[0,n.height],r=t.inverse?1:0;t.setExtent(i[r],i[1-r]),a(t,e?n.x:n.y)})}var n=s.getLayoutRect(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()});this._rect=n;var o=this._axesList;i(),t.get("containLabel")&&(d(o,function(t){if(!t.model.get("axisLabel.inside")){var e=r(t);if(e){var i=t.isHorizontal()?"height":"width",o=t.model.get("axisLabel.margin");n[i]-=e[i]+o,"top"===t.position?n.y+=e.height+o:"left"===t.position&&(n.x+=e.width+o)}}}),i())},g.getAxis=function(t,e){var i=this._axesMap[t];if(null!=i){if(null==e)for(var n in i)return i[n];return i[e]}},g.getCartesian=function(t,e){if(null!=t&&null!=e){var i="x"+t+"y"+e;return this._coordsMap[i]}for(var n=0,r=this._coordsList;n<r.length;n++)if(r[n].getAxis("x").index===t||r[n].getAxis("y").index===e)return r[n]},g._initCartesian=function(t,e,i){function r(i){return function(r,u){if(n(r,t,e)){var h=r.get("position");"x"===i?"top"!==h&&"bottom"!==h&&(h="bottom",o[h]&&(h="top"===h?"bottom":"top")):"left"!==h&&"right"!==h&&(h="left",o[h]&&(h="left"===h?"right":"left")),o[h]=!0;var d=new c(i,l.createScaleByModel(r),[0,0],r.get("type"),h),f="category"===d.type;d.onBand=f&&r.get("boundaryGap"),d.inverse=r.get("inverse"),d.onZero=r.get("axisLine.onZero"),r.axis=d,d.model=r,d.grid=this,d.index=u,this._axesList.push(d),a[i][u]=d,s[i]++}}}var o={left:!1,right:!1,top:!1,bottom:!1},a={x:{},y:{}},s={x:0,y:0};return e.eachComponent("xAxis",r("x"),this),e.eachComponent("yAxis",r("y"),this),s.x&&s.y?(this._axesMap=a,void d(a.x,function(t,e){d(a.y,function(i,n){var r="x"+e+"y"+n,o=new h(r);o.grid=this,this._coordsMap[r]=o,this._coordsList.push(o),o.addAxis(t),o.addAxis(i)},this)},this)):(this._axesMap={},void(this._axesList=[]))},g._updateScale=function(t,e){function i(t,e,i){d(i.coordDimToDataDim(e.dim),function(i){e.scale.unionExtent(t.getDataExtent(i,"ordinal"!==e.scale.type))})}u.each(this._axesList,function(t){t.scale.setExtent(1/0,-(1/0))}),t.eachSeries(function(r){if("cartesian2d"===r.get("coordinateSystem")){var o=r.get("xAxisIndex"),a=r.get("yAxisIndex"),s=t.getComponent("xAxis",o),l=t.getComponent("yAxis",a);if(!n(s,e,t)||!n(l,e,t))return;var u=this.getCartesian(o,a),h=r.getData(),c=u.getAxis("x"),d=u.getAxis("y");"list"===h.type&&(i(h,c,r),i(h,d,r))}},this)},o.create=function(t,e){var i=[];return t.eachComponent("grid",function(n,r){var a=new o(n,t,e);a.name="grid_"+r,a.resize(n,e),n.coordinateSystem=a,i.push(a)}),t.eachSeries(function(e){if("cartesian2d"===e.get("coordinateSystem")){var n=e.get("xAxisIndex"),r=e.get("yAxisIndex"),o=t.getComponent("xAxis",n),a=i[o.get("gridIndex")];e.coordinateSystem=a.getCartesian(n,r)}}),i},o.dimensions=h.prototype.dimensions,i(23).register("cartesian2d",o),t.exports=o},function(t,e){t.exports=function(t,e){e.eachSeriesByType(t,function(t){var e=t.getData(),i=t.coordinateSystem;if(i){var n=i.dimensions;"singleAxis"===i.type?e.each(n[0],function(t,n){e.setItemLayout(n,isNaN(t)?[NaN,NaN]:i.dataToPoint(t))}):e.each(n,function(t,n,r){e.setItemLayout(r,isNaN(t)||isNaN(n)?[NaN,NaN]:i.dataToPoint([t,n]))},!0)}})}},function(t,e){t.exports={clearColorPalette:function(){this._colorIdx=0,this._colorNameMap={}},getColorFromPalette:function(t,e){e=e||this;var i=e._colorIdx||0,n=e._colorNameMap||(e._colorNameMap={});if(n[t])return n[t];var r=this.get("color",!0)||[];if(r.length){var o=r[i];return t&&(n[t]=o),e._colorIdx=(i+1)%r.length,o}}}},function(t,e,i){var n=i(34),r=i(43),o=i(21),a=function(){this.group=new n,this.uid=r.getUID("viewComponent")};a.prototype={constructor:a,init:function(t,e){},render:function(t,e,i,n){},dispose:function(){}};var s=a.prototype;s.updateView=s.updateLayout=s.updateVisual=function(t,e,i,n){},o.enableClassExtend(a),o.enableClassManagement(a,{registerWhenExtend:!0}),t.exports=a},function(t,e,i){"use strict";var n=i(62),r=i(20),o=i(86),a=i(163),s=i(1),l=function(t){o.call(this,t),r.call(this,t),a.call(this,t),this.id=t.id||n()};l.prototype={type:"element",name:"",__zr:null,ignore:!1,clipPath:null,drift:function(t,e){switch(this.draggable){case"horizontal":e=0;break;case"vertical":t=0}var i=this.transform;i||(i=this.transform=[1,0,0,1,0,0]),i[4]+=t,i[5]+=e,this.decomposeTransform(),this.dirty(!1)},beforeUpdate:function(){},afterUpdate:function(){},update:function(){this.updateTransform()},traverse:function(t,e){},attrKV:function(t,e){if("position"===t||"scale"===t||"origin"===t){if(e){var i=this[t];i||(i=this[t]=[]),i[0]=e[0],i[1]=e[1]}}else this[t]=e},hide:function(){this.ignore=!0,this.__zr&&this.__zr.refresh()},show:function(){this.ignore=!1,this.__zr&&this.__zr.refresh()},attr:function(t,e){if("string"==typeof t)this.attrKV(t,e);else if(s.isObject(t))for(var i in t)t.hasOwnProperty(i)&&this.attrKV(i,t[i]);return this.dirty(!1),this},setClipPath:function(t){var e=this.__zr;e&&t.addSelfToZr(e),this.clipPath&&this.clipPath!==t&&this.removeClipPath(),this.clipPath=t,t.__zr=e,t.__clipTarget=this,this.dirty(!1)},removeClipPath:function(){var t=this.clipPath;t&&(t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__clipTarget=null,this.clipPath=null,this.dirty(!1))},addSelfToZr:function(t){this.__zr=t;var e=this.animators;if(e)for(var i=0;i<e.length;i++)t.animation.addAnimator(e[i]);this.clipPath&&this.clipPath.addSelfToZr(t)},removeSelfFromZr:function(t){this.__zr=null;var e=this.animators;if(e)for(var i=0;i<e.length;i++)t.animation.removeAnimator(e[i]);this.clipPath&&this.clipPath.removeSelfFromZr(t)}},s.mixin(l,a),s.mixin(l,o),s.mixin(l,r),t.exports=l},function(t,e,i){function n(t,e){return t[e]}function r(t,e,i){t[e]=i}function o(t,e,i){return(e-t)*i+t}function a(t,e,i){return i>.5?e:t}function s(t,e,i,n,r){var a=t.length;if(1==r)for(var s=0;a>s;s++)n[s]=o(t[s],e[s],i);else for(var l=t[0].length,s=0;a>s;s++)for(var u=0;l>u;u++)n[s][u]=o(t[s][u],e[s][u],i)}function l(t,e,i){var n=t.length,r=e.length;if(n!==r){var o=n>r;if(o)t.length=r;else for(var a=n;r>a;a++)t.push(1===i?e[a]:x.call(e[a]))}for(var s=t[0]&&t[0].length,a=0;a<t.length;a++)if(1===i)isNaN(t[a])&&(t[a]=e[a]);else for(var l=0;s>l;l++)isNaN(t[a][l])&&(t[a][l]=e[a][l])}function u(t,e,i){if(t===e)return!0;var n=t.length;if(n!==e.length)return!1;if(1===i){for(var r=0;n>r;r++)if(t[r]!==e[r])return!1}else for(var o=t[0].length,r=0;n>r;r++)for(var a=0;o>a;a++)if(t[r][a]!==e[r][a])return!1;return!0}function h(t,e,i,n,r,o,a,s,l){var u=t.length;if(1==l)for(var h=0;u>h;h++)s[h]=c(t[h],e[h],i[h],n[h],r,o,a);else for(var d=t[0].length,h=0;u>h;h++)for(var f=0;d>f;f++)s[h][f]=c(t[h][f],e[h][f],i[h][f],n[h][f],r,o,a)}function c(t,e,i,n,r,o,a){var s=.5*(i-t),l=.5*(n-e);return(2*(e-i)+s+l)*a+(-3*(e-i)-2*s-l)*o+s*r+e}function d(t){if(y(t)){var e=t.length;if(y(t[0])){for(var i=[],n=0;e>n;n++)i.push(x.call(t[n]));return i}return x.call(t)}return t}function f(t){return t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.floor(t[2]),"rgba("+t.join(",")+")"}function p(t,e,i,n,r){var d=t._getter,p=t._setter,m="spline"===e,x=n.length;if(x){var _,b=n[0].value,w=y(b),S=!1,M=!1,A=w&&y(b[0])?2:1;n.sort(function(t,e){return t.time-e.time}),_=n[x-1].time;for(var I=[],T=[],L=n[0].value,C=!0,D=0;x>D;D++){I.push(n[D].time/_);var P=n[D].value;if(w&&u(P,L,A)||!w&&P===L||(C=!1),L=P,"string"==typeof P){var k=v.parse(P);k?(P=k,S=!0):M=!0}T.push(P)}if(!C){for(var z=T[x-1],D=0;x-1>D;D++)w?l(T[D],z,A):!isNaN(T[D])||isNaN(z)||M||S||(T[D]=z);w&&l(d(t._target,r),z,A);var O,E,R,V,N,B,G=0,F=0;if(S)var H=[0,0,0,0];var W=function(t,e){var i;if(F>e){for(O=Math.min(G+1,x-1),i=O;i>=0&&!(I[i]<=e);i--);i=Math.min(i,x-2)}else{for(i=G;x>i&&!(I[i]>e);i++);i=Math.min(i-1,x-2)}G=i,F=e;var n=I[i+1]-I[i];if(0!==n)if(E=(e-I[i])/n,m)if(V=T[i],R=T[0===i?i:i-1],N=T[i>x-2?x-1:i+1],B=T[i>x-3?x-1:i+2],w)h(R,V,N,B,E,E*E,E*E*E,d(t,r),A);else{var l;if(S)l=h(R,V,N,B,E,E*E,E*E*E,H,1),l=f(H);else{if(M)return a(V,N,E);l=c(R,V,N,B,E,E*E,E*E*E)}p(t,r,l)}else if(w)s(T[i],T[i+1],E,d(t,r),A);else{var l;if(S)s(T[i],T[i+1],E,H,1),l=f(H);else{if(M)return a(T[i],T[i+1],E);l=o(T[i],T[i+1],E)}p(t,r,l)}},Z=new g({target:t._target,life:_,loop:t._loop,delay:t._delay,onframe:W,ondestroy:i});return e&&"spline"!==e&&(Z.easing=e),Z}}}var g=i(141),v=i(18),m=i(1),y=m.isArrayLike,x=Array.prototype.slice,_=function(t,e,i,o){this._tracks={},this._target=t,this._loop=e||!1,this._getter=i||n,this._setter=o||r,this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[]};_.prototype={when:function(t,e){var i=this._tracks;for(var n in e){if(!i[n]){i[n]=[];var r=this._getter(this._target,n);if(null==r)continue;0!==t&&i[n].push({time:0,value:d(r)})}i[n].push({time:t,value:e[n]})}return this},during:function(t){return this._onframeList.push(t),this},_doneCallback:function(){this._tracks={},this._clipList.length=0;for(var t=this._doneList,e=t.length,i=0;e>i;i++)t[i].call(this)},start:function(t){var e,i=this,n=0,r=function(){n--,n||i._doneCallback()};for(var o in this._tracks){var a=p(this,t,r,this._tracks[o],o);a&&(this._clipList.push(a),n++,this.animation&&this.animation.addClip(a),e=a)}if(e){var s=e.onframe;e.onframe=function(t,e){s(t,e);for(var n=0;n<i._onframeList.length;n++)i._onframeList[n](t,e)}}return n||this._doneCallback(),this},stop:function(t){for(var e=this._clipList,i=this.animation,n=0;n<e.length;n++){var r=e[n];t&&r.onframe(this._target,1),i&&i.removeClip(r)}e.length=0},delay:function(t){return this._delay=t,this},done:function(t){return t&&this._doneList.push(t),this},getClips:function(){return this._clipList}},t.exports=_},function(t,e){t.exports="undefined"!=typeof window&&(window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(t){setTimeout(t,16)}},function(t,e){var i=2*Math.PI;t.exports={normalizeRadian:function(t){return t%=i,0>t&&(t+=i),t}}},function(t,e){var i=2311;t.exports=function(){return i++}},function(t,e){var i=function(t,e){this.image=t,this.repeat=e,this.type="pattern"};i.prototype.getCanvasPattern=function(t){return this._canvasPattern||(this._canvasPattern=t.createPattern(this.image,this.repeat))},t.exports=i},function(t,e){function i(t,e,i){var n=e.x,r=e.x2,o=e.y,a=e.y2;e.global||(n=n*i.width+i.x,r=r*i.width+i.x,o=o*i.height+i.y,a=a*i.height+i.y);var s=t.createLinearGradient(n,o,r,a);return s}function n(t,e,i){var n=i.width,r=i.height,o=Math.min(n,r),a=e.x,s=e.y,l=e.r;e.global||(a=a*n+i.x,s=s*r+i.y,l*=o);var u=t.createRadialGradient(a,s,0,a,s,l);return u}var r=[["shadowBlur",0],["shadowOffsetX",0],["shadowOffsetY",0],["shadowColor","#000"],["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]],o=function(t){this.extendFrom(t)};o.prototype={constructor:o,fill:"#000000",stroke:null,opacity:1,lineDash:null,lineDashOffset:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,lineWidth:1,strokeNoScale:!1,text:null,textFill:"#000",textStroke:null,textPosition:"inside",textBaseline:null,textAlign:null,textVerticalAlign:null,textDistance:5,textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,blend:null,bind:function(t,e,i){for(var n=this,o=i&&i.style,a=!o,s=0;s<r.length;s++){var l=r[s],u=l[0];(a||n[u]!==o[u])&&(t[u]=n[u]||l[1])}if((a||n.fill!==o.fill)&&(t.fillStyle=n.fill),(a||n.stroke!==o.stroke)&&(t.strokeStyle=n.stroke),(a||n.opacity!==o.opacity)&&(t.globalAlpha=null==n.opacity?1:n.opacity),(a||n.blend!==o.blend)&&(t.globalCompositeOperation=n.blend||"source-over"),this.hasStroke()){var h=n.lineWidth;t.lineWidth=h/(this.strokeNoScale&&e&&e.getLineScale?e.getLineScale():1)}},hasFill:function(){var t=this.fill;return null!=t&&"none"!==t},hasStroke:function(){var t=this.stroke;return null!=t&&"none"!==t&&this.lineWidth>0},extendFrom:function(t,e){if(t){var i=this;for(var n in t)!t.hasOwnProperty(n)||!e&&i.hasOwnProperty(n)||(i[n]=t[n])}},set:function(t,e){"string"==typeof t?this[t]=e:this.extendFrom(t,!0)},clone:function(){var t=new this.constructor;return t.extendFrom(this,!0),t},getGradient:function(t,e,r){for(var o="radial"===e.type?n:i,a=o(t,e,r),s=e.colorStops,l=0;l<s.length;l++)a.addColorStop(s[l].offset,s[l].color);return a}};for(var a=o.prototype,s=0;s<r.length;s++){var l=r[s];l[0]in a||(a[l[0]]=l[1])}o.getGradient=a.getGradient,t.exports=o},function(t,e,i){var n=i(153),r=i(152);t.exports={buildPath:function(t,e,i){var o=e.points,a=e.smooth;if(o&&o.length>=2){if(a&&"spline"!==a){var s=r(o,a,i,e.smoothConstraint);t.moveTo(o[0][0],o[0][1]);for(var l=o.length,u=0;(i?l:l-1)>u;u++){var h=s[2*u],c=s[2*u+1],d=o[(u+1)%l];t.bezierCurveTo(h[0],h[1],c[0],c[1],d[0],d[1])}}else{"spline"===a&&(o=n(o,i)),t.moveTo(o[0][0],o[0][1]);for(var u=1,f=o.length;f>u;u++)t.lineTo(o[u][0],o[u][1])}i&&t.closePath()}}}},function(t,e,i){var n=i(1);t.exports={updateSelectedMap:function(t){this._selectTargetMap=n.reduce(t||[],function(t,e){return t[e.name]=e,t},{})},select:function(t){var e=this._selectTargetMap,i=e[t],r=this.get("selectedMode");"single"===r&&n.each(e,function(t){t.selected=!1}),i&&(i.selected=!0)},unSelect:function(t){var e=this._selectTargetMap[t];e&&(e.selected=!1)},toggleSelected:function(t){var e=this._selectTargetMap[t];return null!=e?(this[e.selected?"unSelect":"select"](t),e.selected):void 0},isSelected:function(t){var e=this._selectTargetMap[t];return e&&e.selected}}},function(t,e,i){function n(t){r.defaultEmphasis(t.label,r.LABEL_OPTIONS)}var r=i(10),o=i(1),a=i(12),s=i(9),l=s.addCommas,u=s.encodeHTML,h=i(2).extendComponentModel({type:"marker",dependencies:["series","grid","polar","geo"],init:function(t,e,i,n){this.mergeDefaultAndTheme(t,i),this.mergeOption(t,i,n.createdBySelf,!0)},ifEnableAnimation:function(){if(a.node)return!1;var t=this.__hostSeries;return this.getShallow("animation")&&t&&t.ifEnableAnimation()},mergeOption:function(t,e,i,r){var a=this.constructor,s=this.mainType+"Model";i||e.eachSeries(function(t){var i=t.get(this.mainType),l=t[s];if(!i||!i.data)return void(t[s]=null);if(l)l.mergeOption(i,e,!0);else{r&&n(i),o.each(i.data,function(t){t instanceof Array?(n(t[0]),n(t[1])):n(t)});var u={mainType:this.mainType,seriesIndex:t.seriesIndex,name:t.name,createdBySelf:!0};l=new a(i,this,e,u),l.__hostSeries=t}t[s]=l},this)},formatTooltip:function(t){var e=this.getData(),i=this.getRawValue(t),n=o.isArray(i)?o.map(i,l).join(", "):l(i),r=e.getName(t),a=this.name;return(null!=i||r)&&(a+="<br />"),r&&(a+=u(r),null!=i&&(a+=" : ")),null!=i&&(a+=n),a},getData:function(){return this._data},setData:function(t){this._data=t}});o.mixin(h,r.dataFormatMixin),t.exports=h},function(t,e,i){t.exports=i(2).extendComponentView({type:"marker",init:function(){this.markerGroupMap={}},render:function(t,e,i){var n=this.markerGroupMap;for(var r in n)n[r].__keep=!1;var o=this.type+"Model";e.eachSeries(function(t){var n=t[o];n&&this.renderSeries(t,n,e,i)},this);for(var r in n)n[r].__keep||this.group.remove(n[r].group)},renderSeries:function(){}})},function(t,e,i){function n(t){return!(isNaN(parseFloat(t.x))&&isNaN(parseFloat(t.y)))}function r(t){return!isNaN(parseFloat(t.x))&&!isNaN(parseFloat(t.y))}function o(t,e,i){var n=-1;do n=Math.max(l.getPrecision(t.get(e,i)),n),t=t.stackedOn;while(t);return n}function a(t,e,i,n,r,a){var s=[],l=v(e,n,t),u=e.indexOfNearest(n,l,!0);s[r]=e.get(i,u,!0),s[a]=e.get(n,u,!0);var h=o(e,n,u);return h>=0&&(s[a]=+s[a].toFixed(h)),s}var s=i(1),l=i(4),u=s.indexOf,h=s.curry,c={min:h(a,"min"),max:h(a,"max"),average:h(a,"average")},d=function(t,e){var i=t.getData(),n=t.coordinateSystem;if(e&&!r(e)&&!s.isArray(e.coord)&&n){var o=n.dimensions,a=f(e,i,n,t);if(e=s.clone(e),e.type&&c[e.type]&&a.baseAxis&&a.valueAxis){var l=u(o,a.baseAxis.dim),h=u(o,a.valueAxis.dim);e.coord=c[e.type](i,a.baseDataDim,a.valueDataDim,l,h),e.value=e.coord[h]}else{for(var d=[null!=e.xAxis?e.xAxis:e.radiusAxis,null!=e.yAxis?e.yAxis:e.angleAxis],p=0;2>p;p++)if(c[d[p]]){var g=t.coordDimToDataDim(o[p])[0];d[p]=v(i,g,d[p])}e.coord=d}}return e},f=function(t,e,i,n){var r={};return null!=t.valueIndex||null!=t.valueDim?(r.valueDataDim=null!=t.valueIndex?e.getDimension(t.valueIndex):t.valueDim,r.valueAxis=i.getAxis(n.dataDimToCoordDim(r.valueDataDim)),r.baseAxis=i.getOtherAxis(r.valueAxis),r.baseDataDim=n.coordDimToDataDim(r.baseAxis.dim)[0]):(r.baseAxis=n.getBaseAxis(),r.valueAxis=i.getOtherAxis(r.baseAxis),r.baseDataDim=n.coordDimToDataDim(r.baseAxis.dim)[0],r.valueDataDim=n.coordDimToDataDim(r.valueAxis.dim)[0]),r},p=function(t,e){return t&&t.containData&&e.coord&&!n(e)?t.containData(e.coord):!0},g=function(t,e,i,n){return 2>n?t.coord&&t.coord[n]:t.value},v=function(t,e,i){if("average"===i){var n=0,r=0;return t.each(e,function(t,e){isNaN(t)||(n+=t,r++)},!0),n/r}return t.getDataExtent(e,!0)["max"===i?1:0]};t.exports={dataTransform:d,dataFilter:p,dimValueGetter:g,getAxisInfo:f,numCalculate:v}},function(t,e){t.exports=function(t,e){var i=e.findComponents({mainType:"legend"});i&&i.length&&e.eachSeriesByType(t,function(t){var e=t.getData();e.filterSelf(function(t){for(var n=e.getName(t),r=0;r<i.length;r++)if(!i[r].isSelected(n))return!1;return!0},this)},this)}},function(t,e,i){function n(t){var e=t.pieceList;t.hasSpecialVisual=!1,p.each(e,function(e,i){e.originIndex=i,null!=e.visual&&(t.hasSpecialVisual=!0)})}function r(t){var e=t.categories,i=t.visual,n=t.categoryMap={};if(m(e,function(t,e){n[t]=e}),!p.isArray(i)){var r=[];p.isObject(i)?m(i,function(t,e){var i=n[e];r[null!=i?i:x]=t}):r[x]=i,i=t.visual=r}for(var o=e.length-1;o>=0;o--)null==i[o]&&(delete n[e[o]],e.pop())}function o(t,e){var i=t.visual,n=[];p.isObject(i)?m(i,function(t){n.push(t)}):null!=i&&n.push(i);var r={color:1,symbol:1};e||1!==n.length||t.type in r||(n[1]=n[0]),t.visual=n}function a(t){return{applyVisual:function(e,i,n){e=this.mapValueToVisual(e),n("color",t(i("color"),e))},_doMap:c([0,1])}}function s(t,e){var i=this.option.visual;return i[Math.round(v(e,[0,1],[0,i.length-1],!0))]||{}}function l(t){return function(e,i,n){n(t,this.mapValueToVisual(e))}}function u(t){var e=this.option.visual;return e[this.option.loop&&t!==x?t%e.length:t]}function h(){return this.option.visual[0]}function c(t){return{linear:function(e){return v(e,t,this.option.visual,!0)},category:u,piecewise:function(e,i){var n=d.call(this,i);return null==n&&(n=v(e,t,this.option.visual,!0)),n},fixed:h}}function d(t){var e=this.option,i=e.pieceList;if(e.hasSpecialVisual){var n=_.findPieceIndex(t,i),r=i[n];if(r&&r.visual)return r.visual[this.type]}}function f(t,e,i){return t?i>=e:i>e}var p=i(1),g=i(18),v=i(4).linearMap,m=p.each,y=p.isObject,x=-1,_=function(t){var e=t.mappingMethod,i=t.type,a=this.option=p.clone(t);this.type=i,this.mappingMethod=e,this._normalizeData=w[e];var s=b[i];this.applyVisual=s.applyVisual,this.getColorMapper=s.getColorMapper,this._doMap=s._doMap[e],"piecewise"===e?(o(a),n(a)):"category"===e?a.categories?r(a):o(a,!0):(p.assert("linear"!==e||a.dataExtent),o(a))};_.prototype={constructor:_,mapValueToVisual:function(t){var e=this._normalizeData(t);return this._doMap(e,t)},getNormalizer:function(){return p.bind(this._normalizeData,this)}};var b=_.visualHandlers={color:{applyVisual:l("color"),getColorMapper:function(){var t=this.option,e=p.map(t.visual,g.parse);return p.bind("category"===t.mappingMethod?function(t,e){return!e&&(t=this._normalizeData(t)),u(this,t)}:function(t,i,n){var r=!!n;return!i&&(t=this._normalizeData(t)),n=g.fastMapToColor(t,e,n),r?n:p.stringify(n,"rgba")},this)},_doMap:{linear:function(t){return g.mapToColor(t,this.option.visual)},category:u,piecewise:function(t,e){var i=d.call(this,e);return null==i&&(i=g.mapToColor(t,this.option.visual)),i},fixed:h}},colorHue:a(function(t,e){return g.modifyHSL(t,e)}),colorSaturation:a(function(t,e){return g.modifyHSL(t,null,e)}),colorLightness:a(function(t,e){return g.modifyHSL(t,null,null,e)}),colorAlpha:a(function(t,e){return g.modifyAlpha(t,e)}),opacity:{applyVisual:l("opacity"),_doMap:c([0,1])},symbol:{applyVisual:function(t,e,i){var n=this.mapValueToVisual(t);if(p.isString(n))i("symbol",n);else if(y(n))for(var r in n)n.hasOwnProperty(r)&&i(r,n[r])},_doMap:{linear:s,category:u,piecewise:function(t,e){var i=d.call(this,e);return null==i&&(i=s.call(this,t)),i},fixed:h}},symbolSize:{applyVisual:l("symbolSize"),_doMap:c([0,1])}},w={linear:function(t){return v(t,this.option.dataExtent,[0,1],!0)},piecewise:function(t){var e=this.option.pieceList,i=_.findPieceIndex(t,e,!0);return null!=i?v(i,[0,e.length-1],[0,1],!0):void 0},category:function(t){var e=this.option.categories?this.option.categoryMap[t]:t;return null==e?x:e},fixed:p.noop};_.addVisualHandler=function(t,e){b[t]=e},_.isValidType=function(t){return b.hasOwnProperty(t)},_.eachVisual=function(t,e,i){p.isObject(t)?p.each(t,e,i):e.call(i,t)},_.mapVisual=function(t,e,i){var n,r=p.isArray(t)?[]:p.isObject(t)?{}:(n=!0,null);return _.eachVisual(t,function(t,o){var a=e.call(i,t,o);n?r=a:r[o]=a}),r},_.retrieveVisuals=function(t){var e,i={};return t&&m(b,function(n,r){t.hasOwnProperty(r)&&(i[r]=t[r],e=!0)}),e?i:null},_.prepareVisualTypes=function(t){if(y(t)){var e=[];m(t,function(t,i){e.push(i)}),t=e}else{if(!p.isArray(t))return[];t=t.slice()}return t.sort(function(t,e){return"color"===e&&"color"!==t&&0===t.indexOf("color")?1:-1}),t},_.dependsOn=function(t,e){return"color"===e?!(!t||0!==t.indexOf(e)):t===e},_.findPieceIndex=function(t,e,i){function n(e,i){var n=Math.abs(e-t);o>n&&(o=n,r=i)}for(var r,o=1/0,a=0,s=e.length;s>a;a++){var l=e[a].value;if(null!=l){if(l===t)return a;i&&n(l,a)}}for(var a=0,s=e.length;s>a;a++){var u=e[a],h=u.interval,c=u.close;if(h){if(h[0]===-(1/0)){if(f(c[1],t,h[1]))return a}else if(h[1]===1/0){if(f(c[0],h[0],t))return a;}else if(f(c[0],h[0],t)&&f(c[1],t,h[1]))return a;i&&n(h[0],a),i&&n(h[1],a)}}return i?t===1/0?e.length-1:t===-(1/0)?0:r:void 0},t.exports=_},function(t,e){t.exports=function(t,e){var i={};e.eachRawSeriesByType(t,function(t){var n=t.getRawData(),r={};if(!e.isSeriesFiltered(t)){var o=t.getData();o.each(function(t){var e=o.getRawIndex(t);r[e]=t}),n.each(function(e){var a=n.getItemModel(e),s=r[e],l=o.getItemVisual(s,"color",!0);if(l)n.setItemVisual(e,"color",l);else{var u=a.get("itemStyle.normal.color")||t.getColorFromPalette(n.getName(e),i);n.setItemVisual(e,"color",u),o.setItemVisual(s,"color",u)}})}})}},function(t,e,i){var n=i(5),r=i(17),o={},a=Math.min,s=Math.max,l=Math.sin,u=Math.cos,h=n.create(),c=n.create(),d=n.create(),f=2*Math.PI;o.fromPoints=function(t,e,i){if(0!==t.length){var n,r=t[0],o=r[0],l=r[0],u=r[1],h=r[1];for(n=1;n<t.length;n++)r=t[n],o=a(o,r[0]),l=s(l,r[0]),u=a(u,r[1]),h=s(h,r[1]);e[0]=o,e[1]=u,i[0]=l,i[1]=h}},o.fromLine=function(t,e,i,n,r,o){r[0]=a(t,i),r[1]=a(e,n),o[0]=s(t,i),o[1]=s(e,n)};var p=[],g=[];o.fromCubic=function(t,e,i,n,o,l,u,h,c,d){var f,v=r.cubicExtrema,m=r.cubicAt,y=v(t,i,o,u,p);for(c[0]=1/0,c[1]=1/0,d[0]=-(1/0),d[1]=-(1/0),f=0;y>f;f++){var x=m(t,i,o,u,p[f]);c[0]=a(x,c[0]),d[0]=s(x,d[0])}for(y=v(e,n,l,h,g),f=0;y>f;f++){var _=m(e,n,l,h,g[f]);c[1]=a(_,c[1]),d[1]=s(_,d[1])}c[0]=a(t,c[0]),d[0]=s(t,d[0]),c[0]=a(u,c[0]),d[0]=s(u,d[0]),c[1]=a(e,c[1]),d[1]=s(e,d[1]),c[1]=a(h,c[1]),d[1]=s(h,d[1])},o.fromQuadratic=function(t,e,i,n,o,l,u,h){var c=r.quadraticExtremum,d=r.quadraticAt,f=s(a(c(t,i,o),1),0),p=s(a(c(e,n,l),1),0),g=d(t,i,o,f),v=d(e,n,l,p);u[0]=a(t,o,g),u[1]=a(e,l,v),h[0]=s(t,o,g),h[1]=s(e,l,v)},o.fromArc=function(t,e,i,r,o,a,s,p,g){var v=n.min,m=n.max,y=Math.abs(o-a);if(1e-4>y%f&&y>1e-4)return p[0]=t-i,p[1]=e-r,g[0]=t+i,void(g[1]=e+r);if(h[0]=u(o)*i+t,h[1]=l(o)*r+e,c[0]=u(a)*i+t,c[1]=l(a)*r+e,v(p,h,c),m(g,h,c),o%=f,0>o&&(o+=f),a%=f,0>a&&(a+=f),o>a&&!s?a+=f:a>o&&s&&(o+=f),s){var x=a;a=o,o=x}for(var _=0;a>_;_+=Math.PI/2)_>o&&(d[0]=u(_)*i+t,d[1]=l(_)*r+e,v(p,d,p),m(g,d,g))},t.exports=o},function(t,e,i){var n=i(37),r=i(1),o=i(16),a=function(t){n.call(this,t)};a.prototype={constructor:a,type:"text",brush:function(t,e){var i=this.style,n=i.x||0,r=i.y||0,a=i.text;if(null!=a&&(a+=""),i.bind(t,this,e),a){this.setTransform(t);var s,l=i.textAlign,u=i.textFont||i.font;if(i.textVerticalAlign){var h=o.getBoundingRect(a,u,i.textAlign,"top");switch(s="middle",i.textVerticalAlign){case"middle":r-=h.height/2-h.lineHeight/2;break;case"bottom":r-=h.height-h.lineHeight/2;break;default:r+=h.lineHeight/2}}else s=i.textBaseline;t.font=u,t.textAlign=l||"left",t.textAlign!==l&&(t.textAlign="left"),t.textBaseline=s||"alphabetic",t.textBaseline!==s&&(t.textBaseline="alphabetic");for(var c=o.measureText("",t.font).width,d=a.split("\n"),f=0;f<d.length;f++)i.hasFill()&&t.fillText(d[f],n,r),i.hasStroke()&&t.strokeText(d[f],n,r),r+=c;this.restoreTransform(t)}},getBoundingRect:function(){if(!this._rect){var t=this.style,e=t.textVerticalAlign,i=o.getBoundingRect(t.text+"",t.textFont||t.font,t.textAlign,e?"top":t.textBaseline);switch(e){case"middle":i.y-=i.height/2;break;case"bottom":i.y-=i.height}i.x+=t.x||0,i.y+=t.y||0,this._rect=i}return this._rect}},r.inherits(a,n),t.exports=a},function(t,e,i){function n(t,e){return"string"==typeof t?t.lastIndexOf("%")>=0?parseFloat(t)/100*e:parseFloat(t):t}var r=i(16),o=i(7),a=new o,s=function(){};s.prototype={constructor:s,drawRectText:function(t,e,i){var o=this.style,s=o.text;if(null!=s&&(s+=""),s){t.save();var l,u,h=o.textPosition,c=o.textDistance,d=o.textAlign,f=o.textFont||o.font,p=o.textBaseline,g=o.textVerticalAlign;i=i||r.getBoundingRect(s,f,d,p);var v=this.transform;if(v&&(a.copy(e),a.applyTransform(v),e=a),h instanceof Array){if(l=e.x+n(h[0],e.width),u=e.y+n(h[1],e.height),d=d||"left",p=p||"top",g){switch(g){case"middle":u-=i.height/2-i.lineHeight/2;break;case"bottom":u-=i.height-i.lineHeight/2;break;default:u+=i.lineHeight/2}p="middle"}}else{var m=r.adjustTextPositionOnRect(h,e,i,c);l=m.x,u=m.y,d=d||m.textAlign,p=p||m.textBaseline}t.textAlign=d||"left",t.textBaseline=p||"alphabetic";var y=o.textFill,x=o.textStroke;y&&(t.fillStyle=y),x&&(t.strokeStyle=x),t.font=f,t.shadowBlur=o.textShadowBlur,t.shadowColor=o.textShadowColor||"transparent",t.shadowOffsetX=o.textShadowOffsetX,t.shadowOffsetY=o.textShadowOffsetY;for(var _=s.split("\n"),b=0;b<_.length;b++)y&&t.fillText(_[b],l,u),x&&t.strokeText(_[b],l,u),u+=i.lineHeight;t.restore()}}},t.exports=s},function(t,e,i){function n(t){delete d[t]}
var r=i(62),o=i(12),a=i(136),s=i(139),l=i(140),u=i(148),h=!o.canvasSupported,c={canvas:i(138)},d={},f={};f.version="3.1.2",f.init=function(t,e){var i=new p(r(),t,e);return d[i.id]=i,i},f.dispose=function(t){if(t)t.dispose();else{for(var e in d)d[e].dispose();d={}}return f},f.getInstance=function(t){return d[t]},f.registerPainter=function(t,e){c[t]=e};var p=function(t,e,i){i=i||{},this.dom=e,this.id=t;var n=this,r=new s,d=i.renderer;if(h){if(!c.vml)throw new Error("You need to require 'zrender/vml/vml' to support IE8");d="vml"}else d&&c[d]||(d="canvas");var f=new c[d](e,r,i);this.storage=r,this.painter=f;var p=o.node?null:new u(f.getViewportRoot());this.handler=new a(r,f,p),this.animation=new l({stage:{update:function(){n._needsRefresh&&n.refreshImmediately(),n._needsRefreshHover&&n.refreshHoverImmediately()}}}),this.animation.start(),this._needsRefresh;var g=r.delFromMap,v=r.addToMap;r.delFromMap=function(t){var e=r.get(t);g.call(r,t),e&&e.removeSelfFromZr(n)},r.addToMap=function(t){v.call(r,t),t.addSelfToZr(n)}};p.prototype={constructor:p,getId:function(){return this.id},add:function(t){this.storage.addRoot(t),this._needsRefresh=!0},remove:function(t){this.storage.delRoot(t),this._needsRefresh=!0},configLayer:function(t,e){this.painter.configLayer(t,e),this._needsRefresh=!0},refreshImmediately:function(){this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},refresh:function(){this._needsRefresh=!0},addHover:function(t,e){this.painter.addHover&&(this.painter.addHover(t,e),this.refreshHover())},removeHover:function(t){this.painter.removeHover&&(this.painter.removeHover(t),this.refreshHover())},clearHover:function(){this.painter.clearHover&&(this.painter.clearHover(),this.refreshHover())},refreshHover:function(){this._needsRefreshHover=!0},refreshHoverImmediately:function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.refreshHover()},resize:function(){this.painter.resize(),this.handler.resize()},clearAnimation:function(){this.animation.clear()},getWidth:function(){return this.painter.getWidth()},getHeight:function(){return this.painter.getHeight()},pathToImage:function(t,e,i){var n=r();return this.painter.pathToImage(n,t,e,i)},setCursorStyle:function(t){this.handler.setCursorStyle(t)},on:function(t,e,i){this.handler.on(t,e,i)},off:function(t,e){this.handler.off(t,e)},trigger:function(t,e){this.handler.trigger(t,e)},clear:function(){this.storage.delRoot(),this.painter.clear()},dispose:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,n(this.id)}},t.exports=f},function(t,e,i){var n=i(2),r=i(1);t.exports=function(t,e){r.each(e,function(e){e.update="updateView",n.registerAction(e,function(i,n){var r={};return n.eachComponent({mainType:"series",subType:t,query:i},function(t){t[e.method]&&t[e.method](i.name);var n=t.getData();n.each(function(e){var i=n.getName(e);r[i]=t.isSelected(i)||!1})}),{name:i.name,selected:r}})})}},function(t,e,i){function n(t){if(!t.target||!t.target.draggable){var e=t.offsetX,i=t.offsetY,n=this.rectProvider&&this.rectProvider();n&&n.contain(e,i)&&(this._x=e,this._y=i,this._dragging=!0)}}function r(t){if(this._dragging&&(d.stop(t.event),"pinch"!==t.gestureEvent)){if(f.isTaken(this._zr,"globalPan"))return;var e=t.offsetX,i=t.offsetY,n=e-this._x,r=i-this._y;this._x=e,this._y=i;var o=this.target;if(o){var a=o.position;a[0]+=n,a[1]+=r,o.dirty()}d.stop(t.event),this.trigger("pan",n,r)}}function o(t){this._dragging=!1}function a(t){var e=t.wheelDelta>0?1.1:1/1.1;l.call(this,t,e,t.offsetX,t.offsetY)}function s(t){if(!f.isTaken(this._zr,"globalPan")){var e=t.pinchScale>1?1.1:1/1.1;l.call(this,t,e,t.pinchX,t.pinchY)}}function l(t,e,i,n){var r=this.rectProvider&&this.rectProvider();if(r&&r.contain(i,n)){d.stop(t.event);var o=this.target,a=this.zoomLimit;if(o){var s=o.position,l=o.scale,u=this.zoom=this.zoom||1;if(u*=e,a){var h=a.min||0,c=a.max||1/0;u=Math.max(Math.min(c,u),h)}var f=u/this.zoom;this.zoom=u,s[0]-=(i-s[0])*(f-1),s[1]-=(n-s[1])*(f-1),l[0]*=f,l[1]*=f,o.dirty()}this.trigger("zoom",e,i,n)}}function u(t,e,i){this.target=e,this.rectProvider=i,this.zoomLimit,this.zoom,this._zr=t;var l=c.bind,u=l(n,this),d=l(r,this),f=l(o,this),p=l(a,this),g=l(s,this);h.call(this),this.enable=function(e){this.disable(),null==e&&(e=!0),e!==!0&&"move"!==e&&"pan"!==e||(t.on("mousedown",u),t.on("mousemove",d),t.on("mouseup",f)),e!==!0&&"scale"!==e&&"zoom"!==e||(t.on("mousewheel",p),t.on("pinch",g))},this.disable=function(){t.off("mousedown",u),t.off("mousemove",d),t.off("mouseup",f),t.off("mousewheel",p),t.off("pinch",g)},this.dispose=this.disable,this.isDragging=function(){return this._dragging},this.isPinching=function(){return this._pinching}}var h=i(20),c=i(1),d=i(24),f=i(112);c.mixin(u,h),t.exports=u},function(t,e){t.exports=function(t,e,i,n,r){function o(t,e,i){var n=e.length?e.slice():[e,e];return e[0]>e[1]&&n.reverse(),0>t&&n[0]+t<i[0]&&(t=i[0]-n[0]),t>0&&n[1]+t>i[1]&&(t=i[1]-n[1]),t}return t?("rigid"===n?(t=o(t,e,i),e[0]+=t,e[1]+=t):(t=o(t,e[r],i),e[r]+=t,"push"===n&&e[0]>e[1]&&(e[1-r]=e[r])),e):e}},function(t,e,i){var n=i(1),r={show:!0,zlevel:0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisLine:{show:!0,onZero:!0,lineStyle:{color:"#333",width:1,type:"solid"}},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,margin:8,textStyle:{fontSize:12}},splitLine:{show:!0,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},o=n.merge({boundaryGap:!0,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},r),a=n.merge({boundaryGap:[0,0],splitNumber:5},r),s=n.defaults({scale:!0,min:"dataMin",max:"dataMax"},a),l=n.defaults({},a);l.scale=!0,t.exports={categoryAxis:o,valueAxis:a,timeAxis:s,logAxis:l}},function(t,e){var i={},n="\x00__throttleOriginMethod",r="\x00__throttleRate",o="\x00__throttleType";i.throttle=function(t,e,i){function n(){u=(new Date).getTime(),h=null,t.apply(a,s||[])}var r,o,a,s,l=0,u=0,h=null;e=e||0;var c=function(){r=(new Date).getTime(),a=this,s=arguments,o=r-(i?l:u)-e,clearTimeout(h),i?h=setTimeout(n,e):o>=0?n():h=setTimeout(n,-o),l=r};return c.clear=function(){h&&(clearTimeout(h),h=null)},c},i.createOrUpdate=function(t,e,a,s){var l=t[e];if(l){var u=l[n]||l,h=l[o],c=l[r];if(c!==a||h!==s){if(null==a||!s)return t[e]=u;l=t[e]=i.throttle(u,a,"debounce"===s),l[n]=u,l[o]=s,l[r]=a}return l}},i.clear=function(t,e){var i=t[e];i&&i[n]&&(t[e]=i[n])},t.exports=i},function(t,e){t.exports={containStroke:function(t,e,i,n,r,o,a){if(0===r)return!1;var s=r,l=0,u=t;if(a>e+s&&a>n+s||e-s>a&&n-s>a||o>t+s&&o>i+s||t-s>o&&i-s>o)return!1;if(t===i)return Math.abs(o-t)<=s/2;l=(e-n)/(t-i),u=(t*n-i*e)/(t-i);var h=l*o-a+u,c=h*h/(l*l+1);return s/2*s/2>=c}}},function(t,e,i){var n=i(17);t.exports={containStroke:function(t,e,i,r,o,a,s,l,u){if(0===s)return!1;var h=s;if(u>e+h&&u>r+h&&u>a+h||e-h>u&&r-h>u&&a-h>u||l>t+h&&l>i+h&&l>o+h||t-h>l&&i-h>l&&o-h>l)return!1;var c=n.quadraticProjectPoint(t,e,i,r,o,a,l,u,null);return h/2>=c}}},function(t,e){t.exports=function(t,e,i,n,r,o){if(o>e&&o>n||e>o&&n>o)return 0;if(n===e)return 0;var a=e>n?1:-1,s=(o-e)/(n-e);1!==s&&0!==s||(a=e>n?.5:-.5);var l=s*(i-t)+t;return l>r?a:0}},function(t,e,i){"use strict";var n=i(1),r=i(29),o=function(t,e,i,n,o,a){this.x=null==t?0:t,this.y=null==e?0:e,this.x2=null==i?1:i,this.y2=null==n?0:n,this.type="linear",this.global=a||!1,r.call(this,o)};o.prototype={constructor:o},n.inherits(o,r),t.exports=o},function(t,e,i){"use strict";function n(t){return t>s||-s>t}var r=i(19),o=i(5),a=r.identity,s=5e-5,l=function(t){t=t||{},t.position||(this.position=[0,0]),null==t.rotation&&(this.rotation=0),t.scale||(this.scale=[1,1]),this.origin=this.origin||null},u=l.prototype;u.transform=null,u.needLocalTransform=function(){return n(this.rotation)||n(this.position[0])||n(this.position[1])||n(this.scale[0]-1)||n(this.scale[1]-1)},u.updateTransform=function(){var t=this.parent,e=t&&t.transform,i=this.needLocalTransform(),n=this.transform;return i||e?(n=n||r.create(),i?this.getLocalTransform(n):a(n),e&&(i?r.mul(n,t.transform,n):r.copy(n,t.transform)),this.transform=n,this.invTransform=this.invTransform||r.create(),void r.invert(this.invTransform,n)):void(n&&a(n))},u.getLocalTransform=function(t){t=t||[],a(t);var e=this.origin,i=this.scale,n=this.rotation,o=this.position;return e&&(t[4]-=e[0],t[5]-=e[1]),r.scale(t,t,i),n&&r.rotate(t,t,n),e&&(t[4]+=e[0],t[5]+=e[1]),t[4]+=o[0],t[5]+=o[1],t},u.setTransform=function(t){var e=this.transform;e&&t.transform(e[0],e[1],e[2],e[3],e[4],e[5])},u.restoreTransform=function(t){var e=this.invTransform;e&&t.transform(e[0],e[1],e[2],e[3],e[4],e[5])};var h=[];u.decomposeTransform=function(){if(this.transform){var t=this.parent,e=this.transform;t&&t.transform&&(r.mul(h,t.invTransform,e),e=h);var i=e[0]*e[0]+e[1]*e[1],o=e[2]*e[2]+e[3]*e[3],a=this.position,s=this.scale;n(i-1)&&(i=Math.sqrt(i)),n(o-1)&&(o=Math.sqrt(o)),e[0]<0&&(i=-i),e[3]<0&&(o=-o),a[0]=e[4],a[1]=e[5],s[0]=i,s[1]=o,this.rotation=Math.atan2(-e[1]/o,e[0]/i)}},u.getGlobalScale=function(){var t=this.transform;if(!t)return[1,1];var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]),i=Math.sqrt(t[2]*t[2]+t[3]*t[3]);return t[0]<0&&(e=-e),t[3]<0&&(i=-i),[e,i]},u.transformCoordToLocal=function(t,e){var i=[t,e],n=this.invTransform;return n&&o.applyTransform(i,i,n),i},u.transformCoordToGlobal=function(t,e){var i=[t,e],n=this.transform;return n&&o.applyTransform(i,i,n),i},t.exports=l},function(t,e,i){"use strict";function n(t){r.each(o,function(e){this[e]=r.bind(t[e],t)},this)}var r=i(1),o=["getDom","getZr","getWidth","getHeight","dispatchAction","isDisposed","on","off","getDataURL","getConnectedDataURL","getModel","getOption"];t.exports=n},function(t,e,i){var n=i(1);i(54),i(89),i(90);var r=i(119),o=i(2);o.registerLayout(n.curry(r,"bar")),o.registerVisual(function(t){t.eachSeriesByType("bar",function(t){var e=t.getData();e.setVisual("legendSymbol","roundRect")})}),i(36)},function(t,e,i){"use strict";var n=i(15),r=i(35);t.exports=n.extend({type:"series.bar",dependencies:["grid","polar"],getInitialData:function(t,e){return r(t.data,this,e)},getMarkerPosition:function(t){var e=this.coordinateSystem;if(e){var i=e.dataToPoint(t,!0),n=this.getData(),r=n.getLayout("offset"),o=n.getLayout("size"),a=e.getBaseAxis().isHorizontal()?0:1;return i[a]+=r+o/2,i}return[NaN,NaN]},brushSelector:"rect",defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,barMinHeight:0,itemStyle:{normal:{},emphasis:{}}}})},function(t,e,i){"use strict";function n(t,e){var i=t.width>0?1:-1,n=t.height>0?1:-1;e=Math.min(e,Math.abs(t.width),Math.abs(t.height)),t.x+=i*e/2,t.y+=n*e/2,t.width-=i*e,t.height-=n*e}var r=i(1),o=i(3);r.extend(i(8).prototype,i(91)),t.exports=i(2).extendChartView({type:"bar",render:function(t,e,i){var n=t.get("coordinateSystem");return"cartesian2d"===n&&this._renderOnCartesian(t,e,i),this.group},_renderOnCartesian:function(t,e,i){function a(e,i){var a=l.getItemLayout(e),s=l.getItemModel(e).get(p)||0;n(a,s);var u=new o.Rect({shape:r.extend({},a)});if(f){var h=u.shape,c=d?"height":"width",g={};h[c]=0,g[c]=a[c],o[i?"updateProps":"initProps"](u,{shape:g},t,e)}return u}var s=this.group,l=t.getData(),u=this._data,h=t.coordinateSystem,c=h.getBaseAxis(),d=c.isHorizontal(),f=t.get("animation"),p=["itemStyle","normal","barBorderWidth"];l.diff(u).add(function(t){if(l.hasValue(t)){var e=a(t);l.setItemGraphicEl(t,e),s.add(e)}}).update(function(e,i){var r=u.getItemGraphicEl(i);if(!l.hasValue(e))return void s.remove(r);r||(r=a(e,!0));var h=l.getItemLayout(e),c=l.getItemModel(e).get(p)||0;n(h,c),o.updateProps(r,{shape:h},t,e),l.setItemGraphicEl(e,r),s.add(r)}).remove(function(e){var i=u.getItemGraphicEl(e);i&&(i.style.text="",o.updateProps(i,{shape:{width:0}},t,e,function(){s.remove(i)}))}).execute(),this._updateStyle(t,l,d),this._data=l},_updateStyle:function(t,e,i){function n(t,e,i,n,r){o.setText(t,e,i),t.text=n,"outside"===t.textPosition&&(t.textPosition=r)}e.eachItemGraphicEl(function(a,s){var l=e.getItemModel(s),u=e.getItemVisual(s,"color"),h=e.getItemVisual(s,"opacity"),c=e.getItemLayout(s),d=l.getModel("itemStyle.normal"),f=l.getModel("itemStyle.emphasis").getBarItemStyle();a.setShape("r",d.get("barBorderRadius")||0),a.useStyle(r.defaults({fill:u,opacity:h},d.getBarItemStyle()));var p=i?c.height>0?"bottom":"top":c.width>0?"left":"right",g=l.getModel("label.normal"),v=l.getModel("label.emphasis"),m=a.style;g.get("show")?n(m,g,u,r.retrieve(t.getFormattedLabel(s,"normal"),t.getRawValue(s)),p):m.text="",v.get("show")?n(f,v,u,r.retrieve(t.getFormattedLabel(s,"emphasis"),t.getRawValue(s)),p):f.text="",o.setHoverStyle(a,f)})},remove:function(t,e){var i=this.group;t.get("animation")?this._data&&this._data.eachItemGraphicEl(function(e){e.style.text="",o.updateProps(e,{shape:{width:0}},t,e.dataIndex,function(){i.remove(e)})}):i.removeAll()}})},function(t,e,i){var n=i(31)([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["stroke","barBorderColor"],["lineWidth","barBorderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]);t.exports={getBarItemStyle:function(t){var e=n.call(this,t);if(this.getBorderLineDash){var i=this.getBorderLineDash();i&&(e.lineDash=i)}return e}}},function(t,e,i){function n(t){return"_"+t+"Type"}function r(t,e,i){var n=e.getItemVisual(i,"color"),r=e.getItemVisual(i,t),o=e.getItemVisual(i,t+"Size");if(r&&"none"!==r){f.isArray(o)||(o=[o,o]);var a=u.createSymbol(r,-o[0]/2,-o[1]/2,o[0],o[1],n);return a.name=t,a}}function o(t){var e=new c({name:"line"});return a(e.shape,t),e}function a(t,e){var i=e[0],n=e[1],r=e[2];t.x1=i[0],t.y1=i[1],t.x2=n[0],t.y2=n[1],t.percent=1,r&&(t.cpx1=r[0],t.cpy1=r[1])}function s(){var t=this,e=t.childOfName("fromSymbol"),i=t.childOfName("toSymbol"),n=t.childOfName("label");if(e||i||!n.ignore){for(var r=1,o=this.parent;o;)o.scale&&(r/=o.scale[0]),o=o.parent;var a=t.childOfName("line");if(this.__dirty||a.__dirty){var s=a.shape.percent,l=a.pointAt(0),u=a.pointAt(s),c=h.sub([],u,l);if(h.normalize(c,c),e){e.attr("position",l);var d=a.tangentAt(0);e.attr("rotation",Math.PI/2-Math.atan2(d[1],d[0])),e.attr("scale",[r*s,r*s])}if(i){i.attr("position",u);var d=a.tangentAt(1);i.attr("rotation",-Math.PI/2-Math.atan2(d[1],d[0])),i.attr("scale",[r*s,r*s])}if(!n.ignore){n.attr("position",u);var f,p,g,v=5*r;if("end"===n.__position)f=[c[0]*v+u[0],c[1]*v+u[1]],p=c[0]>.8?"left":c[0]<-.8?"right":"center",g=c[1]>.8?"top":c[1]<-.8?"bottom":"middle";else if("middle"===n.__position){var m=s/2,d=a.tangentAt(m),y=[d[1],-d[0]],x=a.pointAt(m);y[1]>0&&(y[0]=-y[0],y[1]=-y[1]),f=[x[0]+y[0]*v,x[1]+y[1]*v],p="center",g="bottom";var _=-Math.atan2(d[1],d[0]);u[0]<l[0]&&(_=Math.PI+_),n.attr("rotation",_)}else f=[-c[0]*v+l[0],-c[1]*v+l[1]],p=c[0]>.8?"right":c[0]<-.8?"left":"center",g=c[1]>.8?"bottom":c[1]<-.8?"top":"middle";n.attr({style:{textVerticalAlign:n.__verticalAlign||g,textAlign:n.__textAlign||p},position:f,scale:[r,r]})}}}}function l(t,e,i){d.Group.call(this),this._createLine(t,e,i)}var u=i(26),h=i(5),c=i(173),d=i(3),f=i(1),p=i(4),g=["fromSymbol","toSymbol"],v=l.prototype;v.beforeUpdate=s,v._createLine=function(t,e,i){var a=t.hostModel,s=t.getItemLayout(e),l=o(s);l.shape.percent=0,d.initProps(l,{shape:{percent:1}},a,e),this.add(l);var u=new d.Text({name:"label"});this.add(u),f.each(g,function(i){var o=r(i,t,e);this.add(o),this[n(i)]=t.getItemVisual(e,i)},this),this._updateCommonStl(t,e,i)},v.updateData=function(t,e,i){var o=t.hostModel,s=this.childOfName("line"),l=t.getItemLayout(e),u={shape:{}};a(u.shape,l),d.updateProps(s,u,o,e),f.each(g,function(i){var o=t.getItemVisual(e,i),a=n(i);if(this[a]!==o){this.remove(this.childOfName(i));var s=r(i,t,e);this.add(s)}this[a]=o},this),this._updateCommonStl(t,e,i)},v._updateCommonStl=function(t,e,i){var n=t.hostModel,r=this.childOfName("line"),o=i&&i.lineStyle,a=i&&i.hoverLineStyle,s=i&&i.labelModel,l=i&&i.hoverLabelModel;if(!i||t.hasItemOption){var u=t.getItemModel(e);o=u.getModel("lineStyle.normal").getLineStyle(),a=u.getModel("lineStyle.emphasis").getLineStyle(),s=u.getModel("label.normal"),l=u.getModel("label.emphasis")}var h=t.getItemVisual(e,"color");isNaN(c)&&(c=t.getName(e)),r.useStyle(f.defaults({strokeNoScale:!0,fill:"none",stroke:h},o)),r.hoverStyle=a;var c,g,v=s.getShallow("show"),m=l.getShallow("show"),y=this.childOfName("label");if((v||m)&&(c=p.round(n.getRawValue(e)),g=h||"#000"),v){var x=s.getModel("textStyle");y.setStyle({text:f.retrieve(n.getFormattedLabel(e,"normal",t.dataType),c),textFont:x.getFont(),fill:x.getTextColor()||g}),y.__textAlign=x.get("align"),y.__verticalAlign=x.get("baseline"),y.__position=s.get("position")}else y.setStyle("text","");if(m){var _=l.getModel("textStyle");y.hoverStyle={text:f.retrieve(n.getFormattedLabel(e,"emphasis",t.dataType),c),textFont:_.getFont(),fill:_.getTextColor()||g}}else y.hoverStyle={text:""};y.ignore=!v&&!m,d.setHoverStyle(this)},v.updateLayout=function(t,e){this.setLinePoints(t.getItemLayout(e))},v.setLinePoints=function(t){var e=this.childOfName("line");a(e.shape,t),e.dirty()},f.inherits(l,d.Group),t.exports=l},function(t,e,i){function n(t){return isNaN(t[0])||isNaN(t[1])}function r(t){return!n(t[0])&&!n(t[1])}function o(t){this._ctor=t||s,this.group=new a.Group}var a=i(3),s=i(92),l=o.prototype;l.updateData=function(t){var e=this._lineData,i=this.group,n=this._ctor,o=t.hostModel,a={lineStyle:o.getModel("lineStyle.normal").getLineStyle(),hoverLineStyle:o.getModel("lineStyle.emphasis").getLineStyle(),labelModel:o.getModel("label.normal"),hoverLabelModel:o.getModel("label.emphasis")};t.diff(e).add(function(e){if(r(t.getItemLayout(e))){var o=new n(t,e,a);t.setItemGraphicEl(e,o),i.add(o)}}).update(function(o,s){var l=e.getItemGraphicEl(s);return r(t.getItemLayout(o))?(l?l.updateData(t,o,a):l=new n(t,o,a),t.setItemGraphicEl(o,l),void i.add(l)):void i.remove(l)}).remove(function(t){i.remove(e.getItemGraphicEl(t))}).execute(),this._lineData=t},l.updateLayout=function(){var t=this._lineData;t.eachItemGraphicEl(function(e,i){e.updateLayout(t,i)},this)},l.remove=function(){this.group.removeAll()},t.exports=o},function(t,e,i){var n=i(1),r=i(2),o=r.PRIORITY;i(95),i(96),r.registerVisual(n.curry(i(46),"line","circle","line")),r.registerLayout(n.curry(i(55),"line")),r.registerProcessor(o.PROCESSOR.STATISTIC,n.curry(i(131),"line")),i(36)},function(t,e,i){"use strict";var n=i(35),r=i(15);t.exports=r.extend({type:"series.line",dependencies:["grid","polar"],getInitialData:function(t,e){return n(t.data,this,e)},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,xAxisIndex:0,yAxisIndex:0,polarIndex:0,clipOverflow:!0,label:{normal:{position:"top"}},lineStyle:{normal:{width:2,type:"solid"}},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:!1,connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0}})},function(t,e,i){"use strict";function n(t,e){if(t.length===e.length){for(var i=0;i<t.length;i++){var n=t[i],r=e[i];if(n[0]!==r[0]||n[1]!==r[1])return}return!0}}function r(t){return"number"==typeof t?t:t?.3:0}function o(t){var e=t.getGlobalExtent();if(t.onBand){var i=t.getBandWidth()/2-1,n=e[1]>e[0]?1:-1;e[0]+=n*i,e[1]-=n*i}return e}function a(t){return t>=0?1:-1}function s(t,e){var i=t.getBaseAxis(),n=t.getOtherAxis(i),r=i.onZero?0:n.scale.getExtent()[0],o=n.dim,s="x"===o||"radius"===o?1:0;return e.mapArray([o],function(n,l){for(var u,h=e.stackedOn;h&&a(h.get(o,l))===a(n);){u=h;break}var c=[];return c[s]=e.get(i.dim,l),c[1-s]=u?u.get(o,l,!0):r,t.dataToPoint(c)},!0)}function l(t,e){return null!=e.dataIndex?e.dataIndex:null!=e.name?t.indexOfName(e.name):void 0}function u(t,e,i){var n=o(t.getAxis("x")),r=o(t.getAxis("y")),a=t.getBaseAxis().isHorizontal(),s=Math.min(n[0],n[1]),l=Math.min(r[0],r[1]),u=Math.max(n[0],n[1])-s,h=Math.max(r[0],r[1])-l,c=i.get("lineStyle.normal.width")||2,d=i.get("clipOverflow")?c/2:Math.max(u,h);a?(l-=d,h+=2*d):(s-=d,u+=2*d);var f=new x.Rect({shape:{x:s,y:l,width:u,height:h}});return e&&(f.shape[a?"width":"height"]=0,x.initProps(f,{shape:{width:u,height:h}},i)),f}function h(t,e,i){var n=t.getAngleAxis(),r=t.getRadiusAxis(),o=r.getExtent(),a=n.getExtent(),s=Math.PI/180,l=new x.Sector({shape:{cx:t.cx,cy:t.cy,r0:o[0],r:o[1],startAngle:-a[0]*s,endAngle:-a[1]*s,clockwise:n.inverse}});return e&&(l.shape.endAngle=-a[0]*s,x.initProps(l,{shape:{endAngle:-a[1]*s}},i)),l}function c(t,e,i){return"polar"===t.type?h(t,e,i):u(t,e,i)}function d(t,e,i){for(var n=e.getBaseAxis(),r="x"===n.dim||"radius"===n.dim?0:1,o=[],a=0;a<t.length-1;a++){var s=t[a+1],l=t[a];o.push(l);var u=[];switch(i){case"end":u[r]=s[r],u[1-r]=l[1-r],o.push(u);break;case"middle":var h=(l[r]+s[r])/2,c=[];u[r]=c[r]=h,u[1-r]=l[1-r],c[1-r]=s[1-r],o.push(u),o.push(c);break;default:u[r]=l[r],u[1-r]=s[1-r],o.push(u)}}return t[a]&&o.push(t[a]),o}function f(t,e){return Math.max(Math.min(t,e[1]),e[0])}function p(t,e){var i=t.getVisual("visualMeta");if(i&&i.length){for(var n,r=i.length-1;r>=0;r--)if(i[r].dimension<2){n=i[r];break}if(n&&"cartesian2d"===e.type){var o=n.dimension,a=t.dimensions[o],s=t.getDataExtent(a),l=n.stops,u=[];l[0].interval&&l.sort(function(t,e){return t.interval[0]-e.interval[0]});var h=l[0],c=l[l.length-1],d=h.interval?f(h.interval[0],s):h.value,p=c.interval?f(c.interval[1],s):c.value,g=p-d;if(0===g)return t.getItemVisual(0,"color");for(var r=0;r<l.length;r++)if(l[r].interval){if(l[r].interval[1]===l[r].interval[0])continue;u.push({offset:(f(l[r].interval[0],s)-d)/g,color:l[r].color},{offset:(f(l[r].interval[1],s)-d)/g,color:l[r].color})}else u.push({offset:(l[r].value-d)/g,color:l[r].color});var v=new x.LinearGradient(0,0,0,0,u,!0),m=e.getAxis(a),y=Math.round(m.toGlobalCoord(m.dataToCoord(d))),_=Math.round(m.toGlobalCoord(m.dataToCoord(p)));return v[a]=y,v[a+"2"]=_,v}}}var g=i(1),v=i(39),m=i(49),y=i(97),x=i(3),_=i(98),b=i(27);t.exports=b.extend({type:"line",init:function(){var t=new x.Group,e=new v;this.group.add(e.group),this._symbolDraw=e,this._lineGroup=t},render:function(t,e,i){var o=t.coordinateSystem,a=this.group,l=t.getData(),u=t.getModel("lineStyle.normal"),h=t.getModel("areaStyle.normal"),f=l.mapArray(l.getItemLayout,!0),v="polar"===o.type,m=this._coordSys,y=this._symbolDraw,x=this._polyline,_=this._polygon,b=this._lineGroup,w=t.get("animation"),S=!h.isEmpty(),M=s(o,l),A=t.get("showSymbol"),I=A&&!v&&!t.get("showAllSymbol")&&this._getSymbolIgnoreFunc(l,o),T=this._data;T&&T.eachItemGraphicEl(function(t,e){t.__temp&&(a.remove(t),T.setItemGraphicEl(e,null))}),A||y.remove(),a.add(b);var L=!v&&t.get("step");x&&m.type===o.type&&L===this._step?(S&&!_?_=this._newPolygon(f,M,o,w):_&&!S&&(b.remove(_),_=this._polygon=null),b.setClipPath(c(o,!1,t)),A&&y.updateData(l,I),l.eachItemGraphicEl(function(t){t.stopAnimation(!0)}),n(this._stackedOnPoints,M)&&n(this._points,f)||(w?this._updateAnimation(l,M,o,i,L):(x.setShape({points:f}),_&&_.setShape({points:f,stackedOnPoints:M})))):(A&&y.updateData(l,I),L&&(f=d(f,o,L),M=d(M,o,L)),x=this._newPolyline(f,o,w),S&&(_=this._newPolygon(f,M,o,w)),b.setClipPath(c(o,!0,t)));var C=p(l,o)||l.getVisual("color");x.useStyle(g.defaults(u.getLineStyle(),{fill:"none",stroke:C,lineJoin:"bevel"}));var D=t.get("smooth");if(D=r(t.get("smooth")),x.setShape({smooth:D,smoothMonotone:t.get("smoothMonotone"),connectNulls:t.get("connectNulls")}),_){var P=l.stackedOn,k=0;if(_.useStyle(g.defaults(h.getAreaStyle(),{fill:C,opacity:.7,lineJoin:"bevel"})),P){var z=P.hostModel;k=r(z.get("smooth"))}_.setShape({smooth:D,stackedOnSmooth:k,smoothMonotone:t.get("smoothMonotone"),connectNulls:t.get("connectNulls")})}this._data=l,this._coordSys=o,this._stackedOnPoints=M,this._points=f,this._step=L},highlight:function(t,e,i,n){var r=t.getData(),o=l(r,n);if(!(o instanceof Array)&&null!=o&&o>=0){var a=r.getItemGraphicEl(o);if(!a){var s=r.getItemLayout(o);a=new m(r,o),a.position=s,a.setZ(t.get("zlevel"),t.get("z")),a.ignore=isNaN(s[0])||isNaN(s[1]),a.__temp=!0,r.setItemGraphicEl(o,a),a.stopSymbolAnimation(!0),this.group.add(a)}a.highlight()}else b.prototype.highlight.call(this,t,e,i,n)},downplay:function(t,e,i,n){var r=t.getData(),o=l(r,n);if(null!=o&&o>=0){var a=r.getItemGraphicEl(o);a&&(a.__temp?(r.setItemGraphicEl(o,null),this.group.remove(a)):a.downplay())}else b.prototype.downplay.call(this,t,e,i,n)},_newPolyline:function(t){var e=this._polyline;return e&&this._lineGroup.remove(e),e=new _.Polyline({shape:{points:t},silent:!0,z2:10}),this._lineGroup.add(e),this._polyline=e,e},_newPolygon:function(t,e){var i=this._polygon;return i&&this._lineGroup.remove(i),i=new _.Polygon({shape:{points:t,stackedOnPoints:e},silent:!0}),this._lineGroup.add(i),this._polygon=i,i},_getSymbolIgnoreFunc:function(t,e){var i=e.getAxesByScale("ordinal")[0];return i&&i.isLabelIgnored?g.bind(i.isLabelIgnored,i):void 0},_updateAnimation:function(t,e,i,n,r){var o=this._polyline,a=this._polygon,s=t.hostModel,l=y(this._data,t,this._stackedOnPoints,e,this._coordSys,i),u=l.current,h=l.stackedOnCurrent,c=l.next,f=l.stackedOnNext;r&&(u=d(l.current,i,r),h=d(l.stackedOnCurrent,i,r),c=d(l.next,i,r),f=d(l.stackedOnNext,i,r)),o.shape.__points=l.current,o.shape.points=u,x.updateProps(o,{shape:{points:c}},s),a&&(a.setShape({points:u,stackedOnPoints:h}),x.updateProps(a,{shape:{points:c,stackedOnPoints:f,__points:l.next}},s));for(var p=[],g=l.status,v=0;v<g.length;v++){var m=g[v].cmd;if("="===m){var _=t.getItemGraphicEl(g[v].idx1);_&&p.push({el:_,ptIdx:v})}}o.animators&&o.animators.length&&o.animators[0].during(function(){for(var t=0;t<p.length;t++){var e=p[t].el;e.attr("position",o.shape.__points[p[t].ptIdx])}})},remove:function(t){var e=this.group,i=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),i&&i.eachItemGraphicEl(function(t,n){t.__temp&&(e.remove(t),i.setItemGraphicEl(n,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._data=null}})},function(t,e){function i(t){return t>=0?1:-1}function n(t,e,n){for(var r,o=t.getBaseAxis(),a=t.getOtherAxis(o),s=o.onZero?0:a.scale.getExtent()[0],l=a.dim,u="x"===l||"radius"===l?1:0,h=e.stackedOn,c=e.get(l,n);h&&i(h.get(l,n))===i(c);){r=h;break}var d=[];return d[u]=e.get(o.dim,n),d[1-u]=r?r.get(l,n,!0):s,t.dataToPoint(d)}function r(t,e){var i=[];return e.diff(t).add(function(t){i.push({cmd:"+",idx:t})}).update(function(t,e){i.push({cmd:"=",idx:e,idx1:t})}).remove(function(t){i.push({cmd:"-",idx:t})}).execute(),i}t.exports=function(t,e,i,o,a,s){for(var l=r(t,e),u=[],h=[],c=[],d=[],f=[],p=[],g=[],v=s.dimensions,m=0;m<l.length;m++){var y=l[m],x=!0;switch(y.cmd){case"=":var _=t.getItemLayout(y.idx),b=e.getItemLayout(y.idx1);(isNaN(_[0])||isNaN(_[1]))&&(_=b.slice()),u.push(_),h.push(b),c.push(i[y.idx]),d.push(o[y.idx1]),g.push(e.getRawIndex(y.idx1));break;case"+":var w=y.idx;u.push(a.dataToPoint([e.get(v[0],w,!0),e.get(v[1],w,!0)])),h.push(e.getItemLayout(w).slice()),c.push(n(a,e,w)),d.push(o[w]),g.push(e.getRawIndex(w));break;case"-":var w=y.idx,S=t.getRawIndex(w);S!==w?(u.push(t.getItemLayout(w)),h.push(s.dataToPoint([t.get(v[0],w,!0),t.get(v[1],w,!0)])),c.push(i[w]),d.push(n(s,t,w)),g.push(S)):x=!1}x&&(f.push(y),p.push(p.length))}p.sort(function(t,e){return g[t]-g[e]});for(var M=[],A=[],I=[],T=[],L=[],m=0;m<p.length;m++){var w=p[m];M[m]=u[w],A[m]=h[w],I[m]=c[w],T[m]=d[w],L[m]=f[w]}return{current:M,next:A,stackedOnCurrent:I,stackedOnNext:T,status:L}}},function(t,e,i){function n(t){return isNaN(t[0])||isNaN(t[1])}function r(t,e,i,r,o,a,g,v,m,y,x){for(var _=0,b=i,w=0;r>w;w++){var S=e[b];if(b>=o||0>b)break;if(n(S)){if(x){b+=a;continue}break}if(b===i)t[a>0?"moveTo":"lineTo"](S[0],S[1]),c(f,S);else if(m>0){var M=b+a,A=e[M];if(x)for(;A&&n(e[M]);)M+=a,A=e[M];var I=.5,T=e[_],A=e[M];if(!A||n(A))c(p,S);else{n(A)&&!x&&(A=S),s.sub(d,A,T);var L,C;if("x"===y||"y"===y){var D="x"===y?0:1;L=Math.abs(S[D]-T[D]),C=Math.abs(S[D]-A[D])}else L=s.dist(S,T),C=s.dist(S,A);I=C/(C+L),h(p,S,d,-m*(1-I))}l(f,f,v),u(f,f,g),l(p,p,v),u(p,p,g),t.bezierCurveTo(f[0],f[1],p[0],p[1],S[0],S[1]),h(f,S,d,m*I)}else t.lineTo(S[0],S[1]);_=b,b+=a}return w}function o(t,e){var i=[1/0,1/0],n=[-(1/0),-(1/0)];if(e)for(var r=0;r<t.length;r++){var o=t[r];o[0]<i[0]&&(i[0]=o[0]),o[1]<i[1]&&(i[1]=o[1]),o[0]>n[0]&&(n[0]=o[0]),o[1]>n[1]&&(n[1]=o[1])}return{min:e?i:n,max:e?n:i}}var a=i(6),s=i(5),l=s.min,u=s.max,h=s.scaleAndAdd,c=s.copy,d=[],f=[],p=[];t.exports={Polyline:a.extend({type:"ec-polyline",shape:{points:[],smooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},style:{fill:null,stroke:"#000"},buildPath:function(t,e){var i=e.points,a=0,s=i.length,l=o(i,e.smoothConstraint);if(e.connectNulls){for(;s>0&&n(i[s-1]);s--);for(;s>a&&n(i[a]);a++);}for(;s>a;)a+=r(t,i,a,s,s,1,l.min,l.max,e.smooth,e.smoothMonotone,e.connectNulls)+1}}),Polygon:a.extend({type:"ec-polygon",shape:{points:[],stackedOnPoints:[],smooth:0,stackedOnSmooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},buildPath:function(t,e){var i=e.points,a=e.stackedOnPoints,s=0,l=i.length,u=e.smoothMonotone,h=o(i,e.smoothConstraint),c=o(a,e.smoothConstraint);if(e.connectNulls){for(;l>0&&n(i[l-1]);l--);for(;l>s&&n(i[s]);s++);}for(;l>s;){var d=r(t,i,s,l,l,1,h.min,h.max,e.smooth,u,e.connectNulls);r(t,a,s+d-1,d,l,-1,c.min,c.max,e.stackedOnSmooth,u,e.connectNulls),s+=d+1,t.closePath()}}})}},function(t,e,i){var n=i(1),r=i(2);i(100),i(101),i(77)("pie",[{type:"pieToggleSelect",event:"pieselectchanged",method:"toggleSelected"},{type:"pieSelect",event:"pieselected",method:"select"},{type:"pieUnSelect",event:"pieunselected",method:"unSelect"}]),r.registerVisual(n.curry(i(72),"pie")),r.registerLayout(n.curry(i(103),"pie")),r.registerProcessor(n.curry(i(70),"pie"))},function(t,e,i){"use strict";var n=i(14),r=i(1),o=i(10),a=i(30),s=i(66),l=i(2).extendSeriesModel({type:"series.pie",init:function(t){l.superApply(this,"init",arguments),this.legendDataProvider=function(){return this._dataBeforeProcessed},this.updateSelectedMap(t.data),this._defaultLabelLine(t)},mergeOption:function(t){l.superCall(this,"mergeOption",t),this.updateSelectedMap(this.option.data)},getInitialData:function(t,e){var i=a(["value"],t.data),r=new n(i,this);return r.initData(t.data),r},getDataParams:function(t){var e=this._data,i=l.superCall(this,"getDataParams",t),n=e.getSum("value");return i.percent=n?+(e.get("value",t)/n*100).toFixed(2):0,i.$vars.push("percent"),i},_defaultLabelLine:function(t){o.defaultEmphasis(t.labelLine,["show"]);var e=t.labelLine.normal,i=t.labelLine.emphasis;e.show=e.show&&t.label.normal.show,i.show=i.show&&t.label.emphasis.show},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,selectedOffset:10,avoidLabelOverlap:!0,label:{normal:{rotate:!1,show:!0,position:"outer"},emphasis:{}},labelLine:{normal:{show:!0,length:15,length2:15,smooth:!1,lineStyle:{width:1,type:"solid"}}},itemStyle:{normal:{borderWidth:1},emphasis:{}},animationEasing:"cubicOut",data:[]}});r.mixin(l,s),t.exports=l},function(t,e,i){function n(t,e,i,n){var o=e.getData(),a=this.dataIndex,s=o.getName(a),l=e.get("selectedOffset");n.dispatchAction({type:"pieToggleSelect",from:t,name:s,seriesId:e.id}),o.each(function(t){r(o.getItemGraphicEl(t),o.getItemLayout(t),e.isSelected(o.getName(t)),l,i)})}function r(t,e,i,n,r){var o=(e.startAngle+e.endAngle)/2,a=Math.cos(o),s=Math.sin(o),l=i?n:0,u=[a*l,s*l];r?t.animate().when(200,{position:u}).start("bounceOut"):t.attr("position",u)}function o(t,e){function i(){o.ignore=o.hoverIgnore,a.ignore=a.hoverIgnore}function n(){o.ignore=o.normalIgnore,a.ignore=a.normalIgnore}s.Group.call(this);var r=new s.Sector({z2:2}),o=new s.Polyline,a=new s.Text;this.add(r),this.add(o),this.add(a),this.updateData(t,e,!0),this.on("emphasis",i).on("normal",n).on("mouseover",i).on("mouseout",n)}function a(t,e,i,n,r){var o=n.getModel("textStyle"),a="inside"===r||"inner"===r;return{fill:o.getTextColor()||(a?"#fff":t.getItemVisual(e,"color")),opacity:t.getItemVisual(e,"opacity"),textFont:o.getFont(),text:l.retrieve(t.hostModel.getFormattedLabel(e,i),t.getName(e))}}var s=i(3),l=i(1),u=o.prototype;u.updateData=function(t,e,i){function n(){a.stopAnimation(!0),a.animateTo({shape:{r:c.r+10}},300,"elasticOut")}function o(){a.stopAnimation(!0),a.animateTo({shape:{r:c.r}},300,"elasticOut")}var a=this.childAt(0),u=t.hostModel,h=t.getItemModel(e),c=t.getItemLayout(e),d=l.extend({},c);d.label=null,i?(a.setShape(d),a.shape.endAngle=c.startAngle,s.updateProps(a,{shape:{endAngle:c.endAngle}},u,e)):s.updateProps(a,{shape:d},u,e);var f=h.getModel("itemStyle"),p=t.getItemVisual(e,"color");a.useStyle(l.defaults({lineJoin:"bevel",fill:p},f.getModel("normal").getItemStyle())),a.hoverStyle=f.getModel("emphasis").getItemStyle(),r(this,t.getItemLayout(e),h.get("selected"),u.get("selectedOffset"),u.get("animation")),a.off("mouseover").off("mouseout").off("emphasis").off("normal"),h.get("hoverAnimation")&&u.ifEnableAnimation()&&a.on("mouseover",n).on("mouseout",o).on("emphasis",n).on("normal",o),this._updateLabel(t,e),s.setHoverStyle(this)},u._updateLabel=function(t,e){var i=this.childAt(1),n=this.childAt(2),r=t.hostModel,o=t.getItemModel(e),l=t.getItemLayout(e),u=l.label,h=t.getItemVisual(e,"color");s.updateProps(i,{shape:{points:u.linePoints||[[u.x,u.y],[u.x,u.y],[u.x,u.y]]}},r,e),s.updateProps(n,{style:{x:u.x,y:u.y}},r,e),n.attr({style:{textVerticalAlign:u.verticalAlign,textAlign:u.textAlign,textFont:u.font},rotation:u.rotation,origin:[u.x,u.y],z2:10});var c=o.getModel("label.normal"),d=o.getModel("label.emphasis"),f=o.getModel("labelLine.normal"),p=o.getModel("labelLine.emphasis"),g=c.get("position")||d.get("position");n.setStyle(a(t,e,"normal",c,g)),n.ignore=n.normalIgnore=!c.get("show"),n.hoverIgnore=!d.get("show"),i.ignore=i.normalIgnore=!f.get("show"),i.hoverIgnore=!p.get("show"),i.setStyle({stroke:h,opacity:t.getItemVisual(e,"opacity")}),i.setStyle(f.getModel("lineStyle").getLineStyle()),n.hoverStyle=a(t,e,"emphasis",d,g),i.hoverStyle=p.getModel("lineStyle").getLineStyle();var v=f.get("smooth");v&&v===!0&&(v=.4),i.setShape({smooth:v})},l.inherits(o,s.Group);var h=i(27).extend({type:"pie",init:function(){var t=new s.Group;this._sectorGroup=t},render:function(t,e,i,r){if(!r||r.from!==this.uid){var a=t.getData(),s=this._data,u=this.group,h=e.get("animation"),c=!s,d=l.curry(n,this.uid,t,h,i),f=t.get("selectedMode");if(a.diff(s).add(function(t){var e=new o(a,t);c&&e.eachChild(function(t){t.stopAnimation(!0)}),f&&e.on("click",d),a.setItemGraphicEl(t,e),u.add(e)}).update(function(t,e){var i=s.getItemGraphicEl(e);i.updateData(a,t),i.off("click"),f&&i.on("click",d),u.add(i),a.setItemGraphicEl(t,i)}).remove(function(t){var e=s.getItemGraphicEl(t);u.remove(e)}).execute(),h&&c&&a.count()>0){var p=a.getItemLayout(0),g=Math.max(i.getWidth(),i.getHeight())/2,v=l.bind(u.removeClipPath,u);u.setClipPath(this._createClipPath(p.cx,p.cy,g,p.startAngle,p.clockwise,v,t))}this._data=a}},_createClipPath:function(t,e,i,n,r,o,a){var l=new s.Sector({shape:{cx:t,cy:e,r0:0,r:i,startAngle:n,endAngle:n,clockwise:r}});return s.initProps(l,{shape:{endAngle:n+(r?1:-1)*Math.PI*2}},a,o),l}});t.exports=h},function(t,e,i){"use strict";function n(t,e,i,n,r,o,a){function s(e,i,n,r){for(var o=e;i>o;o++)if(t[o].y+=n,o>e&&i>o+1&&t[o+1].y>t[o].y+t[o].height)return void l(o,n/2);l(i-1,n/2)}function l(e,i){for(var n=e;n>=0&&(t[n].y-=i,!(n>0&&t[n].y>t[n-1].y+t[n-1].height));n--);}function u(t,e,i,n,r,o){for(var a=o>0?e?Number.MAX_VALUE:0:e?Number.MAX_VALUE:0,s=0,l=t.length;l>s;s++)if("center"!==t[s].position){var u=Math.abs(t[s].y-n),h=t[s].len,c=t[s].len2,d=r+h>u?Math.sqrt((r+h+c)*(r+h+c)-u*u):Math.abs(t[s].x-i);e&&d>=a&&(d=a-10),!e&&a>=d&&(d=a+10),t[s].x=i+d*o,a=d}}t.sort(function(t,e){return t.y-e.y});for(var h,c=0,d=t.length,f=[],p=[],g=0;d>g;g++)h=t[g].y-c,0>h&&s(g,d,-h,r),c=t[g].y+t[g].height;0>a-c&&l(d-1,c-a);for(var g=0;d>g;g++)t[g].y>=i?p.push(t[g]):f.push(t[g]);u(f,!1,e,i,n,r),u(p,!0,e,i,n,r)}function r(t,e,i,r,o,a){for(var s=[],l=[],u=0;u<t.length;u++)t[u].x<e?s.push(t[u]):l.push(t[u]);n(l,e,i,r,1,o,a),n(s,e,i,r,-1,o,a);for(var u=0;u<t.length;u++){var h=t[u].linePoints;if(h){var c=h[1][0]-h[2][0];t[u].x<e?h[2][0]=t[u].x+3:h[2][0]=t[u].x-3,h[1][1]=h[2][1]=t[u].y,h[1][0]=h[2][0]+c}}}var o=i(16);t.exports=function(t,e,i,n){var a,s,l=t.getData(),u=[],h=!1;l.each(function(i){var n,r,c,d,f=l.getItemLayout(i),p=l.getItemModel(i),g=p.getModel("label.normal"),v=g.get("position")||p.get("label.emphasis.position"),m=p.getModel("labelLine.normal"),y=m.get("length"),x=m.get("length2"),_=(f.startAngle+f.endAngle)/2,b=Math.cos(_),w=Math.sin(_);a=f.cx,s=f.cy;var S="inside"===v||"inner"===v;if("center"===v)n=f.cx,r=f.cy,d="center";else{var M=(S?(f.r+f.r0)/2*b:f.r*b)+a,A=(S?(f.r+f.r0)/2*w:f.r*w)+s;if(n=M+3*b,r=A+3*w,!S){var I=M+b*(y+e-f.r),T=A+w*(y+e-f.r),L=I+(0>b?-1:1)*x,C=T;n=L+(0>b?-5:5),r=C,c=[[M,A],[I,T],[L,C]]}d=S?"center":b>0?"left":"right"}var D=g.getModel("textStyle").getFont(),P=g.get("rotate")?0>b?-_+Math.PI:-_:0,k=t.getFormattedLabel(i,"normal")||l.getName(i),z=o.getBoundingRect(k,D,d,"top");h=!!P,f.label={x:n,y:r,position:v,height:z.height,len:y,len2:x,linePoints:c,textAlign:d,verticalAlign:"middle",font:D,rotation:P},S||u.push(f.label)}),!h&&t.get("avoidLabelOverlap")&&r(u,a,s,e,i,n)}},function(t,e,i){var n=i(4),r=n.parsePercent,o=i(102),a=i(1),s=2*Math.PI,l=Math.PI/180;t.exports=function(t,e,i,u){e.eachSeriesByType(t,function(t){var e=t.get("center"),u=t.get("radius");a.isArray(u)||(u=[0,u]),a.isArray(e)||(e=[e,e]);var h=i.getWidth(),c=i.getHeight(),d=Math.min(h,c),f=r(e[0],h),p=r(e[1],c),g=r(u[0],d/2),v=r(u[1],d/2),m=t.getData(),y=-t.get("startAngle")*l,x=t.get("minAngle")*l,_=m.getSum("value"),b=Math.PI/(_||m.count())*2,w=t.get("clockwise"),S=t.get("roseType"),M=m.getDataExtent("value");M[0]=0;var A=s,I=0,T=y,L=w?1:-1;if(m.each("value",function(t,e){var i;i="area"!==S?0===_?b:t*b:s/(m.count()||1),x>i?(i=x,A-=x):I+=t;var r=T+L*i;m.setItemLayout(e,{angle:i,startAngle:T,endAngle:r,clockwise:w,cx:f,cy:p,r0:g,r:S?n.linearMap(t,M,[g,v]):v}),T=r},!0),s>A)if(.001>=A){var C=s/m.count();m.each(function(t){var e=m.getItemLayout(t);e.startAngle=y+L*t*C,e.endAngle=y+L*(t+1)*C})}else b=A/I,T=y,m.each("value",function(t,e){var i=m.getItemLayout(e),n=i.angle===x?x:t*b;i.startAngle=T,i.endAngle=T+L*n,T+=n});o(t,v,h,c)})}},function(t,e,i){"use strict";i(53),i(105)},function(t,e,i){function n(t,e){function i(t,e){var i=n.getAxis(t);return i.toGlobalCoord(i.dataToCoord(0))}var n=t.coordinateSystem,r=e.axis,o={},a=r.position,s=r.onZero?"onZero":a,l=r.dim,u=n.getRect(),h=[u.x,u.x+u.width,u.y,u.y+u.height],c=e.get("offset")||0,d={x:{top:h[2]-c,bottom:h[3]+c},y:{left:h[0]-c,right:h[1]+c}};d.x.onZero=Math.max(Math.min(i("y"),d.x.bottom),d.x.top),d.y.onZero=Math.max(Math.min(i("x"),d.y.right),d.y.left),o.position=["y"===l?d.y[s]:h[0],"x"===l?d.x[s]:h[3]],o.rotation=Math.PI/2*("x"===l?0:1);var f={top:-1,bottom:1,left:-1,right:1};o.labelDirection=o.tickDirection=o.nameDirection=f[a],r.onZero&&(o.labelOffset=d[l][a]-d[l].onZero),e.getModel("axisTick").get("inside")&&(o.tickDirection=-o.tickDirection),e.getModel("axisLabel").get("inside")&&(o.labelDirection=-o.labelDirection);var p=e.getModel("axisLabel").get("rotate");return o.labelRotation="top"===s?-p:p,o.labelInterval=r.getLabelInterval(),o.z2=1,o}var r=i(1),o=i(3),a=i(50),s=a.ifIgnoreOnTick,l=a.getInterval,u=["axisLine","axisLabel","axisTick","axisName"],h=["splitArea","splitLine"],c=i(2).extendComponentView({type:"axis",render:function(t,e){this.group.removeAll();var i=this._axisGroup;if(this._axisGroup=new o.Group,this.group.add(this._axisGroup),t.get("show")){var s=e.getComponent("grid",t.get("gridIndex")),l=n(s,t),c=new a(t,l);r.each(u,c.add,c),this._axisGroup.add(c.getGroup()),r.each(h,function(e){t.get(e+".show")&&this["_"+e](t,s,l.labelInterval)},this),o.groupTransition(i,this._axisGroup,t)}},_splitLine:function(t,e,i){var n=t.axis,a=t.getModel("splitLine"),u=a.getModel("lineStyle"),h=u.get("color"),c=l(a,i);h=r.isArray(h)?h:[h];for(var d=e.coordinateSystem.getRect(),f=n.isHorizontal(),p=0,g=n.getTicksCoords(),v=n.scale.getTicks(),m=[],y=[],x=u.getLineStyle(),_=0;_<g.length;_++)if(!s(n,_,c)){var b=n.toGlobalCoord(g[_]);f?(m[0]=b,m[1]=d.y,y[0]=b,y[1]=d.y+d.height):(m[0]=d.x,m[1]=b,y[0]=d.x+d.width,y[1]=b);var w=p++%h.length;this._axisGroup.add(new o.Line(o.subPixelOptimizeLine({anid:"line_"+v[_],shape:{x1:m[0],y1:m[1],x2:y[0],y2:y[1]},style:r.defaults({stroke:h[w]},x),silent:!0})))}},_splitArea:function(t,e,i){var n=t.axis,a=t.getModel("splitArea"),u=a.getModel("areaStyle"),h=u.get("color"),c=e.coordinateSystem.getRect(),d=n.getTicksCoords(),f=n.scale.getTicks(),p=n.toGlobalCoord(d[0]),g=n.toGlobalCoord(d[0]),v=0,m=l(a,i),y=u.getAreaStyle();h=r.isArray(h)?h:[h];for(var x=1;x<d.length;x++)if(!s(n,x,m)){var _,b,w,S,M=n.toGlobalCoord(d[x]);n.isHorizontal()?(_=p,b=c.y,w=M-_,S=c.height):(_=c.x,b=g,w=c.width,S=M-b);var A=v++%h.length;this._axisGroup.add(new o.Rect({anid:"area_"+f[x],shape:{x:_,y:b,width:w,height:S},style:r.defaults({fill:h[A]},y),silent:!0})),p=_+w,g=b+S}}});c.extend({type:"xAxis"}),c.extend({type:"yAxis"})},function(t,e,i){var n=i(1),r=i(10),o=i(2);o.registerAction("dataZoom",function(t,e){var i=r.createLinkedNodesFinder(n.bind(e.eachComponent,e,"dataZoom"),r.eachAxisDim,function(t,e){return t.get(e.axisIndex)}),o=[];e.eachComponent({mainType:"dataZoom",query:t},function(t,e){o.push.apply(o,i(t).nodes)}),n.each(o,function(e,i){e.setRawRange({start:t.start,end:t.end,startValue:t.startValue,endValue:t.endValue})})})},function(t,e,i){function n(t,e,i){i.getAxisProxy(t.name,e).reset(i)}function r(t,e,i){i.getAxisProxy(t.name,e).filterData(i)}var o=i(2);o.registerProcessor(function(t,e){t.eachComponent("dataZoom",function(t){t.eachTargetAxis(n),t.eachTargetAxis(r)}),t.eachComponent("dataZoom",function(t){var e=t.findRepresentativeAxisProxy(),i=e.getDataPercentWindow(),n=e.getDataValueWindow();t.setRawRange({start:i[0],end:i[1],startValue:n[0],endValue:n[1]})})})},function(t,e,i){function n(t){var e=t[a];return e||(e=t[a]=[{}]),e}var r=i(1),o=r.each,a="\x00_ec_hist_store",s={push:function(t,e){var i=n(t);o(e,function(e,n){for(var r=i.length-1;r>=0;r--){var o=i[r];if(o[n])break}if(0>r){var a=t.queryComponents({mainType:"dataZoom",subType:"select",id:n})[0];if(a){var s=a.getPercentRange();i[0][n]={dataZoomId:n,start:s[0],end:s[1]}}}}),i.push(e)},pop:function(t){var e=n(t),i=e[e.length-1];e.length>1&&e.pop();var r={};return o(i,function(t,i){for(var n=e.length-1;n>=0;n--){var t=e[n][i];if(t){r[i]=t;break}}}),r},clear:function(t){t[a]=null},count:function(t){return n(t).length}};t.exports=s},function(t,e,i){i(11).registerSubTypeDefaulter("dataZoom",function(t){return"slider"})},function(t,e,i){function n(t){V.call(this),this._zr=t,this.group=new B.Group,this._brushType,this._brushOption,this._panels,this._track=[],this._dragging,this._covers=[],this._creatingCover,this._creatingPanel,this._enableGlobalPan,this._uid="brushController_"+et++,this._handlers={},W(it,function(t,e){this._handlers[e]=N.bind(t,this)},this)}function r(t,e){var i=t._zr;t._enableGlobalPan||G.take(i,Q,t._uid),W(t._handlers,function(t,e){i.on(e,t)}),t._brushType=e.brushType,t._brushOption=N.merge(N.clone(tt),e,!0)}function o(t){var e=t._zr;G.release(e,Q,t._uid),W(t._handlers,function(t,i){e.off(i,t)}),t._brushType=t._brushOption=null}function a(t,e){var i=nt[e.brushType].createCover(t,e);return u(i),i.__brushOption=e,t.group.add(i),i}function s(t,e){var i=c(e);return i.endCreating&&(i.endCreating(t,e),u(e)),e}function l(t,e){var i=e.__brushOption;c(e).updateCoverShape(t,e,i.range,i)}function u(t){t.traverse(function(t){t.z=X,t.z2=X})}function h(t,e){c(e).updateCommon(t,e),l(t,e)}function c(t){return nt[t.__brushOption.brushType]}function d(t,e,i){var n=t._panels;if(!n)return!0;var r;return W(n,function(t){t.contain(e,i)&&(r=t)}),r}function f(t,e){var i=t._panels;if(!i)return!0;var n=e.__brushOption.panelId;return null!=n?i[n]:!0}function p(t){var e=t._covers,i=e.length;return W(e,function(e){t.group.remove(e)},t),e.length=0,!!i}function g(t,e){var i=Z(t._covers,function(t){var e=t.__brushOption,i=N.clone(e.range);return{brushType:e.brushType,panelId:e.panelId,range:i}});t.trigger("brush",i,{isEnd:!!e.isEnd,removeOnClick:!!e.removeOnClick})}function v(t){var e=t._track;if(!e.length)return!1;var i=e[e.length-1],n=e[0],r=i[0]-n[0],o=i[1]-n[1],a=U(r*r+o*o,.5);return a>Y}function m(t){var e=t.length-1;return 0>e&&(e=0),[t[0],t[e]]}function y(t,e,i,n){var r=new B.Group;return r.add(new B.Rect({name:"main",style:w(i),silent:!0,draggable:!0,cursor:"move",drift:H(t,e,r,"nswe"),ondragend:H(g,e,{isEnd:!0})})),W(n,function(i){r.add(new B.Rect({name:i,style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:H(t,e,r,i),ondragend:H(g,e,{isEnd:!0})}))}),r}function x(t,e,i,n){var r=n.brushStyle.lineWidth||0,o=j(r,$),a=i[0][0],s=i[1][0],l=a-r/2,u=s-r/2,h=i[0][1],c=i[1][1],d=h-o+r/2,f=c-o+r/2,p=h-a,g=c-s,v=p+r,m=g+r;b(t,e,"main",a,s,p,g),n.transformable&&(b(t,e,"w",l,u,o,m),b(t,e,"e",d,u,o,m),b(t,e,"n",l,u,v,o),b(t,e,"s",l,f,v,o),b(t,e,"nw",l,u,o,o),b(t,e,"ne",d,u,o,o),b(t,e,"sw",l,f,o,o),b(t,e,"se",d,f,o,o))}function _(t,e){var i=e.__brushOption,n=i.transformable,r=e.childAt(0);r.useStyle(w(i)),r.attr({silent:!n,cursor:n?"move":"default"}),W(["w","e","n","s","se","sw","ne","nw"],function(i){var r=e.childOfName(i),o=A(t,i);r&&r.attr({silent:!n,invisible:!n,cursor:n?J[o]+"-resize":null})})}function b(t,e,i,n,r,o,a){var s=e.childOfName(i);s&&s.setShape(D(C(t,e,[[n,r],[n+o,r+a]])))}function w(t){return N.defaults({strokeNoScale:!0},t.brushStyle)}function S(t,e,i,n){var r=[q(t,i),q(e,n)],o=[j(t,i),j(e,n)];return[[r[0],o[0]],[r[1],o[1]]]}function M(t){return B.getTransform(t.group)}function A(t,e){if(e.length>1){e=e.split("");var i=[A(t,e[0]),A(t,e[1])];return("e"===i[0]||"w"===i[0])&&i.reverse(),i.join("")}var n={w:"left",e:"right",n:"top",s:"bottom"},r={left:"w",right:"e",top:"n",bottom:"s"},i=B.transformDirection(n[e],M(t));return r[i]}function I(t,e,i,n,r,o,a,s){var l=n.__brushOption,u=t(l.range),c=L(i,o,a);W(r.split(""),function(t){var e=K[t];u[e[0]][e[1]]+=c[e[0]]}),l.range=e(S(u[0][0],u[1][0],u[0][1],u[1][1])),h(i,n),g(i,{isEnd:!1})}function T(t,e,i,n,r){var o=e.__brushOption.range,a=L(t,i,n);W(o,function(t){t[0]+=a[0],t[1]+=a[1]}),h(t,e),g(t,{isEnd:!1})}function L(t,e,i){var n=t.group,r=n.transformCoordToLocal(e,i),o=n.transformCoordToLocal(0,0);return[r[0]-o[0],r[1]-o[1]]}function C(t,e,i){var n=f(t,e);if(n===!0)return N.clone(i);var r=n.getBoundingRect();return N.map(i,function(t){var e=t[0];e=j(e,r.x),e=q(e,r.x+r.width);var i=t[1];return i=j(i,r.y),i=q(i,r.y+r.height),[e,i]})}function D(t){var e=q(t[0][0],t[1][0]),i=q(t[0][1],t[1][1]),n=j(t[0][0],t[1][0]),r=j(t[0][1],t[1][1]);return{x:e,y:i,width:n-e,height:r-i}}function P(t,e){var i=e.offsetX,n=e.offsetY,r=t._zr;if(t._brushType){for(var o,a=t._panels,s=t._covers,l=0;l<s.length;l++)if(nt[s[l].__brushOption.brushType].contain(s[l],i,n)){o=!0;break}o||(a?W(a,function(t){t.contain(i,n)&&r.setCursorStyle("crosshair")}):r.setCursorStyle("crosshair"))}}function k(t){var e=t.event;e.preventDefault&&e.preventDefault()}function z(t,e,i){return t.childOfName("main").contain(e,i)}function O(t,e,i){var n,r=e.offsetX,o=e.offsetY,u=t._creatingCover,h=t._creatingPanel,c=t._brushOption;if(t._track.push(t.group.transformCoordToLocal(r,o)),v(t)||u){if(h&&!u){"single"===c.brushMode&&p(t);var f=N.clone(c);f.panelId=h===!0?null:h.__brushPanelId,u=t._creatingCover=a(t,f),t._covers.push(u)}if(u){var g=nt[t._brushType],m=u.__brushOption;m.range=g.getCreatingRange(C(t,u,t._track)),i&&(s(t,u),g.updateCommon(t,u)),l(t,u),n={isEnd:i}}}else i&&"single"===c.brushMode&&c.removeOnClick&&d(t,r,o)&&p(t)&&(n={isEnd:i,removeOnClick:!0});return n}function E(t){if(this._dragging){k(t);var e=O(this,t,!0);this._dragging=!1,this._track=[],this._creatingCover=null,e&&g(this,e)}}function R(t){return{createCover:function(e,i){return y(H(I,function(e){var i=[e,[0,100]];return t&&i.reverse(),i},function(e){return e[t]}),e,i,[["w","e"],["n","s"]][t])},getCreatingRange:function(e){var i=m(e),n=q(i[0][t],i[1][t]),r=j(i[0][t],i[1][t]);return[n,r]},updateCoverShape:function(e,i,n,r){var o,a=r.brushStyle.width;if(null==a){var s=f(e,i),l=0;if(s!==!0){var u=s.getBoundingRect();a=t?u.width:u.height,l=t?u.x:u.y}o=[l,l+(a||0)]}else o=[-a/2,a/2];var h=[n,o];t&&h.reverse(),x(e,i,h,r)},updateCommon:_,contain:z}}var V=i(20),N=i(1),B=i(3),G=i(112),F=i(45),H=N.curry,W=N.each,Z=N.map,q=Math.min,j=Math.max,U=Math.pow,X=1e4,Y=6,$=6,Q="globalPan",K={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},J={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},tt={brushStyle:{lineWidth:2,stroke:"rgba(0,0,0,0.3)",fill:"rgba(0,0,0,0.1)"},transformable:!0,brushMode:"single",removeOnClick:!1},et=0;n.prototype={constructor:n,enableBrush:function(t){return this._brushType&&o(this),t.brushType&&r(this,t),this},setPanels:function(t){var e=this._panels||{},i=this._panels=t&&t.length&&{},n=this.group;return i&&W(t,function(t){var r=t.panelId,o=e[r];o||(o=new B.Rect({silent:!0,invisible:!0}),n.add(o)),o.attr("shape",t.rect),o.__brushPanelId=r,i[r]=o,e[r]=null}),W(e,function(t){t&&n.remove(t)}),this},mount:function(t){t=t||{},this._enableGlobalPan=t.enableGlobalPan;var e=this.group;return this._zr.add(e),e.attr({position:t.position||[0,0],rotation:t.rotation||0,scale:t.scale||[1,1]}),this},eachCover:function(t,e){W(this._covers,t,e)},updateCovers:function(t){function e(t,e){return(null!=t.id?t.id:o+e)+"-"+t.brushType}function i(t,i){return e(t.__brushOption,i)}function n(e,i){var n=t[e];if(null!=i&&l[i]===d)u[e]=l[i];else{var r=u[e]=null!=i?(l[i].__brushOption=n,l[i]):s(c,a(c,n));h(c,r)}}function r(t){l[t]!==d&&c.group.remove(l[t])}t=N.map(t,function(t){return N.merge(N.clone(tt),t,!0)});var o="\x00-brush-index-",l=this._covers,u=this._covers=[],c=this,d=this._creatingCover;return new F(l,t,i,e).add(n).update(n).remove(r).execute(),this},unmount:function(){return this.enableBrush(!1),p(this),this._zr.remove(this.group),this},dispose:function(){this.unmount(),this.off()}},N.mixin(n,V);var it={mousedown:function(t){if(this._dragging)E.call(this,t);else if(!t.target||!t.target.draggable){k(t);var e=t.offsetX,i=t.offsetY;this._creatingCover=null;var n=this._creatingPanel=d(this,e,i);n&&(this._dragging=!0,this._track=[this.group.transformCoordToLocal(e,i)])}},mousemove:function(t){if(P(this,t),this._dragging){k(t);var e=O(this,t,!1);e&&g(this,e)}},mouseup:E},nt={lineX:R(0),lineY:R(1),rect:{createCover:function(t,e){return y(H(I,function(t){return t},function(t){return t}),t,e,["w","e","n","s","se","sw","ne","nw"])},getCreatingRange:function(t){var e=m(t);return S(e[1][0],e[1][1],e[0][0],e[0][1])},updateCoverShape:function(t,e,i,n){x(t,e,i,n)},updateCommon:_,contain:z},polygon:{createCover:function(t,e){var i=new B.Group;return i.add(new B.Polyline({name:"main",style:w(e),silent:!0})),i},getCreatingRange:function(t){return t},endCreating:function(t,e){e.remove(e.childAt(0)),e.add(new B.Polygon({name:"main",draggable:!0,drift:H(T,t,e),ondragend:H(g,t,{isEnd:!0})}))},updateCoverShape:function(t,e,i,n){e.childAt(0).setShape({points:C(t,e,i)})},updateCommon:_,contain:z}};t.exports=n},function(t,e,i){function n(t){return t[0]>t[1]&&t.reverse(),t}function r(t,e){for(var i=!0,n=0;n<h.length;n++){var r=h[n]+"Index";if(t[r]>=0){i=!1;for(var o=0;o<e.length;o++)if(e[o][r]===t[r])return e[o]}}return i}function o(t,e,i,r){var o=i.coordSys.getAxis(t);return n(a.map([0,1],function(t){return e?o.coordToData(o.toLocalCoord(r[t])):o.toGlobalCoord(o.dataToCoord(r[t]))}))}var a=i(1),s=i(3),l=a.each,u={},h=["geo","xAxis","yAxis"],c="--",d=["dataToPoint","pointToData"];u.parseOutputRanges=function(t,e,i,n){l(t,function(t,i){var o=t.panelId;if(o){o=o.split(c),t[o[0]+"Index"]=+o[1];var a=r(t,e);t.coordRange=f[t.brushType](1,a,t.range),n&&(n[i]=a)}})},u.parseInputRanges=function(t,e){l(t.areas,function(e){var i=r(e,t.coordInfoList);e.range=e.range||[],i&&i!==!0&&(e.range=f[e.brushType](0,i,e.coordRange),e.panelId=i.panelId)})},u.makePanelOpts=function(t){var e=[];return l(t,function(t){var i,n=t.coordSys;t.geoIndex>=0?(i=n.getBoundingRect().clone(),i.applyTransform(s.getTransform(n))):i=n.grid.getRect().clone(),e.push({panelId:t.panelId,rect:i})}),e},u.makeCoordInfoList=function(t,e){var i=[];return l(h,function(n){var r=t[n+"Index"];null!=r&&"none"!==r&&("all"===r||a.isArray(r)||(r=[r]),e.eachComponent({mainType:n},function(t,e){if(!("all"!==r&&a.indexOf(r,e)<0)){var o,s;"xAxis"===n||"yAxis"===n?o=t.axis.grid:s=t.coordinateSystem;for(var l,u=0,h=i.length;h>u;u++){var d=i[u];if("yAxis"===n&&!d.yAxis&&d.xAxis){var f=o.getCartesian(d.xAxisIndex,e);if(f){s=f,l=d;break}}}!l&&i.push(l={}),l[n]=t,l[n+"Index"]=e,l.panelId=n+c+e,l.coordSys=s||o.getCartesian(l.xAxisIndex,l.yAxisIndex),l.coordSys?i[n+"Has"]=!0:i.pop()}}))}),i},u.controlSeries=function(t,e,i){var n=r(t,e.coordInfoList);return n===!0||n&&n.coordSys===i.coordinateSystem};var f={lineX:a.curry(o,"x"),lineY:a.curry(o,"y"),rect:function(t,e,i){var r=e.coordSys,o=r[d[t]]([i[0][0],i[1][0]]),a=r[d[t]]([i[0][1],i[1][1]]);return[n([o[0],a[0]]),n([o[1],a[1]])]},polygon:function(t,e,i){var n=e.coordSys;return a.map(i,n[d[t]],n)}};t.exports=u},function(t,e,i){function n(t){return t[r]||(t[r]={})}var r="\x00_ec_interaction_mutex",o={take:function(t,e,i){var r=n(t);r[e]=i},release:function(t,e,i){var r=n(t),o=r[e];o===i&&(r[e]=null)},isTaken:function(t,e){return!!n(t)[e]}};i(2).registerAction({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},function(){}),t.exports=o},function(t,e,i){function n(t,e,i){r.positionGroup(t,e.getBoxLayoutParams(),{width:i.getWidth(),height:i.getHeight()},e.get("padding"))}var r=i(13),o=i(9),a=i(3);t.exports={layout:function(t,e,i){var o=r.getLayoutRect(e.getBoxLayoutParams(),{width:i.getWidth(),height:i.getHeight()},e.get("padding"));r.box(e.get("orient"),t,e.get("itemGap"),o.width,o.height),n(t,e,i)},addBackground:function(t,e){var i=o.normalizeCssArray(e.get("padding")),n=t.getBoundingRect(),r=e.getItemStyle(["color","opacity"]);r.fill=e.get("backgroundColor");var s=new a.Rect({shape:{x:n.x-i[3],y:n.y-i[0],width:n.width+i[1]+i[3],height:n.height+i[0]+i[2]},style:r,silent:!0,z2:-1});a.subPixelOptimizeRect(s),t.add(s)}}},function(t,e,i){var n=i(1),r=i(42),o=i(118),a=function(t,e,i,n,o){r.call(this,t,e,i),this.type=n||"value",this.position=o||"bottom"};a.prototype={constructor:a,index:0,onZero:!1,model:null,isHorizontal:function(){var t=this.position;return"top"===t||"bottom"===t},getGlobalExtent:function(){var t=this.getExtent();return t[0]=this.toGlobalCoord(t[0]),t[1]=this.toGlobalCoord(t[1]),t},getLabelInterval:function(){var t=this._labelInterval;return t||(t=this._labelInterval=o(this)),t},isLabelIgnored:function(t){if("category"===this.type){var e=this.getLabelInterval();return"function"==typeof e&&!e(t,this.scale.getLabel(t))||t%(e+1)}},toLocalCoord:null,toGlobalCoord:null},n.inherits(a,r),t.exports=a},function(t,e,i){"use strict";function n(t){return this._axes[t]}var r=i(1),o=function(t){this._axes={},this._dimList=[],this.name=t||""};o.prototype={constructor:o,type:"cartesian",getAxis:function(t){return this._axes[t]},getAxes:function(){return r.map(this._dimList,n,this)},getAxesByScale:function(t){return t=t.toLowerCase(),r.filter(this.getAxes(),function(e){return e.scale.type===t})},addAxis:function(t){var e=t.dim;this._axes[e]=t,this._dimList.push(e)},dataToCoord:function(t){return this._dataCoordConvert(t,"dataToCoord")},coordToData:function(t){return this._dataCoordConvert(t,"coordToData")},_dataCoordConvert:function(t,e){for(var i=this._dimList,n=t instanceof Array?[]:{},r=0;r<i.length;r++){var o=i[r],a=this._axes[o];n[o]=a[e](t[o])}return n}},t.exports=o},function(t,e,i){"use strict";function n(t){o.call(this,t)}var r=i(1),o=i(115);n.prototype={constructor:n,type:"cartesian2d",dimensions:["x","y"],getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},containPoint:function(t){var e=this.getAxis("x"),i=this.getAxis("y");return e.contain(e.toLocalCoord(t[0]))&&i.contain(i.toLocalCoord(t[1]))},containData:function(t){return this.getAxis("x").containData(t[0])&&this.getAxis("y").containData(t[1])},dataToPoints:function(t,e){return t.mapArray(["x","y"],function(t,e){return this.dataToPoint([t,e])},e,this)},dataToPoint:function(t,e){var i=this.getAxis("x"),n=this.getAxis("y");return[i.toGlobalCoord(i.dataToCoord(t[0],e)),n.toGlobalCoord(n.dataToCoord(t[1],e))]},pointToData:function(t,e){var i=this.getAxis("x"),n=this.getAxis("y");return[i.coordToData(i.toLocalCoord(t[0]),e),n.coordToData(n.toLocalCoord(t[1]),e)]},getOtherAxis:function(t){return this.getAxis("x"===t.dim?"y":"x")}},r.inherits(n,o),t.exports=n},function(t,e,i){"use strict";i(53);var n=i(11);t.exports=n.extend({type:"grid",dependencies:["xAxis","yAxis"],layoutMode:"box",coordinateSystem:null,defaultOption:{show:!1,zlevel:0,z:0,left:"10%",top:60,right:"10%",bottom:60,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"}})},function(t,e,i){"use strict";var n=i(1),r=i(22);t.exports=function(t){var e=t.model,i=e.getModel("axisLabel"),o=i.get("interval");return"category"!==t.type||"auto"!==o?"auto"===o?0:o:r.getAxisLabelInterval(n.map(t.scale.getTicks(),t.dataToCoord,t),e.getFormattedLabels(),i.getModel("textStyle").getFont(),t.isHorizontal())}},function(t,e,i){"use strict";function n(t){return t.get("stack")||"__ec_stack_"+t.seriesIndex}function r(t){return t.dim+t.index}function o(t,e){var i={};s.each(t,function(t,e){var o=t.getData(),a=t.coordinateSystem,s=a.getBaseAxis(),l=s.getExtent(),h="category"===s.type?s.getBandWidth():Math.abs(l[1]-l[0])/o.count(),c=i[r(s)]||{bandWidth:h,remainedWidth:h,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},d=c.stacks;i[r(s)]=c;var f=n(t);d[f]||c.autoWidthCount++,d[f]=d[f]||{width:0,maxWidth:0};var p=u(t.get("barWidth"),h),g=u(t.get("barMaxWidth"),h),v=t.get("barGap"),m=t.get("barCategoryGap");p&&!d[f].width&&(p=Math.min(c.remainedWidth,p),d[f].width=p,c.remainedWidth-=p),g&&(d[f].maxWidth=g),null!=v&&(c.gap=v),null!=m&&(c.categoryGap=m)});var o={};return s.each(i,function(t,e){o[e]={};var i=t.stacks,n=t.bandWidth,r=u(t.categoryGap,n),a=u(t.gap,1),l=t.remainedWidth,h=t.autoWidthCount,c=(l-r)/(h+(h-1)*a);c=Math.max(c,0),s.each(i,function(t,e){var i=t.maxWidth;!t.width&&i&&c>i&&(i=Math.min(i,l),l-=i,t.width=i,h--)}),c=(l-r)/(h+(h-1)*a),c=Math.max(c,0);var d,f=0;s.each(i,function(t,e){t.width||(t.width=c),d=t,f+=t.width*(1+a)}),d&&(f-=d.width*a);var p=-f/2;s.each(i,function(t,i){o[e][i]=o[e][i]||{offset:p,width:t.width},p+=t.width*(1+a)})}),o}function a(t,e,i){var a=o(s.filter(e.getSeriesByType(t),function(t){return!e.isSeriesFiltered(t)&&t.coordinateSystem&&"cartesian2d"===t.coordinateSystem.type})),l={};e.eachSeriesByType(t,function(t){var e=t.getData(),i=t.coordinateSystem,o=i.getBaseAxis(),s=n(t),u=a[r(o)][s],h=u.offset,c=u.width,d=i.getOtherAxis(o),f=t.get("barMinHeight")||0,p=o.onZero?d.toGlobalCoord(d.dataToCoord(0)):d.getGlobalExtent()[0],g=i.dataToPoints(e,!0);l[s]=l[s]||[],e.setLayout({offset:h,size:c}),e.each(d.dim,function(t,i){if(!isNaN(t)){l[s][i]||(l[s][i]={p:p,n:p});var n,r,o,a,u=t>=0?"p":"n",v=g[i],m=l[s][i][u];d.isHorizontal()?(n=m,r=v[1]+h,o=v[0]-m,a=c,Math.abs(o)<f&&(o=(0>o?-1:1)*f),l[s][i][u]+=o):(n=v[0]+h,r=m,o=c,a=v[1]-m,Math.abs(a)<f&&(a=(0>=a?-1:1)*f),l[s][i][u]+=a),e.setItemLayout(i,{x:n,y:r,width:o,height:a})}},!0)},this)}var s=i(1),l=i(4),u=l.parsePercent;t.exports=a},function(t,e,i){var n=i(3),r=i(1),o=Math.PI;t.exports=function(t,e){e=e||{},r.defaults(e,{text:"loading",color:"#c23531",textColor:"#000",maskColor:"rgba(255, 255, 255, 0.8)",zlevel:0});var i=new n.Rect({style:{fill:e.maskColor},zlevel:e.zlevel,z:1e4}),a=new n.Arc({shape:{startAngle:-o/2,endAngle:-o/2+.1,r:10},style:{stroke:e.color,lineCap:"round",lineWidth:5},zlevel:e.zlevel,z:10001}),s=new n.Rect({style:{fill:"none",text:e.text,textPosition:"right",textDistance:10,textFill:e.textColor},zlevel:e.zlevel,z:10001});a.animateShape(!0).when(1e3,{endAngle:3*o/2}).start("circularInOut"),a.animateShape(!0).when(1e3,{startAngle:3*o/2}).delay(300).start("circularInOut");var l=new n.Group;return l.add(a),l.add(s),l.add(i),l.resize=function(){var e=t.getWidth()/2,n=t.getHeight()/2;a.setShape({cx:e,cy:n});var r=a.shape.r;s.setShape({x:e-r,y:n-r,width:2*r,height:2*r}),i.setShape({x:0,y:0,width:t.getWidth(),height:t.getHeight()})},l.resize(),l}},function(t,e,i){function n(t,e){for(var i in e)_.hasClass(i)||("object"==typeof e[i]?t[i]=t[i]?c.merge(t[i],e[i],!1):c.clone(e[i]):null==t[i]&&(t[i]=e[i]))}function r(t){t=t,this.option={},this.option[w]=1,this._componentsMap={},this._seriesIndices=null,n(t,this._theme.option),c.merge(t,b,!1),this.mergeOption(t)}function o(t,e){c.isArray(e)||(e=e?[e]:[]);var i={};return p(e,function(e){i[e]=(t[e]||[]).slice()}),i}function a(t,e){var i={};p(e,function(t,e){var n=t.exist;n&&(i[n.id]=t)}),p(e,function(e,n){var r=e.option;if(c.assert(!r||null==r.id||!i[r.id]||i[r.id]===e,"id duplicates: "+(r&&r.id)),r&&null!=r.id&&(i[r.id]=e),x(r)){var o=s(t,r,e.exist);e.keyInfo={mainType:t,subType:o}}}),p(e,function(t,e){var n=t.exist,r=t.option,o=t.keyInfo;if(x(r)){if(o.name=null!=r.name?r.name+"":n?n.name:"\x00-",n)o.id=n.id;else if(null!=r.id)o.id=r.id+"";else{var a=0;do o.id="\x00"+o.name+"\x00"+a++;while(i[o.id])}i[o.id]=t}})}function s(t,e,i){var n=e.type?e.type:i?i.subType:_.determineSubType(t,e);return n}function l(t){return v(t,function(t){return t.componentIndex})||[]}function u(t,e){return e.hasOwnProperty("subType")?g(t,function(t){return t.subType===e.subType}):t}function h(t){}var c=i(1),d=i(10),f=i(8),p=c.each,g=c.filter,v=c.map,m=c.isArray,y=c.indexOf,x=c.isObject,_=i(11),b=i(123),w="\x00_ec_inner",S=f.extend({constructor:S,init:function(t,e,i,n){i=i||{},this.option=null,this._theme=new f(i),this._optionManager=n},setOption:function(t,e){c.assert(!(w in t),"please use chart.getOption()"),this._optionManager.setOption(t,e),this.resetOption()},resetOption:function(t){var e=!1,i=this._optionManager;if(!t||"recreate"===t){var n=i.mountOption("recreate"===t);this.option&&"recreate"!==t?(this.restoreData(),this.mergeOption(n)):r.call(this,n),e=!0}if("timeline"!==t&&"media"!==t||this.restoreData(),!t||"recreate"===t||"timeline"===t){var o=i.getTimelineOption(this);o&&(this.mergeOption(o),e=!0)}if(!t||"recreate"===t||"media"===t){var a=i.getMediaOption(this,this._api);a.length&&p(a,function(t){this.mergeOption(t,e=!0)},this)}return e},mergeOption:function(t){function e(e,r){var s=d.normalizeToArray(t[e]),u=d.mappingToExists(n[e],s);a(e,u);var h=o(n,r);i[e]=[],n[e]=[],p(u,function(t,r){var o=t.exist,a=t.option;if(c.assert(x(a)||o,"Empty component definition"),a){var s=_.getClass(e,t.keyInfo.subType,!0);if(o&&o instanceof s)o.mergeOption(a,this),o.optionUpdated(a,!1);else{var l=c.extend({dependentModels:h,componentIndex:r},t.keyInfo);o=new s(a,this,this,l),o.init(a,this,this,l),o.optionUpdated(null,!0)}}else o.mergeOption({},this),o.optionUpdated({},!1);n[e][r]=o,i[e][r]=o.option},this),"series"===e&&(this._seriesIndices=l(n.series))}var i=this.option,n=this._componentsMap,r=[];p(t,function(t,e){null!=t&&(_.hasClass(e)?r.push(e):i[e]=null==i[e]?c.clone(t):c.merge(i[e],t,!0))}),_.topologicalTravel(r,_.getAllClassMainTypes(),e,this)},getOption:function(){var t=c.clone(this.option);return p(t,function(e,i){if(_.hasClass(i)){for(var e=d.normalizeToArray(e),n=e.length-1;n>=0;n--)d.isIdInner(e[n])&&e.splice(n,1);t[i]=e}}),delete t[w],t},getTheme:function(){return this._theme},getComponent:function(t,e){var i=this._componentsMap[t];return i?i[e||0]:void 0},queryComponents:function(t){var e=t.mainType;if(!e)return[];var i=t.index,n=t.id,r=t.name,o=this._componentsMap[e];if(!o||!o.length)return[];var a;if(null!=i)m(i)||(i=[i]),a=g(v(i,function(t){return o[t]}),function(t){return!!t});else if(null!=n){var s=m(n);a=g(o,function(t){return s&&y(n,t.id)>=0||!s&&t.id===n})}else if(null!=r){var l=m(r);a=g(o,function(t){return l&&y(r,t.name)>=0||!l&&t.name===r})}return u(a,t)},findComponents:function(t){function e(t){var e=r+"Index",i=r+"Id",n=r+"Name";return t&&(t.hasOwnProperty(e)||t.hasOwnProperty(i)||t.hasOwnProperty(n))?{mainType:r,index:t[e],id:t[i],name:t[n]}:null}function i(e){return t.filter?g(e,t.filter):e}var n=t.query,r=t.mainType,o=e(n),a=o?this.queryComponents(o):this._componentsMap[r];return i(u(a,t))},eachComponent:function(t,e,i){var n=this._componentsMap;if("function"==typeof t)i=e,e=t,p(n,function(t,n){p(t,function(t,r){e.call(i,n,t,r)})});else if(c.isString(t))p(n[t],e,i);else if(x(t)){var r=this.findComponents(t);p(r,e,i)}},getSeriesByName:function(t){var e=this._componentsMap.series;return g(e,function(e){return e.name===t})},getSeriesByIndex:function(t){return this._componentsMap.series[t]},getSeriesByType:function(t){var e=this._componentsMap.series;return g(e,function(e){return e.subType===t})},getSeries:function(){return this._componentsMap.series.slice()},eachSeries:function(t,e){h(this),p(this._seriesIndices,function(i){var n=this._componentsMap.series[i];t.call(e,n,i)},this)},eachRawSeries:function(t,e){p(this._componentsMap.series,t,e)},eachSeriesByType:function(t,e,i){h(this),p(this._seriesIndices,function(n){var r=this._componentsMap.series[n];r.subType===t&&e.call(i,r,n)},this)},eachRawSeriesByType:function(t,e,i){return p(this.getSeriesByType(t),e,i)},isSeriesFiltered:function(t){return h(this),c.indexOf(this._seriesIndices,t.componentIndex)<0},filterSeries:function(t,e){h(this);var i=g(this._componentsMap.series,t,e);this._seriesIndices=l(i)},restoreData:function(){var t=this._componentsMap;this._seriesIndices=l(t.series);var e=[];p(t,function(t,i){e.push(i)}),_.topologicalTravel(e,_.getAllClassMainTypes(),function(e,i){p(t[e],function(t){t.restoreData()})})}});c.mixin(S,i(56)),t.exports=S},function(t,e,i){function n(t){this._api=t,this._timelineOptions=[],this._mediaList=[],this._mediaDefault,this._currentMediaIndices=[],this._optionBackup,this._newBaseOption}function r(t,e,i){var n,r,o=[],a=[],s=t.timeline;if(t.baseOption&&(r=t.baseOption),(s||t.options)&&(r=r||{},o=(t.options||[]).slice()),t.media){r=r||{};var l=t.media;d(l,function(t){t&&t.option&&(t.query?a.push(t):n||(n=t))})}return r||(r=t),r.timeline||(r.timeline=s),d([r].concat(o).concat(u.map(a,function(t){return t.option})),function(t){d(e,function(e){e(t,i)})}),{baseOption:r,timelineOptions:o,mediaDefault:n,mediaList:a}}function o(t,e,i){var n={width:e,height:i,aspectratio:e/i},r=!0;return u.each(t,function(t,e){var i=e.match(v);if(i&&i[1]&&i[2]){var o=i[1],s=i[2].toLowerCase();a(n[s],t,o)||(r=!1)}}),r}function a(t,e,i){return"min"===i?t>=e:"max"===i?e>=t:t===e}function s(t,e){return t.join(",")===e.join(",")}function l(t,e){e=e||{},d(e,function(e,i){if(null!=e){var n=t[i];if(c.hasClass(i)){e=h.normalizeToArray(e),n=h.normalizeToArray(n);var r=h.mappingToExists(n,e);t[i]=p(r,function(t){return t.option&&t.exist?g(t.exist,t.option,!0):t.exist||t.option})}else t[i]=g(n,e,!0)}})}var u=i(1),h=i(10),c=i(11),d=u.each,f=u.clone,p=u.map,g=u.merge,v=/^(min|max)?(.+)$/;n.prototype={constructor:n,setOption:function(t,e){t=f(t,!0);var i=this._optionBackup,n=r.call(this,t,e,!i);this._newBaseOption=n.baseOption,i?(l(i.baseOption,n.baseOption),n.timelineOptions.length&&(i.timelineOptions=n.timelineOptions),n.mediaList.length&&(i.mediaList=n.mediaList),n.mediaDefault&&(i.mediaDefault=n.mediaDefault)):this._optionBackup=n},mountOption:function(t){var e=this._optionBackup;return this._timelineOptions=p(e.timelineOptions,f),this._mediaList=p(e.mediaList,f),this._mediaDefault=f(e.mediaDefault),this._currentMediaIndices=[],f(t?e.baseOption:this._newBaseOption)},getTimelineOption:function(t){var e,i=this._timelineOptions;if(i.length){var n=t.getComponent("timeline");n&&(e=f(i[n.getCurrentIndex()],!0))}return e},getMediaOption:function(t){var e=this._api.getWidth(),i=this._api.getHeight(),n=this._mediaList,r=this._mediaDefault,a=[],l=[];if(!n.length&&!r)return l;for(var u=0,h=n.length;h>u;u++)o(n[u].query,e,i)&&a.push(u);return!a.length&&r&&(a=[-1]),a.length&&!s(a,this._currentMediaIndices)&&(l=p(a,function(t){return f(-1===t?r.option:n[t].option)})),this._currentMediaIndices=a,l}},t.exports=n},function(t,e){var i="";"undefined"!=typeof navigator&&(i=navigator.platform||""),t.exports={color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],grid:{},textStyle:{fontFamily:i.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,animation:!0,animationDuration:1e3,animationDurationUpdate:300,animationEasing:"exponentialOut",animationEasingUpdate:"cubicOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3}},function(t,e,i){t.exports={getAreaStyle:i(31)([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]])}},function(t,e){t.exports={getBoxLayoutParams:function(){return{left:this.get("left"),top:this.get("top"),right:this.get("right"),bottom:this.get("bottom"),width:this.get("width"),height:this.get("height")}}}},function(t,e,i){var n=i(31)([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]);t.exports={getItemStyle:function(t){var e=n.call(this,t),i=this.getBorderLineDash();return i&&(e.lineDash=i),e},getBorderLineDash:function(){var t=this.get("borderType");return"solid"===t||null==t?null:"dashed"===t?[5,5]:[1,1]}}},function(t,e,i){var n=i(31)([["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]);t.exports={getLineStyle:function(t){var e=n.call(this,t),i=this.getLineDash();return i&&(e.lineDash=i),e},getLineDash:function(){var t=this.get("type");return"solid"===t||null==t?null:"dashed"===t?[5,5]:[1,1]}}},function(t,e,i){function n(t,e){return t&&t.getShallow(e)}var r=i(16);t.exports={getTextColor:function(){var t=this.ecModel;return this.getShallow("color")||t&&t.get("textStyle.color")},getFont:function(){var t=this.ecModel,e=t&&t.getModel("textStyle");return[this.getShallow("fontStyle")||n(e,"fontStyle"),this.getShallow("fontWeight")||n(e,"fontWeight"),(this.getShallow("fontSize")||n(e,"fontSize")||12)+"px",this.getShallow("fontFamily")||n(e,"fontFamily")||"sans-serif"].join(" ")},getTextRect:function(t){var e=this.get("textStyle")||{};return r.getBoundingRect(t,this.getFont(),e.align,e.baseline)},truncateText:function(t,e,i,n){return r.truncateText(t,e,this.getFont(),i,n)}}},function(t,e,i){function n(t,e){e=e.split(",");for(var i=t,n=0;n<e.length&&(i=i&&i[e[n]],null!=i);n++);return i}function r(t,e,i,n){e=e.split(",");for(var r,o=t,a=0;a<e.length-1;a++)r=e[a],null==o[r]&&(o[r]={}),o=o[r];(n||null==o[e[a]])&&(o[e[a]]=i)}function o(t){c(l,function(e){e[0]in t&&!(e[1]in t)&&(t[e[1]]=t[e[0]])})}var a=i(1),s=i(130),l=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],u=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],h=["bar","boxplot","candlestick","chord","effectScatter","funnel","gauge","lines","graph","heatmap","line","map","parallel","pie","radar","sankey","scatter","treemap"],c=a.each;t.exports=function(t){c(t.series,function(t){if(a.isObject(t)){var e=t.type;if(s(t),"pie"!==e&&"gauge"!==e||null!=t.clockWise&&(t.clockwise=t.clockWise),"gauge"===e){var i=n(t,"pointer.color");null!=i&&r(t,"itemStyle.normal.color",i)}for(var l=0;l<h.length;l++)if(h[l]===t.type){o(t);break}}}),t.dataRange&&(t.visualMap=t.dataRange),c(u,function(e){var i=t[e];i&&(a.isArray(i)||(i=[i]),c(i,function(t){o(t)}))})}},function(t,e,i){function n(t){var e=t&&t.itemStyle;e&&r.each(o,function(i){var n=e.normal,o=e.emphasis;n&&n[i]&&(t[i]=t[i]||{},t[i].normal?r.merge(t[i].normal,n[i]):t[i].normal=n[i],n[i]=null),o&&o[i]&&(t[i]=t[i]||{},t[i].emphasis?r.merge(t[i].emphasis,o[i]):t[i].emphasis=o[i],o[i]=null)})}var r=i(1),o=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];t.exports=function(t){if(t){n(t),n(t.markPoint),n(t.markLine);var e=t.data;if(e){for(var i=0;i<e.length;i++)n(e[i]);var o=t.markPoint;if(o&&o.data)for(var a=o.data,i=0;i<a.length;i++)n(a[i]);var s=t.markLine;if(s&&s.data)for(var l=s.data,i=0;i<l.length;i++)r.isArray(l[i])?(n(l[i][0]),n(l[i][1])):n(l[i])}}}},function(t,e){var i={average:function(t){for(var e=0,i=0,n=0;n<t.length;n++)isNaN(t[n])||(e+=t[n],i++);return 0===i?NaN:e/i},sum:function(t){for(var e=0,i=0;i<t.length;i++)e+=t[i]||0;return e},max:function(t){for(var e=-(1/0),i=0;i<t.length;i++)t[i]>e&&(e=t[i]);return e},min:function(t){for(var e=1/0,i=0;i<t.length;i++)t[i]<e&&(e=t[i]);return e},nearest:function(t){return t[0]}},n=function(t,e){return Math.round(t.length/2)};t.exports=function(t,e,r){e.eachSeriesByType(t,function(t){var e=t.getData(),r=t.get("sampling"),o=t.coordinateSystem;if("cartesian2d"===o.type&&r){var a=o.getBaseAxis(),s=o.getOtherAxis(a),l=a.getExtent(),u=l[1]-l[0],h=Math.round(e.count()/u);if(h>1){var c;"string"==typeof r?c=i[r]:"function"==typeof r&&(c=r),c&&(e=e.downSample(s.dim,1/h,c,n),t.setData(e))}}},this)}},function(t,e,i){var n=i(1),r=i(32),o=i(4),a=i(38),s=r.prototype,l=a.prototype,u=Math.floor,h=Math.ceil,c=Math.pow,d=10,f=Math.log,p=r.extend({type:"log",getTicks:function(){return n.map(l.getTicks.call(this),function(t){return o.round(c(d,t))})},getLabel:l.getLabel,scale:function(t){return t=s.scale.call(this,t),c(d,t)},setExtent:function(t,e){t=f(t)/f(d),e=f(e)/f(d),l.setExtent.call(this,t,e)},getExtent:function(){var t=s.getExtent.call(this);return t[0]=c(d,t[0]),t[1]=c(d,t[1]),t},unionExtent:function(t){t[0]=f(t[0])/f(d),t[1]=f(t[1])/f(d),s.unionExtent.call(this,t)},niceTicks:function(t){t=t||10;var e=this._extent,i=e[1]-e[0];if(!(i===1/0||0>=i)){var n=c(10,u(f(i/t)/Math.LN10)),r=t/i*n;.5>=r&&(n*=10);var a=[o.round(h(e[0]/n)*n),o.round(u(e[1]/n)*n)];this._interval=n,this._niceExtent=a}},niceExtent:l.niceExtent});n.each(["contain","normalize"],function(t){p.prototype[t]=function(e){return e=f(e)/f(d),s[t].call(this,e)}}),p.create=function(){return new p},t.exports=p},function(t,e,i){var n=i(1),r=i(32),o=r.prototype,a=r.extend({type:"ordinal",init:function(t,e){this._data=t,this._extent=e||[0,t.length-1]},parse:function(t){return"string"==typeof t?n.indexOf(this._data,t):Math.round(t)},contain:function(t){return t=this.parse(t),o.contain.call(this,t)&&null!=this._data[t]},normalize:function(t){return o.normalize.call(this,this.parse(t))},scale:function(t){return Math.round(o.scale.call(this,t))},getTicks:function(){for(var t=[],e=this._extent,i=e[0];i<=e[1];)t.push(i),i++;return t},getLabel:function(t){return this._data[t]},count:function(){return this._extent[1]-this._extent[0]+1},niceTicks:n.noop,niceExtent:n.noop});a.create=function(){return new a},t.exports=a},function(t,e,i){var n=i(1),r=i(4),o=i(9),a=i(38),s=a.prototype,l=Math.ceil,u=Math.floor,h=1e3,c=60*h,d=60*c,f=24*d,p=function(t,e,i,n){for(;n>i;){var r=i+n>>>1;t[r][2]<e?i=r+1:n=r}return i},g=a.extend({type:"time",getLabel:function(t){var e=this._stepLvl,i=new Date(t);return o.formatTime(e[0],i)},niceExtent:function(t,e,i){var n=this._extent;if(n[0]===n[1]&&(n[0]-=f,n[1]+=f),n[1]===-(1/0)&&n[0]===1/0){var o=new Date;n[1]=new Date(o.getFullYear(),o.getMonth(),o.getDate()),n[0]=n[1]-f}this.niceTicks(t);var a=this._interval;e||(n[0]=r.round(u(n[0]/a)*a)),i||(n[1]=r.round(l(n[1]/a)*a))},niceTicks:function(t){t=t||10;var e=this._extent,i=e[1]-e[0],n=i/t,o=v.length,a=p(v,n,0,o),s=v[Math.min(a,o-1)],h=s[2];if("year"===s[0]){var c=i/h,d=r.nice(c/t,!0);h*=d}var f=[l(e[0]/h)*h,u(e[1]/h)*h];this._stepLvl=s,this._interval=h,this._niceExtent=f},parse:function(t){return+r.parseDate(t)}});n.each(["contain","normalize"],function(t){g.prototype[t]=function(e){return s[t].call(this,this.parse(e))}});var v=[["hh:mm:ss",1,h],["hh:mm:ss",5,5*h],["hh:mm:ss",10,10*h],["hh:mm:ss",15,15*h],["hh:mm:ss",30,30*h],["hh:mm\nMM-dd",1,c],["hh:mm\nMM-dd",5,5*c],["hh:mm\nMM-dd",10,10*c],["hh:mm\nMM-dd",15,15*c],["hh:mm\nMM-dd",30,30*c],["hh:mm\nMM-dd",1,d],["hh:mm\nMM-dd",2,2*d],["hh:mm\nMM-dd",6,6*d],["hh:mm\nMM-dd",12,12*d],["MM-dd\nyyyy",1,f],["week",7,7*f],["month",1,31*f],["quarter",3,380*f/4],["half-year",6,380*f/2],["year",1,380*f]];g.create=function(){return new g},t.exports=g},function(t,e,i){var n=i(29);t.exports=function(t){function e(e){var i=(e.visualColorAccessPath||"itemStyle.normal.color").split("."),r=e.getData(),o=e.get(i)||e.getColorFromPalette(e.get("name"));r.setVisual("color",o),t.isSeriesFiltered(e)||("function"!=typeof o||o instanceof n||r.each(function(t){r.setItemVisual(t,"color",o(e.getDataParams(t)))}),r.each(function(t){var e=r.getItemModel(t),n=e.get(i,!0);null!=n&&r.setItemVisual(t,"color",n)}))}t.eachRawSeries(e)}},function(t,e,i){"use strict";function n(t,e,i){return{type:t,event:i,target:e,cancelBubble:!1,offsetX:i.zrX,offsetY:i.zrY,gestureEvent:i.gestureEvent,pinchX:i.pinchX,pinchY:i.pinchY,pinchScale:i.pinchScale,wheelDelta:i.zrDelta}}function r(){}function o(t,e,i){if(t[t.rectHover?"rectContain":"contain"](e,i)){for(var n=t;n;){if(n.silent||n.clipPath&&!n.clipPath.contain(e,i))return!1;n=n.parent}return!0}return!1}var a=i(1),s=i(164),l=i(20);r.prototype.dispose=function(){};var u=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove"],h=function(t,e,i){l.call(this),this.storage=t,this.painter=e,i=i||new r,this.proxy=i,i.handler=this,this._hovered,this._lastTouchMoment,this._lastX,this._lastY,s.call(this),a.each(u,function(t){i.on&&i.on(t,this[t],this)},this)};h.prototype={constructor:h,mousemove:function(t){var e=t.zrX,i=t.zrY,n=this.findHover(e,i,null),r=this._hovered,o=this.proxy;this._hovered=n,o.setCursor&&o.setCursor(n?n.cursor:"default"),r&&n!==r&&r.__zr&&this.dispatchToElement(r,"mouseout",t),this.dispatchToElement(n,"mousemove",t),n&&n!==r&&this.dispatchToElement(n,"mouseover",t)},mouseout:function(t){this.dispatchToElement(this._hovered,"mouseout",t),this.trigger("globalout",{event:t})},resize:function(t){this._hovered=null},dispatch:function(t,e){var i=this[t];i&&i.call(this,e)},dispose:function(){this.proxy.dispose(),this.storage=this.proxy=this.painter=null},setCursorStyle:function(t){var e=this.proxy;e.setCursor&&e.setCursor(t)},dispatchToElement:function(t,e,i){for(var r="on"+e,o=n(e,t,i),a=t;a&&(a[r]&&(o.cancelBubble=a[r].call(a,o)),a.trigger(e,o),a=a.parent,!o.cancelBubble););o.cancelBubble||(this.trigger(e,o),this.painter&&this.painter.eachOtherLayer(function(t){"function"==typeof t[r]&&t[r].call(t,o),t.trigger&&t.trigger(e,o)}))},findHover:function(t,e,i){for(var n=this.storage.getDisplayList(),r=n.length-1;r>=0;r--)if(!n[r].silent&&n[r]!==i&&!n[r].ignore&&o(n[r],t,e))return n[r]}},a.each(["click","mousedown","mouseup","mousewheel","dblclick"],function(t){h.prototype[t]=function(e){var i=this.findHover(e.zrX,e.zrY,null);if("mousedown"===t)this._downel=i,this._upel=i;else if("mosueup"===t)this._upel=i;else if("click"===t&&this._downel!==this._upel)return;this.dispatchToElement(i,t,e)}}),a.mixin(h,l),a.mixin(h,s),t.exports=h},function(t,e,i){function n(){return!1}function r(t,e,i,n){var r=document.createElement(e),o=i.getWidth(),a=i.getHeight(),s=r.style;return s.position="absolute",s.left=0,s.top=0,s.width=o+"px",s.height=a+"px",r.width=o*n,r.height=a*n,r.setAttribute("data-zr-dom-id",t),r}var o=i(1),a=i(33),s=i(64),l=i(63),u=function(t,e,i){var s;i=i||a.devicePixelRatio,"string"==typeof t?s=r(t,"canvas",e,i):o.isObject(t)&&(s=t,t=s.id),this.id=t,this.dom=s;var l=s.style;l&&(s.onselectstart=n,l["-webkit-user-select"]="none",l["user-select"]="none",l["-webkit-touch-callout"]="none",l["-webkit-tap-highlight-color"]="rgba(0,0,0,0)"),this.domBack=null,this.ctxBack=null,this.painter=e,this.config=null,this.clearColor=0,this.motionBlur=!1,this.lastFrameAlpha=.7,this.dpr=i};u.prototype={constructor:u,elCount:0,__dirty:!0,initContext:function(){this.ctx=this.dom.getContext("2d");var t=this.dpr;1!=t&&this.ctx.scale(t,t)},createBackBuffer:function(){var t=this.dpr;this.domBack=r("back-"+this.id,"canvas",this.painter,t),this.ctxBack=this.domBack.getContext("2d"),1!=t&&this.ctxBack.scale(t,t)},resize:function(t,e){var i=this.dpr,n=this.dom,r=n.style,o=this.domBack;r.width=t+"px",r.height=e+"px",n.width=t*i,n.height=e*i,1!=i&&this.ctx.scale(i,i),o&&(o.width=t*i,o.height=e*i,1!=i&&this.ctxBack.scale(i,i))},clear:function(t){var e=this.dom,i=this.ctx,n=e.width,r=e.height,o=this.clearColor,a=this.motionBlur&&!t,u=this.lastFrameAlpha,h=this.dpr;if(a&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(e,0,0,n/h,r/h)),i.clearRect(0,0,n/h,r/h),o){var c;o.colorStops?(c=o.__canvasGradient||s.getGradient(i,o,{x:0,y:0,width:n/h,height:r/h}),o.__canvasGradient=c):o.image&&(c=l.prototype.getCanvasPattern.call(o,i)),i.save(),i.fillStyle=c||o,i.fillRect(0,0,n/h,r/h),i.restore()}if(a){var d=this.domBack;i.save(),i.globalAlpha=u,i.drawImage(d,0,0,n/h,r/h),i.restore()}}},t.exports=u},function(t,e,i){"use strict";function n(t){return parseInt(t,10)}function r(t){return t?t.isBuildin?!0:"function"==typeof t.resize&&"function"==typeof t.refresh:!1}function o(t){t.__unusedCount++}function a(t){1==t.__unusedCount&&t.clear()}function s(t,e,i){return x.copy(t.getBoundingRect()),t.transform&&x.applyTransform(t.transform),_.width=e,_.height=i,!x.intersect(_)}function l(t,e){if(t==e)return!1;if(!t||!e||t.length!==e.length)return!0;for(var i=0;i<t.length;i++)if(t[i]!==e[i])return!0}function u(t,e){for(var i=0;i<t.length;i++){var n,r=t[i];r.transform&&(n=r.transform,e.transform(n[0],n[1],n[2],n[3],n[4],n[5]));var o=r.path;o.beginPath(e),r.buildPath(o,r.shape),e.clip(),r.transform&&(n=r.invTransform,e.transform(n[0],n[1],n[2],n[3],n[4],n[5]))}}function h(t,e){var i=document.createElement("div"),n=i.style;return n.position="relative",n.overflow="hidden",n.width=t+"px",n.height=e+"px",i}var c=i(33),d=i(1),f=i(47),p=i(7),g=i(44),v=i(137),m=i(60),y=5,x=new p(0,0,0,0),_=new p(0,0,0,0),b=function(t,e,i){var n=!t.nodeName||"CANVAS"===t.nodeName.toUpperCase();i=i||{},this.dpr=i.devicePixelRatio||c.devicePixelRatio,this._singleCanvas=n,this.root=t;var r=t.style;r&&(r["-webkit-tap-highlight-color"]="transparent",r["-webkit-user-select"]=r["user-select"]=r["-webkit-touch-callout"]="none",t.innerHTML=""),this.storage=e;var o=this._zlevelList=[],a=this._layers={};if(this._layerConfig={},n){var s=t.width,l=t.height;this._width=s,this._height=l;var u=new v(t,this,1);u.initContext(),a[0]=u,o.push(0)}else{this._width=this._getWidth(),this._height=this._getHeight();var d=this._domRoot=h(this._width,this._height);t.appendChild(d)}this.pathToImage=this._createPathToImage(),this._progressiveLayers=[],this._hoverlayer,this._hoverElements=[]};b.prototype={constructor:b,isSingleCanvas:function(){return this._singleCanvas},getViewportRoot:function(){return this._singleCanvas?this._layers[0].dom:this._domRoot},refresh:function(t){var e=this.storage.getDisplayList(!0),i=this._zlevelList;this._paintList(e,t);for(var n=0;n<i.length;n++){var r=i[n],o=this._layers[r];!o.isBuildin&&o.refresh&&o.refresh()}return this.refreshHover(),this._progressiveLayers.length&&this._startProgessive(),this},addHover:function(t,e){if(!t.__hoverMir){var i=new t.constructor({style:t.style,shape:t.shape});i.__from=t,t.__hoverMir=i,i.setStyle(e),this._hoverElements.push(i)}},removeHover:function(t){var e=t.__hoverMir,i=this._hoverElements,n=d.indexOf(i,e);n>=0&&i.splice(n,1),t.__hoverMir=null},clearHover:function(t){for(var e=this._hoverElements,i=0;i<e.length;i++){var n=e[i].__from;n&&(n.__hoverMir=null)}e.length=0},refreshHover:function(){var t=this._hoverElements,e=t.length,i=this._hoverlayer;if(i&&i.clear(),e){g(t,this.storage.displayableSortFunc),i||(i=this._hoverlayer=this.getLayer(1e5));var n={};i.ctx.save();for(var r=0;e>r;){var o=t[r],a=o.__from;a&&a.__zr?(r++,a.invisible||(o.transform=a.transform,o.invTransform=a.invTransform,o.__clipPaths=a.__clipPaths,this._doPaintEl(o,i,!0,n))):(t.splice(r,1),a.__hoverMir=null,e--)}i.ctx.restore()}},_startProgessive:function(){function t(){i===e._progressiveToken&&e.storage&&(e._doPaintList(e.storage.getDisplayList()),e._furtherProgressive?(e._progress++,m(t)):e._progressiveToken=-1)}var e=this;if(e._furtherProgressive){var i=e._progressiveToken=+new Date;e._progress++,m(t)}},_clearProgressive:function(){this._progressiveToken=-1,this._progress=0,d.each(this._progressiveLayers,function(t){t.__dirty&&t.clear()})},_paintList:function(t,e){null==e&&(e=!1),this._updateLayerStatus(t),this._clearProgressive(),this.eachBuildinLayer(o),this._doPaintList(t,e),this.eachBuildinLayer(a)},_doPaintList:function(t,e){function i(t){o.save(),o.globalAlpha=1,o.shadowBlur=0,n.__dirty=!0,o.drawImage(t.dom,0,0,h,c),o.restore(),n.ctx.restore()}for(var n,r,o,a,s,l,u=0,h=this._width,c=this._height,p=this._progress,g=0,v=t.length;v>g;g++){var m=t[g],x=this._singleCanvas?0:m.zlevel,_=m.__frame;if(0>_&&s&&(i(s),s=null),r!==x&&(o&&o.restore(),a={},r=x,n=this.getLayer(r),n.isBuildin||f("ZLevel "+r+" has been used by unkown layer "+n.id),o=n.ctx,o.save(),n.__unusedCount=0,(n.__dirty||e)&&n.clear()),n.__dirty||e){if(_>=0){if(!s){if(s=this._progressiveLayers[Math.min(u++,y-1)],s.ctx.save(),s.renderScope={},s&&s.__progress>s.__maxProgress){g=s.__nextIdxNotProg-1;continue}l=s.__progress,s.__dirty||(p=l),s.__progress=p+1}_===p&&this._doPaintEl(m,s,!0,s.renderScope)}else this._doPaintEl(m,n,e,a);m.__dirty=!1}}s&&i(s),o&&o.restore(),this._furtherProgressive=!1,d.each(this._progressiveLayers,function(t){t.__maxProgress>=t.__progress&&(this._furtherProgressive=!0)},this)},_doPaintEl:function(t,e,i,n){var r=e.ctx;if((e.__dirty||i)&&!t.invisible&&0!==t.style.opacity&&t.scale[0]&&t.scale[1]&&(!t.culling||!s(t,this._width,this._height))){var o=t.__clipPaths;(n.prevClipLayer!==e||l(o,n.prevElClipPaths))&&(n.prevElClipPaths&&(n.prevClipLayer.ctx.restore(),n.prevClipLayer=n.prevElClipPaths=null,n.prevEl=null),o&&(r.save(),u(o,r),n.prevClipLayer=e,n.prevElClipPaths=o)),t.beforeBrush&&t.beforeBrush(r),t.brush(r,n.prevEl||null),n.prevEl=t,t.afterBrush&&t.afterBrush(r)}},getLayer:function(t){if(this._singleCanvas)return this._layers[0];var e=this._layers[t];return e||(e=new v("zr_"+t,this,this.dpr),e.isBuildin=!0,this._layerConfig[t]&&d.merge(e,this._layerConfig[t],!0),this.insertLayer(t,e),e.initContext()),e},insertLayer:function(t,e){var i=this._layers,n=this._zlevelList,o=n.length,a=null,s=-1,l=this._domRoot;if(i[t])return void f("ZLevel "+t+" has been used already");if(!r(e))return void f("Layer of zlevel "+t+" is not valid");if(o>0&&t>n[0]){for(s=0;o-1>s&&!(n[s]<t&&n[s+1]>t);s++);a=i[n[s]]}if(n.splice(s+1,0,t),a){var u=a.dom;u.nextSibling?l.insertBefore(e.dom,u.nextSibling):l.appendChild(e.dom)}else l.firstChild?l.insertBefore(e.dom,l.firstChild):l.appendChild(e.dom);i[t]=e},eachLayer:function(t,e){var i,n,r=this._zlevelList;for(n=0;n<r.length;n++)i=r[n],t.call(e,this._layers[i],i)},eachBuildinLayer:function(t,e){var i,n,r,o=this._zlevelList;for(r=0;r<o.length;r++)n=o[r],i=this._layers[n],i.isBuildin&&t.call(e,i,n)},eachOtherLayer:function(t,e){var i,n,r,o=this._zlevelList;for(r=0;r<o.length;r++)n=o[r],i=this._layers[n],i.isBuildin||t.call(e,i,n)},getLayers:function(){return this._layers},_updateLayerStatus:function(t){var e=this._layers,i=this._progressiveLayers,n={},r={};this.eachBuildinLayer(function(t,e){n[e]=t.elCount,t.elCount=0,t.__dirty=!1}),d.each(i,function(t,e){r[e]=t.elCount,t.elCount=0,t.__dirty=!1});for(var o,a,s=0,l=0,u=0,h=t.length;h>u;u++){var c=t[u],f=this._singleCanvas?0:c.zlevel,p=e[f],g=c.progressive;if(p&&(p.elCount++,p.__dirty=p.__dirty||c.__dirty),g>=0){a!==g&&(a=g,l++);var m=c.__frame=l-1;if(!o){var x=Math.min(s,y-1);o=i[x],o||(o=i[x]=new v("progressive",this,this.dpr),o.initContext()),o.__maxProgress=0}o.__dirty=o.__dirty||c.__dirty,o.elCount++,o.__maxProgress=Math.max(o.__maxProgress,m),o.__maxProgress>=o.__progress&&(p.__dirty=!0)}else c.__frame=-1,o&&(o.__nextIdxNotProg=u,s++,o=null)}o&&(s++,o.__nextIdxNotProg=u),this.eachBuildinLayer(function(t,e){n[e]!==t.elCount&&(t.__dirty=!0)}),i.length=Math.min(s,y),d.each(i,function(t,e){r[e]!==t.elCount&&(c.__dirty=!0),t.__dirty&&(t.__progress=0)})},clear:function(){return this.eachBuildinLayer(this._clearLayer),this},_clearLayer:function(t){t.clear()},configLayer:function(t,e){if(e){var i=this._layerConfig;i[t]?d.merge(i[t],e,!0):i[t]=e;var n=this._layers[t];n&&d.merge(n,i[t],!0)}},delLayer:function(t){var e=this._layers,i=this._zlevelList,n=e[t];n&&(n.dom.parentNode.removeChild(n.dom),delete e[t],i.splice(d.indexOf(i,t),1))},resize:function(t,e){var i=this._domRoot;if(i.style.display="none",t=t||this._getWidth(),e=e||this._getHeight(),i.style.display="",this._width!=t||e!=this._height){i.style.width=t+"px",i.style.height=e+"px";for(var n in this._layers)this._layers[n].resize(t,e);this.refresh(!0)}return this._width=t,this._height=e,this},clearLayer:function(t){var e=this._layers[t];e&&e.clear()},dispose:function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},getRenderedCanvas:function(t){if(t=t||{},this._singleCanvas)return this._layers[0].dom;var e=new v("image",this,t.pixelRatio||this.dpr);e.initContext(),e.clearColor=t.backgroundColor,e.clear();for(var i=this.storage.getDisplayList(!0),n={},r=0;r<i.length;r++){var o=i[r];this._doPaintEl(o,e,!0,n)}return e.dom},getWidth:function(){return this._width},getHeight:function(){return this._height},_getWidth:function(){var t=this.root,e=document.defaultView.getComputedStyle(t);return(t.clientWidth||n(e.width)||n(t.style.width))-(n(e.paddingLeft)||0)-(n(e.paddingRight)||0)|0},_getHeight:function(){var t=this.root,e=document.defaultView.getComputedStyle(t);return(t.clientHeight||n(e.height)||n(t.style.height))-(n(e.paddingTop)||0)-(n(e.paddingBottom)||0)|0},_pathToImage:function(t,e,n,r,o){var a=document.createElement("canvas"),s=a.getContext("2d");a.width=n*o,a.height=r*o,s.clearRect(0,0,n*o,r*o);var l={position:e.position,rotation:e.rotation,scale:e.scale};e.position=[0,0,0],e.rotation=0,e.scale=[1,1],e&&e.brush(s);var u=i(48),h=new u({id:t,style:{x:0,y:0,image:a}});return null!=l.position&&(h.position=e.position=l.position),null!=l.rotation&&(h.rotation=e.rotation=l.rotation),null!=l.scale&&(h.scale=e.scale=l.scale),h},_createPathToImage:function(){var t=this;return function(e,i,n,r){return t._pathToImage(e,i,n,r,t.dpr)}}},t.exports=b},function(t,e,i){"use strict";function n(t,e){return t.zlevel===e.zlevel?t.z===e.z?t.z2-e.z2:t.z-e.z:t.zlevel-e.zlevel}var r=i(1),o=i(12),a=i(34),s=i(44),l=function(){this._elements={},this._roots=[],this._displayList=[],this._displayListLen=0};l.prototype={constructor:l,traverse:function(t,e){for(var i=0;i<this._roots.length;i++)this._roots[i].traverse(t,e)},getDisplayList:function(t,e){return e=e||!1,t&&this.updateDisplayList(e),this._displayList},updateDisplayList:function(t){this._displayListLen=0;for(var e=this._roots,i=this._displayList,r=0,a=e.length;a>r;r++)this._updateAndAddDisplayable(e[r],null,t);i.length=this._displayListLen,o.canvasSupported&&s(i,n)},_updateAndAddDisplayable:function(t,e,i){if(!t.ignore||i){t.beforeUpdate(),t.__dirty&&t.update(),t.afterUpdate();var n=t.clipPath;if(n&&(n.parent=t,n.updateTransform(),e?(e=e.slice(),e.push(n)):e=[n]),t.isGroup){for(var r=t._children,o=0;o<r.length;o++){var a=r[o];t.__dirty&&(a.__dirty=!0),this._updateAndAddDisplayable(a,e,i)}t.__dirty=!1}else t.__clipPaths=e,this._displayList[this._displayListLen++]=t}},addRoot:function(t){this._elements[t.id]||(t instanceof a&&t.addChildrenToStorage(this),this.addToMap(t),this._roots.push(t))},delRoot:function(t){if(null==t){for(var e=0;e<this._roots.length;e++){var i=this._roots[e];i instanceof a&&i.delChildrenFromStorage(this)}return this._elements={},this._roots=[],this._displayList=[],void(this._displayListLen=0)}if(t instanceof Array)for(var e=0,n=t.length;n>e;e++)this.delRoot(t[e]);else{var o;o="string"==typeof t?this._elements[t]:t;var s=r.indexOf(this._roots,o);s>=0&&(this.delFromMap(o.id),this._roots.splice(s,1),o instanceof a&&o.delChildrenFromStorage(this))}},addToMap:function(t){return t instanceof a&&(t.__storage=this),t.dirty(),this._elements[t.id]=t,this},get:function(t){return this._elements[t]},delFromMap:function(t){var e=this._elements,i=e[t];return i&&(delete e[t],i instanceof a&&(i.__storage=null)),this},dispose:function(){this._elements=this._renderList=this._roots=null},displayableSortFunc:n},t.exports=l},function(t,e,i){"use strict";var n=i(1),r=i(24).Dispatcher,o=i(60),a=i(59),s=function(t){t=t||{},this.stage=t.stage||{},this.onframe=t.onframe||function(){},this._clips=[],this._running=!1,this._time=0,r.call(this)};s.prototype={constructor:s,addClip:function(t){this._clips.push(t)},addAnimator:function(t){t.animation=this;for(var e=t.getClips(),i=0;i<e.length;i++)this.addClip(e[i])},removeClip:function(t){var e=n.indexOf(this._clips,t);e>=0&&this._clips.splice(e,1)},removeAnimator:function(t){for(var e=t.getClips(),i=0;i<e.length;i++)this.removeClip(e[i]);t.animation=null},_update:function(){for(var t=(new Date).getTime(),e=t-this._time,i=this._clips,n=i.length,r=[],o=[],a=0;n>a;a++){var s=i[a],l=s.step(t);l&&(r.push(l),o.push(s))}for(var a=0;n>a;)i[a]._needsRemove?(i[a]=i[n-1],i.pop(),n--):a++;n=r.length;for(var a=0;n>a;a++)o[a].fire(r[a]);this._time=t,this.onframe(e),this.trigger("frame",e),this.stage.update&&this.stage.update()},start:function(){function t(){e._running&&(o(t),e._update())}var e=this;this._running=!0,this._time=(new Date).getTime(),o(t)},stop:function(){this._running=!1},clear:function(){this._clips=[]},animate:function(t,e){e=e||{};var i=new a(t,e.loop,e.getter,e.setter);return i}},n.mixin(s,r),t.exports=s},function(t,e,i){function n(t){this._target=t.target,this._life=t.life||1e3,this._delay=t.delay||0,this._initialized=!1,this.loop=null==t.loop?!1:t.loop,this.gap=t.gap||0,this.easing=t.easing||"Linear",this.onframe=t.onframe,this.ondestroy=t.ondestroy,this.onrestart=t.onrestart}var r=i(142);n.prototype={constructor:n,step:function(t){this._initialized||(this._startTime=(new Date).getTime()+this._delay,this._initialized=!0);var e=(t-this._startTime)/this._life;if(!(0>e)){e=Math.min(e,1);var i=this.easing,n="string"==typeof i?r[i]:i,o="function"==typeof n?n(e):e;return this.fire("frame",o),1==e?this.loop?(this.restart(),"restart"):(this._needsRemove=!0,"destroy"):null}},restart:function(){var t=(new Date).getTime(),e=(t-this._startTime)%this._life;this._startTime=(new Date).getTime()-e+this.gap,this._needsRemove=!1},fire:function(t,e){t="on"+t,this[t]&&this[t](this._target,e)}},t.exports=n},function(t,e){var i={linear:function(t){return t},quadraticIn:function(t){return t*t},quadraticOut:function(t){return t*(2-t)},quadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},quarticIn:function(t){return t*t*t*t},quarticOut:function(t){return 1- --t*t*t*t},quarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},quinticIn:function(t){return t*t*t*t*t},quinticOut:function(t){return--t*t*t*t*t+1},quinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},sinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},sinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},sinusoidalInOut:function(t){return.5*(1-Math.cos(Math.PI*t))},exponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},exponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},exponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)},circularIn:function(t){return 1-Math.sqrt(1-t*t)},circularOut:function(t){return Math.sqrt(1- --t*t)},circularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},elasticIn:function(t){var e,i=.1,n=.4;return 0===t?0:1===t?1:(!i||1>i?(i=1,e=n/4):e=n*Math.asin(1/i)/(2*Math.PI),-(i*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n)))},elasticOut:function(t){var e,i=.1,n=.4;return 0===t?0:1===t?1:(!i||1>i?(i=1,e=n/4):e=n*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/n)+1)},elasticInOut:function(t){var e,i=.1,n=.4;return 0===t?0:1===t?1:(!i||1>i?(i=1,e=n/4):e=n*Math.asin(1/i)/(2*Math.PI),(t*=2)<1?-.5*(i*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n)):i*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n)*.5+1)},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},backInOut:function(t){var e=2.5949095;return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)},bounceIn:function(t){return 1-i.bounceOut(1-t)},bounceOut:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bounceInOut:function(t){return.5>t?.5*i.bounceIn(2*t):.5*i.bounceOut(2*t-1)+.5}};t.exports=i},function(t,e,i){var n=i(61).normalizeRadian,r=2*Math.PI;t.exports={containStroke:function(t,e,i,o,a,s,l,u,h){if(0===l)return!1;var c=l;u-=t,h-=e;var d=Math.sqrt(u*u+h*h);if(d-c>i||i>d+c)return!1;if(Math.abs(o-a)%r<1e-4)return!0;if(s){var f=o;o=n(a),a=n(f)}else o=n(o),a=n(a);o>a&&(a+=r);var p=Math.atan2(h,u);return 0>p&&(p+=r),p>=o&&a>=p||p+r>=o&&a>=p+r}}},function(t,e,i){var n=i(17);t.exports={containStroke:function(t,e,i,r,o,a,s,l,u,h,c){if(0===u)return!1;var d=u;if(c>e+d&&c>r+d&&c>a+d&&c>l+d||e-d>c&&r-d>c&&a-d>c&&l-d>c||h>t+d&&h>i+d&&h>o+d&&h>s+d||t-d>h&&i-d>h&&o-d>h&&s-d>h)return!1;var f=n.cubicProjectPoint(t,e,i,r,o,a,s,l,h,c,null);return d/2>=f}}},function(t,e,i){"use strict";function n(t,e){return Math.abs(t-e)<x}function r(){var t=b[0];b[0]=b[1],b[1]=t}function o(t,e,i,n,o,a,s,l,u,h){if(h>e&&h>n&&h>a&&h>l||e>h&&n>h&&a>h&&l>h)return 0;var c=g.cubicRootAt(e,n,a,l,h,_);if(0===c)return 0;for(var d,f,p=0,v=-1,m=0;c>m;m++){var y=_[m],x=0===y||1===y?.5:1,w=g.cubicAt(t,i,o,s,y);u>w||(0>v&&(v=g.cubicExtrema(e,n,a,l,b),b[1]<b[0]&&v>1&&r(),d=g.cubicAt(e,n,a,l,b[0]),v>1&&(f=g.cubicAt(e,n,a,l,b[1]))),p+=2==v?y<b[0]?e>d?x:-x:y<b[1]?d>f?x:-x:f>l?x:-x:y<b[0]?e>d?x:-x:d>l?x:-x)}return p}function a(t,e,i,n,r,o,a,s){if(s>e&&s>n&&s>o||e>s&&n>s&&o>s)return 0;var l=g.quadraticRootAt(e,n,o,s,_);if(0===l)return 0;var u=g.quadraticExtremum(e,n,o);if(u>=0&&1>=u){for(var h=0,c=g.quadraticAt(e,n,o,u),d=0;l>d;d++){var f=0===_[d]||1===_[d]?.5:1,p=g.quadraticAt(t,i,r,_[d]);a>p||(h+=_[d]<u?e>c?f:-f:c>o?f:-f)}return h}var f=0===_[0]||1===_[0]?.5:1,p=g.quadraticAt(t,i,r,_[0]);return a>p?0:e>o?f:-f}function s(t,e,i,n,r,o,a,s){if(s-=e,s>i||-i>s)return 0;var l=Math.sqrt(i*i-s*s);_[0]=-l,_[1]=l;var u=Math.abs(n-r);if(1e-4>u)return 0;if(1e-4>u%y){n=0,r=y;var h=o?1:-1;return a>=_[0]+t&&a<=_[1]+t?h:0}if(o){var l=n;n=p(r),r=p(l)}else n=p(n),r=p(r);n>r&&(r+=y);for(var c=0,d=0;2>d;d++){var f=_[d];if(f+t>a){var g=Math.atan2(s,f),h=o?1:-1;0>g&&(g=y+g),(g>=n&&r>=g||g+y>=n&&r>=g+y)&&(g>Math.PI/2&&g<1.5*Math.PI&&(h=-h),c+=h)}}return c}function l(t,e,i,r,l){for(var h=0,p=0,g=0,y=0,x=0,_=0;_<t.length;){var b=t[_++];switch(b===u.M&&_>1&&(i||(h+=v(p,g,y,x,r,l))),1==_&&(p=t[_],g=t[_+1],y=p,x=g),b){case u.M:y=t[_++],x=t[_++],p=y,g=x;break;case u.L:if(i){if(m(p,g,t[_],t[_+1],e,r,l))return!0}else h+=v(p,g,t[_],t[_+1],r,l)||0;p=t[_++],g=t[_++];break;case u.C:if(i){if(c.containStroke(p,g,t[_++],t[_++],t[_++],t[_++],t[_],t[_+1],e,r,l))return!0}else h+=o(p,g,t[_++],t[_++],t[_++],t[_++],t[_],t[_+1],r,l)||0;p=t[_++],g=t[_++];break;case u.Q:if(i){if(d.containStroke(p,g,t[_++],t[_++],t[_],t[_+1],e,r,l))return!0}else h+=a(p,g,t[_++],t[_++],t[_],t[_+1],r,l)||0;p=t[_++],g=t[_++];break;case u.A:var w=t[_++],S=t[_++],M=t[_++],A=t[_++],I=t[_++],T=t[_++],L=(t[_++],1-t[_++]),C=Math.cos(I)*M+w,D=Math.sin(I)*A+S;_>1?h+=v(p,g,C,D,r,l):(y=C,x=D);var P=(r-w)*A/M+w;if(i){if(f.containStroke(w,S,A,I,I+T,L,e,P,l))return!0}else h+=s(w,S,A,I,I+T,L,P,l);p=Math.cos(I+T)*M+w,g=Math.sin(I+T)*A+S;break;case u.R:y=p=t[_++],x=g=t[_++];var k=t[_++],z=t[_++],C=y+k,D=x+z;if(i){if(m(y,x,C,x,e,r,l)||m(C,x,C,D,e,r,l)||m(C,D,y,D,e,r,l)||m(y,D,y,x,e,r,l))return!0}else h+=v(C,x,C,D,r,l),h+=v(y,D,y,x,r,l);break;case u.Z:if(i){if(m(p,g,y,x,e,r,l))return!0}else h+=v(p,g,y,x,r,l);p=y,g=x}}return i||n(g,x)||(h+=v(p,g,y,x,r,l)||0),0!==h}var u=i(28).CMD,h=i(82),c=i(144),d=i(83),f=i(143),p=i(61).normalizeRadian,g=i(17),v=i(84),m=h.containStroke,y=2*Math.PI,x=1e-4,_=[-1,-1,-1],b=[-1,-1];t.exports={contain:function(t,e,i){return l(t,0,!1,e,i)},containStroke:function(t,e,i,n){return l(t,e,!0,i,n)}}},function(t,e,i){"use strict";function n(t){var e=t[1][0]-t[0][0],i=t[1][1]-t[0][1];return Math.sqrt(e*e+i*i)}function r(t){return[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]}var o=i(24),a=function(){this._track=[]};a.prototype={constructor:a,recognize:function(t,e,i){return this._doTrack(t,e,i),this._recognize(t)},clear:function(){return this._track.length=0,this},_doTrack:function(t,e,i){var n=t.touches;if(n){for(var r={points:[],touches:[],target:e,event:t},a=0,s=n.length;s>a;a++){var l=n[a],u=o.clientToLocal(i,l);r.points.push([u.zrX,u.zrY]),r.touches.push(l)}this._track.push(r)}},_recognize:function(t){for(var e in s)if(s.hasOwnProperty(e)){var i=s[e](this._track,t);if(i)return i}}};var s={pinch:function(t,e){var i=t.length;if(i){var o=(t[i-1]||{}).points,a=(t[i-2]||{}).points||o;if(a&&a.length>1&&o&&o.length>1){var s=n(o)/n(a);!isFinite(s)&&(s=1),e.pinchScale=s;var l=r(o);return e.pinchX=l[0],e.pinchY=l[1],{type:"pinch",target:t[0].target,event:e}}}}};t.exports=a},function(t,e){var i=function(){this.head=null,this.tail=null,this._len=0},n=i.prototype;n.insert=function(t){var e=new r(t);return this.insertEntry(e),e},n.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,this.tail=t):this.head=this.tail=t,this._len++},n.remove=function(t){var e=t.prev,i=t.next;e?e.next=i:this.head=i,i?i.prev=e:this.tail=e,t.next=t.prev=null,this._len--},n.len=function(){return this._len};var r=function(t){this.value=t,this.next,this.prev},o=function(t){this._list=new i,this._map={},this._maxSize=t||10},a=o.prototype;a.put=function(t,e){var i=this._list,n=this._map;if(null==n[t]){var r=i.len();if(r>=this._maxSize&&r>0){var o=i.head;i.remove(o),delete n[o.key]}var a=i.insert(e);a.key=t,n[t]=a}},a.get=function(t){var e=this._map[t],i=this._list;return null!=e?(e!==i.tail&&(i.remove(e),i.insertEntry(e)),e.value):void 0},a.clear=function(){this._list.clear(),this._map={}},t.exports=o},function(t,e,i){function n(t){return"mousewheel"===t&&d.browser.firefox?"DOMMouseScroll":t}function r(t,e,i){var n=t._gestureMgr;"start"===i&&n.clear();var r=n.recognize(e,t.handler.findHover(e.zrX,e.zrY,null),t.dom);if("end"===i&&n.clear(),r){var o=r.type;e.gestureEvent=o,t.handler.dispatchToElement(r.target,o,r.event)}}function o(t){t._touching=!0,clearTimeout(t._touchTimer),t._touchTimer=setTimeout(function(){t._touching=!1},700)}function a(){return d.touchEventsSupported}function s(t){function e(t,e){return function(){return e._touching?void 0:t.apply(e,arguments)}}for(var i=0;i<x.length;i++){var n=x[i];t._handlers[n]=h.bind(_[n],t)}for(var i=0;i<y.length;i++){var n=y[i];t._handlers[n]=e(_[n],t)}}function l(t){function e(e,i){h.each(e,function(e){p(t,n(e),i._handlers[e])},i)}c.call(this),this.dom=t,this._touching=!1,this._touchTimer,this._gestureMgr=new f,this._handlers={},s(this),a()&&e(x,this),e(y,this)}var u=i(24),h=i(1),c=i(20),d=i(12),f=i(146),p=u.addEventListener,g=u.removeEventListener,v=u.normalizeEvent,m=300,y=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove"],x=["touchstart","touchend","touchmove"],_={mousemove:function(t){t=v(this.dom,t),this.trigger("mousemove",t)},mouseout:function(t){t=v(this.dom,t);var e=t.toElement||t.relatedTarget;if(e!=this.dom)for(;e&&9!=e.nodeType;){if(e===this.dom)return;e=e.parentNode}this.trigger("mouseout",t)},touchstart:function(t){t=v(this.dom,t),this._lastTouchMoment=new Date,r(this,t,"start"),_.mousemove.call(this,t),_.mousedown.call(this,t),o(this)},touchmove:function(t){t=v(this.dom,t),r(this,t,"change"),_.mousemove.call(this,t),o(this)},touchend:function(t){t=v(this.dom,t),r(this,t,"end"),_.mouseup.call(this,t),+new Date-this._lastTouchMoment<m&&_.click.call(this,t),o(this)}};h.each(["click","mousedown","mouseup","mousewheel","dblclick"],function(t){_[t]=function(e){e=v(this.dom,e),this.trigger(t,e)}});var b=l.prototype;b.dispose=function(){for(var t=y.concat(x),e=0;e<t.length;e++){var i=t[e];g(this.dom,n(i),this._handlers[i])}},b.setCursor=function(t){this.dom.style.cursor=t||"default"},h.mixin(l,c),t.exports=l},function(t,e,i){var n=i(6);t.exports=n.extend({type:"compound",shape:{paths:null},_updatePathDirty:function(){for(var t=this.__dirtyPath,e=this.shape.paths,i=0;i<e.length;i++)t=t||e[i].__dirtyPath;this.__dirtyPath=t,this.__dirty=this.__dirty||t},beforeBrush:function(){this._updatePathDirty();for(var t=this.shape.paths||[],e=this.getGlobalScale(),i=0;i<t.length;i++)t[i].path.setScale(e[0],e[1])},buildPath:function(t,e){for(var i=e.paths||[],n=0;n<i.length;n++)i[n].buildPath(t,i[n].shape,!0)},afterBrush:function(){for(var t=this.shape.paths,e=0;e<t.length;e++)t[e].__dirtyPath=!1},getBoundingRect:function(){return this._updatePathDirty(),n.prototype.getBoundingRect.call(this)}})},function(t,e,i){"use strict";var n=i(1),r=i(29),o=function(t,e,i,n,o){this.x=null==t?.5:t,this.y=null==e?.5:e,this.r=null==i?.5:i,this.type="radial",this.global=o||!1,r.call(this,n)};o.prototype={constructor:o},n.inherits(o,r),t.exports=o},function(t,e){t.exports={buildPath:function(t,e){var i,n,r,o,a=e.x,s=e.y,l=e.width,u=e.height,h=e.r;0>l&&(a+=l,l=-l),0>u&&(s+=u,u=-u),"number"==typeof h?i=n=r=o=h:h instanceof Array?1===h.length?i=n=r=o=h[0]:2===h.length?(i=r=h[0],n=o=h[1]):3===h.length?(i=h[0],n=o=h[1],r=h[2]):(i=h[0],n=h[1],r=h[2],o=h[3]):i=n=r=o=0;var c;i+n>l&&(c=i+n,i*=l/c,n*=l/c),r+o>l&&(c=r+o,r*=l/c,o*=l/c),n+r>u&&(c=n+r,n*=u/c,r*=u/c),i+o>u&&(c=i+o,i*=u/c,o*=u/c),t.moveTo(a+i,s),t.lineTo(a+l-n,s),0!==n&&t.quadraticCurveTo(a+l,s,a+l,s+n),t.lineTo(a+l,s+u-r),0!==r&&t.quadraticCurveTo(a+l,s+u,a+l-r,s+u),t.lineTo(a+o,s+u),0!==o&&t.quadraticCurveTo(a,s+u,a,s+u-o),t.lineTo(a,s+i),0!==i&&t.quadraticCurveTo(a,s,a+i,s)}}},function(t,e,i){var n=i(5),r=n.min,o=n.max,a=n.scale,s=n.distance,l=n.add;t.exports=function(t,e,i,u){var h,c,d,f,p=[],g=[],v=[],m=[];if(u){d=[1/0,1/0],f=[-(1/0),-(1/0)];for(var y=0,x=t.length;x>y;y++)r(d,d,t[y]),o(f,f,t[y]);r(d,d,u[0]),o(f,f,u[1])}for(var y=0,x=t.length;x>y;y++){var _=t[y];if(i)h=t[y?y-1:x-1],c=t[(y+1)%x];else{if(0===y||y===x-1){p.push(n.clone(t[y]));continue}h=t[y-1],c=t[y+1]}n.sub(g,c,h),a(g,g,e);var b=s(_,h),w=s(_,c),S=b+w;0!==S&&(b/=S,w/=S),a(v,g,-b),a(m,g,w);var M=l([],_,v),A=l([],_,m);u&&(o(M,M,d),r(M,M,f),o(A,A,d),r(A,A,f)),p.push(M),p.push(A)}return i&&p.push(p.shift()),p}},function(t,e,i){function n(t,e,i,n,r,o,a){var s=.5*(i-t),l=.5*(n-e);return(2*(e-i)+s+l)*a+(-3*(e-i)-2*s-l)*o+s*r+e}var r=i(5);t.exports=function(t,e){for(var i=t.length,o=[],a=0,s=1;i>s;s++)a+=r.distance(t[s-1],t[s]);var l=a/2;l=i>l?i:l;for(var s=0;l>s;s++){var u,h,c,d=s/(l-1)*(e?i:i-1),f=Math.floor(d),p=d-f,g=t[f%i];e?(u=t[(f-1+i)%i],h=t[(f+1)%i],c=t[(f+2)%i]):(u=t[0===f?f:f-1],h=t[f>i-2?i-1:f+1],c=t[f>i-3?i-1:f+2]);var v=p*p,m=p*v;o.push([n(u[0],g[0],h[0],c[0],p,v,m),n(u[1],g[1],h[1],c[1],p,v,m)])}return o}},function(t,e,i){t.exports=i(6).extend({type:"arc",shape:{cx:0,cy:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},style:{stroke:"#000",fill:null},buildPath:function(t,e){var i=e.cx,n=e.cy,r=Math.max(e.r,0),o=e.startAngle,a=e.endAngle,s=e.clockwise,l=Math.cos(o),u=Math.sin(o);t.moveTo(l*r+i,u*r+n),t.arc(i,n,r,o,a,!s)}})},function(t,e,i){"use strict";function n(t,e,i){var n=t.cpx2,r=t.cpy2;return null===n||null===r?[(i?c:u)(t.x1,t.cpx1,t.cpx2,t.x2,e),(i?c:u)(t.y1,t.cpy1,t.cpy2,t.y2,e)]:[(i?h:l)(t.x1,t.cpx1,t.x2,e),(i?h:l)(t.y1,t.cpy1,t.y2,e)]}var r=i(17),o=i(5),a=r.quadraticSubdivide,s=r.cubicSubdivide,l=r.quadraticAt,u=r.cubicAt,h=r.quadraticDerivativeAt,c=r.cubicDerivativeAt,d=[];t.exports=i(6).extend({type:"bezier-curve",shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(t,e){var i=e.x1,n=e.y1,r=e.x2,o=e.y2,l=e.cpx1,u=e.cpy1,h=e.cpx2,c=e.cpy2,f=e.percent;0!==f&&(t.moveTo(i,n),null==h||null==c?(1>f&&(a(i,l,r,f,d),l=d[1],r=d[2],a(n,u,o,f,d),u=d[1],o=d[2]),t.quadraticCurveTo(l,u,r,o)):(1>f&&(s(i,l,h,r,f,d),l=d[1],h=d[2],r=d[3],s(n,u,c,o,f,d),u=d[1],c=d[2],o=d[3]),t.bezierCurveTo(l,u,h,c,r,o)))},pointAt:function(t){return n(this.shape,t,!1)},tangentAt:function(t){var e=n(this.shape,t,!0);return o.normalize(e,e)}})},function(t,e,i){"use strict";t.exports=i(6).extend({type:"circle",shape:{cx:0,cy:0,r:0},buildPath:function(t,e,i){i&&t.moveTo(e.cx+e.r,e.cy),t.arc(e.cx,e.cy,e.r,0,2*Math.PI,!0)}})},function(t,e,i){t.exports=i(6).extend({type:"line",shape:{x1:0,y1:0,x2:0,y2:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(t,e){var i=e.x1,n=e.y1,r=e.x2,o=e.y2,a=e.percent;0!==a&&(t.moveTo(i,n),1>a&&(r=i*(1-a)+r*a,o=n*(1-a)+o*a),t.lineTo(r,o))},pointAt:function(t){var e=this.shape;return[e.x1*(1-t)+e.x2*t,e.y1*(1-t)+e.y2*t]}})},function(t,e,i){var n=i(65);t.exports=i(6).extend({type:"polygon",shape:{points:null,smooth:!1,smoothConstraint:null},buildPath:function(t,e){n.buildPath(t,e,!0)}})},function(t,e,i){var n=i(65);t.exports=i(6).extend({type:"polyline",shape:{points:null,smooth:!1,smoothConstraint:null},style:{stroke:"#000",fill:null},buildPath:function(t,e){n.buildPath(t,e,!1)}})},function(t,e,i){var n=i(151);t.exports=i(6).extend({type:"rect",shape:{r:0,x:0,y:0,width:0,height:0},buildPath:function(t,e){var i=e.x,r=e.y,o=e.width,a=e.height;e.r?n.buildPath(t,e):t.rect(i,r,o,a),t.closePath()}})},function(t,e,i){t.exports=i(6).extend({type:"ring",shape:{cx:0,cy:0,r:0,r0:0},buildPath:function(t,e){var i=e.cx,n=e.cy,r=2*Math.PI;t.moveTo(i+e.r,n),t.arc(i,n,e.r,0,r,!1),t.moveTo(i+e.r0,n),t.arc(i,n,e.r0,0,r,!0)}})},function(t,e,i){t.exports=i(6).extend({type:"sector",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},buildPath:function(t,e){var i=e.cx,n=e.cy,r=Math.max(e.r0||0,0),o=Math.max(e.r,0),a=e.startAngle,s=e.endAngle,l=e.clockwise,u=Math.cos(a),h=Math.sin(a);t.moveTo(u*r+i,h*r+n),t.lineTo(u*o+i,h*o+n),t.arc(i,n,o,a,s,!l),t.lineTo(Math.cos(s)*r+i,Math.sin(s)*r+n),0!==r&&t.arc(i,n,r,s,a,l),t.closePath()}})},function(t,e,i){"use strict";var n=i(59),r=i(1),o=r.isString,a=r.isFunction,s=r.isObject,l=i(47),u=function(){this.animators=[]};u.prototype={constructor:u,animate:function(t,e){var i,o=!1,a=this,s=this.__zr;if(t){var u=t.split("."),h=a;o="shape"===u[0];for(var c=0,d=u.length;d>c;c++)h&&(h=h[u[c]]);h&&(i=h)}else i=a;if(!i)return void l('Property "'+t+'" is not existed in element '+a.id);var f=a.animators,p=new n(i,e);return p.during(function(t){a.dirty(o)}).done(function(){f.splice(r.indexOf(f,p),1)}),f.push(p),s&&s.animation.addAnimator(p),p},stopAnimation:function(t){for(var e=this.animators,i=e.length,n=0;i>n;n++)e[n].stop(t);return e.length=0,this},animateTo:function(t,e,i,n,r){function s(){u--,u||r&&r()}o(i)?(r=n,n=i,i=0):a(n)?(r=n,n="linear",i=0):a(i)?(r=i,i=0):a(e)?(r=e,e=500):e||(e=500),this.stopAnimation(),this._animateToShallow("",this,t,e,i,n,r);var l=this.animators.slice(),u=l.length;u||r&&r();for(var h=0;h<l.length;h++)l[h].done(s).start(n)},_animateToShallow:function(t,e,i,n,o){var a={},l=0;for(var u in i)if(null!=e[u])s(i[u])&&!r.isArrayLike(i[u])?this._animateToShallow(t?t+"."+u:u,e[u],i[u],n,o):(a[u]=i[u],l++);else if(null!=i[u])if(t){var h={};h[t]={},h[t][u]=i[u],this.attr(h)}else this.attr(u,i[u]);return l>0&&this.animate(t,!1).when(null==n?500:n,a).delay(o||0),this}},t.exports=u},function(t,e){function i(){this.on("mousedown",this._dragStart,this),this.on("mousemove",this._drag,this),this.on("mouseup",this._dragEnd,this),this.on("globalout",this._dragEnd,this)}i.prototype={constructor:i,_dragStart:function(t){var e=t.target;e&&e.draggable&&(this._draggingTarget=e,e.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.dispatchToElement(e,"dragstart",t.event))},_drag:function(t){var e=this._draggingTarget;if(e){var i=t.offsetX,n=t.offsetY,r=i-this._x,o=n-this._y;this._x=i,this._y=n,e.drift(r,o,t),this.dispatchToElement(e,"drag",t.event);var a=this.findHover(i,n,e),s=this._dropTarget;this._dropTarget=a,e!==a&&(s&&a!==s&&this.dispatchToElement(s,"dragleave",t.event),a&&a!==s&&this.dispatchToElement(a,"dragenter",t.event))}},_dragEnd:function(t){var e=this._draggingTarget;e&&(e.dragging=!1),this.dispatchToElement(e,"dragend",t.event),this._dropTarget&&this.dispatchToElement(this._dropTarget,"drop",t.event),this._draggingTarget=null,this._dropTarget=null}},t.exports=i},function(t,e,i){function n(t,e,i,n,r,o,a,s,l,u,h){var g=l*(p/180),y=f(g)*(t-i)/2+d(g)*(e-n)/2,x=-1*d(g)*(t-i)/2+f(g)*(e-n)/2,_=y*y/(a*a)+x*x/(s*s);_>1&&(a*=c(_),s*=c(_));var b=(r===o?-1:1)*c((a*a*(s*s)-a*a*(x*x)-s*s*(y*y))/(a*a*(x*x)+s*s*(y*y)))||0,w=b*a*x/s,S=b*-s*y/a,M=(t+i)/2+f(g)*w-d(g)*S,A=(e+n)/2+d(g)*w+f(g)*S,I=m([1,0],[(y-w)/a,(x-S)/s]),T=[(y-w)/a,(x-S)/s],L=[(-1*y-w)/a,(-1*x-S)/s],C=m(T,L);v(T,L)<=-1&&(C=p),v(T,L)>=1&&(C=0),0===o&&C>0&&(C-=2*p),1===o&&0>C&&(C+=2*p),h.addData(u,M,A,a,s,I,C,g,o)}function r(t){if(!t)return[];var e,i=t.replace(/-/g," -").replace(/  /g," ").replace(/ /g,",").replace(/,,/g,",");for(e=0;e<h.length;e++)i=i.replace(new RegExp(h[e],"g"),"|"+h[e]);var r,o=i.split("|"),a=0,l=0,u=new s,c=s.CMD;for(e=1;e<o.length;e++){var d,f=o[e],p=f.charAt(0),g=0,v=f.slice(1).replace(/e,-/g,"e-").split(",");v.length>0&&""===v[0]&&v.shift();for(var m=0;m<v.length;m++)v[m]=parseFloat(v[m]);for(;g<v.length&&!isNaN(v[g])&&!isNaN(v[0]);){var y,x,_,b,w,S,M,A=a,I=l;switch(p){case"l":a+=v[g++],l+=v[g++],d=c.L,u.addData(d,a,l);break;case"L":a=v[g++],l=v[g++],d=c.L,u.addData(d,a,l);break;case"m":a+=v[g++],l+=v[g++],d=c.M,u.addData(d,a,l),p="l";break;case"M":a=v[g++],l=v[g++],d=c.M,u.addData(d,a,l),p="L";break;case"h":a+=v[g++],d=c.L,u.addData(d,a,l);break;case"H":a=v[g++],d=c.L,u.addData(d,a,l);break;case"v":l+=v[g++],d=c.L,u.addData(d,a,l);break;case"V":l=v[g++],d=c.L,u.addData(d,a,l);break;case"C":d=c.C,u.addData(d,v[g++],v[g++],v[g++],v[g++],v[g++],v[g++]),a=v[g-2],l=v[g-1];break;case"c":d=c.C,u.addData(d,v[g++]+a,v[g++]+l,v[g++]+a,v[g++]+l,v[g++]+a,v[g++]+l),a+=v[g-2],l+=v[g-1];break;case"S":y=a,x=l;var T=u.len(),L=u.data;r===c.C&&(y+=a-L[T-4],x+=l-L[T-3]),d=c.C,A=v[g++],I=v[g++],a=v[g++],l=v[g++],u.addData(d,y,x,A,I,a,l);break;case"s":y=a,x=l;var T=u.len(),L=u.data;r===c.C&&(y+=a-L[T-4],x+=l-L[T-3]),d=c.C,A=a+v[g++],I=l+v[g++],a+=v[g++],l+=v[g++],u.addData(d,y,x,A,I,a,l);break;case"Q":A=v[g++],I=v[g++],a=v[g++],l=v[g++],d=c.Q,u.addData(d,A,I,a,l);break;case"q":A=v[g++]+a,I=v[g++]+l,a+=v[g++],l+=v[g++],d=c.Q,u.addData(d,A,I,a,l);break;case"T":y=a,x=l;var T=u.len(),L=u.data;r===c.Q&&(y+=a-L[T-4],x+=l-L[T-3]),a=v[g++],l=v[g++],d=c.Q,u.addData(d,y,x,a,l);break;case"t":y=a,x=l;var T=u.len(),L=u.data;r===c.Q&&(y+=a-L[T-4],x+=l-L[T-3]),a+=v[g++],l+=v[g++],d=c.Q,u.addData(d,y,x,a,l);break;case"A":_=v[g++],b=v[g++],w=v[g++],S=v[g++],M=v[g++],A=a,I=l,a=v[g++],l=v[g++],d=c.A,n(A,I,a,l,S,M,_,b,w,d,u);break;case"a":_=v[g++],b=v[g++],w=v[g++],S=v[g++],M=v[g++],A=a,I=l,a+=v[g++],l+=v[g++],d=c.A,n(A,I,a,l,S,M,_,b,w,d,u)}}"z"!==p&&"Z"!==p||(d=c.Z,u.addData(d)),r=d}return u.toStatic(),u}function o(t,e){var i,n=r(t);return e=e||{},e.buildPath=function(t){t.setData(n.data),i&&l(t,i);var e=t.getContext();e&&t.rebuildPath(e)},e.applyTransform=function(t){i||(i=u.create()),u.mul(i,t,i)},e}var a=i(6),s=i(28),l=i(166),u=i(19),h=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"],c=Math.sqrt,d=Math.sin,f=Math.cos,p=Math.PI,g=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},v=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(g(t)*g(e))},m=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(v(t,e))};t.exports={createFromString:function(t,e){return new a(o(t,e))},extendFromString:function(t,e){return a.extend(o(t,e))},mergePath:function(t,e){for(var i=[],n=t.length,r=0;n>r;r++){var o=t[r];o.__dirty&&o.buildPath(o.path,o.shape,!0),i.push(o.path)}var s=new a(e);return s.buildPath=function(t){t.appendPath(i);var e=t.getContext();e&&t.rebuildPath(e)},s}}},function(t,e,i){function n(t,e){var i,n,o,h,c,d,f=t.data,p=r.M,g=r.C,v=r.L,m=r.R,y=r.A,x=r.Q;for(o=0,h=0;o<f.length;){switch(i=f[o++],h=o,n=0,i){case p:n=1;break;case v:n=1;break;case g:n=3;break;case x:n=2;break;case y:var _=e[4],b=e[5],w=l(e[0]*e[0]+e[1]*e[1]),S=l(e[2]*e[2]+e[3]*e[3]),M=u(-e[1]/S,e[0]/w);f[o++]+=_,f[o++]+=b,f[o++]*=w,f[o++]*=S,f[o++]+=M,f[o++]+=M,o+=2,h=o;break;case m:d[0]=f[o++],d[1]=f[o++],a(d,d,e),f[h++]=d[0],f[h++]=d[1],d[0]+=f[o++],d[1]+=f[o++],a(d,d,e),f[h++]=d[0],f[h++]=d[1]}for(c=0;n>c;c++){var d=s[c];d[0]=f[o++],d[1]=f[o++],a(d,d,e),f[h++]=d[0],f[h++]=d[1]}}}var r=i(28).CMD,o=i(5),a=o.applyTransform,s=[[],[],[]],l=Math.sqrt,u=Math.atan2;t.exports=n},function(t,e,i){if(!i(12).canvasSupported){var n,r="urn:schemas-microsoft-com:vml",o=window,a=o.document,s=!1;try{!a.namespaces.zrvml&&a.namespaces.add("zrvml",r),n=function(t){return a.createElement("<zrvml:"+t+' class="zrvml">')}}catch(l){n=function(t){return a.createElement("<"+t+' xmlns="'+r+'" class="zrvml">')}}var u=function(){if(!s){s=!0;var t=a.styleSheets;t.length<31?a.createStyleSheet().addRule(".zrvml","behavior:url(#default#VML)"):t[0].addRule(".zrvml","behavior:url(#default#VML)")}};t.exports={doc:a,initVML:u,createNode:n}}},function(t,e,i){"use strict";function n(t){return null==t.value?t:t.value}var r=i(14),o=i(30),a=i(283),s=i(1),l={_baseAxisDim:null,getInitialData:function(t,e){var i,a,s=e.getComponent("xAxis",this.get("xAxisIndex")),l=e.getComponent("yAxis",this.get("yAxisIndex")),u=s.get("type"),h=l.get("type");"category"===u?(t.layout="horizontal",i=s.getCategories(),a=!0):"category"===h?(t.layout="vertical",i=l.getCategories(),a=!0):t.layout=t.layout||"horizontal",this._baseAxisDim="horizontal"===t.layout?"x":"y";var c=t.data,d=this.dimensions=["base"].concat(this.valueDimensions);o(d,c);var f=new r(d,this);return f.initData(c,i?i.slice():null,function(t,e,i,r){var o=n(t);return a?"base"===e?i:o[r-1]:o[r]}),f},coordDimToDataDim:function(t){var e=this.valueDimensions.slice(),i=["base"],n={horizontal:{x:i,y:e},vertical:{x:e,y:i}};return n[this.get("layout")][t]},dataDimToCoordDim:function(t){var e;return s.each(["x","y"],function(i,n){var r=this.coordDimToDataDim(i);s.indexOf(r,t)>=0&&(e=i)},this),e},getBaseAxis:function(){var t=this._baseAxisDim;return this.ecModel.getComponent(t+"Axis",this.get(t+"AxisIndex")).axis}},u={init:function(){var t=this._whiskerBoxDraw=new a(this.getStyleUpdater());this.group.add(t.group)},render:function(t,e,i){this._whiskerBoxDraw.updateData(t.getData())},remove:function(t){this._whiskerBoxDraw.remove()}};t.exports={seriesModelMixin:l,viewMixin:u}},function(t,e,i){var n=i(1),r={retrieveTargetInfo:function(t,e){if(t&&("treemapZoomToNode"===t.type||"treemapRootToNode"===t.type)){var i=e.getData().tree.root,n=t.targetNode;if(n&&i.contains(n))return{node:n};var r=t.targetNodeId;if(null!=r&&(n=i.getNodeById(r)))return{node:n}}},getPathToRoot:function(t){for(var e=[];t;)t=t.parentNode,t&&e.push(t);return e.reverse()},aboveViewRoot:function(t,e){var i=r.getPathToRoot(t);return n.indexOf(i,e)>=0}};t.exports=r},function(t,e,i){function n(t,e){var i,n=this.getBoundingRect(),r=t.get("layoutCenter"),o=t.get("layoutSize"),s=e.getWidth(),u=e.getHeight(),h=t.get("aspectScale")||.75,c=n.width/n.height*h,d=!1;r&&o&&(r=[l.parsePercent(r[0],s),l.parsePercent(r[1],u)],o=l.parsePercent(o,Math.min(s,u)),isNaN(r[0])||isNaN(r[1])||isNaN(o)||(d=!0));var f;if(d){var f={};c>1?(f.width=o,f.height=o/c):(f.height=o,f.width=o*c),f.y=r[1]-f.height/2,f.x=r[0]-f.width/2}else i=t.getBoxLayoutParams(),i.aspect=c,f=a.getLayoutRect(i,{width:s,height:u});this.setViewRect(f.x,f.y,f.width,f.height),this.setCenter(t.get("center")),this.setZoom(t.get("zoom"))}function r(t,e){s.each(e.get("geoCoord"),function(e,i){t.addGeoCoord(i,e)})}var o=i(354),a=i(13),s=i(1),l=i(4),u={},h={dimensions:o.prototype.dimensions,create:function(t,e){var i=[];t.eachComponent("geo",function(t,a){var s=t.get("map"),l=u[s],h=new o(s+a,s,l&&l.geoJson,l&&l.specialAreas,t.get("nameMap"));h.zoomLimit=t.get("scaleLimit"),i.push(h),r(h,t),t.coordinateSystem=h,h.model=t,h.resize=n,h.resize(t,e)}),t.eachSeries(function(t){var e=t.get("coordinateSystem");if("geo"===e){var n=t.get("geoIndex")||0;t.coordinateSystem=i[n]}});var a={};return t.eachSeriesByType("map",function(t){var e=t.get("map");a[e]=a[e]||[],a[e].push(t)}),s.each(a,function(t,a){var l=u[a],h=s.map(t,function(t){return t.get("nameMap")}),c=new o(a,a,l&&l.geoJson,l&&l.specialAreas,s.mergeAll(h));c.zoomLimit=s.retrieve.apply(null,s.map(t,function(t){return t.get("scaleLimit")})),i.push(c),c.resize=n,c.resize(t[0],e),s.each(t,function(t){t.coordinateSystem=c,r(c,t)})}),i},registerMap:function(t,e,i){e.geoJson&&!e.features&&(i=e.specialAreas,e=e.geoJson),"string"==typeof e&&(e="undefined"!=typeof JSON&&JSON.parse?JSON.parse(e):new Function("return ("+e+");")()),u[t]={geoJson:e,specialAreas:i}},getMap:function(t){return u[t]},getFilledRegions:function(t,e){var i=(t||[]).slice(),n=h.getMap(e),r=n&&n.geoJson;if(!r)return t;for(var o={},a=r.features,s=0;s<i.length;s++)o[i[s].name]=i[s];for(var s=0;s<a.length;s++){var l=a[s].properties.name;o[l]||i.push({name:l})}return i}},c=i(2);c.registerMap=h.registerMap,c.getMap=h.getMap,c.loadMap=function(){},c.registerCoordinateSystem("geo",h),t.exports=h},function(t,e,i){function n(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!0}var r=i(1),o=i(71),a=r.each,s={createVisualMappings:function(t,e,i){function n(){var t=function(){};t.prototype.__hidden=t.prototype;var e=new t;return e}var s={};return a(e,function(e){var l=s[e]=n();a(t[e],function(t,n){if(o.isValidType(n)){var a={type:n,visual:t};i&&i(a,e),l[n]=new o(a),"opacity"===n&&(a=r.clone(a),a.type="colorAlpha",l.__hidden.__alphaForOpacity=new o(a))}})}),s},replaceVisualOption:function(t,e,i){var o;r.each(i,function(t){e.hasOwnProperty(t)&&n(e[t])&&(o=!0)}),o&&r.each(i,function(i){e.hasOwnProperty(i)&&n(e[i])?t[i]=r.clone(e[i]):delete t[i]})},applyVisual:function(t,e,i,n,a,s){function l(t){return i.getItemVisual(d,t)}function u(t,e){i.setItemVisual(d,t,e)}function h(t,i){d=null==s?t:i;for(var r=n.call(a,t),o=e[r],h=c[r],f=0,p=h.length;p>f;f++){var g=h[f];o[g]&&o[g].applyVisual(t,l,u)}}var c={};r.each(t,function(t){var i=o.prepareVisualTypes(e[t]);c[t]=i});var d;null==s?i.each(h,!0):i.each([s],h,!0)}};t.exports=s},function(t,e,i){function n(){this.group=new r.Group,this._symbolEl=new a({})}var r=i(3),o=i(26),a=r.extendShape({shape:{points:null,sizes:null},symbolProxy:null,buildPath:function(t,e){for(var i=e.points,n=e.sizes,r=this.symbolProxy,o=r.shape,a=0;a<i.length;a++){var s=i[a],l=n[a];l[0]<4?t.rect(s[0]-l[0]/2,s[1]-l[1]/2,l[0],l[1]):(o.x=s[0]-l[0]/2,o.y=s[1]-l[1]/2,o.width=l[0],o.height=l[1],r.buildPath(t,o,!0))}},findDataIndex:function(t,e){for(var i=this.shape,n=i.points,r=i.sizes,o=n.length-1;o>=0;o--){var a=n[o],s=r[o],l=a[0]-s[0]/2,u=a[1]-s[1]/2;if(t>=l&&e>=u&&t<=l+s[0]&&e<=u+s[1])return o}return-1}}),s=n.prototype;s.updateData=function(t){this.group.removeAll();var e=this._symbolEl,i=t.hostModel;e.setShape({points:t.mapArray(t.getItemLayout),sizes:t.mapArray(function(e){var i=t.getItemVisual(e,"symbolSize");return i instanceof Array||(i=[i,i]),i})}),e.symbolProxy=o.createSymbol(t.getVisual("symbol"),0,0,0,0),e.setColor=e.symbolProxy.setColor,e.useStyle(i.getModel("itemStyle.normal").getItemStyle(["color"]));var n=t.getVisual("color");n&&e.setColor(n),e.seriesIndex=i.seriesIndex,e.on("mousemove",function(t){e.dataIndex=null;var i=e.findDataIndex(t.offsetX,t.offsetY);i>0&&(e.dataIndex=i)}),this.group.add(e)},s.updateLayout=function(t){var e=t.getData();this._symbolEl.setShape({points:e.mapArray(e.getItemLayout)})},s.remove=function(){this.group.removeAll()},t.exports=n},function(t,e,i){function n(t){return null==t.cpx1||null==t.cpy1}var r=i(3),o=i(5),a=r.Line.prototype,s=r.BezierCurve.prototype;t.exports=r.extendShape({type:"ec-line",style:{stroke:"#000",fill:null},shape:{x1:0,y1:0,x2:0,y2:0,percent:1,cpx1:null,cpy1:null},buildPath:function(t,e){(n(e)?a:s).buildPath(t,e)},pointAt:function(t){return n(this.shape)?a.pointAt.call(this,t):s.pointAt.call(this,t)},tangentAt:function(t){var e=this.shape,i=n(e)?[e.x2-e.x1,e.y2-e.y1]:s.tangentAt.call(this,t);return o.normalize(i,i)}})},function(t,e,i){var n=i(1),r=i(2);i(175),i(176),r.registerVisual(n.curry(i(46),"scatter","circle",null)),r.registerLayout(n.curry(i(55),"scatter")),i(36)},function(t,e,i){"use strict";var n=i(35),r=i(15);t.exports=r.extend({type:"series.scatter",dependencies:["grid","polar"],getInitialData:function(t,e){var i=n(t.data,this,e);return i},brushSelector:"point",defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,xAxisIndex:0,yAxisIndex:0,polarIndex:0,geoIndex:0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{normal:{opacity:.8}}}})},function(t,e,i){var n=i(39),r=i(172);i(2).extendChartView({type:"scatter",init:function(){this._normalSymbolDraw=new n,this._largeSymbolDraw=new r},render:function(t,e,i){var n=t.getData(),r=this._largeSymbolDraw,o=this._normalSymbolDraw,a=this.group,s=t.get("large")&&n.count()>t.get("largeThreshold")?r:o;this._symbolDraw=s,s.updateData(n),a.add(s.group),a.remove(s===r?o.group:r.group)},updateLayout:function(t){this._symbolDraw.updateLayout(t)},remove:function(t,e){this._symbolDraw&&this._symbolDraw.remove(e,!0)}})},function(t,e,i){i(109),i(40),i(41),i(183),i(184),i(179),i(180),i(107),i(106)},function(t,e,i){function n(t,e){var i=[1/0,-(1/0)];return u(e,function(e){var n=e.getData();n&&u(e.coordDimToDataDim(t),function(t){var e=n.getDataExtent(t);e[0]<i[0]&&(i[0]=e[0]),e[1]>i[1]&&(i[1]=e[1])})},this),i}function r(t,e,i){var n=i.getAxisModel(),r=n.axis.scale,a=[0,100],s=[t.start,t.end],c=[];return e=e.slice(),o(e,n,r),u(["startValue","endValue"],function(e){c.push(null!=t[e]?r.parse(t[e]):null)}),u([0,1],function(t){var i=c[t],n=s[t];null!=n||null==i?(null==n&&(n=a[t]),i=r.parse(l.linearMap(n,a,e,!0))):n=l.linearMap(i,e,a,!0),c[t]=i,s[t]=n}),{valueWindow:h(c),percentWindow:h(s)}}function o(t,e,i){return u(["min","max"],function(n,r){var o=e.get(n,!0);null!=o&&(o+"").toLowerCase()!=="data"+n&&(t[r]=i.parse(o))}),e.get("scale",!0)||(t[0]>0&&(t[0]=0),t[1]<0&&(t[1]=0)),t}function a(t,e){var i=t.getAxisModel(),n=t._percentWindow,r=t._valueWindow;if(n){var o=e||0===n[0]&&100===n[1],a=!e&&l.getPixelPrecision(r,[0,500]),s=!(e||20>a&&a>=0),u=e||o||s;i.setRange&&i.setRange(u?null:+r[0].toFixed(a),u?null:+r[1].toFixed(a))}}var s=i(1),l=i(4),u=s.each,h=l.asc,c=function(t,e,i,n){this._dimName=t,this._axisIndex=e,this._valueWindow,this._percentWindow,this._dataExtent,this.ecModel=n,this._dataZoomModel=i};c.prototype={constructor:c,hostedBy:function(t){return this._dataZoomModel===t},getDataExtent:function(){return this._dataExtent.slice()},getDataValueWindow:function(){return this._valueWindow.slice()},getDataPercentWindow:function(){return this._percentWindow.slice()},getTargetSeriesModels:function(){var t=[];return this.ecModel.eachSeries(function(e){this._axisIndex===+e.get(this._dimName+"AxisIndex")&&t.push(e)},this),t},getAxisModel:function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},getOtherAxisModel:function(){var t,e,i=this._dimName,n=this.ecModel,r=this.getAxisModel(),o="x"===i||"y"===i;o?(e="gridIndex",t="x"===i?"y":"x"):(e="polarIndex",t="angle"===i?"radius":"angle");var a;return n.eachComponent(t+"Axis",function(t){(t.get(e)||0)===(r.get(e)||0)&&(a=t)}),a},reset:function(t){if(t===this._dataZoomModel){var e=this._dataExtent=n(this._dimName,this.getTargetSeriesModels()),i=r(t.option,e,this);this._valueWindow=i.valueWindow,this._percentWindow=i.percentWindow,a(this)}},restore:function(t){t===this._dataZoomModel&&(this._valueWindow=this._percentWindow=null,a(this,!0))},filterData:function(t){function e(t){return t>=o[0]&&t<=o[1]}if(t===this._dataZoomModel){var i=this._dimName,n=this.getTargetSeriesModels(),r=t.get("filterMode"),o=this._valueWindow,a=this.getOtherAxisModel();t.get("$fromToolbox")&&a&&"category"===a.get("type")&&(r="empty"),u(n,function(t){var n=t.getData();n&&u(t.coordDimToDataDim(i),function(i){"empty"===r?t.setData(n.map(i,function(t){return e(t)?t:NaN})):n.filterSelf(i,e)})})}}},t.exports=c},function(t,e,i){t.exports=i(40).extend({type:"dataZoom.inside",defaultOption:{zoomLock:!1}})},function(t,e,i){function n(t,e,i,n){e=e.slice();var r=n.axisModels[0];if(r){var a=o(t,r,i),s=a.signal*(e[1]-e[0])*a.pixel/a.pixelLength;return u(s,e,[0,100],"rigid"),e}}function r(t,e,i,n,r,s){i=i.slice();var l=r.axisModels[0];if(l){var u=o(e,l,n),h=u.pixel-u.pixelStart,c=h/u.pixelLength*(i[1]-i[0])+i[0];return t=Math.max(t,0),i[0]=(i[0]-c)*t+c,i[1]=(i[1]-c)*t+c,a(i)}}function o(t,e,i){var n=e.axis,r=i.rectProvider(),o={};return"x"===n.dim?(o.pixel=t[0],o.pixelLength=r.width,o.pixelStart=r.x,o.signal=n.inverse?1:-1):(o.pixel=t[1],o.pixelLength=r.height,o.pixelStart=r.y,o.signal=n.inverse?-1:1),o}function a(t){var e=[0,100];return!(t[0]<=e[1])&&(t[0]=e[1]),!(t[1]<=e[1])&&(t[1]=e[1]),!(t[0]>=e[0])&&(t[0]=e[0]),!(t[1]>=e[0])&&(t[1]=e[0]),t}var s=i(41),l=i(1),u=i(79),h=i(185),c=l.bind,d=s.extend({type:"dataZoom.inside",init:function(t,e){this._range},render:function(t,e,i,n){d.superApply(this,"render",arguments),h.shouldRecordRange(n,t.id)&&(this._range=t.getPercentRange());var r=this.getTargetInfo().cartesians,o=l.map(r,function(t){return h.generateCoordId(t.model)});l.each(r,function(e){var n=e.model;h.register(i,{coordId:h.generateCoordId(n),allCoordIds:o,coordinateSystem:n.coordinateSystem,dataZoomId:t.id,throttleRate:t.get("throttle",!0),panGetRange:c(this._onPan,this,e),zoomGetRange:c(this._onZoom,this,e)})},this)},dispose:function(){h.unregister(this.api,this.dataZoomModel.id),d.superApply(this,"dispose",arguments),this._range=null},_onPan:function(t,e,i,r){return this._range=n([i,r],this._range,e,t)},_onZoom:function(t,e,i,n,o){var a=this.dataZoomModel;return a.option.zoomLock?this._range:this._range=r(1/i,[n,o],this._range,e,t,a)}});t.exports=d},function(t,e,i){var n=i(40);t.exports=n.extend({type:"dataZoom.select"})},function(t,e,i){t.exports=i(41).extend({type:"dataZoom.select"})},function(t,e,i){var n=i(40),r=n.extend({type:"dataZoom.slider",layoutMode:"box",defaultOption:{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#2f4554",width:.5,opacity:.3},areaStyle:{color:"rgba(47,69,84,0.3)",opacity:.3}},borderColor:"#ddd",fillerColor:"rgba(167,183,204,0.4)",handleIcon:"M8.2,13.6V3.9H6.3v9.7H3.1v14.9h3.3v9.7h1.8v-9.7h3.3V13.6H8.2z M9.7,24.4H4.8v-1.4h4.9V24.4z M9.7,19.1H4.8v-1.4h4.9V19.1z",handleSize:"100%",handleStyle:{color:"#a7b7cc"},labelPrecision:null,labelFormatter:null,showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#333"}}});t.exports=r},function(t,e,i){function n(t){return"x"===t?"y":"x"}var r=i(1),o=i(3),a=i(81),s=i(41),l=o.Rect,u=i(4),h=u.linearMap,c=i(13),d=i(79),f=u.asc,p=r.bind,g=r.each,v=7,m=1,y=30,x="horizontal",_="vertical",b=5,w=["line","bar","candlestick","scatter"],S=s.extend({type:"dataZoom.slider",init:function(t,e){this._displayables={},this._orient,this._range,this._handleEnds,this._size,this._handleWidth,this._handleHeight,this._location,this._dragging,this._dataShadowInfo,this.api=e},render:function(t,e,i,n){return S.superApply(this,"render",arguments),a.createOrUpdate(this,"_dispatchZoomAction",this.dataZoomModel.get("throttle"),"fixRate"),this._orient=t.get("orient"),this.dataZoomModel.get("show")===!1?void this.group.removeAll():(n&&"dataZoom"===n.type&&n.from===this.uid||this._buildView(),void this._updateView())},remove:function(){S.superApply(this,"remove",arguments),a.clear(this,"_dispatchZoomAction")},dispose:function(){S.superApply(this,"dispose",arguments),a.clear(this,"_dispatchZoomAction")},_buildView:function(){var t=this.group;t.removeAll(),this._resetLocation(),this._resetInterval();var e=this._displayables.barGroup=new o.Group;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),t.add(e),this._positionGroup()},_resetLocation:function(){var t=this.dataZoomModel,e=this.api,i=this._findCoordRect(),n={width:e.getWidth(),height:e.getHeight()},o=this._orient===x?{right:n.width-i.x-i.width,top:n.height-y-v,width:i.width,height:y}:{right:v,top:i.y,width:y,height:i.height},a=c.getLayoutParams(t.option);r.each(["right","top","width","height"],function(t){"ph"===a[t]&&(a[t]=o[t])});var s=c.getLayoutRect(a,n,t.padding);this._location={x:s.x,y:s.y},this._size=[s.width,s.height],this._orient===_&&this._size.reverse()},_positionGroup:function(){var t=this.group,e=this._location,i=this._orient,n=this.dataZoomModel.getFirstTargetAxisModel(),r=n&&n.get("inverse"),o=this._displayables.barGroup,a=(this._dataShadowInfo||{}).otherAxisInverse;o.attr(i!==x||r?i===x&&r?{scale:a?[-1,1]:[-1,-1]}:i!==_||r?{scale:a?[-1,-1]:[-1,1],rotation:Math.PI/2}:{scale:a?[1,-1]:[1,1],rotation:Math.PI/2}:{scale:a?[1,1]:[1,-1]});var s=t.getBoundingRect([o]);t.attr("position",[e.x-s.x,e.y-s.y])},_getViewExtent:function(){return[0,this._size[0]]},_renderBackground:function(){var t=this.dataZoomModel,e=this._size;this._displayables.barGroup.add(new l({silent:!0,shape:{x:0,y:0,width:e[0],height:e[1]},style:{fill:t.get("backgroundColor")},z2:-40}))},_renderDataShadow:function(){var t=this._dataShadowInfo=this._prepareDataShadowInfo();if(t){var e=this._size,i=t.series,n=i.getRawData(),a=i.getShadowDim?i.getShadowDim():t.otherDim,s=n.getDataExtent(a),l=.3*(s[1]-s[0]);s=[s[0]-l,s[1]+l];var u=[0,e[1]],c=[0,e[0]],d=[[e[0],0],[0,0]],f=[],p=c[1]/(n.count()-1),g=0,v=Math.round(n.count()/e[0]);n.each([a],function(t,e){if(v>0&&e%v)return void(g+=p);var i=null==t||isNaN(t)||""===t?null:h(t,s,u,!0);null!=i&&(d.push([g,i]),f.push([g,i])),g+=p});var m=this.dataZoomModel;this._displayables.barGroup.add(new o.Polygon({shape:{points:d},style:r.defaults({fill:m.get("dataBackgroundColor")},m.getModel("dataBackground.areaStyle").getAreaStyle()),silent:!0,z2:-20})),this._displayables.barGroup.add(new o.Polyline({shape:{points:f},style:m.getModel("dataBackground.lineStyle").getLineStyle(),silent:!0,z2:-19}))}},_prepareDataShadowInfo:function(){var t=this.dataZoomModel,e=t.get("showDataShadow");if(e!==!1){var i,o=this.ecModel;return t.eachTargetAxis(function(a,s){var l=t.getAxisProxy(a.name,s).getTargetSeriesModels();r.each(l,function(t){if(!(i||e!==!0&&r.indexOf(w,t.get("type"))<0)){var l=n(a.name),u=o.getComponent(a.axis,s).axis;i={thisAxis:u,series:t,thisDim:a.name,otherDim:l,otherAxisInverse:t.coordinateSystem.getOtherAxis(u).inverse}}},this)},this),i}},_renderHandle:function(){var t=this._displayables,e=t.handles=[],i=t.handleLabels=[],n=this._displayables.barGroup,r=this._size,a=this.dataZoomModel;n.add(t.filler=new l({draggable:!0,cursor:"move",drift:p(this._onDragMove,this,"all"),ondragstart:p(this._showDataInfo,this,!0),ondragend:p(this._onDragEnd,this),onmouseover:p(this._showDataInfo,this,!0),onmouseout:p(this._showDataInfo,this,!1),style:{fill:a.get("fillerColor"),textPosition:"inside"}})),n.add(new l(o.subPixelOptimizeRect({silent:!0,shape:{x:0,y:0,width:r[0],height:r[1]},style:{stroke:a.get("dataBackgroundColor")||a.get("borderColor"),lineWidth:m,fill:"rgba(0,0,0,0)"}})));var s=a.get("handleIcon");g([0,1],function(t){var r=o.makePath(s,{style:{strokeNoScale:!0},rectHover:!0,cursor:"vertical"===this._orient?"ns-resize":"ew-resize",draggable:!0,drift:p(this._onDragMove,this,t),ondragend:p(this._onDragEnd,this),onmouseover:p(this._showDataInfo,this,!0),onmouseout:p(this._showDataInfo,this,!1)},{x:-.5,y:0,width:1,height:1},"center"),l=r.getBoundingRect();this._handleHeight=u.parsePercent(a.get("handleSize"),this._size[1]),this._handleWidth=l.width/l.height*this._handleHeight,r.setStyle(a.getModel("handleStyle").getItemStyle());var h=a.get("handleColor");null!=h&&(r.style.fill=h),n.add(e[t]=r);var c=a.textStyleModel;this.group.add(i[t]=new o.Text({silent:!0,invisible:!0,style:{x:0,y:0,text:"",textVerticalAlign:"middle",textAlign:"center",fill:c.getTextColor(),textFont:c.getFont()},z2:10}))},this)},_resetInterval:function(){var t=this._range=this.dataZoomModel.getPercentRange(),e=this._getViewExtent();this._handleEnds=[h(t[0],[0,100],e,!0),h(t[1],[0,100],e,!0)]},_updateInterval:function(t,e){var i=this._handleEnds,n=this._getViewExtent();d(e,i,n,"all"===t||this.dataZoomModel.get("zoomLock")?"rigid":"cross",t),this._range=f([h(i[0],n,[0,100],!0),h(i[1],n,[0,100],!0)])},_updateView:function(){var t=this._displayables,e=this._handleEnds,i=f(e.slice()),n=this._size;g([0,1],function(i){var r=t.handles[i],o=this._handleHeight;r.attr({scale:[o,o],position:[e[i],n[1]/2-o/2]})},this),t.filler.setShape({x:i[0],y:0,width:i[1]-i[0],height:n[1]}),this._updateDataInfo()},_updateDataInfo:function(){function t(t){var e=o.getTransform(i.handles[t].parent,this.group),s=o.transformDirection(0===t?"right":"left",e),l=this._handleWidth/2+b,h=o.applyTransform([u[t]+(0===t?-l:l),this._size[1]/2],e);n[t].setStyle({x:h[0],y:h[1],textVerticalAlign:r===x?"middle":s,textAlign:r===x?s:"center",text:a[t]})}var e=this.dataZoomModel,i=this._displayables,n=i.handleLabels,r=this._orient,a=["",""];if(e.get("showDetail")){var s,l;e.eachTargetAxis(function(t,i){s||(s=e.getAxisProxy(t.name,i).getDataValueWindow(),l=this.ecModel.getComponent(t.axis,i).axis)},this),s&&(a=[this._formatLabel(s[0],l),this._formatLabel(s[1],l)])}var u=f(this._handleEnds.slice());t.call(this,0),t.call(this,1)},_formatLabel:function(t,e){var i=this.dataZoomModel,n=i.get("labelFormatter");if(r.isFunction(n))return n(t);var o=i.get("labelPrecision");return null!=o&&"auto"!==o||(o=e.getPixelPrecision()),t=null==t&&isNaN(t)?"":"category"===e.type||"time"===e.type?e.scale.getLabel(Math.round(t)):t.toFixed(Math.min(o,20)),r.isString(n)&&(t=n.replace("{value}",t)),t},_showDataInfo:function(t){t=this._dragging||t;var e=this._displayables.handleLabels;e[0].attr("invisible",!t),e[1].attr("invisible",!t)},_onDragMove:function(t,e,i){this._dragging=!0;var n=this._applyBarTransform([e,i],!0);this._updateInterval(t,n[0]),this._updateView(),this.dataZoomModel.get("realtime")&&this._dispatchZoomAction()},_onDragEnd:function(){this._dragging=!1,this._showDataInfo(!1),this._dispatchZoomAction()},_dispatchZoomAction:function(){var t=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,start:t[0],end:t[1]})},_applyBarTransform:function(t,e){var i=this._displayables.barGroup.getLocalTransform();return o.applyTransform(t,i,e)},_findCoordRect:function(){var t,e=this.getTargetInfo();if(e.cartesians.length)t=e.cartesians[0].model.coordinateSystem.getRect();else{var i=this.api.getWidth(),n=this.api.getHeight();t={x:.2*i,y:.2*n,width:.6*i,height:.6*n}}return t}});t.exports=S},function(t,e,i){function n(t){var e=t.getZr();return e[p]||(e[p]={})}function r(t,e,i){var n=new c(t.getZr());return n.enable(),n.on("pan",f(a,i)),n.on("zoom",f(s,i)),n}function o(t){h.each(t,function(e,i){e.count||(e.controller.off("pan").off("zoom"),delete t[i])})}function a(t,e,i){l(t,function(n){return n.panGetRange(t.controller,e,i)})}function s(t,e,i,n){l(t,function(r){return r.zoomGetRange(t.controller,e,i,n)})}function l(t,e){var i=[];h.each(t.dataZoomInfos,function(t){var n=e(t);n&&i.push({dataZoomId:t.dataZoomId,start:n[0],end:n[1]})}),t.dispatchAction(i)}function u(t,e){t.dispatchAction({type:"dataZoom",batch:e})}var h=i(1),c=i(78),d=i(81),f=h.curry,p="\x00_ec_dataZoom_roams",g={register:function(t,e){var i=n(t),a=e.dataZoomId,s=e.coordId;h.each(i,function(t,i){var n=t.dataZoomInfos;n[a]&&h.indexOf(e.allCoordIds,s)<0&&(delete n[a],t.count--)}),o(i);var l=i[s];l||(l=i[s]={coordId:s,dataZoomInfos:{},count:0},l.controller=r(t,e,l),l.dispatchAction=h.curry(u,t));var c=e.coordinateSystem.getRect().clone();l.controller.rectProvider=function(){return c},d.createOrUpdate(l,"dispatchAction",e.throttleRate,"fixRate"),!l.dataZoomInfos[a]&&l.count++,l.dataZoomInfos[a]=e},unregister:function(t,e){var i=n(t);h.each(i,function(t){var i=t.dataZoomInfos;i[e]&&(delete i[e],t.count--)}),o(i)},shouldRecordRange:function(t,e){if(t&&"dataZoom"===t.type&&t.batch)for(var i=0,n=t.batch.length;n>i;i++)if(t.batch[i].dataZoomId===e)return!1;return!0},generateCoordId:function(t){return t.type+"\x00_"+t.id}};t.exports=g},function(t,e,i){i(109),i(40),i(41),i(181),i(182),i(107),i(106)},function(t,e,i){i(188),i(190),i(189);var n=i(2);n.registerProcessor(i(191))},function(t,e,i){"use strict";var n=i(1),r=i(8),o=i(2).extendComponentModel({type:"legend",dependencies:["series"],layoutMode:{type:"box",ignoreSize:!0},init:function(t,e,i){this.mergeDefaultAndTheme(t,i),t.selected=t.selected||{}},mergeOption:function(t){o.superCall(this,"mergeOption",t)},optionUpdated:function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&"single"===this.get("selectedMode")){for(var e=!1,i=0;i<t.length;i++){var n=t[i].get("name");if(this.isSelected(n)){this.select(n),e=!0;break}}!e&&this.select(t[0].get("name"))}},_updateData:function(t){var e=n.map(this.get("data")||[],function(t){return"string"!=typeof t&&"number"!=typeof t||(t={name:t}),new r(t,this,this.ecModel)},this);this._data=e;var i=n.map(t.getSeries(),function(t){return t.name});t.eachSeries(function(t){if(t.legendDataProvider){var e=t.legendDataProvider();i=i.concat(e.mapArray(e.getName))}}),this._availableNames=i},getData:function(){return this._data},select:function(t){var e=this.option.selected,i=this.get("selectedMode");if("single"===i){var r=this._data;n.each(r,function(t){e[t.get("name")]=!1})}e[t]=!0},unSelect:function(t){"single"!==this.get("selectedMode")&&(this.option.selected[t]=!1)},toggleSelected:function(t){var e=this.option.selected;t in e||(e[t]=!0),this[e[t]?"unSelect":"select"](t)},isSelected:function(t){var e=this.option.selected;return!(t in e&&!e[t])&&n.indexOf(this._availableNames,t)>=0},defaultOption:{zlevel:0,z:4,show:!0,orient:"horizontal",left:"center",top:"top",align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,inactiveColor:"#ccc",textStyle:{color:"#333"},selectedMode:!0,tooltip:{show:!1}}});t.exports=o},function(t,e,i){function n(t,e){e.dispatchAction({type:"legendToggleSelect",name:t})}function r(t,e,i){var n=i.getZr().storage.getDisplayList()[0];n&&n.useHoverLayer||t.get("legendHoverLink")&&i.dispatchAction({type:"highlight",seriesName:t.name,name:e})}function o(t,e,i){var n=i.getZr().storage.getDisplayList()[0];n&&n.useHoverLayer||t.get("legendHoverLink")&&i.dispatchAction({type:"downplay",seriesName:t.name,name:e})}var a=i(1),s=i(26),l=i(3),u=i(113),h=a.curry;t.exports=i(2).extendComponentView({type:"legend",init:function(){this._symbolTypeStore={}},render:function(t,e,i){var s=this.group;if(s.removeAll(),t.get("show")){var c=t.get("selectedMode"),d=t.get("align");"auto"===d&&(d="right"===t.get("left")&&"vertical"===t.get("orient")?"right":"left");var f={};a.each(t.getData(),function(a){var u=a.get("name");if(""===u||"\n"===u)return void s.add(new l.Group({newline:!0}));var p=e.getSeriesByName(u)[0];if(!f[u])if(p){var g=p.getData(),v=g.getVisual("color");"function"==typeof v&&(v=v(p.getDataParams(0)));var m=g.getVisual("legendSymbol")||"roundRect",y=g.getVisual("symbol"),x=this._createItem(u,a,t,m,y,d,v,c);x.on("click",h(n,u,i)).on("mouseover",h(r,p,"",i)).on("mouseout",h(o,p,"",i)),f[u]=!0}else e.eachRawSeries(function(e){if(!f[u]&&e.legendDataProvider){var s=e.legendDataProvider(),l=s.indexOfName(u);if(0>l)return;var p=s.getItemVisual(l,"color"),g="roundRect",v=this._createItem(u,a,t,g,null,d,p,c);v.on("click",h(n,u,i)).on("mouseover",h(r,e,u,i)).on("mouseout",h(o,e,u,i)),f[u]=!0}},this)},this),u.layout(s,t,i),u.addBackground(s,t)}},_createItem:function(t,e,i,n,r,o,u,h){var c=i.get("itemWidth"),d=i.get("itemHeight"),f=i.get("inactiveColor"),p=i.isSelected(t),g=new l.Group,v=e.getModel("textStyle"),m=e.get("icon"),y=e.getModel("tooltip");if(n=m||n,g.add(s.createSymbol(n,0,0,c,d,p?u:f)),!m&&r&&(r!==n||"none"==r)){var x=.8*d;"none"===r&&(r="circle"),g.add(s.createSymbol(r,(c-x)/2,(d-x)/2,x,x,p?u:f))}var _="left"===o?c+5:-5,b=o,w=i.get("formatter"),S=t;"string"==typeof w&&w?S=w.replace("{name}",t):"function"==typeof w&&(S=w(t));var M=new l.Text({style:{text:S,x:_,y:d/2,fill:p?v.getTextColor():f,textFont:v.getFont(),textAlign:b,textVerticalAlign:"middle"}});g.add(M);var A=new l.Rect({shape:g.getBoundingRect(),invisible:!0,tooltip:y.get("show")?a.extend({content:t,formatter:function(){return t},formatterParams:{componentType:"legend",legendIndex:i.componentIndex,name:t,$vars:["name"]}},y.option):null});return g.add(A),g.eachChild(function(t){t.silent=!0}),A.silent=!h,this.group.add(g),l.setHoverStyle(g),g}})},function(t,e,i){function n(t,e,i){var n,r={},a="toggleSelected"===t;return i.eachComponent("legend",function(i){a&&null!=n?i[n?"select":"unSelect"](e.name):(i[t](e.name),n=i.isSelected(e.name));var s=i.getData();o.each(s,function(t){var e=t.get("name");if("\n"!==e&&""!==e){var n=i.isSelected(e);e in r?r[e]=r[e]&&n:r[e]=n}})}),{name:e.name,selected:r}}var r=i(2),o=i(1);r.registerAction("legendToggleSelect","legendselectchanged",o.curry(n,"toggleSelected")),r.registerAction("legendSelect","legendselected",o.curry(n,"select")),r.registerAction("legendUnSelect","legendunselected",o.curry(n,"unSelect"))},function(t,e){t.exports=function(t){var e=t.findComponents({mainType:"legend"});e&&e.length&&t.filterSeries(function(t){for(var i=0;i<e.length;i++)if(!e[i].isSelected(t.name))return!1;return!0})}},function(t,e,i){i(195),i(196),i(2).registerPreprocessor(function(t){t.markArea=t.markArea||{}})},function(t,e,i){i(197),i(198),i(2).registerPreprocessor(function(t){t.markLine=t.markLine||{}})},function(t,e,i){i(199),i(200),i(2).registerPreprocessor(function(t){t.markPoint=t.markPoint||{}})},function(t,e,i){t.exports=i(67).extend({type:"markArea",defaultOption:{zlevel:0,z:1,tooltip:{trigger:"item"},animation:!1,label:{normal:{show:!0,position:"top"},emphasis:{show:!0,position:"top"}},itemStyle:{normal:{borderWidth:0}}}})},function(t,e,i){function n(t){return!isNaN(t)&&!isFinite(t)}function r(t,e,i,r){var o=1-t;return n(e[o])&&n(i[o])}function o(t,e){var i=e.coord[0],n=e.coord[1];return"cartesian2d"===t.type&&i&&n&&(r(1,i,n,t)||r(0,i,n,t))?!0:f.dataFilter(t,{coord:i,x:e.x0,y:e.y0})||f.dataFilter(t,{coord:n,x:e.x1,y:e.y1})}function a(t,e,i,r,o){var a,s=r.coordinateSystem,l=t.getItemModel(e),u=h.parsePercent(l.get(i[0]),o.getWidth()),c=h.parsePercent(l.get(i[1]),o.getHeight());if(isNaN(u)||isNaN(c)){if(r.getMarkerPosition)a=r.getMarkerPosition(t.getValues(i,e));else{var d=t.get(i[0],e),f=t.get(i[1],e);a=s.dataToPoint([d,f],!0)}if("cartesian2d"===s.type){var p=s.getAxis("x"),g=s.getAxis("y"),d=t.get(i[0],e),f=t.get(i[1],e);n(d)?a[0]=p.toGlobalCoord(p.getExtent()["x0"===i[0]?0:1]):n(f)&&(a[1]=g.toGlobalCoord(g.getExtent()["y0"===i[1]?0:1]))}isNaN(u)||(a[0]=u),isNaN(c)||(a[1]=c)}else a=[u,c];return a}function s(t,e,i){var n,r,a=["x0","y0","x1","y1"];t?(n=l.map(t&&t.dimensions,function(t){var i=e.getData().getDimensionInfo(e.coordDimToDataDim(t)[0])||{};return i.name=t,i}),r=new u(l.map(a,function(t,e){return{name:t,type:n[e%2].type}}),i)):(n=[{name:"value",type:"float"}],r=new u(n,i));var s=l.map(i.get("data"),l.curry(p,e,t,i));t&&(s=l.filter(s,l.curry(o,t)));var h=t?function(t,e,i,n){return t.coord[Math.floor(n/2)][n%2]}:function(t){return t.value};return r.initData(s,null,h),r.hasItemOption=!0,r}var l=i(1),u=i(14),h=i(4),c=i(3),d=i(18),f=i(69),p=function(t,e,i,n){var r=f.dataTransform(t,n[0]),o=f.dataTransform(t,n[1]),a=l.retrieve,s=r.coord,u=o.coord;s[0]=a(s[0],-(1/0)),s[1]=a(s[1],-(1/0)),u[0]=a(u[0],1/0),u[1]=a(u[1],1/0);var h=l.mergeAll([{},r,o]);return h.coord=[r.coord,o.coord],h.x0=r.x,h.y0=r.y,h.x1=o.x,h.y1=o.y,h},g=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]];i(68).extend({type:"markArea",updateLayout:function(t,e,i){e.eachSeries(function(t){var e=t.markAreaModel;if(e){var n=e.getData();n.each(function(e){var r=l.map(g,function(r){return a(n,e,r,t,i)});n.setItemLayout(e,r);var o=n.getItemGraphicEl(e);o.setShape("points",r)})}},this)},renderSeries:function(t,e,i,n){var r=t.coordinateSystem,o=t.name,u=t.getData(),h=this.markerGroupMap,f=h[o];f||(f=h[o]={group:new c.Group}),this.group.add(f.group),f.__keep=!0;var p=s(r,t,e);e.setData(p),p.each(function(e){p.setItemLayout(e,l.map(g,function(i){return a(p,e,i,t,n)})),p.setItemVisual(e,{color:u.getVisual("color")})}),p.diff(f.__data).add(function(t){var e=new c.Polygon({shape:{points:p.getItemLayout(t)}});p.setItemGraphicEl(t,e),f.group.add(e)}).update(function(t,i){var n=f.__data.getItemGraphicEl(i);c.updateProps(n,{shape:{points:p.getItemLayout(t)}},e,t),f.group.add(n),p.setItemGraphicEl(t,n)}).remove(function(t){var e=f.__data.getItemGraphicEl(t);f.group.remove(e)}).execute(),p.eachItemGraphicEl(function(t,i){var n=p.getItemModel(i),r=n.getModel("label.normal"),o=n.getModel("label.emphasis"),a=p.getItemVisual(i,"color");t.useStyle(l.defaults(n.getModel("itemStyle.normal").getItemStyle(),{fill:d.modifyAlpha(a,.4),stroke:a})),t.hoverStyle=n.getModel("itemStyle.normal").getItemStyle();var s=p.getName(i)||"",u=a||t.style.fill;c.setText(t.style,r,u),t.style.text=l.retrieve(e.getFormattedLabel(i,"normal"),s),c.setText(t.hoverStyle,o,u),t.hoverStyle.text=l.retrieve(e.getFormattedLabel(i,"emphasis"),s),c.setHoverStyle(t,{}),t.dataModel=e}),f.__data=p,f.group.silent=e.get("silent")||t.get("silent")}})},function(t,e,i){t.exports=i(67).extend({type:"markLine",defaultOption:{zlevel:0,z:5,symbol:["circle","arrow"],symbolSize:[8,16],precision:2,tooltip:{trigger:"item"},label:{normal:{show:!0,position:"end"},emphasis:{show:!0}},lineStyle:{normal:{type:"dashed"},emphasis:{width:3}},animationEasing:"linear"}})},function(t,e,i){function n(t){return!isNaN(t)&&!isFinite(t)}function r(t,e,i,r){var o=1-t,a=r.dimensions[t];return n(e[o])&&n(i[o])&&e[t]===i[t]&&r.getAxis(a).containData(e[t])}function o(t,e){if("cartesian2d"===t.type){var i=e[0].coord,n=e[1].coord;if(i&&n&&(r(1,i,n,t)||r(0,i,n,t)))return!0}return c.dataFilter(t,e[0])&&c.dataFilter(t,e[1])}function a(t,e,i,r,o){var a,s=r.coordinateSystem,l=t.getItemModel(e),u=h.parsePercent(l.get("x"),o.getWidth()),c=h.parsePercent(l.get("y"),o.getHeight());if(isNaN(u)||isNaN(c)){if(r.getMarkerPosition)a=r.getMarkerPosition(t.getValues(t.dimensions,e));else{var d=s.dimensions,f=t.get(d[0],e),p=t.get(d[1],e);a=s.dataToPoint([f,p])}if("cartesian2d"===s.type){var g=s.getAxis("x"),v=s.getAxis("y"),d=s.dimensions;n(t.get(d[0],e))?a[0]=g.toGlobalCoord(g.getExtent()[i?0:1]):n(t.get(d[1],e))&&(a[1]=v.toGlobalCoord(v.getExtent()[i?0:1]))}isNaN(u)||(a[0]=u),isNaN(c)||(a[1]=c)}else a=[u,c];t.setItemLayout(e,a)}function s(t,e,i){var n;n=t?l.map(t&&t.dimensions,function(t){var i=e.getData().getDimensionInfo(e.coordDimToDataDim(t)[0])||{};return i.name=t,i}):[{name:"value",type:"float"}];var r=new u(n,i),a=new u(n,i),s=new u([],i),h=l.map(i.get("data"),l.curry(f,e,t,i));t&&(h=l.filter(h,l.curry(o,t)));var d=t?c.dimValueGetter:function(t){return t.value};return r.initData(l.map(h,function(t){return t[0]}),null,d),a.initData(l.map(h,function(t){return t[1]}),null,d),s.initData(l.map(h,function(t){return t[2]})),s.hasItemOption=!0,{from:r,to:a,line:s}}var l=i(1),u=i(14),h=i(4),c=i(69),d=i(93),f=function(t,e,i,n){var r=t.getData(),o=n.type;if(!l.isArray(n)&&("min"===o||"max"===o||"average"===o||null!=n.xAxis||null!=n.yAxis)){var a,s,u;if(null!=n.yAxis||null!=n.xAxis)s=null!=n.yAxis?"y":"x",a=e.getAxis(s),u=l.retrieve(n.yAxis,n.xAxis);else{var h=c.getAxisInfo(n,r,e,t);s=h.valueDataDim,a=h.valueAxis,u=c.numCalculate(r,s,o)}var d="x"===s?0:1,f=1-d,p=l.clone(n),g={};p.type=null,p.coord=[],g.coord=[],p.coord[f]=-(1/0),g.coord[f]=1/0;var v=i.get("precision");v>=0&&(u=+u.toFixed(v)),p.coord[d]=g.coord[d]=u,n=[p,g,{type:o,valueIndex:n.valueIndex,value:u}]}return n=[c.dataTransform(t,n[0]),c.dataTransform(t,n[1]),l.extend({},n[2])],n[2].type=n[2].type||"",l.merge(n[2],n[0]),l.merge(n[2],n[1]),n};i(68).extend({type:"markLine",updateLayout:function(t,e,i){e.eachSeries(function(t){var e=t.markLineModel;if(e){var n=e.getData(),r=e.__from,o=e.__to;r.each(function(e){a(r,e,!0,t,i),a(o,e,!1,t,i)}),n.each(function(t){n.setItemLayout(t,[r.getItemLayout(t),o.getItemLayout(t)])}),this.markerGroupMap[t.name].updateLayout()}},this)},renderSeries:function(t,e,i,n){function r(e,i,r){var o=e.getItemModel(i);a(e,i,r,t,n),e.setItemVisual(i,{symbolSize:o.get("symbolSize")||x[r?0:1],symbol:o.get("symbol",!0)||y[r?0:1],color:o.get("itemStyle.normal.color")||h.getVisual("color")})}var o=t.coordinateSystem,u=t.name,h=t.getData(),c=this.markerGroupMap,f=c[u];f||(f=c[u]=new d),this.group.add(f.group);var p=s(o,t,e),g=p.from,v=p.to,m=p.line;e.__from=g,e.__to=v,e.setData(m);var y=e.get("symbol"),x=e.get("symbolSize");l.isArray(y)||(y=[y,y]),"number"==typeof x&&(x=[x,x]),p.from.each(function(t){r(g,t,!0),r(v,t,!1)}),m.each(function(t){var e=m.getItemModel(t).get("lineStyle.normal.color");m.setItemVisual(t,{color:e||g.getItemVisual(t,"color")}),m.setItemLayout(t,[g.getItemLayout(t),v.getItemLayout(t)]),m.setItemVisual(t,{fromSymbolSize:g.getItemVisual(t,"symbolSize"),fromSymbol:g.getItemVisual(t,"symbol"),toSymbolSize:v.getItemVisual(t,"symbolSize"),toSymbol:v.getItemVisual(t,"symbol")})}),f.updateData(m),p.line.eachItemGraphicEl(function(t,i){t.traverse(function(t){t.dataModel=e})}),f.__keep=!0,f.group.silent=e.get("silent")||t.get("silent")}})},function(t,e,i){t.exports=i(67).extend({type:"markPoint",defaultOption:{zlevel:0,z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{normal:{show:!0,position:"inside"},emphasis:{show:!0}},itemStyle:{normal:{borderWidth:2}}}})},function(t,e,i){function n(t,e,i){var n=e.coordinateSystem;t.each(function(r){var o,a=t.getItemModel(r),l=s.parsePercent(a.get("x"),i.getWidth()),u=s.parsePercent(a.get("y"),i.getHeight());if(isNaN(l)||isNaN(u)){if(e.getMarkerPosition)o=e.getMarkerPosition(t.getValues(t.dimensions,r));else if(n){var h=t.get(n.dimensions[0],r),c=t.get(n.dimensions[1],r);o=n.dataToPoint([h,c])}}else o=[l,u];isNaN(l)||(o[0]=l),isNaN(u)||(o[1]=u),t.setItemLayout(r,o)})}function r(t,e,i){var n;n=t?a.map(t&&t.dimensions,function(t){var i=e.getData().getDimensionInfo(e.coordDimToDataDim(t)[0])||{};return i.name=t,i}):[{name:"value",type:"float"}];var r=new l(n,i),o=a.map(i.get("data"),a.curry(u.dataTransform,e));return t&&(o=a.filter(o,a.curry(u.dataFilter,t))),r.initData(o,null,t?u.dimValueGetter:function(t){return t.value}),r}var o=i(39),a=i(1),s=i(4),l=i(14),u=i(69);i(68).extend({type:"markPoint",updateLayout:function(t,e,i){e.eachSeries(function(t){var e=t.markPointModel;e&&(n(e.getData(),t,i),this.markerGroupMap[t.name].updateLayout(e))},this)},renderSeries:function(t,e,i,a){var s=t.coordinateSystem,l=t.name,u=t.getData(),h=this.markerGroupMap,c=h[l];c||(c=h[l]=new o);var d=r(s,t,e);e.setData(d),n(e.getData(),t,a),d.each(function(t){var i=d.getItemModel(t),n=i.getShallow("symbolSize");"function"==typeof n&&(n=n(e.getRawValue(t),e.getDataParams(t))),d.setItemVisual(t,{symbolSize:n,color:i.get("itemStyle.normal.color")||u.getVisual("color"),symbol:i.getShallow("symbol")})}),c.updateData(d),this.group.add(c.group),d.eachItemGraphicEl(function(t){t.traverse(function(t){t.dataModel=e})}),c.__keep=!0,c.group.silent=e.get("silent")||t.get("silent")}})},function(t,e,i){"use strict";var n=i(2),r=i(3),o=i(13);n.extendComponentModel({type:"title",layoutMode:{type:"box",ignoreSize:!0},defaultOption:{zlevel:0,z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bolder",color:"#333"},subtextStyle:{color:"#aaa"}}}),n.extendComponentView({type:"title",render:function(t,e,i){if(this.group.removeAll(),t.get("show")){var n=this.group,a=t.getModel("textStyle"),s=t.getModel("subtextStyle"),l=t.get("textAlign"),u=t.get("textBaseline"),h=new r.Text({style:{text:t.get("text"),textFont:a.getFont(),fill:a.getTextColor()},z2:10}),c=h.getBoundingRect(),d=t.get("subtext"),f=new r.Text({style:{text:d,textFont:s.getFont(),fill:s.getTextColor(),y:c.height+t.get("itemGap"),textBaseline:"top"},z2:10}),p=t.get("link"),g=t.get("sublink");h.silent=!p,f.silent=!g,p&&h.on("click",function(){window.open(p,"_"+t.get("target"))}),g&&f.on("click",function(){window.open(g,"_"+t.get("subtarget"))}),n.add(h),d&&n.add(f);var v=n.getBoundingRect(),m=t.getBoxLayoutParams();m.width=v.width,m.height=v.height;var y=o.getLayoutRect(m,{width:i.getWidth(),height:i.getHeight()},t.get("padding"));l||(l=t.get("left")||t.get("right"),"middle"===l&&(l="center"),"right"===l?y.x+=y.width:"center"===l&&(y.x+=y.width/2)),u||(u=t.get("top")||t.get("bottom"),"center"===u&&(u="middle"),"bottom"===u?y.y+=y.height:"middle"===u&&(y.y+=y.height/2),u=u||"top"),n.attr("position",[y.x,y.y]);var x={textAlign:l,textVerticalAlign:u};h.setStyle(x),f.setStyle(x),v=n.getBoundingRect();var _=y.margin,b=t.getItemStyle(["color","opacity"]);b.fill=t.get("backgroundColor");var w=new r.Rect({shape:{x:v.x-_[3],y:v.y-_[0],width:v.width+_[1]+_[3],height:v.height+_[0]+_[2]},style:b,silent:!0});r.subPixelOptimizeRect(w),n.add(w)}}})},function(t,e,i){i(203),i(204),i(209),i(207),i(205),i(206),i(208)},function(t,e,i){var n=i(25),r=i(1),o=i(2).extendComponentModel({type:"toolbox",layoutMode:{type:"box",ignoreSize:!0},mergeDefaultAndTheme:function(t){o.superApply(this,"mergeDefaultAndTheme",arguments),r.each(this.option.feature,function(t,e){var i=n.get(e);i&&r.merge(t,i.defaultOption)})},defaultOption:{show:!0,z:6,zlevel:0,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{normal:{borderColor:"#666",color:"none"},emphasis:{borderColor:"#3E98C5"}}}});t.exports=o},function(t,e,i){(function(e){function n(t){return 0===t.indexOf("my")}var r=i(25),o=i(1),a=i(3),s=i(8),l=i(45),u=i(113),h=i(16);t.exports=i(2).extendComponentView({type:"toolbox",render:function(t,e,i,c){function d(o,a){var l,u=y[o],h=y[a],d=v[u],p=new s(d,t,t.ecModel);if(u&&!h){if(n(u))l={model:p,onclick:p.option.onclick,featureName:u};else{var g=r.get(u);if(!g)return;l=new g(p,e,i)}m[u]=l}else{if(l=m[h],!l)return;l.model=p,l.ecModel=e,l.api=i}return!u&&h?void(l.dispose&&l.dispose(e,i)):!p.get("show")||l.unusable?void(l.remove&&l.remove(e,i)):(f(p,l,u),p.setIconStatus=function(t,e){var i=this.option,n=this.iconPaths;i.iconStatus=i.iconStatus||{},i.iconStatus[t]=e,n[t]&&n[t].trigger(e)},void(l.render&&l.render(p,e,i,c)))}function f(n,r,s){var l=n.getModel("iconStyle"),u=r.getIcons?r.getIcons():n.get("icon"),h=n.get("title")||{};if("string"==typeof u){var c=u,d=h;u={},h={},u[s]=c,h[s]=d}var f=n.iconPaths={};o.each(u,function(s,u){var c=l.getModel("normal").getItemStyle(),d=l.getModel("emphasis").getItemStyle(),v={x:-g/2,y:-g/2,width:g,height:g},m=0===s.indexOf("image://")?(v.image=s.slice(8),new a.Image({style:v})):a.makePath(s.replace("path://",""),{style:c,hoverStyle:d,rectHover:!0},v,"center");a.setHoverStyle(m),t.get("showTitle")&&(m.__title=h[u],m.on("mouseover",function(){m.setStyle({text:h[u],textPosition:d.textPosition||"bottom",textFill:d.fill||d.stroke||"#000",textAlign:d.textAlign||"center"})}).on("mouseout",function(){m.setStyle({textFill:null})})),m.trigger(n.get("iconStatus."+u)||"normal"),p.add(m),m.on("click",o.bind(r.onclick,r,e,i,u)),f[u]=m})}var p=this.group;if(p.removeAll(),t.get("show")){var g=+t.get("itemSize"),v=t.get("feature")||{},m=this._features||(this._features={}),y=[];o.each(v,function(t,e){y.push(e)}),new l(this._featureNames||[],y).add(d).update(d).remove(o.curry(d,null)).execute(),this._featureNames=y,u.layout(p,t,i),u.addBackground(p,t),p.eachChild(function(t){var e=t.__title,n=t.hoverStyle;if(n&&e){var r=h.getBoundingRect(e,n.font),o=t.position[0]+p.position[0],a=t.position[1]+p.position[1]+g,s=!1;a+r.height>i.getHeight()&&(n.textPosition="top",s=!0);var l=s?-5-r.height:g+8;o+r.width/2>i.getWidth()?(n.textPosition=["100%",l],n.textAlign="right"):o-r.width/2<0&&(n.textPosition=[0,l],n.textAlign="left")}})}},updateView:function(t,e,i,n){o.each(this._features,function(t){t.updateView&&t.updateView(t.model,e,i,n)})},updateLayout:function(t,e,i,n){o.each(this._features,function(t){t.updateLayout&&t.updateLayout(t.model,e,i,n)})},remove:function(t,e){o.each(this._features,function(i){i.remove&&i.remove(t,e)}),this.group.removeAll()},dispose:function(t,e){o.each(this._features,function(i){i.dispose&&i.dispose(t,e)})}})}).call(e,i(215))},function(t,e,i){function n(t){var e={},i=[],n=[];return t.eachRawSeries(function(t){var r=t.coordinateSystem;if(!r||"cartesian2d"!==r.type&&"polar"!==r.type)i.push(t);else{var o=r.getBaseAxis();if("category"===o.type){var a=o.dim+"_"+o.index;e[a]||(e[a]={categoryAxis:o,valueAxis:r.getOtherAxis(o),series:[]},n.push({axisDim:o.dim,axisIndex:o.index})),e[a].series.push(t)}else i.push(t)}}),{seriesGroupByCategoryAxis:e,other:i,meta:n}}function r(t){var e=[];return p.each(t,function(t,i){var n=t.categoryAxis,r=t.valueAxis,o=r.dim,a=[" "].concat(p.map(t.series,function(t){return t.name})),s=[n.model.getCategories()];p.each(t.series,function(t){s.push(t.getRawData().mapArray(o,function(t){return t}))});for(var l=[a.join(m)],u=0;u<s[0].length;u++){for(var h=[],c=0;c<s.length;c++)h.push(s[c][u]);l.push(h.join(m))}e.push(l.join("\n"))}),e.join("\n\n"+v+"\n\n")}function o(t){return p.map(t,function(t){var e=t.getRawData(),i=[t.name],n=[];return e.each(e.dimensions,function(){for(var t=arguments.length,r=arguments[t-1],o=e.getName(r),a=0;t-1>a;a++)n[a]=arguments[a];i.push((o?o+m:"")+n.join(m))}),i.join("\n")}).join("\n\n"+v+"\n\n")}function a(t){var e=n(t);return{value:p.filter([r(e.seriesGroupByCategoryAxis),o(e.other)],function(t){return t.replace(/[\n\t\s]/g,"")}).join("\n\n"+v+"\n\n"),meta:e.meta}}function s(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function l(t){var e=t.slice(0,t.indexOf("\n"));return e.indexOf(m)>=0?!0:void 0}function u(t){for(var e=t.split(/\n+/g),i=s(e.shift()).split(y),n=[],r=p.map(i,function(t){return{name:t,data:[]}}),o=0;o<e.length;o++){var a=s(e[o]).split(y);n.push(a.shift());for(var l=0;l<a.length;l++)r[l]&&(r[l].data[o]=a[l])}return{series:r,categories:n}}function h(t){for(var e=t.split(/\n+/g),i=s(e.shift()),n=[],r=0;r<e.length;r++){var o,a=s(e[r]).split(y),l="",u=!1;isNaN(a[0])?(u=!0,l=a[0],a=a.slice(1),n[r]={name:l,value:[]},o=n[r].value):o=n[r]=[];for(var h=0;h<a.length;h++)o.push(+a[h]);1===o.length&&(u?n[r].value=o[0]:n[r]=o[0])}return{name:i,data:n}}function c(t,e){var i=t.split(new RegExp("\n*"+v+"\n*","g")),n={series:[]};return p.each(i,function(t,i){if(l(t)){var r=u(t),o=e[i],a=o.axisDim+"Axis";o&&(n[a]=n[a]||[],n[a][o.axisIndex]={data:r.categories},n.series=n.series.concat(r.series))}else{var r=h(t);n.series.push(r)}}),n}function d(t){this._dom=null,this.model=t}function f(t,e){return p.map(t,function(t,i){var n=e&&e[i];return p.isObject(n)&&!p.isArray(n)?(p.isObject(t)&&!p.isArray(t)&&(t=t.value),p.defaults({value:t},n)):t})}var p=i(1),g=i(24),v=new Array(60).join("-"),m="	",y=new RegExp("["+m+"]+","g");d.defaultOption={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:"",lang:["","",""],backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"},d.prototype.onclick=function(t,e){function i(){n.removeChild(o),M._dom=null}var n=e.getDom(),r=this.model;this._dom&&n.removeChild(this._dom);var o=document.createElement("div");o.style.cssText="position:absolute;left:5px;top:5px;bottom:5px;right:5px;",o.style.backgroundColor=r.get("backgroundColor")||"#fff";var s=document.createElement("h4"),l=r.get("lang")||[];s.innerHTML=l[0]||r.get("title"),s.style.cssText="margin: 10px 20px;",s.style.color=r.get("textColor");var u=document.createElement("div"),h=document.createElement("textarea");u.style.cssText="display:block;width:100%;overflow:hidden;";var d=r.get("optionToContent"),f=r.get("contentToOption"),v=a(t);if("function"==typeof d){var y=d(e.getOption());"string"==typeof y?u.innerHTML=y:p.isDom(y)&&u.appendChild(y)}else u.appendChild(h),h.readOnly=r.get("readOnly"),h.style.cssText="width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;",h.style.color=r.get("textColor"),h.style.borderColor=r.get("textareaBorderColor"),h.style.backgroundColor=r.get("textareaColor"),h.value=v.value;var x=v.meta,_=document.createElement("div");_.style.cssText="position:absolute;bottom:0;left:0;right:0;";var b="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",w=document.createElement("div"),S=document.createElement("div");b+=";background-color:"+r.get("buttonColor"),b+=";color:"+r.get("buttonTextColor");var M=this;g.addEventListener(w,"click",i),g.addEventListener(S,"click",function(){var t;try{t="function"==typeof f?f(u,e.getOption()):c(h.value,x)}catch(n){throw i(),new Error("Data view format error "+n)}t&&e.dispatchAction({type:"changeDataView",newOption:t}),i()}),w.innerHTML=l[1],S.innerHTML=l[2],S.style.cssText=b,w.style.cssText=b,!r.get("readOnly")&&_.appendChild(S),_.appendChild(w),g.addEventListener(h,"keydown",function(t){if(9===(t.keyCode||t.which)){var e=this.value,i=this.selectionStart,n=this.selectionEnd;this.value=e.substring(0,i)+m+e.substring(n),this.selectionStart=this.selectionEnd=i+1,g.stop(t)}}),o.appendChild(s),o.appendChild(u),o.appendChild(_),u.style.height=n.clientHeight-80+"px",n.appendChild(o),this._dom=o},d.prototype.remove=function(t,e){this._dom&&e.getDom().removeChild(this._dom)},d.prototype.dispose=function(t,e){this.remove(t,e)},i(25).register("dataView",d),i(2).registerAction({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(t,e){var i=[];p.each(t.newOption.series,function(t){var n=e.getSeriesByName(t.name)[0];if(n){var r=n.get("data");i.push({name:t.name,data:f(t.data,r)})}else i.push(p.extend({type:"scatter"},t))}),e.mergeOption(p.defaults({series:i},t.newOption))}),t.exports=d},function(t,e,i){"use strict";function n(t,e,i){(this._brushController=new l(i.getZr())).on("brush",s.bind(this._onBrush,this)).mount(),this._isZoomActive}function r(t){var e={};return s.each(["xAxisIndex","yAxisIndex"],function(i){e[i]=t[i],null==e[i]&&(e[i]="all"),(e[i]===!1||"none"===e[i])&&(e[i]=[])}),e}function o(t,e){t.setIconStatus("back",h.count(e)>1?"emphasis":"normal")}function a(t,e,i,n){var o=i._isZoomActive;n&&"takeGlobalCursor"===n.type&&(o="dataZoomSelect"===n.key?n.dataZoomSelectActive:!1),i._isZoomActive=o,t.setIconStatus("zoom",o?"emphasis":"normal");var a=u.makeCoordInfoList(r(t.option),e),s=a.xAxisHas&&!a.yAxisHas?"lineX":!a.xAxisHas&&a.yAxisHas?"lineY":"rect";i._brushController.setPanels(u.makePanelOpts(a)).enableBrush(o?{brushType:s,brushStyle:{lineWidth:0,fill:"rgba(0,0,0,0.2)"}}:!1)}var s=i(1),l=i(110),u=i(111),h=i(108),c=s.each;i(186);var d="\x00_ec_\x00toolbox-dataZoom_";n.defaultOption={show:!0,icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:{zoom:"",back:""}};var f=n.prototype;f.render=function(t,e,i,n){this.model=t,this.ecModel=e,this.api=i,a(t,e,this,n),o(t,e)},f.onclick=function(t,e,i){p[i].call(this)},f.remove=function(t,e){this._brushController.unmount()},f.dispose=function(t,e){this._brushController.dispose()};var p={zoom:function(){var t=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:t})},back:function(){this._dispatchZoomAction(h.pop(this.ecModel))}};f._onBrush=function(t,e){function i(t,e,i){var r=n(t,i[t],a);r&&(o[r.id]={dataZoomId:r.id,startValue:e[0],endValue:e[1]})}function n(t,e,i){var n;return i.eachComponent({mainType:"dataZoom",subType:"select"},function(r,o){var a=r.get(t+"Index");null!=a&&i.getComponent(t,a)===e&&(n=r)}),n}if(e.isEnd&&t.length){var o={},a=this.ecModel;this._brushController.updateCovers([]);var s=u.makeCoordInfoList(r(this.model.option),a),l=[];u.parseOutputRanges(t,s,a,l);var c=t[0],d=l[0],f=c.coordRange,p=c.brushType;if(d&&f)if("rect"===p)i("xAxis",f[0],d),i("yAxis",f[1],d);else{var g={lineX:"xAxis",lineY:"yAxis"};i(g[p],f,d)}h.push(a,o),this._dispatchZoomAction(o)}},f._dispatchZoomAction=function(t){var e=[];c(t,function(t,i){e.push(s.clone(t))}),e.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:e})},i(25).register("dataZoom",n),i(2).registerPreprocessor(function(t){function e(t,e){if(e){var r=t+"Index",o=e[r];null==o||"all"==o||s.isArray(o)||(o=o===!1||"none"===o?[]:[o]),i(t,function(e,i){if(null==o||"all"==o||-1!==s.indexOf(o,i)){var a={type:"select",$fromToolbox:!0,id:d+t+i};a[r]=i,n.push(a)}})}}function i(e,i){var n=t[e];s.isArray(n)||(n=n?[n]:[]),c(n,i)}if(t){var n=t.dataZoom||(t.dataZoom=[]);s.isArray(n)||(t.dataZoom=n=[n]);var r=t.toolbox;if(r&&(s.isArray(r)&&(r=r[0]),r&&r.feature)){var o=r.feature.dataZoom;e("xAxis",o),e("yAxis",o)}}}),t.exports=n},function(t,e,i){"use strict";function n(t){this.model=t}var r=i(1);n.defaultOption={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z",tiled:"M2.3,2.2h22.8V25H2.3V2.2z M35,2.2h22.8V25H35V2.2zM2.3,35h22.8v22.8H2.3V35z M35,35h22.8v22.8H35V35z"},title:{line:"",bar:"",stack:"",tiled:""},option:{},seriesIndex:{}};var o=n.prototype;o.getIcons=function(){var t=this.model,e=t.get("icon"),i={};return r.each(t.get("type"),function(t){e[t]&&(i[t]=e[t])}),i};var a={line:function(t,e,i,n){return"bar"===t?r.merge({id:e,type:"line",data:i.get("data"),stack:i.get("stack"),markPoint:i.get("markPoint"),markLine:i.get("markLine")},n.get("option.line")||{},!0):void 0},bar:function(t,e,i,n){return"line"===t?r.merge({id:e,type:"bar",data:i.get("data"),stack:i.get("stack"),markPoint:i.get("markPoint"),markLine:i.get("markLine")},n.get("option.bar")||{},!0):void 0},stack:function(t,e,i,n){return"line"===t||"bar"===t?r.merge({id:e,stack:"__ec_magicType_stack__"},n.get("option.stack")||{},!0):void 0},tiled:function(t,e,i,n){return"line"===t||"bar"===t?r.merge({id:e,stack:""},n.get("option.tiled")||{},!0):void 0}},s=[["line","bar"],["stack","tiled"]];o.onclick=function(t,e,i){var n=this.model,o=n.get("seriesIndex."+i);if(a[i]){var l={series:[]},u=function(t){var e=t.subType,o=t.id,s=a[i](e,o,t,n);s&&(r.defaults(s,t.option),l.series.push(s));var u=t.coordinateSystem;if(u&&"cartesian2d"===u.type&&("line"===i||"bar"===i)){var h=u.getAxesByScale("ordinal")[0];if(h){var c=h.dim,d=t.get(c+"AxisIndex"),f=c+"Axis";l[f]=l[f]||[];for(var p=0;d>=p;p++)l[f][d]=l[f][d]||{};l[f][d].boundaryGap="bar"===i}}};r.each(s,function(t){r.indexOf(t,i)>=0&&r.each(t,function(t){n.setIconStatus(t,"normal")})}),n.setIconStatus(i,"emphasis"),t.eachComponent({mainType:"series",query:null==o?null:{seriesIndex:o}},u),e.dispatchAction({type:"changeMagicType",currentType:i,newOption:l})}};var l=i(2);l.registerAction({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(t,e){e.mergeOption(t.newOption)}),i(25).register("magicType",n),t.exports=n},function(t,e,i){"use strict";function n(t){this.model=t}var r=i(108);n.defaultOption={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:""};var o=n.prototype;o.onclick=function(t,e,i){r.clear(t),e.dispatchAction({type:"restore",from:this.uid})},i(25).register("restore",n),i(2).registerAction({type:"restore",event:"restore",update:"prepareAndUpdate"},function(t,e){e.resetOption("recreate")}),t.exports=n},function(t,e,i){function n(t){this.model=t}var r=i(12);n.defaultOption={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:"",type:"png",name:"",excludeComponents:["toolbox"],pixelRatio:1,lang:[""]},n.prototype.unusable=!r.canvasSupported;var o=n.prototype;o.onclick=function(t,e){var i=this.model,n=i.get("name")||t.get("title.0.text")||"echarts",r=document.createElement("a"),o=i.get("type",!0)||"png";r.download=n+"."+o,r.target="_blank";var a=e.getConnectedDataURL({type:o,backgroundColor:i.get("backgroundColor",!0)||t.get("backgroundColor")||"#fff",excludeComponents:i.get("excludeComponents"),pixelRatio:i.get("pixelRatio")});if(r.href=a,"function"==typeof MouseEvent){var s=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});r.dispatchEvent(s)}else{var l=i.get("lang"),u='<body style="margin:0;"><img src="'+a+'" style="max-width:100%;" title="'+(l&&l[0]||"")+'" /></body>',h=window.open();h.document.write(u)}},i(25).register("saveAsImage",n),t.exports=n},function(t,e,i){i(212),i(213),i(2).registerAction({type:"showTip",event:"showTip",update:"none"},function(){}),i(2).registerAction({type:"hideTip",event:"hideTip",update:"none"},function(){})},function(t,e,i){function n(t){var e="cubic-bezier(0.23, 1, 0.32, 1)",i="left "+t+"s "+e+",top "+t+"s "+e;return l.map(g,function(t){return t+"transition:"+i}).join(";")}function r(t){var e=[],i=t.get("fontSize"),n=t.getTextColor();return n&&e.push("color:"+n),e.push("font:"+t.getFont()),i&&e.push("line-height:"+Math.round(3*i/2)+"px"),d(["decoration","align"],function(i){var n=t.get(i);n&&e.push("text-"+i+":"+n)}),e.join(";")}function o(t){t=t;var e=[],i=t.get("transitionDuration"),o=t.get("backgroundColor"),a=t.getModel("textStyle"),s=t.get("padding");return i&&e.push(n(i)),o&&(p.canvasSupported?e.push("background-Color:"+o):(e.push("background-Color:#"+u.toHex(o)),e.push("filter:alpha(opacity=70)"))),d(["width","color","radius"],function(i){var n="border-"+i,r=f(n),o=t.get(r);null!=o&&e.push(n+":"+o+("color"===i?"":"px"))}),e.push(r(a)),null!=s&&e.push("padding:"+c.normalizeCssArray(s).join("px ")+"px"),e.join(";")+";"}function a(t,e){var i=document.createElement("div"),n=e.getZr();this.el=i,this._x=e.getWidth()/2,this._y=e.getHeight()/2,t.appendChild(i),this._container=t,this._show=!1,this._hideTimeout;var r=this;i.onmouseenter=function(){r.enterable&&(clearTimeout(r._hideTimeout),r._show=!0),r._inContent=!0},i.onmousemove=function(e){if(!r.enterable){var i=n.handler;h.normalizeEvent(t,e),i.dispatch("mousemove",e)}},i.onmouseleave=function(){r.enterable&&r._show&&r.hideLater(r._hideDelay),r._inContent=!1},s(i,t)}function s(t,e){function i(t){n(t.target)&&t.preventDefault()}function n(i){for(;i&&i!==e;){if(i===t)return!0;i=i.parentNode}}h.addEventListener(e,"touchstart",i),h.addEventListener(e,"touchmove",i),h.addEventListener(e,"touchend",i)}var l=i(1),u=i(18),h=i(24),c=i(9),d=l.each,f=c.toCamelCase,p=i(12),g=["","-webkit-","-moz-","-o-"],v="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;";a.prototype={constructor:a,enterable:!0,update:function(){var t=this._container,e=t.currentStyle||document.defaultView.getComputedStyle(t),i=t.style;"absolute"!==i.position&&"absolute"!==e.position&&(i.position="relative")},show:function(t){clearTimeout(this._hideTimeout);var e=this.el;e.style.cssText=v+o(t)+";left:"+this._x+"px;top:"+this._y+"px;"+(t.get("extraCssText")||""),e.style.display=e.innerHTML?"block":"none",this._show=!0},setContent:function(t){var e=this.el;e.innerHTML=t,e.style.display=t?"block":"none"},moveTo:function(t,e){var i=this.el.style;i.left=t+"px",i.top=e+"px",this._x=t,this._y=e},hide:function(){this.el.style.display="none",this._show=!1},hideLater:function(t){!this._show||this._inContent&&this.enterable||(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(l.bind(this.hide,this),t)):this.hide())},isShow:function(){return this._show}},t.exports=a},function(t,e,i){i(2).extendComponentModel({type:"tooltip",defaultOption:{zlevel:0,z:8,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove",alwaysShowContent:!1,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"rgba(50,50,50,0.7)",borderColor:"#333",borderRadius:4,borderWidth:0,padding:5,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:!0,animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",lineStyle:{color:"#555",width:1,type:"solid"},crossStyle:{color:"#555",width:1,type:"dashed",textStyle:{}},shadowStyle:{color:"rgba(150,150,150,0.3)"}},textStyle:{color:"#fff",fontSize:14}}})},function(t,e,i){function n(t,e){if(!t||!e)return!1;var i=g.round;return i(t[0])===i(e[0])&&i(t[1])===i(e[1])}function r(t,e,i,n){return{x1:t,y1:e,x2:i,y2:n}}function o(t,e,i,n){return{x:t,y:e,width:i,height:n}}function a(t,e,i,n,r,o){return{cx:t,cy:e,r0:i,r:n,startAngle:r,endAngle:o,clockwise:!0}}function s(t,e,i,n,r){var o=i.clientWidth,a=i.clientHeight,s=20;return t+o+s>n?t-=o+s:t+=s,e+a+s>r?e-=a+s:e+=s,[t,e]}function l(t,e,i){var n=i.clientWidth,r=i.clientHeight,o=5,a=0,s=0,l=e.width,u=e.height;switch(t){case"inside":a=e.x+l/2-n/2,s=e.y+u/2-r/2;break;case"top":a=e.x+l/2-n/2,s=e.y-r-o;break;case"bottom":a=e.x+l/2-n/2,s=e.y+u+o;break;case"left":a=e.x-n-o,s=e.y+u/2-r/2;break;case"right":a=e.x+l+o,s=e.y+u/2-r/2}return[a,s]}function u(t,e,i,n,r,o,a){var u=a.getWidth(),h=a.getHeight(),c=o&&o.getBoundingRect().clone();if(o&&c.applyTransform(o.transform),"function"==typeof t&&(t=t([e,i],r,n.el,c)),f.isArray(t))e=v(t[0],u),i=v(t[1],h);else if("string"==typeof t&&o){var d=l(t,c,n.el);e=d[0],i=d[1]}else{var d=s(e,i,n.el,u,h);e=d[0],i=d[1]}n.moveTo(e,i)}function h(t){var e=t.coordinateSystem,i=t.get("tooltip.trigger",!0);return!(!e||"cartesian2d"!==e.type&&"polar"!==e.type&&"singleAxis"!==e.type||"item"===i)}var c=i(211),d=i(3),f=i(1),p=i(9),g=i(4),v=g.parsePercent,m=i(12),y=i(8);i(2).extendComponentView({type:"tooltip",_axisPointers:{},init:function(t,e){if(!m.node){var i=new c(e.getDom(),e);this._tooltipContent=i,e.on("showTip",this._manuallyShowTip,this),e.on("hideTip",this._manuallyHideTip,this)}},render:function(t,e,i){if(!m.node){this.group.removeAll(),this._axisPointers={},this._tooltipModel=t,this._ecModel=e,this._api=i,this._lastHover={};var n=this._tooltipContent;n.update(),n.enterable=t.get("enterable"),this._alwaysShowContent=t.get("alwaysShowContent"),this._seriesGroupByAxis=this._prepareAxisTriggerData(t,e);var r=this._crossText;if(r&&this.group.add(r),null!=this._lastX&&null!=this._lastY){var o=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){o._manuallyShowTip({x:o._lastX,y:o._lastY})})}var a=this._api.getZr();a.off("click",this._tryShow),a.off("mousemove",this._mousemove),a.off("mouseout",this._hide),a.off("globalout",this._hide),"click"===t.get("triggerOn")?a.on("click",this._tryShow,this):(a.on("mousemove",this._mousemove,this),a.on("mouseout",this._hide,this),a.on("globalout",this._hide,this))}},_mousemove:function(t){var e=this._tooltipModel.get("showDelay"),i=this;clearTimeout(this._showTimeout),e>0?this._showTimeout=setTimeout(function(){i._tryShow(t)},e):this._tryShow(t)},_manuallyShowTip:function(t){if(t.from!==this.uid){var e=this._ecModel,i=t.seriesIndex,n=t.dataIndex,r=e.getSeriesByIndex(i),o=this._api;if(null==t.x||null==t.y){if(r||e.eachSeries(function(t){h(t)&&!r&&(r=t)}),r){var a=r.getData();null==n&&(n=a.indexOfName(t.name));var s,l,u=a.getItemGraphicEl(n),c=r.coordinateSystem;if(c&&c.dataToPoint){var d=c.dataToPoint(a.getValues(f.map(c.dimensions,function(t){return r.coordDimToDataDim(t)[0]}),n,!0));s=d&&d[0],l=d&&d[1]}else if(u){var p=u.getBoundingRect().clone();p.applyTransform(u.transform),s=p.x+p.width/2,l=p.y+p.height/2}null!=s&&null!=l&&this._tryShow({offsetX:s,offsetY:l,target:u,event:{}})}}else{var u=o.getZr().handler.findHover(t.x,t.y);this._tryShow({offsetX:t.x,offsetY:t.y,target:u,event:{}})}}},_manuallyHideTip:function(t){t.from!==this.uid&&this._hide()},_prepareAxisTriggerData:function(t,e){var i={};return e.eachSeries(function(t){if(h(t)){var e,n,r=t.coordinateSystem;"cartesian2d"===r.type?(e=r.getBaseAxis(),n=e.dim+e.index):"singleAxis"===r.type?(e=r.getAxis(),n=e.dim+e.type):(e=r.getBaseAxis(),n=e.dim+r.name),i[n]=i[n]||{coordSys:[],series:[]},i[n].coordSys.push(r),i[n].series.push(t)}},this),i},_tryShow:function(t){var e=t.target,i=this._tooltipModel,n=i.get("trigger"),r=this._ecModel,o=this._api;if(i)if(this._lastX=t.offsetX,this._lastY=t.offsetY,e&&null!=e.dataIndex){var a=e.dataModel||r.getSeriesByIndex(e.seriesIndex),s=e.dataIndex,l=a.getData().getItemModel(s);"axis"===(l.get("tooltip.trigger")||n)?this._showAxisTooltip(i,r,t):(this._ticket="",this._hideAxisPointer(),this._resetLastHover(),this._showItemTooltipContent(a,s,e.dataType,t)),o.dispatchAction({type:"showTip",from:this.uid,dataIndex:e.dataIndex,seriesIndex:e.seriesIndex})}else if(e&&e.tooltip){var u=e.tooltip;if("string"==typeof u){var h=u;u={content:h,formatter:h}}var c=new y(u,i),d=c.get("content"),f=Math.random();this._showTooltipContent(c,d,c.get("formatterParams")||{},f,t.offsetX,t.offsetY,e,o)}else"item"===n?this._hide():this._showAxisTooltip(i,r,t),"cross"===i.get("axisPointer.type")&&o.dispatchAction({type:"showTip",from:this.uid,x:t.offsetX,y:t.offsetY})},_showAxisTooltip:function(t,e,i){var r=t.getModel("axisPointer"),o=r.get("type");if("cross"===o){var a=i.target;if(a&&null!=a.dataIndex){var s=e.getSeriesByIndex(a.seriesIndex),l=a.dataIndex;this._showItemTooltipContent(s,l,a.dataType,i)}}this._showAxisPointer();var u=!0;f.each(this._seriesGroupByAxis,function(t){var e=t.coordSys,a=e[0],s=[i.offsetX,i.offsetY];if(!a.containPoint(s))return void this._hideAxisPointer(a.name);u=!1;var l=a.dimensions,h=a.pointToData(s,!0);s=a.dataToPoint(h);var c=a.getBaseAxis(),d=r.get("axis");"auto"===d&&(d=c.dim);var p=!1,g=this._lastHover;if("cross"===o)n(g.data,h)&&(p=!0),g.data=h;else{var v=f.indexOf(l,d);g.data===h[v]&&(p=!0),g.data=h[v]}"cartesian2d"!==a.type||p?"polar"!==a.type||p?"singleAxis"!==a.type||p||this._showSinglePointer(r,a,d,s):this._showPolarPointer(r,a,d,s):this._showCartesianPointer(r,a,d,s),"cross"!==o&&this._dispatchAndShowSeriesTooltipContent(a,t.series,s,h,p)},this),this._tooltipModel.get("show")||this._hideAxisPointer(),u&&this._hide()},_showCartesianPointer:function(t,e,i,n){function a(i,n,o){var a="x"===i?r(n[0],o[0],n[0],o[1]):r(o[0],n[1],o[1],n[1]),s=l._getPointerElement(e,t,i,a);d.subPixelOptimizeLine({shape:a,style:s.style}),c?d.updateProps(s,{shape:a},t):s.attr({shape:a})}function s(i,n,r){var a=e.getAxis(i),s=a.getBandWidth(),u=r[1]-r[0],h="x"===i?o(n[0]-s/2,r[0],s,u):o(r[0],n[1]-s/2,u,s),f=l._getPointerElement(e,t,i,h);c?d.updateProps(f,{shape:h},t):f.attr({shape:h})}var l=this,u=t.get("type"),h=e.getBaseAxis(),c="cross"!==u&&"category"===h.type&&h.getBandWidth()>20;if("cross"===u)a("x",n,e.getAxis("y").getGlobalExtent()),a("y",n,e.getAxis("x").getGlobalExtent()),this._updateCrossText(e,n,t);else{var f=e.getAxis("x"===i?"y":"x"),p=f.getGlobalExtent();"cartesian2d"===e.type&&("line"===u?a:s)(i,n,p)}},_showSinglePointer:function(t,e,i,n){function o(i,n,o){var s=e.getAxis(),u=s.orient,h="horizontal"===u?r(n[0],o[0],n[0],o[1]):r(o[0],n[1],o[1],n[1]),c=a._getPointerElement(e,t,i,h);l?d.updateProps(c,{shape:h},t):c.attr({shape:h})}var a=this,s=t.get("type"),l="cross"!==s&&"category"===e.getBaseAxis().type,u=e.getRect(),h=[u.y,u.y+u.height];o(i,n,h)},_showPolarPointer:function(t,e,i,n){function o(i,n,o){var a,s=e.pointToCoord(n);if("angle"===i){var u=e.coordToPoint([o[0],s[1]]),h=e.coordToPoint([o[1],s[1]]);a=r(u[0],u[1],h[0],h[1])}else a={cx:e.cx,cy:e.cy,r:s[0]};var c=l._getPointerElement(e,t,i,a);f?d.updateProps(c,{shape:a},t):c.attr({shape:a})}function s(i,n,r){var o,s=e.getAxis(i),u=s.getBandWidth(),h=e.pointToCoord(n),c=Math.PI/180;o="angle"===i?a(e.cx,e.cy,r[0],r[1],(-h[1]-u/2)*c,(-h[1]+u/2)*c):a(e.cx,e.cy,h[0]-u/2,h[0]+u/2,0,2*Math.PI);var p=l._getPointerElement(e,t,i,o);f?d.updateProps(p,{shape:o},t):p.attr({shape:o})}var l=this,u=t.get("type"),h=e.getAngleAxis(),c=e.getRadiusAxis(),f="cross"!==u&&"category"===e.getBaseAxis().type;if("cross"===u)o("angle",n,c.getExtent()),o("radius",n,h.getExtent()),this._updateCrossText(e,n,t);else{var p=e.getAxis("radius"===i?"angle":"radius"),g=p.getExtent();("line"===u?o:s)(i,n,g)}},_updateCrossText:function(t,e,i){var n=i.getModel("crossStyle"),r=n.getModel("textStyle"),o=this._tooltipModel,a=this._crossText;a||(a=this._crossText=new d.Text({style:{textAlign:"left",textVerticalAlign:"bottom"}}),this.group.add(a));var s=t.pointToData(e),l=t.dimensions;s=f.map(s,function(e,i){var n=t.getAxis(l[i]);return e="category"===n.type||"time"===n.type?n.scale.getLabel(e):p.addCommas(e.toFixed(n.getPixelPrecision()))}),a.setStyle({fill:r.getTextColor()||n.get("color"),textFont:r.getFont(),text:s.join(", "),x:e[0]+5,y:e[1]-5}),a.z=o.get("z"),a.zlevel=o.get("zlevel")},_getPointerElement:function(t,e,i,n){var r=this._tooltipModel,o=r.get("z"),a=r.get("zlevel"),s=this._axisPointers,l=t.name;if(s[l]=s[l]||{},s[l][i])return s[l][i];var u=e.get("type"),h=e.getModel(u+"Style"),c="shadow"===u,f=h[c?"getAreaStyle":"getLineStyle"](),p="polar"===t.type?c?"Sector":"radius"===i?"Circle":"Line":c?"Rect":"Line";c?f.stroke=null:f.fill=null;var g=s[l][i]=new d[p]({style:f,z:o,zlevel:a,silent:!0,shape:n});return this.group.add(g),g},_dispatchAndShowSeriesTooltipContent:function(t,e,i,n,r){var o=this._tooltipModel,a=t.getBaseAxis(),s="x"===a.dim||"radius"===a.dim?0:1,l=f.map(e,function(t){return{seriesIndex:t.seriesIndex,dataIndex:t.getAxisTooltipDataIndex?t.getAxisTooltipDataIndex(t.coordDimToDataDim(a.dim),n,a):t.getData().indexOfNearest(t.coordDimToDataDim(a.dim)[0],n[s],!1,"category"===a.type?.5:null)}}),h=this._lastHover,c=this._api;if(h.payloadBatch&&!r&&c.dispatchAction({type:"downplay",batch:h.payloadBatch}),r||(c.dispatchAction({type:"highlight",batch:l}),h.payloadBatch=l),c.dispatchAction({type:"showTip",dataIndex:l[0].dataIndex,seriesIndex:l[0].seriesIndex,from:this.uid}),a&&o.get("showContent")&&o.get("show")){var d=f.map(e,function(t,e){return t.getDataParams(l[e].dataIndex)});if(r)u(o.get("position"),i[0],i[1],this._tooltipContent,d,null,c);else{var p=l[0].dataIndex,g="time"===a.type?a.scale.getLabel(n[s]):e[0].getData().getName(p),v=(g?g+"<br />":"")+f.map(e,function(t,e){return t.formatTooltip(l[e].dataIndex,!0)}).join("<br />"),m="axis_"+t.name+"_"+p;this._showTooltipContent(o,v,d,m,i[0],i[1],null,c)}}},_showItemTooltipContent:function(t,e,i,n){var r=this._api,o=t.getData(i),a=o.getItemModel(e),s=a.get("tooltip",!0);if("string"==typeof s){var l=s;s={formatter:l}}var u=this._tooltipModel,h=t.getModel("tooltip",u),c=new y(s,h,h.ecModel),d=t.getDataParams(e,i),f=t.formatTooltip(e,!1,i),p="item_"+t.name+"_"+e;this._showTooltipContent(c,f,d,p,n.offsetX,n.offsetY,n.target,r)},_showTooltipContent:function(t,e,i,n,r,o,a,s){if(this._ticket="",t.get("showContent")&&t.get("show")){var l=this._tooltipContent,h=t.get("formatter"),c=t.get("position"),d=e;if(h)if("string"==typeof h)d=p.formatTpl(h,i);else if("function"==typeof h){var f=this,g=n,v=function(t,e){t===f._ticket&&(l.setContent(e),u(c,r,o,l,i,a,s))};f._ticket=g,d=h(i,g,v)}l.show(t),l.setContent(d),u(c,r,o,l,i,a,s)}},_showAxisPointer:function(t){if(t){var e=this._axisPointers[t];e&&f.each(e,function(t){t.show()})}else this.group.eachChild(function(t){t.show()}),this.group.show()},_resetLastHover:function(){var t=this._lastHover;t.payloadBatch&&this._api.dispatchAction({type:"downplay",batch:t.payloadBatch}),this._lastHover={}},_hideAxisPointer:function(t){if(t){var e=this._axisPointers[t];e&&f.each(e,function(t){t.hide()})}else this.group.children().length&&this.group.hide()},_hide:function(){clearTimeout(this._showTimeout),this._hideAxisPointer(),this._resetLastHover(),this._alwaysShowContent||this._tooltipContent.hideLater(this._tooltipModel.get("hideDelay")),this._api.dispatchAction({type:"hideTip",from:this.uid}),this._lastX=this._lastY=null},dispose:function(t,e){if(!m.node){var i=e.getZr();this._tooltipContent.hide(),i.off("click",this._tryShow),i.off("mousemove",this._mousemove),i.off("mouseout",this._hide),i.off("globalout",this._hide),e.off("showTip",this._manuallyShowTip),e.off("hideTip",this._manuallyHideTip)}}})},function(t,e,i){function n(t,e){var i=t.get("center"),n=t.get("radius"),r=e.getWidth(),o=e.getHeight(),a=s.parsePercent;this.cx=a(i[0],r),this.cy=a(i[1],o);var l=this.getRadiusAxis(),u=Math.min(r,o)/2;l.setExtent(0,a(n,u))}function r(t,e){var i=this,n=i.getAngleAxis(),r=i.getRadiusAxis();if(n.scale.setExtent(1/0,-(1/0)),r.scale.setExtent(1/0,-(1/0)),t.eachSeries(function(t){if(t.coordinateSystem===i){var e=t.getData();r.scale.unionExtent(e.getDataExtent("radius","category"!==r.type)),n.scale.unionExtent(e.getDataExtent("angle","category"!==n.type))}}),u(n,n.model),u(r,r.model),"category"===n.type&&!n.onBand){var o=n.getExtent(),a=360/n.scale.count();n.inverse?o[1]+=a:o[1]-=a,n.setExtent(o[0],o[1])}}function o(t,e){if(t.type=e.get("type"),t.scale=l.createScaleByModel(e),t.onBand=e.get("boundaryGap")&&"category"===t.type,"angleAxis"===e.mainType){var i=e.get("startAngle");t.inverse=e.get("inverse")^e.get("clockwise"),t.setExtent(i,i+(t.inverse?-360:360))}e.axis=t,t.model=e}var a=i(367),s=i(4),l=i(22),u=l.niceScaleExtent;i(368);var h={dimensions:a.prototype.dimensions,create:function(t,e){var i=[];return t.eachComponent("polar",function(t,s){var l=new a(s);l.resize=n,l.update=r;var u=l.getRadiusAxis(),h=l.getAngleAxis(),c=t.findAxisModel("radiusAxis"),d=t.findAxisModel("angleAxis");o(u,c),o(h,d),l.resize(t,e),i.push(l),t.coordinateSystem=l}),t.eachSeries(function(t){"polar"===t.get("coordinateSystem")&&(t.coordinateSystem=i[t.get("polarIndex")])}),i}};i(23).register("polar",h)},function(t,e){function i(){u=!1,a.length?l=a.concat(l):h=-1,l.length&&n()}function n(){if(!u){var t=setTimeout(i);u=!0;for(var e=l.length;e;){for(a=l,l=[];++h<e;)a&&a[h].run();h=-1,e=l.length}a=null,u=!1,clearTimeout(t)}}function r(t,e){this.fun=t,this.array=e}function o(){}var a,s=t.exports={},l=[],u=!1,h=-1;s.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];l.push(new r(t,e)),1!==l.length||u||setTimeout(n,0)},r.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=o,s.addListener=o,s.once=o,s.off=o,s.removeListener=o,s.removeAllListeners=o,s.emit=o,s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(t,e,i){function n(t){return parseInt(t,10)}function r(t,e){s.initVML(),this.root=t,this.storage=e;var i=document.createElement("div"),n=document.createElement("div");i.style.cssText="display:inline-block;overflow:hidden;position:relative;width:300px;height:150px;",n.style.cssText="position:absolute;left:0;top:0;",t.appendChild(i),this._vmlRoot=n,this._vmlViewport=i,this.resize();var r=e.delFromMap,o=e.addToMap;e.delFromMap=function(t){var i=e.get(t);r.call(e,t),i&&i.onRemove&&i.onRemove(n);},e.addToMap=function(t){t.onAdd&&t.onAdd(n),o.call(e,t)},this._firstPaint=!0}function o(t){return function(){a('In IE8.0 VML mode painter not support method "'+t+'"')}}var a=i(47),s=i(167);r.prototype={constructor:r,getViewportRoot:function(){return this._vmlViewport},refresh:function(){var t=this.storage.getDisplayList(!0,!0);this._paintList(t)},_paintList:function(t){for(var e=this._vmlRoot,i=0;i<t.length;i++){var n=t[i];n.invisible||n.ignore?(n.__alreadyNotVisible||n.onRemove(e),n.__alreadyNotVisible=!0):(n.__alreadyNotVisible&&n.onAdd(e),n.__alreadyNotVisible=!1,n.__dirty&&(n.beforeBrush&&n.beforeBrush(),(n.brushVML||n.brush).call(n,e),n.afterBrush&&n.afterBrush())),n.__dirty=!1}this._firstPaint&&(this._vmlViewport.appendChild(e),this._firstPaint=!1)},resize:function(){var t=this._getWidth(),e=this._getHeight();if(this._width!=t&&this._height!=e){this._width=t,this._height=e;var i=this._vmlViewport.style;i.width=t+"px",i.height=e+"px"}},dispose:function(){this.root.innerHTML="",this._vmlRoot=this._vmlViewport=this.storage=null},getWidth:function(){return this._width},getHeight:function(){return this._height},clear:function(){this.root.removeChild(this.vmlViewport)},_getWidth:function(){var t=this.root,e=t.currentStyle;return(t.clientWidth||n(e.width))-n(e.paddingLeft)-n(e.paddingRight)|0},_getHeight:function(){var t=this.root,e=t.currentStyle;return(t.clientHeight||n(e.height))-n(e.paddingTop)-n(e.paddingBottom)|0}};for(var l=["getLayer","insertLayer","eachLayer","eachBuildinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","toDataURL","pathToImage"],u=0;u<l.length;u++){var h=l[u];r.prototype[h]=o(h)}t.exports=r},function(t,e,i){if(!i(12).canvasSupported){var n=i(5),r=i(7),o=i(28).CMD,a=i(18),s=i(16),l=i(75),u=i(37),h=i(48),c=i(74),d=i(6),f=i(29),p=i(167),g=Math.round,v=Math.sqrt,m=Math.abs,y=Math.cos,x=Math.sin,_=Math.max,b=n.applyTransform,w=",",S="progid:DXImageTransform.Microsoft",M=21600,A=M/2,I=1e5,T=1e3,L=function(t){t.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px;",t.coordsize=M+","+M,t.coordorigin="0,0"},C=function(t){return String(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;")},D=function(t,e,i){return"rgb("+[t,e,i].join(",")+")"},P=function(t,e){e&&t&&e.parentNode!==t&&t.appendChild(e)},k=function(t,e){e&&t&&e.parentNode===t&&t.removeChild(e)},z=function(t,e,i){return(parseFloat(t)||0)*I+(parseFloat(e)||0)*T+i},O=function(t,e){return"string"==typeof t?t.lastIndexOf("%")>=0?parseFloat(t)/100*e:parseFloat(t):t},E=function(t,e,i){var n=a.parse(e);i=+i,isNaN(i)&&(i=1),n&&(t.color=D(n[0],n[1],n[2]),t.opacity=i*n[3])},R=function(t){var e=a.parse(t);return[D(e[0],e[1],e[2]),e[3]]},V=function(t,e,i){var n=e.fill;if(null!=n)if(n instanceof f){var r,o=0,a=[0,0],s=0,l=1,u=i.getBoundingRect(),h=u.width,c=u.height;if("linear"===n.type){r="gradient";var d=i.transform,p=[n.x*h,n.y*c],g=[n.x2*h,n.y2*c];d&&(b(p,p,d),b(g,g,d));var v=g[0]-p[0],m=g[1]-p[1];o=180*Math.atan2(v,m)/Math.PI,0>o&&(o+=360),1e-6>o&&(o=0)}else{r="gradientradial";var p=[n.x*h,n.y*c],d=i.transform,y=i.scale,x=h,w=c;a=[(p[0]-u.x)/x,(p[1]-u.y)/w],d&&b(p,p,d),x/=y[0]*M,w/=y[1]*M;var S=_(x,w);s=0/S,l=2*n.r/S-s}var A=n.colorStops.slice();A.sort(function(t,e){return t.offset-e.offset});for(var I=A.length,T=[],L=[],C=0;I>C;C++){var D=A[C],P=R(D.color);L.push(D.offset*l+s+" "+P[0]),0!==C&&C!==I-1||T.push(P)}if(I>=2){var k=T[0][0],z=T[1][0],O=T[0][1]*e.opacity,V=T[1][1]*e.opacity;t.type=r,t.method="none",t.focus="100%",t.angle=o,t.color=k,t.color2=z,t.colors=L.join(","),t.opacity=V,t.opacity2=O}"radial"===r&&(t.focusposition=a.join(","))}else E(t,n,e.opacity)},N=function(t,e){null!=e.lineDash&&(t.dashstyle=e.lineDash.join(" ")),null==e.stroke||e.stroke instanceof f||E(t,e.stroke,e.opacity)},B=function(t,e,i,n){var r="fill"==e,o=t.getElementsByTagName(e)[0];null!=i[e]&&"none"!==i[e]&&(r||!r&&i.lineWidth)?(t[r?"filled":"stroked"]="true",i[e]instanceof f&&k(t,o),o||(o=p.createNode(e)),r?V(o,i,n):N(o,i),P(t,o)):(t[r?"filled":"stroked"]="false",k(t,o))},G=[[],[],[]],F=function(t,e){var i,n,r,a,s,l,u=o.M,h=o.C,c=o.L,d=o.A,f=o.Q,p=[];for(a=0;a<t.length;){switch(r=t[a++],n="",i=0,r){case u:n=" m ",i=1,s=t[a++],l=t[a++],G[0][0]=s,G[0][1]=l;break;case c:n=" l ",i=1,s=t[a++],l=t[a++],G[0][0]=s,G[0][1]=l;break;case f:case h:n=" c ",i=3;var m,_,S=t[a++],I=t[a++],T=t[a++],L=t[a++];r===f?(m=T,_=L,T=(T+2*S)/3,L=(L+2*I)/3,S=(s+2*S)/3,I=(l+2*I)/3):(m=t[a++],_=t[a++]),G[0][0]=S,G[0][1]=I,G[1][0]=T,G[1][1]=L,G[2][0]=m,G[2][1]=_,s=m,l=_;break;case d:var C=0,D=0,P=1,k=1,z=0;e&&(C=e[4],D=e[5],P=v(e[0]*e[0]+e[1]*e[1]),k=v(e[2]*e[2]+e[3]*e[3]),z=Math.atan2(-e[1]/k,e[0]/P));var O=t[a++],E=t[a++],R=t[a++],V=t[a++],N=t[a++]+z,B=t[a++]+N+z;a++;var F=t[a++],H=O+y(N)*R,W=E+x(N)*V,S=O+y(B)*R,I=E+x(B)*V,Z=F?" wa ":" at ";Math.abs(H-S)<1e-10&&(Math.abs(B-N)>.01?F&&(H+=270/M):Math.abs(W-E)<1e-10?F&&O>H||!F&&H>O?I-=270/M:I+=270/M:F&&E>W||!F&&W>E?S+=270/M:S-=270/M),p.push(Z,g(((O-R)*P+C)*M-A),w,g(((E-V)*k+D)*M-A),w,g(((O+R)*P+C)*M-A),w,g(((E+V)*k+D)*M-A),w,g((H*P+C)*M-A),w,g((W*k+D)*M-A),w,g((S*P+C)*M-A),w,g((I*k+D)*M-A)),s=S,l=I;break;case o.R:var q=G[0],j=G[1];q[0]=t[a++],q[1]=t[a++],j[0]=q[0]+t[a++],j[1]=q[1]+t[a++],e&&(b(q,q,e),b(j,j,e)),q[0]=g(q[0]*M-A),j[0]=g(j[0]*M-A),q[1]=g(q[1]*M-A),j[1]=g(j[1]*M-A),p.push(" m ",q[0],w,q[1]," l ",j[0],w,q[1]," l ",j[0],w,j[1]," l ",q[0],w,j[1]);break;case o.Z:p.push(" x ")}if(i>0){p.push(n);for(var U=0;i>U;U++){var X=G[U];e&&b(X,X,e),p.push(g(X[0]*M-A),w,g(X[1]*M-A),i-1>U?w:"")}}}return p.join("")};d.prototype.brushVML=function(t){var e=this.style,i=this._vmlEl;i||(i=p.createNode("shape"),L(i),this._vmlEl=i),B(i,"fill",e,this),B(i,"stroke",e,this);var n=this.transform,r=null!=n,o=i.getElementsByTagName("stroke")[0];if(o){var a=e.lineWidth;if(r&&!e.strokeNoScale){var s=n[0]*n[3]-n[1]*n[2];a*=v(m(s))}o.weight=a+"px"}var l=this.path;this.__dirtyPath&&(l.beginPath(),this.buildPath(l,this.shape),l.toStatic(),this.__dirtyPath=!1),i.path=F(l.data,this.transform),i.style.zIndex=z(this.zlevel,this.z,this.z2),P(t,i),e.text?this.drawRectText(t,this.getBoundingRect()):this.removeRectText(t)},d.prototype.onRemove=function(t){k(t,this._vmlEl),this.removeRectText(t)},d.prototype.onAdd=function(t){P(t,this._vmlEl),this.appendRectText(t)};var H=function(t){return"object"==typeof t&&t.tagName&&"IMG"===t.tagName.toUpperCase()};h.prototype.brushVML=function(t){var e,i,n=this.style,r=n.image;if(H(r)){var o=r.src;if(o===this._imageSrc)e=this._imageWidth,i=this._imageHeight;else{var a=r.runtimeStyle,s=a.width,l=a.height;a.width="auto",a.height="auto",e=r.width,i=r.height,a.width=s,a.height=l,this._imageSrc=o,this._imageWidth=e,this._imageHeight=i}r=o}else r===this._imageSrc&&(e=this._imageWidth,i=this._imageHeight);if(r){var u=n.x||0,h=n.y||0,c=n.width,d=n.height,f=n.sWidth,m=n.sHeight,y=n.sx||0,x=n.sy||0,M=f&&m,A=this._vmlEl;A||(A=p.doc.createElement("div"),L(A),this._vmlEl=A);var I,T=A.style,C=!1,D=1,k=1;if(this.transform&&(I=this.transform,D=v(I[0]*I[0]+I[1]*I[1]),k=v(I[2]*I[2]+I[3]*I[3]),C=I[1]||I[2]),C){var O=[u,h],E=[u+c,h],R=[u,h+d],V=[u+c,h+d];b(O,O,I),b(E,E,I),b(R,R,I),b(V,V,I);var N=_(O[0],E[0],R[0],V[0]),B=_(O[1],E[1],R[1],V[1]),G=[];G.push("M11=",I[0]/D,w,"M12=",I[2]/k,w,"M21=",I[1]/D,w,"M22=",I[3]/k,w,"Dx=",g(u*D+I[4]),w,"Dy=",g(h*k+I[5])),T.padding="0 "+g(N)+"px "+g(B)+"px 0",T.filter=S+".Matrix("+G.join("")+", SizingMethod=clip)"}else I&&(u=u*D+I[4],h=h*k+I[5]),T.filter="",T.left=g(u)+"px",T.top=g(h)+"px";var F=this._imageEl,W=this._cropEl;F||(F=p.doc.createElement("div"),this._imageEl=F);var Z=F.style;if(M){if(e&&i)Z.width=g(D*e*c/f)+"px",Z.height=g(k*i*d/m)+"px";else{var q=new Image,j=this;q.onload=function(){q.onload=null,e=q.width,i=q.height,Z.width=g(D*e*c/f)+"px",Z.height=g(k*i*d/m)+"px",j._imageWidth=e,j._imageHeight=i,j._imageSrc=r},q.src=r}W||(W=p.doc.createElement("div"),W.style.overflow="hidden",this._cropEl=W);var U=W.style;U.width=g((c+y*c/f)*D),U.height=g((d+x*d/m)*k),U.filter=S+".Matrix(Dx="+-y*c/f*D+",Dy="+-x*d/m*k+")",W.parentNode||A.appendChild(W),F.parentNode!=W&&W.appendChild(F)}else Z.width=g(D*c)+"px",Z.height=g(k*d)+"px",A.appendChild(F),W&&W.parentNode&&(A.removeChild(W),this._cropEl=null);var X="",Y=n.opacity;1>Y&&(X+=".Alpha(opacity="+g(100*Y)+") "),X+=S+".AlphaImageLoader(src="+r+", SizingMethod=scale)",Z.filter=X,A.style.zIndex=z(this.zlevel,this.z,this.z2),P(t,A),n.text&&this.drawRectText(t,this.getBoundingRect())}},h.prototype.onRemove=function(t){k(t,this._vmlEl),this._vmlEl=null,this._cropEl=null,this._imageEl=null,this.removeRectText(t)},h.prototype.onAdd=function(t){P(t,this._vmlEl),this.appendRectText(t)};var W,Z="normal",q={},j=0,U=100,X=document.createElement("div"),Y=function(t){var e=q[t];if(!e){j>U&&(j=0,q={});var i,n=X.style;try{n.font=t,i=n.fontFamily.split(",")[0]}catch(r){}e={style:n.fontStyle||Z,variant:n.fontVariant||Z,weight:n.fontWeight||Z,size:0|parseFloat(n.fontSize||12),family:i||"Microsoft YaHei"},q[t]=e,j++}return e};s.measureText=function(t,e){var i=p.doc;W||(W=i.createElement("div"),W.style.cssText="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;",p.doc.body.appendChild(W));try{W.style.font=e}catch(n){}return W.innerHTML="",W.appendChild(i.createTextNode(t)),{width:W.offsetWidth}};for(var $=new r,Q=function(t,e,i,n){var r=this.style,o=r.text;if(o){var a,l,u=r.textAlign,h=Y(r.textFont),c=h.style+" "+h.variant+" "+h.weight+" "+h.size+'px "'+h.family+'"',d=r.textBaseline,f=r.textVerticalAlign;i=i||s.getBoundingRect(o,c,u,d);var v=this.transform;if(v&&!n&&($.copy(e),$.applyTransform(v),e=$),n)a=e.x,l=e.y;else{var m=r.textPosition,y=r.textDistance;if(m instanceof Array)a=e.x+O(m[0],e.width),l=e.y+O(m[1],e.height),u=u||"left",d=d||"top";else{var x=s.adjustTextPositionOnRect(m,e,i,y);a=x.x,l=x.y,u=u||x.textAlign,d=d||x.textBaseline}}if(f){switch(f){case"middle":l-=i.height/2;break;case"bottom":l-=i.height}d="top"}var _=h.size;switch(d){case"hanging":case"top":l+=_/1.75;break;case"middle":break;default:l-=_/2.25}switch(u){case"left":break;case"center":a-=i.width/2;break;case"right":a-=i.width}var S,M,A,I=p.createNode,T=this._textVmlEl;T?(A=T.firstChild,S=A.nextSibling,M=S.nextSibling):(T=I("line"),S=I("path"),M=I("textpath"),A=I("skew"),M.style["v-text-align"]="left",L(T),S.textpathok=!0,M.on=!0,T.from="0 0",T.to="1000 0.05",P(T,A),P(T,S),P(T,M),this._textVmlEl=T);var D=[a,l],k=T.style;v&&n?(b(D,D,v),A.on=!0,A.matrix=v[0].toFixed(3)+w+v[2].toFixed(3)+w+v[1].toFixed(3)+w+v[3].toFixed(3)+",0,0",A.offset=(g(D[0])||0)+","+(g(D[1])||0),A.origin="0 0",k.left="0px",k.top="0px"):(A.on=!1,k.left=g(a)+"px",k.top=g(l)+"px"),M.string=C(o);try{M.style.font=c}catch(E){}B(T,"fill",{fill:n?r.fill:r.textFill,opacity:r.opacity},this),B(T,"stroke",{stroke:n?r.stroke:r.textStroke,opacity:r.opacity,lineDash:r.lineDash},this),T.style.zIndex=z(this.zlevel,this.z,this.z2),P(t,T)}},K=function(t){k(t,this._textVmlEl),this._textVmlEl=null},J=function(t){P(t,this._textVmlEl)},tt=[l,u,h,d,c],et=0;et<tt.length;et++){var it=tt[et].prototype;it.drawRectText=Q,it.removeRectText=K,it.appendRectText=J}c.prototype.brushVML=function(t){var e=this.style;e.text?this.drawRectText(t,{x:e.x||0,y:e.y||0,width:0,height:0},this.getBoundingRect(),!0):this.removeRectText(t)},c.prototype.onRemove=function(t){this.removeRectText(t)},c.prototype.onAdd=function(t){this.appendRectText(t)}}},function(t,e,i){i(217),i(76).registerPainter("vml",i(216))},function(t,e,i){var n=i(1),r=i(220),o=i(2);o.registerAction({type:"geoRoam",event:"geoRoam",update:"updateLayout"},function(t,e){var i=t.componentType||"series";e.eachComponent({mainType:i,query:t},function(e){var o=e.coordinateSystem;if("geo"===o.type){var a=r.updateCenterAndZoom(o,t,e.get("scaleLimit"));e.setCenter&&e.setCenter(a.center),e.setZoom&&e.setZoom(a.zoom),"series"===i&&n.each(e.seriesGroup,function(t){t.setCenter(a.center),t.setZoom(a.zoom)})}})})},function(t,e){var i={};i.updateCenterAndZoom=function(t,e,i){var n=t.getZoom(),r=t.getCenter(),o=e.zoom,a=t.dataToPoint(r);if(null!=e.dx&&null!=e.dy){a[0]-=e.dx,a[1]-=e.dy;var r=t.pointToData(a);t.setCenter(r)}if(null!=o){if(i){var s=i.min||0,l=i.max||1/0;o=Math.max(Math.min(n*o,l),s)/n}t.scale[0]*=o,t.scale[1]*=o;var u=t.position,h=(e.originX-u[0])*(o-1),c=(e.originY-u[1])*(o-1);u[0]-=h,u[1]-=c,t.updateTransform();var r=t.pointToData(a);t.setCenter(r),t.setZoom(o*n)}return{center:t.getCenter(),zoom:t.getZoom()}},t.exports=i},function(t,e,i){var n=i(5);t.exports=function(t){var e=t.coordinateSystem;if(!e||"view"===e.type){var i=e.getBoundingRect(),r=t.getData(),o=r.graph,a=0,s=r.getSum("value"),l=2*Math.PI/(s||r.count()),u=i.width/2+i.x,h=i.height/2+i.y,c=Math.min(i.width,i.height)/2;o.eachNode(function(t){var e=t.getValue("value");a+=l*(s?e:2)/2,t.setLayout([c*Math.cos(a)+u,c*Math.sin(a)+h]),a+=l*(s?e:2)/2}),o.eachEdge(function(t){var e,i=t.getModel().get("lineStyle.normal.curveness")||0,r=n.clone(t.node1.getLayout()),o=n.clone(t.node2.getLayout()),a=(r[0]+o[0])/2,s=(r[1]+o[1])/2;i>0&&(i*=3,e=[u*i+a*(1-i),h*i+s*(1-i)]),t.setLayout([r,o,e])})}}},function(t,e,i){var n=i(5);t.exports=function(t){t.eachEdge(function(t){var e=t.getModel().get("lineStyle.normal.curveness")||0,i=n.clone(t.node1.getLayout()),r=n.clone(t.node2.getLayout()),o=[i,r];e>0&&o.push([(i[0]+r[0])/2-(i[1]-r[1])*e,(i[1]+r[1])/2-(r[0]-i[0])*e]),t.setLayout(o)})}},function(t,e,i){var n=i(222);t.exports=function(t){var e=t.coordinateSystem;if(!e||"view"===e.type){var i=t.getGraph();i.eachNode(function(t){var e=t.getModel();t.setLayout([+e.get("x"),+e.get("y")])}),n(i)}}},function(t,e,i){function n(t,e,i){r.Group.call(this),this.add(this.createLine(t,e,i)),this._updateEffectSymbol(t,e)}var r=i(3),o=i(92),a=i(1),s=i(26),l=i(5),u=i(17),h=n.prototype;h.createLine=function(t,e,i){return new o(t,e,i)},h._updateEffectSymbol=function(t,e){var i=t.getItemModel(e),n=i.getModel("effect"),r=n.get("symbolSize"),o=n.get("symbol");a.isArray(r)||(r=[r,r]);var l=n.get("color")||t.getItemVisual(e,"color"),u=this.childAt(1);this._symbolType!==o&&(this.remove(u),u=s.createSymbol(o,-.5,-.5,1,1,l),u.z2=100,u.culling=!0,this.add(u)),u&&(u.setStyle("shadowColor",l),u.setStyle(n.getItemStyle(["color"])),u.attr("scale",r),u.setColor(l),u.attr("scale",r),this._symbolType=o,this._updateEffectAnimation(t,n,e))},h._updateEffectAnimation=function(t,e,i){var n=this.childAt(1);if(n){var r=this,o=t.getItemLayout(i),a=1e3*e.get("period"),s=e.get("loop"),l=e.get("constantSpeed"),u=e.get("delay")||function(e){return e/t.count()*a/3},h="function"==typeof u;if(n.ignore=!0,this.updateAnimationPoints(n,o),l>0&&(a=this.getLineLength(n)/l*1e3),a!==this._period||s!==this._loop){n.stopAnimation();var c=u;h&&(c=u(i)),n.__t>0&&(c=-a*n.__t),n.__t=0;var d=n.animate("",s).when(a,{__t:1}).delay(c).during(function(){r.updateSymbolPosition(n)});s||d.done(function(){r.remove(n)}),d.start()}this._period=a,this._loop=s}},h.getLineLength=function(t){return l.dist(t.__p1,t.__cp1)+l.dist(t.__cp1,t.__p2)},h.updateAnimationPoints=function(t,e){t.__p1=e[0],t.__p2=e[1],t.__cp1=e[2]||[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]},h.updateData=function(t,e,i){this.childAt(0).updateData(t,e,i),this._updateEffectSymbol(t,e)},h.updateSymbolPosition=function(t){var e=t.__p1,i=t.__p2,n=t.__cp1,r=t.__t,o=t.position,a=u.quadraticAt,s=u.quadraticDerivativeAt;o[0]=a(e[0],n[0],i[0],r),o[1]=a(e[1],n[1],i[1],r);var l=s(e[0],n[0],i[0],r),h=s(e[1],n[1],i[1],r);t.rotation=-Math.atan2(h,l)-Math.PI/2,t.ignore=!1},h.updateLayout=function(t,e){this.childAt(0).updateLayout(t,e);var i=t.getItemModel(e).getModel("effect");this._updateEffectAnimation(t,i,e)},a.inherits(n,r.Group),t.exports=n},function(t,e,i){function n(t,e,i){r.Group.call(this),this._createPolyline(t,e,i)}var r=i(3),o=i(1),a=n.prototype;a._createPolyline=function(t,e,i){var n=t.getItemLayout(e),o=new r.Polyline({shape:{points:n}});this.add(o),this._updateCommonStl(t,e,i)},a.updateData=function(t,e,i){var n=t.hostModel,o=this.childAt(0),a={shape:{points:t.getItemLayout(e)}};r.updateProps(o,a,n,e),this._updateCommonStl(t,e,i)},a._updateCommonStl=function(t,e,i){var n=this.childAt(0),a=t.getItemModel(e),s=t.getItemVisual(e,"color"),l=i&&i.lineStyle,u=i&&i.hoverLineStyle;i&&!t.hasItemOption||(l=a.getModel("lineStyle.normal").getLineStyle(),u=a.getModel("lineStyle.emphasis").getLineStyle()),n.useStyle(o.defaults({strokeNoScale:!0,fill:"none",stroke:s},l)),n.hoverStyle=u,r.setHoverStyle(this)},a.updateLayout=function(t,e){var i=this.childAt(0);i.setShape("points",t.getItemLayout(e))},o.inherits(n,r.Group),t.exports=n},function(t,e,i){var n=i(14),r=i(377),o=i(239),a=i(30),s=i(23),l=i(1),u=i(35);t.exports=function(t,e,i,h,c){for(var d=new r(h),f=0;f<t.length;f++)d.addNode(l.retrieve(t[f].id,t[f].name,f),f);for(var p=[],g=[],f=0;f<e.length;f++){var v=e[f],m=v.source,y=v.target;d.addEdge(m,y,f)&&(g.push(v),p.push(l.retrieve(v.id,m+" > "+y)))}var x,_=i.get("coordinateSystem");if("cartesian2d"===_||"polar"===_)x=u(t,i,i.ecModel);else{var b=s.get(_),w=a((b&&"view"!==b.type?b.dimensions||[]:[]).concat(["value"]),t);x=new n(w,i),x.initData(t)}var S=new n(["value"],i);return S.initData(g,p),c&&c(x,S),o({mainData:x,struct:d,structAttr:"graph",datas:{node:x,edge:S},datasAttr:{node:"data",edge:"edgeData"}}),d.update(),d}},function(t,e,i){function n(t,e){var i=t.getItemStyle(),n=t.get("areaColor");return n&&(i.fill=n),i}function r(t,e,i,n){e.off("click"),t.get("selectedMode")&&e.on("click",function(r){for(var a=r.target;!a.__region;)a=a.parent;if(a){var s=a.__region,l={type:("geo"===t.mainType?"geo":"map")+"ToggleSelect",name:s.name,from:n.uid};l[t.mainType+"Id"]=t.id,i.dispatchAction(l),o(t,e)}})}function o(t,e){e.eachChild(function(e){e.__region&&e.trigger(t.isSelected(e.__region.name)?"emphasis":"normal")})}function a(t,e){var i=new l.Group;this._controller=new s(t.getZr(),e?i:null,null),this.group=i,this._updateGroup=e}var s=i(78),l=i(3),u=i(1);a.prototype={constructor:a,draw:function(t,e,i,a,s){var h=t.getData&&t.getData(),c=t.coordinateSystem,d=this.group,f=c.scale,p={position:c.position,scale:f};!d.childAt(0)||s?d.attr(p):l.updateProps(d,p,t),d.removeAll();var g=["itemStyle","normal"],v=["itemStyle","emphasis"],m=["label","normal"],y=["label","emphasis"];u.each(c.regions,function(e){var i=new l.Group,r=new l.CompoundPath({shape:{paths:[]}});i.add(r);var o,a=t.getRegionModel(e.name)||t,s=a.getModel(g),c=a.getModel(v),p=n(s,f),x=n(c,f),_=a.getModel(m),b=a.getModel(y);if(h){o=h.indexOfName(e.name);var w=h.getItemVisual(o,"color",!0);w&&(p.fill=w)}var S=_.getModel("textStyle"),M=b.getModel("textStyle");u.each(e.contours,function(t){var e=new l.Polygon({shape:{points:t}});r.shape.paths.push(e)}),r.setStyle(p),r.style.strokeNoScale=!0,r.culling=!0;var A=_.get("show"),I=b.get("show"),T=h&&isNaN(h.get("value",o)),L=h&&h.getItemLayout(o);if(!h||T&&(A||I)||L&&L.showLabel){var C=h?o:e.name,D=t.getFormattedLabel(C,"normal"),P=t.getFormattedLabel(C,"emphasis"),k=new l.Text({style:{text:A?D||e.name:"",fill:S.getTextColor(),textFont:S.getFont(),textAlign:"center",textVerticalAlign:"middle"},hoverStyle:{text:I?P||e.name:"",fill:M.getTextColor(),textFont:M.getFont()},position:e.center.slice(),scale:[1/f[0],1/f[1]],z2:10,silent:!0});i.add(k)}if(h)h.setItemGraphicEl(o,i);else{var a=t.getRegionModel(e.name);r.eventData={componentType:"geo",geoIndex:t.componentIndex,name:e.name,region:a&&a.option||{}}}i.__region=e,l.setHoverStyle(i,x),d.add(i)}),this._updateController(t,e,i),r(t,d,i,a),o(t,d)},remove:function(){this.group.removeAll(),this._controller.dispose()},_updateController:function(t,e,i){function n(){var e={type:"geoRoam",componentType:a};return e[a+"Id"]=t.id,e}var r=t.coordinateSystem,o=this._controller;o.zoomLimit=t.get("scaleLimit"),o.zoom=r.getZoom(),o.enable(t.get("roam")||!1);var a=t.mainType;o.off("pan").on("pan",function(t,e){i.dispatchAction(u.extend(n(),{dx:t,dy:e}))}),o.off("zoom").on("zoom",function(t,e,r){if(i.dispatchAction(u.extend(n(),{zoom:t,originX:e,originY:r})),this._updateGroup){var o=this.group,a=o.scale;o.traverse(function(t){"text"===t.type&&t.attr("scale",[1/a[0],1/a[1]])})}},this),o.rectProvider=function(){return r.getViewRectAfterRoam()}}},t.exports=a},function(t,e,i){i(238),i(363),i(331);var n=i(2),r=i(1),o=5;n.extendComponentView({type:"parallel",render:function(t,e,i){var n=i.getZr();if(!this.__onMouseDown){var a;n.on("mousedown",this.__onMouseDown=function(t){a=[t.offsetX,t.offsetY]}),n.on("mouseup",this.__onMouseUp=function(e){var n=[e.offsetX,e.offsetY],s=Math.pow(a[0]-n[0],2)+Math.pow(a[1]-n[1],2);if(t.get("axisExpandable")&&!(s>o)){var l=t.coordinateSystem,u=l.findClosestAxisDim(n);if(u){var h=r.indexOf(l.dimensions,u);i.dispatchAction({type:"parallelAxisExpand",axisExpandCenter:h})}}})}},dispose:function(t,e){e.getZr().off(this.__onMouseDown),e.getZr().off(this.__onMouseUp)}}),n.registerPreprocessor(i(364))},function(t,e,i){var n=i(2),r=i(1),o=i(12),a=i(381),s=i(71),l=i(171),u=s.mapVisual,h=i(10),c=s.eachVisual,d=i(4),f=r.isArray,p=r.each,g=d.asc,v=d.linearMap,m=r.noop,y=["#f6efa6","#d88273","#bf444c"],x=n.extendComponentModel({type:"visualMap",dependencies:["series"],stateList:["inRange","outOfRange"],replacableOptionKeys:["inRange","outOfRange","target","controller","color"],dataBound:[-(1/0),1/0],layoutMode:{type:"box",ignoreSize:!0},defaultOption:{show:!0,zlevel:0,z:4,seriesIndex:null,min:0,max:200,dimension:null,inRange:null,outOfRange:null,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,color:null,formatter:null,text:null,textStyle:{color:"#333"}},init:function(t,e,i){this._dataExtent,this.targetVisuals={},this.controllerVisuals={},this.textStyleModel,this.itemSize,this.mergeDefaultAndTheme(t,i)},optionUpdated:function(t,e){var i=this.option;o.canvasSupported||(i.realtime=!1),!e&&l.replaceVisualOption(i,t,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},resetVisual:function(t){var e=this.stateList;t=r.bind(t,this),this.controllerVisuals=l.createVisualMappings(this.option.controller,e,t),this.targetVisuals=l.createVisualMappings(this.option.target,e,t)},resetTargetSeries:function(){var t=this.option,e=null==t.seriesIndex;t.seriesIndex=e?[]:h.normalizeToArray(t.seriesIndex),e&&this.ecModel.eachSeries(function(e,i){t.seriesIndex.push(i)})},eachTargetSeries:function(t,e){r.each(this.option.seriesIndex,function(i){t.call(e,this.ecModel.getSeriesByIndex(i))},this)},isTargetSeries:function(t){var e=!1;return this.eachTargetSeries(function(i){i===t&&(e=!0)}),e},formatValueText:function(t,e,i){function n(t){return t===u[0]?"min":t===u[1]?"max":(+t).toFixed(l)}var o,a,s=this.option,l=s.precision,u=this.dataBound,h=s.formatter;return i=i||["<",">"],r.isArray(t)&&(t=t.slice(),o=!0),a=e?t:o?[n(t[0]),n(t[1])]:n(t),r.isString(h)?h.replace("{value}",o?a[0]:a).replace("{value2}",o?a[1]:a):r.isFunction(h)?o?h(t[0],t[1]):h(t):o?t[0]===u[0]?i[0]+" "+a[1]:t[1]===u[1]?i[1]+" "+a[0]:a[0]+" - "+a[1]:a},resetExtent:function(){var t=this.option,e=g([t.min,t.max]);this._dataExtent=e},getDataDimension:function(t){var e=this.option.dimension;return null!=e?e:t.dimensions.length-1},getExtent:function(){return this._dataExtent.slice()},completeVisualOption:function(){function t(t){f(n.color)&&!t.inRange&&(t.inRange={color:n.color.slice().reverse()}),t.inRange=t.inRange||{color:y},p(this.stateList,function(e){var i=t[e];if(r.isString(i)){var n=a.get(i,"active",d);n?(t[e]={},t[e][i]=n):delete t[e]}},this)}function e(t,e,i){var n=t[e],r=t[i];n&&!r&&(r=t[i]={},p(n,function(t,e){if(s.isValidType(e)){var i=a.get(e,"inactive",d);null!=i&&(r[e]=i,"color"!==e||r.hasOwnProperty("opacity")||r.hasOwnProperty("colorAlpha")||(r.opacity=[0,0]))}}))}function i(t){var e=(t.inRange||{}).symbol||(t.outOfRange||{}).symbol,i=(t.inRange||{}).symbolSize||(t.outOfRange||{}).symbolSize,n=this.get("inactiveColor");p(this.stateList,function(o){var a=this.itemSize,s=t[o];s||(s=t[o]={color:d?n:[n]}),null==s.symbol&&(s.symbol=e&&r.clone(e)||(d?"roundRect":["roundRect"])),null==s.symbolSize&&(s.symbolSize=i&&r.clone(i)||(d?a[0]:[a[0],a[0]])),s.symbol=u(s.symbol,function(t){return"none"===t||"square"===t?"roundRect":t});var l=s.symbolSize;if(null!=l){var h=-(1/0);c(l,function(t){t>h&&(h=t)}),s.symbolSize=u(l,function(t){return v(t,[0,h],[0,a[0]],!0)})}},this)}var n=this.option,o={inRange:n.inRange,outOfRange:n.outOfRange},l=n.target||(n.target={}),h=n.controller||(n.controller={});r.merge(l,o),r.merge(h,o);var d=this.isCategory();t.call(this,l),t.call(this,h),e.call(this,l,"inRange","outOfRange"),i.call(this,h)},resetItemSize:function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},isCategory:function(){return!!this.option.categories},setSelected:m,getValueState:m});t.exports=x},function(t,e,i){var n=i(1),r=i(3),o=i(9),a=i(13),s=i(2),l=i(71);t.exports=s.extendComponentView({type:"visualMap",autoPositionValues:{left:1,right:1,top:1,bottom:1},init:function(t,e){this.ecModel=t,this.api=e,this.visualMapModel},render:function(t,e,i,n){return this.visualMapModel=t,t.get("show")===!1?void this.group.removeAll():void this.doRender.apply(this,arguments)},renderBackground:function(t){var e=this.visualMapModel,i=o.normalizeCssArray(e.get("padding")||0),n=t.getBoundingRect();t.add(new r.Rect({z2:-1,silent:!0,shape:{x:n.x-i[3],y:n.y-i[0],width:n.width+i[3]+i[1],height:n.height+i[0]+i[2]},style:{fill:e.get("backgroundColor"),stroke:e.get("borderColor"),lineWidth:e.get("borderWidth")}}))},getControllerVisual:function(t,e,i){function r(t){return u[t]}function o(t,e){u[t]=e}i=i||{};var a=i.forceState,s=this.visualMapModel,u={};if("symbol"===e&&(u.symbol=s.get("itemSymbol")),"color"===e){var h=s.get("contentColor");u.color=h}var c=s.controllerVisuals[a||s.getValueState(t)],d=l.prepareVisualTypes(c);return n.each(d,function(n){var a=c[n];i.convertOpacityToAlpha&&"opacity"===n&&(n="colorAlpha",a=c.__alphaForOpacity),l.dependsOn(n,e)&&a&&a.applyVisual(t,r,o)}),u[e]},positionGroup:function(t){var e=this.visualMapModel,i=this.api;a.positionGroup(t,e.getBoxLayoutParams(),{width:i.getWidth(),height:i.getHeight()})},doRender:n.noop})},function(t,e,i){var n=i(13),r={getItemAlign:function(t,e,i){var r=t.option,o=r.align;if(null!=o&&"auto"!==o)return o;for(var a={width:e.getWidth(),height:e.getHeight()},s="horizontal"===r.orient?1:0,l=[["left","right","width"],["top","bottom","height"]],u=l[s],h=[0,null,10],c={},d=0;3>d;d++)c[l[1-s][d]]=h[d],c[u[d]]=2===d?i[0]:r[u[d]];var f=[["x","width",3],["y","height",0]][s],p=n.getLayoutRect(c,a,r.padding);return u[(p.margin[f[2]]||0)+p[f[0]]+.5*p[f[1]]<.5*a[f[1]]?0:1]}};t.exports=r},function(t,e,i){function n(t,e){return t&&t.hasOwnProperty&&t.hasOwnProperty(e)}var r=i(1),o=r.each;t.exports=function(t){var e=t&&t.visualMap;r.isArray(e)||(e=e?[e]:[]),o(e,function(t){if(t){n(t,"splitList")&&!n(t,"pieces")&&(t.pieces=t.splitList,delete t.splitList);var e=t.pieces;e&&r.isArray(e)&&o(e,function(t){r.isObject(t)&&(n(t,"start")&&!n(t,"min")&&(t.min=t.start),n(t,"end")&&!n(t,"max")&&(t.max=t.end))})}})}},function(t,e,i){i(11).registerSubTypeDefaulter("visualMap",function(t){return t.categories||(t.pieces?t.pieces.length>0:t.splitNumber>0)&&!t.calculable?"piecewise":"continuous"})},function(t,e,i){function n(t,e){t.eachTargetSeries(function(e){var i=e.getData();s.applyVisual(t.stateList,t.targetVisuals,i,t.getValueState,t,t.getDataDimension(i))})}function r(t){t.eachSeries(function(e){var i=e.getData(),n=[];t.eachComponent("visualMap",function(t){if(t.isTargetSeries(e)){var r={};n.push(r),r.stops=t.getStops(e,o),r.dimension=t.getDataDimension(i)}}),e.getData().setVisual("visualMeta",n)})}function o(t,e,i){function n(t){return s[t]}function r(t,e){s[t]=e}for(var o=t.targetVisuals[i],a=l.prepareVisualTypes(o),s={},u=0,h=a.length;h>u;u++){var c=a[u],d=o["colorAlpha"===c?"__alphaForOpacity":c];d&&d.applyVisual(e,n,r)}return s.color}var a=i(2),s=i(171),l=i(71);a.registerVisual(a.PRIORITY.VISUAL.COMPONENT,function(t){t.eachComponent("visualMap",function(e){n(e,t)}),r(t)})},function(t,e,i){var n=i(2),r={type:"selectDataRange",event:"dataRangeSelected",update:"update"};n.registerAction(r,function(t,e){e.eachComponent({mainType:"visualMap",query:t},function(e){e.setSelected(t.selected)})})},function(t,e,i){function n(){s.call(this)}function r(t){this.name=t,this.zoomLimit,s.call(this),this._roamTransform=new n,this._viewTransform=new n,this._center,this._zoom}var o=i(5),a=i(19),s=i(86),l=i(1),u=i(7),h=o.applyTransform;l.mixin(n,s),r.prototype={constructor:r,type:"view",dimensions:["x","y"],setBoundingRect:function(t,e,i,n){return this._rect=new u(t,e,i,n),this._rect},getBoundingRect:function(){return this._rect},setViewRect:function(t,e,i,n){i=i,n=n,this.transformTo(t,e,i,n),this._viewRect=new u(t,e,i,n)},transformTo:function(t,e,i,n){var r=this.getBoundingRect(),o=this._viewTransform;o.transform=r.calculateTransform(new u(t,e,i,n)),o.decomposeTransform(),this._updateTransform()},setCenter:function(t){t&&(this._center=t,this._updateCenterAndZoom())},setZoom:function(t){t=t||1;var e=this.zoomLimit;e&&(null!=e.max&&(t=Math.min(e.max,t)),null!=e.min&&(t=Math.max(e.min,t))),this._zoom=t,this._updateCenterAndZoom()},getDefaultCenter:function(){var t=this.getBoundingRect(),e=t.x+t.width/2,i=t.y+t.height/2;return[e,i]},getCenter:function(){return this._center||this.getDefaultCenter()},getZoom:function(){return this._zoom||1},getRoamTransform:function(){return this._roamTransform},_updateCenterAndZoom:function(){var t=this._viewTransform.getLocalTransform(),e=this._roamTransform,i=this.getDefaultCenter(),n=this.getCenter(),r=this.getZoom();n=o.applyTransform([],n,t),i=o.applyTransform([],i,t),e.origin=n,e.position=[i[0]-n[0],i[1]-n[1]],e.scale=[r,r],this._updateTransform()},_updateTransform:function(){var t=this._roamTransform,e=this._viewTransform;e.parent=t,t.updateTransform(),e.updateTransform(),e.transform&&a.copy(this.transform||(this.transform=[]),e.transform),this.transform?(this.invTransform=this.invTransform||[],a.invert(this.invTransform,this.transform)):this.invTransform=null,this.decomposeTransform()},getViewRect:function(){return this._viewRect},getViewRectAfterRoam:function(){var t=this.getBoundingRect().clone();return t.applyTransform(this.transform),t},dataToPoint:function(t){var e=this.transform;return e?h([],t,e):[t[0],t[1]]},pointToData:function(t){var e=this.invTransform;return e?h([],t,e):[t[0],t[1]]}},l.mixin(r,s),t.exports=r},function(t,e,i){function n(t,e,i){if(this.name=t,this.contours=e,i)i=[i[0],i[1]];else{var n=this.getBoundingRect();i=[n.x+n.width/2,n.y+n.height/2]}this.center=i}var r=i(240),o=i(7),a=i(73),s=i(5);n.prototype={constructor:n,getBoundingRect:function(){var t=this._rect;if(t)return t;for(var e=Number.MAX_VALUE,i=[e,e],n=[-e,-e],r=[],l=[],u=this.contours,h=0;h<u.length;h++)a.fromPoints(u[h],r,l),s.min(i,i,r),s.max(n,n,l);return 0===h&&(i[0]=i[1]=n[0]=n[1]=0),this._rect=new o(i[0],i[1],n[0]-i[0],n[1]-i[1])},contain:function(t){var e=this.getBoundingRect(),i=this.contours;if(e.contain(t[0],t[1]))for(var n=0,o=i.length;o>n;n++)if(r.contain(i[n],t[0],t[1]))return!0;return!1},transformTo:function(t,e,i,n){var r=this.getBoundingRect(),a=r.width/r.height;i?n||(n=i/a):i=a*n;for(var l=new o(t,e,i,n),u=r.calculateTransform(l),h=this.contours,c=0;c<h.length;c++)for(var d=0;d<h[c].length;d++)s.applyTransform(h[c][d],h[c][d],u);r=this._rect,r.copy(l),this.center=[r.x+r.width/2,r.y+r.height/2]}},t.exports=n},function(t,e,i){function n(t,e){var i=[];return t.eachComponent("parallel",function(n,o){var a=new r(n,t,e);a.name="parallel_"+o,a.resize(n,e),n.coordinateSystem=a,a.model=n,i.push(a)}),t.eachSeries(function(t){if("parallel"===t.get("coordinateSystem")){var e=t.get("parallelIndex");t.coordinateSystem=i[e]}}),i}var r=i(361);i(23).register("parallel",{create:n})},function(t,e,i){function n(t){var e=t.mainData,i=t.datas;i||(i={main:e},t.datasAttr={main:"data"}),t.datas=t.mainData=null,u(e,i,t),d(i,function(i){d(e.TRANSFERABLE_METHODS,function(e){i.wrapMethod(e,c.curry(r,t))})}),e.wrapMethod("cloneShallow",c.curry(a,t)),d(e.CHANGABLE_METHODS,function(i){e.wrapMethod(i,c.curry(o,t))}),c.assert(i[e.dataType]===e)}function r(t,e){if(l(this)){var i=c.extend({},this[f]);i[this.dataType]=e,u(e,i,t)}else h(e,this.dataType,this[p],t);return e}function o(t,e){return t.struct&&t.struct.update(this),e}function a(t,e){return d(e[f],function(i,n){i!==e&&h(i.cloneShallow(),n,e,t)}),e}function s(t){var e=this[p];return null==t||null==e?e:e[f][t]}function l(t){return t[p]===t}function u(t,e,i){t[f]={},d(e,function(e,n){h(e,n,t,i)})}function h(t,e,i,n){i[f][e]=t,t[p]=i,t.dataType=e,n.struct&&(t[n.structAttr]=n.struct,n.struct[n.datasAttr[e]]=t),t.getLinkedData=s}var c=i(1),d=c.each,f="\x00__link_datas",p="\x00__link_mainData";t.exports=n},function(t,e,i){function n(t,e){return Math.abs(t-e)<a}function r(t,e,i){var r=0,a=t[0];if(!a)return!1;for(var s=1;s<t.length;s++){var l=t[s];r+=o(a[0],a[1],l[0],l[1],e,i),a=l}var u=t[0];return n(a[0],u[0])&&n(a[1],u[1])||(r+=o(a[0],a[1],u[0],u[1],e,i)),0!==r}var o=i(84),a=1e-8;t.exports={contain:r}},function(t,e,i){var n=i(2);i(242),i(243),n.registerVisual(i(245)),n.registerLayout(i(244))},function(t,e,i){"use strict";var n=i(1),r=i(15),o=i(168),a=r.extend({type:"series.boxplot",dependencies:["xAxis","yAxis","grid"],valueDimensions:["min","Q1","median","Q3","max"],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,xAxisIndex:0,yAxisIndex:0,layout:null,boxWidth:[7,50],itemStyle:{normal:{color:"#fff",borderWidth:1},emphasis:{borderWidth:2,shadowBlur:5,shadowOffsetX:2,shadowOffsetY:2,shadowColor:"rgba(0,0,0,0.4)"}},animationEasing:"elasticOut",animationDuration:800}});n.mixin(a,o.seriesModelMixin,!0),t.exports=a},function(t,e,i){"use strict";function n(t,e,i){var n=e.getItemModel(i),r=n.getModel(u),o=e.getItemVisual(i,"color"),s=r.getItemStyle(["borderColor"]),l=t.childAt(t.whiskerIndex);l.style.set(s),l.style.stroke=o,l.dirty();var c=t.childAt(t.bodyIndex);c.style.set(s),c.style.stroke=o,c.dirty();var d=n.getModel(h).getItemStyle();a.setHoverStyle(t,d)}var r=i(1),o=i(27),a=i(3),s=i(168),l=o.extend({type:"boxplot",getStyleUpdater:function(){return n}});r.mixin(l,s.viewMixin,!0);var u=["itemStyle","normal"],h=["itemStyle","emphasis"];t.exports=l},function(t,e,i){function n(t){var e=[],i=[];return t.eachSeriesByType("boxplot",function(t){var n=t.getBaseAxis(),r=a.indexOf(i,n);0>r&&(r=i.length,i[r]=n,e[r]={axis:n,seriesModels:[]}),e[r].seriesModels.push(t)}),e}function r(t){var e,i,n=t.axis,r=t.seriesModels,o=r.length,s=t.boxWidthList=[],h=t.boxOffsetList=[],c=[];if("category"===n.type)i=n.getBandWidth();else{var d=0;u(r,function(t){d=Math.max(d,t.getData().count())}),e=n.getExtent(),Math.abs(e[1]-e[0])/d}u(r,function(t){var e=t.get("boxWidth");a.isArray(e)||(e=[e,e]),c.push([l(e[0],i)||0,l(e[1],i)||0])});var f=.8*i-2,p=f/o*.3,g=(f-p*(o-1))/o,v=g/2-f/2;u(r,function(t,e){h.push(v),v+=p+g,s.push(Math.min(Math.max(g,c[e][0]),c[e][1]))})}function o(t,e,i){var n=t.coordinateSystem,r=t.getData(),o=t.dimensions,a=t.get("layout"),s=i/2;r.each(o,function(){function t(t){var i=[];i[f]=c,i[p]=t;var r;return isNaN(c)||isNaN(t)?r=[NaN,NaN]:(r=n.dataToPoint(i),r[f]+=e),r}function i(t,e){var i=t.slice(),n=t.slice();i[f]+=s,n[f]-=s,e?x.push(i,n):x.push(n,i)}function l(t){var e=[t.slice(),t.slice()];e[0][f]-=s,e[1][f]+=s,y.push(e)}var u=arguments,h=o.length,c=u[0],d=u[h],f="horizontal"===a?0:1,p=1-f,g=t(u[3]),v=t(u[1]),m=t(u[5]),y=[[v,t(u[2])],[m,t(u[4])]];l(v),l(m),l(g);var x=[];i(y[0][1],0),i(y[1][1],1),r.setItemLayout(d,{chartLayout:a,initBaseline:g[p],median:g,bodyEnds:x,whiskerEnds:y})})}var a=i(1),s=i(4),l=s.parsePercent,u=a.each;t.exports=function(t){var e=n(t);u(e,function(t){var e=t.seriesModels;e.length&&(r(t),u(e,function(e,i){o(e,t.boxOffsetList[i],t.boxWidthList[i])}))})}},function(t,e){var i=["itemStyle","normal","borderColor"];t.exports=function(t,e){var n=t.get("color");t.eachRawSeriesByType("boxplot",function(e){var r=n[e.seriesIndex%n.length],o=e.getData();o.setVisual({legendSymbol:"roundRect",color:e.get(i)||r}),t.isSeriesFiltered(e)||o.each(function(t){var e=o.getItemModel(t);o.setItemVisual(t,{color:e.get(i,!0)})})})}},function(t,e,i){var n=i(2);i(247),i(248),n.registerPreprocessor(i(251)),n.registerVisual(i(250)),n.registerLayout(i(249))},function(t,e,i){"use strict";var n=i(1),r=i(15),o=i(168),a=i(9),s=a.encodeHTML,l=a.addCommas,u=r.extend({type:"series.candlestick",dependencies:["xAxis","yAxis","grid"],valueDimensions:["open","close","lowest","highest"],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,xAxisIndex:0,yAxisIndex:0,layout:null,itemStyle:{normal:{color:"#c23531",color0:"#314656",borderWidth:1,borderColor:"#c23531",borderColor0:"#314656"},emphasis:{borderWidth:2}},animationUpdate:!1,animationEasing:"linear",animationDuration:300},getShadowDim:function(){return"open"},formatTooltip:function(t,e){var i=n.map(this.valueDimensions,function(e){return e+": "+l(this._data.get(e,t))},this);return s(this.name)+"<br />"+i.join("<br />")},brushSelector:function(t,e){return e.rect(t.brushRect)}});n.mixin(u,o.seriesModelMixin,!0),t.exports=u},function(t,e,i){"use strict";function n(t,e,i){var n=e.getItemModel(i),r=n.getModel(u),o=e.getItemVisual(i,"color"),s=e.getItemVisual(i,"borderColor")||o,l=r.getItemStyle(["color","color0","borderColor","borderColor0"]),c=t.childAt(t.whiskerIndex);c.useStyle(l),c.style.stroke=s;var d=t.childAt(t.bodyIndex);d.useStyle(l),d.style.fill=o,d.style.stroke=s;var f=n.getModel(h).getItemStyle();a.setHoverStyle(t,f)}var r=i(1),o=i(27),a=i(3),s=i(168),l=o.extend({type:"candlestick",getStyleUpdater:function(){return n}});r.mixin(l,s.viewMixin,!0);var u=["itemStyle","normal"],h=["itemStyle","emphasis"];t.exports=l},function(t,e){function i(t,e){var i,a=t.getBaseAxis(),s="category"===a.type?a.getBandWidth():(i=a.getExtent(),Math.abs(i[1]-i[0])/e.count());return s/2-2>r?s/2-2:s-r>o?r:Math.max(s-o,n)}var n=2,r=5,o=4;t.exports=function(t){t.eachSeriesByType("candlestick",function(t){var e=t.coordinateSystem,n=t.getData(),r=t.dimensions,o=t.get("layout"),a=i(t,n);n.each(r,function(){function t(t){var i=[];return i[d]=h,i[f]=t,isNaN(h)||isNaN(t)?[NaN,NaN]:e.dataToPoint(i)}function i(t,e){var i=t.slice(),n=t.slice();i[d]+=a/2,n[d]-=a/2,e?A.push(i,n):A.push(n,i)}function s(){var e=t(Math.min(p,g,v,m)),i=t(Math.max(p,g,v,m));return e[d]-=a/2,i[d]-=a/2,{x:e[0],y:e[1],width:f?a:i[0]-e[0],height:f?i[1]-e[1]:a}}var l=arguments,u=r.length,h=l[0],c=l[u],d="horizontal"===o?0:1,f=1-d,p=l[1],g=l[2],v=l[3],m=l[4],y=Math.min(p,g),x=Math.max(p,g),_=t(y),b=t(x),w=t(v),S=t(m),M=[[S,b],[w,_]],A=[];i(b,0),i(_,1),n.setItemLayout(c,{chartLayout:o,sign:p>g?-1:g>p?1:0,initBaseline:p>g?b[f]:_[f],bodyEnds:A,whiskerEnds:M,brushRect:s()})},!0)})}},function(t,e){var i=["itemStyle","normal","borderColor"],n=["itemStyle","normal","borderColor0"],r=["itemStyle","normal","color"],o=["itemStyle","normal","color0"];t.exports=function(t,e){t.eachRawSeriesByType("candlestick",function(e){var a=e.getData();a.setVisual({legendSymbol:"roundRect"}),t.isSeriesFiltered(e)||a.each(function(t){var e=a.getItemModel(t),s=a.getItemLayout(t).sign;a.setItemVisual(t,{color:e.get(s>0?r:o),borderColor:e.get(s>0?i:n)})})})}},function(t,e,i){var n=i(1);t.exports=function(t){t&&n.isArray(t.series)&&n.each(t.series,function(t){n.isObject(t)&&"k"===t.type&&(t.type="candlestick")})}},function(t,e,i){var n=i(1),r=i(2);i(253),i(254),r.registerVisual(n.curry(i(46),"effectScatter","circle",null)),r.registerLayout(n.curry(i(55),"effectScatter"))},function(t,e,i){"use strict";var n=i(35),r=i(15);t.exports=r.extend({type:"series.effectScatter",dependencies:["grid","polar"],getInitialData:function(t,e){var i=n(t.data,this,e);return i},brushSelector:"point",defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,effectType:"ripple",showEffectOn:"render",rippleEffect:{period:4,scale:2.5,brushType:"fill"},xAxisIndex:0,yAxisIndex:0,polarIndex:0,geoIndex:0,symbolSize:10}})},function(t,e,i){var n=i(39),r=i(281);i(2).extendChartView({type:"effectScatter",init:function(){this._symbolDraw=new n(r)},render:function(t,e,i){var n=t.getData(),r=this._symbolDraw;r.updateData(n),this.group.add(r.group)},updateLayout:function(){this._symbolDraw.updateLayout()},remove:function(t,e){this._symbolDraw&&this._symbolDraw.remove(e)}})},function(t,e,i){var n=i(1),r=i(2);i(256),i(257),r.registerVisual(n.curry(i(72),"funnel")),r.registerLayout(i(258)),r.registerProcessor(n.curry(i(70),"funnel"))},function(t,e,i){"use strict";var n=i(14),r=i(10),o=i(30),a=i(2).extendSeriesModel({type:"series.funnel",init:function(t){a.superApply(this,"init",arguments),this.legendDataProvider=function(){return this._dataBeforeProcessed},this._defaultLabelLine(t)},getInitialData:function(t,e){var i=o(["value"],t.data),r=new n(i,this);return r.initData(t.data),r},_defaultLabelLine:function(t){r.defaultEmphasis(t.labelLine,["show"]);var e=t.labelLine.normal,i=t.labelLine.emphasis;e.show=e.show&&t.label.normal.show,i.show=i.show&&t.label.emphasis.show},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",gap:0,funnelAlign:"center",label:{normal:{show:!0,position:"outer"},emphasis:{show:!0}},labelLine:{normal:{show:!0,length:20,lineStyle:{width:1,type:"solid"}},emphasis:{}},itemStyle:{normal:{borderColor:"#fff",borderWidth:1},emphasis:{}}}});t.exports=a},function(t,e,i){function n(t,e){function i(){a.ignore=a.hoverIgnore,s.ignore=s.hoverIgnore}function n(){a.ignore=a.normalIgnore,s.ignore=s.normalIgnore}o.Group.call(this);var r=new o.Polygon,a=new o.Polyline,s=new o.Text;this.add(r),this.add(a),this.add(s),this.updateData(t,e,!0),this.on("emphasis",i).on("normal",n).on("mouseover",i).on("mouseout",n)}function r(t,e,i,n){var r=n.getModel("textStyle"),o=n.get("position"),s="inside"===o||"inner"===o||"center"===o;return{fill:r.getTextColor()||(s?"#fff":t.getItemVisual(e,"color")),textFont:r.getFont(),text:a.retrieve(t.hostModel.getFormattedLabel(e,i),t.getName(e))}}var o=i(3),a=i(1),s=n.prototype,l=["itemStyle","normal","opacity"];s.updateData=function(t,e,i){var n=this.childAt(0),r=t.hostModel,s=t.getItemModel(e),u=t.getItemLayout(e),h=t.getItemModel(e).get(l);h=null==h?1:h,n.useStyle({}),i?(n.setShape({points:u.points}),n.setStyle({opacity:0}),o.initProps(n,{style:{opacity:h}},r,e)):o.updateProps(n,{style:{opacity:h},shape:{points:u.points}},r,e);var c=s.getModel("itemStyle"),d=t.getItemVisual(e,"color");n.setStyle(a.defaults({lineJoin:"round",fill:d},c.getModel("normal").getItemStyle(["opacity"]))),n.hoverStyle=c.getModel("emphasis").getItemStyle(),this._updateLabel(t,e),o.setHoverStyle(this)},s._updateLabel=function(t,e){var i=this.childAt(1),n=this.childAt(2),a=t.hostModel,s=t.getItemModel(e),l=t.getItemLayout(e),u=l.label,h=t.getItemVisual(e,"color");o.updateProps(i,{shape:{points:u.linePoints||u.linePoints}},a,e),o.updateProps(n,{style:{x:u.x,y:u.y}},a,e),n.attr({style:{textAlign:u.textAlign,textVerticalAlign:u.verticalAlign,textFont:u.font},rotation:u.rotation,origin:[u.x,u.y],z2:10});var c=s.getModel("label.normal"),d=s.getModel("label.emphasis"),f=s.getModel("labelLine.normal"),p=s.getModel("labelLine.emphasis");n.setStyle(r(t,e,"normal",c)),n.ignore=n.normalIgnore=!c.get("show"),n.hoverIgnore=!d.get("show"),i.ignore=i.normalIgnore=!f.get("show"),i.hoverIgnore=!p.get("show"),i.setStyle({stroke:h}),i.setStyle(f.getModel("lineStyle").getLineStyle()),n.hoverStyle=r(t,e,"emphasis",d),i.hoverStyle=p.getModel("lineStyle").getLineStyle()},a.inherits(n,o.Group);var u=i(27).extend({type:"funnel",render:function(t,e,i){var r=t.getData(),o=this._data,a=this.group;r.diff(o).add(function(t){var e=new n(r,t);r.setItemGraphicEl(t,e),a.add(e)}).update(function(t,e){var i=o.getItemGraphicEl(e);i.updateData(r,t),a.add(i),r.setItemGraphicEl(t,i)}).remove(function(t){var e=o.getItemGraphicEl(t);a.remove(e)}).execute(),this._data=r},remove:function(){this.group.removeAll(),this._data=null}});t.exports=u},function(t,e,i){function n(t,e){return a.getLayoutRect(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function r(t,e){for(var i=t.mapArray("value",function(t){return t}),n=[],r="ascending"===e,o=0,a=t.count();a>o;o++)n[o]=o;return n.sort(function(t,e){return r?i[t]-i[e]:i[e]-i[t]}),n}function o(t){t.each(function(e){var i,n,r,o,a=t.getItemModel(e),s=a.getModel("label.normal"),l=s.get("position"),u=a.getModel("labelLine.normal"),h=t.getItemLayout(e),c=h.points,d="inner"===l||"inside"===l||"center"===l;if(d)n=(c[0][0]+c[1][0]+c[2][0]+c[3][0])/4,r=(c[0][1]+c[1][1]+c[2][1]+c[3][1])/4,i="center",o=[[n,r],[n,r]];else{var f,p,g,v=u.get("length");"left"===l?(f=(c[3][0]+c[0][0])/2,p=(c[3][1]+c[0][1])/2,g=f-v,n=g-5,i="right"):(f=(c[1][0]+c[2][0])/2,p=(c[1][1]+c[2][1])/2,g=f+v,n=g+5,i="left");var m=p;o=[[f,p],[g,m]],r=m}h.label={linePoints:o,x:n,y:r,verticalAlign:"middle",textAlign:i,inside:d}})}var a=i(13),s=i(4),l=s.parsePercent;t.exports=function(t,e,i){t.eachSeriesByType("funnel",function(t){var i=t.getData(),a=t.get("sort"),u=n(t,e),h=r(i,a),c=[l(t.get("minSize"),u.width),l(t.get("maxSize"),u.width)],d=i.getDataExtent("value"),f=t.get("min"),p=t.get("max");null==f&&(f=Math.min(d[0],0)),null==p&&(p=d[1]);var g=t.get("funnelAlign"),v=t.get("gap"),m=(u.height-v*(i.count()-1))/i.count(),y=u.y,x=function(t,e){var n,r=i.get("value",t)||0,o=s.linearMap(r,[f,p],c,!0);switch(g){case"left":n=u.x;break;case"center":n=u.x+(u.width-o)/2;break;case"right":n=u.x+u.width-o}return[[n,e],[n+o,e]]};"ascending"===a&&(m=-m,v=-v,y+=u.height,h=h.reverse());for(var _=0;_<h.length;_++){var b=h[_],w=h[_+1],S=x(b,y),M=x(w,y+m);y+=m+v,i.setItemLayout(b,{points:S.concat(M.slice().reverse())})}o(i)})}},function(t,e,i){i(260),i(261)},function(t,e,i){var n=i(14),r=i(15),o=i(1),a=r.extend({type:"series.gauge",getInitialData:function(t,e){var i=new n(["value"],this),r=t.data||[];return o.isArray(r)||(r=[r]),i.initData(r),i},defaultOption:{zlevel:0,z:2,center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,lineStyle:{color:[[.2,"#91c7ae"],[.8,"#63869e"],[1,"#c23531"]],width:30}},splitLine:{show:!0,length:30,lineStyle:{color:"#eee",width:2,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:8,lineStyle:{color:"#eee",width:1,type:"solid"}},axisLabel:{show:!0,distance:5,textStyle:{color:"auto"}},pointer:{show:!0,length:"80%",width:8},itemStyle:{normal:{color:"auto"}},title:{show:!0,offsetCenter:[0,"-40%"],textStyle:{color:"#333",fontSize:15}},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:40,offsetCenter:[0,"40%"],textStyle:{color:"auto",fontSize:30}}}});t.exports=a},function(t,e,i){function n(t,e){var i=t.get("center"),n=e.getWidth(),r=e.getHeight(),o=Math.min(n,r),a=l(i[0],e.getWidth()),s=l(i[1],e.getHeight()),u=l(t.get("radius"),o/2);return{cx:a,cy:s,r:u}}function r(t,e){return e&&("string"==typeof e?t=e.replace("{value}",t):"function"==typeof e&&(t=e(t))),t}var o=i(262),a=i(3),s=i(4),l=s.parsePercent,u=2*Math.PI,h=i(27).extend({type:"gauge",render:function(t,e,i){this.group.removeAll();var r=t.get("axisLine.lineStyle.color"),o=n(t,i);this._renderMain(t,e,i,r,o)},_renderMain:function(t,e,i,n,r){for(var o=this.group,s=t.getModel("axisLine"),l=s.getModel("lineStyle"),h=t.get("clockwise"),c=-t.get("startAngle")/180*Math.PI,d=-t.get("endAngle")/180*Math.PI,f=(d-c)%u,p=c,g=l.get("width"),v=0;v<n.length;v++){var m=Math.min(Math.max(n[v][0],0),1),d=c+f*m,y=new a.Sector({shape:{startAngle:p,endAngle:d,cx:r.cx,cy:r.cy,clockwise:h,r0:r.r-g,r:r.r},silent:!0});y.setStyle({fill:n[v][1]}),y.setStyle(l.getLineStyle(["color","borderWidth","borderColor"])),o.add(y),p=d}var x=function(t){if(0>=t)return n[0][1];for(var e=0;e<n.length;e++)if(n[e][0]>=t&&(0===e?0:n[e-1][0])<t)return n[e][1];return n[e-1][1]};if(!h){var _=c;c=d,d=_}this._renderTicks(t,e,i,x,r,c,d,h),this._renderPointer(t,e,i,x,r,c,d,h),this._renderTitle(t,e,i,x,r),this._renderDetail(t,e,i,x,r)},_renderTicks:function(t,e,i,n,o,u,h,c){for(var d=this.group,f=o.cx,p=o.cy,g=o.r,v=t.get("min"),m=t.get("max"),y=t.getModel("splitLine"),x=t.getModel("axisTick"),_=t.getModel("axisLabel"),b=t.get("splitNumber"),w=x.get("splitNumber"),S=l(y.get("length"),g),M=l(x.get("length"),g),A=u,I=(h-u)/b,T=I/w,L=y.getModel("lineStyle").getLineStyle(),C=x.getModel("lineStyle").getLineStyle(),D=_.getModel("textStyle"),P=0;b>=P;P++){var k=Math.cos(A),z=Math.sin(A);if(y.get("show")){var O=new a.Line({shape:{x1:k*g+f,y1:z*g+p,x2:k*(g-S)+f,y2:z*(g-S)+p},style:L,silent:!0});"auto"===L.stroke&&O.setStyle({stroke:n(P/b)}),d.add(O)}if(_.get("show")){var E=r(s.round(P/b*(m-v)+v),_.get("formatter")),R=_.get("distance"),V=new a.Text({style:{text:E,x:k*(g-S-R)+f,y:z*(g-S-R)+p,fill:D.getTextColor(),textFont:D.getFont(),textVerticalAlign:-.4>z?"top":z>.4?"bottom":"middle",textAlign:-.4>k?"left":k>.4?"right":"center"},silent:!0});"auto"===V.style.fill&&V.setStyle({fill:n(P/b)}),d.add(V)}if(x.get("show")&&P!==b){for(var N=0;w>=N;N++){var k=Math.cos(A),z=Math.sin(A),B=new a.Line({shape:{x1:k*g+f,y1:z*g+p,x2:k*(g-M)+f,y2:z*(g-M)+p},silent:!0,style:C});"auto"===C.stroke&&B.setStyle({stroke:n((P+N/w)/b)}),d.add(B),A+=T}A-=T}else A+=I}},_renderPointer:function(t,e,i,n,r,u,h,c){var d=[+t.get("min"),+t.get("max")],f=[u,h];c||(f=f.reverse());var p=t.getData(),g=this._data,v=this.group;p.diff(g).add(function(e){var i=new o({shape:{angle:u}});a.updateProps(i,{shape:{angle:s.linearMap(p.get("value",e),d,f,!0)}},t),v.add(i),p.setItemGraphicEl(e,i)}).update(function(e,i){var n=g.getItemGraphicEl(i);a.updateProps(n,{shape:{angle:s.linearMap(p.get("value",e),d,f,!0)}},t),v.add(n),p.setItemGraphicEl(e,n)}).remove(function(t){var e=g.getItemGraphicEl(t);v.remove(e)}).execute(),p.eachItemGraphicEl(function(t,e){var i=p.getItemModel(e),o=i.getModel("pointer");t.setShape({x:r.cx,y:r.cy,width:l(o.get("width"),r.r),r:l(o.get("length"),r.r)}),t.useStyle(i.getModel("itemStyle.normal").getItemStyle()),"auto"===t.style.fill&&t.setStyle("fill",n((p.get("value",e)-d[0])/(d[1]-d[0]))),a.setHoverStyle(t,i.getModel("itemStyle.emphasis").getItemStyle())}),this._data=p},_renderTitle:function(t,e,i,n,r){var o=t.getModel("title");if(o.get("show")){var s=o.getModel("textStyle"),u=o.get("offsetCenter"),h=r.cx+l(u[0],r.r),c=r.cy+l(u[1],r.r),d=new a.Text({style:{x:h,y:c,text:t.getData().getName(0),fill:s.getTextColor(),textFont:s.getFont(),textAlign:"center",textVerticalAlign:"middle"}});this.group.add(d)}},_renderDetail:function(t,e,i,n,o){var u=t.getModel("detail"),h=t.get("min"),c=t.get("max");if(u.get("show")){var d=u.getModel("textStyle"),f=u.get("offsetCenter"),p=o.cx+l(f[0],o.r),g=o.cy+l(f[1],o.r),v=l(u.get("width"),o.r),m=l(u.get("height"),o.r),y=t.getData().get("value",0),x=new a.Rect({shape:{x:p-v/2,y:g-m/2,width:v,height:m},style:{text:r(y,u.get("formatter")),fill:u.get("backgroundColor"),textFill:d.getTextColor(),textFont:d.getFont()}});"auto"===x.style.textFill&&x.setStyle("textFill",n(s.linearMap(y,[h,c],[0,1],!0))),x.setStyle(u.getItemStyle(["color"])),this.group.add(x)}}});t.exports=h},function(t,e,i){t.exports=i(6).extend({type:"echartsGaugePointer",shape:{angle:0,width:10,r:10,x:0,y:0},buildPath:function(t,e){var i=Math.cos,n=Math.sin,r=e.r,o=e.width,a=e.angle,s=e.x-i(a)*o*(o>=r/3?1:2),l=e.y-n(a)*o*(o>=r/3?1:2);a=e.angle-Math.PI/2,t.moveTo(s,l),t.lineTo(e.x+i(a)*o,e.y+n(a)*o),t.lineTo(e.x+i(e.angle)*r,e.y+n(e.angle)*r),t.lineTo(e.x-i(a)*o,e.y-n(a)*o),t.lineTo(s,l)}})},function(t,e,i){var n=i(2),r=i(1);i(264),i(265),i(274),n.registerProcessor(i(267)),n.registerVisual(r.curry(i(46),"graph","circle",null)),n.registerVisual(i(268)),n.registerVisual(i(271)),n.registerLayout(i(275)),n.registerLayout(i(269)),n.registerLayout(i(273)),n.registerCoordinateSystem("graphView",{create:i(270)})},function(t,e,i){"use strict";var n=i(14),r=i(1),o=i(10),a=i(8),s=i(226),l=i(2).extendSeriesModel({type:"series.graph",init:function(t){l.superApply(this,"init",arguments),this.legendDataProvider=function(){return this._categoriesData},this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},mergeOption:function(t){l.superApply(this,"mergeOption",arguments),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},mergeDefaultAndTheme:function(t){l.superApply(this,"mergeDefaultAndTheme",arguments),o.defaultEmphasis(t.edgeLabel,o.LABEL_OPTIONS)},getInitialData:function(t,e){function i(t,e){t.wrapMethod("getItemModel",function(t){var e=o._categoriesModels,i=t.getShallow("category"),n=e[i];return n&&(n.parentModel=t.parentModel,t.parentModel=n),t});var i=o.getModel("edgeLabel"),n=function(t,e){var r=(t||"").split(".");"label"===r[0]&&(e=e||i.getModel(r.slice(1)));var o=a.prototype.getModel.call(this,r,e);return o.getModel=n,o};e.wrapMethod("getItemModel",function(t){return t.getModel=n,t})}var n=t.edges||t.links||[],r=t.data||t.nodes||[],o=this;return r&&n?s(r,n,this,!0,i).data:void 0},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},getCategoriesData:function(){return this._categoriesData},formatTooltip:function(t,e,i){if("edge"===i){var n=this.getData(),r=this.getDataParams(t,i),o=n.graph.getEdgeByIndex(t),a=n.getName(o.node1.dataIndex),s=n.getName(o.node2.dataIndex),u=a+" > "+s;return r.value&&(u+=" : "+r.value),u}return l.superApply(this,"formatTooltip",arguments)},_updateCategoriesData:function(){var t=r.map(this.option.categories||[],function(t){return null!=t.value?t:r.extend({value:0},t)}),e=new n(["value"],this);e.initData(t),this._categoriesData=e,this._categoriesModels=e.mapArray(function(t){return e.getItemModel(t,!0)})},setZoom:function(t){this.option.zoom=t},setCenter:function(t){this.option.center=t},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",xAxisIndex:0,yAxisIndex:0,polarIndex:0,geoIndex:0,legendHoverLink:!0,hoverAnimation:!0,layout:null,focusNodeAdjacency:!1,force:{initLayout:null,repulsion:50,gravity:.1,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{normal:{position:"middle"},emphasis:{}},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{normal:{show:!1,formatter:"{b}"},emphasis:{show:!0}},itemStyle:{normal:{},emphasis:{}},lineStyle:{normal:{color:"#aaa",width:1,curveness:0,opacity:.5},emphasis:{}}}});t.exports=l},function(t,e,i){function n(t,e){return t.getVisual("opacity")||t.getModel().get(e)}var r=i(39),o=i(93),a=i(78),s=i(3),l=i(266),u=i(1),h=["itemStyle","normal","opacity"],c=["lineStyle","normal","opacity"];i(2).extendChartView({type:"graph",init:function(t,e){var i=new r,n=new o,s=this.group,l=new a(e.getZr(),s);s.add(i.group),s.add(n.group),this._symbolDraw=i,this._lineDraw=n,this._controller=l,this._firstRender=!0},render:function(t,e,i){var n=t.coordinateSystem;this._model=t,this._nodeScaleRatio=t.get("nodeScaleRatio");var r=this._symbolDraw,o=this._lineDraw,a=this.group;if("view"===n.type){var u={position:n.position,scale:n.scale};this._firstRender?a.attr(u):s.updateProps(a,u,t)}l(t.getGraph(),this._getNodeGlobalScale(t));var h=t.getData();r.updateData(h);var c=t.getEdgeData();o.updateData(c),this._updateNodeAndLinkScale(),this._updateController(t,i),clearTimeout(this._layoutTimeout);var d=t.forceLayout,f=t.get("force.layoutAnimation");d&&this._startForceLayoutIteration(d,f),h.eachItemGraphicEl(function(t,e){var i=h.getItemModel(e);t.off("drag").off("dragend");var n=h.getItemModel(e).get("draggable");n&&t.on("drag",function(){d&&(d.warmUp(),!this._layouting&&this._startForceLayoutIteration(d,f),d.setFixed(e),h.setItemLayout(e,t.position))},this).on("dragend",function(){d&&d.setUnfixed(e)},this),t.setDraggable(n&&d),t.off("mouseover",this._focusNodeAdjacency),t.off("mouseout",this._unfocusAll),i.get("focusNodeAdjacency")&&(t.on("mouseover",this._focusNodeAdjacency,this),t.on("mouseout",this._unfocusAll,this))},this),this._firstRender=!1},_focusNodeAdjacency:function(t){function e(t,e){var i=n(t,e),r=t.getGraphicEl();null==i&&(i=1),r.traverse(function(t){t.trigger("normal"),"group"!==t.type&&t.setStyle("opacity",.1*i)})}function i(t,e){var i=n(t,e),r=t.getGraphicEl();r.traverse(function(t){t.trigger("emphasis"),"group"!==t.type&&t.setStyle("opacity",i)})}var r=this._model.getData(),o=r.graph,a=t.target,s=a.dataIndex,l=a.dataType;if(null!==s&&"edge"!==l){o.eachNode(function(t){e(t,h)}),o.eachEdge(function(t){e(t,c)});var d=o.getNodeByIndex(s);i(d,h),u.each(d.edges,function(t){t.dataIndex<0||(i(t,c),i(t.node1,h),i(t.node2,h))})}},_unfocusAll:function(){var t=this._model.getData(),e=t.graph;e.eachNode(function(t){var e=n(t,h);t.getGraphicEl().traverse(function(t){t.trigger("normal"),"group"!==t.type&&t.setStyle("opacity",e)})}),e.eachEdge(function(t){var e=n(t,c);t.getGraphicEl().traverse(function(t){t.trigger("normal"),"group"!==t.type&&t.setStyle("opacity",e)})})},_startForceLayoutIteration:function(t,e){var i=this;!function n(){t.step(function(t){i.updateLayout(i._model),(i._layouting=!t)&&(e?i._layoutTimeout=setTimeout(n,16):n())})}()},_updateController:function(t,e){var i=this._controller,n=this.group;return i.rectProvider=function(){var t=n.getBoundingRect();return t.applyTransform(n.transform),t},"view"!==t.coordinateSystem.type?void i.disable():(i.enable(t.get("roam")),i.zoomLimit=t.get("scaleLimit"),i.zoom=t.coordinateSystem.getZoom(),void i.off("pan").off("zoom").on("pan",function(i,n){e.dispatchAction({seriesId:t.id,type:"graphRoam",dx:i,dy:n})}).on("zoom",function(i,n,r){e.dispatchAction({seriesId:t.id,type:"graphRoam",zoom:i,originX:n,originY:r}),this._updateNodeAndLinkScale(),l(t.getGraph(),this._getNodeGlobalScale(t)),this._lineDraw.updateLayout()},this))},_updateNodeAndLinkScale:function(){var t=this._model,e=t.getData(),i=this._getNodeGlobalScale(t),n=[i,i];e.eachItemGraphicEl(function(t,e){t.attr("scale",n)})},_getNodeGlobalScale:function(t){var e=t.coordinateSystem;if("view"!==e.type)return 1;var i=this._nodeScaleRatio,n=e.scale,r=n&&n[0]||1,o=e.getZoom(),a=(o-1)*i+1;return a/r},updateLayout:function(t){l(t.getGraph(),this._getNodeGlobalScale(t)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},remove:function(t,e){this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()}})},function(t,e,i){function n(t,e,i){for(var n,r=t[0],o=t[1],d=t[2],f=1/0,p=i*i,g=.1,v=.1;.9>=v;v+=.1){a[0]=u(r[0],o[0],d[0],v),a[1]=u(r[1],o[1],d[1],v);var m=c(h(a,e)-p);f>m&&(f=m,n=v)}for(var y=0;32>y;y++){var x=n+g;s[0]=u(r[0],o[0],d[0],n),s[1]=u(r[1],o[1],d[1],n),l[0]=u(r[0],o[0],d[0],x),l[1]=u(r[1],o[1],d[1],x);var m=h(s,e)-p;if(c(m)<.01)break;var _=h(l,e)-p;g/=2,0>m?_>=0?n+=g:n-=g:_>=0?n-=g:n+=g}return n}var r=i(17),o=i(5),a=[],s=[],l=[],u=r.quadraticAt,h=o.distSquare,c=Math.abs;t.exports=function(t,e){var i=[],a=r.quadraticSubdivide,s=[[],[],[]],l=[[],[]],u=[];e/=2,t.eachEdge(function(t,r){var h=t.getLayout(),c=t.getVisual("fromSymbol"),d=t.getVisual("toSymbol");h.__original||(h.__original=[o.clone(h[0]),o.clone(h[1])],h[2]&&h.__original.push(o.clone(h[2])));var f=h.__original;if(null!=h[2]){if(o.copy(s[0],f[0]),o.copy(s[1],f[2]),o.copy(s[2],f[1]),c&&"none"!=c){var p=t.node1.getVisual("symbolSize");p instanceof Array&&(p=(p[0]+p[1])/2);var g=n(s,f[0],p*e);a(s[0][0],s[1][0],s[2][0],g,i),s[0][0]=i[3],s[1][0]=i[4],a(s[0][1],s[1][1],s[2][1],g,i),s[0][1]=i[3],s[1][1]=i[4]}if(d&&"none"!=d){var p=t.node1.getVisual("symbolSize");p instanceof Array&&(p=(p[0]+p[1])/2);var g=n(s,f[1],p*e);a(s[0][0],s[1][0],s[2][0],g,i),s[1][0]=i[1],s[2][0]=i[2],a(s[0][1],s[1][1],s[2][1],g,i),s[1][1]=i[1],s[2][1]=i[2]}o.copy(h[0],s[0]),o.copy(h[1],s[2]),o.copy(h[2],s[1])}else o.copy(l[0],f[0]),o.copy(l[1],f[1]),o.sub(u,l[1],l[0]),o.normalize(u,u),c&&"none"!=c&&o.scaleAndAdd(l[0],l[0],u,t.node1.getVisual("symbolSize")*e),d&&"none"!=d&&o.scaleAndAdd(l[1],l[1],u,-t.node2.getVisual("symbolSize")*e),o.copy(h[0],l[0]),o.copy(h[1],l[1])})}},function(t,e){t.exports=function(t){var e=t.findComponents({mainType:"legend"});e&&e.length&&t.eachSeriesByType("graph",function(t){var i=t.getCategoriesData(),n=t.getGraph(),r=n.data,o=i.mapArray(i.getName);r.filterSelf(function(t){var i=r.getItemModel(t),n=i.getShallow("category");if(null!=n){"number"==typeof n&&(n=o[n]);for(var a=0;a<e.length;a++)if(!e[a].isSelected(n))return!1}return!0})},this)}},function(t,e){t.exports=function(t){t.eachSeriesByType("graph",function(t){var e=t.getCategoriesData(),i=t.getData(),n={};e.each(function(i){var r=e.getName(i);n[r]=i;var o=e.getItemModel(i),a=o.get("itemStyle.normal.color")||t.getColorFromPalette(r);e.setItemVisual(i,"color",a)}),e.count()&&i.each(function(t){var r=i.getItemModel(t),o=r.getShallow("category");null!=o&&("string"==typeof o&&(o=n[o]),i.getItemVisual(t,"color",!0)||i.setItemVisual(t,"color",e.getItemVisual(o,"color")))})})}},function(t,e,i){var n=i(221);t.exports=function(t){t.eachSeriesByType("graph",function(t){"circular"===t.get("layout")&&n(t)})}},function(t,e,i){function n(t,e,i){var n=t.getBoxLayoutParams();return n.aspect=i,o.getLayoutRect(n,{width:e.getWidth(),height:e.getHeight()})}var r=i(236),o=i(13),a=i(73);t.exports=function(t,e){var i=[];return t.eachSeriesByType("graph",function(t){var o=t.get("coordinateSystem");if(!o||"view"===o){var s=new r;i.push(s);var l=t.getData(),u=l.mapArray(function(t){var e=l.getItemModel(t);return[+e.get("x"),+e.get("y")]}),h=[],c=[];a.fromPoints(u,h,c),c[0]-h[0]===0&&(c[0]+=1,h[0]-=1),c[1]-h[1]===0&&(c[1]+=1,h[1]-=1);var d=(c[0]-h[0])/(c[1]-h[1]),f=n(t,e,d);isNaN(d)&&(h=[f.x,f.y],c=[f.x+f.width,f.y+f.height]);var p=c[0]-h[0],g=c[1]-h[1],v=f.width,m=f.height;s=t.coordinateSystem=new r,s.zoomLimit=t.get("scaleLimit"),s.setBoundingRect(h[0],h[1],p,g),s.setViewRect(f.x,f.y,v,m),s.setCenter(t.get("center")),s.setZoom(t.get("zoom"))}}),i}},function(t,e){function i(t){return t instanceof Array||(t=[t,t]),t}t.exports=function(t){t.eachSeriesByType("graph",function(t){var e=t.getGraph(),n=t.getEdgeData(),r=i(t.get("edgeSymbol")),o=i(t.get("edgeSymbolSize"));n.setVisual("fromSymbol",r&&r[0]),n.setVisual("toSymbol",r&&r[1]),n.setVisual("fromSymbolSize",o&&o[0]),n.setVisual("toSymbolSize",o&&o[1]),n.setVisual("color",t.get("lineStyle.normal.color")),n.each(function(t){var r=n.getItemModel(t),o=e.getEdgeByIndex(t),a=i(r.getShallow("symbol",!0)),s=i(r.getShallow("symbolSize",!0)),l=r.get("lineStyle.normal.color");switch(l){case"source":l=o.node1.getVisual("color");break;case"target":l=o.node2.getVisual("color")}a[0]&&o.setVisual("fromSymbol",a[0]),a[1]&&o.setVisual("toSymbol",a[1]),s[0]&&o.setVisual("fromSymbolSize",s[0]),s[1]&&o.setVisual("toSymbolSize",s[1]),o.setVisual("color",l)})})}},function(t,e,i){var n=i(5),r=n.scaleAndAdd;t.exports=function(t,e,i){for(var o=i.rect,a=o.width,s=o.height,l=[o.x+a/2,o.y+s/2],u=null==i.gravity?.1:i.gravity,h=0;h<t.length;h++){var c=t[h];c.p||(c.p=n.create(a*(Math.random()-.5)+l[0],s*(Math.random()-.5)+l[1])),c.pp=n.clone(c.p),c.edges=null}var d=.6;return{warmUp:function(){d=.5},setFixed:function(e){t[e].fixed=!0},setUnfixed:function(e){t[e].fixed=!1},step:function(i){for(var o=[],a=t.length,s=0;s<e.length;s++){var h=e[s],c=h.n1,f=h.n2;n.sub(o,f.p,c.p);var p=n.len(o)-h.d,g=f.w/(c.w+f.w);n.normalize(o,o),!c.fixed&&r(c.p,c.p,o,g*p*d),!f.fixed&&r(f.p,f.p,o,-(1-g)*p*d)}for(var s=0;a>s;s++){var v=t[s];v.fixed||(n.sub(o,l,v.p),n.scaleAndAdd(v.p,v.p,o,u*d))}for(var s=0;a>s;s++)for(var c=t[s],m=s+1;a>m;m++){var f=t[m];n.sub(o,f.p,c.p);var p=n.len(o);0===p&&(n.set(o,Math.random()-.5,Math.random()-.5),p=1);var y=(c.rep+f.rep)/p/p;!c.fixed&&r(c.pp,c.pp,o,y),!f.fixed&&r(f.pp,f.pp,o,-y)}for(var x=[],s=0;a>s;s++){var v=t[s];v.fixed||(n.sub(x,v.p,v.pp),n.scaleAndAdd(v.p,v.p,x,d),n.copy(v.pp,v.p))}d=.992*d,i&&i(t,e,.01>d)}}}},function(t,e,i){var n=i(272),r=i(4),o=i(223),a=i(221),s=i(5);t.exports=function(t){t.eachSeriesByType("graph",function(t){var e=t.coordinateSystem;if(!e||"view"===e.type)if("force"===t.get("layout")){var i=t.preservedPoints||{},l=t.getGraph(),u=l.data,h=l.edgeData,c=t.getModel("force"),d=c.get("initLayout");t.preservedPoints?u.each(function(t){var e=u.getId(t);u.setItemLayout(t,i[e]||[NaN,NaN])}):d&&"none"!==d?"circular"===d&&a(t):o(t);var f=u.getDataExtent("value"),p=c.get("repulsion"),g=c.get("edgeLength"),v=u.mapArray("value",function(t,e){var i=u.getItemLayout(e),n=r.linearMap(t,f,[0,p])||p/2;return{w:n,rep:n,p:!i||isNaN(i[0])||isNaN(i[1])?null:i}}),m=h.mapArray("value",function(t,e){var i=l.getEdgeByIndex(e);return{n1:v[i.node1.dataIndex],n2:v[i.node2.dataIndex],d:g,curveness:i.getModel().get("lineStyle.normal.curveness")||0}}),e=t.coordinateSystem,y=e.getBoundingRect(),x=n(v,m,{rect:y,gravity:c.get("gravity")}),_=x.step;x.step=function(t){for(var e=0,n=v.length;n>e;e++)v[e].fixed&&s.copy(v[e].p,l.getNodeByIndex(e).getLayout());_(function(e,n,r){for(var o=0,a=e.length;a>o;o++)e[o].fixed||l.getNodeByIndex(o).setLayout(e[o].p),i[u.getId(o)]=e[o].p;for(var o=0,a=n.length;a>o;o++){var h=n[o],c=l.getEdgeByIndex(o),d=h.n1.p,f=h.n2.p,p=c.getLayout();p=p?p.slice():[],p[0]=p[0]||[],p[1]=p[1]||[],s.copy(p[0],d),s.copy(p[1],f),h.curveness>0&&(p[2]=[(d[0]+f[0])/2-(d[1]-f[1])*h.curveness,(d[1]+f[1])/2-(f[0]-d[0])*h.curveness]),c.setLayout(p)}t&&t(r)})},t.forceLayout=x,t.preservedPoints=i,x.step()}else t.forceLayout=null})}},function(t,e,i){var n=i(2),r=i(220),o={type:"graphRoam",event:"graphRoam",update:"none"};n.registerAction(o,function(t,e){e.eachComponent({mainType:"series",query:t},function(e){var i=e.coordinateSystem,n=r.updateCenterAndZoom(i,t);e.setCenter&&e.setCenter(n.center),e.setZoom&&e.setZoom(n.zoom)})})},function(t,e,i){var n=i(223),r=i(222);t.exports=function(t,e){t.eachSeriesByType("graph",function(t){var e=t.get("layout"),i=t.coordinateSystem;if(i&&"view"!==i.type){var o=t.getData();o.each(i.dimensions,function(t,e,n){isNaN(t)||isNaN(e)?o.setItemLayout(n,[NaN,NaN]):o.setItemLayout(n,i.dataToPoint([t,e]))}),r(o.graph)}else e&&"none"!==e||n(t)})}},function(t,e,i){i(278),i(279)},function(t,e,i){function n(){var t=o.createCanvas();this.canvas=t,this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={}}var r=256,o=i(1);n.prototype={update:function(t,e,i,n,o,a){var s=this._getBrush(),l=this._getGradient(t,o,"inRange"),u=this._getGradient(t,o,"outOfRange"),h=this.pointSize+this.blurSize,c=this.canvas,d=c.getContext("2d"),f=t.length;c.width=e,c.height=i;for(var p=0;f>p;++p){var g=t[p],v=g[0],m=g[1],y=g[2],x=n(y);d.globalAlpha=x,d.drawImage(s,v-h,m-h)}for(var _=d.getImageData(0,0,c.width,c.height),b=_.data,w=0,S=b.length,M=this.minOpacity,A=this.maxOpacity,I=A-M;S>w;){var x=b[w+3]/256,T=4*Math.floor(x*(r-1));if(x>0){var L=a(x)?l:u;x>0&&(x=x*I+M),b[w++]=L[T],b[w++]=L[T+1],b[w++]=L[T+2],b[w++]=L[T+3]*x*256}else w+=4}return d.putImageData(_,0,0),c},_getBrush:function(){var t=this._brushCanvas||(this._brushCanvas=o.createCanvas()),e=this.pointSize+this.blurSize,i=2*e;t.width=i,t.height=i;var n=t.getContext("2d");return n.clearRect(0,0,i,i),n.shadowOffsetX=i,n.shadowBlur=this.blurSize,n.shadowColor="#000",n.beginPath(),n.arc(-e,e,this.pointSize,0,2*Math.PI,!0),n.closePath(),n.fill(),t},_getGradient:function(t,e,i){for(var n=this._gradientPixels,r=n[i]||(n[i]=new Uint8ClampedArray(1024)),o=[],a=0,s=0;256>s;s++)e[i](s/255,!0,o),r[a++]=o[0],r[a++]=o[1],r[a++]=o[2],r[a++]=o[3];return r}},t.exports=n},function(t,e,i){var n=i(15),r=i(35);t.exports=n.extend({type:"series.heatmap",getInitialData:function(t,e){return r(t.data,this,e)},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,xAxisIndex:0,yAxisIndex:0,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0}})},function(t,e,i){function n(t,e,i){var n=t[1]-t[0];e=l.map(e,function(e){return{interval:[(e.interval[0]-t[0])/n,(e.interval[1]-t[0])/n]}});var r=e.length,o=0;return function(t){for(var n=o;r>n;n++){var a=e[n].interval;if(a[0]<=t&&t<=a[1]){o=n;break}}if(n===r)for(var n=o-1;n>=0;n--){var a=e[n].interval;if(a[0]<=t&&t<=a[1]){o=n;break}}return n>=0&&r>n&&i[n]}}function r(t,e){var i=t[1]-t[0];return e=[(e[0]-t[0])/i,(e[1]-t[0])/i],function(t){return t>=e[0]&&t<=e[1]}}function o(t){var e=t.dimensions;return"lng"===e[0]&&"lat"===e[1]}var a=i(3),s=i(277),l=i(1);t.exports=i(2).extendChartView({type:"heatmap",render:function(t,e,i){var n;e.eachComponent("visualMap",function(e){e.eachTargetSeries(function(i){i===t&&(n=e)})}),this.group.removeAll();var r=t.coordinateSystem;"cartesian2d"===r.type?this._renderOnCartesian(r,t,i):o(r)&&this._renderOnGeo(r,t,n,i)},_renderOnCartesian:function(t,e,i){var n=t.getAxis("x"),r=t.getAxis("y"),o=this.group,s=n.getBandWidth(),u=r.getBandWidth(),h=e.getData(),c="itemStyle.normal",d="itemStyle.emphasis",f="label.normal",p="label.emphasis",g=e.getModel(c).getItemStyle(["color"]),v=e.getModel(d).getItemStyle(),m=e.getModel("label.normal"),y=e.getModel("label.emphasis");h.each(["x","y","z"],function(i,n,r,x){var _=h.getItemModel(x),b=t.dataToPoint([i,n]);if(!isNaN(r)){var w=new a.Rect({shape:{x:b[0]-s/2,y:b[1]-u/2,width:s,height:u},style:{fill:h.getItemVisual(x,"color"),opacity:h.getItemVisual(x,"opacity")}});h.hasItemOption&&(g=_.getModel(c).getItemStyle(["color"]),v=_.getModel(d).getItemStyle(),m=_.getModel(f),y=_.getModel(p));var S=e.getRawValue(x),M="-";S&&null!=S[2]&&(M=S[2]),m.getShallow("show")&&(a.setText(g,m),g.text=e.getFormattedLabel(x,"normal")||M),y.getShallow("show")&&(a.setText(v,y),v.text=e.getFormattedLabel(x,"emphasis")||M),w.setStyle(g),a.setHoverStyle(w,h.hasItemOption?v:l.extend({},v)),o.add(w),h.setItemGraphicEl(x,w)}})},_renderOnGeo:function(t,e,i,o){var l=i.targetVisuals.inRange,u=i.targetVisuals.outOfRange,h=e.getData(),c=this._hmLayer||this._hmLayer||new s;c.blurSize=e.get("blurSize"),c.pointSize=e.get("pointSize"),c.minOpacity=e.get("minOpacity"),c.maxOpacity=e.get("maxOpacity");var d=t.getViewRect().clone(),f=t.getRoamTransform().transform;d.applyTransform(f);var p=Math.max(d.x,0),g=Math.max(d.y,0),v=Math.min(d.width+d.x,o.getWidth()),m=Math.min(d.height+d.y,o.getHeight()),y=v-p,x=m-g,_=h.mapArray(["lng","lat","value"],function(e,i,n){var r=t.dataToPoint([e,i]);return r[0]-=p,r[1]-=g,r.push(n),r}),b=i.getExtent(),w="visualMap.continuous"===i.type?r(b,i.option.range):n(b,i.getPieceList(),i.option.selected);c.update(_,y,x,l.color.getNormalizer(),{inRange:l.color.getColorMapper(),outOfRange:u.color.getColorMapper()},w);var S=new a.Image({style:{width:y,height:x,x:p,y:g,image:c.canvas},silent:!0});this.group.add(S)}})},function(t,e,i){function n(t,e,i){a.call(this,t,e,i),this._lastFrame=0,this._lastFramePercent=0}var r=i(225),o=i(1),a=i(224),s=i(5),l=n.prototype;l.createLine=function(t,e,i){return new r(t,e,i)},l.updateAnimationPoints=function(t,e){this._points=e;for(var i=[0],n=0,r=1;r<e.length;r++){var o=e[r-1],a=e[r];n+=s.dist(o,a),i.push(n)}if(0!==n){for(var r=0;r<i.length;r++)i[r]/=n;this._offsets=i,this._length=n}},l.getLineLength=function(t){return this._length},l.updateSymbolPosition=function(t){var e=t.__t,i=this._points,n=this._offsets,r=i.length;if(n){var o,a=this._lastFrame;if(e<this._lastFramePercent){var l=Math.min(a+1,r-1);for(o=l;o>=0&&!(n[o]<=e);o--);o=Math.min(o,r-2)}else{for(var o=a;r>o&&!(n[o]>e);o++);o=Math.min(o-1,r-2)}s.lerp(t.position,i[o],i[o+1],(e-n[o])/(n[o+1]-n[o])),this._lastFrame=o,this._lastFramePercent=e,t.ignore=!1}},o.inherits(n,a),t.exports=n},function(t,e,i){function n(t){return a.isArray(t)||(t=[+t,+t]),t}function r(t,e){t.eachChild(function(t){t.attr({z:e.z,zlevel:e.zlevel,style:{stroke:"stroke"===e.brushType?e.color:null,fill:"fill"===e.brushType?e.color:null}})})}function o(t,e){c.call(this);var i=new h(t,e),n=new c;this.add(i),this.add(n),n.beforeUpdate=function(){this.attr(i.getScale())},this.updateData(t,e)}var a=i(1),s=i(26),l=i(3),u=i(4),h=i(49),c=l.Group,d=3,f=o.prototype;f.stopEffectAnimation=function(){this.childAt(1).removeAll()},f.startEffectAnimation=function(t){for(var e=t.symbolType,i=t.color,n=this.childAt(1),o=0;d>o;o++){var a=s.createSymbol(e,-.5,-.5,1,1,i);a.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scale:[1,1]});var l=-o/d*t.period+t.effectOffset;a.animate("",!0).when(t.period,{scale:[t.rippleScale,t.rippleScale]}).delay(l).start(),a.animateStyle(!0).when(t.period,{opacity:0}).delay(l).start(),n.add(a)}r(n,t)},f.updateEffectAnimation=function(t){for(var e=this._effectCfg,i=this.childAt(1),n=["symbolType","period","rippleScale"],o=0;n>o;o++){var a=n[o];if(e[a]!==t[a])return this.stopEffectAnimation(),void this.startEffectAnimation(t)}r(i,t)},f.highlight=function(){this.trigger("emphasis")},f.downplay=function(){this.trigger("normal")},f.updateData=function(t,e){var i=t.hostModel;this.childAt(0).updateData(t,e);var r=this.childAt(1),o=t.getItemModel(e),a=t.getItemVisual(e,"symbol"),s=n(t.getItemVisual(e,"symbolSize")),l=t.getItemVisual(e,"color");r.attr("scale",s),r.traverse(function(t){t.attr({fill:l})});var h=o.getShallow("symbolOffset");if(h){var c=r.position;c[0]=u.parsePercent(h[0],s[0]),c[1]=u.parsePercent(h[1],s[1])}r.rotation=(o.getShallow("symbolRotate")||0)*Math.PI/180||0;var d={};if(d.showEffectOn=i.get("showEffectOn"),d.rippleScale=o.get("rippleEffect.scale"),d.brushType=o.get("rippleEffect.brushType"),d.period=1e3*o.get("rippleEffect.period"),d.effectOffset=e/t.count(),d.z=o.getShallow("z")||0,d.zlevel=o.getShallow("zlevel")||0,d.symbolType=a,d.color=l,this.off("mouseover").off("mouseout").off("emphasis").off("normal"),"render"===d.showEffectOn)this._effectCfg?this.updateEffectAnimation(d):this.startEffectAnimation(d),this._effectCfg=d;else{this._effectCfg=null,this.stopEffectAnimation();var f=this.childAt(0),p=function(){f.trigger("emphasis"),"render"!==d.showEffectOn&&this.startEffectAnimation(d)},g=function(){f.trigger("normal"),"render"!==d.showEffectOn&&this.stopEffectAnimation()};this.on("mouseover",p,this).on("mouseout",g,this).on("emphasis",p,this).on("normal",g,this)}this._effectCfg=d},f.fadeOut=function(t){this.off("mouseover").off("mouseout").off("emphasis").off("normal"),t&&t()},a.inherits(o,c),t.exports=o},function(t,e,i){function n(){this.group=new r.Group,this._lineEl=new s}var r=i(3),o=i(83),a=i(82),s=r.extendShape({shape:{polyline:!1,segs:[]},buildPath:function(t,e){for(var i=e.segs,n=e.polyline,r=0;r<i.length;r++){var o=i[r];if(n){t.moveTo(o[0][0],o[0][1]);for(var a=1;a<o.length;a++)t.lineTo(o[a][0],o[a][1])}else t.moveTo(o[0][0],o[0][1]),o.length>2?t.quadraticCurveTo(o[2][0],o[2][1],o[1][0],o[1][1]):t.lineTo(o[1][0],o[1][1])}},findDataIndex:function(t,e){for(var i=this.shape,n=i.segs,r=i.polyline,s=Math.max(this.style.lineWidth,1),l=0;l<n.length;l++){var u=n[l];if(r){for(var h=1;h<u.length;h++)if(a.containStroke(u[h-1][0],u[h-1][1],u[h][0],u[h][1],s,t,e))return l}else if(u.length>2){if(o.containStroke(u[0][0],u[0][1],u[2][0],u[2][1],u[1][0],u[1][1],s,t,e))return l}else if(a.containStroke(u[0][0],u[0][1],u[1][0],u[1][1],s,t,e))return l}return-1}}),l=n.prototype;l.updateData=function(t){this.group.removeAll();var e=this._lineEl,i=t.hostModel;e.setShape({segs:t.mapArray(t.getItemLayout),polyline:i.get("polyline")}),e.useStyle(i.getModel("lineStyle.normal").getLineStyle());var n=t.getVisual("color");n&&e.setStyle("stroke",n),e.setStyle("fill"),e.seriesIndex=i.seriesIndex,e.on("mousemove",function(t){e.dataIndex=null;var i=e.findDataIndex(t.offsetX,t.offsetY);i>0&&(e.dataIndex=i)}),this.group.add(e)},l.updateLayout=function(t){var e=t.getData();this._lineEl.setShape({segs:e.mapArray(e.getItemLayout)})},l.remove=function(){this.group.removeAll()},t.exports=n},function(t,e,i){function n(t,e,i,n){l.Group.call(this),this.bodyIndex,this.whiskerIndex,this.styleUpdater=i,this._createContent(t,e,n),this.updateData(t,e,n),this._seriesModel}function r(t,e,i){return s.map(t,function(t){return t=t.slice(),t[e]=i.initBaseline,t})}function o(t){var e={};return s.each(t,function(t,i){e["ends"+i]=t}),e}function a(t){this.group=new l.Group,this.styleUpdater=t}var s=i(1),l=i(3),u=i(6),h=u.extend({type:"whiskerInBox",shape:{},buildPath:function(t,e){for(var i in e)if(0===i.indexOf("ends")){var n=e[i];t.moveTo(n[0][0],n[0][1]),t.lineTo(n[1][0],n[1][1])}}}),c=n.prototype;c._createContent=function(t,e,i){var n=t.getItemLayout(e),a="horizontal"===n.chartLayout?1:0,u=0;this.add(new l.Polygon({shape:{points:i?r(n.bodyEnds,a,n):n.bodyEnds},style:{strokeNoScale:!0},z2:100})),this.bodyIndex=u++;var c=s.map(n.whiskerEnds,function(t){return i?r(t,a,n):t});this.add(new h({shape:o(c),style:{strokeNoScale:!0},z2:100})),this.whiskerIndex=u++},c.updateData=function(t,e,i){var n=this._seriesModel=t.hostModel,r=t.getItemLayout(e),a=l[i?"initProps":"updateProps"];a(this.childAt(this.bodyIndex),{shape:{points:r.bodyEnds}},n,e),a(this.childAt(this.whiskerIndex),{shape:o(r.whiskerEnds)},n,e),this.styleUpdater.call(null,this,t,e)},s.inherits(n,l.Group);var d=a.prototype;d.updateData=function(t){var e=this.group,i=this._data,r=this.styleUpdater;t.diff(i).add(function(i){if(t.hasValue(i)){var o=new n(t,i,r,!0);t.setItemGraphicEl(i,o),e.add(o)}}).update(function(o,a){var s=i.getItemGraphicEl(a);return t.hasValue(o)?(s?s.updateData(t,o):s=new n(t,o,r),e.add(s),void t.setItemGraphicEl(o,s)):void e.remove(s)}).remove(function(t){var n=i.getItemGraphicEl(t);n&&e.remove(n)}).execute(),this._data=t},d.remove=function(){var t=this.group,e=this._data;this._data=null,e&&e.eachItemGraphicEl(function(e){e&&t.remove(e)})},t.exports=a},function(t,e,i){i(285),i(286);var n=i(2);n.registerLayout(i(287))},function(t,e,i){"use strict";function n(t){var e=t.data;e&&e[0]&&e[0][0]&&e[0][0].coord&&(t.data=a.map(e,function(t){var e=[t[0].coord,t[1].coord],i={coords:e};return t[0].name&&(i.fromName=t[0].name),t[1].name&&(i.toName=t[1].name),a.mergeAll([i,t[0],t[1]])}))}var r=i(15),o=i(14),a=i(1),s=(i(23),r.extend({type:"series.lines",dependencies:["grid","polar"],visualColorAccessPath:"lineStyle.normal.color",init:function(t){n(t),s.superApply(this,"init",arguments)},mergeOption:function(t){n(t),s.superApply(this,"mergeOption",arguments)},getInitialData:function(t,e){var i=new o(["value"],this);return i.hasItemOption=!1,i.initData(t.data,[],function(t,e,n,r){if(t instanceof Array)return NaN;i.hasItemOption=!0;var o=t.value;return o?o instanceof Array?o[r]:o:void 0}),i},formatTooltip:function(t){var e=this.getData(),i=e.getItemModel(t),n=i.get("name");if(n)return n;var r=i.get("fromName"),o=i.get("toName");return r+" > "+o},defaultOption:{coordinateSystem:"geo",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,xAxisIndex:0,yAxisIndex:0,geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,label:{normal:{show:!1,position:"end"}},lineStyle:{normal:{opacity:.5}}}}))},function(t,e,i){var n=i(93),r=i(224),o=i(92),a=i(225),s=i(280),l=i(282);i(2).extendChartView({type:"lines",init:function(){},render:function(t,e,i){var u=t.getData(),h=this._lineDraw,c=t.get("effect.show"),d=t.get("polyline"),f=t.get("large")&&u.count()>=t.get("largeThreshold");c===this._hasEffet&&d===this._isPolyline&&f===this._isLarge||(h&&h.remove(),h=this._lineDraw=f?new l:new n(d?c?s:a:c?r:o),this._hasEffet=c,this._isPolyline=d,this._isLarge=f);var p=t.get("zlevel"),g=t.get("effect.trailLength"),v=i.getZr();if(v.painter.getLayer(p).clear(!0),null!=this._lastZlevel&&v.configLayer(this._lastZlevel,{motionBlur:!1}),c&&g){v.configLayer(p,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(g/10+.9,1),0)})}this.group.add(h.group),h.updateData(u),this._lastZlevel=p},updateLayout:function(t,e,i){this._lineDraw.updateLayout(t);var n=i.getZr();n.painter.getLayer(this._lastZlevel).clear(!0)},remove:function(t,e){this._lineDraw&&this._lineDraw.remove(e,!0)}})},function(t,e,i){t.exports=function(t){t.eachSeriesByType("lines",function(t){var e=t.coordinateSystem,i=t.getData();i.each(function(n){var r=i.getItemModel(n),o=r.option instanceof Array?r.option:r.get("coords"),a=[];if(t.get("polyline"))for(var s=0;s<o.length;s++)a.push(e.dataToPoint(o[s]));else{a[0]=e.dataToPoint(o[0]),a[1]=e.dataToPoint(o[1]);var l=r.get("lineStyle.normal.curveness");l>0&&(a[2]=[(a[0][0]+a[1][0])/2-(a[0][1]-a[1][1])*l,(a[0][1]+a[1][1])/2-(a[1][0]-a[0][0])*l])}i.setItemLayout(n,a)})})}},function(t,e,i){var n=i(2),r=n.PRIORITY;i(289),i(290),i(219),i(170),n.registerLayout(i(293)),n.registerVisual(i(294)),n.registerProcessor(r.PROCESSOR.STATISTIC,i(292)),n.registerPreprocessor(i(291)),i(77)("map",[{type:"mapToggleSelect",event:"mapselectchanged",method:"toggleSelected"},{type:"mapSelect",event:"mapselected",method:"select"},{type:"mapUnSelect",event:"mapunselected",method:"unSelect"}])},function(t,e,i){var n=i(14),r=i(15),o=i(1),a=i(30),s=i(9),l=s.encodeHTML,u=s.addCommas,h=i(66),c=i(170),d=r.extend({type:"series.map",layoutMode:"box",needsDrawMap:!1,seriesGroup:[],init:function(t){t=this._fillOption(t,t.map),this.option=t,d.superApply(this,"init",arguments),this.updateSelectedMap(t.data)},getInitialData:function(t){var e=a(["value"],t.data||[]),i=new n(e,this);return i.initData(t.data),i},mergeOption:function(t){t.data&&(t=this._fillOption(t,this.option.map)),d.superCall(this,"mergeOption",t),this.updateSelectedMap(this.option.data)},_fillOption:function(t,e){return t=o.extend({},t),t.data=c.getFilledRegions(t.data,e),t},getRawValue:function(t){return this._data.get("value",t)},getRegionModel:function(t){var e=this.getData();return e.getItemModel(e.indexOfName(t))},formatTooltip:function(t){for(var e=this.getData(),i=u(this.getRawValue(t)),n=e.getName(t),r=this.seriesGroup,o=[],a=0;a<r.length;a++){var s=r[a].originalData.indexOfName(n);isNaN(r[a].originalData.get("value",s))||o.push(l(r[a].name))}return o.join(", ")+"<br />"+n+" : "+i},defaultOption:{zlevel:0,z:2,coordinateSystem:"geo",map:"china",left:"center",top:"center",aspectScale:.75,showLegendSymbol:!0,dataRangeHoverLink:!0,center:null,zoom:1,scaleLimit:null,label:{normal:{show:!1,textStyle:{color:"#000"}},emphasis:{show:!0,textStyle:{color:"rgb(100,0,0)"}}},itemStyle:{normal:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{areaColor:"rgba(255,215,0,0.8)"}}},setZoom:function(t){this.option.zoom=t},setCenter:function(t){this.option.center=t}});o.mixin(d,h),t.exports=d},function(t,e,i){var n=i(3),r=i(227);i(2).extendChartView({type:"map",render:function(t,e,i,n){if(!n||"mapToggleSelect"!==n.type||n.from!==this.uid){var o=this.group;if(o.removeAll(),n&&"geoRoam"===n.type&&"series"===n.component&&n.name===t.name){var a=this._mapDraw;a&&o.add(a.group)}else if(t.needsDrawMap){var a=this._mapDraw||new r(i,!0);o.add(a.group),a.draw(t,e,i,this,n),this._mapDraw=a}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;t.get("showLegendSymbol")&&e.getComponent("legend")&&this._renderSymbols(t,e,i)}},remove:function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},_renderSymbols:function(t,e,i){var r=t.originalData,o=this.group;r.each("value",function(e,i){if(!isNaN(e)){var a=r.getItemLayout(i);if(a&&a.point){var s=a.point,l=a.offset,u=new n.Circle({style:{fill:t.getData().getVisual("color")},shape:{cx:s[0]+9*l,cy:s[1],r:3},silent:!0,z2:10});if(!l){var h=t.mainSeries.getData(),c=r.getName(i),d=c,f=h.indexOfName(c),p=r.getItemModel(i),g=p.getModel("label.normal"),v=p.getModel("label.emphasis"),m=g.getModel("textStyle"),y=v.getModel("textStyle"),x=h.getItemGraphicEl(f);u.setStyle({textPosition:"bottom"});var _=function(){u.setStyle({text:v.get("show")?d:"",textFill:y.getTextColor(),textFont:y.getFont()})},b=function(){u.setStyle({text:g.get("show")?d:"",textFill:m.getTextColor(),textFont:m.getFont()})};x.on("mouseover",_).on("mouseout",b).on("emphasis",_).on("normal",b),b()}o.add(u)}}})}})},function(t,e,i){var n=i(1);t.exports=function(t){var e=[];n.each(t.series,function(t){"map"===t.type&&e.push(t)}),n.each(e,function(t){t.map=t.map||t.mapType,n.defaults(t,t.mapLocation)})}},function(t,e,i){function n(t,e){for(var i={},n=["value"],r=0;r<t.length;r++)t[r].each(n,function(e,n){var o=t[r].getName(n);i[o]=i[o]||[],isNaN(e)||i[o].push(e)});return t[0].map(n,function(n,r){for(var o=t[0].getName(r),a=0,s=1/0,l=-(1/0),u=i[o].length,h=0;u>h;h++)s=Math.min(s,i[o][h]),l=Math.max(l,i[o][h]),a+=i[o][h];var c;return c="min"===e?s:"max"===e?l:"average"===e?a/u:a,0===u?NaN:c})}var r=i(1);t.exports=function(t){var e={};t.eachSeriesByType("map",function(t){var i=t.get("map");e[i]=e[i]||[],e[i].push(t)}),r.each(e,function(t,e){for(var i=n(r.map(t,function(t){return t.getData()}),t[0].get("mapValueCalculation")),o=0;o<t.length;o++)t[o].originalData=t[o].getData();for(var o=0;o<t.length;o++)t[o].seriesGroup=t,t[o].needsDrawMap=0===o,t[o].setData(i.cloneShallow()),t[o].mainSeries=t[0]})}},function(t,e,i){var n=i(1);t.exports=function(t){var e={};t.eachSeriesByType("map",function(i){var r=i.get("map");if(!e[r]){var o={};n.each(i.seriesGroup,function(e){var i=e.coordinateSystem,n=e.originalData;e.get("showLegendSymbol")&&t.getComponent("legend")&&n.each("value",function(t,e){var r=n.getName(e),a=i.getRegion(r);if(a&&!isNaN(t)){var s=o[r]||0,l=i.dataToPoint(a.center);o[r]=s+1,n.setItemLayout(e,{point:l,offset:s})}})});var a=i.getData();a.each(function(t){var e=a.getName(t),i=a.getItemLayout(t)||{};i.showLabel=!o[e],a.setItemLayout(t,i)}),e[r]=!0}})}},function(t,e){t.exports=function(t){t.eachSeriesByType("map",function(t){var e=t.get("color"),i=t.getModel("itemStyle.normal"),n=i.get("areaColor"),r=i.get("color")||e[t.seriesIndex%e.length];t.getData().setVisual({areaColor:n,color:r})})}},function(t,e,i){var n=i(2);i(228),i(296),i(297),n.registerVisual(i(298))},function(t,e,i){function n(t,e,i){var n=t.get("data"),o=r(e);n&&n.length&&s.each(i,function(t){if(t){var e=s.indexOf(n,t[o]);t[o]=e>=0?e:NaN}})}function r(t){return+t.replace("dim","")}function o(t,e){var i=0;s.each(t,function(t){var e=r(t);e>i&&(i=e)});var n=e[0];n&&n.length-1>i&&(i=n.length-1);for(var o=[],a=0;i>=a;a++)o.push("dim"+a);return o}var a=i(14),s=i(1),l=i(15),u=i(30);t.exports=l.extend({type:"series.parallel",dependencies:["parallel"],getInitialData:function(t,e){var i=e.getComponent("parallel",this.get("parallelIndex")),r=i.parallelAxisIndex,l=t.data,h=i.dimensions,c=o(h,l),d=s.map(c,function(t,i){var o=s.indexOf(h,t),a=o>=0&&e.getComponent("parallelAxis",r[o]);return a&&"category"===a.get("type")?(n(a,t,l),{name:t,type:"ordinal"}):0>o&&u.guessOrdinal(l,i)?{name:t,type:"ordinal"}:t}),f=new a(d,this);return f.initData(l),this.option.progressive&&(this.option.animation=!1),f},getRawIndicesByActiveState:function(t){var e=this.coordinateSystem,i=this.getData(),n=[];return e.eachActiveState(i,function(e,r){t===e&&n.push(i.getRawIndex(r))}),n},defaultOption:{zlevel:0,z:2,coordinateSystem:"parallel",parallelIndex:0,label:{normal:{show:!1},emphasis:{show:!1}},inactiveOpacity:.05,activeOpacity:1,lineStyle:{normal:{width:1,opacity:.45,type:"solid"}},progressive:!1,smooth:!1,animationEasing:"linear"}})},function(t,e,i){function n(t,e,i){var n=t.model,r=t.getRect(),o=new l.Rect({shape:{x:r.x,y:r.y,width:r.width,height:r.height}}),a="horizontal"===n.get("layout")?"width":"height";return o.setShape(a,0),l.initProps(o,{shape:{width:r.width,height:r.height}},e,i),o}function r(t,e,i,n){for(var r=[],o=0;o<i.length;o++){var a=i[o],l=t.get(a,e);s(l,n.getAxis(a).type)||r.push(n.dataToPoint(l,a))}return r}function o(t,e,i,n,o){var a=r(t,i,n,o),s=new l.Polyline({shape:{points:a},silent:!0,z2:10});e.add(s),t.setItemGraphicEl(i,s)}function a(t,e){var i=t.hostModel.getModel("lineStyle.normal"),n=i.getLineStyle();t.eachItemGraphicEl(function(r,o){if(t.hasItemOption){var a=t.getItemModel(o),s=a.getModel("lineStyle.normal",i);n=s.getLineStyle()}r.useStyle(u.extend(n,{fill:null,stroke:t.getItemVisual(o,"color"),opacity:t.getItemVisual(o,"opacity")})),r.shape.smooth=e})}function s(t,e){return"category"===e?null==t:null==t||isNaN(t)}var l=i(3),u=i(1),h=.3,c=i(27).extend({type:"parallel",init:function(){this._dataGroup=new l.Group,this.group.add(this._dataGroup),this._data},render:function(t,e,i,n){this._renderForNormal(t)},_renderForNormal:function(t){function e(t){o(c,u,t,p,f,null,v)}function i(e,i){var n=d.getItemGraphicEl(i),o=r(c,e,p,f);c.setItemGraphicEl(e,n),l.updateProps(n,{shape:{points:o}},t,e)}function s(t){var e=d.getItemGraphicEl(t);u.remove(e)}var u=this._dataGroup,c=t.getData(),d=this._data,f=t.coordinateSystem,p=f.dimensions,g=t.option,v=g.smooth?h:null;if(c.diff(d).add(e).update(i).remove(s).execute(),a(c,v),!this._data){var m=n(f,t,function(){setTimeout(function(){u.removeClipPath()})});u.setClipPath(m)}this._data=c},remove:function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null}});t.exports=c},function(t,e){t.exports=function(t){t.eachSeriesByType("parallel",function(e){var i=e.getModel("itemStyle.normal"),n=e.getModel("lineStyle.normal"),r=t.get("color"),o=n.get("color")||i.get("color")||r[e.seriesIndex%r.length],a=e.get("inactiveOpacity"),s=e.get("activeOpacity"),l=e.getModel("lineStyle.normal").getLineStyle(),u=e.coordinateSystem,h=e.getData(),c={normal:l.opacity,active:s,inactive:a};u.eachActiveState(h,function(t,e){h.setItemVisual(e,"opacity",c[t])}),h.setVisual("color",o)})}},function(t,e,i){var n=i(1),r=i(2);i(333),i(300),i(301),r.registerVisual(n.curry(i(72),"radar")),r.registerVisual(n.curry(i(46),"radar","circle",null)),r.registerLayout(i(303)),r.registerProcessor(n.curry(i(70),"radar")),r.registerPreprocessor(i(302))},function(t,e,i){"use strict";var n=i(15),r=i(14),o=i(30),a=i(1),s=n.extend({type:"series.radar",dependencies:["radar"],init:function(t){s.superApply(this,"init",arguments),this.legendDataProvider=function(){return this._dataBeforeProcessed}},getInitialData:function(t,e){var i=t.data||[],n=o([],i,[],"indicator_"),a=new r(n,this);return a.initData(i),a},formatTooltip:function(t){var e=this.getRawValue(t),i=this.coordinateSystem,n=i.getIndicatorAxes();return(""==this._data.getName(t)?this.name:this._data.getName(t))+"<br/>"+a.map(n,function(t,i){return t.name+" : "+e[i]}).join("<br />")},defaultOption:{zlevel:0,z:2,coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{normal:{width:2,type:"solid"}},label:{normal:{position:"top"}},symbol:"emptyCircle",symbolSize:4}});t.exports=s},function(t,e,i){function n(t){return o.isArray(t)||(t=[+t,+t]),t}var r=i(3),o=i(1),a=i(26);t.exports=i(2).extendChartView({type:"radar",render:function(t,e,i){function s(t,e){var i=t.getItemVisual(e,"symbol")||"circle",r=t.getItemVisual(e,"color");if("none"!==i){var o=a.createSymbol(i,-.5,-.5,1,1,r);return o.attr({style:{strokeNoScale:!0},z2:100,scale:n(t.getItemVisual(e,"symbolSize"))}),o}}function l(e,i,n,o,a,l){n.removeAll();for(var u=0;u<i.length-1;u++){var h=s(o,a);h&&(h.__dimIdx=u,e[u]?(h.attr("position",e[u]),r[l?"initProps":"updateProps"](h,{position:i[u]},t,a)):h.attr("position",i[u]),n.add(h))}}function u(t){return o.map(t,function(t){return[h.cx,h.cy]})}var h=t.coordinateSystem,c=this.group,d=t.getData(),f=this._data;d.diff(f).add(function(e){var i=d.getItemLayout(e);if(i){var n=new r.Polygon,o=new r.Polyline,a={shape:{points:i}};n.shape.points=u(i),o.shape.points=u(i),r.initProps(n,a,t,e),r.initProps(o,a,t,e);var s=new r.Group,h=new r.Group;s.add(o),s.add(n),s.add(h),l(o.shape.points,i,h,d,e,!0),d.setItemGraphicEl(e,s)}}).update(function(e,i){var n=f.getItemGraphicEl(i),o=n.childAt(0),a=n.childAt(1),s=n.childAt(2),u={shape:{points:d.getItemLayout(e)}};u.shape.points&&(l(o.shape.points,u.shape.points,s,d,e,!1),r.updateProps(o,u,t),r.updateProps(a,u,t),d.setItemGraphicEl(e,n))}).remove(function(t){c.remove(f.getItemGraphicEl(t))}).execute(),d.eachItemGraphicEl(function(e,i){function n(){u.attr("ignore",m)}function a(){u.attr("ignore",v)}var s=d.getItemModel(i),l=e.childAt(0),u=e.childAt(1),h=e.childAt(2),f=d.getItemVisual(i,"color");c.add(e),l.useStyle(o.defaults(s.getModel("lineStyle.normal").getLineStyle(),{fill:"none",stroke:f})),l.hoverStyle=s.getModel("lineStyle.emphasis").getLineStyle();var p=s.getModel("areaStyle.normal"),g=s.getModel("areaStyle.emphasis"),v=p.isEmpty()&&p.parentModel.isEmpty(),m=g.isEmpty()&&g.parentModel.isEmpty();m=m&&v,u.ignore=v,u.useStyle(o.defaults(p.getAreaStyle(),{fill:f,opacity:.7})),u.hoverStyle=g.getAreaStyle();var y=s.getModel("itemStyle.normal").getItemStyle(["color"]),x=s.getModel("itemStyle.emphasis").getItemStyle(),_=s.getModel("label.normal"),b=s.getModel("label.emphasis");h.eachChild(function(e){e.setStyle(y),e.hoverStyle=o.clone(x);var n=d.get(d.dimensions[e.__dimIdx],i);r.setText(e.style,_,f),e.setStyle({text:_.get("show")?o.retrieve(t.getFormattedLabel(i,"normal",null,e.__dimIdx),n):""}),r.setText(e.hoverStyle,b,f),e.hoverStyle.text=b.get("show")?o.retrieve(t.getFormattedLabel(i,"emphasis",null,e.__dimIdx),n):""}),e.off("mouseover").off("mouseout").off("normal").off("emphasis"),e.on("emphasis",n).on("mouseover",n).on("normal",a).on("mouseout",a),r.setHoverStyle(e)}),this._data=d},remove:function(){this.group.removeAll(),this._data=null}})},function(t,e,i){var n=i(1);t.exports=function(t){var e=t.polar;if(e){n.isArray(e)||(e=[e]);var i=[];n.each(e,function(e,r){e.indicator?(e.type&&!e.shape&&(e.shape=e.type),t.radar=t.radar||[],n.isArray(t.radar)||(t.radar=[t.radar]),t.radar.push(e)):i.push(e)}),t.polar=i}n.each(t.series,function(t){"radar"===t.type&&t.polarIndex&&(t.radarIndex=t.polarIndex)})}},function(t,e){t.exports=function(t){t.eachSeriesByType("radar",function(t){function e(t,e){n[e]=n[e]||[],n[e][o]=r.dataToPoint(t,o)}var i=t.getData(),n=[],r=t.coordinateSystem;if(r){for(var o=0;o<r.getIndicatorAxes().length;o++){var a=i.dimensions[o];i.each(a,e)}i.each(function(t){n[t][0]&&n[t].push(n[t][0].slice()),i.setItemLayout(t,n[t])})}})}},function(t,e,i){var n=i(2);i(305),i(306),n.registerLayout(i(307)),n.registerVisual(i(308))},function(t,e,i){"use strict";var n=i(15),r=i(226),o=n.extend({type:"series.sankey",layoutInfo:null,getInitialData:function(t,e){var i=t.edges||t.links,n=t.data||t.nodes;if(n&&i){var o=r(n,i,this,!0);return o.data}},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},formatTooltip:function(t,e,i){if("edge"===i){var n=this.getDataParams(t,i),r=n.data,a=r.source+" -- "+r.target;return n.value&&(a+=" : "+n.value),a}return o.superCall(this,"formatTooltip",t,e)},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",layout:null,left:"5%",top:"5%",right:"20%",bottom:"5%",nodeWidth:20,nodeGap:8,layoutIterations:32,label:{normal:{show:!0,position:"right",textStyle:{color:"#000",fontSize:12}},emphasis:{show:!0}},itemStyle:{normal:{borderWidth:1,borderColor:"#333"}},lineStyle:{normal:{color:"#314656",opacity:.2,curveness:.5},emphasis:{opacity:.6}},animationEasing:"linear",animationDuration:1e3}});t.exports=o},function(t,e,i){function n(t,e,i){var n=new r.Rect({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});return r.initProps(n,{shape:{width:t.width+20,height:t.height+20}},e,i),n}var r=i(3),o=i(1),a=r.extendShape({shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,cpx2:0,cpy2:0,extent:0},buildPath:function(t,e){var i=e.extent/2;t.moveTo(e.x1,e.y1-i),t.bezierCurveTo(e.cpx1,e.cpy1-i,e.cpx2,e.cpy2-i,e.x2,e.y2-i),t.lineTo(e.x2,e.y2+i),t.bezierCurveTo(e.cpx2,e.cpy2+i,e.cpx1,e.cpy1+i,e.x1,e.y1+i),t.closePath()}});t.exports=i(2).extendChartView({type:"sankey",_model:null,render:function(t,e,i){var s=t.getGraph(),l=this.group,u=t.layoutInfo,h=t.getData(),c=t.getData("edge");this._model=t,l.removeAll(),l.position=[u.x,u.y],s.eachNode(function(e){var i=e.getLayout(),n=e.getModel(),a=n.getModel("label.normal"),s=a.getModel("textStyle"),u=n.getModel("label.emphasis"),c=u.getModel("textStyle"),d=new r.Rect({shape:{x:i.x,y:i.y,width:e.getLayout().dx,height:e.getLayout().dy},style:{text:a.get("show")?t.getFormattedLabel(e.dataIndex,"normal")||e.id:"",textFont:s.getFont(),textFill:s.getTextColor(),textPosition:a.get("position")}});d.setStyle(o.defaults({fill:e.getVisual("color")},n.getModel("itemStyle.normal").getItemStyle())),r.setHoverStyle(d,o.extend(e.getModel("itemStyle.emphasis"),{text:u.get("show")?t.getFormattedLabel(e.dataIndex,"emphasis")||e.id:"",textFont:c.getFont(),textFill:c.getTextColor(),textPosition:u.get("position")})),l.add(d),h.setItemGraphicEl(e.dataIndex,d),d.dataType="node"}),s.eachEdge(function(e){var i=new a;i.dataIndex=e.dataIndex,i.seriesIndex=t.seriesIndex,i.dataType="edge";var n=e.getModel("lineStyle.normal"),o=n.get("curveness"),s=e.node1.getLayout(),u=e.node2.getLayout(),h=e.getLayout();i.shape.extent=Math.max(1,h.dy);var d=s.x+s.dx,f=s.y+h.sy+h.dy/2,p=u.x,g=u.y+h.ty+h.dy/2,v=d*(1-o)+p*o,m=f,y=d*o+p*(1-o),x=g;switch(i.setShape({x1:d,y1:f,x2:p,y2:g,cpx1:v,cpy1:m,cpx2:y,cpy2:x}),i.setStyle(n.getItemStyle()),i.style.fill){case"source":i.style.fill=e.node1.getVisual("color");break;case"target":i.style.fill=e.node2.getVisual("color")}r.setHoverStyle(i,e.getModel("lineStyle.emphasis").getItemStyle()),l.add(i),c.setItemGraphicEl(e.dataIndex,i)}),!this._data&&t.get("animation")&&l.setClipPath(n(l.getBoundingRect(),t,function(){l.removeClipPath()})),this._data=t.getData()}})},function(t,e,i){function n(t,e){return M.getLayoutRect(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function r(t,e,i,n,r,o,s){a(t,i,r),u(t,e,o,n,s),v(t)}function o(t){I.each(t,function(t){var e=x(t.outEdges,S),i=x(t.inEdges,S),n=Math.max(e,i);t.setLayout({value:n},!0)})}function a(t,e,i){for(var n=t,r=null,o=0,a=0;n.length;){r=[];for(var u=0,h=n.length;h>u;u++){var c=n[u];c.setLayout({x:o},!0),c.setLayout({dx:e},!0);for(var d=0,f=c.outEdges.length;f>d;d++)r.push(c.outEdges[d].node2)}n=r,++o}s(t,o),a=(i-e)/(o-1),l(t,a)}function s(t,e){I.each(t,function(t){t.outEdges.length||t.setLayout({x:e-1},!0)})}function l(t,e){I.each(t,function(t){var i=t.getLayout().x*e;t.setLayout({x:i},!0)})}function u(t,e,i,n,r){var o=A().key(function(t){return t.getLayout().x}).sortKeys(w).entries(t).map(function(t){return t.values});h(t,o,e,i,n),c(o,n,i);for(var a=1;r>0;r--)a*=.99,d(o,a),c(o,n,i),p(o,a),c(o,n,i)}function h(t,e,i,n,r){var o=[];I.each(e,function(t){var e=t.length,i=0;I.each(t,function(t){i+=t.getLayout().value});var a=(n-(e-1)*r)/i;o.push(a)}),o.sort(function(t,e){return t-e});var a=o[0];I.each(e,function(t){I.each(t,function(t,e){t.setLayout({y:e},!0);var i=t.getLayout().value*a;t.setLayout({dy:i},!0)})}),I.each(i,function(t){var e=+t.getValue()*a;t.setLayout({dy:e},!0)})}function c(t,e,i){I.each(t,function(t){var n,r,o,a=0,s=t.length;for(t.sort(b),o=0;s>o;o++){if(n=t[o],r=a-n.getLayout().y,r>0){var l=n.getLayout().y+r;n.setLayout({y:l},!0)}a=n.getLayout().y+n.getLayout().dy+e}if(r=a-e-i,r>0){var l=n.getLayout().y-r;for(n.setLayout({y:l},!0),a=n.getLayout().y,o=s-2;o>=0;--o)n=t[o],r=n.getLayout().y+n.getLayout().dy+e-a,r>0&&(l=n.getLayout().y-r,n.setLayout({y:l},!0)),a=n.getLayout().y}})}function d(t,e){I.each(t.slice().reverse(),function(t){I.each(t,function(t){if(t.outEdges.length){var i=x(t.outEdges,f)/x(t.outEdges,S),n=t.getLayout().y+(i-_(t))*e;t.setLayout({y:n},!0)}})})}function f(t){return _(t.node2)*t.getValue()}function p(t,e){I.each(t,function(t){I.each(t,function(t){if(t.inEdges.length){var i=x(t.inEdges,g)/x(t.inEdges,S),n=t.getLayout().y+(i-_(t))*e;t.setLayout({y:n},!0)}})})}function g(t){return _(t.node1)*t.getValue()}function v(t){I.each(t,function(t){t.outEdges.sort(m),t.inEdges.sort(y)}),I.each(t,function(t){var e=0,i=0;I.each(t.outEdges,function(t){t.setLayout({sy:e},!0),e+=t.getLayout().dy}),I.each(t.inEdges,function(t){t.setLayout({ty:i},!0),i+=t.getLayout().dy})})}function m(t,e){return t.node2.getLayout().y-e.node2.getLayout().y}function y(t,e){return t.node1.getLayout().y-e.node1.getLayout().y}function x(t,e){var i,n=0,r=t.length,o=-1;if(1===arguments.length)for(;++o<r;)i=+t[o],isNaN(i)||(n+=i);else for(;++o<r;)i=+e.call(t,t[o],o),isNaN(i)||(n+=i);return n}function _(t){return t.getLayout().y+t.getLayout().dy/2}function b(t,e){return t.getLayout().y-e.getLayout().y}function w(t,e){return e>t?-1:t>e?1:t==e?0:NaN}function S(t){return t.getValue()}var M=i(13),A=i(380),I=i(1);t.exports=function(t,e,i){t.eachSeriesByType("sankey",function(t){var i=t.get("nodeWidth"),a=t.get("nodeGap"),s=n(t,e);t.layoutInfo=s;var l=s.width,u=s.height,h=t.getGraph(),c=h.nodes,d=h.edges;o(c);var f=c.filter(function(t){return 0===t.getLayout().value}),p=0!==f.length?0:t.get("layoutIterations");r(c,d,i,a,l,u,p)})}},function(t,e,i){var n=i(71);t.exports=function(t,e){t.eachSeriesByType("sankey",function(t){var e=t.getGraph(),i=e.nodes;i.sort(function(t,e){return t.getLayout().value-e.getLayout().value});var r=i[0].getLayout().value,o=i[i.length-1].getLayout().value;i.forEach(function(e){var i=new n({type:"color",mappingMethod:"linear",dataExtent:[r,o],visual:t.get("color")}),a=i.mapValueToVisual(e.getLayout().value);e.setVisual("color",a);var s=e.getModel(),l=s.get("itemStyle.normal.color");null!=l&&e.setVisual("color",l)})})}},function(t,e,i){var n=i(2);i(311),i(312),i(313),n.registerVisual(i(315)),n.registerLayout(i(314))},function(t,e,i){function n(t,e){this.group=new o.Group,t.add(this.group),this._onSelect=e||s.noop}function r(t,e,i,n,r,o){var a=[[r?t:t-h,e],[t+i,e],[t+i,e+n],[r?t:t-h,e+n]];return!o&&a.splice(2,0,[t+i+h,e+n/2]),!r&&a.push([t,e+n/2]),a}var o=i(3),a=i(13),s=i(1),l=8,u=8,h=5;n.prototype={constructor:n,render:function(t,e,i){var n=t.getModel("breadcrumb"),r=this.group;if(r.removeAll(),n.get("show")&&i){var o=n.getModel("itemStyle.normal"),s=o.getModel("textStyle"),l={pos:{left:n.get("left"),right:n.get("right"),top:n.get("top"),bottom:n.get("bottom")},box:{width:e.getWidth(),height:e.getHeight()},emptyItemWidth:n.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(n,i,l,s),this._renderContent(n,i,l,o,s),a.positionGroup(r,l.pos,l.box)}},_prepare:function(t,e,i,n){for(var r=e;r;r=r.parentNode){var o=r.getModel().get("name"),a=n.getTextRect(o),s=Math.max(a.width+2*l,i.emptyItemWidth);i.totalWidth+=s+u,i.renderList.push({node:r,text:o,width:s})}},_renderContent:function(t,e,i,n,l){for(var h=0,c=i.emptyItemWidth,d=t.get("height"),f=a.getAvailableSize(i.pos,i.box),p=i.totalWidth,g=i.renderList,v=g.length-1;v>=0;v--){var m=g[v],y=m.width,x=m.text;p>f.width&&(p-=y-c,y=c,x=""),this.group.add(new o.Polygon({shape:{points:r(h,0,y,d,v===g.length-1,0===v)},style:s.defaults(n.getItemStyle(),{lineJoin:"bevel",text:x,textFill:l.getTextColor(),textFont:l.getFont()}),z:10,onclick:s.bind(this._onSelect,this,m.node)})),h+=y+u}},remove:function(){this.group.removeAll()}},t.exports=n},function(t,e,i){function n(t,e){var i=0;s.each(t.children,function(t){n(t,e);var r=t.value;s.isArray(r)&&(r=r[0]),i+=r});var r=t.value;e>=0&&(s.isArray(r)?r=r[0]:t.value=new Array(e)),(null==r||isNaN(r))&&(r=i),0>r&&(r=0),e>=0?t.value[0]=r:t.value=r}function r(t,e){var i=e.get("color");if(i){t=t||[];var n;if(s.each(t,function(t){var e=new l(t),i=e.get("color");(e.get("itemStyle.normal.color")||i&&"none"!==i)&&(n=!0)}),!n){var r=t[0]||(t[0]={});r.color=i.slice()}return t}}var o=i(15),a=i(378),s=i(1),l=i(8),u=i(9),h=u.encodeHTML,c=u.addCommas;t.exports=o.extend({type:"series.treemap",dependencies:["grid","polar"],_viewRoot:null,defaultOption:{progressive:0,hoverLayerThreshold:1/0,left:"center",top:"middle",right:null,bottom:null,width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"",visualDimension:0,zoomToNodeRatio:.1024,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{normal:{color:"rgba(0,0,0,0.7)",borderColor:"rgba(255,255,255,0.7)",borderWidth:1,shadowColor:"rgba(150,150,150,1)",shadowBlur:3,shadowOffsetX:0,shadowOffsetY:0,textStyle:{color:"#fff"}},emphasis:{textStyle:{}}}},label:{normal:{show:!0,position:"inside",textStyle:{color:"#fff",ellipsis:!0}}},itemStyle:{normal:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{}},color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},getInitialData:function(t,e){var i=t.data||[],o=t.name;null==o&&(o=t.name);var l={name:o,children:t.data},u=(i[0]||{}).value;n(l,s.isArray(u)?u.length:-1);var h=t.levels||[];return h=t.levels=r(h,e),a.createTree(l,this,h).data},optionUpdated:function(){this.resetViewRoot()},formatTooltip:function(t){var e=this.getData(),i=this.getRawValue(t),n=c(s.isArray(i)?i[0]:i),r=e.getName(t);return h(r)+": "+n},getDataParams:function(t){for(var e=o.prototype.getDataParams.apply(this,arguments),i=this.getData(),n=i.tree.getNodeByDataIndex(t),r=e.treePathInfo=[];n;){var a=n.dataIndex;r.push({name:n.name,dataIndex:a,value:this.getRawValue(a)}),n=n.parentNode}return r.reverse(),e},setLayoutInfo:function(t){this.layoutInfo=this.layoutInfo||{},s.extend(this.layoutInfo,t)},mapIdToIndex:function(t){var e=this._idIndexMap;e||(e=this._idIndexMap={},this._idIndexMapCount=0);var i=e[t];return null==i&&(e[t]=i=this._idIndexMapCount++),i},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(t){t?this._viewRoot=t:t=this._viewRoot;var e=this.getData().tree.root;t&&(t===e||e.contains(t))||(this._viewRoot=e)}})},function(t,e,i){function n(){return{nodeGroup:[],background:[],content:[]}}function r(t,e,i,n,r,l,u,h,c,d){function f(e){E.dataIndex=u.dataIndex,E.seriesIndex=t.seriesIndex;var i=I.borderWidth,n=Math.max(T-2*i,0),r=Math.max(L-2*i,0);E.culling=!0,E.setShape({x:i,y:i,width:n,height:r});var o=u.getVisual("color",!0);p(E,function(){var t={fill:o},e=u.getModel("itemStyle.emphasis").getItemStyle();g(t,e,o,n,r),E.setStyle(t),s.setHoverStyle(E,e)}),e.add(E)}function p(t,e){C?!t.invisible&&l.push(t):(e(),t.__tmWillVisible||(t.invisible=!1))}function g(e,i,n,r,o){var a=u.getModel(),s=a.get("name");if(I.isLeafRoot){var l=t.get("drillDownIcon",!0);s=l?l+" "+s:test}y(s,e,a,_,n,r,o),y(s,i,a,b,n,r,o)}function y(t,e,i,n,r,o,a){var l=i.getModel(n),u=l.getModel("textStyle");s.setText(e,l,r),e.textAlign=u.get("align"),e.textVerticalAlign=u.get("baseline");var h=u.getTextRect(t);!l.getShallow("show")||h.height>a?e.text="":h.width>o?e.text=u.get("ellipsis")?u.truncateText(t,o,null,{minChar:2}):"":e.text=t}function x(t,n,a,s){var l=null!=P&&i[t][P],u=r[t];return l?(i[t][P]=null,w(u,l,t)):C||(l=new n({z:o(a,s)}),l.__tmDepth=a,l.__tmStorageName=t,A(u,l,t)),e[t][D]=l}function w(t,e,i){var n=t[D]={};n.old="nodeGroup"===i?e.position.slice():a.extend({},e.shape)}function A(t,e,i){var o=t[D]={},a=u.parentNode;if(a&&(!n||"drillDown"===n.direction)){var s=0,l=0,h=r.background[a.getRawIndex()];!n&&h&&h.old&&(s=h.old.width,l=h.old.height),o.old="nodeGroup"===i?[0,l]:{x:s,y:l,width:0,height:0}}o.fadein="nodeGroup"!==i}if(u){var I=u.getLayout();if(I&&I.isInView){var T=I.width,L=I.height,C=I.invisible,D=u.getRawIndex(),P=h&&h.getRawIndex(),k=x("nodeGroup",v);if(k){if(c.add(k),k.attr("position",[I.x||0,I.y||0]),k.__tmNodeWidth=T,k.__tmNodeHeight=L,I.isAboveViewRoot)return k;var z=x("background",m,d,S);z&&(z.setShape({x:0,y:0,width:T,height:L}),p(z,function(){z.setStyle("fill",u.getVisual("borderColor",!0))}),k.add(z));var O=u.viewChildren;if(!O||!O.length){var E=x("content",m,d,M);E&&f(k)}return k}}}}function o(t,e){var i=t*w+e;return(i-1)/i}var a=i(1),s=i(3),l=i(45),u=i(169),h=i(310),c=i(78),d=i(7),f=i(19),p=i(379),g=a.bind,v=s.Group,m=s.Rect,y=a.each,x=3,_=["label","normal"],b=["label","emphasis"],w=10,S=1,M=2;t.exports=i(2).extendChartView({type:"treemap",init:function(t,e){this._containerGroup,this._storage=n(),this._oldTree,this._breadcrumb,this._controller,this._state="ready",this._mayClick},render:function(t,e,i,n){var r=e.findComponents({mainType:"series",subType:"treemap",query:n});if(!(a.indexOf(r,t)<0)){this.seriesModel=t,this.api=i,this.ecModel=e;var o=u.retrieveTargetInfo(n,t),s=n&&n.type,l=t.layoutInfo,h=!this._oldTree,c=this._storage,d="treemapRootToNode"===s&&o&&c?{rootNodeGroup:c.nodeGroup[o.node.getRawIndex()],direction:n.direction}:null,f=this._giveContainerGroup(l),p=this._doRender(f,t,d);h||s&&"treemapZoomToNode"!==s&&"treemapRootToNode"!==s?p.renderFinally():this._doAnimation(f,p,t,d),this._resetController(i),this._renderBreadcrumb(t,i,o)}},_giveContainerGroup:function(t){var e=this._containerGroup;return e||(e=this._containerGroup=new v,this._initEvents(e),this.group.add(e)),e.attr("position",[t.x,t.y]),e},_doRender:function(t,e,i){function o(t,e,i,n,r){function s(t){return t.getId()}function u(a,s){var l=null!=a?t[a]:null,u=null!=s?e[s]:null,h=v(l,u,i,r);h&&o(l&&l.viewChildren||[],u&&u.viewChildren||[],h,n,r+1)}n?(e=t,y(t,function(t,e){!t.isRemoved()&&u(e,e)})):new l(e,t,s,s).add(u).update(u).remove(a.curry(u,null)).execute()}function s(t){var e=n();return t&&y(t,function(t,i){var n=e[i];y(t,function(t){t&&(n.push(t),t.__tmWillDelete=1)})}),e}function u(){y(m,function(t){y(t,function(t){t.parent&&t.parent.remove(t)})}),y(g,function(t){t.invisible=!0,t.dirty()})}var h=e.getData().tree,c=this._oldTree,d=n(),f=n(),p=this._storage,g=[],v=a.curry(r,e,f,p,i,d,g);o(h.root?[h.root]:[],c&&c.root?[c.root]:[],t,h===c||!c,0);var m=s(p);return this._oldTree=h,this._storage=f,{lastsForAnimation:d,willDeleteEls:m,renderFinally:u}},_doAnimation:function(t,e,i,n){if(i.get("animation")){var r=i.get("animationDurationUpdate"),o=i.get("animationEasing"),s=p.createWrap();y(e.willDeleteEls,function(t,e){y(t,function(t,i){if(!t.invisible){var a,l=t.parent;if(n&&"drillDown"===n.direction)a=l===n.rootNodeGroup?{shape:{x:0,y:0,width:l.__tmNodeWidth,height:l.__tmNodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var u=0,h=0;l.__tmWillDelete||(u=l.__tmNodeWidth/2,h=l.__tmNodeHeight/2),a="nodeGroup"===e?{position:[u,h],style:{opacity:0}}:{shape:{x:u,y:h,width:0,height:0},style:{opacity:0}}}a&&s.add(t,a,r,o)}})}),y(this._storage,function(t,i){y(t,function(t,n){var l=e.lastsForAnimation[i][n],u={};l&&("nodeGroup"===i?l.old&&(u.position=t.position.slice(),t.attr("position",l.old)):(l.old&&(u.shape=a.extend({},t.shape),t.setShape(l.old)),l.fadein?(t.setStyle("opacity",0),u.style={opacity:1}):1!==t.style.opacity&&(u.style={opacity:1})),s.add(t,u,r,o))})},this),this._state="animating",s.done(g(function(){this._state="ready",e.renderFinally()},this)).start()}},_resetController:function(t){var e=this._controller;e||(e=this._controller=new c(t.getZr()),e.enable(this.seriesModel.get("roam")),e.on("pan",g(this._onPan,this)),e.on("zoom",g(this._onZoom,this)));var i=new d(0,0,t.getWidth(),t.getHeight());e.rectProvider=function(){return i}},_clearController:function(){var t=this._controller;t&&(t.off("pan").off("zoom"),t=null)},_onPan:function(t,e){if(this._mayClick=!1,"animating"!==this._state&&(Math.abs(t)>x||Math.abs(e)>x)){var i=this.seriesModel.getData().tree.root;if(!i)return;var n=i.getLayout();if(!n)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:n.x+t,y:n.y+e,width:n.width,height:n.height}})}},_onZoom:function(t,e,i){if(this._mayClick=!1,"animating"!==this._state){var n=this.seriesModel.getData().tree.root;if(!n)return;var r=n.getLayout();if(!r)return;var o=new d(r.x,r.y,r.width,r.height),a=this.seriesModel.layoutInfo;e-=a.x,i-=a.y;var s=f.create();f.translate(s,s,[-e,-i]),f.scale(s,s,[t,t]),f.translate(s,s,[e,i]),o.applyTransform(s),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:o.x,y:o.y,width:o.width,height:o.height}})}},_initEvents:function(t){function e(t){var e=this.seriesModel.get("nodeClick",!0);if(e){var i=this.findTarget(t.offsetX,t.offsetY);if(i){var n=i.node;if(n.getLayout().isLeafRoot)this._rootToNode(i);else if("zoomToNode"===e)this._zoomToNode(i);else if("link"===e){var r=n.hostTree.data.getItemModel(n.dataIndex),o=r.get("link",!0),a=r.get("target",!0)||"blank";o&&window.open(o,a)}}}}t.on("mousedown",function(t){"ready"===this._state&&(this._mayClick=!0)},this),t.on("mouseup",function(t){this._mayClick&&(this._mayClick=!1,"ready"===this._state&&e.call(this,t))},this)},_renderBreadcrumb:function(t,e,i){function n(e){"animating"!==this._state&&(u.aboveViewRoot(t.getViewRoot(),e)?this._rootToNode({node:e}):this._zoomToNode({node:e}))}i||(i=this.findTarget(e.getWidth()/2,e.getHeight()/2),i||(i={node:t.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new h(this.group,g(n,this)))).render(t,e,i.node)},remove:function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=n(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},dispose:function(){this._clearController()},_zoomToNode:function(t){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},_rootToNode:function(t){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},findTarget:function(t,e){var i,n=this.seriesModel.getViewRoot();return n.eachNode({attr:"viewChildren",order:"preorder"},function(n){var r=this._storage.background[n.getRawIndex()];if(r){var o=r.transformCoordToLocal(t,e),a=r.shape;if(!(a.x<=o[0]&&o[0]<=a.x+a.width&&a.y<=o[1]&&o[1]<=a.y+a.height))return!1;i={node:n,offsetX:o[0],offsetY:o[1]}}},this),i}})},function(t,e,i){for(var n=i(2),r=i(169),o=function(){},a=["treemapZoomToNode","treemapRender","treemapMove"],s=0;s<a.length;s++)n.registerAction({type:a[s],update:"updateView"},o);n.registerAction({type:"treemapRootToNode",update:"updateView"},function(t,e){function i(e,i){var n=r.retrieveTargetInfo(t,e);if(n){var o=e.getViewRoot();o&&(t.direction=r.aboveViewRoot(o,n.node)?"rollUp":"drillDown"),e.resetViewRoot(n.node)}}e.eachComponent({mainType:"series",subType:"treemap",query:t},i)})},function(t,e,i){function n(t,e,i){var n={mainType:"series",subType:"treemap",query:i};t.eachComponent(n,function(t){var n=e.getWidth(),o=e.getHeight(),a=t.option,s=a.size||[],l=b(w(a.width,s[0]),n),u=b(w(a.height,s[1]),o),h=v.getLayoutRect(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()}),g=i&&i.type,x=m.retrieveTargetInfo(i,t),_="treemapRender"===g||"treemapMove"===g?i.rootRect:null,M=t.getViewRoot(),A=m.getPathToRoot(M);if("treemapMove"!==g){var I="treemapZoomToNode"===g?c(t,x,M,l,u):_?[_.width,_.height]:[l,u],T=a.sort;T&&"asc"!==T&&"desc"!==T&&(T="desc");var L={squareRatio:a.squareRatio,sort:T,leafDepth:a.leafDepth};M.hostTree.clearLayouts();var C={x:0,y:0,width:I[0],height:I[1],area:I[0]*I[1]};M.setLayout(C),r(M,L,!1,0);var C=M.getLayout();S(A,function(t,e){var i=(A[e+1]||M).getValue();t.setLayout(p.extend({dataExtent:[i,i],borderWidth:0},C))})}var D=t.getData().tree.root;D.setLayout(d(h,_,x),!0),t.setLayoutInfo(h),f(D,new y(-h.x,-h.y,n,o),A,M,0)})}function r(t,e,i,n){var a,s;if(!t.isRemoved()){var l=t.getLayout();a=l.width,s=l.height;var c=t.getModel("itemStyle.normal"),d=c.get("borderWidth"),f=c.get("gapWidth")/2,p=d-f,g=t.getModel();t.setLayout({borderWidth:d},!0),a=x(a-2*p,0),s=x(s-2*p,0);var v=a*s,m=o(t,g,v,e,i,n);if(m.length){var y={x:p,y:p,width:a,height:s},b=_(a,s),w=1/0,S=[];S.area=0;for(var M=0,A=m.length;A>M;){var I=m[M];S.push(I),S.area+=I.getLayout().area;var T=u(S,b,e.squareRatio);w>=T?(M++,w=T):(S.area-=S.pop().getLayout().area,h(S,b,y,f,!1),b=_(y.width,y.height),S.length=S.area=0,w=1/0)}if(S.length&&h(S,b,y,f,!0),!i){var L=g.get("childrenVisibleMin");null!=L&&L>v&&(i=!0)}for(var M=0,A=m.length;A>M;M++)r(m[M],e,i,n+1)}}}function o(t,e,i,n,r,o){var u=t.children||[],h=n.sort;"asc"!==h&&"desc"!==h&&(h=null);var c=null!=n.leafDepth&&n.leafDepth<=o;if(r&&!c)return t.viewChildren=[];u=p.filter(u,function(t){return!t.isRemoved()}),s(u,h);var d=l(e,u,h);if(0===d.sum)return t.viewChildren=[];if(d.sum=a(e,i,d.sum,h,u),0===d.sum)return t.viewChildren=[];for(var f=0,g=u.length;g>f;f++){var v=u[f].getValue()/d.sum*i;u[f].setLayout({area:v})}return c&&(u.length&&t.setLayout({isLeafRoot:!0},!0),u.length=0),t.viewChildren=u,t.setLayout({dataExtent:d.dataExtent},!0),u}function a(t,e,i,n,r){if(!n)return i;for(var o=t.get("visibleMin"),a=r.length,s=a,l=a-1;l>=0;l--){var u=r["asc"===n?a-l-1:l].getValue();o>u/i*e&&(s=l,i-=u)}return"asc"===n?r.splice(0,a-s):r.splice(s,a-s),i}function s(t,e){return e&&t.sort(function(t,i){return"asc"===e?t.getValue()-i.getValue():i.getValue()-t.getValue()}),t}function l(t,e,i){for(var n=0,r=0,o=e.length;o>r;r++)n+=e[r].getValue();var a,s=t.get("visualDimension");if(e&&e.length)if("value"===s&&i)a=[e[e.length-1].getValue(),e[0].getValue()],"asc"===i&&a.reverse();else{var a=[1/0,-(1/0)];S(e,function(t){var e=t.getValue(s);e<a[0]&&(a[0]=e),e>a[1]&&(a[1]=e)})}else a=[NaN,NaN];return{sum:n,dataExtent:a}}function u(t,e,i){for(var n,r=0,o=1/0,a=0,s=t.length;s>a;a++)n=t[a].getLayout().area,n&&(o>n&&(o=n),n>r&&(r=n));var l=t.area*t.area,u=e*e*i;return l?x(u*r/l,l/(u*o)):1/0}function h(t,e,i,n,r){var o=e===i.width?0:1,a=1-o,s=["x","y"],l=["width","height"],u=i[s[o]],h=e?t.area/e:0;(r||h>i[l[a]])&&(h=i[l[a]]);for(var c=0,d=t.length;d>c;c++){var f=t[c],p={},g=h?f.getLayout().area/h:0,v=p[l[a]]=x(h-2*n,0),m=i[s[o]]+i[l[o]]-u,y=c===d-1||g>m?m:g,b=p[l[o]]=x(y-2*n,0);p[s[a]]=i[s[a]]+_(n,v/2),p[s[o]]=u+_(n,b/2),u+=y,f.setLayout(p,!0)}i[s[a]]+=h,i[l[a]]-=h}function c(t,e,i,n,r){var o=(e||{}).node,a=[n,r];if(!o||o===i)return a;for(var s,l=n*r,u=l*t.option.zoomToNodeRatio;s=o.parentNode;){for(var h=0,c=s.children,d=0,f=c.length;f>d;d++)h+=c[d].getValue();var p=o.getValue();if(0===p)return a;u*=h/p;var v=s.getModel("itemStyle.normal").get("borderWidth");isFinite(v)&&(u+=4*v*v+4*v*Math.pow(u,.5)),u>g.MAX_SAFE_INTEGER&&(u=g.MAX_SAFE_INTEGER),o=s}l>u&&(u=l);var m=Math.pow(u/l,.5);return[n*m,r*m]}function d(t,e,i){if(e)return{x:e.x,y:e.y};var n={x:0,y:0};if(!i)return n;var r=i.node,o=r.getLayout();if(!o)return n;for(var a=[o.width/2,o.height/2],s=r;s;){var l=s.getLayout();a[0]+=l.x,a[1]+=l.y,s=s.parentNode}return{x:t.width/2-a[0],y:t.height/2-a[1]}}function f(t,e,i,n,r){var o=t.getLayout(),a=i[r],s=a&&a===t;if(!(a&&!s||r===i.length&&t!==n)){t.setLayout({isInView:!0,invisible:!s&&!e.intersect(o),isAboveViewRoot:s},!0);var l=new y(e.x-o.x,e.y-o.y,e.width,e.height);S(t.viewChildren||[],function(t){f(t,l,i,n,r+1)})}}var p=i(1),g=i(4),v=i(13),m=i(169),y=i(7),m=i(169),x=Math.max,_=Math.min,b=g.parsePercent,w=p.retrieve,S=p.each;t.exports=n},function(t,e,i){function n(t,e,i,s,u,c){var d=t.getModel(),p=t.getLayout();if(p&&!p.invisible&&p.isInView){var v,m=t.getModel(g),y=i[t.depth],x=r(m,e,y,s),_=m.get("borderColor"),b=m.get("borderColorSaturation");null!=b&&(v=o(x,t),_=a(b,v)),t.setVisual("borderColor",_);var w=t.viewChildren;if(w&&w.length){var S=l(t,d,p,m,x,w);f.each(w,function(t,e){if(t.depth>=u.length||t===u[t.depth]){var r=h(d,x,t,e,S,c);n(t,r,i,s,u,c)}})}else v=o(x,t),t.setVisual("color",v)}}function r(t,e,i,n){var r=f.extend({},e);return f.each(["color","colorAlpha","colorSaturation"],function(o){var a=t.get(o,!0);null==a&&i&&(a=i[o]),null==a&&(a=e[o]),null==a&&(a=n.get(o)),null!=a&&(r[o]=a)}),r}function o(t){var e=s(t,"color");if(e){var i=s(t,"colorAlpha"),n=s(t,"colorSaturation");return n&&(e=d.modifyHSL(e,null,null,n)),i&&(e=d.modifyAlpha(e,i)),e}}function a(t,e){return null!=e?d.modifyHSL(e,null,null,t):null}function s(t,e){var i=t[e];return null!=i&&"none"!==i?i:void 0}function l(t,e,i,n,r,o){if(o&&o.length){var a=u(e,"color")||null!=r.color&&"none"!==r.color&&(u(e,"colorAlpha")||u(e,"colorSaturation"));if(a){var s=e.get("colorMappingBy"),l={type:a.name,dataExtent:i.dataExtent,visual:a.range};"color"!==l.type||"index"!==s&&"id"!==s?l.mappingMethod="linear":(l.mappingMethod="category",l.loop=!0);var h=new c(l);return h.__drColorMappingBy=s,h}}}function u(t,e){var i=t.get(e);return p(i)&&i.length?{name:e,range:i}:null}function h(t,e,i,n,r,o){var a=f.extend({},e);if(r){var s=r.type,l="color"===s&&r.__drColorMappingBy,u="index"===l?n:"id"===l?o.mapIdToIndex(i.getId()):i.getValue(t.get("visualDimension"));a[s]=r.mapValueToVisual(u)}return a}var c=i(71),d=i(18),f=i(1),p=f.isArray,g="itemStyle.normal";t.exports=function(t,e,i){var r={mainType:"series",subType:"treemap",query:i};t.eachComponent(r,function(t){var e=t.getData().tree,i=e.root,r=t.getModel(g);if(!i.isRemoved()){var o=f.map(e.levelModels,function(t){return t?t.get(g):null});n(i,{},o,r,t.getViewRoot().getAncestors(),t)}})}},function(t,e,i){"use strict";i(214),i(317)},function(t,e,i){"use strict";function n(t,e,i,n){var r=t.coordToPoint([e,n]),o=t.coordToPoint([i,n]);return{x1:r[0],y1:r[1],x2:o[0],y2:o[1]}}var r=i(1),o=i(3),a=i(8),s=["axisLine","axisLabel","axisTick","splitLine","splitArea"];i(2).extendComponentView({type:"angleAxis",render:function(t,e){if(this.group.removeAll(),t.get("show")){var i=e.getComponent("polar",t.get("polarIndex")),n=t.axis,o=i.coordinateSystem,a=o.getRadiusAxis().getExtent(),l=n.getTicksCoords();"category"!==n.type&&l.pop(),r.each(s,function(e){t.get(e+".show")&&this["_"+e](t,o,l,a)},this)}},_axisLine:function(t,e,i,n){var r=t.getModel("axisLine.lineStyle"),a=new o.Circle({shape:{cx:e.cx,cy:e.cy,r:n[1]},style:r.getLineStyle(),z2:1,silent:!0});a.style.fill=null,this.group.add(a)},_axisTick:function(t,e,i,a){var s=t.getModel("axisTick"),l=(s.get("inside")?-1:1)*s.get("length"),u=r.map(i,function(t){return new o.Line({shape:n(e,a[1],a[1]+l,t)})});this.group.add(o.mergePath(u,{style:r.defaults(s.getModel("lineStyle").getLineStyle(),{stroke:t.get("axisLine.lineStyle.color")})}))},_axisLabel:function(t,e,i,n){for(var r=t.axis,s=t.get("data"),l=t.getModel("axisLabel"),u=l.getModel("textStyle"),h=t.getFormattedLabels(),c=l.get("margin"),d=r.getLabelsCoords(),f=0;f<i.length;f++){var p=n[1],g=e.coordToPoint([p+c,d[f]]),v=e.cx,m=e.cy,y=Math.abs(g[0]-v)/p<.3?"center":g[0]>v?"left":"right",x=Math.abs(g[1]-m)/p<.3?"middle":g[1]>m?"top":"bottom",_=u;s&&s[f]&&s[f].textStyle&&(_=new a(s[f].textStyle,u)),this.group.add(new o.Text({style:{x:g[0],y:g[1],fill:_.getTextColor()||t.get("axisLine.lineStyle.color"),text:h[f],textAlign:y,textVerticalAlign:x,textFont:_.getFont()},silent:!0}))}},_splitLine:function(t,e,i,a){var s=t.getModel("splitLine"),l=s.getModel("lineStyle"),u=l.get("color"),h=0;u=u instanceof Array?u:[u];for(var c=[],d=0;d<i.length;d++){var f=h++%u.length;c[f]=c[f]||[],c[f].push(new o.Line({shape:n(e,a[0],a[1],i[d])}))}for(var d=0;d<c.length;d++)this.group.add(o.mergePath(c[d],{style:r.defaults({stroke:u[d%u.length]},l.getLineStyle()),silent:!0,z:t.get("z")}))},_splitArea:function(t,e,i,n){var a=t.getModel("splitArea"),s=a.getModel("areaStyle"),l=s.get("color"),u=0;l=l instanceof Array?l:[l];for(var h=[],c=Math.PI/180,d=-i[0]*c,f=Math.min(n[0],n[1]),p=Math.max(n[0],n[1]),g=t.get("clockwise"),v=1;v<i.length;v++){var m=u++%l.length;h[m]=h[m]||[],h[m].push(new o.Sector({shape:{cx:e.cx,cy:e.cy,r0:f,r:p,startAngle:d,endAngle:-i[v]*c,clockwise:g},silent:!0})),d=-i[v]*c}for(var v=0;v<h.length;v++)this.group.add(o.mergePath(h[v],{style:r.defaults({fill:l[v%l.length]},s.getAreaStyle()),silent:!0}))}})},function(t,e,i){function n(t,e,i){return i&&"axisAreaSelect"===i.type&&e.findComponents({mainType:"parallelAxis",query:i})[0]===t}var r=i(1),o=i(50),a=i(110),s=i(3),l=["axisLine","axisLabel","axisTick","axisName"],u=i(2).extendComponentView({type:"parallelAxis",init:function(t,e){u.superApply(this,"init",arguments),(this._brushController=new a(e.getZr())).on("brush",r.bind(this._onBrush,this))},render:function(t,e,i,a){if(!n(t,e,a)){this.axisModel=t,this.api=i,this.group.removeAll();var u=this._axisGroup;if(this._axisGroup=new s.Group,this.group.add(this._axisGroup),t.get("show")){var h,c=e.getComponent("parallel",t.get("parallelIndex")).coordinateSystem,d=t.getAreaSelectStyle(),f=d.width,p=t.axis.dim,g=c.getAxisLayout(p),v=r.indexOf(c.dimensions,p),m=g.axisExpandWindow;m&&(v<=m[0]||v>=m[1])&&(h=!1);var y=r.extend({axisLabelShow:h,strokeContainThreshold:f},g),x=new o(t,y);r.each(l,x.add,x),this._axisGroup.add(x.getGroup()),this._refreshBrushController(y,d,t,f),s.groupTransition(u,this._axisGroup,t)}}},_refreshBrushController:function(t,e,i,n){var o=i.axis,a=r.map(i.activeIntervals,function(t){return{brushType:"lineX",panelId:"pl",range:[o.dataToCoord(t[0],!0),o.dataToCoord(t[1],!0)]}}),s=o.getExtent(),l=30,u={x:s[0]-l,y:-n/2,width:s[1]-s[0]+2*l,height:n};this._brushController.mount({enableGlobalPan:!0,rotation:t.rotation,position:t.position}).setPanels([{panelId:"pl",rect:u}]).enableBrush({brushType:"lineX",brushStyle:e,removeOnClick:!0}).updateCovers(a)},_onBrush:function(t,e){var i=this.axisModel,n=i.axis,o=r.map(t,function(t){return[n.coordToData(t.range[0],!0),n.coordToData(t.range[1],!0)]});(!i.option.realtime===e.isEnd||e.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:i.id,intervals:o})},dispose:function(){this._brushController.dispose()}});t.exports=u},function(t,e,i){"use strict";function n(t,e,i){return{position:[t.cx,t.cy],rotation:i/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotation:e.getModel("axisLabel").get("rotate"),z2:1}}var r=i(1),o=i(3),a=i(50),s=["axisLine","axisLabel","axisTick","axisName"],l=["splitLine","splitArea"];i(2).extendComponentView({type:"radiusAxis",render:function(t,e){if(this.group.removeAll(),t.get("show")){var i=e.getComponent("polar",t.get("polarIndex")),o=i.coordinateSystem.getAngleAxis(),u=t.axis,h=i.coordinateSystem,c=u.getTicksCoords(),d=o.getExtent()[0],f=u.getExtent(),p=n(h,t,d),g=new a(t,p);r.each(s,g.add,g),this.group.add(g.getGroup()),r.each(l,function(e){t.get(e+".show")&&this["_"+e](t,h,d,f,c)},this)}},_splitLine:function(t,e,i,n,a){var s=t.getModel("splitLine"),l=s.getModel("lineStyle"),u=l.get("color"),h=0;u=u instanceof Array?u:[u];for(var c=[],d=0;d<a.length;d++){var f=h++%u.length;c[f]=c[f]||[],c[f].push(new o.Circle({shape:{cx:e.cx,cy:e.cy,r:a[d]},silent:!0}))}for(var d=0;d<c.length;d++)this.group.add(o.mergePath(c[d],{style:r.defaults({stroke:u[d%u.length],fill:null},l.getLineStyle()),silent:!0}))},_splitArea:function(t,e,i,n,a){var s=t.getModel("splitArea"),l=s.getModel("areaStyle"),u=l.get("color"),h=0;u=u instanceof Array?u:[u];for(var c=[],d=a[0],f=1;f<a.length;f++){var p=h++%u.length;c[p]=c[p]||[],c[p].push(new o.Sector({shape:{cx:e.cx,cy:e.cy,r0:d,r:a[f],startAngle:0,endAngle:2*Math.PI},silent:!0})),d=a[f]}for(var f=0;f<c.length;f++)this.group.add(o.mergePath(c[f],{style:r.defaults({fill:u[f%u.length]},l.getAreaStyle()),silent:!0}))}})},function(t,e,i){function n(t){var e=t.coordinateSystem,i=t.axis,n={},r=i.position,o=i.orient,a=e.getRect(),s=[a.x,a.x+a.width,a.y,a.y+a.height],l={horizontal:{top:s[2],bottom:s[3]},vertical:{left:s[0],right:s[1]}};n.position=["vertical"===o?l.vertical[r]:s[0],"horizontal"===o?l.horizontal[r]:s[3]];var u={horizontal:0,vertical:1};n.rotation=Math.PI/2*u[o];var h={top:-1,bottom:1,right:1,left:-1};n.labelDirection=n.tickDirection=n.nameDirection=h[r],t.getModel("axisTick").get("inside")&&(n.tickDirection=-n.tickDirection),t.getModel("axisLabel").get("inside")&&(n.labelDirection=-n.labelDirection);var c=t.getModel("axisLabel").get("rotate");return n.labelRotation="top"===r?-c:c,n.labelInterval=i.getLabelInterval(),n.z2=1,n}var r=i(50),o=i(1),a=i(3),s=r.getInterval,l=r.ifIgnoreOnTick,u=["axisLine","axisLabel","axisTick","axisName"],h="splitLine",c=i(2).extendComponentView({type:"singleAxis",render:function(t,e){var i=this.group;i.removeAll();var a=n(t),s=new r(t,a);o.each(u,s.add,s),i.add(s.getGroup()),t.get(h+".show")&&this["_"+h](t,a.labelInterval)},_splitLine:function(t,e){var i=t.axis,n=t.getModel("splitLine"),r=n.getModel("lineStyle"),o=r.get("width"),u=r.get("color"),h=s(n,e);u=u instanceof Array?u:[u];for(var c=t.coordinateSystem.getRect(),d=i.isHorizontal(),f=[],p=0,g=i.getTicksCoords(),v=[],m=[],y=0;y<g.length;++y)if(!l(i,y,h)){var x=i.toGlobalCoord(g[y]);d?(v[0]=x,v[1]=c.y,m[0]=x,m[1]=c.y+c.height):(v[0]=c.x,v[1]=x,m[0]=c.x+c.width,m[1]=x);var _=p++%u.length;f[_]=f[_]||[],f[_].push(new a.Line(a.subPixelOptimizeLine({shape:{x1:v[0],y1:v[1],x2:m[0],y2:m[1]},style:{lineWidth:o},silent:!0})))}for(var y=0;y<f.length;++y)this.group.add(a.mergePath(f[y],{style:{stroke:u[y%u.length],lineDash:r.getLineDash(),lineWidth:o},silent:!0}))}});t.exports=c},function(t,e,i){var n=i(2),r={type:"axisAreaSelect",event:"axisAreaSelected",update:"updateVisual"};n.registerAction(r,function(t,e){e.eachComponent({mainType:"parallelAxis",query:t},function(e){e.axis.model.setActiveIntervals(t.intervals)})}),n.registerAction("parallelAxisExpand",function(t,e){e.eachComponent({mainType:"parallel",query:t},function(e){e.setAxisExpand(t)})})},function(t,e,i){i(2).registerPreprocessor(i(326)),i(328),i(323),i(324),i(325),i(346)},function(t,e,i){var n=i(2),r=i(1),o=i(171),a=i(8),s=["#ddd"],l=n.extendComponentModel({type:"brush",dependencies:["geo","grid","xAxis","yAxis","parallel","series"],defaultOption:{toolbox:null,brushLink:null,seriesIndex:"all",geoIndex:null,xAxisIndex:null,yAxisIndex:null,brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(120,140,180,0.3)",borderColor:"rgba(120,140,180,0.8)",width:null},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0},areas:[],brushType:null,brushOption:{},coordInfoList:[],optionUpdated:function(t,e){var i=this.option;!e&&o.replaceVisualOption(i,t,["inBrush","outOfBrush"]),i.inBrush=i.inBrush||{},i.outOfBrush=i.outOfBrush||{color:s}},setAreas:function(t){t&&(this.areas=r.map(t,function(t){return this._mergeBrushOption(t)},this))},setBrushOption:function(t){this.brushOption=this._mergeBrushOption(t),this.brushType=this.brushOption.brushType},_mergeBrushOption:function(t){var e=this.option;return r.merge({brushType:e.brushType,brushMode:e.brushMode,transformable:e.transformable,brushStyle:new a(e.brushStyle).getItemStyle(),removeOnClick:e.removeOnClick},t,!0)}});t.exports=l},function(t,e,i){function n(t,e,i,n){(!n||n.$from!==t.id)&&this._brushController.setPanels(s.makePanelOpts(t.coordInfoList)).enableBrush(t.brushOption).updateCovers(t.areas.slice())}var r=i(1),o=i(110),a=i(2),s=i(111);t.exports=a.extendComponentView({type:"brush",init:function(t,e){this.ecModel=t,this.api=e,this.model,(this._brushController=new o(e.getZr())).on("brush",r.bind(this._onBrush,this)).mount()},render:function(t){return this.model=t,n.apply(this,arguments)},updateView:n,updateLayout:n,updateVisual:n,dispose:function(){this._brushController.dispose()},_onBrush:function(t,e){var i=this.model.id;s.parseOutputRanges(t,this.model.coordInfoList,this.ecModel),(!e.isEnd||e.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:i,areas:r.clone(t),$from:i})}})},function(t,e,i){var n=i(2);n.registerAction({type:"brush",event:"brush",update:"updateView"},function(t,e){e.eachComponent({mainType:"brush",query:t},function(e){e.setAreas(t.areas)})}),n.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},function(){})},function(t,e,i){function n(t){var e={};r.each(t,function(t){e[t]=1}),t.length=0,r.each(e,function(e,i){t.push(i)})}var r=i(1),o=["rect","polygon","keep","clear"];t.exports=function(t,e){var i=t&&t.brush;if(r.isArray(i)||(i=i?[i]:[]),i.length){var a=[];r.each(i,function(t){var e=t.hasOwnProperty("toolbox")?t.toolbox:[];e instanceof Array&&(a=a.concat(e))});var s=t&&t.toolbox;r.isArray(s)&&(s=s[0]),s||(s={feature:{}},t.toolbox=[s]);var l=s.feature||(s.feature={}),u=l.brush||(l.brush={}),h=u.type||(u.type=[]);h.push.apply(h,a),n(h),e&&!h.length&&h.push.apply(h,o)}}},function(t,e,i){function n(t){var e=["x","y"],i=["width","height"];return{point:function(e,i,n){var o=n.range,a=e[t];return r(a,o)},rect:function(n,o,a){var s=a.range;return r(n[e[t]],s)||r(n[e[t]]+n[i[t]],s)}}}function r(t,e){return e[0]<=t&&t<=e[1]}function o(t,e,i,n,r){for(var o=0,s=r[r.length-1];o<r.length;o++){var l=r[o];if(a(t,e,i,n,l[0],l[1],s[0],s[1]))return!0;s=l}}function a(t,e,i,n,r,o,a,u){var h=l(i-t,r-a,n-e,o-u);if(s(h))return!1;var c=l(r-t,r-a,o-e,o-u)/h;if(0>c||c>1)return!1;var d=l(i-t,r-t,n-e,o-e)/h;return!(0>d||d>1)}function s(t){return 1e-6>=t&&t>=-1e-6}function l(t,e,i,n){return t*n-e*i}function u(t){var e=t.x,i=t.y,n=t.width,r=t.height;return 0>n&&(e+=n,n=-n),0>r&&(i+=r,r=-r),new c(e,i,n,r)}var h=i(240).contain,c=i(7),d={lineX:n(0),lineY:n(1),rect:{point:function(t,e,i){return i.boundingRect.contain(t[0],t[1])},rect:function(t,e,i){return i.boundingRect.intersect(u(t))}},polygon:{point:function(t,e,i){return i.boundingRect.contain(t[0],t[1])&&h(i.range,t[0],t[1])},rect:function(t,e,i){var n=i.range;if(n.length<=1)return!1;var r=t.x,a=t.y,s=t.width,l=t.height,c=n[0];return h(n,r,a)||h(n,r+s,a)||h(n,r,a+l)||h(n,r+s,a+l)||u(t).contain(c[0],c[1])||o(r,a,r+s,a,n)||o(r,a,r,a+l,n)||o(r+s,a,r+s,a+l,n)||o(r,a+l,r+s,a+l,n)?!0:void 0}}};t.exports=d},function(t,e,i){function n(t,e,i,n,o){if(o){var a=t.getZr();if(!a[x]){a[y]||(a[y]=r);var s=g.createOrUpdate(a,y,i,e);s(t,n)}}}function r(t,e){if(!t.isDisposed()){var i=t.getZr();i[x]=!0,t.dispatchAction({type:"brushSelect",batch:e}),i[x]=!1}}function o(t,e,i,n){for(var r=i.getItemLayout(n),o=0,a=e.length;a>o;o++){var s=e[o];if(t[s.brushType](r,s.selectors,s))return!0}}function a(t){var e=t.brushSelector;if(d.isString(e)){var i=[];return d.each(p,function(t,n){i[n]=t[e]}),i}if(d.isFunction(e)){var n={};return d.each(p,function(t,i){n[i]=e}),n}return e}function s(t,e){var i=t.option.seriesIndex;return null!=i&&"all"!==i&&(d.isArray(i)?d.indexOf(i,e)<0:e!==i)}function l(t){var e=t.selectors={};return d.each(p[t.brushType],function(i,n){e[n]=function(n){return i(n,e,t)}}),t}function u(t){return new f(t[0][0],t[1][0],t[0][1]-t[0][0],t[1][1]-t[1][0])}var h=i(2),c=i(171),d=i(1),f=i(7),p=i(327),g=i(81),v=i(111),m=["inBrush","outOfBrush"],y="__ecBrushSelect",x="__ecInBrushSelectEvent",_=h.PRIORITY.VISUAL.BRUSH;h.registerLayout(_,function(t,e,i){t.eachComponent({mainType:"brush"},function(e){i&&"takeGlobalCursor"===i.type&&e.setBrushOption("brush"===i.key?i.brushOption:{brushType:!1}),e.coordInfoList=v.makeCoordInfoList(e.option,t),v.parseInputRanges(e,t)})}),h.registerVisual(_,function(t,e,i){var r,u,h=[];t.eachComponent({mainType:"brush"},function(e,i){function n(t){return"all"===_||w[t]}function f(t){return!!t.length}function p(t,e){var i=t.coordinateSystem;A|=i.hasAxisbrushed(),n(e)&&i.eachActiveState(t.getData(),function(t,e){"active"===t&&(S[e]=1)})}function g(t,i,r){var l=a(t);if(l&&!s(e,i)&&(d.each(I,function(i){l[i.brushType]&&v.controlSeries(i,e,t)&&r.push(i),A|=f(r)}),n(i)&&f(r))){var u=t.getData();u.each(function(t){o(l,r,u,t)&&(S[t]=1)})}}var y={brushId:e.id,brushIndex:i,brushName:e.name,areas:d.clone(e.areas),selected:[]};h.push(y);var x=e.option,_=x.brushLink,w=[],S=[],M=[],A=0;i||(r=x.throttleType,u=x.throttleDelay);var I=d.map(e.areas,function(t){return l(d.defaults({boundingRect:b[t.brushType](t)},t))}),T=c.createVisualMappings(e.option,m,function(t){t.mappingMethod="fixed"});d.isArray(_)&&d.each(_,function(t){w[t]=1}),t.eachSeries(function(t,e){var i=M[e]=[];"parallel"===t.subType?p(t,e,i):g(t,e,i)}),t.eachSeries(function(t,e){var i={seriesId:t.id,seriesIndex:e,seriesName:t.name,dataIndex:[]};y.selected.push(i);var r=a(t),s=M[e],l=t.getData(),u=n(e)?function(t){return S[t]?(i.dataIndex.push(l.getRawIndex(t)),"inBrush"):"outOfBrush"}:function(t){return o(r,s,l,t)?(i.dataIndex.push(l.getRawIndex(t)),"inBrush"):"outOfBrush"};(n(e)?A:f(s))&&c.applyVisual(m,T,l,u)})}),n(e,r,u,h,i)});var b={lineX:d.noop,lineY:d.noop,rect:function(t){return u(t.range)},polygon:function(t){for(var e,i=t.range,n=0,r=i.length;r>n;n++){e=e||[[1/0,-(1/0)],[1/0,-(1/0)]];var o=i[n];o[0]<e[0][0]&&(e[0][0]=o[0]),o[0]>e[0][1]&&(e[0][1]=o[0]),o[1]<e[1][0]&&(e[1][0]=o[1]),o[1]>e[1][1]&&(e[1][1]=o[1])}return e&&u(e)}}},function(t,e,i){function n(t,e){e.update="updateView",r.registerAction(e,function(e,i){var n={};return i.eachComponent({mainType:"geo",query:e},function(i){i[t](e.name);var r=i.coordinateSystem;o.each(r.regions,function(t){n[t.name]=i.isSelected(t.name)||!1})}),{selected:n,name:e.name}})}i(355),i(170),i(330),i(219);var r=i(2),o=i(1);n("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),n("select",{type:"geoSelect",event:"geoselected"}),n("unSelect",{type:"geoUnSelect",event:"geounselected"})},function(t,e,i){"use strict";var n=i(227);t.exports=i(2).extendComponentView({type:"geo",init:function(t,e){var i=new n(e,!0);this._mapDraw=i,this.group.add(i.group)},render:function(t,e,i,n){if(!n||"geoToggleSelect"!==n.type||n.from!==this.uid){var r=this._mapDraw;t.get("show")?r.draw(t,e,i,this,n):this._mapDraw.group.removeAll(),this.group.silent=t.get("silent")}}})},function(t,e,i){i(238),i(321),i(318)},function(t,e,i){"use strict";i(214),i(316),i(335),i(2).extendComponentView({type:"polar"})},function(t,e,i){i(371),i(372),i(334)},function(t,e,i){var n=i(50),r=i(1),o=i(3),a=["axisLine","axisLabel","axisTick","axisName"];t.exports=i(2).extendComponentView({type:"radar",render:function(t,e,i){var n=this.group;n.removeAll(),this._buildAxes(t),this._buildSplitLineAndArea(t)},_buildAxes:function(t){var e=t.coordinateSystem,i=e.getIndicatorAxes(),o=r.map(i,function(t){var i=new n(t.model,{position:[e.cx,e.cy],rotation:t.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return i});r.each(o,function(t){r.each(a,t.add,t),this.group.add(t.getGroup())},this)},_buildSplitLineAndArea:function(t){function e(t,e,i){var n=i%e.length;return t[n]=t[n]||[],n}var i=t.coordinateSystem,n=t.get("splitNumber"),a=i.getIndicatorAxes();if(a.length){var s=t.get("shape"),l=t.getModel("splitLine"),u=t.getModel("splitArea"),h=l.getModel("lineStyle"),c=u.getModel("areaStyle"),d=l.get("show"),f=u.get("show"),p=h.get("color"),g=c.get("color");p=r.isArray(p)?p:[p],g=r.isArray(g)?g:[g];var v=[],m=[];if("circle"===s)for(var y=a[0].getTicksCoords(),x=i.cx,_=i.cy,b=0;b<y.length;b++){if(d){var w=e(v,p,b);v[w].push(new o.Circle({shape:{cx:x,cy:_,r:y[b]}}))}if(f&&b<y.length-1){var w=e(m,g,b);m[w].push(new o.Ring({shape:{cx:x,cy:_,r0:y[b],r:y[b+1]}}))}}else for(var S=r.map(a,function(t,e){var n=t.getTicksCoords();return r.map(n,function(t){return i.coordToPoint(t,e)})}),M=[],b=0;n>=b;b++){for(var A=[],I=0;I<a.length;I++)A.push(S[I][b]);if(A.push(A[0].slice()),d){var w=e(v,p,b);v[w].push(new o.Polyline({shape:{points:A}}))}if(f&&M){var w=e(m,g,b-1);m[w].push(new o.Polygon({shape:{points:A.concat(M)}}))}M=A.slice().reverse()}var T=h.getLineStyle(),L=c.getAreaStyle();r.each(m,function(t,e){this.group.add(o.mergePath(t,{style:r.defaults({stroke:"none",fill:g[e%g.length]},L),silent:!0}))},this),r.each(v,function(t,e){this.group.add(o.mergePath(t,{style:r.defaults({fill:"none",stroke:p[e%p.length]},T),silent:!0}))},this)}}})},function(t,e,i){i(214),i(319)},function(t,e,i){i(376),i(320),i(373);var n=i(2);n.extendComponentView({type:"single"})},function(t,e,i){var n=i(2);n.registerPreprocessor(i(343)),i(345),i(344),i(338),i(339)},function(t,e,i){var n=i(341),r=i(1),o=i(10),a=n.extend({type:"timeline.slider",defaultOption:{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"emptyCircle",symbolSize:10,lineStyle:{show:!0,width:2,color:"#304654"},label:{position:"auto",normal:{show:!0,interval:"auto",rotate:0,textStyle:{color:"#304654"}},emphasis:{show:!0,textStyle:{color:"#c23531"}}},itemStyle:{normal:{color:"#304654",borderWidth:1},emphasis:{color:"#c23531"}},checkpointStyle:{symbol:"circle",symbolSize:13,color:"#c23531",borderWidth:5,borderColor:"rgba(194,53,49, 0.5)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:22,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"path://M18.6,50.8l22.5-22.5c0.2-0.2,0.3-0.4,0.3-0.7c0-0.3-0.1-0.5-0.3-0.7L18.7,4.4c-0.1-0.1-0.2-0.3-0.2-0.5 c0-0.4,0.3-0.8,0.8-0.8c0.2,0,0.5,0.1,0.6,0.3l23.5,23.5l0,0c0.2,0.2,0.3,0.4,0.3,0.7c0,0.3-0.1,0.5-0.3,0.7l-0.1,0.1L19.7,52 c-0.1,0.1-0.3,0.2-0.5,0.2c-0.4,0-0.8-0.3-0.8-0.8C18.4,51.2,18.5,51,18.6,50.8z",prevIcon:"path://M43,52.8L20.4,30.3c-0.2-0.2-0.3-0.4-0.3-0.7c0-0.3,0.1-0.5,0.3-0.7L42.9,6.4c0.1-0.1,0.2-0.3,0.2-0.5 c0-0.4-0.3-0.8-0.8-0.8c-0.2,0-0.5,0.1-0.6,0.3L18.3,28.8l0,0c-0.2,0.2-0.3,0.4-0.3,0.7c0,0.3,0.1,0.5,0.3,0.7l0.1,0.1L41.9,54 c0.1,0.1,0.3,0.2,0.5,0.2c0.4,0,0.8-0.3,0.8-0.8C43.2,53.2,43.1,53,43,52.8z",normal:{color:"#304654",borderColor:"#304654",borderWidth:1},emphasis:{color:"#c23531",borderColor:"#c23531",borderWidth:2}},data:[]}});r.mixin(a,o.dataFormatMixin),t.exports=a},function(t,e,i){function n(t,e){return u.getLayoutRect(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()},t.get("padding"))}function r(t,e,i,n){var r=l.makePath(t.get(e).replace(/^path:\/\//,""),s.clone(n||{}),new p(i[0],i[1],i[2],i[3]),"center");return r}function o(t,e,i,n,r,o){var a=t.get("symbol"),l=e.get("color"),u=t.get("symbolSize"),h=u/2,c=e.getItemStyle(["color","symbol","symbolSize"]);return r?(r.setStyle(c),r.setColor(l),i.add(r),o&&o.onUpdate(r)):(r=d.createSymbol(a,-h,-h,u,u,l),i.add(r),o&&o.onCreate(r)),n=s.merge({rectHover:!0,style:c,z2:100},n,!0),r.attr(n),r}function a(t,e,i,n,r){if(!t.dragging){var o=n.getModel("checkpointStyle"),a=i.dataToCoord(n.getData().get(["value"],e));r||!o.get("animation",!0)?t.attr({position:[a,0]}):(t.stopAnimation(!0),t.animateTo({position:[a,0]},o.get("animationDuration",!0),o.get("animationEasing",!0)))}}var s=i(1),l=i(3),u=i(13),h=i(342),c=i(340),d=i(26),f=i(22),p=i(7),g=i(19),v=i(4),m=i(9),y=m.encodeHTML,x=s.bind,_=s.each,b=Math.PI;t.exports=h.extend({type:"timeline.slider",init:function(t,e){this.api=e,this._axis,this._viewRect,this._timer,this._currentPointer,this._mainGroup,this._labelGroup},render:function(t,e,i,n){if(this.model=t,this.api=i,this.ecModel=e,this.group.removeAll(),t.get("show",!0)){var r=this._layout(t,i),o=this._createGroup("mainGroup"),a=this._createGroup("labelGroup"),s=this._axis=this._createAxis(r,t);t.formatTooltip=function(t){return y(s.scale.getLabel(t))},_(["AxisLine","AxisTick","Control","CurrentPointer"],function(e){this["_render"+e](r,o,s,t)},this),this._renderAxisLabel(r,a,s,t),this._position(r,t)}this._doPlayStop()},remove:function(){this._clearTimer(),this.group.removeAll()},dispose:function(){this._clearTimer()},_layout:function(t,e){var i=t.get("label.normal.position"),r=t.get("orient"),o=n(t,e);null==i||"auto"===i?i="horizontal"===r?o.y+o.height/2<e.getHeight()/2?"-":"+":o.x+o.width/2<e.getWidth()/2?"+":"-":isNaN(i)&&(i={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[r][i]);var a={horizontal:"center",vertical:i>=0||"+"===i?"left":"right"},s={horizontal:i>=0||"+"===i?"top":"bottom",vertical:"middle"},l={horizontal:0,vertical:b/2},u="vertical"===r?o.height:o.width,h=t.getModel("controlStyle"),c=h.get("show"),d=c?h.get("itemSize"):0,f=c?h.get("itemGap"):0,p=d+f,g=t.get("label.normal.rotate")||0;g=g*b/180;var v,m,y,x,_=h.get("position",!0),c=h.get("show",!0),w=c&&h.get("showPlayBtn",!0),S=c&&h.get("showPrevBtn",!0),M=c&&h.get("showNextBtn",!0),A=0,I=u;return"left"===_||"bottom"===_?(w&&(v=[0,0],A+=p),S&&(m=[A,0],A+=p),M&&(y=[I-d,0],I-=p)):(w&&(v=[I-d,0],I-=p),S&&(m=[0,0],A+=p),M&&(y=[I-d,0],I-=p)),x=[A,I],t.get("inverse")&&x.reverse(),{viewRect:o,mainLength:u,orient:r,rotation:l[r],labelRotation:g,labelPosOpt:i,labelAlign:a[r],labelBaseline:s[r],playPosition:v,prevBtnPosition:m,nextBtnPosition:y,axisExtent:x,controlSize:d,controlGap:f}},_position:function(t,e){function i(t){var e=t.position;t.origin=[c[0][0]-e[0],c[1][0]-e[1]]}function n(t){return[[t.x,t.x+t.width],[t.y,t.y+t.height]]}function r(t,e,i,n,r){t[n]+=i[n][r]-e[n][r]}var o=this._mainGroup,a=this._labelGroup,s=t.viewRect;if("vertical"===t.orient){var l=g.create(),u=s.x,h=s.y+s.height;g.translate(l,l,[-u,-h]),g.rotate(l,l,-b/2),g.translate(l,l,[u,h]),s=s.clone(),s.applyTransform(l)}var c=n(s),d=n(o.getBoundingRect()),f=n(a.getBoundingRect()),p=o.position,v=a.position;v[0]=p[0]=c[0][0];var m=t.labelPosOpt;if(isNaN(m)){var y="+"===m?0:1;r(p,d,c,1,y),r(v,f,c,1,1-y)}else{var y=m>=0?0:1;r(p,d,c,1,y),v[1]=p[1]+m}o.attr("position",p),a.attr("position",v),o.rotation=a.rotation=t.rotation,i(o),i(a)},_createAxis:function(t,e){var i=e.getData(),n=e.get("axisType"),r=f.createScaleByModel(e,n),o=i.getDataExtent("value");r.setExtent(o[0],o[1]),this._customizeScale(r,i),r.niceTicks();var a=new c("value",r,t.axisExtent,n);return a.model=e,a},_customizeScale:function(t,e){t.getTicks=function(){return e.mapArray(["value"],function(t){return t})},t.getTicksLabels=function(){return s.map(this.getTicks(),t.getLabel,t)}},_createGroup:function(t){var e=this["_"+t]=new l.Group;return this.group.add(e),e},_renderAxisLine:function(t,e,i,n){var r=i.getExtent();n.get("lineStyle.show")&&e.add(new l.Line({shape:{x1:r[0],y1:0,x2:r[1],y2:0},style:s.extend({lineCap:"round"},n.getModel("lineStyle").getLineStyle()),silent:!0,z2:1}))},_renderAxisTick:function(t,e,i,n){var r=n.getData(),a=i.scale.getTicks();_(a,function(t,a){var s=i.dataToCoord(t),u=r.getItemModel(a),h=u.getModel("itemStyle.normal"),c=u.getModel("itemStyle.emphasis"),d={position:[s,0],onclick:x(this._changeTimeline,this,a)},f=o(u,h,e,d);l.setHoverStyle(f,c.getItemStyle()),u.get("tooltip")?(f.dataIndex=a,f.dataModel=n):f.dataIndex=f.dataModel=null},this)},_renderAxisLabel:function(t,e,i,n){var r=n.getModel("label.normal");if(r.get("show")){var o=n.getData(),a=i.scale.getTicks(),s=f.getFormattedLabels(i,r.get("formatter")),u=i.getLabelInterval();_(a,function(n,r){if(!i.isLabelIgnored(r,u)){var a=o.getItemModel(r),h=a.getModel("label.normal.textStyle"),c=a.getModel("label.emphasis.textStyle"),d=i.dataToCoord(n),f=new l.Text({style:{text:s[r],textAlign:t.labelAlign,textVerticalAlign:t.labelBaseline,textFont:h.getFont(),fill:h.getTextColor()},position:[d,0],rotation:t.labelRotation-t.rotation,onclick:x(this._changeTimeline,this,r),silent:!1});e.add(f),l.setHoverStyle(f,c.getItemStyle())}},this)}},_renderControl:function(t,e,i,n){function o(t,i,o,d){if(t){var f={position:t,origin:[a/2,0],rotation:d?-s:0,rectHover:!0,style:u,onclick:o},p=r(n,i,c,f);e.add(p),l.setHoverStyle(p,h)}}var a=t.controlSize,s=t.rotation,u=n.getModel("controlStyle.normal").getItemStyle(),h=n.getModel("controlStyle.emphasis").getItemStyle(),c=[0,-a/2,a,a],d=n.getPlayState(),f=n.get("inverse",!0);o(t.nextBtnPosition,"controlStyle.nextIcon",x(this._changeTimeline,this,f?"-":"+")),o(t.prevBtnPosition,"controlStyle.prevIcon",x(this._changeTimeline,this,f?"+":"-")),o(t.playPosition,"controlStyle."+(d?"stopIcon":"playIcon"),x(this._handlePlayClick,this,!d),!0)},_renderCurrentPointer:function(t,e,i,n){var r=n.getData(),s=n.getCurrentIndex(),l=r.getItemModel(s).getModel("checkpointStyle"),u=this,h={onCreate:function(t){t.draggable=!0,t.drift=x(u._handlePointerDrag,u),t.ondragend=x(u._handlePointerDragend,u),a(t,s,i,n,!0)},onUpdate:function(t){a(t,s,i,n)}};this._currentPointer=o(l,l,this._mainGroup,{},this._currentPointer,h)},_handlePlayClick:function(t){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:t,from:this.uid})},_handlePointerDrag:function(t,e,i){this._clearTimer(),this._pointerChangeTimeline([i.offsetX,i.offsetY])},_handlePointerDragend:function(t){this._pointerChangeTimeline([t.offsetX,t.offsetY],!0)},_pointerChangeTimeline:function(t,e){var i=this._toAxisCoord(t)[0],n=this._axis,r=v.asc(n.getExtent().slice());i>r[1]&&(i=r[1]),i<r[0]&&(i=r[0]),this._currentPointer.position[0]=i,this._currentPointer.dirty();var o=this._findNearestTick(i),a=this.model;(e||o!==a.getCurrentIndex()&&a.get("realtime"))&&this._changeTimeline(o)},_doPlayStop:function(){function t(){var t=this.model;this._changeTimeline(t.getCurrentIndex()+(t.get("rewind",!0)?-1:1))}this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(x(t,this),this.model.get("playInterval")))},_toAxisCoord:function(t){var e=this._mainGroup.getLocalTransform();return l.applyTransform(t,e,!0)},_findNearestTick:function(t){var e,i=this.model.getData(),n=1/0,r=this._axis;return i.each(["value"],function(i,o){var a=r.dataToCoord(i),s=Math.abs(a-t);n>s&&(n=s,e=o)}),e},_clearTimer:function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},_changeTimeline:function(t){var e=this.model.getCurrentIndex();"+"===t?t=e+1:"-"===t&&(t=e-1),this.api.dispatchAction({type:"timelineChange",currentIndex:t,from:this.uid})}})},function(t,e,i){var n=i(1),r=i(42),o=i(22),a=function(t,e,i,n){r.call(this,t,e,i),this.type=n||"value",this._autoLabelInterval,this.model=null};a.prototype={constructor:a,getLabelInterval:function(){var t=this.model,e=t.getModel("label.normal"),i=e.get("interval");if(null!=i&&"auto"!=i)return i;var i=this._autoLabelInterval;return i||(i=this._autoLabelInterval=o.getAxisLabelInterval(n.map(this.scale.getTicks(),this.dataToCoord,this),o.getFormattedLabels(this,e.get("formatter")),e.getModel("textStyle").getFont(),"horizontal"===t.get("orient"))),i},isLabelIgnored:function(t){if("category"===this.type){var e=this.getLabelInterval();return"function"==typeof e&&!e(t,this.scale.getLabel(t))||t%(e+1)}}},n.inherits(a,r),t.exports=a},function(t,e,i){var n=i(11),r=i(14),o=i(1),a=i(10),s=n.extend({type:"timeline",layoutMode:"box",defaultOption:{zlevel:0,z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{normal:{},emphasis:{}},label:{normal:{textStyle:{color:"#000"}},emphasis:{}},data:[]},init:function(t,e,i){this._data,this._names,this.mergeDefaultAndTheme(t,i),this._initData()},mergeOption:function(t){s.superApply(this,"mergeOption",arguments),this._initData()},setCurrentIndex:function(t){null==t&&(t=this.option.currentIndex);var e=this._data.count();this.option.loop?t=(t%e+e)%e:(t>=e&&(t=e-1),0>t&&(t=0)),this.option.currentIndex=t},getCurrentIndex:function(){return this.option.currentIndex},isIndexMax:function(){return this.getCurrentIndex()>=this._data.count()-1},setPlayState:function(t){this.option.autoPlay=!!t},getPlayState:function(){return!!this.option.autoPlay},_initData:function(){var t=this.option,e=t.data||[],i=t.axisType,n=this._names=[];if("category"===i){var s=[];o.each(e,function(t,e){var i,r=a.getDataItemValue(t);o.isObject(t)?(i=o.clone(t),i.value=e):i=e,s.push(i),o.isString(r)||null!=r&&!isNaN(r)||(r=""),n.push(r+"")}),e=s}var l={category:"ordinal",time:"time"}[i]||"number",u=this._data=new r([{name:"value",type:l}],this);u.initData(e,n)},getData:function(){return this._data},getCategories:function(){return"category"===this.get("axisType")?this._names.slice():void 0}});t.exports=s},function(t,e,i){var n=i(57);t.exports=n.extend({type:"timeline"})},function(t,e,i){function n(t){var e=t.type,i={number:"value",time:"time"};if(i[e]&&(t.axisType=i[e],delete t.type),r(t),o(t,"controlPosition")){var n=t.controlStyle||(t.controlStyle={});o(n,"position")||(n.position=t.controlPosition),"none"!==n.position||o(n,"show")||(n.show=!1,delete n.position),delete t.controlPosition}a.each(t.data||[],function(t){a.isObject(t)&&!a.isArray(t)&&(!o(t,"value")&&o(t,"name")&&(t.value=t.name),r(t))})}function r(t){var e=t.itemStyle||(t.itemStyle={}),i=e.emphasis||(e.emphasis={}),n=t.label||t.label||{},r=n.normal||(n.normal={}),s={normal:1,emphasis:1};a.each(n,function(t,e){s[e]||o(r,e)||(r[e]=t)}),i.label&&!o(n,"emphasis")&&(n.emphasis=i.label,delete i.label)}function o(t,e){return t.hasOwnProperty(e)}var a=i(1);t.exports=function(t){var e=t&&t.timeline;a.isArray(e)||(e=e?[e]:[]),a.each(e,function(t){t&&n(t)})}},function(t,e,i){var n=i(2);n.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(t,e){var i=e.getComponent("timeline");i&&null!=t.currentIndex&&(i.setCurrentIndex(t.currentIndex),!i.get("loop",!0)&&i.isIndexMax()&&i.setPlayState(!1)),e.resetOption("timeline")}),n.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(t,e){var i=e.getComponent("timeline");i&&null!=t.playState&&i.setPlayState(t.playState)})},function(t,e,i){i(11).registerSubTypeDefaulter("timeline",function(){return"slider"})},function(t,e,i){"use strict";function n(t,e,i){this.model=t,this.ecModel=e,this.api=i,this._brushType,this._brushMode}var r=i(25),o=i(1);n.defaultOption={show:!0,type:["rect","polygon","lineX","lineY","keep","clear"],icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:{rect:"",polygon:"",lineX:"",lineY:"",keep:"",clear:""}};var a=n.prototype;a.render=a.updateView=a.updateLayout=function(t,e,i){var n,r,a;e.eachComponent({mainType:"brush"},function(t){n=t.brushType,r=t.brushOption.brushMode||"single",a|=t.areas.length}),this._brushType=n,this._brushMode=r,o.each(t.get("type",!0),function(e){t.setIconStatus(e,("keep"===e?"multiple"===r:"clear"===e?a:e===n)?"emphasis":"normal")})},a.getIcons=function(){var t=this.model,e=t.get("icon",!0),i={};return o.each(t.get("type",!0),function(t){e[t]&&(i[t]=e[t])}),i},a.onclick=function(t,e,i){var e=this.api,n=this._brushType,r=this._brushMode;"clear"===i?e.dispatchAction({type:"brush",areas:[]}):e.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:"keep"===i?n:n===i?!1:i,brushMode:"keep"===i?"multiple"===r?"single":"multiple":r}})},r.register("brush",n),t.exports=n},function(t,e,i){i(352),i(353)},function(t,e,i){function n(t,e,i){var n=t.targetVisuals[e].color;if(!n)return i.slice();var r=n.option.visual.length;if(1>=r||i[0]===i[1])return i.slice();for(var o=(i[1]-i[0])/(r-1),a=i[0],s=[],l=0;r>l&&a<i[1];l++)s.push(a),a+=o;return s.push(i[1]),s}function r(t,e,i,r){var o=n(t,e,i);a.each(o,function(t){for(var i={value:t,valueState:e},n=0,o=0;o<r.length;o++){if(n|="inRange"===r[o].valueState,t<r[o].value)return void r.splice(o,0,i);n&&(r[o].valueState="inRange")}r.push(i)})}var o=i(229),a=i(1),s=i(4),l=[20,140],u=o.extend({type:"visualMap.continuous",defaultOption:{align:"auto",calculable:!1,range:null,realtime:!0,itemHeight:null,itemWidth:null,hoverLink:!0,hoverLinkDataSize:null,hoverLinkOnHandle:!0},optionUpdated:function(t,e){u.superApply(this,"optionUpdated",arguments),this.resetTargetSeries(),this.resetExtent(),this.resetVisual(function(t){t.mappingMethod="linear",t.dataExtent=this.getExtent()}),this._resetRange()},resetItemSize:function(){u.superApply(this,"resetItemSize",arguments);var t=this.itemSize;"horizontal"===this._orient&&t.reverse(),(null==t[0]||isNaN(t[0]))&&(t[0]=l[0]),(null==t[1]||isNaN(t[1]))&&(t[1]=l[1])},_resetRange:function(){var t=this.getExtent(),e=this.option.range;!e||e.auto?(t.auto=1,this.option.range=t):a.isArray(e)&&(e[0]>e[1]&&e.reverse(),e[0]=Math.max(e[0],t[0]),e[1]=Math.min(e[1],t[1]))},completeVisualOption:function(){o.prototype.completeVisualOption.apply(this,arguments),a.each(this.stateList,function(t){var e=this.option.controller[t].symbolSize;e&&e[0]!==e[1]&&(e[0]=0)},this)},setSelected:function(t){this.option.range=t.slice(),this._resetRange()},getSelected:function(){var t=this.getExtent(),e=s.asc((this.get("range")||[]).slice());return e[0]>t[1]&&(e[0]=t[1]),e[1]>t[1]&&(e[1]=t[1]),e[0]<t[0]&&(e[0]=t[0]),e[1]<t[0]&&(e[1]=t[0]),e},getValueState:function(t){var e=this.option.range,i=this.getExtent();return(e[0]<=i[0]||e[0]<=t)&&(e[1]>=i[1]||t<=e[1])?"inRange":"outOfRange"},findTargetDataIndices:function(t){var e=[];return this.eachTargetSeries(function(i){var n=[],r=i.getData();r.each(this.getDataDimension(r),function(e,i){t[0]<=e&&e<=t[1]&&n.push(i)},!0,this),e.push({seriesId:i.id,dataIndex:n})},this),e},getStops:function(t,e){var i=[];return r(this,"outOfRange",this.getExtent(),i),r(this,"inRange",this.option.range.slice(),i),a.each(i,function(t){t.color=e(this,t.value,t.valueState)},this),i}});t.exports=u},function(t,e,i){function n(t,e,i,n){return new u.Polygon({shape:{points:t},draggable:!!i,cursor:e,drift:i,ondragend:n})}function r(t,e){return 0===t?[[0,0],[e,0],[e,-e]]:[[0,0],[e,0],[e,e]]}function o(t,e,i,n){return t?[[0,-y(e,x(i,0))],[b,0],[0,y(e,x(n-i,0))]]:[[0,0],[5,-5],[5,5]]}function a(t,e,i){var n=_/2,r=t.get("hoverLinkDataSize");return r&&(n=v(r,e,i,!0)/2),n}function s(t){return!t.get("realtime")&&t.get("hoverLinkOnHandle")}var l=i(230),u=i(3),h=i(1),c=i(4),d=i(79),f=i(85),p=i(231),g=i(10),v=c.linearMap,m=h.each,y=Math.min,x=Math.max,_=12,b=6,w=l.extend({type:"visualMap.continuous",init:function(){w.superApply(this,"init",arguments),this._shapes={},this._dataInterval=[],this._handleEnds=[],this._orient,this._useHandle,this._hoverLinkDataIndices=[],this._dragging,this._hovering},doRender:function(t,e,i,n){n&&"selectDataRange"===n.type&&n.from===this.uid||this._buildView()},_buildView:function(){this.group.removeAll();var t=this.visualMapModel,e=this.group;this._orient=t.get("orient"),this._useHandle=t.get("calculable"),this._resetInterval(),this._renderBar(e);var i=t.get("text");this._renderEndsText(e,i,0),this._renderEndsText(e,i,1),this._updateView(!0),this.renderBackground(e),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(e)},_renderEndsText:function(t,e,i){if(e){var n=e[1-i];n=null!=n?n+"":"";var r=this.visualMapModel,o=r.get("textGap"),a=r.itemSize,s=this._shapes.barGroup,l=this._applyTransform([a[0]/2,0===i?-o:a[1]+o],s),h=this._applyTransform(0===i?"bottom":"top",s),c=this._orient,d=this.visualMapModel.textStyleModel;this.group.add(new u.Text({style:{x:l[0],y:l[1],textVerticalAlign:"horizontal"===c?"middle":h,textAlign:"horizontal"===c?h:"center",text:n,textFont:d.getFont(),fill:d.getTextColor()}}))}},_renderBar:function(t){var e=this.visualMapModel,i=this._shapes,r=e.itemSize,o=this._orient,a=this._useHandle,s=p.getItemAlign(e,this.api,r),l=i.barGroup=this._createBarGroup(s);l.add(i.outOfRange=n()),l.add(i.inRange=n(null,a?"move":null,h.bind(this._dragHandle,this,"all",!1),h.bind(this._dragHandle,this,"all",!0)));var u=e.textStyleModel.getTextRect(""),c=x(u.width,u.height);a&&(i.handleThumbs=[],i.handleLabels=[],i.handleLabelPoints=[],this._createHandle(l,0,r,c,o,s),this._createHandle(l,1,r,c,o,s)),this._createIndicator(l,r,c,o),t.add(l)},_createHandle:function(t,e,i,o,a){var s=h.bind(this._dragHandle,this,e,!1),l=h.bind(this._dragHandle,this,e,!0),c=n(r(e,o),"move",s,l);c.position[0]=i[0],t.add(c);var d=this.visualMapModel.textStyleModel,f=new u.Text({draggable:!0,drift:s,ondragend:l,style:{x:0,y:0,text:"",textFont:d.getFont(),fill:d.getTextColor()}});this.group.add(f);var p=["horizontal"===a?o/2:1.5*o,"horizontal"===a?0===e?-(1.5*o):1.5*o:0===e?-o/2:o/2],g=this._shapes;g.handleThumbs[e]=c,g.handleLabelPoints[e]=p,g.handleLabels[e]=f},_createIndicator:function(t,e,i,r){var o=n([[0,0]],"move");o.position[0]=e[0],o.attr({invisible:!0,silent:!0}),t.add(o);var a=this.visualMapModel.textStyleModel,s=new u.Text({silent:!0,invisible:!0,style:{x:0,y:0,text:"",textFont:a.getFont(),fill:a.getTextColor()}});this.group.add(s);var l=["horizontal"===r?i/2:b+3,0],h=this._shapes;h.indicator=o,h.indicatorLabel=s,h.indicatorLabelPoint=l},_dragHandle:function(t,e,i,n){if(this._useHandle){if(this._dragging=!e,!e){var r=this._applyTransform([i,n],this._shapes.barGroup,!0);this._updateInterval(t,r[1]),this._updateView()}e===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),e?!this._hovering&&this._clearHoverLinkToSeries():s(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[t],!1)}},_resetInterval:function(){var t=this.visualMapModel,e=this._dataInterval=t.getSelected(),i=t.getExtent(),n=[0,t.itemSize[1]];this._handleEnds=[v(e[0],i,n,!0),v(e[1],i,n,!0)]},_updateInterval:function(t,e){e=e||0;var i=this.visualMapModel,n=this._handleEnds;d(e,n,[0,i.itemSize[1]],"all"===t?"rigid":"push",t);var r=i.getExtent(),o=[0,i.itemSize[1]];this._dataInterval=[v(n[0],o,r,!0),v(n[1],o,r,!0)]},_updateView:function(t){var e=this.visualMapModel,i=e.getExtent(),n=this._shapes,r=[0,e.itemSize[1]],o=t?r:this._handleEnds,a=this._createBarVisual(this._dataInterval,i,o,"inRange"),s=this._createBarVisual(i,i,r,"outOfRange");n.inRange.setStyle({fill:a.barColor,opacity:a.opacity}).setShape("points",a.barPoints),n.outOfRange.setStyle({fill:s.barColor,opacity:s.opacity}).setShape("points",s.barPoints),this._updateHandle(o,a)},_createBarVisual:function(t,e,i,n){var r={forceState:n,convertOpacityToAlpha:!0},o=this._makeColorGradient(t,r),a=[this.getControllerVisual(t[0],"symbolSize",r),this.getControllerVisual(t[1],"symbolSize",r)],s=this._createBarPoints(i,a);return{barColor:new f(0,0,1,1,o),barPoints:s,handlesColor:[o[0].color,o[o.length-1].color]}},_makeColorGradient:function(t,e){var i=100,n=[],r=(t[1]-t[0])/i;n.push({color:this.getControllerVisual(t[0],"color",e),offset:0});for(var o=1;i>o;o++){var a=t[0]+r*o;if(a>t[1])break;n.push({color:this.getControllerVisual(a,"color",e),offset:o/i})}return n.push({color:this.getControllerVisual(t[1],"color",e),offset:1}),n},_createBarPoints:function(t,e){var i=this.visualMapModel.itemSize;return[[i[0]-e[0],t[0]],[i[0],t[0]],[i[0],t[1]],[i[0]-e[1],t[1]]]},_createBarGroup:function(t){var e=this._orient,i=this.visualMapModel.get("inverse");return new u.Group("horizontal"!==e||i?"horizontal"===e&&i?{scale:"bottom"===t?[-1,1]:[1,1],rotation:-Math.PI/2}:"vertical"!==e||i?{scale:"left"===t?[1,1]:[-1,1]}:{scale:"left"===t?[1,-1]:[-1,-1]}:{scale:"bottom"===t?[1,1]:[-1,1],rotation:Math.PI/2})},_updateHandle:function(t,e){if(this._useHandle){var i=this._shapes,n=this.visualMapModel,r=i.handleThumbs,o=i.handleLabels;m([0,1],function(a){var s=r[a];s.setStyle("fill",e.handlesColor[a]),s.position[1]=t[a];var l=u.applyTransform(i.handleLabelPoints[a],u.getTransform(s,this.group));o[a].setStyle({x:l[0],y:l[1],text:n.formatValueText(this._dataInterval[a]),textVerticalAlign:"middle",textAlign:this._applyTransform("horizontal"===this._orient?0===a?"bottom":"top":"left",i.barGroup)})},this)}},_showIndicator:function(t,e,i,n){var r=this.visualMapModel,a=r.getExtent(),s=r.itemSize,l=[0,s[1]],h=v(t,a,l,!0),c=this._shapes,d=c.indicator;if(d){d.position[1]=h,d.attr("invisible",!1),d.setShape("points",o(!!i,n,h,s[1]));var f={convertOpacityToAlpha:!0},p=this.getControllerVisual(t,"color",f);d.setStyle("fill",p);var g=u.applyTransform(c.indicatorLabelPoint,u.getTransform(d,this.group)),m=c.indicatorLabel;m.attr("invisible",!1);var y=this._applyTransform("left",c.barGroup),x=this._orient;m.setStyle({text:(i?i:"")+r.formatValueText(e),textVerticalAlign:"horizontal"===x?y:"middle",textAlign:"horizontal"===x?"center":y,x:g[0],y:g[1]})}},_enableHoverLinkToSeries:function(){var t=this;this._shapes.barGroup.on("mousemove",function(e){if(t._hovering=!0,!t._dragging){var i=t.visualMapModel.itemSize,n=t._applyTransform([e.offsetX,e.offsetY],t._shapes.barGroup,!0,!0);n[1]=y(x(0,n[1]),i[1]),t._doHoverLinkToSeries(n[1],0<=n[0]&&n[0]<=i[0])}}).on("mouseout",function(){t._hovering=!1,!t._dragging&&t._clearHoverLinkToSeries()})},_enableHoverLinkFromSeries:function(){var t=this.api.getZr();this.visualMapModel.option.hoverLink?(t.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),t.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},_doHoverLinkToSeries:function(t,e){var i=this.visualMapModel,n=i.itemSize;if(i.option.hoverLink){var r=[0,n[1]],o=i.getExtent();t=y(x(r[0],t),r[1]);var l=a(i,o,r),u=[t-l,t+l],h=v(t,r,o,!0),c=[v(u[0],r,o,!0),v(u[1],r,o,!0)];u[0]<r[0]&&(c[0]=-(1/0)),u[1]>r[1]&&(c[1]=1/0),e&&(c[0]===-(1/0)?this._showIndicator(h,c[1],"< ",l):c[1]===1/0?this._showIndicator(h,c[0],"> ",l):this._showIndicator(h,h," ",l));var d=this._hoverLinkDataIndices,f=[];(e||s(i))&&(f=this._hoverLinkDataIndices=i.findTargetDataIndices(c));var p=g.compressBatches(d,f);this._dispatchHighDown("downplay",p[0]),this._dispatchHighDown("highlight",p[1])}},_hoverLinkFromSeriesMouseOver:function(t){var e=t.target;if(e&&null!=e.dataIndex){var i=e.dataModel||this.ecModel.getSeriesByIndex(e.seriesIndex),n=i.getData(e.dataType),r=n.getDimension(this.visualMapModel.getDataDimension(n)),o=n.get(r,e.dataIndex,!0);isNaN(o)||this._showIndicator(o,o)}},_hideIndicator:function(){var t=this._shapes;t.indicator&&t.indicator.attr("invisible",!0),t.indicatorLabel&&t.indicatorLabel.attr("invisible",!0)},_clearHoverLinkToSeries:function(){this._hideIndicator();var t=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",t),t.length=0},_clearHoverLinkFromSeries:function(){this._hideIndicator();var t=this.api.getZr();t.off("mouseover",this._hoverLinkFromSeriesMouseOver),t.off("mouseout",this._hideIndicator)},_applyTransform:function(t,e,i,n){var r=u.getTransform(e,n?null:this.group);return u[h.isArray(t)?"applyTransform":"transformDirection"](t,r,i)},_dispatchHighDown:function(t,e){e&&e.length&&this.api.dispatchAction({type:t,batch:e})},dispose:function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},remove:function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()}});t.exports=w},function(t,e,i){function n(t,e){var i=t.inverse;("vertical"===t.orient?!i:i)&&e.reverse()}function r(t){function e(t,i,n){return n=n||0,t.interval[n]<i.interval[n]||t.interval[n]===i.interval[n]&&(+t.close[n]>i.close[n]||e(t,i,1))}t.sort(function(t,i){return e(t,i)?-1:1});for(var i=-(1/0),n=0;n<t.length;n++)for(var r=t[n].interval,o=t[n].close,a=0;2>a;a++)r[a]<i&&(r[a]=i,o[a]=1-a),i=r[a]}var o=i(229),a=i(1),s=i(71),l=o.extend({type:"visualMap.piecewise",defaultOption:{selected:null,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieceList:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0},optionUpdated:function(t,e){l.superApply(this,"optionUpdated",arguments),this._pieceList=[],this.resetTargetSeries(),this.resetExtent();var i=this._mode=this._determineMode();u[this._mode].call(this),this._resetSelected(t,e);var n=this.option.categories;this.resetVisual(function(t,e){"categories"===i?(t.mappingMethod="category",t.categories=a.clone(n)):(t.dataExtent=this.getExtent(),t.mappingMethod="piecewise",t.pieceList=a.map(this._pieceList,function(t){var t=a.clone(t);return"inRange"!==e&&(t.visual=null),t}))})},_resetSelected:function(t,e){var i=this.option,n=this._pieceList,r=(e?i:t).selected||{};if(i.selected=r,a.each(n,function(t,e){var i=this.getSelectedMapKey(t);i in r||(r[i]=!0)},this),"single"===i.selectedMode){var o=!1;a.each(n,function(t,e){var i=this.getSelectedMapKey(t);r[i]&&(o?r[i]=!1:o=!0)},this)}},getSelectedMapKey:function(t){return"categories"===this._mode?t.value+"":t.index+""},getPieceList:function(){return this._pieceList},_determineMode:function(){var t=this.option;return t.pieces&&t.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},setSelected:function(t){this.option.selected=a.clone(t)},getValueState:function(t){var e=s.findPieceIndex(t,this._pieceList);return null!=e&&this.option.selected[this.getSelectedMapKey(this._pieceList[e])]?"inRange":"outOfRange"},findTargetDataIndices:function(t){var e=[];return this.eachTargetSeries(function(i){var n=[],r=i.getData();r.each(this.getDataDimension(r),function(e,i){var r=s.findPieceIndex(e,this._pieceList);r===t&&n.push(i)},!0,this),e.push({seriesId:i.id,dataIndex:n})},this),e},getRepresentValue:function(t){var e;if(this.isCategory())e=t.value;else if(null!=t.value)e=t.value;else{var i=t.interval||[];e=(i[0]+i[1])/2}return e},getStops:function(t,e){function i(t){n.push(t),t.color=e(r,r.getRepresentValue(t),t.valueState)}var n=[],r=this,o=-(1/0);return a.each(this._pieceList,function(t){var e=t.interval;e&&(e[0]>o&&i({interval:[o,e[0]],valueState:"outOfRange"}),i({interval:e.slice(),valueState:this.getValueState((e[0]+e[1])/2)}),o=e[1])},this),n}}),u={splitNumber:function(){var t=this.option,e=this._pieceList,i=t.precision,n=this.getExtent(),o=t.splitNumber;o=Math.max(parseInt(o,10),1),t.splitNumber=o;for(var s=(n[1]-n[0])/o;+s.toFixed(i)!==s&&5>i;)i++;t.precision=i,s=+s.toFixed(i);for(var l=0,u=n[0];o>l;l++,u+=s){var h=l===o-1?n[1]:u+s;e.push({index:l,interval:[u,h],close:[1,1]})}r(e),a.each(e,function(t){t.text=this.formatValueText(t.interval)},this)},categories:function(){var t=this.option;a.each(t.categories,function(t){this._pieceList.push({text:this.formatValueText(t,!0),value:t})},this),n(t,this._pieceList)},pieces:function(){var t=this.option,e=this._pieceList;a.each(t.pieces,function(t,i){a.isObject(t)||(t={value:t});var n={text:"",index:i};if(null!=t.label&&(n.text=t.label),t.hasOwnProperty("value")){var r=n.value=t.value;n.interval=[r,r],n.close=[1,1]}else{for(var o=n.interval=[],l=n.close=[0,0],u=[1,0,1],h=[-(1/0),1/0],c=[],d=0;2>d;d++){for(var f=[["gte","gt","min"],["lte","lt","max"]][d],p=0;3>p&&null==o[d];p++)o[d]=t[f[p]],l[d]=u[p],c[d]=2===p;null==o[d]&&(o[d]=h[d])}c[0]&&o[1]===1/0&&(l[0]=0),c[1]&&o[0]===-(1/0)&&(l[1]=0),o[0]===o[1]&&l[0]&&l[1]&&(n.value=o[0])}n.visual=s.retrieveVisuals(t),e.push(n)},this),n(t,e),r(e),a.each(e,function(t){var e=t.close,i=[["<",""][e[1]],[">",""][e[0]]];t.text=t.text||this.formatValueText(null!=t.value?t.value:t.interval,!1,i)},this)}};t.exports=l},function(t,e,i){var n=i(230),r=i(1),o=i(3),a=i(26),s=i(13),l=i(231),u=n.extend({type:"visualMap.piecewise",doRender:function(){function t(t){var a=t.piece,s=new o.Group;s.onclick=r.bind(this._onItemClick,this,a),this._enableHoverLink(s,t.indexInModelPieceList);var d=i.getRepresentValue(a);if(this._createItemSymbol(s,d,[0,0,c[0],c[1]]),f){var p=this.visualMapModel.getValueState(d);s.add(new o.Text({style:{x:"right"===h?-n:c[0]+n,y:c[1]/2,text:a.text,textVerticalAlign:"middle",textAlign:h,textFont:l,fill:u,opacity:"outOfRange"===p?.5:1}}))}e.add(s)}var e=this.group;e.removeAll();var i=this.visualMapModel,n=i.get("textGap"),a=i.textStyleModel,l=a.getFont(),u=a.getTextColor(),h=this._getItemAlign(),c=i.itemSize,d=this._getViewData(),f=!d.endsText,p=!f;p&&this._renderEndsText(e,d.endsText[0],c),r.each(d.viewPieceList,t,this),p&&this._renderEndsText(e,d.endsText[1],c),s.box(i.get("orient"),e,i.get("itemGap")),this.renderBackground(e),this.positionGroup(e)},_enableHoverLink:function(t,e){function i(t){var i=this.visualMapModel;i.option.hoverLink&&this.api.dispatchAction({type:t,batch:i.findTargetDataIndices(e)})}t.on("mouseover",r.bind(i,this,"highlight")).on("mouseout",r.bind(i,this,"downplay"))},_getItemAlign:function(){var t=this.visualMapModel,e=t.option;if("vertical"===e.orient)return l.getItemAlign(t,this.api,t.itemSize);var i=e.align;return i&&"auto"!==i||(i="left"),i},_renderEndsText:function(t,e,i){if(e){var n=new o.Group,r=this.visualMapModel.textStyleModel;n.add(new o.Text({style:{x:i[0]/2,y:i[1]/2,textVerticalAlign:"middle",textAlign:"center",text:e,textFont:r.getFont(),fill:r.getTextColor()}})),t.add(n)}},_getViewData:function(){var t=this.visualMapModel,e=r.map(t.getPieceList(),function(t,e){return{piece:t,indexInModelPieceList:e}}),i=t.get("text"),n=t.get("orient"),o=t.get("inverse");return("horizontal"===n?o:!o)?e.reverse():i&&(i=i.slice().reverse()),{viewPieceList:e,endsText:i}},_createItemSymbol:function(t,e,i){t.add(a.createSymbol(this.getControllerVisual(e,"symbol"),i[0],i[1],i[2],i[3],this.getControllerVisual(e,"color")))},_onItemClick:function(t){var e=this.visualMapModel,i=e.option,n=r.clone(i.selected),o=e.getSelectedMapKey(t);"single"===i.selectedMode?(n[o]=!0,r.each(n,function(t,e){n[e]=e===o})):n[o]=!n[o],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:n})}});t.exports=u},function(t,e,i){i(2).registerPreprocessor(i(232)),i(233),i(234),i(348),i(349),i(235)},function(t,e,i){i(2).registerPreprocessor(i(232)),i(233),i(234),i(350),i(351),i(235)},function(t,e,i){function n(t,e,i,n,r){s.call(this,t),this.map=e,this._nameCoordMap={},this.loadGeoJson(i,n,r)}var r=i(359),o=i(1),a=i(7),s=i(236),l=[i(357),i(358),i(356)];n.prototype={constructor:n,type:"geo",dimensions:["lng","lat"],containCoord:function(t){for(var e=this.regions,i=0;i<e.length;i++)if(e[i].contain(t))return!0;return!1},loadGeoJson:function(t,e,i){try{this.regions=t?r(t):[]}catch(n){throw"Invalid geoJson format\n"+n}e=e||{},i=i||{};for(var a=this.regions,s={},u=0;u<a.length;u++){var h=a[u].name;h=i[h]||h,a[u].name=h,s[h]=a[u],this.addGeoCoord(h,a[u].center);var c=e[h];c&&a[u].transformTo(c.left,c.top,c.width,c.height)}this._regionsMap=s,this._rect=null,o.each(l,function(t){t(this)},this)},transformTo:function(t,e,i,n){var r=this.getBoundingRect();r=r.clone(),r.y=-r.y-r.height;var o=this._viewTransform;o.transform=r.calculateTransform(new a(t,e,i,n)),o.decomposeTransform();var s=o.scale;s[1]=-s[1],o.updateTransform(),this._updateTransform()},getRegion:function(t){return this._regionsMap[t]},getRegionByCoord:function(t){for(var e=this.regions,i=0;i<e.length;i++)if(e[i].contain(t))return e[i]},addGeoCoord:function(t,e){this._nameCoordMap[t]=e},getGeoCoord:function(t){return this._nameCoordMap[t]},getBoundingRect:function(){if(this._rect)return this._rect;for(var t,e=this.regions,i=0;i<e.length;i++){var n=e[i].getBoundingRect();t=t||n.clone(),t.union(n)}return this._rect=t||new a(0,0,0,0)},dataToPoints:function(t){var e=[];return t.mapArray(["lng","lat"],function(t,i){return e[0]=t,e[1]=i,this.dataToPoint(e)},this)},dataToPoint:function(t){return"string"==typeof t&&(t=this.getGeoCoord(t)),t?s.prototype.dataToPoint.call(this,t):void 0}},o.mixin(n,s),t.exports=n},function(t,e,i){"use strict";var n=i(10),r=i(11),o=i(8),a=i(1),s=i(66),l=i(170),u=r.extend({type:"geo",coordinateSystem:null,layoutMode:"box",init:function(t){r.prototype.init.apply(this,arguments),n.defaultEmphasis(t.label,["position","show","textStyle","distance","formatter"])},optionUpdated:function(){var t=this.option,e=this;t.regions=l.getFilledRegions(t.regions,t.map),this._optionModelMap=a.reduce(t.regions||[],function(t,i){return i.name&&(t[i.name]=new o(i,e)),t},{}),this.updateSelectedMap(t.regions)},defaultOption:{zlevel:0,z:0,show:!0,left:"center",top:"center",aspectScale:.75,silent:!1,map:"",center:null,zoom:1,scaleLimit:null,label:{normal:{show:!1,textStyle:{color:"#000"}},emphasis:{show:!0,textStyle:{color:"rgb(100,0,0)"}}},itemStyle:{normal:{borderWidth:.5,borderColor:"#444",color:"#eee"},emphasis:{color:"rgba(255,215,0,0.8)"}},regions:[]},getRegionModel:function(t){return this._optionModelMap[t]},getFormattedLabel:function(t,e){var i=this.get("label."+e+".formatter"),n={name:t};return"function"==typeof i?(n.status=e,i(n)):"string"==typeof i?i.replace("{a}",n.seriesName):void 0},setZoom:function(t){this.option.zoom=t},setCenter:function(t){this.option.center=t}});a.mixin(u,s),t.exports=u},function(t,e,i){var n=i(1),r={Russia:[100,60],"United States of America":[-99,38]};t.exports=function(t){n.each(t.regions,function(t){var e=r[t.name];if(e){var i=t.center;i[0]=e[0],i[1]=e[1]}})}},function(t,e,i){for(var n=i(237),r=[126,25],o=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],a=0;a<o.length;a++)for(var s=0;s<o[a].length;s++)o[a][s][0]/=10.5,o[a][s][1]/=-14,o[a][s][0]+=r[0],o[a][s][1]+=r[1];t.exports=function(t){"china"===t.map&&t.regions.push(new n("",o,r))}},function(t,e,i){var n=i(1),r={"":[32,80],"":[0,-10],"":[10,5],"":[-10,10],"":[5,5]};t.exports=function(t){n.each(t.regions,function(t){var e=r[t.name];if(e){var i=t.center;i[0]+=e[0]/10.5,i[1]+=-e[1]/14}})}},function(t,e,i){function n(t){if(!t.UTF8Encoding)return t;for(var e=t.features,i=0;i<e.length;i++)for(var n=e[i],o=n.geometry,a=o.coordinates,s=o.encodeOffsets,l=0;l<a.length;l++){var u=a[l];if("Polygon"===o.type)a[l]=r(u,s[l]);else if("MultiPolygon"===o.type)for(var h=0;h<u.length;h++){var c=u[h];u[h]=r(c,s[l][h])}}return t.UTF8Encoding=!1,t}function r(t,e){for(var i=[],n=e[0],r=e[1],o=0;o<t.length;o+=2){var a=t.charCodeAt(o)-64,s=t.charCodeAt(o+1)-64;a=a>>1^-(1&a),s=s>>1^-(1&s),a+=n,s+=r,n=a,r=s,i.push([a/1024,s/1024])}return i}function o(t){for(var e=[],i=0;i<t.length;i++)for(var n=0;n<t[i].length;n++)e.push(t[i][n]);return e}var a=i(1),s=i(237);t.exports=function(t){return n(t),a.map(a.filter(t.features,function(t){return t.geometry&&t.properties}),function(t){var e=t.properties,i=t.geometry,n=i.coordinates;return"MultiPolygon"===i.type&&(n=o(n)),new s(e.name,n,e.cp)})}},function(t,e,i){function n(t,e){return e.type||(e.data?"category":"value")}var r=i(11),o=i(1),a=i(31),s=i(52),l=i(4),u=r.extend({type:"baseParallelAxis",axis:null,activeIntervals:[],getAreaSelectStyle:function(){return a([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]]).call(this.getModel("areaSelectStyle"))},setActiveIntervals:function(t){var e=this.activeIntervals=o.clone(t);if(e)for(var i=e.length-1;i>=0;i--)l.asc(e[i])},getActiveState:function(t){var e=this.activeIntervals;if(!e.length)return"normal";if(null==t)return"inactive";for(var i=0,n=e.length;n>i;i++)if(e[i][0]<=t&&t<=e[i][1])return"active";return"inactive"}}),h={type:"value",dim:null,parallelIndex:null,areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};o.merge(u.prototype,i(51)),s("parallel",u,n,h),t.exports=u},function(t,e,i){function n(t,e,i){this._axesMap={},this._axesLayout={},this.dimensions=t.dimensions,this._rect,this._model=t,this._init(t,e,i)}var r=i(13),o=i(22),a=i(1),s=i(362),l=i(3),u=i(19),h=a.each,c=Math.PI;n.prototype={type:"parallel",constructor:n,_init:function(t,e,i){var n=t.dimensions,r=t.parallelAxisIndex;h(n,function(t,i){var n=r[i],a=e.getComponent("parallelAxis",n),l=this._axesMap[t]=new s(t,o.createScaleByModel(a),[0,0],a.get("type"),n),u="category"===l.type;l.onBand=u&&a.get("boundaryGap"),l.inverse=a.get("inverse"),a.axis=l,l.model=a},this)},update:function(t,e){this._updateAxesFromSeries(this._model,t)},_updateAxesFromSeries:function(t,e){e.eachSeries(function(i){if(t.contains(i,e)){var n=i.getData();h(this.dimensions,function(t){var e=this._axesMap[t];e.scale.unionExtent(n.getDataExtent(t)),o.niceScaleExtent(e,e.model)},this)}},this)},resize:function(t,e){this._rect=r.getLayoutRect(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()}),this._layoutAxes(t)},getRect:function(){return this._rect},_layoutAxes:function(t){var e=this._rect,i=t.get("layout"),n=this._axesMap,r=this.dimensions,o=[e.width,e.height],a="horizontal"===i?0:1,s=o[a],l=o[1-a],d=[0,l];h(n,function(t){var e=t.inverse?1:0;t.setExtent(d[e],d[1-e])});var f,p=t.get("axisExpandable"),g=t.get("axisExpandWidth"),v=t.get("axisExpandCenter"),m=t.get("axisExpandCount")||0;if(null!=v){var y=Math.max(0,Math.floor(v-(m-1)/2)),x=y+m-1;x>=r.length&&(x=r.length-1,y=Math.max(0,Math.floor(x-m+1))),f=[y,x]}var _=p&&f&&g?function(t,e,i){var n,r=f[1]-f[0],o=(e-g*r)/(i-1-r);return n=t<f[0]?(t-1)*o:t<=f[1]?f[0]*o+(t-f[0])*g:t===i-1?e:f[0]*o+r*g+(t-f[1])*o,{position:n,axisNameAvailableWidth:f[0]<t&&t<f[1]?g:o}}:function(t,e,i){var n=e/(i-1);return{position:n*t,axisNameAvailableWidth:n}};h(r,function(t,n){var o=_(n,s,r.length),a={horizontal:{x:o.position,y:l},vertical:{x:0,y:o.position}},h={horizontal:c/2,vertical:0},d=[a[i].x+e.x,a[i].y+e.y],p=h[i],g=u.create();u.rotate(g,g,p),u.translate(g,g,d),this._axesLayout[t]={position:d,rotation:p,transform:g,axisNameAvailableWidth:o.axisNameAvailableWidth,tickDirection:1,labelDirection:1,axisExpandWindow:f}},this)},getAxis:function(t){return this._axesMap[t]},dataToPoint:function(t,e){return this.axisCoordToPoint(this._axesMap[e].dataToCoord(t),e)},eachActiveState:function(t,e,i){for(var n=this.dimensions,r=this._axesMap,o=this.hasAxisbrushed(),a=0,s=t.count();s>a;a++){var l,u=t.getValues(n,a);if(o){l="active";for(var h=0,c=n.length;c>h;h++){var d=n[h],f=r[d].model.getActiveState(u[h],h);if("inactive"===f){l="inactive";break}}}else l="normal";e.call(i,l,a)}},hasAxisbrushed:function(){for(var t=this.dimensions,e=this._axesMap,i=!1,n=0,r=t.length;r>n;n++)"normal"!==e[t[n]].model.getActiveState()&&(i=!0);return i},axisCoordToPoint:function(t,e){var i=this._axesLayout[e];return l.applyTransform([t,0],i.transform)},getAxisLayout:function(t){return a.clone(this._axesLayout[t])},findClosestAxisDim:function(t){var e,i=1/0;return a.each(this._axesLayout,function(n,r){var o=l.applyTransform(t,n.transform,!0),a=this._axesMap[r].getExtent();if(!(o[0]<a[0]||o[0]>a[1])){var s=Math.abs(o[1]);i>s&&(i=s,e=r)}},this),e}},t.exports=n},function(t,e,i){var n=i(1),r=i(42),o=function(t,e,i,n,o){r.call(this,t,e,i),this.type=n||"value",this.axisIndex=o};o.prototype={constructor:o,model:null},n.inherits(o,r),t.exports=o},function(t,e,i){var n=i(1),r=i(11);i(360),r.extend({type:"parallel",dependencies:["parallelAxis"],coordinateSystem:null,dimensions:null,parallelAxisIndex:null,layoutMode:"box",defaultOption:{zlevel:0,z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,parallelAxisDefault:null},init:function(){r.prototype.init.apply(this,arguments),this.mergeOption({})},mergeOption:function(t){var e=this.option;t&&n.merge(e,t,!0),this._initDimensions()},contains:function(t,e){var i=t.get("parallelIndex");return null!=i&&e.getComponent("parallel",i)===this},setAxisExpand:function(t){n.each(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth"],function(e){t.hasOwnProperty(e)&&(this.option[e]=t[e])},this)},_initDimensions:function(){var t=this.dimensions=[],e=this.parallelAxisIndex=[],i=n.filter(this.dependentModels.parallelAxis,function(t){return t.get("parallelIndex")===this.componentIndex});n.each(i,function(i){t.push("dim"+i.get("dim")),e.push(i.componentIndex)})}})},function(t,e,i){function n(t){if(!t.parallel){var e=!1;o.each(t.series,function(t){t&&"parallel"===t.type&&(e=!0)}),e&&(t.parallel=[{}])}}function r(t){var e=a.normalizeToArray(t.parallelAxis);o.each(e,function(e){if(o.isObject(e)){var i=e.parallelIndex||0,n=a.normalizeToArray(t.parallel)[i];n&&n.parallelAxisDefault&&o.merge(e,n.parallelAxisDefault,!1)}})}var o=i(1),a=i(10);t.exports=function(t){n(t),r(t)}},function(t,e,i){"use strict";function n(t,e){e=e||[0,360],o.call(this,"angle",t,e),this.type="category"}var r=i(1),o=i(42);n.prototype={constructor:n,dataToAngle:o.prototype.dataToCoord,angleToData:o.prototype.coordToData},r.inherits(n,o),t.exports=n},function(t,e,i){"use strict";function n(t,e){return e.type||(e.data?"category":"value")}var r=i(1),o=i(11),a=i(52),s=o.extend({type:"polarAxis",axis:null});r.merge(s.prototype,i(51));var l={angle:{polarIndex:0,startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:!1}},radius:{polarIndex:0,splitNumber:5}};a("angle",s,n,l.angle),a("radius",s,n,l.radius)},function(t,e,i){"use strict";var n=i(369),r=i(365),o=function(t){this.name=t||"",this.cx=0,this.cy=0,this._radiusAxis=new n,this._angleAxis=new r};o.prototype={constructor:o,type:"polar",dimensions:["radius","angle"],containPoint:function(t){var e=this.pointToCoord(t);return this._radiusAxis.contain(e[0])&&this._angleAxis.contain(e[1])},containData:function(t){return this._radiusAxis.containData(t[0])&&this._angleAxis.containData(t[1])},getAxis:function(t){return this["_"+t+"Axis"]},getAxesByScale:function(t){var e=[],i=this._angleAxis,n=this._radiusAxis;return i.scale.type===t&&e.push(i),n.scale.type===t&&e.push(n),e},getAngleAxis:function(){return this._angleAxis},getRadiusAxis:function(){return this._radiusAxis},getOtherAxis:function(t){var e=this._angleAxis;return t===e?this._radiusAxis:e},getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},dataToPoints:function(t){return t.mapArray(this.dimensions,function(t,e){return this.dataToPoint([t,e])},this)},dataToPoint:function(t,e){return this.coordToPoint([this._radiusAxis.dataToRadius(t[0],e),this._angleAxis.dataToAngle(t[1],e)])},pointToData:function(t,e){var i=this.pointToCoord(t);return[this._radiusAxis.radiusToData(i[0],e),this._angleAxis.angleToData(i[1],e)]},pointToCoord:function(t){var e=t[0]-this.cx,i=t[1]-this.cy,n=this.getAngleAxis(),r=n.getExtent(),o=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);n.inverse?o=a-360:a=o+360;var s=Math.sqrt(e*e+i*i);e/=s,i/=s;for(var l=Math.atan2(-i,e)/Math.PI*180,u=o>l?1:-1;o>l||l>a;)l+=360*u;return[s,l]},coordToPoint:function(t){var e=t[0],i=t[1]/180*Math.PI,n=Math.cos(i)*e+this.cx,r=-Math.sin(i)*e+this.cy;return[n,r]}},t.exports=o},function(t,e,i){"use strict";i(366),i(2).extendComponentModel({type:"polar",dependencies:["polarAxis","angleAxis"],coordinateSystem:null,findAxisModel:function(t){var e,i=this.ecModel;return i.eachComponent(t,function(t){i.getComponent("polar",t.getShallow("polarIndex"))===this&&(e=t)},this),e},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"80%"}})},function(t,e,i){"use strict";function n(t,e){o.call(this,"radius",t,e),this.type="category"}var r=i(1),o=i(42);n.prototype={constructor:n,dataToRadius:o.prototype.dataToCoord,radiusToData:o.prototype.coordToData},r.inherits(n,o),t.exports=n},function(t,e,i){function n(t,e,i){o.call(this,t,e,i),this.type="value",this.angle=0,this.name="",this.model}var r=i(1),o=i(42);r.inherits(n,o),t.exports=n},function(t,e,i){function n(t,e,i){this._model=t,this.dimensions=[],this._indicatorAxes=r.map(t.getIndicatorModels(),function(t,e){var i="indicator_"+e,n=new o(i,new a);return n.name=t.get("name"),n.model=t,t.axis=n,this.dimensions.push(i),n},this),this.resize(t,i),this.cx,this.cy,this.r,this.startAngle}var r=i(1),o=i(370),a=i(38),s=i(4),l=i(22);n.prototype.getIndicatorAxes=function(){return this._indicatorAxes},n.prototype.dataToPoint=function(t,e){var i=this._indicatorAxes[e];return this.coordToPoint(i.dataToCoord(t),e)},n.prototype.coordToPoint=function(t,e){var i=this._indicatorAxes[e],n=i.angle,r=this.cx+t*Math.cos(n),o=this.cy-t*Math.sin(n);return[r,o]},n.prototype.pointToData=function(t){var e=t[0]-this.cx,i=t[1]-this.cy,n=Math.sqrt(e*e+i*i);e/=n,i/=n;for(var r,o=Math.atan2(-i,e),a=1/0,s=-1,l=0;l<this._indicatorAxes.length;l++){var u=this._indicatorAxes[l],h=Math.abs(o-u.angle);a>h&&(r=u,s=l,a=h)}return[s,+(r&&r.coodToData(n))]},n.prototype.resize=function(t,e){var i=t.get("center"),n=e.getWidth(),o=e.getHeight(),a=Math.min(n,o)/2;this.cx=s.parsePercent(i[0],n),this.cy=s.parsePercent(i[1],o),this.startAngle=t.get("startAngle")*Math.PI/180,this.r=s.parsePercent(t.get("radius"),a),r.each(this._indicatorAxes,function(t,e){t.setExtent(0,this.r);var i=this.startAngle+e*Math.PI*2/this._indicatorAxes.length;i=Math.atan2(Math.sin(i),Math.cos(i)),t.angle=i},this)},n.prototype.update=function(t,e){function i(t){var e=Math.pow(10,Math.floor(Math.log(t)/Math.LN10)),i=t/e;return 2===i?i=5:i*=2,i*e}var n=this._indicatorAxes,o=this._model;r.each(n,function(t){t.scale.setExtent(1/0,-(1/0))}),t.eachSeriesByType("radar",function(e,i){if("radar"===e.get("coordinateSystem")&&t.getComponent("radar",e.get("radarIndex"))===o){var a=e.getData();r.each(n,function(t){t.scale.unionExtent(a.getDataExtent(t.dim))})}},this);var a=o.get("splitNumber");r.each(n,function(t,e){var n=l.getScaleExtent(t,t.model);l.niceScaleExtent(t,t.model);var r=t.model,o=t.scale,u=r.get("min"),h=r.get("max"),c=o.getInterval();if(null!=u&&null!=h)o.setInterval((h-u)/a);else if(null!=u){var d;do d=u+c*a,o.setExtent(+u,d),o.setInterval(c),c=i(c);while(d<n[1]&&isFinite(d)&&isFinite(n[1]))}else if(null!=h){var f;do f=h-c*a,o.setExtent(f,+h),o.setInterval(c),c=i(c);while(f>n[0]&&isFinite(f)&&isFinite(n[0]))}else{var p=o.getTicks().length-1;p>a&&(c=i(c));var g=Math.round((n[0]+n[1])/2/c)*c,v=Math.round(a/2);o.setExtent(s.round(g-v*c),s.round(g+(a-v)*c)),o.setInterval(c)}})},n.dimensions=[],n.create=function(t,e){var i=[];return t.eachComponent("radar",function(r){var o=new n(r,t,e);i.push(o),r.coordinateSystem=o}),t.eachSeriesByType("radar",function(t){"radar"===t.get("coordinateSystem")&&(t.coordinateSystem=i[t.get("radarIndex")||0])}),i},i(23).register("radar",n),t.exports=n},function(t,e,i){function n(t,e){return s.defaults({show:e},t)}var r=i(80),o=r.valueAxis,a=i(8),s=i(1),l=i(51),u=i(2).extendComponentModel({type:"radar",optionUpdated:function(){var t=this.get("boundaryGap"),e=this.get("splitNumber"),i=this.get("scale"),n=this.get("axisLine"),r=this.get("axisTick"),o=this.get("axisLabel"),u=this.get("name.textStyle"),h=this.get("name.show"),c=this.get("name.formatter"),d=this.get("nameGap"),f=s.map(this.get("indicator")||[],function(f){return null!=f.max&&f.max>0?f.min=0:null!=f.min&&f.min<0&&(f.max=0),f=s.merge(s.clone(f),{boundaryGap:t,splitNumber:e,scale:i,axisLine:n,axisTick:r,axisLabel:o,name:f.text,nameLocation:"end",nameGap:d,nameTextStyle:u},!1),h||(f.name=""),"string"==typeof c?f.name=c.replace("{value}",f.name):"function"==typeof c&&(f.name=c(f.name,f)),s.extend(new a(f,null,this.ecModel),l)},this);this.getIndicatorModels=function(){return f}},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"75%",startAngle:90,name:{show:!0},boundaryGap:[0,0],splitNumber:5,nameGap:15,scale:!1,shape:"polygon",axisLine:s.merge({lineStyle:{color:"#bbb"}},o.axisLine),axisLabel:n(o.axisLabel,!1),axisTick:n(o.axisTick,!1),splitLine:n(o.splitLine,!0),splitArea:n(o.splitArea,!0),indicator:[]}});t.exports=u},function(t,e,i){function n(t,e){return e.type||(e.data?"category":"value")}var r=i(11),o=i(52),a=i(1),s=r.extend({type:"singleAxis",layoutMode:"box",axis:null,coordinateSystem:null}),l={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:2,type:"solid"}},axisTick:{show:!0,length:6,lineStyle:{width:2}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}};a.merge(s.prototype,i(51)),o("single",s,n,l),t.exports=s},function(t,e,i){function n(t,e,i){this.dimension="x",this.dimensions=["x"],this._axis=null,this._rect,this._init(t,e,i),this._model=t}var r=i(375),o=i(22),a=i(13);n.prototype={type:"singleAxis",constructor:n,_init:function(t,e,i){var n=this.dimension,a=new r(n,o.createScaleByModel(t),[0,0],t.get("type"),t.get("position")),s="category"===a.type;a.onBand=s&&t.get("boundaryGap"),a.inverse=t.get("inverse"),a.orient=t.get("orient"),t.axis=a,a.model=t,this._axis=a},update:function(t,e){this._updateAxisFromSeries(t)},_updateAxisFromSeries:function(t){t.eachSeries(function(t){var e=t.getData(),i=this.dimension;this._axis.scale.unionExtent(e.getDataExtent(t.coordDimToDataDim(i))),o.niceScaleExtent(this._axis,this._axis.model)},this)},resize:function(t,e){this._rect=a.getLayoutRect({left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")},{width:e.getWidth(),height:e.getHeight()}),this._adjustAxis()},getRect:function(){return this._rect},_adjustAxis:function(){var t=this._rect,e=this._axis,i=e.isHorizontal(),n=i?[0,t.width]:[0,t.height],r=e.reverse?1:0;e.setExtent(n[r],n[1-r]),this._updateAxisTransform(e,i?t.x:t.y)},_updateAxisTransform:function(t,e){var i=t.getExtent(),n=i[0]+i[1],r=t.isHorizontal();t.toGlobalCoord=r?function(t){return t+e}:function(t){return n-t+e},t.toLocalCoord=r?function(t){return t-e}:function(t){return n-t+e}},getAxis:function(){return this._axis},getBaseAxis:function(){return this._axis},containPoint:function(t){var e=this.getRect(),i=this.getAxis(),n=i.orient;return"horizontal"===n?i.contain(i.toLocalCoord(t[0]))&&t[1]>=e.y&&t[1]<=e.y+e.height:i.contain(i.toLocalCoord(t[1]))&&t[0]>=e.y&&t[0]<=e.y+e.height},pointToData:function(t){var e=this.getAxis();return[e.coordToData(e.toLocalCoord(t["horizontal"===e.orient?0:1]))]},dataToPoint:function(t){var e=this.getAxis(),i=this.getRect(),n=[],r="horizontal"===e.orient?0:1;return n[r]=e.toGlobalCoord(e.dataToCoord(+t)),n[1-r]=0===r?i.y+i.height/2:i.x+i.width/2,n}},t.exports=n},function(t,e,i){var n=i(1),r=i(42),o=i(22),a=function(t,e,i,n,o){r.call(this,t,e,i),this.type=n||"value",this.position=o||"bottom",this.orient=null,this._labelInterval=null};a.prototype={constructor:a,model:null,isHorizontal:function(){var t=this.position;return"top"===t||"bottom"===t},getLabelInterval:function(){var t=this._labelInterval;if(!t){var e=this.model,i=e.getModel("axisLabel"),r=i.get("interval");if("category"!==this.type||"auto"!==r)return t=this._labelInterval="auto"===r?0:r;t=this._labelInterval=o.getAxisLabelInterval(n.map(this.scale.getTicks(),this.dataToCoord,this),e.getFormattedLabels(),i.getModel("textStyle").getFont(),this.isHorizontal())}return t},toGlobalCoord:null,toLocalCoord:null},n.inherits(a,r),t.exports=a},function(t,e,i){function n(t,e){var i=[];return t.eachComponent("singleAxis",function(n,o){var a=new r(n,t,e);a.name="single_"+o,a.resize(n,e),n.coordinateSystem=a,i.push(a)}),t.eachSeries(function(e){if("singleAxis"===e.get("coordinateSystem")){var i=e.get("singleAxisIndex")||0,n=t.getComponent("singleAxis",i);e.coordinateSystem=n.coordinateSystem}}),i}var r=i(374);i(23).register("single",{create:n,dimensions:r.prototype.dimensions})},function(t,e,i){"use strict";function n(t,e){this.id=null==t?"":t,this.inEdges=[],this.outEdges=[],this.edges=[],this.hostGraph,this.dataIndex=null==e?-1:e}function r(t,e,i){this.node1=t,this.node2=e,this.dataIndex=null==i?-1:i}var o=i(1),a=function(t){this._directed=t||!1,this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this.data,this.edgeData},s=a.prototype;s.type="graph",s.isDirected=function(){return this._directed},s.addNode=function(t,e){t=t||""+e;var i=this._nodesMap;if(!i[t]){var r=new n(t,e);return r.hostGraph=this,this.nodes.push(r),i[t]=r,r}},s.getNodeByIndex=function(t){var e=this.data.getRawIndex(t);return this.nodes[e]},s.getNodeById=function(t){return this._nodesMap[t]},s.addEdge=function(t,e,i){var o=this._nodesMap,a=this._edgesMap;if("number"==typeof t&&(t=this.nodes[t]),"number"==typeof e&&(e=this.nodes[e]),t instanceof n||(t=o[t]),e instanceof n||(e=o[e]),t&&e){var s=t.id+"-"+e.id;if(!a[s]){var l=new r(t,e,i);return l.hostGraph=this,this._directed&&(t.outEdges.push(l),e.inEdges.push(l)),t.edges.push(l),t!==e&&e.edges.push(l),this.edges.push(l),a[s]=l,l}}},s.getEdgeByIndex=function(t){var e=this.edgeData.getRawIndex(t);return this.edges[e]},s.getEdge=function(t,e){t instanceof n&&(t=t.id),e instanceof n&&(e=e.id);var i=this._edgesMap;return this._directed?i[t+"-"+e]:i[t+"-"+e]||i[e+"-"+t]},s.eachNode=function(t,e){for(var i=this.nodes,n=i.length,r=0;n>r;r++)i[r].dataIndex>=0&&t.call(e,i[r],r)},s.eachEdge=function(t,e){for(var i=this.edges,n=i.length,r=0;n>r;r++)i[r].dataIndex>=0&&i[r].node1.dataIndex>=0&&i[r].node2.dataIndex>=0&&t.call(e,i[r],r)},s.breadthFirstTraverse=function(t,e,i,r){if(e instanceof n||(e=this._nodesMap[e]),e){for(var o="out"===i?"outEdges":"in"===i?"inEdges":"edges",a=0;a<this.nodes.length;a++)this.nodes[a].__visited=!1;if(!t.call(r,e,null))for(var s=[e];s.length;)for(var l=s.shift(),u=l[o],a=0;a<u.length;a++){var h=u[a],c=h.node1===l?h.node2:h.node1;if(!c.__visited){if(t.call(c,c,l))return;s.push(c),c.__visited=!0}}}},s.update=function(){for(var t=this.data,e=this.edgeData,i=this.nodes,n=this.edges,r=0,o=i.length;o>r;r++)i[r].dataIndex=-1;for(var r=0,o=t.count();o>r;r++)i[t.getRawIndex(r)].dataIndex=r;e.filterSelf(function(t){var i=n[e.getRawIndex(t)];return i.node1.dataIndex>=0&&i.node2.dataIndex>=0});for(var r=0,o=n.length;o>r;r++)n[r].dataIndex=-1;for(var r=0,o=e.count();o>r;r++)n[e.getRawIndex(r)].dataIndex=r},s.clone=function(){for(var t=new a(this._directed),e=this.nodes,i=this.edges,n=0;n<e.length;n++)t.addNode(e[n].id,e[n].dataIndex);for(var n=0;n<i.length;n++){var r=i[n];t.addEdge(r.node1.id,r.node2.id,r.dataIndex)}return t},n.prototype={constructor:n,degree:function(){return this.edges.length},inDegree:function(){return this.inEdges.length},outDegree:function(){return this.outEdges.length},getModel:function(t){if(!(this.dataIndex<0)){var e=this.hostGraph,i=e.data.getItemModel(this.dataIndex);return i.getModel(t)}}},r.prototype.getModel=function(t){if(!(this.dataIndex<0)){var e=this.hostGraph,i=e.edgeData.getItemModel(this.dataIndex);return i.getModel(t)}};var l=function(t,e){return{getValue:function(i){var n=this[t][e];return n.get(n.getDimension(i||"value"),this.dataIndex)},setVisual:function(i,n){this.dataIndex>=0&&this[t][e].setItemVisual(this.dataIndex,i,n)},getVisual:function(i,n){return this[t][e].getItemVisual(this.dataIndex,i,n)},setLayout:function(i,n){this.dataIndex>=0&&this[t][e].setItemLayout(this.dataIndex,i,n)},getLayout:function(){return this[t][e].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[t][e].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[t][e].getRawIndex(this.dataIndex)}}};o.mixin(n,l("hostGraph","data")),o.mixin(r,l("hostGraph","edgeData")),a.Node=n,a.Edge=r,t.exports=a},function(t,e,i){function n(t,e){this.root,this.data,this._nodes=[],this.hostModel=t,this.levelModels=o.map(e||[],function(e){return new a(e,t,t.ecModel)})}function r(t,e){var i=e.children;t.parentNode!==e&&(i.push(t),t.parentNode=e)}var o=i(1),a=i(8),s=i(14),l=i(239),u=i(30),h=function(t,e){this.name=t||"",this.depth=0,this.height=0,this.parentNode=null,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.hostTree=e};h.prototype={constructor:h,isRemoved:function(){return this.dataIndex<0},eachNode:function(t,e,i){"function"==typeof t&&(i=e,e=t,t=null),t=t||{},o.isString(t)&&(t={order:t});var n,r=t.order||"preorder",a=this[t.attr||"children"];"preorder"===r&&(n=e.call(i,this));for(var s=0;!n&&s<a.length;s++)a[s].eachNode(t,e,i);"postorder"===r&&e.call(i,this)},updateDepthAndHeight:function(t){var e=0;this.depth=t;for(var i=0;i<this.children.length;i++){var n=this.children[i];n.updateDepthAndHeight(t+1),n.height>e&&(e=n.height)}this.height=e+1},getNodeById:function(t){if(this.getId()===t)return this;for(var e=0,i=this.children,n=i.length;n>e;e++){var r=i[e].getNodeById(t);if(r)return r}},contains:function(t){if(t===this)return!0;for(var e=0,i=this.children,n=i.length;n>e;e++){var r=i[e].contains(t);if(r)return r}},getAncestors:function(t){for(var e=[],i=t?this:this.parentNode;i;)e.push(i),i=i.parentNode;return e.reverse(),e},getValue:function(t){var e=this.hostTree.data;return e.get(e.getDimension(t||"value"),this.dataIndex)},setLayout:function(t,e){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,t,e)},getLayout:function(){return this.hostTree.data.getItemLayout(this.dataIndex)},getModel:function(t){if(!(this.dataIndex<0)){var e=this.hostTree,i=e.data.getItemModel(this.dataIndex),n=this.getLevelModel();return i.getModel(t,(n||e.hostModel).getModel(t))}},getLevelModel:function(){return(this.hostTree.levelModels||[])[this.depth]},setVisual:function(t,e){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,t,e)},getVisual:function(t,e){return this.hostTree.data.getItemVisual(this.dataIndex,t,e)},getRawIndex:function(){return this.hostTree.data.getRawIndex(this.dataIndex)},getId:function(){return this.hostTree.data.getId(this.dataIndex)}},n.prototype={constructor:n,type:"tree",eachNode:function(t,e,i){this.root.eachNode(t,e,i)},getNodeByDataIndex:function(t){var e=this.data.getRawIndex(t);return this._nodes[e]},getNodeByName:function(t){return this.root.getNodeByName(t)},update:function(){for(var t=this.data,e=this._nodes,i=0,n=e.length;n>i;i++)e[i].dataIndex=-1;for(var i=0,n=t.count();n>i;i++)e[t.getRawIndex(i)].dataIndex=i},clearLayouts:function(){this.data.clearItemLayouts()}},n.createTree=function(t,e,i){function o(t,e){c.push(t);var i=new h(t.name,a);e?r(i,e):a.root=i,a._nodes.push(i);var n=t.children;if(n)for(var s=0;s<n.length;s++)o(n[s],i)}var a=new n(e,i),c=[];o(t),a.root.updateDepthAndHeight(0);var d=u([{name:"value"}],c),f=new s(d,e);return f.initData(c),l({mainData:f,struct:a,structAttr:"tree"}),a.update(),a},t.exports=n},function(t,e,i){function n(){var t,e=[],i={};return{add:function(t,n,o,a,s){return r.isString(a)&&(s=a,a=0),i[t.id]?!1:(i[t.id]=1,e.push({el:t,target:n,time:o,delay:a,easing:s}),!0)},done:function(e){return t=e,this},start:function(){function n(){r--,r||(e.length=0,i={},t&&t())}for(var r=e.length,o=0,a=e.length;a>o;o++){var s=e[o];s.el.animateTo(s.target,s.time,s.delay,s.easing,n)}return this}}}var r=i(1);t.exports={createWrap:n}},function(t,e,i){function n(){function t(e,n){if(n>=i.length)return e;for(var o=-1,a=e.length,s=i[n++],l={},u={};++o<a;){var h=s(e[o]),c=u[h];c?c.push(e[o]):u[h]=[e[o]]}return r.each(u,function(e,i){l[i]=t(e,n)}),l}function e(t,o){if(o>=i.length)return t;var a=[],s=n[o++];return r.each(t,function(t,i){a.push({key:i,values:e(t,o)})}),s?a.sort(function(t,e){return s(t.key,e.key)}):a}var i=[],n=[];return{key:function(t){return i.push(t),this},sortKeys:function(t){return n[i.length-1]=t,this},entries:function(i){return e(t(i,0),0)}}}var r=i(1);t.exports=n},function(t,e,i){var n=i(1),r={get:function(t,e,i){var r=n.clone((o[t]||{})[e]);return i&&n.isArray(r)?r[r.length-1]:r}},o={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}};t.exports=r}])});var Permission=(function(){Permission={addPermission:function(permission){if(permission&&permission.trim()){AppConfig.permission[permission.trim()]=true;}},deletePermission:function(permission){if(permission&&permission.trim()){AppConfig.permission[permission.trim()]=false;}},setPermission:function(permissionList){AppConfig.permission={};if(permissionList&&permissionList.length){for(var m=0,n=permissionList.length;m<n;m++){if(permissionList[m]){AppConfig.permission[permissionList[m].trim()]=true;}}}},hasPermission:function(permission){if(AppConfig.userId==1||AppConfig.permission['BRoot']||AppConfig.permission['all']){return true;}
return AppConfig.permission&&permission&&AppConfig.permission[permission.trim()];},permissionStrategy:function($dom,permissionsToCheck){var permissionItem,clickPermissions,canClick=false,shouldRemove=true;for(var m=0,n=permissionsToCheck.length;m<n;m++){permissionItem=permissionsToCheck[m].trim();if(permissionItem.startsWith('click')){permissionItem=permissionItem.split(/\s*:\s*/);if(permissionItem.length=2){clickPermissions=permissionItem[1].split(/\s*,\s*/);}
for(var i=0,j=clickPermissions.length;i<j;i++){if(this.hasPermission(clickPermissions[i])){canClick=true;}}
if(!canClick){$dom.attr('href','').attr('disabled',true).addClass('disabled');$dom.click(function(e){e.stopPropagation();return false;})}
$dom.attr("style","display: block !important");}else{if(this.hasPermission(permissionItem)){$dom.attr("style","display: block !important");shouldRemove=false;break;}}}
if(shouldRemove){$dom.remove();}
return false;},check:function(area){try{if(!AppConfig.permission){return false;}}catch(e){console.error('AppConfig.permission');}
if(!area){return false;}
if(!(area instanceof jQuery)){area=$(area);}
area.find('[permission]').each(function(index,item){var $item=$(item),permissions;permissions=$item.attr('permission').split(/\s*;\s*/);Permission.permissionStrategy($item,permissions);})}};return Permission;})();var WebAPI=(function(){var siteId;switch(window.location.hostname){case'beop.rnbtech.com.hk':siteId='b79c068f77198848e22fe79758836e53';break;case'beop6.rnbtech.com.hk':siteId='f1f6b2b9e6b64592c0b4cb5e9b8bd79e';break;case'beopdemo.rnbtech.com.hk':siteId='ac0df98f274d9a5980a571297248d80b';break;default:break;}
(function(){if(siteId){var hm=document.createElement("script");hm.src="//hm.baidu.com/hm.js?"+siteId;var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hm,s);}})();var mockList={'/static/mock/analysis_workspace_saveLayout.json':/\/analysis\/workspace\/saveLayout\/\d+\/[01]/i,'/static/mock/analysis_template_get.json':/\/analysis\/template\/get\/\d+/i};function mock(url){var match=null;for(var i in mockList){match=url.match(mockList[i]);if(match!==null)return i;}
return url;}
function requestFailHandle(result){if(result&&result.status==401){alert(i18n_resource.error.noPermission);}}
function WebAPI(){}
WebAPI.isMock=false;$.ajaxSetup({converters:{"text json":true},dataFilter:function(result,type){var data=result;if(type==='script'){return data;}else if(typeof data==='string'){if(/^\s*</.test(data)){return data;}
try{data=JSON.parse(result);}catch(e){console.log('request error: '+e+', the data is :'+data);return data;}}
if(data){if(data.error){switch(data.error){case'token_invalid':{console.log(this.url+' ('+data.error+': code"'+data.msg+'")');if(typeof LoginValidate!='undefined'){var validate=new LoginValidate();validate.show();return;}
confirm(i18n_resource.error.token[data.msg]+'. '+i18n_resource.error.relogin+'.',function(){if(AppConfig.isMobile){location.reload();}else{location.href='/';}});}
case'historyData':{console.log(this.url+' ('+data.error+': code"'+data.msg+'")');alert(data.msg);return{};}
default:break;}}
if(data.code==403){console.log(this.url+' ('+data.msg+'")');alert(I18n.resource.error.noPermission);return{};}}
return data;}});WebAPI.post=function(url,data,isMock){var mockUrl;isMock=isMock===undefined?WebAPI.isMock:isMock;if(isMock){mockUrl=mock(url);if(url!==mockUrl)return this.get(mockUrl,false);}
if(typeof cordova!='undefined'&&AppConfig.host){if(url.indexOf('.html')==-1){url=AppConfig.host+url;}else if(url[0]=='/'){url=url.slice(1)}}
return $.ajax({url:url,type:'POST',data:JSON.stringify(data),contentType:'application/json'}).fail(requestFailHandle);};WebAPI.get=function(url,isMock){isMock=isMock===undefined?WebAPI.isMock:isMock;url=isMock?mock(url):url;if(window._hmt&&url.indexOf('.html')>0)window._hmt.push(['_trackPageview',url]);if(typeof cordova!='undefined'&&AppConfig.host){if(url.indexOf('.html')==-1){url=AppConfig.host+url;}else if(url[0]=='/'){url=url.slice(1)}}
return $.ajax({url:url,type:'Get',contentType:'application/json'}).fail(requestFailHandle);};WebAPI.getHistoryDS=function(callback){};WebAPI.getHistory=function(callback){};WebAPI.ajaxForDebugTool=function(ajaxObj,host,dtuName,endpoint){var defaultUrl='http://'+host+'/'+endpoint+'/'+dtuName,defaultAjaxObj={url:defaultUrl,crossDomain:true,dataType:'json'},dfd,timer=10,intervalFlags,url,requestFlag='requestFlag='+new Date().getTime()+Math.ceil(Math.random()*100);$.extend(defaultAjaxObj,ajaxObj);url=defaultAjaxObj.url;if(url.indexOf('?')<0){requestFlag='?'+requestFlag}else{requestFlag='&'+requestFlag}
var userId=BEOPUtil.getCookie('userId');defaultAjaxObj.url+=requestFlag+'&userId='+userId;return $.ajax(defaultAjaxObj).then(function(result){dfd=$.Deferred();if(result.success){intervalFlags=setInterval(function(){if(timer<0){clearInterval(intervalFlags);return dfd.reject({success:false,msg:'no response from server'});}
$.ajax({type:'GET',url:'http://'+host+'/getCMDResponse/'+dtuName+requestFlag,crossDomain:true,dataType:'json'}).done(function(result){if(result.success){clearInterval(intervalFlags);return dfd.resolve(result);}}).always(function(){timer--;})},2000);}else{return dfd.reject(result);}
return dfd;});};return WebAPI;})();(function(root,factory){if(typeof exports=='object')module.exports=factory()
else if(typeof define=='function'&&define.amd)define(factory)
else root.LoadingSpinner=factory()}
(this,function(){"use strict";var prefixes=['webkit','Moz','ms','O'],animations={},useCssAnimations;function createEl(tag,prop){var el=document.createElement(tag||'div'),n;for(n in prop)el[n]=prop[n]
return el}
function ins(parent){for(var i=1,n=arguments.length;i<n;i++)
parent.appendChild(arguments[i])
return parent}
var sheet=(function(){var el=createEl('style',{type:'text/css'})
ins(document.getElementsByTagName('head')[0],el)
return el.sheet||el.styleSheet}())
function addAnimation(alpha,trail,i,lines){var name=['opacity',trail,~~(alpha*100),i,lines].join('-'),start=0.01+i/lines*100,z=Math.max(1-(1-alpha)/trail*(100-start),alpha),prefix=useCssAnimations.substring(0,useCssAnimations.indexOf('Animation')).toLowerCase(),pre=prefix&&'-'+prefix+'-'||''
if(!animations[name]){sheet.insertRule('@'+pre+'keyframes '+name+'{'+'0%{opacity:'+z+'}'+
start+'%{opacity:'+alpha+'}'+
(start+0.01)+'%{opacity:1}'+
(start+trail)%100+'%{opacity:'+alpha+'}'+'100%{opacity:'+z+'}'+'}',sheet.cssRules.length)
animations[name]=1}
return name}
function vendor(el,prop){var s=el.style,pp,i
prop=prop.charAt(0).toUpperCase()+prop.slice(1)
for(i=0;i<prefixes.length;i++){pp=prefixes[i]+prop
if(s[pp]!==undefined)return pp}
if(s[prop]!==undefined)return prop}
function css(el,prop){for(var n in prop)
el.style[vendor(el,n)||n]=prop[n]
return el}
function merge(obj){for(var i=1;i<arguments.length;i++){var def=arguments[i]
for(var n in def)
if(obj[n]===undefined)obj[n]=def[n]}
return obj}
function pos(el){var o={x:el.offsetLeft,y:el.offsetTop}
while((el=el.offsetParent))
o.x+=el.offsetLeft,o.y+=el.offsetTop
return o}
function getColor(color,idx){return typeof color=='string'?color:color[idx%color.length]}
var defaults={lines:12,length:10,width:5,radius:15,rotate:0,corners:1,color:'#000',direction:1,speed:1,trail:100,opacity:1/4,fps:20,zIndex:1001,className:'spinner',top:'50%',left:'50%',position:'absolute'}
function LoadingSpinner(o){this.opts=merge(o||{},LoadingSpinner.defaults,defaults)}
LoadingSpinner.defaults={}
merge(LoadingSpinner.prototype,{spin:function(target){this.stop()
this.opts.target=target;var divMask=document.createElement("div");divMask.className="spinnerMask";divMask.style.width=target.width;divMask.style.height=target.height;target.appendChild(divMask);this.divMask=divMask;var self=this,o=self.opts,el=self.el=css(createEl(0,{className:o.className}),{position:o.position,width:0,zIndex:o.zIndex}),mid=o.radius+o.length+o.width
css(el,{left:o.left,top:o.top})
if(target){target.insertBefore(el,target.firstChild||null)}
el.setAttribute('role','progressbar')
self.lines(el,self.opts)
if(!useCssAnimations){var i=0,start=(o.lines-1)*(1-o.direction)/2,alpha,fps=o.fps,f=fps/o.speed,ostep=(1-o.opacity)/(f*o.trail/100),astep=f/o.lines;(function anim(){i++;for(var j=0;j<o.lines;j++){alpha=Math.max(1-(i+(o.lines-j)*astep)%f*ostep,o.opacity)
self.opacity(el,j*o.direction+start,alpha,o)}
self.timeout=self.el&&setTimeout(anim,~~(1000/fps))})()}
return self},stop:function(){var el=this.el
if(el){clearTimeout(this.timeout)
if(el.parentNode)el.parentNode.removeChild(el)
this.el=undefined
if(this.divMask){if(this.divMask.parentNode)this.divMask.parentNode.removeChild(this.divMask)
this.el=undefined}}
return this},lines:function(el,o){var i=0,start=(o.lines-1)*(1-o.direction)/2,seg
function fill(color,shadow){return css(createEl(),{position:'absolute',width:(o.length+o.width)+'px',height:o.width+'px',background:color,boxShadow:shadow,transformOrigin:'left',transform:'rotate('+~~(360/o.lines*i+o.rotate)+'deg) translate('+o.radius+'px'+',0)',borderRadius:(o.corners*o.width>>1)+'px'})}
for(;i<o.lines;i++){seg=css(createEl(),{position:'absolute',top:1+~(o.width/2)+'px',transform:o.hwaccel?'translate3d(0,0,0)':'',opacity:o.opacity,animation:useCssAnimations&&addAnimation(o.opacity,o.trail,start+i*o.direction,o.lines)+' '+1/o.speed+'s linear infinite'})
if(o.shadow)ins(seg,css(fill('#000','0 0 4px '+'#000'),{top:2+'px'}))
ins(el,ins(seg,fill(getColor(o.color,i),'0 0 1px rgba(0,0,0,.1)')))}
return el},opacity:function(el,i,val){if(i<el.childNodes.length)el.childNodes[i].style.opacity=val}})
function initVML(){function vml(tag,attr){return createEl('<'+tag+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',attr)}
sheet.addRule('.spin-vml','behavior:url(#default#VML)')
LoadingSpinner.prototype.lines=function(el,o){var r=o.length+o.width,s=2*r
function grp(){return css(vml('group',{coordsize:s+' '+s,coordorigin:-r+' '+-r}),{width:s,height:s})}
var margin=-(o.width+o.length)*2+'px',g=css(grp(),{position:'absolute',top:margin,left:margin}),i
function seg(i,dx,filter){ins(g,ins(css(grp(),{rotation:360/o.lines*i+'deg',left:~~dx}),ins(css(vml('roundrect',{arcsize:o.corners}),{width:r,height:o.width,left:o.radius,top:-o.width>>1,filter:filter}),vml('fill',{color:getColor(o.color,i),opacity:o.opacity}),vml('stroke',{opacity:0}))))}
if(o.shadow)
for(i=1;i<=o.lines;i++)
seg(i,-2,'progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)')
for(i=1;i<=o.lines;i++)seg(i)
return ins(el,g)}
LoadingSpinner.prototype.opacity=function(el,i,val,o){var c=el.firstChild
o=o.shadow&&o.lines||0
if(c&&i+o<c.childNodes.length){c=c.childNodes[i+o];c=c&&c.firstChild;c=c&&c.firstChild
if(c)c.opacity=val}}}
var probe=css(createEl('group'),{behavior:'url(#default#VML)'})
if(!vendor(probe,'transform')&&probe.adj)initVML()
else useCssAnimations=vendor(probe,'animation')
return LoadingSpinner}));
var Internationalization=(function(){function Internationalization(lang,resource){this.type=lang||localStorage["language"];this.resource=resource||{};}
Internationalization.prototype={getResource:function(){return this.resource;},fillPage:function(){this.fill2($('[i18n]'));},fillArea:function(element){this.fill2(element.find('[i18n]'));try{Permission.check(element);}catch(e){console.log('check permission failed:'+e);}},fillAreaAttribute:function(element,attributeName){this.fill(element.find('[i18n]['+attributeName+']'),attributeName);},fill:function(arrElement,attributeName){for(var i=0,arrPath,text,len=arrElement.length;i<len;i++){arrPath=arrElement[i].attributes["i18n"].value.split('.');text=this.resource;for(var j=0;j<arrPath.length;j++){text=text&&text[arrPath[j]];}
if(!attributeName){arrElement[i].innerHTML=text;}
else{arrElement[i].setAttribute(attributeName,text);}}},getI18nValue:function(i18nKey){if(!i18nKey){return'';}
var arrPath=i18nKey.split('.');var text=this.resource;for(var j=0;j<arrPath.length;j++){text=text&&text[arrPath[j]];}
return text;},fill2:function(arrElement){for(var i=0,len=arrElement.length;i<len;i++){var i18nValue=arrElement[i].attributes["i18n"];var items=i18nValue.value.split(';'),item,attrMap;for(var j=0;j<items.length;j++){item=items[j];if(!item){continue;}
if(item.indexOf('=')===-1){i18nValue=this.getI18nValue(item);arrElement[i].innerHTML=i18nValue;}else{attrMap=item.split('=');if(!attrMap[0]){continue;}
arrElement[i].setAttribute(attrMap[0],this.getI18nValue(attrMap[1]));}}}},findContent:function(strPath){var arrPath=strPath.split('.');var text=this.resource;for(var i=0,len=arrPath.length;i<len;i++){text=text&&text[arrPath[i]];}
return text;}};return Internationalization;})();function InitI18nResource(strLanguage,isForce,filePath){if(!strLanguage){strLanguage=localStorage["isUserSelectedLanguage"]||navigator.language.split('-')[0];}
if(isForce){localStorage["isUserSelectedLanguage"]=strLanguage;}else if(localStorage["isUserSelectedLanguage"]){strLanguage=localStorage["isUserSelectedLanguage"];}
filePath=filePath||'/static/views/js/i18n/';return $.ajax({async:false,url:filePath+strLanguage+".js",dataType:"script"}).then(function(){localStorage["language"]=strLanguage;return i18n_resource;},function(){return $.ajax({async:false,url:filePath+"en.js",dataType:'script'}).then(function(){localStorage["language"]="en";return i18n_resource;},function(){console.warn('i18n files loading failed!');return{};});});}
var chartTimer=null;var HistoryChart=(function(){function HistoryChart(data,startDate,endDate,$targetBox){this.historyData=data;this.startDate=startDate;this.endDate=endDate;this.$dialogContent=$targetBox;this.historyChart=null;}
HistoryChart.prototype={init:function(){var _this=this;if(_this.$dialogContent.attr("id")==="dialogContent"){return WebAPI.get("/static/views/observer/widgets/historyChart.html").done(function(resultHtml){_this.$dialogContent.html(resultHtml);_this.refreshData();});}else{_this.refreshData();}},destroy:function(){this.historyChart.dispose();},refreshData:function(){var legends=[],series=[];if(!this.historyData.data){series.push({data:[]});}else{for(var pointName in this.historyData.data){legends.push(pointName);series.push({name:pointName,type:'line',data:this.historyData.data[pointName]});}}
var legends_handled=[];for(var l=0,l_length=legends.length;l<l_length;l++){legends_handled.push(legends[l]);if((l+1)%3===0){legends_handled.push('');}}
var i18nEcharts=I18n.resource.echarts;var option={tooltip:{trigger:'axis',axisPointer:{type:'line',lineStyle:{type:'dashed',width:1}}},legend:{data:legends_handled,x:'left'},toolbox:{show:true,feature:{mark:{show:true,title:{mark:i18nEcharts.MARK,markUndo:i18nEcharts.MARKUNDO,markClear:i18nEcharts.MARKCLEAR}},dataView:{show:true,readOnly:false,title:i18nEcharts.DATAVIEW,lang:[i18nEcharts.DATAVIEW,i18nEcharts.CLOSE,i18nEcharts.REFRESH]},restore:{show:true,title:i18nEcharts.REDUCTION},saveAsImage:{show:true,title:i18nEcharts.SAVE_AS_PICTURE,lang:i18nEcharts.SAVE}}},dataZoom:{show:true},xAxis:[{type:'category',data:this.historyData.timeStamp,axisLabel:{formatter:function(value){var date=new Date(value);if(date=='Invalid Date'){return value;}
return date.format('HH:mm');}}}],yAxis:[{type:'value'}],series:series};var $tableOperatingRecord=this.$dialogContent.find('.tableOperatingRecord');if(this.$dialogContent.attr("id")==="dialogContent"){$tableOperatingRecord.css('width',($tableOperatingRecord.parent().width()).toFixed(1)+'px');}else{$tableOperatingRecord.css({'width':'950px','height':'500px'});}
this.historyChart=echarts.init($tableOperatingRecord.get(0));this.historyChart.setOption(option);function getNowFormatDate(){var date=new Date();var seperator1="-";var seperator2=":";var month=date.getMonth()+1;var strDate=date.getDate();if(month>=1&&month<=9){month="0"+month;}
if(strDate>=0&&strDate<=9){strDate="0"+strDate;}
var currentdate=date.getFullYear()+seperator1+month+seperator1+strDate
+" "+date.getHours()+seperator2+date.getMinutes()
+seperator2+date.getSeconds();return currentdate;}
var _this=this;var chartNameList=[];for(var prop in this.historyData.data){chartNameList.push(prop);}
clearInterval(chartTimer);chartTimer=setInterval(function(){return WebAPI.post("/get_realtimedata",{proj:localStorage.getItem("current_project"),pointList:chartNameList}).done(function(result){var chartList=[]
for(var i=0;i<result.length;i++){var curveAttrList=[];curveAttrList.push(i);curveAttrList.push(result[i].value);curveAttrList.push(false);curveAttrList.push(false);curveAttrList.push(getNowFormatDate());chartList.push(curveAttrList);}
_this.historyChart.setOption(chartList);});},30000);},optionToContent:function(opt){var axisData=opt.xAxis&&opt.xAxis[0].data,series=opt.series;var html='<table  class="table table-bordered table-hover table-striped" style="-webkit-user-select: initial;  width: 80%;margin: 0 auto;"><tbody>';if(BEOPUtil.isUndefined(axisData)){html+='<tr>';for(var i=0,l=series.length;i<l;i++){html+='<td colspan="2">'+series[i].name+'</td>';}
html+='</tr>';var longestSeriesData=[],longestLength=0;for(var j=0,sl=series.length;j<sl;j++){if(series[j].data.length>longestLength){longestSeriesData=series[j].data;longestLength=longestSeriesData.length;}}
for(var i=0,il=longestSeriesData.length;i<il;i++){html+='<tr>';for(var m=0,ml=series.length;m<ml;m++){if(!BEOPUtil.isUndefined(series[m].data[i])){for(var n=0,nl=series[m].data[i].length;n<nl;n++){html+='<td>'+series[m].data[i][n]+'</td>';}}}
html+='</tr>';}}else{html+='<tr><td>'+opt.xAxis[0].name+'</td>';for(var i=0,l=series.length;i<l;i++){html+='<td>'+series[i].name+'</td>';}
html+='</tr>';for(var i=0,l=axisData.length;i<l;i++){html+='<tr>'+'<td>'+axisData[i]+'</td>';for(var j=0,sl=series.length;j<sl;j++){html+='<td>'+series[j].data[i]+'</td>';}
html+='</tr>';}}
html+='</tbody></table>';return html;}};return HistoryChart;})();
var beop=beop||{};beop.constant={project_img_path:'/static/images/project_img/',project_default_img:'default.jpg',BEOP_IMG_HOST:'http://images.rnbtech.com.hk',OSS_PROJECT_IMG_PATH:'/custom/project_img/'};var ObjectId=function(){var timestamp=new Date().valueOf();var userId=('000'+(AppConfig.userId||'000')).slice(-3);var hex8=('00000000'+Math.floor(Math.random()*0xFFFFFFFF).toString(16)).slice(-8);return timestamp+userId+hex8;};(function(exports){exports.namespace=function(path){var obj=window;path=path.split('.');path.forEach(function(p,i){p=p.trim();if(i===0&&p==='window')return;obj=obj[p]=obj[p]||{};});return obj;};}(window));(function(exports){exports.Mixin=function(){var prototype={};var methods;for(var i=0,len=arguments.length;i<len;i++){methods=arguments[i];for(var m in methods){prototype[m]=methods[m];}}
return prototype;};}(window));(function(){var ENUM_LEVEL={LOG:1,INFO:2,DEBUG:3,WARN:4,ERROR:5,EXCEPTION:6};window.Log={level:ENUM_LEVEL.WARN,log:function(){if(this.level>ENUM_LEVEL.LOG)return;Log._out('log',arguments);},info:function(){if(this.level>ENUM_LEVEL.INFO)return;Log._out('info',arguments);},debug:function(){if(this.level>ENUM_LEVEL.DEBUG)return;Log._out('debug',arguments);},warn:function(){if(this.level>ENUM_LEVEL.WARN)return;Log._out('warn',arguments);},error:function(){if(this.level>ENUM_LEVEL.ERROR)return;Log._out('error',arguments);},exception:function(message,exception){if(this.level>ENUM_LEVEL.EXCEPTION)return;if(exception){Log.error('Exception: ',message,exception.stack||exception);}else{Log.error('Exception: ',message);}},_out:function(type,args){console[type].apply(console,args)}};}());var FullScreenManager=(function(){var manager=Object.create({init:function(){var _this=this;$(document).off('webkitfullscreenchange');$(document).on('webkitfullscreenchange',function(){var isFullScreen=!!document.webkitFullscreenElement;if(isFullScreen){_this.onFullScreenEnter();}else{_this.onFullScreenOut();}});$(document).off('mozfullscreenchange');$(document).on('mozfullscreenchange',function(){var isFullScreen=!!document.webkitFullscreenElement;if(isFullScreen){_this.onFullScreenEnter();}else{_this.onFullScreenOut();}});$(document).off('msfullscreenchange');$(document).on('msfullscreenchange',function(){var isFullScreen=!!document.webkitFullscreenElement;if(isFullScreen){_this.onFullScreenEnter();}else{_this.onFullScreenOut();}});if(typeof onError==='function'){$(document).off('webkitfullscreenerror');$(document).on('webkitfullscreenerror',this.onFullScreenError);$(document).off('mozfullscreenerror');$(document).on('mozfullscreenerror',this.onFullScreenError);$(document).off('msfullscreenerror');$(document).on('msfullscreenerror',this.onFullScreenError);}},onFullScreenEnter:function(){},onFullScreenOut:function(){},onFullScreenError:function(){},toggle:function(){if(!document.fullscreenElement&&!document.mozFullScreenElement&&!document.webkitFullscreenElement&&!document.msFullscreenElement){if(document.documentElement.requestFullscreen){document.documentElement.requestFullscreen();}else if(document.documentElement.msRequestFullscreen){document.documentElement.msRequestFullscreen();}else if(document.documentElement.mozRequestFullScreen){document.documentElement.mozRequestFullScreen();}else if(document.documentElement.webkitRequestFullscreen){document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);}}else{if(document.exitFullscreen){document.exitFullscreen();}else if(document.msExitFullscreen){document.msExitFullscreen();}else if(document.mozCancelFullScreen){document.mozCancelFullScreen();}else if(document.webkitExitFullscreen){document.webkitExitFullscreen();}}}});manager.init();return manager;}());function StringBuilder(){this.data=Array("");}
StringBuilder.prototype.append=function(){this.data.push(arguments[0]);return this;};StringBuilder.prototype.toString=function(){return this.data.join("");};StringBuilder.prototype.getLength=function(){return this.data.length;};if(!String.prototype.format){String.prototype.format=function(){if(arguments[0]===undefined){return'';}
if(arguments[0].constructor===Array){var args=arguments[0];}else{var args=arguments;}
return this.replace(/{(\d+)}/g,function(match,number){return typeof args[number]!='undefined'?args[number]:match;});};}
if(!String.prototype.formatEL){String.prototype.formatEL=function(o){var str=this.toString();if(!str||!o)return'';for(var p in o){if(o.hasOwnProperty(p)){str=str.replace(new RegExp('{'+p+'}','g'),o[p]);}}
return str;};}
String.prototype.toDate=function(){var str=this;if(str.indexOf('-')>-1)
str=str.replace('-','/').replace('-','/');return new Date(str);};if(!String.prototype.startsWith){String.prototype.startsWith=function(word){return new RegExp('^'+word).test(this);}}
Number.prototype.toDate=function(){return new Date(this);};function Alert(targetElement,type,msg){this.element=targetElement;this.str=new StringBuilder();this.str.append('<div style="display:none;" class="alert beop-alert alert-').append(type).append(' alert-dismissible" role="alert"><button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>').append('<div class="alert-msg">'+msg+'</div>').append('</div>');this.$alert=$(this.str.toString());}
Alert.danger=function(targetElement,msg){return new Alert(targetElement,Alert.type.danger,msg);};Alert.warning=function(targetElement,msg){return new Alert(targetElement,Alert.type.warning,msg);};Alert.success=function(targetElement,msg){return new Alert(targetElement,Alert.type.success,msg);};Alert.info=function(targetElement,msg){return new Alert(targetElement,Alert.type.info,msg);};Alert.closeAll=function(){$('.beop-alert').remove();};Alert.type={danger:'danger',warning:'warning',success:'success',info:'info'};Alert.prototype.show=function(duration){Alert.closeAll();if(duration){var _this=this;setTimeout(function(){_this.close();},duration);}
$(this.element).append(this.$alert);this.$alert.slideDown(500);return this;};Alert.prototype.close=function(){var _this=this;this.$alert.slideUp(500,function(){_this.$alert.remove();_this=null;});};Alert.prototype.setMessage=function(msg){if(!msg){return false}
this.$alert.find('.alert-msg').text(msg);};Alert.prototype.setStyle=function(style){if(style&&typeof style!=='string'){this.$alert.css(style);}
return this;};Alert.prototype.showAtTop=function(duration){this.setStyle({position:'absolute',top:0,left:0,right:0,margin:'auto',width:'30%',textAlign:'center',zIndex:10000});if(!duration){duration=2000;}
this.show(duration);};function showDialog(url){return WebAPI.get(url).done(function(resultHtml){$("#dialogContent").html(resultHtml);$('#dialogModal').modal({});});}
function clone(obj){if(obj==null||typeof(obj)!='object')
return obj;var temp=obj.constructor();for(var key in obj){if(obj.hasOwnProperty(key)){temp[key]=clone(obj[key]);}}
return temp;}
Date.prototype.format=function(fmt){var o={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours()%12==0?12:this.getHours()%12,"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),"S":this.getMilliseconds()};var week={"0":"/u65e5","1":"/u4e00","2":"/u4e8c","3":"/u4e09","4":"/u56db","5":"/u4e94","6":"/u516d"};if(/(y+)/.test(fmt)){fmt=fmt.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length));}
if(/(E+)/.test(fmt)){fmt=fmt.replace(RegExp.$1,((RegExp.$1.length>1)?(RegExp.$1.length>2?"/u661f/u671f":"/u5468"):"")+week[this.getDay()+""]);}
for(var k in o){if(new RegExp("("+k+")").test(fmt)){fmt=fmt.replace(RegExp.$1,(RegExp.$1.length==1)?(o[k]):(("00"+o[k]).substr((""+o[k]).length)));}}
return fmt;};Date.prototype.timeFormat=function(format,type,language,option){var date=this;if(format&&(typeof format=='string'||typeof format=='object')){if(typeof format=='object'&&(!format.separators||!format.parts)){format='yyyy-mm-dd hh:ii:ss';}}else{format='yyyy-mm-dd hh:ii:ss';}
if(arguments.length>=2){var paramArr=(function(arrayish){return[].slice.call(arrayish);})(arguments);paramArr.shift();type=language=option=null;paramArr.forEach(function(it,i){if(typeof it=='string'){language=it;}else if(typeof it=='number'){type=it;}else if(typeof it=='object'){option=it;}});}
var isReturnNull=false;if(option){for(var k in option){if(k=='isReturnNull'){isReturnNull=option[k];}}}
if(date=='Invalid Date'){console.warn("Invalid date.");if(isReturnNull){return'';}else{return date.toString();}}
var DATES={en:{"days":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],"daysShort":["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],"daysMin":["Su","Mo","Tu","We","Th","Fr","Sa","Su"],"months":["January","February","March","April","May","June","July","August","September","October","November","December"],"monthsShort":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"meridiem":["am","pm"]}};language=language?(DATES[language]?language:'en'):'en';var formatObj=(function(formatStr){if(typeof formatStr=='object'){return formatStr;}
if(type){formatStr=timeFormatChange(formatStr,type);}
var reg=/hh?|HH?|p|P|ii?|ss?|dd?|DD?|mm?|MM?|yy(?:yy)?/g;var separators=formatStr.replace(reg,'\0').split('\0');var parts=formatStr.match(reg);if(!separators||!separators.length||!parts||parts.length==0){throw new Error("Invalid date format.");}
return{separators:separators,parts:parts};})(format);var val={yy:date.getFullYear().toString().substring(2),yyyy:date.getFullYear(),m:date.getMonth()+1,M:DATES[language].monthsShort[date.getMonth()],MM:DATES[language].months[date.getMonth()],d:date.getDate(),D:DATES[language].daysShort[date.getDay()],DD:DATES[language].days[date.getDay()],p:(DATES[language].meridiem.length==2?DATES[language].meridiem[date.getHours()<12?0:1]:''),h:date.getHours(),i:date.getMinutes(),s:date.getSeconds()};if(DATES[language].meridiem.length==2){val.H=(val.h%12==0?12:val.h%12);}
else{val.H=val.h;}
val.HH=(val.H<10?'0':'')+val.H;val.P=val.p.toUpperCase();val.hh=(val.h<10?'0':'')+val.h;val.ii=(val.i<10?'0':'')+val.i;val.ss=(val.s<10?'0':'')+val.s;val.dd=(val.d<10?'0':'')+val.d;val.mm=(val.m<10?'0':'')+val.m;var finTime='';for(var i=0,len=formatObj.separators.length;i<len;i++){finTime+=formatObj.separators[i]+(formatObj.parts[i]?val[formatObj.parts[i]]:'');}
return finTime;};var DateUtil=(function(){var dateLocale={month:{en:{month_names:['January','February','March','April','May','June','July','August','September','October','November','December'],month_names_short:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec']},zh:{month_names:['','','','','','','','','','','',''],month_names_short:['','','','','','','','','','','','']}}};function getWeekNumber(d){d=new Date(+d);d.setHours(0,0,0);d.setDate(d.getDate()+4-(d.getDay()||7));var yearStart=new Date(d.getFullYear(),0,1);var weekNo=Math.ceil((((d-yearStart)/86400000)+1)/7);return[d.getFullYear(),weekNo];}
function getLastWeekNumberOf(y,w){w-=1;if(w===0){y=y-1;w=52;}
return[y,w];}
function getNextWeekNumberOf(y,w){w+=1;if(w===53){y+=1;w=1;}
return[y,w];}
function isLeapYear(y){if(Object.prototype.toString.call(y)==='[object Date]'){y=y.getFullYear();}
return((y%4===0)&&(y%100!==0))||(y%400===0);}
function daysInMonth(dt){var m=dt.getMonth();if(m===1){return isLeapYear(dt)?29:28;}
return[31,28,31,30,31,30,31,31,30,31,30,31][m];}
function getFirstDayOfWeek(year,week){var d=new Date(year,0,1),offset=d.getTimezoneOffset();d.setDate(d.getDate()+4-(d.getDay()||7));d.setTime(d.getTime()+7*24*60*60*1000*(week+(year==d.getFullYear()?-1:0)));d.setTime(d.getTime()
+(d.getTimezoneOffset()-offset)*60*1000);d.setDate(d.getDate()-3);return d;}
function getDateRangeOnWeekNumber(year,week){if(!year||!week){return;}
var firstDay=getFirstDayOfWeek(year,week),lastDay=new Date(firstDay);lastDay.setDate(firstDay.getDate()+6);return[firstDay,lastDay];}
function getMonthName(index,language){var monthList=language&&language in dateLocale.month?dateLocale.month[language].month_names:dateLocale.month['en'].month_names;return monthList[index];}
function getMonthNameShort(index,language){var monthList=language&&language in dateLocale.month?dateLocale.month[language].month_names_short:dateLocale.month['en'].month_names_short;return monthList[index];}
function getLastMonth(currentMonth){if(!currentMonth){currentMonth=new Date().getMonth()+1;}
if(currentMonth===1){return 12;}else{return currentMonth-1;}}
function getNextMonth(currentMonth){if(!currentMonth){currentMonth=new Date().getMonth()+1;}
if(currentMonth===12){return 1;}else{return currentMonth+1;}}
function getRelativeDateInfo(date1,date2){var now=new Date();var lang=I18n.type;var value1,value2,ts,info;if(!date1&&!date2)return'';value1=(date1||now).valueOf();value2=(date2||now).valueOf();ts=Math.floor(Math.abs(value1-value2)/1000);switch(true){case ts<60:info=ts+(ts===1?' second':' seconds');break;case ts<3600:ts=Math.floor(ts/60);info=ts+(ts===1?' minute':' minutes');break;case ts<86400:ts=Math.floor(ts/(3600));info=ts+(ts===1?' hour':' hours');break;case ts<31536000:ts=Math.floor(ts/(86400));info=ts+(ts===1?' day':' days');break;default:ts=Math.floor(ts/(31536000));info=ts+(ts===1?' year':' years');break;}
info+=value1>value2?' ago':' later';if(lang==='zh'){info=info.replace(/\s(seconds?|minutes?|hours?|days?|years?)\s(ago|later)$/,function($0,$1,$2){var rs='';if($1.indexOf('second')>-1)rs+='';if($1.indexOf('minute')>-1)rs+='';if($1.indexOf('hour')>-1)rs+='';if($1.indexOf('day')>-1)rs+='';if($1.indexOf('year')>-1)rs+='';if($2==='ago')rs+='';if($2==='later')rs+='';return rs;});}
return info;}
return{getWeekNumber:getWeekNumber,isLeapYear:isLeapYear,daysInMonth:daysInMonth,getLastWeekNumberOf:getLastWeekNumberOf,getNextWeekNumberOf:getNextWeekNumberOf,getDateRangeOnWeekNumber:getDateRangeOnWeekNumber,getFirstDayOfWeek:getFirstDayOfWeek,getMonthName:getMonthName,getMonthNameShort:getMonthNameShort,getLastMonth:getLastMonth,getNextMonth:getNextMonth,getRelativeDateInfo:getRelativeDateInfo,DATA_FORMAT:{FULL_DATETIME:'yyyy-MM-dd HH:mm:ss',FULL_DATE:'yyyy-MM-dd',TIME:'HH:mm:ss'}}})();var StringUtil=(function(){var HTML_ENTITIES={'&':'&amp;','>':'&gt;','<':'&lt;','"':'&quot;',"'":'&#39;','`':'&#x60;'},HTML_ENTITIES_INVERT=invert(HTML_ENTITIES);function invert(obj){var result={},keys=Object.keys(obj);for(var i=0,length=keys.length;i<length;i++){result[obj[keys[i]]]=keys[i];}
return result;}
function padLeft(oldStr,padNum,padStr){if(!padStr){return oldStr;}
return new Array(padNum-String(oldStr).length+1).join(padStr)+oldStr;}
function htmlEscape(text){if(!text){return text;}
var source='(?:'+Object.keys(HTML_ENTITIES).join('|')+')',replaceRegexp=new RegExp(source,'g');return text.replace(replaceRegexp,function(character){return HTML_ENTITIES[character];});}
function htmlUnEscape(text){if(!text){return text;}
var source='(?:'+Object.keys(HTML_ENTITIES_INVERT).join('|')+')',replaceRegexp=new RegExp(source,'g');return text.replace(replaceRegexp,function(character){return HTML_ENTITIES_INVERT[character];});}
var getI18nProjectName=function(project){if(!I18n||!project){return'';}
var result='';switch(I18n.type){case'en':{result=project.name_english;break;}
case'zh':{result=project.name_cn;break;}
default:{result=project.name_english;}}
return result||'';};return{padLeft:padLeft,htmlEscape:htmlEscape,htmlUnEscape:htmlUnEscape,getI18nProjectName:getI18nProjectName}})();var BEOPUtil=(function(){var jsType={function:typeof $.noop,number:typeof 0,string:typeof'',undefined:typeof undefined};var projectImgPath=beop.constant.project_img_path;var setRelativePosition=function($obj,$target,topOffset,leftOffset){$target.css({"left":$obj.offset().left+$obj.width()+(leftOffset||5),"top":$obj.offset().top+(topOffset||10)});};var projectDefaultImgPath=projectImgPath+beop.constant.project_default_img;var getProjectImgPath=function(project){if(project){return project.pic?projectImgPath+project.pic:projectDefaultImgPath;}};var getProjectFromAppConfig=function(projectId){for(var m=0,len=AppConfig.projectList.length;m<len;m++){if(AppConfig.projectList[m].id==projectId){return AppConfig.projectList[m];}}};function getFunctionName(func){if(!func||typeof func!=jsType.function){return'';}
var ret=func.toString();ret=ret.substr('function '.length);ret=ret.substr(0,ret.indexOf('('));return ret;}
function isUndefined(obj){return typeof obj===jsType.undefined;}
function getCookie(name){var value="; "+document.cookie;var parts=value.split("; "+name+"=");if(parts.length==2)return parts.pop().split(";").shift();}
function logicContentHandle(content){if(content){content=content.replace(/\t/g,'    ')}
return content;}
function copyToClipboard(text){if(window.clipboardData&&window.clipboardData.setData){return clipboardData.setData("Text",text);}else if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var textarea=document.createElement("textarea");textarea.textContent=text;textarea.style.position="fixed";document.body.appendChild(textarea);textarea.select();try{return document.execCommand("copy");}catch(ex){console.warn("Copy to clipboard failed.",ex);return false;}finally{document.body.removeChild(textarea);}}}
var projectImgType={logo:'logo.png',pdfCover:'pdf_cover.jpg'};function getProjectImgByType(projectId,name,extension){var img='';if(projectId){img+=projectId+'_';}
img+=name;if(extension){img+='.'+extension;}
return beop.constant.BEOP_IMG_HOST+beop.constant.OSS_PROJECT_IMG_PATH+img;}
return{setRelativePosition:setRelativePosition,getProjectImgPath:getProjectImgPath,getFunctionName:getFunctionName,isUndefined:isUndefined,getCookie:getCookie,getProjectFromAppConfig:getProjectFromAppConfig,logicContentHandle:logicContentHandle,copyToClipboard:copyToClipboard,getProjectImgByType:getProjectImgByType,projectImgType:projectImgType}})();(function(){var beop_tmpl_cache={};this.beopTmpl=function tmpl(str,data,frameStr){var fn=!/\W/.test(str)?beop_tmpl_cache[str]=beop_tmpl_cache[str]||tmpl(frameStr?frameStr:document.getElementById(str).innerHTML):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};"+"with(obj){p.push('"+
str.replace(/[\r\t\n]/g," ").split(/<!/).join("\t").replace(/((^|!>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)!>/g,"',$1,'").split("\t").join("');").split(/!>/).join("p.push('").split("\r").join("\\'")
+"');}return p.join('');");return data?fn(data):fn;};})();var SidebarMenuEffect=(function(){function SidebarMenuEffect(){}
SidebarMenuEffect.prototype.init=function(center,left,right){var _this=this;this.$paneCt=$(center);this.$leftBtn=$(center).find('#leftCt');this.$rightBtn=$(center).find('#rightCt');var container=document.getElementById('st-container'),buttons=Array.prototype.slice.call(document.querySelectorAll('.sideTrans')),refresh=function(){var leftCol=0,rightCol=0,centerCol=0;var leftArrow='<span class="glyphicon glyphicon-chevron-left"></span>';var rightArrow='<span class="glyphicon glyphicon-chevron-right"></span>';if(_this.$leftBtn.length>0){if(container.className.indexOf('st-effect-7')>0){var prev=_this.$paneCt.prev('div')[0];if(prev&&prev.className.indexOf('col-')>-1){leftCol=parseInt(prev.classList[0].split('-')[2]);}else{leftCol=0;}
_this.$leftBtn.removeClass('leftCtClose').addClass('leftCtOpen').html(leftArrow);}else{leftCol=0;_this.$leftBtn.removeClass('leftCtOpen').addClass('leftCtClose').html(rightArrow);}}
if(_this.$rightBtn.length>0){if(container.className.indexOf('st-effect-1')>0){var next=_this.$paneCt.next('div')[0];if(next&&next.className.indexOf('col-')>-1){rightCol=parseInt(next.classList[0].split('-')[2]);}else{rightCol=0;}
_this.$rightBtn.removeClass('rightCtClose').addClass('rightCtOpen').html(rightArrow);}else{rightCol=0;_this.$rightBtn.removeClass('rightCtOpen').addClass('rightCtClose').html(leftArrow);}}
centerCol=12-leftCol-rightCol;_this.$paneCt.removeClass().addClass('col-sm-'+centerCol+' st-content');};buttons.forEach(function(el,i){var effect=el.getAttribute('data-effect');el.addEventListener('click',function(ev){var target=ev.target.getAttribute('data-effect')!=null?ev.target.getAttribute('data-effect'):ev.target.parentNode.getAttribute('data-effect');var stCtClass=document.getElementById('st-container').className;if(stCtClass.indexOf(target)<0){ev.stopPropagation();ev.preventDefault();container.classList.add(effect);setTimeout(function(){if($(container.children[0]).children('div').length==3){container.classList.add('st-menu-open');}
refresh();},250);}else{container.classList.remove(target);refresh();}});});};return SidebarMenuEffect;})();(function(window){{var unknown='-';var screenSize='';if(screen.width){var width=(screen.width)?screen.width:'';var height=(screen.height)?screen.height:'';screenSize+=''+width+" x "+height;}
var nVer=navigator.appVersion;var nAgt=navigator.userAgent;var browser=navigator.appName;var version=''+parseFloat(navigator.appVersion);var majorVersion=parseInt(navigator.appVersion,10);var nameOffset,verOffset,ix;if((verOffset=nAgt.indexOf('Opera'))!=-1){browser='Opera';version=nAgt.substring(verOffset+6);if((verOffset=nAgt.indexOf('Version'))!=-1){version=nAgt.substring(verOffset+8);}}
else if((verOffset=nAgt.indexOf('MSIE'))!=-1){browser='Microsoft Internet Explorer';version=nAgt.substring(verOffset+5);}
else if((verOffset=nAgt.indexOf('Chrome'))!=-1){browser='Chrome';version=nAgt.substring(verOffset+7);}
else if((verOffset=nAgt.indexOf('Safari'))!=-1){browser='Safari';version=nAgt.substring(verOffset+7);if((verOffset=nAgt.indexOf('Version'))!=-1){version=nAgt.substring(verOffset+8);}}
else if((verOffset=nAgt.indexOf('Firefox'))!=-1){browser='Firefox';version=nAgt.substring(verOffset+8);}
else if(nAgt.indexOf('Trident/')!=-1){browser='Microsoft Internet Explorer';version=nAgt.substring(nAgt.indexOf('rv:')+3);}
else if((nameOffset=nAgt.lastIndexOf(' ')+1)<(verOffset=nAgt.lastIndexOf('/'))){browser=nAgt.substring(nameOffset,verOffset);version=nAgt.substring(verOffset+1);if(browser.toLowerCase()==browser.toUpperCase()){browser=navigator.appName;}}
if((ix=version.indexOf(';'))!=-1)version=version.substring(0,ix);if((ix=version.indexOf(' '))!=-1)version=version.substring(0,ix);if((ix=version.indexOf(')'))!=-1)version=version.substring(0,ix);majorVersion=parseInt(''+version,10);if(isNaN(majorVersion)){version=''+parseFloat(navigator.appVersion);majorVersion=parseInt(navigator.appVersion,10);}
var mobile=/Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(nVer);var cookieEnabled=(navigator.cookieEnabled)?true:false;if(typeof navigator.cookieEnabled=='undefined'&&!cookieEnabled){document.cookie='testcookie';cookieEnabled=(document.cookie.indexOf('testcookie')!=-1)?true:false;}
var os=unknown;var clientStrings=[{s:'Windows 3.11',r:/Win16/},{s:'Windows 95',r:/(Windows 95|Win95|Windows_95)/},{s:'Windows ME',r:/(Win 9x 4.90|Windows ME)/},{s:'Windows 98',r:/(Windows 98|Win98)/},{s:'Windows CE',r:/Windows CE/},{s:'Windows 2000',r:/(Windows NT 5.0|Windows 2000)/},{s:'Windows XP',r:/(Windows NT 5.1|Windows XP)/},{s:'Windows Server 2003',r:/Windows NT 5.2/},{s:'Windows Vista',r:/Windows NT 6.0/},{s:'Windows 7',r:/(Windows 7|Windows NT 6.1)/},{s:'Windows 8.1',r:/(Windows 8.1|Windows NT 6.3)/},{s:'Windows 8',r:/(Windows 8|Windows NT 6.2)/},{s:'Windows NT 4.0',r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:'Windows ME',r:/Windows ME/},{s:'Android',r:/Android/},{s:'Open BSD',r:/OpenBSD/},{s:'Sun OS',r:/SunOS/},{s:'Linux',r:/(Linux|X11)/},{s:'iOS',r:/(iPhone|iPad|iPod)/},{s:'Mac OS X',r:/Mac OS X/},{s:'Mac OS',r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:'QNX',r:/QNX/},{s:'UNIX',r:/UNIX/},{s:'BeOS',r:/BeOS/},{s:'OS/2',r:/OS\/2/},{s:'Search Bot',r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var id in clientStrings){var cs=clientStrings[id];if(cs.r.test(nAgt)){os=cs.s;break;}}
var osVersion=unknown;if(/Windows/.test(os)){osVersion=/Windows (.*)/.exec(os)[1];os='Windows';}
switch(os){case'Mac OS X':osVersion=/Mac OS X (10[\.\_\d]+)/.exec(nAgt)[1];break;case'Android':osVersion=/Android ([\.\_\d]+)/.exec(nAgt)[1];break;case'iOS':osVersion=/OS (\d+)_(\d+)_?(\d+)?/.exec(nVer);osVersion=osVersion[1]+'.'+osVersion[2]+'.'+(osVersion[3]|0);break;}}
window.jscd={screen:screenSize,browser:browser,browserVersion:version,mobile:mobile,os:os,osVersion:osVersion,cookies:cookieEnabled};}(this));var getUrlParams=function(){var search=window.location.search.substring(1);var kvArr=search.split('&');var rs={};kvArr.forEach(function(kv){var arr=kv.split('=');if(typeof arr[1]!=='undefined'){rs[arr[0]]=arr[1];}});return rs;};$.fn.serializeObject=function(){var obj={};this.serializeArray().map(function(item){if(/\[\]$/.test(item.name)){if(obj[item.name]){obj[item.name].push(item.value);}else{obj[item.name]=[item.value];}}else{obj[item.name]=item.value;}});return obj;};function kIntSeparate(num,n){var number=num.toFixed(n?n:0);var source=String(number).split(".");source[0]=source[0].replace(new RegExp('(\\d)(?=(\\d{3})+$)','ig'),"$1,");return source.join(".");}
function timeFormatChange(format,type){var lastStr='';var formatObj=(function(formatStr){if(!formatStr||typeof formatStr=='object'){return;}
var reg=/hh?|HH?|p|P|ii?|ss?|dd?|DD?|mm?|MM?|yy(?:yy)?/g;var separators=formatStr.replace(reg,'\0').split('\0');var parts=formatStr.match(reg);if(!separators||!separators.length||!parts||parts.length==0){return;}
return{separators:separators,parts:parts};})(format);if(formatObj){format='';for(var i=0,len=formatObj.separators.length-1;i<len;i++){format+=formatObj.separators[i]+formatObj.parts[i];}
lastStr=formatObj.separators[len];}
var formatArr=['yyyy-mm-dd hh:ii:ss','yyyy-mm-dd hh:ii','yyyy-mm-dd hh','yyyy-mm-dd','yyyy-mm','mm-dd hh:ii:ss','mm-dd hh:ii','mm-dd hh','mm-dd'];var formatChangeArr=[['yyyy-mm-dd hh:ii:ss','yyyy-mm-dd hh:ii','yyyy-mm-dd hh','yyyy-mm-dd','yyyy-mm','mm-dd hh:ii:ss','mm-dd hh:ii','mm-dd hh','mm-dd'],['M d, yyyy hh:ii:ss','M d, yyyy hh:ii','M d, yyyy hh','M d, yyyy','M, yyyy','M d hh:ii:ss','M d hh:ii','M d hh','M d'],['dd/mm/yyyy hh:ii:ss','dd/mm/yyyy hh:ii','dd/mm/yyyy hh','dd/mm/yyyy','mm/yyyy','dd/mm hh:ii:ss','dd/mm hh:ii','dd/mm hh','dd/mm']];var index=formatArr.findIndex(function(v){return v===format;});type=Number(type);type&&(type>=formatChangeArr.length)&&(type=formatChangeArr.length-1);if(index==-1){console.log('format is not defined');return format+lastStr;}else{return formatChangeArr[type||AppConfig.projectTimeFormat||0][index]+lastStr;}}
function timeFormat(time,format,language,option){var date,arr,arr2;if(time instanceof Date){date=time;}else if(/^\d{1,2}\/\d{4}$/.test(time)){arr=time.split('/');date=new Date(arr[0]+'/01/'+arr[1]);}else if(/^\d{1,2}\/\d{1,2}$/.test(time)){arr=time.split('/');date=new Date(arr[1]+'/'+arr[0]);}else if(/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(time)){arr=time.split('/');date=new Date(arr[1]+'/'+arr[0]+'/'+arr[2]);}else if(/^\d{1,2}\/\d{1,2} /.test(time)){arr=time.split(' ');arr2=arr[0].split('/');date=new Date(arr2[1]+'/'+arr2[0]+' '+arr[1]);}else if(/^\d{1,2}\/\d{1,2}\/\d{4} /.test(time)){arr=time.split(' ');arr2=arr[0].split('/');date=new Date(arr2[1]+'/'+arr2[0]+'/'+arr2[2]+' '+arr[1]);}else{date=new Date(time);}
return date.timeFormat(format,language,option);}
(function(exports){var MINITE_1=60000;var MINITE_5=300000;var HOUR_1=3600000;var DAY_1=86400000;var DAY_365=31536000000;function _formatTimeStr(str,format){var arr=str.split(' ');var date=arr[0].split('-');var time=arr[1].split(':');return format.replace('yyyy',date[0]).replace('MM',date[1]).replace('dd',date[2]).replace('HH',time[0]).replace('mm',time[1]).replace('ss',time[2]);}
function _explainPattern(timeShaft){var startTime=new Date(timeShaft[0]);var endTime=new Date(timeShaft[timeShaft.length-1]);var timeRange=endTime.valueOf()-startTime.valueOf();var timeInterval=timeRange/(timeShaft.length-1);var pattern='MM-dd HH:mm';if(timeInterval<=MINITE_5){if(timeRange<=HOUR_1){pattern='HH:mm';}else if(timeRange<=DAY_1){pattern='HH:mm';}}
else if(timeInterval<=HOUR_1){if(timeRange<=DAY_1){pattern='HH:mm';}else{pattern='MM-dd HH:mm';}}
else if(timeInterval<=DAY_1){if(timeRange<=DAY_365){pattern='MM-dd';}else{pattern='yyyy-MM-dd';}}
else{pattern='yyyy-MM';}
return pattern;}
function _explain(timeShaft){pattern=getPattern(timeShaft);if(pattern){timeShaft=timeShaft.map(function(row){return _formatTimeStr(row,pattern);});}
return timeShaft;}
function _valid(params){var flag=Object.prototype.toString.call(params)==='[object Array]';return flag&&/^[\d-]{10} [\d:]{8}$/.test(params[0]);}
var _getTimePattern=function(timeShaft){if(!_valid(timeShaft)){return;}
if(timeShaft.length<=1){return;}
return _explainPattern(timeShaft);};var formatTimeShaft=exports.formatTimeShaft=function(timeShaft){if(!_valid(timeShaft)){console.warn('function arguments is not a valid time shaft array!');return timeShaft;}
if(timeShaft.length<=1){return timeShaft;}
return _explain(timeShaft);};function _formatTimeStrByAppConfig(data){var formatArr,formatStr,regularArr,language,formatObj;switch(AppConfig.projectTimeFormat||0){case 0:formatArr=['yyyy-mm-dd'];regularArr=[/^[\d-]{10}$/];language='en';break;case 1:formatArr=['M d, yyyy','M d hh:ii','M, yyyy','M, yyyy','M d'];regularArr=[/^[\d-]{10}$/,/^[\d-]{5} [\d:]{5}$/,/^[\d-]{7}$/,/^[\d-]{6}$/,/^[\d-]{5}$/];language='en';break;case 2:formatArr=['dd/mm/yyyy','dd/mm hh:ii','mm/yyyy','mm/yyyy','dd/mm'];regularArr=[/^[\d-]{10}$/,/^[\d-]{5} [\d:]{5}$/,/^[\d-]{7}$/,/^[\d-]{6}$/,/^[\d-]{5}$/];language='en';break;default:formatArr=['yyyy-mm-dd'];regularArr=[/^[\d-]{10}$/];language='en';}
for(var i=0,len=regularArr.length;i<len;i++){if(regularArr[i].test(data)){formatStr=formatArr[i];break;}}
if(formatStr){formatObj=(function _parseFormat(formatStr){var reg=/hh?|HH?|p|P|ii?|ss?|dd?|DD?|mm?|MM?|yy(?:yy)?/g;var separators=formatStr.replace(reg,'\0').split('\0');var parts=formatStr.match(reg);if(!separators||!separators.length||!parts||parts.length==0){throw new Error("Invalid date format.");}
return{separators:separators,parts:parts};})(formatStr);return{formatStr:formatStr,language:language,formatObj:formatObj};}else{return;}}
if(window.echarts){echarts.registerPreprocessor(function(option){var pattern;var formatInfo,firstValue;if(option.xAxis&&option.xAxis.length){option.xAxis.forEach(function(row){if(row.data&&row.data.length){pattern=_getTimePattern(row.data);formatInfo=_formatTimeStrByAppConfig(row.data[0]);if(pattern){row.data=row.data.map(function(row){return row.substr(0,16);});firstValue=_formatTimeStr(row.data[0],pattern);formatInfo=_formatTimeStrByAppConfig(firstValue);if(formatInfo){row.data=row.data.map(function(it,i){return timeFormat(it,formatInfo.formatObj,formatInfo.language);});}else{row.data=row.data.map(function(it,i){return _formatTimeStr(it,pattern);});}}else if(formatInfo){row.data=row.data.map(function(it,i){return timeFormat(it,formatInfo.formatObj,formatInfo.language);});}}});}});}}(window));(function(beop){beop.apiMethod={get:'GET',post:'POST'};var api={'getSheet':{'method':beop.apiMethod.get,'url':'/point_tool/getPointTable/<project_id>/<current_page>/<page_size>/<search_text>'},'getCloudSheet':{'method':beop.apiMethod.get,'url':'/point_tool/getCloudPointTable/<project_id>/<current_page>/<page_size>/<search_text>'},'getCloudSheetByType':{'method':beop.apiMethod.get,'url':'/point_tool/getCloudPointTable/<project_id>/<current_page>/<page_size>/<search_text>/<point_type>'},'getMappingSheet':{'method':beop.apiMethod.get,'url':'/point_tool/getMappingPointTable/<project_id>/<current_page>/<page_size>/<mapped>/'},'getMappingSheetBySearch':{'method':beop.apiMethod.get,'url':'/point_tool/getMappingPointTable/<project_id>/<current_page>/<page_size>/<mapped>/<text>'},'exportSheet':{'method':beop.apiMethod.get,'url':'/point_tool/export/<project_id>'},'searchCloudPoint':{'method':beop.apiMethod.get,'url':'/point_tool/searchCloudPoint/<project_id>/<text>/'},'searchEnginePointText':{'method':beop.apiMethod.get,'url':'/point_tool/searchEnginePoint/<project_id>/<current_page>/<page_size>/<text>/'},'searchEnginePoint':{'method':beop.apiMethod.get,'url':'/point_tool/searchEnginePoint/<project_id>/<current_page>/<page_size>/'},'searchRealDataPointText':{'method':beop.apiMethod.get,'url':'/point_tool/searchRealDataPoint/<project_id>/<current_page>/<page_size>/<text>/'},'searchRealDataPoint':{'method':beop.apiMethod.get,'url':'/point_tool/searchRealDataPoint/<project_id>/<current_page>/<page_size>'},'loadServerStatus':{'method':beop.apiMethod.get,'url':'/point_tool/getServerStatus/<current_page>/<page_size>'}};beop.apiMap=$.extend(beop.apiMap||{},api);})(beop||(beop={}));(function(beop){var emit,api,param,data,apiURL,paramRegex=/\<([^\<\>]+)\>/g;emit=function(){if(arguments.length===0||!arguments[0]){beop.util.makeError('request error','api name is Null');return false;}
api=arguments[0],apiURL=api.url;if(arguments.length===2){if(paramRegex.test(api.url)){param=arguments[1];}else{data=arguments[1];}}else if(arguments.length===3){param=arguments[1];data=arguments[2];}
if(param){apiURL=api.url.replace(paramRegex,function(match,p0){return param[p0];});}
if(api.method===beop.apiMethod.get){return WebAPI.get(apiURL);}else if(api.method===beop.apiMethod.post){return WebAPI.post(apiURL,data);}};if(beop.data){beop.data.emit=emit;beop.data.paramRegex=paramRegex;}else{beop.data={emit:emit,paramRegex:paramRegex}}})(beop||(beop={}));(function($){var subEvent,pubEvent,unSubEvent,eventMap={};subEvent=function($obj,topic,fn){if(!$obj){return false;}
$obj.off(topic).on(topic,fn);if(eventMap[topic]){eventMap[topic]=$obj;}else{eventMap[topic]=$obj;}};pubEvent=function(topic,data){if(!eventMap[topic]){return false;}
if(data){eventMap[topic].trigger(topic,$.isArray(data)?data:[data]);}else{eventMap[topic].trigger(topic);}
return true;};unSubEvent=function($obj,topic){if(!eventMap[topic]){return false;}
eventMap[topic]=eventMap[topic].not($obj);if(eventMap[topic].length===0){delete eventMap[topic];}
return true;};$.spEvent={subEvent:subEvent,pubEvent:pubEvent,unSubEvent:unSubEvent};})(jQuery);(function(beop){var makeError,setConfigMap;makeError=function(name_text,msg_text,data){var error=new Error();error.name=name_text;error.message=msg_text;if(data){error.data=data;}
return error;};setConfigMap=function(arg_map){var
input_map=arg_map.input_map,settable_map=arg_map.settable_map,config_map=arg_map.config_map,key_name,error;for(key_name in input_map){if(input_map.hasOwnProperty(key_name)){if(settable_map.hasOwnProperty(key_name)){config_map[key_name]=input_map[key_name];}
else{error=makeError('Bad Input','Setting config key |'+key_name+'| is not supported');throw error;}}}};$.fn.serializeObject=function(){var obj={};this.serializeArray().map(function(item){if(/\[\]$/.test(item.name)){if(obj[item.name]){obj[item.name].push(item.value);}else{obj[item.name]=[item.value];}}else{obj[item.name]=item.value;}});return obj;};beop.util=$.extend(beop.util?beop.util:{},{makeError:makeError,setConfigMap:setConfigMap})}(beop||(beop={})));var WorkflowTool=(function(){var pic_path='/static/images/workflow/',templateStorage;function getStatusText(status){if(status==0){status='new';}
switch(status){case'new':return I18n.resource.workflow.main.NEW;case 1||'closed':return I18n.resource.workflow.main.CLOSE;case 2||'start':return I18n.resource.workflow.main.DEALING;case 3||'pause':return I18n.resource.workflow.main.PAUSED;case 4||'completed':return I18n.resource.workflow.main.FINISHED;case 5||'deleted':return I18n.resource.workflow.main.DELETED;}}
function translate(text){if(!text){return'';}
try{text=JSON.parse(text);}catch(e){}
var Translation=function(text){switch(text){case'detail':return I18n.resource.workflow.main.FAULT_INFO;case'dueDate':return I18n.resource.workflow.notice.DEADLINE;case'title':return I18n.resource.workflow.main.FAULT_TITLE;case'due_date':return I18n.resource.workflow.common.DEADLINE;case'critical':return I18n.resource.workflow.urgencyLevel.URGENCY_LEVEL;case'executor':return I18n.resource.workflow.common.EXECUTOR;case'assignTime':return I18n.resource.workflow.notice.TASK_ASSIGN_TIME;case'groupid':return I18n.resource.workflow.task.TASK_GROUP;case'tags':return I18n.resource.workflow.task.TAGS;case'verifiers':return I18n.resource.workflow.task.VERIFIERS;case'watchers':return I18n.resource.workflow.task.WATCHERS;case'op':return I18n.resource.workflow.task.STATUS;default:return text;}};var criticalTranslate=function(num){var level=I18n.resource.workflow.urgencyLevel[parseInt(num)];if(level=='undefined'||level==undefined||level==null){return''}else{return level;}};var groupIdTranslate=function(num){for(var i=0;i<beop.model.stateMap.group_list.length;i++){var groupItem=beop.model.stateMap.group_list[i];if(groupItem.id==num){if(groupItem.name=='undefined'||groupItem.name==undefined||groupItem.name==null){return''}else{return groupItem.name;}}}};var listObjTranslate=function(list){if(!list){return"";}
var text="";for(var i=0;i<list.length;i++){if(i!=list.length-1){text+=list[i].userfullname+", ";}else{text+=list[i].userfullname;}}
if(text=='undefined'||text==null||text==undefined){return''}else{return text;}};var html='<ul class="historyEdit list-unstyled">';if($.isPlainObject(text)){for(var prop in text){if(prop=='critical'){html+='<li><span class="historyConTitle">'+Translation(prop)+'</span> '+'<span class="oldName">'+(criticalTranslate(text[prop].old)?criticalTranslate(text[prop].old):'')+'</span><strong class="historyAction">'+I18n.resource.workflow.notice.TASK_MODIFY+'</strong><span class="newName">'+(criticalTranslate(text[prop].new)?criticalTranslate(text[prop].new):'')+'</span></li>';}else if(prop=='groupid'){html+='<li><span class="historyConTitle">'+Translation(prop)+'</span> '+'<span class="oldName">'+(groupIdTranslate(text[prop].old)?groupIdTranslate(text[prop].old):'')+'</span><strong class="historyAction">'+I18n.resource.workflow.notice.TASK_MODIFY+'</strong><span class="newName">'+(groupIdTranslate(text[prop].new)?groupIdTranslate(text[prop].new):'')+'</span></li>';}else if(prop=='watchers'){html+='<li><span class="historyConTitle">'+Translation(prop)+'</span> '+'<span class="oldName">'+(listObjTranslate(text[prop].old)?listObjTranslate(text[prop].old):'')+'</span><strong class="historyAction">'+I18n.resource.workflow.notice.TASK_MODIFY+'</strong><span class="newName">'+(listObjTranslate(text[prop].new)?listObjTranslate(text[prop].new):'')+'</span></li>';}else if(prop=='verifiers'){html+='<li><span class="historyConTitle">'+Translation(prop)+'</span> '+'<span class="oldName">'+(listObjTranslate(text[prop].old)?listObjTranslate(text[prop].old):'')+'</span><strong class="historyAction">'+I18n.resource.workflow.notice.TASK_MODIFY+'</strong><span class="newName">'+(listObjTranslate(text[prop].new)?listObjTranslate(text[prop].new):'')+'</span></li>';}else if(prop=='op'){html+='<li><span class="historyConTitle">'+Translation(prop)+'</span> '+'<strong class="historyAction">'+I18n.resource.workflow.notice.TASK_MODIFY+'</strong><span class="newName">'+(text[prop]?text[prop]:'')+'</span></li>';}else if(prop=='delete_reply'){html+='<li><span class="historyConTitle"></span> '+'<strong class="historyAction"></strong><span class="newName">'+(text[prop]?(text[prop]?text[prop]:''):'')+'</span></li>';}else if(prop=='reply'){html+='<li><span class="historyConTitle"></span> '+'<strong class="historyAction"></strong><span class="newName">'+(text[prop]?(text[prop]?text[prop]:''):'')+'</span></li>';}
else{if(prop!='forward'){html+='<li><span class="historyConTitle">'+Translation(prop)+'</span> '+'<span class="oldName">'+(text[prop].old?text[prop].old:'')+'</span><strong class="historyAction">'+I18n.resource.workflow.notice.TASK_MODIFY+'</strong><span class="newName">'+(text[prop].new?text[prop].new:'')+'</span></li>';}else{html+='<li><span class="historyConTitle">'+Translation(prop)+'</span> '+'<span class="oldName">'+(text[prop].old?text[prop].old:'')+'</span><strong class="historyAction">'+I18n.resource.workflow.notice.TASK_MODIFY+'</strong><span class="newName">'+(text[prop].new?text[prop].new:'')+'</span></li>';}}}
html+='</ul>';return html;}else{var textList=text.split('was renamed');if(textList.length!=2){switch(text){case'edit':return I18n.resource.workflow.notice.TASK_EDIT;case'complete':return I18n.resource.workflow.notice.TASK_FINISH;case'restart':return I18n.resource.workflow.notice.TASK_RESTART;case'start':return I18n.resource.workflow.notice.TASK_START;case'pause':return I18n.resource.workflow.notice.TASK_PAUSE;case'reply':return I18n.resource.workflow.notice.TASK_REPLY+':';case'new':return I18n.resource.workflow.notice.TASK_CREATE;case'verified':return I18n.resource.workflow.notice.TASK_VERIFIED;case'not_pass':return I18n.resource.workflow.notice.TASK_VERIFIED_FAILED;case'delete':return I18n.resource.workflow.notice.TASK_DELETE;case'forward':return I18n.resource.workflow.notice.TASK_FORWARD;case'close':return I18n.resource.workflow.notice.TASK_CLOSED;case'delete_reply':return I18n.resource.workflow.notice.DELETE_REPLY+':';default:return text;}}else{return'<p>'+'title'+':'+textList[0]+' <strong>'+I18n.resource.workflow.notice.TASK_MODIFY+'</strong>'+textList[1]+'</p>';}}}
function recordTranslate(text){switch(text){case'complete':return I18n.resource.workflow.record.FINISH;case'start':return I18n.resource.workflow.record.START;case'new':return I18n.resource.workflow.record.CREATE;case'verified':return I18n.resource.workflow.record.VERIFIED;default:return text;}}
function updateBadge(count,list){var $badge=$('#paneWorkflow').find('li[screen="mine"]').find('.badge');if(!count){$badge.text('').data('new-tasks','');}else{$badge.text(count).data('new-tasks',list);}}
function updateNewTaskCount(){if(!AppConfig['userId']){return;}
WebAPI.get('/workflow/new_task_count/'+AppConfig['userId']).done(function(r_obj){if(!r_obj.length)return false;var storageNewTask=localStorage.getItem('new_task_'+AppConfig['userId']);if(!storageNewTask){updateBadge(r_obj.length,r_obj);}else{try{storageNewTask=JSON.parse(storageNewTask);}catch(e){return false;}
var unreadList=[];for(var n=0,len=r_obj.length;n<len;n++){if($.inArray(r_obj[n],storageNewTask)===-1){unreadList.push(r_obj[n]);}}
updateBadge(unreadList.length,unreadList);localStorage.setItem('new_task_temp_'+AppConfig['userId'],result);}})}
function getTemplate(template,selector){templateStorage=templateStorage||{};var promise;if(templateStorage[template]){promise=templateStorage[template];}else{promise=templateStorage[template]=WebAPI.get(template);}
var dfd=$.Deferred();promise.done(function(result){var $result=$(result),$template=$result.find(selector).children();var $return=$template.clone()
I18n.fillArea($return)
dfd.resolve($return);});return dfd;}
function getWorkflowTemplate(selector){return getTemplate('/static/views/workflow/template.html',selector);}
function inherits(clazz,base){var clazzPrototype=clazz.prototype;function F(){}
F.prototype=base.prototype;clazz.prototype=new F();for(var prop in clazzPrototype){clazz.prototype[prop]=clazzPrototype[prop];}
clazz.constructor=clazz;}
function getUserName(rawUserName){if(rawUserName.indexOf('@')>0){return rawUserName.substring(0,rawUserName.indexOf('@'))}
return rawUserName;}
function delArrInvalidValue(arr){for(var i=0;i<arr.length;i++){if(arr[i]==''||arr[i]==null){arr.splice(i,1);i=i-1;}}
return arr;}
function screeningItem($obj,str,num){if($obj.hasClass("selectAll")){$(".task-item").show();return;}
var text=$obj.text();if(!num){$.each($(".task-item ."+str),function(index,item){var $item=$(item);var itemStatus=$item.text();if(text!==itemStatus){$item.closest(".task-item").hide();}else{$item.closest(".task-item").show();}});}else{var urgencyClass=$obj.attr("urgencyClass");$(".task-item").hide();$(".task-item ."+urgencyClass).closest(".task-item").show();}}
return{pic_path:pic_path,getStatusText:getStatusText,updateBadge:updateBadge,updateNewTaskCount:updateNewTaskCount,getWorkflowTemplate:getWorkflowTemplate,inherits:inherits,getUserName:getUserName,translate:translate,recordTranslate:recordTranslate,delArrInvalidValue:delArrInvalidValue,screeningItem:screeningItem};})();Date.prototype.format=function(fmt){var o={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours()%12==0?12:this.getHours()%12,"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),"S":this.getMilliseconds()};var week={"0":"/u65e5","1":"/u4e00","2":"/u4e8c","3":"/u4e09","4":"/u56db","5":"/u4e94","6":"/u516d"};if(/(y+)/.test(fmt)){fmt=fmt.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length));}
if(/(E+)/.test(fmt)){fmt=fmt.replace(RegExp.$1,((RegExp.$1.length>1)?(RegExp.$1.length>2?"/u661f/u671f":"/u5468"):"")+week[this.getDay()+""]);}
for(var k in o){if(new RegExp("("+k+")").test(fmt)){fmt=fmt.replace(RegExp.$1,(RegExp.$1.length==1)?(o[k]):(("00"+o[k]).substr((""+o[k]).length)));}}
return fmt;};Date.prototype.timeFormat=function(format,type,language){var date=this;if(format&&(typeof format=='string'||typeof format=='object')){if(typeof format=='object'&&(!format.separators||!format.parts)){format='yyyy-mm-dd hh:ii:ss';}}else{format='yyyy-mm-dd hh:ii:ss';}
if(arguments.length>2){type=arguments[1];language=arguments[2];}else if(arguments.length==2){if(typeof arguments[1]=='number'){type=arguments[1];}
if(typeof arguments[1]=='string'){language=arguments[1];}}
var DATES={en:{"days":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],"daysShort":["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],"daysMin":["Su","Mo","Tu","We","Th","Fr","Sa","Su"],"months":["January","February","March","April","May","June","July","August","September","October","November","December"],"monthsShort":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"meridiem":["am","pm"]}};language=language?(DATES[language]?language:'en'):'en';var formatObj=(function(formatStr){if(typeof formatStr=='object'){return formatStr;}
if(type){formatStr=timeFormatChange(formatStr,type);}
var reg=/hh?|HH?|p|P|ii?|ss?|dd?|DD?|mm?|MM?|yy(?:yy)?/g;var separators=formatStr.replace(reg,'\0').split('\0');var parts=formatStr.match(reg);if(!separators||!separators.length||!parts||parts.length==0){throw new Error("Invalid date format.");}
return{separators:separators,parts:parts};})(format);var val={yy:date.getFullYear().toString().substring(2),yyyy:date.getFullYear(),m:date.getMonth()+1,M:DATES[language].monthsShort[date.getMonth()],MM:DATES[language].months[date.getMonth()],d:date.getDate(),D:DATES[language].daysShort[date.getDay()],DD:DATES[language].days[date.getDay()],p:(DATES[language].meridiem.length==2?DATES[language].meridiem[date.getHours()<12?0:1]:''),h:date.getHours(),i:date.getMinutes(),s:date.getSeconds()};if(DATES[language].meridiem.length==2){val.H=(val.h%12==0?12:val.h%12);}
else{val.H=val.h;}
val.HH=(val.H<10?'0':'')+val.H;val.P=val.p.toUpperCase();val.hh=(val.h<10?'0':'')+val.h;val.ii=(val.i<10?'0':'')+val.i;val.ss=(val.s<10?'0':'')+val.s;val.dd=(val.d<10?'0':'')+val.d;val.mm=(val.m<10?'0':'')+val.m;var finTime='';for(var i=0,len=formatObj.parts.length;i<len;i++){finTime+=val[formatObj.parts[i]]+(formatObj.separators[i+1]?formatObj.separators[i+1]:'');}
return finTime;}
$.fn.serializeObject=function(){var obj={};this.serializeArray().map(function(item){if(/\[\]$/.test(item.name)){if(obj[item.name]){obj[item.name].push(item.value);}else{obj[item.name]=[item.value];}}else{obj[item.name]=item.value;}});return obj;};(function($){$.fn.drags=function(opt){opt=$.extend({handle:"",cursor:"move"},opt);var $el;if(opt.handle===""){$el=this;}else{$el=this.find(opt.handle);}
return $el.on("mousedown",function(e){var $this=$(this),$drag;if($(e.target).closest('.notDraggable').length>0){$this.css('cursor','default');return true;}
$this.css('cursor',opt.cursor);if(opt.handle===""){$drag=$this.addClass('draggable');}else{$drag=$this.addClass('active-handle').closest('.draggable-panel').addClass('draggable');}
var z_idx=$drag.css('z-index'),drg_h=$drag.outerHeight(),drg_w=$drag.outerWidth(),pos_y=$drag.offset().top+drg_h-e.pageY,pos_x=$drag.offset().left+drg_w-e.pageX;$drag.css('z-index',1000).parents().on("mousemove",function(e){$('.draggable').offset({top:e.pageY+pos_y-drg_h,left:e.pageX+pos_x-drg_w}).on("mouseup",function(){$(this).removeClass('draggable').css('z-index',z_idx);});});e.preventDefault();}).on("mouseup",function(){var $this=$(this);if(opt.handle===""){$this.removeClass('draggable');}else{$this.removeClass('active-handle').closest('.draggable-panel').removeClass('draggable');}});};})(jQuery);function UpdateQueryString(key,value,url){if(!url)url='';var re=new RegExp("([?&])"+key+"=.*?(&|#|$)(.*)","gi"),hash;if(re.test(url)){if(typeof value!=='undefined'&&value!==null)
return url.replace(re,'$1'+key+"="+value+'$2$3');else{hash=url.split('#');url=hash[0].replace(re,'$1$3').replace(/(&|\?)$/,'');if(typeof hash[1]!=='undefined'&&hash[1]!==null)
url+='#'+hash[1];return url;}}
else{if(typeof value!=='undefined'&&value!==null){var separator=url.indexOf('?')!==-1?'&':'?';hash=url.split('#');url=hash[0]+separator+key+'='+value;if(typeof hash[1]!=='undefined'&&hash[1]!==null)
url+='#'+hash[1];return url;}
else
return url;}}
(function(){var beop_tmpl_cache={};this.beopTmpl=function tmpl(str,data){var fn=!/\W/.test(str)?beop_tmpl_cache[str]=beop_tmpl_cache[str]||tmpl(document.getElementById(str).innerHTML):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};"+"with(obj){p.push('"+
str.replace(/[\r\t\n]/g," ").split(/<!/).join("\t").replace(/((^|!>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)!>/g,"',$1,'").split("\t").join("');").split(/!>/).join("p.push('").split("\r").join("\\'")
+"');}return p.join('');");return data?fn(data):fn;};})();function naturalCompare(a,b){var ax=[],bx=[];a.replace(/(\d+)|(\D+)/g,function(_,$1,$2){ax.push([$1||Infinity,$2||""])});b.replace(/(\d+)|(\D+)/g,function(_,$1,$2){bx.push([$1||Infinity,$2||""])});while(ax.length&&bx.length){var an=ax.shift();var bn=bx.shift();var nn=(an[0]-bn[0])||an[1].localeCompare(bn[1]);if(nn)return nn;}
return ax.length-bx.length;}
InitI18nResource().always(function(rs){I18n=new Internationalization(null,rs);});(function(beop){var configMap={host:'192.168.1.96',port:'5001'},stateMap={socket:null};var init,enterProject,exitProject,changeProject,connect;init=function(){stateMap.socket=io.connect('//'+configMap.host+':'+configMap.port);};enterProject=function(id){if(!id){return false;}
stateMap.socket.emit('enter project',id,function(message){console.log(message);});stateMap.socket.on('message',function(msg){console.log('message: '+msg);});};exitProject=function(id){stateMap.socket.emit('exit project',id,function(message){console.log(message);});};changeProject=function(oldId,newId){exitProject(oldId);enterProject(newId);};connect=function(){stateMap.socket.on('connect',function(message){})};beop.ws=beop.ws||{};beop.ws={init:init,enterProject:enterProject,exitProject:exitProject,connect:connect};}(beop||(beop={})));(function(beop){var configMap={htmlURL:'/point_tool/html/pointTemplate',algorithmUrl:'/algorithm/'},stateMap={option:null,editor:null,logic:'',zTreeInstance:null,treeData:null,zTreeNodeList:[],currentTreeNode:null,importStatus:'show',importData:null},jqueryMap={},setJqueryMap,init,destroy,bindEvents,refreshEditor,zTreeOnClick,getInstance,addFolder,loadAllTree,refreshTree,changeToZTreeNodes,getLogic,templateSearch,refreshImportTemplateInfo,importTemplateEdit,importTemplateSave,saveAsTemplateConfirm,templateImportConfirm,zTreeBeforeRemove,zTreeOnRemove,zTreeShowRemoveBtn;setJqueryMap=function(){var $container=stateMap.$container;jqueryMap={$container:$container,$editorBox:$container.find('#editorBox'),$codeEditorTextarea:$container.find('#codeEditorTextarea'),$templateTreeMenu:$container.find('#templateTreeMenu'),$templateRight:$container.find('#templateRight'),$addFolder:$container.find('#addFolder'),$addFolderInput:$container.find('#addFolderInput'),$templateWinBox:$container.find('#templateWinBox'),$saveAsTemplateConfirm:$container.find('#saveAsTemplateConfirm'),$templateImportConfirm:$container.find('#templateImportConfirm'),$templateName:$container.find('#templateName'),$templateMessage:$container.find('#templateMessage'),$templateImportWin:$container.find('#templateImportWin'),$saveAsTemplateWin:$container.find('#saveAsTemplateWin'),$templateSearch:$container.find('#templateSearch')};};init=function(option){stateMap.option=option;stateMap.$container=option.container;WebAPI.get(configMap.htmlURL).done(function(resultHtml){stateMap.$container.html(resultHtml);setJqueryMap();if(option.opType==='save'){jqueryMap.$templateWinBox.empty().append(beopTmpl('tpl_save_as_template'));}else if(option.opType==='import'){jqueryMap.$templateWinBox.empty().append(beopTmpl('tpl_import_template'));refreshImportTemplateInfo();}
stateMap.$container.find('.templateWin').modal({keyboard:false,backdrop:'static'});if(option.opType=='save'){if(option.logic){stateMap.logic=option.logic;}}
loadAllTree();stateMap.$container.show();bindEvents();});};destroy=function(){stateMap.zTreeInstance&&stateMap.zTreeInstance.destroy();jqueryMap.$container.empty();stateMap={option:null,editor:null,logic:'',zTreeInstance:null,treeData:null,zTreeNodeList:[],currentTreeNode:null};};bindEvents=function(){setJqueryMap();jqueryMap.$container.off('click.addFolder').on('click.addFolder','#addFolder',addFolder);jqueryMap.$container.off('click.saveAsTemplateConfirm').on('click.saveAsTemplateConfirm','#saveAsTemplateConfirm',saveAsTemplateConfirm);jqueryMap.$container.off('click.templateImportConfirm').on('click.templateImportConfirm','#templateImportConfirm',templateImportConfirm);jqueryMap.$container.off('click.importTemplateEdit').on('click.importTemplateEdit','#importTemplateEdit',importTemplateEdit);jqueryMap.$container.off('click.importTemplateSave').on('click.importTemplateSave','#importTemplateSave',importTemplateSave);jqueryMap.$templateImportWin.off('hide.bs.modal').on('hide.bs.modal',destroy);jqueryMap.$saveAsTemplateWin.off('hide.bs.modal').on('hide.bs.modal',destroy);jqueryMap.$templateImportWin.off('shown.bs.modal').on('shown.bs.modal',refreshEditor);jqueryMap.$saveAsTemplateWin.off('shown.bs.modal').on('shown.bs.modal',refreshEditor);jqueryMap.$templateSearch.off().on('keydown',templateSearch);};function getTreeNodeUrl(treeId,treeNode){return configMap.algorithmUrl+'folder/'+treeNode.id;}
refreshTree=function(result){var zTreeSetting={view:{selectedMulti:false},data:{simpleData:{enable:true}},callback:{onClick:zTreeOnClick,beforeRemove:zTreeBeforeRemove,onRemove:zTreeOnRemove},async:{enable:true,url:getTreeNodeUrl},edit:{enable:true,showRemoveBtn:zTreeShowRemoveBtn,showRenameBtn:false}};stateMap.treeData=result;stateMap.zTreeNodeList=[];changeToZTreeNodes();stateMap.zTreeInstance=$.fn.zTree.init(jqueryMap.$templateTreeMenu,zTreeSetting,stateMap.zTreeNodeList);};loadAllTree=function(){WebAPI.get(configMap.algorithmUrl+'folder/null').done(function(result){if(result.length){refreshTree(result);}});};templateSearch=function(e){if(e.keyCode===13){var val=jqueryMap.$templateSearch.val();if(val){WebAPI.get(configMap.algorithmUrl+'search/'+val).done(function(result){if(result.length){refreshTree(result);}});}else{loadAllTree();}}};importTemplateEdit=function(){stateMap.importStatus='edit';refreshImportTemplateInfo();};importTemplateSave=function(){stateMap.importStatus='show';stateMap.importData.name=$("#import_tpl_name").val().trim();stateMap.importData.note=$("#import_tpl_note").val().trim();refreshImportTemplateInfo();};saveAsTemplateConfirm=function(){var name=jqueryMap.$templateName.val().trim(),note=jqueryMap.$templateMessage.val().trim();if(!name){alert(I18n.resource.debugTools.template.TEMPLATE_NAME_REQUIRED);return;}
if(!stateMap.currentTreeNode||!stateMap.currentTreeNode.isParent){alert(I18n.resource.debugTools.template.PLEASE_SELECT_A_FOLDER);return;}
WebAPI.post(configMap.algorithmUrl+'save/',{'_id':ObjectId(),'parent_id':stateMap.currentTreeNode.id,'name':name,'note':note,'isFolder':false,'content':stateMap.editor.doc.getValue()}).done(function(result){if(result){stateMap.zTreeInstance.addNodes(stateMap.zTreeInstance.getNodeByTId(stateMap.currentTreeNode.tId),{'id':result,'pId':stateMap.currentTreeNode.id,'name':name});alert(I18n.resource.common.ADD_SUCCESS);jqueryMap.$saveAsTemplateWin.modal('hide');}});};templateImportConfirm=function(){stateMap.option.confirmCallBack?stateMap.option.confirmCallBack():'';};changeToZTreeNodes=function(){for(var i=0;i<stateMap.treeData.length;i++){var data=stateMap.treeData[i];var item={};item.id=data._id;item.name=data.name;if(data.parent_id&&data.parent_id.length==24){item.pId=data.parent_id}
if(data.isFolder){item.isParent=true;}
stateMap.zTreeNodeList.push(item);}};getInstance=function(){return stateMap.option;};refreshEditor=function(){var readOnlyFlag,logic=stateMap.logic?stateMap.logic:'# code here';jqueryMap.$container.find('.CodeMirror').remove();setJqueryMap();stateMap.editor=null;jqueryMap.$codeEditorTextarea.text(logic);readOnlyFlag=(stateMap.option.opType=='import');stateMap.editor=CodeMirror.fromTextArea(document.getElementById('codeEditorTextarea'),{mode:"python",lineNumbers:true,readOnly:readOnlyFlag,autofocus:true});stateMap.editor.refresh();I18n.fillArea(jqueryMap.$container);};zTreeOnClick=function(e,treeId,treeNode){stateMap.currentTreeNode=treeNode;stateMap.importStatus='show';if(stateMap.option.opType=='import'){if(!treeNode.isParent){Spinner.spin(jqueryMap.$templateRight.get(0));var nodeId=treeNode._id?treeNode._id:treeNode.id;WebAPI.get(configMap.algorithmUrl+nodeId).done(function(result){if(result){stateMap.logic=result.content;stateMap.importData=result;refreshImportTemplateInfo();jqueryMap.$templateRight.children().show();refreshEditor();}}).always(function(){Spinner.stop();});}}};zTreeShowRemoveBtn=function(treeId,treeNode){return treeNode.creator==AppConfig.userId;};zTreeBeforeRemove=function(treeId,treeNode){confirm(I18n.resource.dataManage.REMOVE_CONFIRM,function(){Spinner.spin(document.body);WebAPI.post(configMap.algorithmUrl+'delete/',{id:treeNode._id}).done(function(result){if(result.success){stateMap.zTreeInstance.removeNode(treeNode);if(stateMap.option.opType=='import'){jqueryMap.$templateRight.children().hide();}}else{alert.danger('delete failed '+result.msg?result.msg:'');}
alert(I18n.resource.common.DELETE_SUCCESS);}).fail(function(){alert.danger('delete failed, server is busy.');}).always(function(){Spinner.stop();})});return false;};zTreeOnRemove=function(e,treeId,treeNode){return false;};refreshImportTemplateInfo=function(){$("#templateInfo").empty().append(beopTmpl('tpl_import_template_info',{status:stateMap.importStatus,data:stateMap.importData}));I18n.fillArea(jqueryMap.$container);};getLogic=function(){return stateMap.editor.doc.getValue();};addFolder=function(){var name=jqueryMap.$addFolderInput.val().trim();if(name){WebAPI.post(configMap.algorithmUrl+'folder/add/',{'_id':ObjectId(),'parent_id':'null','name':name,'note':'','isFolder':true}).done(function(result){if(result){if(stateMap.zTreeInstance){stateMap.zTreeInstance.addNodes(null,{'name':name,'id':result,'pId':0,'isParent':true});stateMap.zTreeInstance.refresh();}else{refreshTree([{'_id':result,'isFolder':true,'name':name,'note':"",'parent_id':"null"}]);}}});}else{alert(I18n.resource.debugTools.template.FOLDER_NAME_REQUIRED);}};beop.template=beop.template||{};beop.template={init:init,destroy:destroy,getInstance:getInstance,getLogic:getLogic};}(beop||(beop={})));(function(beop){var configMap={date_format_full:'yyyy-MM-dd HH:mm:ss',date_format_YMD:'yyyy-MM-dd'},stateMap={},isFake,emit,init;isFake=false;emit=isFake?beop.fake.emit:beop.data.emit;var sheetModel,dtuModel;var importSheet,exportSheet,getSheet,getCloudSheet,getMappingSheet,searchCloudPoint,searchEnginePoint,searchRealDataPoint,loadServerStatus;sheetModel=(function(){importSheet=function(){};exportSheet=function(projectId){return emit(beop.apiMap.exportSheet,{'project_id':projectId});};getSheet=function(projectId,current_page,page_size,search_text){return emit(beop.apiMap.getSheet,{'project_id':projectId,"current_page":current_page,"page_size":page_size,"search_text":search_text});};getCloudSheet=function(projectId,current_page,page_size,search_text,point_type){if(point_type){return emit(beop.apiMap.getCloudSheetByType,{'project_id':projectId,"current_page":current_page,"page_size":page_size,"search_text":search_text,"point_type":point_type});}else{return emit(beop.apiMap.getCloudSheet,{'project_id':projectId,"current_page":current_page,"page_size":page_size,"search_text":search_text});}};getMappingSheet=function(projectId,current_page,page_size,text,mapped){var opts={'project_id':projectId,"current_page":current_page,"page_size":page_size};if(!mapped){mapped='all';}
opts['mapped']=mapped;if(text){opts['text']=text;return emit(beop.apiMap.getMappingSheetBySearch,opts);}
return emit(beop.apiMap.getMappingSheet,opts);};searchCloudPoint=function(projectId,text){return emit(beop.apiMap.searchCloudPoint,{'text':text,'project_id':projectId});};searchEnginePoint=function(projectId,text,current_page,page_size){if(!current_page){current_page=1;}
if(!page_size){page_size=10;}
if(text){return emit(beop.apiMap.searchEnginePointText,{'text':text,'project_id':projectId,'current_page':current_page,'page_size':page_size});}else{return emit(beop.apiMap.searchEnginePoint,{'project_id':projectId,'current_page':current_page,'page_size':page_size});}};searchRealDataPoint=function(projectId,text,current_page,page_size){if(!current_page){current_page=1;}
if(!page_size){page_size=10;}
if(text){return emit(beop.apiMap.searchRealDataPointText,{'text':text,'project_id':projectId,'current_page':current_page,'page_size':page_size});}else{return emit(beop.apiMap.searchRealDataPoint,{'project_id':projectId,'current_page':current_page,'page_size':page_size});}};loadServerStatus=function(){return emit(beop.apiMap.loadServerStatus);};return{importSheet:importSheet,exportSheet:exportSheet,getSheet:getSheet,getCloudSheet:getCloudSheet,getMappingSheet:getMappingSheet,searchCloudPoint:searchCloudPoint,searchRealDataPoint:searchRealDataPoint,searchEnginePoint:searchEnginePoint,loadServerStatus:loadServerStatus}})();dtuModel=(function(){loadServerStatus=function(current_page,page_size){if(!current_page){current_page=1;}
if(!page_size){page_size=10;}
return emit(beop.apiMap.loadServerStatus,{'current_page':current_page,'page_size':page_size});};return{loadServerStatus:loadServerStatus}})();init=function(){};beop.ctModel={init:init,sheetModel:sheetModel,dtuModel:dtuModel}})
(beop||(beop={}));(function(beop){var configMap={htmlURL:'/static/app/CxTool/views/toolLogin.html',settable_map:{sheetModel:true},sheetModel:null},stateMap={},jqueryMap={},setJqueryMap,configModel,init,onToolLogin;setJqueryMap=function(){var $container=stateMap.$container;jqueryMap={$container:$container,$toolLoginBtn:$("#toolLoginBtn"),$toolLoginName:$("#toolLoginName"),$toolLoginPwd:$("#toolLoginPwd")};};configModel=function(input_map){beop.util.setConfigMap({input_map:input_map,settable_map:configMap.settable_map,config_map:configMap});return true;};init=function($container){stateMap.$container=$container;$.when($.get(configMap.htmlURL)).done(function(resultHtml){stateMap.$container.html(resultHtml);setJqueryMap();jqueryMap.$toolLoginBtn.off().on('click',onToolLogin);});};onToolLogin=function(){if((jqueryMap.$toolLoginName.val()!="")&&(jqueryMap.$toolLoginPwd.val()!="")){location.hash="#pointTable";}};beop.view=beop.view||{};beop.view.login={configModel:configModel,init:init};}(beop||(beop={})));(function(beop){var i18n=I18n.resource.debugTools.sitePoint,i18n_sheetHeaders=I18n.resource.debugTools.sheetHeaders,i18n_info=I18n.resource.debugTools.info,i18n_point=I18n.resource.debugTools.sitePoint;var configMap={htmlURL:'/point_tool/html/pointTable',settable_map:{sheetModel:true,dtu_server_host:''},dtu_server_host:'',sheetModel:null,page_size:50},stateMap={sheetInstance:null,sheetHeaders:[i18n_sheetHeaders.ID_PHYSICAL,i18n_sheetHeaders.COMMENT,i18n_sheetHeaders.SOURCE_OR_TYPE,i18n_sheetHeaders.TIME,i18n_sheetHeaders.REAL_TIME_DATA,i18n_sheetHeaders.UNIT,i18n_sheetHeaders.R_W_ATTR,i18n_sheetHeaders.PARAMETER_1,i18n_sheetHeaders.PARAMETER_2,i18n_sheetHeaders.PARAMETER_3,i18n_sheetHeaders.PARAMETER_4,i18n_sheetHeaders.PARAMETER_5,i18n_sheetHeaders.PARAMETER_6,i18n_sheetHeaders.PARAMETER_7,i18n_sheetHeaders.PARAMETER_8,i18n_sheetHeaders.PARAMETER_9,i18n_sheetHeaders.PARAMETER_10,i18n_sheetHeaders.PARAMETER_11,i18n_sheetHeaders.PARAMETER_12,i18n_sheetHeaders.PARAMETER_13,i18n_sheetHeaders.PARAMETER_14,i18n_sheetHeaders.STORAGE_PERIOD,i18n_sheetHeaders.CUSTOM,i18n_sheetHeaders.SYSTEM,i18n_sheetHeaders.EQUIPMENT,i18n_sheetHeaders.TYPE],sheetDataType:{source:['phoenix370','simense1200','simense300','simense1200TCP','ab500','honeywellebi','modbus','vpoint','bacnet','protocol104','lonworks','DB-Access','DB-SQLServer','DB-Oracle','DB-MySQL','custom1','custom2','custom3','custom4','custom5','DanfossFCProtocol','Insight','WinCC1','KinCC1','KingView1','ArchestrA3','KEPware4'],unit:['%','kPa','','h','Hz','V','Kw','ls','KWh','m3/h'],rwAttr:['R','W'],storecycle:[i18n.MEMORY_CYCLE1,i18n.MEMORY_CYCLE2,i18n.MEMORY_CYCLE3,i18n.MEMORY_CYCLE4,i18n.MEMORY_CYCLE5,i18n.MEMORY_CYCLE6,i18n.MEMORY_CYCLE7,i18n.MEMORY_CYCLE8,i18n.MEMORY_CYCLE9,i18n.MEMORY_CYCLE10],system:[i18n.SYSTEM0,i18n.SYSTEM1,i18n.SYSTEM2,i18n.SYSTEM3,i18n.SYSTEM4],device:[i18n.EQUIPMENT0,i18n.EQUIPMENT1,i18n.EQUIPMENT2,i18n.EQUIPMENT3,i18n.EQUIPMENT4,i18n.EQUIPMENT5,i18n.EQUIPMENT6],type:[i18n.TYPES0,i18n.TYPES1,i18n.TYPES2,i18n.TYPES3,i18n.TYPES4,i18n.TYPES5,i18n.TYPES6,i18n.TYPES7,i18n.TYPES8,i18n.TYPES9,i18n.TYPES10]},searchIndex:0,currentPointIndex:0,changedList:[],isValidate:true,dtu:{},currentPage:1,pointTotal:0,is_load_setting:false,operateType:''},jqueryMap={},storage,setJqueryMap,configModel,importSheet,init,loadSheet,onNewPoint,onEditPoint,onDeletePoint,onClearPoint,renderSheet,onJumpPointSet,onUndoPoint,onRedoPoint,onSearchTextKeyDown,onEditPointConfirm,onPointUpdateAll,getPointIndex,getParamsInfo,deleteRows,fillTrPointData,isExistPointName,getPointSetting,createChosen,validator_point_name,getPointEditParamsInfo,reverseSheetDataType,loadPointSetting,loadPointTable,refreshSourceTypeTableSelector,autoSave,destroy,onPartialPointUpdateToCore,onAddPointSourceTypeSubmit,onUpdatePointSourceTypeSubmit,refreshSourceTypeSelector,onDeletePointType,onUpdateRowConfirm,onDeletePartialPoints,onChangeProject,synPointList,paginationRefresh;storage=window.localStorage;setJqueryMap=function(){var $container=stateMap.$container;jqueryMap={$container:$container,$wrapper:$('#wrapper'),$sheet:$container.find('.sheet'),$editPointWin:$container.find('#editPointWin'),$isDelPointWin:$container.find('#isDelPointWin'),$isUpdatePointWin:$container.find('#isUpdatePointWin'),$point_set_btn:$container.find('#point_set'),$point_add_btn:$container.find('#point_add'),$point_edit_btn:$container.find('#point_edit'),$point_delete_btn:$container.find('#point_delete'),$point_clear_btn:$container.find('#point_clear'),$point_undo_btn:$container.find('#point_undo'),$point_redo_btn:$container.find('#point_redo'),$point_prev_btn:$container.find('#point_prev'),$point_next_btn:$container.find('#point_next'),$point_search_replace_btn:$container.find('#point_search_replace'),$point_search_replace_confirm_btn:$container.find('#searchOrReplaceConfirm'),$select_project:$container.find('#select_project'),$text_search:$container.find('#text_search'),$text_replace:$container.find('#text_replace'),$uploadInput:$container.find('#uploadInput'),$point_id:$container.find('#point_id'),$point_name:$container.find('#point_name'),$point_source:$container.find('#point_source'),$point_notes:$container.find('#point_notes'),$point_unit:$container.find('#point_unit'),$point_rw_attr:$container.find('#point_rw_attr'),$point_bind_set:$container.find('.point_bind_set'),$point_max:$container.find('#point_max'),$point_min:$container.find('#point_min'),$point_jurisdiction:$container.find('#point_jurisdiction'),$point_storage_period:$container.find('#point_storage_period'),$point_custom:$container.find('#point_custom'),$point_system:$container.find('#point_system'),$point_device:$container.find('#point_device'),$point_type:$container.find('#point_type'),$point_export:$container.find('#point_export'),$pointRelatedWrapper:$container.find('#pointRelatedWrapper'),$deleteRowConfirm:$container.find('#deleteRowConfirm'),$updateRowConfirm:$container.find('#updateRowConfirm'),$editTitle:$container.find('#editTitle'),$pointForm:$container.find('#pointForm'),$point_setting:$container.find('#point_setting'),$editPointConfirm:$container.find('#editPointConfirm'),$point_set_source:$container.find('#point_set_source'),$point_setting_edit_ul:$container.find('#point_setting_edit_ul'),$point_set_add_Wrapper:$container.find('#point_set_add_Wrapper'),$point_set_edit_Wrapper:$container.find('#point_set_edit_Wrapper'),$point_set_edit_name_param:$container.find('#point_set_edit_name_param'),$delete_point_list:$container.find('.delete-points'),$update_point_list:$container.find('.update-points'),$count:$container.find('.count'),$add_source_form:$container.find('.add-source-form'),$update_source_form:$container.find('.update-source-form'),$del_point_type:$container.find('#del-point-type'),$point_update_partial:$container.find('#point_update_partial'),$reset_core:$container.find('#reset_core'),$point_delete_partial:$container.find('#point_delete_partial'),$pointPagination:$("#pointPagination"),$syn_point_list:$('#syn_point_list'),$pointSetWin:$('#pointSetWin'),$inputPointNameSubmit:$('#inputPointNameSubmit'),$editPointNameSubmit:$("#editPointNameSubmit"),$paginationWrapper:$("#paginationWrapper"),$point_update_all:$('#point_update_all')};};configModel=function(input_map){beop.util.setConfigMap({input_map:input_map,settable_map:configMap.settable_map,config_map:configMap});return true;};init=function($container,page){stateMap.$container=$container;stateMap.is_load_setting=false;loadPointTable(page);stateMap.currentPage=parseInt(page);};paginationRefresh=function(totalNum){var totalPages=Math.ceil(totalNum/configMap.page_size);jqueryMap.$paginationWrapper.empty().html('<ul id="pointPagination" class="pagination"></ul>');while(totalPages<stateMap.currentPage&&stateMap.currentPage>1){stateMap.currentPage=stateMap.currentPage-1;}
var pageOption={first:'&laquo;&laquo',prev:'&laquo;',next:'&raquo;',last:'&raquo;&raquo;',startPage:stateMap.currentPage?stateMap.currentPage:1,totalPages:!totalPages?1:totalPages,onPageClick:function(event,page){location.hash="#pointTable/"+page;}};stateMap.pagination=$("#pointPagination").twbsPagination(pageOption);};onDeletePartialPoints=function(){var update_list=[],update_points=[];var selection=stateMap.sheetInstance.getSelected();if(!selection){Alert.warning(document.body,i18n_info.CHOOSE_DELETE_POINTS).showAtTop(2000);return false;}
var data=stateMap.sheetInstance.getData();var startIndex,endIndex;if(selection[0]<=selection[2]){startIndex=selection[0];endIndex=selection[2];}else{startIndex=selection[2];endIndex=selection[0];}
for(var start=startIndex,end=endIndex+1;start<end;start++){update_list.push({index:start,data:data[start]});update_points.push(data[start].value);}
jqueryMap.$isUpdatePointWin.modal();jqueryMap.$update_point_list.html('');jqueryMap.$update_point_list.append(beopTmpl('tpl_point_list',{list:update_list}));stateMap.update_list=update_list;stateMap.update_points=update_points;stateMap.command='delete';};onPartialPointUpdateToCore=function(){var update_list=[],update_points=[];var selection=stateMap.sheetInstance.getSelected();if(!selection){Alert.warning(document.body,i18n_info.CHOOSE_DOWNLOAD_POINT).showAtTop(2000);return false;}
var data=stateMap.sheetInstance.getData();var startIndex,endIndex;if(selection[0]<=selection[2]){startIndex=selection[0];endIndex=selection[2];}else{startIndex=selection[2];endIndex=selection[0];}
for(var start=startIndex,end=endIndex+1;start<end;start++){update_list.push({index:start,data:data[start]});update_points.push(data[start].value);}
jqueryMap.$isUpdatePointWin.modal();jqueryMap.$update_point_list.html('');jqueryMap.$update_point_list.append(beopTmpl('tpl_point_list',{list:update_list}));stateMap.update_list=update_list;stateMap.update_points=update_points;stateMap.command='update';};onUpdateRowConfirm=function(){if(!stateMap.update_list.length){return false;}
spinner.spin($('#isUpdatePointWin .modal-content').get(0));if(stateMap.command==='update'){var postData={data:stateMap.update_list,project_id:stateMap.project_id};WebAPI.post('/point_tool/updatePartialToCore',postData).done(function(result){if(result.success){jqueryMap.$isUpdatePointWin.modal('hide');Alert.success(document.body,i18n_info.UPLOAD_POINT_SUCCESS.format(result.data.resp)).showAtTop(2000);}else{Alert.danger(document.body,result.msg).showAtTop(2000);}}).always(function(e){jqueryMap.$isUpdatePointWin.modal('hide');if(200==e.status){Alert.success(document.body,i18n_info.UPDATE_SUCCESS).showAtTop(2000);}
spinner.stop();})}else if(stateMap.command==='delete'){var postData={data:stateMap.update_list,project_id:stateMap.project_id};WebAPI.post('/point_tool/deletePartialPoint',postData).done(function(result){if(result.success){jqueryMap.$isUpdatePointWin.modal('hide');Alert.success(document.body,i18n_info.UPLOAD_POINT_SUCCESS.format(result.data.resp)).showAtTop(2000);}else{Alert.danger(document.body,result.msg).showAtTop(2000);}}).always(function(e){jqueryMap.$isUpdatePointWin.modal('hide');if(200==e.status){Alert.success(document.body,i18n_info.DELETE_SUCCESS).showAtTop(2000);}
spinner.stop();});WebAPI.ajaxForDebugTool({type:'POST',data:{'data':JSON.stringify(stateMap.update_points)}},configMap.dtu_server_host,stateMap.dtu.dtuname,'deletePartialPoint').done(function(result){if(result.success){Alert.success(document.body,i18n_info.DELETE_COMMAND_SUCCESSFULLY.format(result.data.resp)).showAtTop(2000);jqueryMap.$isUpdatePointWin.modal('hide');}else{Alert.danger(document.body,result.msg).showAtTop(2000);}}).fail(function(){Alert.danger(document.body,i18n_info.SYSTEM_ERROR).showAtTop(2000);}).always(function(){spinner.stop();})}};autoSave=function(){stateMap.intervalID_autoSave=setInterval(function(){if(stateMap.changedList.length){WebAPI.post('/point_tool/autoSave/'+stateMap.project_id+'/',stateMap.changedList).done(function(result){if(result.success){stateMap.changedList=[];}})}},3000)};isExistPointName=function(pointName){var data=stateMap.sheetData;for(var m=0,len=data.length;m<len;m++){if(pointName===data[m].value){return true;}}
return false;};validator_point_name=function(value,callback){if(value===false){callback(true);}else{if(!value){stateMap.isValidate=false;Alert.warning(document.body,'The point name can\'t be empty').showAtTop(2000);}else{var isExist=isExistPointName(value);if(isExist){Alert.warning(document.body,value+' already exists.').showAtTop(2000);}
stateMap.isValidate=!isExist;}
callback(stateMap.isValidate);}};deleteRows=function(){var delete_points=stateMap.delete_points;spinner.spin(document.body);$.post('/point_tool/deleteEnginePoint/'+stateMap.project_id+'/',{point_list:delete_points}).done(function(result){if(result.success){jqueryMap.$isDelPointWin.modal('hide');jqueryMap.$delete_point_list.empty();stateMap.delete_list=[];stateMap.delete_points=[];stateMap.sheetInstance=null;loadPointTable(stateMap.currentPage);}else{Alert.danger(document.body,i18n_info.DELETE_FAILED+':'+result.msg).showAtTop(2000);}}).always(function(){spinner.stop();});};reverseSheetDataType=function(){var reverser=function(list){var map={};for(var m=0,mlen=list.length;m<mlen;m++){map[list[m]]=m;}
return map;};stateMap.sheetDataType.unitMap=reverser(stateMap.sheetDataType.unit);stateMap.sheetDataType.rwAttrMap=reverser(stateMap.sheetDataType.rwAttr);stateMap.sheetDataType.storecycleMap=reverser(stateMap.sheetDataType.storecycle);};destroy=function(){if(stateMap.sheetInstance){stateMap.sheetInstance.destroy();stateMap.sheetInstance=null;}
clearInterval(stateMap.intervalID_autoSave);};renderSheet=function(data){if(!data){Alert.danger(i18n_info.DATA_IS_EMPTY).showAtTop(2000);return false;}
if(stateMap.sheetInstance){stateMap.sheetInstance.loadData(data);}else{stateMap.sheetInstance=new Handsontable(jqueryMap.$sheet.get(0),{data:data,colHeaders:stateMap.sheetHeaders,rowHeaders:true,manualColumnResize:true,manualRowResize:true,stretchH:'all',persistentState:true,autoWrapCol:true,autoWrapRow:true,fixedColumnsLeft:1,search:true,minSpareRows:0,minSpareCols:0,outsideClickDeselects:false,afterOnCellMouseDown:function(event,coords){var row=stateMap.sheetInstance.getData()[coords.row];var sourceType=stateMap.sourceTypes[row.params.source];var newHeaders=stateMap.sheetHeaders.slice();var paramIndex=storage.language=="en"?10:2;for(var i=0,len=stateMap.sheetHeaders.length;i<len;i++){if(stateMap.sheetHeaders[i]&&stateMap.sheetHeaders[i].indexOf(i18n_point.PARAMETER)!==-1){var typeKey='param'+stateMap.sheetHeaders[i].substring(paramIndex);if('undefined'===typeof sourceType[typeKey]){newHeaders[i]=stateMap.sheetHeaders[i];}else{newHeaders[i]=sourceType[typeKey]?sourceType[typeKey]:'';}}}
stateMap.sheetInstance.updateSettings({'colHeaders':newHeaders});},afterRender:function(isForced){if(isForced){jqueryMap.$count.text(stateMap.pointTotal);}},beforeValidate:function(value,row,prop,source){if(stateMap.sheetData[row].value===value){return false;}else{return value;}},afterChange:function(changes,source){if(source==='loadData'){return false;}
if(stateMap.isValidate){for(var m=0;m<changes.length;m++){var row=changes[m][0];if(stateMap.sheetInstance.getData()[row].value){stateMap.changedList.push(stateMap.sheetInstance.getData()[row]);}}}
stateMap.isValidate=true;},currentRowClassName:'currentRow',columns:[{data:"value",type:'text',validator:validator_point_name,readOnly:true},{data:"params.remark",type:'text',width:"200px"},{data:"params.source",type:'dropdown',source:stateMap.sheetDataType.source,width:"120px",allowInvalid:false},{data:"time",type:'text',readOnly:true},{data:"pointvalue",type:'text',width:"80px",readOnly:true},{data:"params.Unit",type:'dropdown',source:stateMap.sheetDataType.unit,width:"80px",allowInvalid:false},{data:"params.RWProperty",type:'dropdown',source:stateMap.sheetDataType.rwAttr,width:"80px",allowInvalid:false},{data:"params.param1",width:"100px",type:'text'},{data:"params.param2",width:"100px",type:'text'},{data:"params.param3",width:"100px",type:'text'},{data:"params.param4",width:"100px",type:'text'},{data:"params.param5",width:"100px",type:'text'},{data:"params.param6",width:"100px",type:'text'},{data:"params.param7",width:"100px",type:'text'},{data:"params.param8",width:"100px",type:'text'},{data:"params.param9",width:"100px",type:'text'},{data:"params.param10",width:"100px",type:'text'},{data:"params.param11",width:"100px",type:'text'},{data:"params.param12",width:"100px",type:'text'},{data:"params.param13",width:"100px",type:'text'},{data:"params.param14",width:"100px",type:'text'},{data:"params.storecycle",type:'dropdown',source:stateMap.sheetDataType.storecycle,width:"100px",allowInvalid:false},{data:"params.customName",width:"100px",type:'text'},{data:"params.system",type:'dropdown',source:stateMap.sheetDataType.system,width:"100px",allowInvalid:false},{data:"params.device",type:'dropdown',source:stateMap.sheetDataType.device,width:"100px",allowInvalid:false},{data:"params.type",type:'dropdown',source:stateMap.sheetDataType.type,width:"100px",allowInvalid:false}]});}
stateMap.sheetData=stateMap.sheetInstance.getData();jqueryMap.$sheet.off("click").on('click',"tbody td",getPointIndex);};onJumpPointSet=function(){jqueryMap.$pointSetWin.modal();if(!stateMap.is_load_setting){loadPointSetting();}};loadPointTable=function(page){var initPointTable=function(resultHtml){reverseSheetDataType();stateMap.$container.html(resultHtml);setJqueryMap();jqueryMap.$point_set_btn.on('click',onJumpPointSet);jqueryMap.$point_add_btn.on('click',onNewPoint);jqueryMap.$point_edit_btn.on('click',onEditPoint);jqueryMap.$point_delete_btn.on('click',onDeletePoint);jqueryMap.$point_clear_btn.click(onClearPoint);jqueryMap.$point_undo_btn.on('click',onUndoPoint);jqueryMap.$point_redo_btn.on('click',onRedoPoint);jqueryMap.$text_search.on('keydown',onSearchTextKeyDown);jqueryMap.$deleteRowConfirm.on('click',deleteRows);jqueryMap.$editPointConfirm.on('click',onEditPointConfirm);jqueryMap.$point_update_partial.on('click',onPartialPointUpdateToCore);jqueryMap.$updateRowConfirm.on('click',onUpdateRowConfirm);jqueryMap.$point_delete_partial.on('click',onDeletePartialPoints);jqueryMap.$point_update_all.on('click',onPointUpdateAll);jqueryMap.$uploadInput.change(importSheet);jqueryMap.$select_project.change(onChangeProject);jqueryMap.$point_source.change(getParamsInfo);jqueryMap.$syn_point_list.click(synPointList);if(storage.getItem("current_project")){var $option=jqueryMap.$select_project.find("option");var hasOptionFlag=false;for(var i=0;i<$option.length;i++){if($option.eq(i).val()==storage.getItem("current_project")){hasOptionFlag=true;break;}}
if(hasOptionFlag){jqueryMap.$select_project.val(storage.getItem("current_project"));}else{var firstVal=$option.eq(1).val();jqueryMap.$select_project.val(firstVal);storage.setItem("current_project",firstVal);}
loadSheet(page);}
refreshSourceTypeTableSelector();paginationRefresh(stateMap.pointTotal);I18n.fillArea(stateMap.$container);};$.get('/point_tool/pointSourceType/getAll').done(function(result){if(result.success){stateMap.sourceTypes=result.data;}else{stateMap.sourceTypes={};}
$.get(configMap.htmlURL).done(function(htmlResult){initPointTable(htmlResult);I18n.fillArea(jqueryMap.$wrapper);autoSave();})});};synPointList=function(){spinner.spin(document.body);WebAPI.ajaxForDebugTool({type:'POST'},configMap.dtu_server_host,stateMap.dtu.dtuname,'synPointList').done(function(result){if(result.success){var points=result.data.resp;if(!points){Alert.danger(i18n_info.NOT_RECEIVE_DATA).showAtTop(2000);return;}
spinner.spin(document.body);var _this=$(this);WebAPI.post("/point_tool/import_data/",{data:points,projectId:stateMap.project_id}).done(function(result){if(!result.success){spinner.stop();Alert.danger(result.msg).showAtTop(2000);}else{stateMap.pointTotal=result.data.pointTotal;renderSheet(result.data.pointTable);}}).always(function(){spinner.stop();_this.val(null);});}}).always(function(){spinner.stop();});};loadPointSetting=function(){var initPointSetting=function(){setJqueryMap();jqueryMap.$point_set_source.change(getPointEditParamsInfo);jqueryMap.$inputPointNameSubmit.off().on('click',onAddPointSourceTypeSubmit);jqueryMap.$editPointNameSubmit.off().on('click',onUpdatePointSourceTypeSubmit);jqueryMap.$del_point_type.off().click(onDeletePointType);refreshSourceTypeSelector();};$.get('/point_tool/pointSourceType/getAll').done(function(result){if(result.success){stateMap.sourceTypes=result.data;}else{stateMap.sourceTypes={};}
stateMap.is_load_setting=true;initPointSetting();I18n.fillArea(jqueryMap.$wrapper);getPointEditParamsInfo();});};refreshSourceTypeTableSelector=function(){jqueryMap.$point_source.empty().append(beopTmpl('tpl_source_type_options_table',{sourceTypes:stateMap.sourceTypes}));};refreshSourceTypeSelector=function(){jqueryMap.$point_set_source.empty().append(beopTmpl('tpl_source_type_options',{sourceTypes:stateMap.sourceTypes}));jqueryMap.$point_set_source.find("option").eq(1).change();};onNewPoint=function(){stateMap.operateType='add';jqueryMap.$editTitle.html(i18n_point.NEW_POINT);jqueryMap.$pointForm.find("input").val("");jqueryMap.$pointForm.find("select").val("-1");jqueryMap.$point_name.attr('readonly',false);getPointSetting('new');createChosen("new");var html='';for(var i=0;i<10;i++){html+='<div class="reserveParamWrapper">'+'<div class="w150 m_auto">'+I18n.resource.debugTools.sitePoint.SUBSCRIPTION_PARAMETERS+(i+1)+'</div>'+'<input type="text" value="" class="form-control m_auto reserveParamObj" name="param'+(i+1)+'"/>'+'</div>';}
jqueryMap.$pointRelatedWrapper.html(html);jqueryMap.$editPointWin.modal();};onEditPoint=function(){stateMap.operateType='edit';jqueryMap.$editTitle.html(i18n_point.EDIT_POINT);var flag=fillTrPointData();if(flag){jqueryMap.$point_name.attr('readonly',true);jqueryMap.$editPointWin.modal();}};onEditPointConfirm=function(){var url,pointModel=jqueryMap.$pointForm.serializeObject();if(stateMap.operateType==='add'){url='/point_tool/addPoint/'+stateMap.project_id+'/';}else if(stateMap.operateType==='edit'){url='/point_tool/editPoint/'+stateMap.project_id+'/';}
$.post(url,pointModel).done(function(result){if(result.success){Alert.success(document.body,i18n_info.MODIFY_SUCCESS).showAtTop(2000);stateMap.sheetInstance=null;loadPointTable(stateMap.currentPage);}else{Alert.danger(document.body,i18n_info.MODIFY_FAILED+':'+result.msg).showAtTop(2000);}});return false;};onDeletePoint=function(){stateMap.delete_list=[];stateMap.delete_list=[];jqueryMap.$delete_point_list.empty();var data=stateMap.sheetInstance.getData();var delete_list=[],delete_points=[];var selection=stateMap.sheetInstance.getSelected();if(!selection){alert(i18n_info.CHOOSE_DELETE_POINTS);return false;}
var startIndex,endIndex;if(selection[0]<=selection[2]){startIndex=selection[0];endIndex=selection[2];}else{startIndex=selection[2];endIndex=selection[0];}
for(var start=startIndex,end=endIndex+1;start<end;start++){delete_list.push({index:start,data:data[start]});delete_points.push(data[start].value);}
jqueryMap.$isDelPointWin.modal();jqueryMap.$delete_point_list.append(beopTmpl('tpl_point_list',{list:delete_list}));stateMap.delete_list=delete_list;stateMap.delete_points=delete_points;};onClearPoint=function(){confirm('?',function(){WebAPI.post('/point_tool/clearEnginePoints/',{projectId:stateMap.project_id}).done(function(result){if(result){location.reload();}})})};onUndoPoint=function(){stateMap.sheetInstance.undo();};onRedoPoint=function(){stateMap.sheetInstance.redo();};onPointUpdateAll=function(){if(!confirm(I18n.resource.debugTools.btnNav.DOWNLOAD_TABLE_CONFIRM)){return;}
var projectId=jqueryMap.$select_project.val();WebAPI.get('/point_tool/download/table/'+projectId).done(function(result){result;}).always(function(result){result;});};getParamsInfo=function(){var val=$.trim(jqueryMap.$point_source.find("option:selected").val());if(val){var typeData=stateMap.sourceTypes[val];jqueryMap.$pointRelatedWrapper.html(beopTmpl('tpl_source_type_name',{typeData:typeData}));var $reserveParamWrapper=jqueryMap.$pointRelatedWrapper.find(".reserveParamObj");for(var i=0;i<$reserveParamWrapper.length;i++){$reserveParamWrapper.eq(i).val("");}
var data=stateMap.sheetData[stateMap.currentPointIndex];var $reserveParamWrapper=jqueryMap.$pointRelatedWrapper.find(".reserveParamObj");for(var i=0;i<$reserveParamWrapper.length;i++){$reserveParamWrapper.eq(i).val(data.params['param'+(i+1)]);}}};getPointEditParamsInfo=function(){var val=$.trim(jqueryMap.$point_set_source.find("option:selected").val());var types=stateMap.sourceTypes[val];var keys=Object.keys(types);keys=keys.sort(naturalCompare);var params=[];for(var m=0;m<keys.length;m++){params.push({name:keys[m],value:types[keys[m]]});}
var html=beopTmpl('tpl_source_type_values',{params:params});jqueryMap.$point_set_edit_name_param.find(".point_set_title").show();jqueryMap.$point_setting_edit_ul.html(html);};onSearchTextKeyDown=function(e){if(e.keyCode===13){stateMap.currentPage=1;loadSheet(stateMap.currentPage);}};getPointIndex=function(){stateMap.currentPointIndex=stateMap.sheetInstance.getSelected()?stateMap.sheetInstance.getSelected()[0]:0;};onChangeProject=function(){stateMap.currentPage=1;jqueryMap.$text_search.val('');loadSheet(stateMap.currentPage);};fillTrPointData=function(){var flag=getPointSetting('edit');if(flag){getPointSetting('edit');createChosen("edit");var data=stateMap.sheetData[stateMap.currentPointIndex];jqueryMap.$point_id.val(data._id);jqueryMap.$point_name.val(data.value);jqueryMap.$point_source.val(data.params.source);jqueryMap.$point_notes.val(data.params.remark);jqueryMap.$point_unit.val(data.params.Unit);jqueryMap.$point_rw_attr.val(data.params.RWProperty);jqueryMap.$point_max.val(data.params.param12);jqueryMap.$point_min.val(data.params.param13);jqueryMap.$point_storage_period.val(data.params.storecycle);jqueryMap.$point_custom.val(data.params.customName);jqueryMap.$point_device.val(data.params.device);jqueryMap.$point_system.val(data.params.system);jqueryMap.$point_type.val(data.params.type);if(parseInt(data.params.param14)===1){jqueryMap.$point_jurisdiction.attr("checked",true);}else{jqueryMap.$point_jurisdiction.attr("checked",false);}
getParamsInfo();return true;}else{return false;}};getPointSetting=function(operateType){var html='<option selected="selected" value=""></option>';jqueryMap.$point_bind_set.html("");var point=stateMap.sheetInstance.getData()[stateMap.currentPointIndex];if(!point){if(operateType==='edit'){alert(i18n_info.CHOOSE_EDIT_POINTS);}
return false;}
var physical_id_val=point.value;for(var i=0;i<stateMap.sheetData.length;i++){if(stateMap.sheetData[i][1]==physical_id_val){html+='<option value="'+physical_id_val+'">'+stateMap.sheetData[i].value+'</option>';}else{html+='<option value="'+stateMap.sheetData[i].value+'">'+stateMap.sheetData[i].value+'</option>';}}
jqueryMap.$point_bind_set.html(html);if($(".chosen-container").length>0){jqueryMap.$point_bind_set.chosen("destroy");}
jqueryMap.$point_bind_set.chosen({width:"100%",search_contains:true});return true;};createChosen=function(str){if($(".chosen-container").length>0){jqueryMap.$point_bind_set.chosen("destroy");}
if(str=="new"){}
jqueryMap.$point_bind_set.chosen({width:"100%",search_contains:true});};loadSheet=function(page){spinner.spin(jqueryMap.$container.get(0));var project_id=jqueryMap.$select_project.val();var search_text=jqueryMap.$text_search.val().trim()===''?'all':jqueryMap.$text_search.val().trim();page=typeof(page)==("object"||"undefined")?1:page;stateMap.currentPage=parseInt(page);stateMap.project_id=project_id;configMap.sheetModel.getSheet(project_id,page,configMap.page_size,search_text).done(function(result){if(!result.success){return false;}
stateMap.pointTotal=result.data.pointTotal;renderSheet(result.data.pointTable);stateMap.dtu=result.data.dtu;paginationRefresh(stateMap.pointTotal);storage.setItem("current_project",project_id);}).always(function(){spinner.stop();});jqueryMap.$point_export.attr('href','/point_tool/export/engine/'+project_id);};importSheet=function(event){var fileData=event.target.files[0];var formData=new FormData();formData.append('file',fileData);formData.append('projectId',stateMap.project_id);formData.append('userId',68);spinner.spin(document.body);var _this=$(this);$.ajax({url:"/point_tool/import/",type:"POST",data:formData,enctype:'multipart/form-data',processData:false,contentType:false}).done(function(result){if(!result.success){spinner.stop();alert(result.msg);}else{stateMap.pointTotal=result.data.pointTotal;renderSheet(result.data.pointTable);}}).always(function(){spinner.stop();_this.val(null);});return false;};onAddPointSourceTypeSubmit=function(){$.post('/point_tool/pointSourceType/add/',$(this).parents("form").serializeObject()).done(function(result){if(result.success){alert(i18n_info.ADD_SUCCESS);stateMap.sourceTypes[result.data.name]=result.data.params;refreshSourceTypeSelector();}else{alert(result.msg);}});return false;};onUpdatePointSourceTypeSubmit=function(){$.post('/point_tool/pointSourceType/update/',$(this).parents("form").serializeObject()).done(function(result){if(result.success){alert(i18n_info.UPDATE_SUCCESS);}else{alert(result.msg);}});return false;};onDeletePointType=function(){var typeName=jqueryMap.$point_set_source.val();$.post('/point_tool/pointSourceType/delete/',{name:typeName}).done(function(result){if(result.success){alert(i18n_info.DELETE_SUCCESS);delete stateMap.sourceTypes[typeName];refreshSourceTypeSelector();jqueryMap.$point_set_source.trigger('change');}else{alert(i18n_info.DELETE_FAILED);}})};beop.view=beop.view||{};beop.view.sheet={configModel:configModel,init:init,destroy:destroy,sheetInstance:stateMap.sheetInstance,loadPointSetting:loadPointSetting,loadSheet:loadSheet};})(beop||(beop={}));(function(beop){var i18n=I18n.resource.debugTools.sitePoint,i18n_point=I18n.resource.debugTools.sitePoint,i18n_info=I18n.resource.debugTools.info,i18n_sheetHeaders=I18n.resource.debugTools.sheetHeaders;var configMap={htmlURL:'/point_tool/html/cloudPointTable',settable_map:{sheetModel:true},operateType:{NEW:'new',EDIT:'edit'},cloudPointType:{MAPPING_POINT:0,VIRTUAL_POINT:1,CALC_POINT:2},batchHistoryProcessStatus:{NOT_START:'none',NOT_RUN:-1,RUN:0,FINISH:1},isWriteToRealTimeDb:{NOT_WRITE:0,WRITE:1},autoCompleteList:['get_data','get_int','get_float','get_history_data_of_last_hour','get_avg_data_of_last_hour','get_status_timeratio_of_last_hour_int','api_calc_power_by_run','api_calc_power_by_vsd_run','api_calc_power_by_amp','api_calc_delta_if_run','api_calc_max_in_points','api_calc_min_in_points','api_calc_sum_in_points','api_calc_avg_if_run'],sheetModel:null,page_size:50},stateMap={sheetInstance:null,sheetHeaders:[i18n_sheetHeaders.CONFIGURATION_POINT,i18n_sheetHeaders.COMMENT,i18n_sheetHeaders.ENGLISH_NOTES,i18n_sheetHeaders.CHANGE_MAN],sheetDataType:{system:[i18n.SYSTEM0,i18n.SYSTEM1,i18n.SYSTEM2,i18n.SYSTEM3,i18n.SYSTEM4],device:[i18n.EQUIPMENT0,i18n.EQUIPMENT1,i18n.EQUIPMENT2,i18n.EQUIPMENT3,i18n.EQUIPMENT4,i18n.EQUIPMENT5,i18n.EQUIPMENT6],type:[i18n.TYPES0,i18n.TYPES1,i18n.TYPES2,i18n.TYPES3,i18n.TYPES4,i18n.TYPES5,i18n.TYPES6,i18n.TYPES7,i18n.TYPES8,i18n.TYPES9,i18n.TYPES10]},changedList:[],currentPage:1,pointTotal:0,currentPointIndex:0,operateType:'',editor:null,ExpertContainerUrl:'',historyTimer:undefined,historyWinTimer:undefined,batchHistoryTimer:undefined,currentEditorText:'',pointId:'',moduleName:'',datePickerInstanceStart:null,datePickerInstanceEnd:null,templateInstance:null,dateFormat:{},transmitLogic:'',onlineTestType:1,batchHistorySelectedPointValueList:[],batchHistorySelectedPointModuleNameList:[],batchHistorySelectedPointFormatList:[],batchHistorySelectedPointIdList:[],batchHistorySelectedPointLogicList:[],pointFormat:'m5',historyInfoList:[]},jqueryMap={},storage,setJqueryMap,configModel,importSheet,init,onChangeProject,onLoadSheet,onNewPoint,onEditPoint,onDeletePoint,onEditPointConfirm,renderSheet,paginationRefresh,onUndoPoint,onRedoPoint,onSearchTextKeyDown,getPointIndex,deleteRows,onChangePointType,online_test,single_generate,history_generate,history_generate_delete,refreshModuleStatusShow,get_insert_info,refreshRepairStatus,requestRepairData,help,refreshDatePick,onPointTypeSelected,getPointsHandler,requestTimeHandler,winHideEvents,winShowEvents,onClearPoint,isCalcPoint,online_test_request,setIsBatch,onConvertToCloud,onIsConvertToCloud,import_from_template,save_as_template,loadPointTable,autoSave,destroy,refreshEditor,onRefreshCloudPoint,setDateFormat,serverRequestError,single_quick_generate_data,batch_history_quick_generate_data,batch_history_win,refreshPointProgress,batchHistoryPointValueAdd,refreshBatchHistoryUl,batchHistoryGenerate,batchGenerate,batchHistoryPointDelete,getBatchHistoryPointMap,batchHistoryWinHideEvents,getModuleName,getSelectedPointList,getBatchHistorySelectedPointInfoList,changeRouteToPointName,dateTimeCheck,getFirstDay,projectCheckDataSync;storage=window.localStorage;setJqueryMap=function(){var $container=stateMap.$container;jqueryMap={$container:$container,$sheet:$container.find('.sheet'),$isDelPointWin:$container.find('#isDelPointWin'),$isUpdatePointWin:$container.find('#isUpdatePointWin'),$point_add_btn:$container.find('#point_add'),$point_delete_btn:$container.find('#point_delete'),$point_clear_btn:$container.find('#point_clear'),$point_refresh_btn:$container.find('#point_refresh'),$point_undo_btn:$container.find('#point_undo'),$point_redo_btn:$container.find('#point_redo'),$point_prev_btn:$container.find('#point_prev'),$point_next_btn:$container.find('#point_next'),$deleteRowConfirm:$container.find('#deleteRowConfirm'),$point_search_replace_btn:$container.find('#point_search_replace'),$point_export:$container.find('#point_export'),$select_project:$container.find('#select_project'),$text_search:$container.find('#text_search'),$uploadInput:$container.find('#uploadInput'),$delete_point_list:$container.find('.delete-points'),$count:$container.find('.count'),$paginationWrapper:$container.find('#paginationWrapper'),$cloudPagination:$container.find('#cloudPagination'),$editPointWin:$container.find('#editPointWin'),$editPointConfirm:$container.find('#editPointConfirm'),$pointForm:$container.find('#pointForm'),$basicPointType:$container.find('#basicPointType'),$point_edit:$container.find('#point_edit'),$point_id:$container.find('#point_id'),$point_name:$container.find('#point_name'),$pt_batchModal:$container.find('#pt_batchModal'),$point_notes:$container.find('#point_notes'),$point_notes_en:$container.find('#point_notes_en'),$point_device:$container.find('#point_equipment'),$point_system:$container.find('#point_system'),$point_type:$container.find('#point_type'),$editTitle:$container.find('#editTitle'),$datePickBox:$container.find('#datePickBox'),$point_format:$container.find('#point_format'),$online_test:$container.find('#online_test'),$history_generate:$container.find('#history_generate'),$import_from_template:$container.find('#import_from_template'),$save_as_template:$container.find('#save_as_template'),$help:$container.find('#help'),$online_test_result:$container.find('#online_test_result'),$onlineTestReturnInfo:$container.find('#onlineTestReturnInfo'),$dateTimeStart:$container.find('#dateTimeStart'),$dateTimeEnd:$container.find('#dateTimeEnd'),$statusBox:$container.find('#statusBox'),$quickGenerateBox:$container.find('#quickGenerateBox'),$infoGenerate:$container.find('#infoGenerate'),$get_insert_info:$container.find('#get_insert_info'),$insert_info_result_box:$container.find('#insert_info_result_box'),$display_type:$container.find('#display_type'),$pointConvert:$("#point_convert"),$isConvertPointWin:$('#isConvertPointWin'),$convertConfirm:$('#convertConfirm'),$templateImportWinBox:$container.find('#templateImportWinBox'),$saveAsTemplateWinBox:$container.find('#saveAsTemplateWinBox'),$buttonGroup:$container.find('#buttonGroup'),$insert_result_wrapper:$container.find('.insert_result_wrapper'),$cloudPointEditMessage:$container.find('#cloudPointEditMessage'),$batch_history:$container.find('#batch_history'),$batchHistoryWin:$container.find('#batchHistoryWin'),$batchHistoryTimeStart:$container.find('#batchHistoryTimeStart'),$batchHistoryTimeEnd:$container.find('#batchHistoryTimeEnd'),$batchHistoryPointValue:$container.find('#batchHistoryPointValue'),$batchHistoryPointValueAdd:$container.find('#batchHistoryPointValueAdd'),$batchHistoryPointsUl:$container.find('#batchHistoryPointsUl'),$batchHistoryProgress:$container.find('#batchHistoryProgress'),$batchHistoryGenerate:$container.find('#batchHistoryGenerate'),$isBatch:$container.find('#isBatch'),$point_progress_box:$container.find('#point_progress_box'),$history_generate_delete:$container.find('#history_generate_delete')};};configModel=function(input_map){beop.util.setConfigMap({input_map:input_map,settable_map:configMap.settable_map,config_map:configMap});return true;};init=function($container,page){stateMap.$container=$container;$.ajax({url:"/getExpertContainerUrl",type:"GET"}).done(function(result){if(result){stateMap.ExpertContainerUrl=result.data;}});loadPointTable(page);stateMap.currentPage=parseInt(page);};paginationRefresh=function(totalNum){var totalPages=Math.ceil(totalNum/configMap.page_size);jqueryMap.$paginationWrapper.empty().html('<ul id="cloudPagination" class="pagination"></ul>');while(totalPages<stateMap.currentPage&&stateMap.currentPage>1){stateMap.currentPage=stateMap.currentPage-1;}
var pageOption={first:'&laquo;&laquo',prev:'&laquo;',next:'&raquo;',last:'&raquo;&raquo;',startPage:stateMap.currentPage?parseInt(stateMap.currentPage):1,totalPages:!totalPages?1:parseInt(totalPages),onPageClick:function(event,page){location.hash="#cloud/"+page;}};stateMap.pagination=$("#cloudPagination").twbsPagination(pageOption);};isCalcPoint=function(){};autoSave=function(){setInterval(function(){if(stateMap.changedList&&stateMap.changedList.length){jqueryMap.$cloudPointEditMessage.show();WebAPI.post('/point_tool/autoSave/'+stateMap.project_id+'/',stateMap.changedList).done(function(result){if(result.success){stateMap.changedList=[];setTimeout(function(){jqueryMap.$cloudPointEditMessage.hide();},1000);}})}},1000)};deleteRows=function(){spinner.spin(document.body);$.post('/point_tool/deleteCloudPoint/'+stateMap.project_id+'/',{point_list:stateMap.delete_points}).done(function(result){if(result.success){jqueryMap.$isDelPointWin.modal('hide');jqueryMap.$delete_point_list.empty();stateMap.delete_list=[];stateMap.sheetInstance=null;loadPointTable(stateMap.currentPage);}else{alert(I18n.resource.debugTools.info.DELETE_FAILED+':'+result.msg);}}).always(function(){spinner.stop();});};destroy=function(){stateMap.pointId='';stateMap.moduleName='';stateMap.onlineTestType=configMap.isWriteToRealTimeDb.WRITE;stateMap.historyInfoList=[];if(stateMap.sheetInstance){stateMap.sheetInstance.destroy();stateMap.sheetInstance=null;}
if(stateMap.editor){stateMap.editor=null;}
if(stateMap.datePickerInstanceStart){stateMap.datePickerInstanceStart=null;stateMap.datePickerInstanceEnd=null;}};renderSheet=function(data){if(!data){alert(I18n.resource.debugTools.info.DATA_IS_EMPTY);return false;}
if(stateMap.sheetInstance){stateMap.sheetInstance.loadData(data);}else{stateMap.sheetInstance=new Handsontable(jqueryMap.$sheet.get(0),{data:data,colHeaders:stateMap.sheetHeaders,rowHeaders:true,manualColumnResize:true,manualRowResize:true,stretchH:'all',persistentState:true,autoWrapCol:true,autoWrapRow:true,search:true,minSpareRows:0,minSpareCols:0,outsideClickDeselects:false,afterRender:function(isForced){if(isForced){jqueryMap.$count.text(stateMap.pointTotal);}},beforeValidate:function(value,row,prop,source){if(stateMap.sheetData[row].value===value){return false;}else{return value;}},afterChange:function(changes,source){if(source==='loadData'){return false;}
for(var m=0;m<changes.length;m++){var row=changes[m][0];if(stateMap.sheetInstance.getData()[row].value){stateMap.changedList.push(stateMap.sheetInstance.getData()[row]);}}},currentRowClassName:'currentRow',columns:[{data:"value",type:'text',readOnly:true},{data:"params.remark",type:'text',width:"200px"},{data:"params.remark_en",type:'text',width:"200px"},{data:"modify_by",type:'text',width:"100px",readOnly:true},{data:"modify_time",type:'text',readOnly:true}]});}
stateMap.sheetData=stateMap.sheetInstance.getData();jqueryMap.$sheet.off("click").on('click',"tbody td",getPointIndex);};onIsConvertToCloud=function(){spinner.spin(jqueryMap.$isConvertPointWin.find('.modal-content').get(0));WebAPI.post('/point_tool/convertToCloud',{projectId:stateMap.project_id,type:jqueryMap.$isConvertPointWin.find('input[name=convertType]:checked').val()}).done(function(result){if(result.success){jqueryMap.$isConvertPointWin.modal('hide');onLoadSheet();alert(i18n_info.CONVERT_POINT_SUCCESS.format(result.data))}else{alert(i18n_info.CONVERT_POINT_FAILED);}}).always(function(){spinner.stop();})};onConvertToCloud=function(){jqueryMap.$isConvertPointWin.modal();};loadPointTable=function(page){var initPointTable=function(resultHtml){stateMap.$container.html(resultHtml);setJqueryMap();jqueryMap.$point_add_btn.on('click',onNewPoint);jqueryMap.$point_delete_btn.on('click',onDeletePoint);jqueryMap.$point_clear_btn.click(onClearPoint);jqueryMap.$point_refresh_btn.click(onRefreshCloudPoint);jqueryMap.$point_undo_btn.on('click',onUndoPoint);jqueryMap.$point_redo_btn.on('click',onRedoPoint);jqueryMap.$text_search.on('keydown',onSearchTextKeyDown);jqueryMap.$deleteRowConfirm.on('click',deleteRows);jqueryMap.$editPointConfirm.on('click',onEditPointConfirm);jqueryMap.$uploadInput.change(importSheet);jqueryMap.$select_project.change(onChangeProject);jqueryMap.$point_edit.on('click',onEditPoint);jqueryMap.$basicPointType.change(onChangePointType);jqueryMap.$editPointWin.off('hide.bs.modal').on('hide.bs.modal',winHideEvents).off('shown.bs.modal').on('shown.bs.modal',winShowEvents);jqueryMap.$display_type.on('click','.point_type',onPointTypeSelected);jqueryMap.$container.off('click.online_test').on('click.online_test','#online_test',online_test);jqueryMap.$container.off('click.get_insert_info').on('click.get_insert_info','#get_insert_info',get_insert_info);jqueryMap.$container.off('click.history_generate').on('click.history_generate','#history_generate',history_generate);jqueryMap.$container.off('click.import_from_template').on('click.import_from_template','#import_from_template',import_from_template);jqueryMap.$container.off('click.save_as_template').on('click.save_as_template','#save_as_template',save_as_template);jqueryMap.$container.off('click.help').on('click.help','#help',help);jqueryMap.$container.off('click.single_quick_generate_data').on('click.single_quick_generate_data','.single_quick_generate_data',single_quick_generate_data);jqueryMap.$container.off('click.batch_history_quick_generate_data').on('click.batch_history_quick_generate_data','.batch_history_quick_generate_data',batch_history_quick_generate_data);jqueryMap.$container.off('click.history_generate_delete').on('click.history_generate_delete','#history_generate_delete',history_generate_delete);jqueryMap.$container.off('click.batch_history').on('click.batch_history','#batch_history',batch_history_win);jqueryMap.$container.off('click.batchHistoryPointValueAdd').on('click.batchHistoryPointValueAdd','#batchHistoryPointValueAdd',batchHistoryPointValueAdd);jqueryMap.$container.off('click.batchHistoryGenerate').on('click.batchHistoryGenerate','#batchHistoryGenerate',batchHistoryGenerate);jqueryMap.$container.off('click.batchHistoryPointDelete').on('click.batchHistoryPointDelete','.batchHistoryPointDelete',batchHistoryPointDelete);jqueryMap.$batchHistoryWin.off('hide.bs.modal').on('hide.bs.modal',batchHistoryWinHideEvents);jqueryMap.$pointConvert.click(onConvertToCloud);jqueryMap.$convertConfirm.click(onIsConvertToCloud);jqueryMap.$point_format.change(setDateFormat);var batchHistoryFormatMap={startView:'month',autoclose:true,minView:'day',format:'yyyy-mm-dd hh:00:00'};jqueryMap.$batchHistoryTimeStart.datetimepicker(batchHistoryFormatMap);jqueryMap.$batchHistoryTimeEnd.datetimepicker(batchHistoryFormatMap);jqueryMap.$isBatch.change(setIsBatch);if(storage.getItem("current_project")){var $option=jqueryMap.$select_project.find("option");var hasOptionFlag=false;for(var i=0;i<$option.length;i++){if($option.eq(i).val()==storage.getItem("current_project")){hasOptionFlag=true;break;}}
if(hasOptionFlag){jqueryMap.$select_project.val(storage.getItem("current_project"));}else{var firstVal=$option.eq(1).val();jqueryMap.$select_project.val(firstVal);storage.setItem("current_project",firstVal);}
onLoadSheet(page);jqueryMap.$display_type.find('.point_type[value="'+stateMap.pointType+'"]').prop('checked',true);if(stateMap.pointType==configMap.cloudPointType.CALC_POINT){jqueryMap.$batch_history.removeClass('dn');}else{jqueryMap.$batch_history.addClass('dn');}}};$.get(configMap.htmlURL).done(function(result){initPointTable(result);I18n.fillArea(stateMap.$container);autoSave();});};getFirstDay=function(dateType){var date=new Date();if(dateType==='today'){return date.format('yyyy-MM-dd 00:00:00');}else if(dateType==='week'){return new Date(date-(date.getDay()-1)*86400000).format('yyyy-MM-dd 00:00:00');}else if(dateType==='month'){return new Date(date.getFullYear(),date.getMonth(),1).format('yyyy-MM-dd 00:00:00');}};getBatchHistoryPointMap=function(){var idList=[],valueList=[],logicList=[],formatList=[],moduleNameList=[];for(var i=0;i<stateMap.sheetData.length;i++){var data=stateMap.sheetData[i];idList.push(data._id);valueList.push(data.value);moduleNameList.push(getModuleName(data.value));logicList.push(data.params.logic);formatList.push(data.params.format);}
stateMap.batchHistoryPointMap={'idList':idList,'valueList':valueList,'logicList':logicList,'formatList':formatList,'moduleNameList':moduleNameList}};batch_history_win=function(){stateMap.batchHistorySelectedPointFormatList=[];stateMap.batchHistorySelectedPointIdList=[];stateMap.batchHistorySelectedPointModuleNameList=[];stateMap.batchHistorySelectedPointValueList=[];stateMap.batchHistorySelectedPointLogicList=[];stateMap.batchHistoryPointMap={};jqueryMap.$batchHistoryWin.modal({keyboard:false,backdrop:'static'});jqueryMap.$batchHistoryTimeStart.val(new Date().format('yyyy-MM-dd 00:00:00'));jqueryMap.$batchHistoryTimeEnd.val(new Date().format('yyyy-MM-dd HH:00:00'));jqueryMap.$batchHistoryPointValue.val('');jqueryMap.$batchHistoryPointsUl.empty();jqueryMap.$batchHistoryProgress.empty().removeClass('progress').html('<span  i18n="debugTools.sitePoint.NO_PROGRESS"></span>');getSelectedPointList();getBatchHistorySelectedPointInfoList();stateMap.selectedPointList.length&&refreshBatchHistoryUl();getBatchHistoryPointMap();I18n.fillArea(stateMap.$container);};batchHistoryPointValueAdd=function(){var val=jqueryMap.$batchHistoryPointValue.val().trim();if(val){if(($.inArray(val,stateMap.batchHistorySelectedPointValueList)!==-1)){alert(I18n.resource.debugTools.sitePoint.THIS_POINT_HAS_BEEN_ADDED_TO_THE_LIST_BELOW);}else{var index=$.inArray(val,stateMap.batchHistoryPointMap.valueList);if(index===-1){alert(I18n.resource.debugTools.sitePoint.ONLY_EXISTING_CALCULATION_POINTS_ARE_ALLOWED);}else{stateMap.batchHistorySelectedPointValueList.push(val);stateMap.batchHistorySelectedPointModuleNameList.push(stateMap.batchHistoryPointMap.moduleNameList[index]);stateMap.batchHistorySelectedPointFormatList.push(stateMap.batchHistoryPointMap.formatList[index]);stateMap.batchHistorySelectedPointIdList.push(stateMap.batchHistoryPointMap.idList[index]);stateMap.batchHistorySelectedPointLogicList.push(stateMap.batchHistoryPointMap.logicList[index]);refreshBatchHistoryUl();}}}else{alert(I18n.resource.debugTools.sitePoint.POINT_VALUE_CAN_NOT_BE_EMPTY);}};batchHistoryPointDelete=function(){var val=$(this).closest('.batchHistoryPoint').find('.batchHistoryPointName').val();for(var i=0;i<stateMap.batchHistorySelectedPointValueList.length;i++){if(val==stateMap.batchHistorySelectedPointValueList[i]){stateMap.batchHistorySelectedPointValueList.splice(i,1);stateMap.batchHistorySelectedPointModuleNameList.splice(i,1);stateMap.batchHistorySelectedPointFormatList.splice(i,1);stateMap.batchHistorySelectedPointIdList.splice(i,1);stateMap.batchHistorySelectedPointLogicList.splice(i,1);break;}}
refreshBatchHistoryUl();};batch_history_quick_generate_data=function(e){batchGenerate(getFirstDay($(e.target).attr('dateType')),new Date().format('yyyy-MM-dd HH:00:00'));};batchHistoryGenerate=function(){var timeFrom=jqueryMap.$batchHistoryTimeStart.val().trim(),timeTo=jqueryMap.$batchHistoryTimeEnd.val().trim();if(dateTimeCheck(timeFrom,timeTo)){if(!stateMap.batchHistorySelectedPointValueList.length){alert(I18n.resource.debugTools.sitePoint.NO_POINT_PLEASE_ADD);return;}
batchGenerate(timeFrom,timeTo);}};batchGenerate=function(timeFrom,timeTo){spinner.spin(document.body);$.ajax({url:stateMap.ExpertContainerUrl+"repairData/batch",type:"POST",data:{'list':JSON.stringify(stateMap.batchHistorySelectedPointValueList),'timeFrom':timeFrom,'timeTo':timeTo,'projId':stateMap.project_id,'format':'m5'}}).done(function(result){if(result){stateMap.batchHistoryTimer&&clearInterval(stateMap.batchHistoryTimer);stateMap.batchHistoryTimer=setInterval(function(){$.ajax({url:stateMap.ExpertContainerUrl+"repairData/getInfo/"+result,type:"GET"}).done(function(result){try{if(result!==null){jqueryMap.$batchHistoryProgress.addClass('progress');jqueryMap.$batchHistoryProgress.empty().html(beopTmpl('tpl_point_progress',{'percent':parseInt(result)}));if(parseInt(result)=='100'){stateMap.batchHistoryTimer&&clearInterval(stateMap.batchHistoryTimer);}}}catch(e){console.log(e);}}).fail(function(e){stateMap.batchHistoryTimer&&clearInterval(stateMap.batchHistoryTimer);});},1000);}}).fail(function(e){console.log(e);}).always(function(){spinner.stop();});};changeRouteToPointName=function(routeName){return/calcpoint_\w+$/.exec(routeName);};refreshPointProgress=function(percent){jqueryMap.$point_progress_box.empty().addClass('progress').append(beopTmpl('tpl_point_progress',{'percent':parseInt(percent)}));};refreshBatchHistoryUl=function(){jqueryMap.$batchHistoryPointsUl.empty().html(beopTmpl('tpl_batch_history_add_point',{'valueList':stateMap.batchHistorySelectedPointValueList}));};setIsBatch=function(){stateMap.isBatch=jqueryMap.$isBatch.is(":checked");if(stateMap.isBatch){jqueryMap.$editPointWin.addClass('batch');}else{jqueryMap.$editPointWin.removeClass('batch');}};getPointsHandler=function(){var pointName=jqueryMap.$point_name.val().trim(),batchModel=jqueryMap.$pt_batchModal.val(),remark=jqueryMap.$point_notes.val().trim(),remark_en=jqueryMap.$point_notes_en.val().trim(),model={},pointContent=stateMap.editor.doc.getValue().trim(),ret=[];if(!stateMap.isBatch){ret.push({name:pointName,content:pointContent,remark:remark,remark_en:remark_en});return ret;}
try{batchModel=batchModel.trim().replace((/([^{:\s]+)(:)/g),"\"$1\"$2").replace((/'/g),"\"");model=JSON.parse(batchModel);}catch(e){alert(I18n.resource.debugTools.sitePoint.TEMPLATE_VARIABLE_IS_NOT_CORRECT);console.error('can\' parse the content'+e);return ret;}
var handler=function(pointName,content,remark,remark_en,replaceModel){for(var replaceItem in replaceModel){if(!replaceModel.hasOwnProperty(replaceItem)){continue;}
var regex=new RegExp('<#'+replaceItem+'#>','gi');pointName=pointName.replace(regex,replaceModel[replaceItem]);content=content.replace(regex,replaceModel[replaceItem]);remark=remark.replace(regex,replaceModel[replaceItem]);remark_en=remark_en.replace(regex,replaceModel[replaceItem]);}
return{name:pointName,content:content,remark:remark,remark_en:remark_en};};var replaceModelList=[];var replaceListPlaceholder=function(item){if(replaceModelList.length){if(item.length>replaceModelList.length){item.splice(replaceModelList.length,item.length-replaceModelList.length);}else if(item.length<replaceModelList.length){replaceModelList.splice(item.length,replaceModelList.length-item.length);}}
item.forEach(function(replaceItem,index){if(!replaceModelList[index]){replaceModelList[index]={};}
replaceModelList[index][prop]=replaceItem;})};for(var prop in model){if(!model.hasOwnProperty(prop)){continue;}
var item=model[prop];if($.isArray(item)){replaceListPlaceholder(item);}else if($.isPlainObject(item)){var min=parseInt(item["min"]);var max=parseInt(item["max"]);var step=parseInt(item["step"])||1;if(!min){item.min=1;}
if(!max){alert(prop+' missing max value.');return[];}
if(min>max){alert(prop+' min larger than max.');return[];}
var propValueList=[];for(var k=min;k<=max;k=k+step){if(parseInt(item["pad"])&&parseInt(item["pad"])>0){propValueList.push(StringUtil.padLeft(k,parseInt(item["pad"]),'0'));}else{propValueList.push(k);}}
replaceListPlaceholder(propValueList);}}
replaceModelList.forEach(function(replaceModel){ret.push(handler(pointName,pointContent,remark,remark_en,replaceModel));});return ret;};setDateFormat=function(){jqueryMap.$datePickBox.html(beopTmpl('tpl_date_item_refresh'));var val=jqueryMap.$point_format.val();stateMap.pointFormat=val;if(val=='d1'){stateMap.dateFormat={startView:'month',autoclose:true,minView:'month',format:'yyyy-mm-dd'};}else if(val=='h1'){stateMap.dateFormat={startView:'month',autoclose:true,minView:'day',format:'yyyy-mm-dd hh:00:00'};}else{stateMap.dateFormat={startView:'month',autoclose:true,minView:'hour',format:'yyyy-mm-dd hh:ii:00'};}
refreshDatePick();};online_test=function(){stateMap.onlineTestType=configMap.isWriteToRealTimeDb.NOT_WRITE;jqueryMap.$online_test.addClass('disabled');var newPoints=getPointsHandler();var testPromises=[];for(var m=0,len=newPoints.length;m<len;m++){var point=newPoints[m];testPromises.push(online_test_request(stateMap.project_id,point.content,point.name));}
var resultText='';var testResultHandler=function(pointName,resultDict){if(!resultDict){resultDict={}}
if(resultDict.error=='0'){jqueryMap.$onlineTestReturnInfo.text(I18n.resource.debugTools.sitePoint.POINT_VALUE_IS);}else{jqueryMap.$onlineTestReturnInfo.text(I18n.resource.debugTools.sitePoint.ERROR_INFORMATION);}
var printDict={};printDict.value=resultDict.value;if(resultDict.median){printDict.median=resultDict.median;}
resultText=JSON.stringify(printDict,null,2);jqueryMap.$online_test_result.html(resultText);};$.when.apply(null,testPromises).done(function(){if(testPromises.length==1){testResultHandler(newPoints[0].name,arguments[0]);return;}
for(var n=0,len=arguments.length;n<len;n++){if(!newPoints[n]){continue;}
testResultHandler(newPoints[n].name,arguments[n][0]);}}).done(function(){spinner.stop();}).always(function(){jqueryMap.$online_test.removeClass('disabled');});};onClearPoint=function(){confirm(I18n.resource.debugTools.sitePoint.CONFIRM_TO_CLEAR_ALL_POINTS,function(){WebAPI.post('/point_tool/clearCloudPoints/',{projectId:stateMap.project_id,flag:stateMap.pointType}).done(function(result){if(result){onLoadSheet();}})})};online_test_request=function(projectId,content,pointName,moduleName,onlineTestType){spinner.spin(document.body);if(typeof projectId===typeof undefined){projectId=stateMap.project_id;}
if(typeof content===typeof undefined){content=stateMap.editor&&stateMap.editor.doc&&stateMap.editor.doc.getValue();}
if(typeof pointName===typeof undefined){pointName=jqueryMap.$point_name.val();}
if(typeof moduleName===typeof undefined){moduleName=getModuleName(pointName);}
if(typeof onlineTestType===typeof undefined){onlineTestType=configMap.isWriteToRealTimeDb.NOT_WRITE;}
return $.ajax({url:stateMap.ExpertContainerUrl+"cloudPoint/onlinetest",type:"POST",data:{'content':content,'projId':projectId,'pointName':pointName,'moduleName':moduleName,'writeToReal':onlineTestType}}).done(function(result){if(result.error=='1'){alert(I18n.resource.debugTools.sitePoint.ERROR_MSG+result.value);}}).fail(function(e){jqueryMap.$onlineTestReturnInfo.text(I18n.resource.debugTools.sitePoint.SERVER_REQUEST_FAILED);serverRequestError(e);spinner.stop();}).always(function(){jqueryMap.$online_test.removeClass('disabled');});};requestTimeHandler=function(time,format){var dateTime=new Date(time);if(format=='m1'){return dateTime.format('yyyy-MM-dd HH:mm:00');}
if(format=='m5'){var minute=Math.floor(dateTime.getMinutes()/5)*5;return dateTime.format('yyyy-MM-dd HH:'+StringUtil.padLeft(minute,2,'0')+':00');}
if(format=='h1'){return dateTime.format('yyyy-MM-dd HH:00:00');}
if(format=='d1'){return dateTime.format('yyyy-MM-dd 00:00:00');}};requestRepairData=function(value,timeFrom,timeTo){$.ajax({url:stateMap.ExpertContainerUrl+"repairData"+'/batch',type:"POST",data:{'list':JSON.stringify([value]),'timeFrom':requestTimeHandler(timeFrom,stateMap.pointFormat),'timeTo':requestTimeHandler(timeTo,stateMap.pointFormat),'projId':stateMap.project_id,'format':stateMap.pointFormat}}).done(function(result){if(result.length==24){localStorage.setItem(stateMap.project_id+'_'+value,result);refreshRepairStatus('adding');stateMap.historyTimer=setInterval(function(){$.ajax({url:stateMap.ExpertContainerUrl+"repairData/getInfo/"+result,type:"GET"}).done(function(result){try{if(parseInt(result)=='100'){localStorage.removeItem(stateMap.project_id+'_'+value);stateMap.historyTimer&&clearInterval(stateMap.historyTimer);refreshRepairStatus('finish');}else{refreshRepairStatus('adding');}
refreshPointProgress(parseInt(result));}catch(e){console.log(e);}}).fail(function(e){stateMap.historyTimer&&clearInterval(stateMap.historyTimer);serverRequestError(e);}).always(function(){});},3000)}}).fail(function(e){serverRequestError(e);}).always(function(){});};serverRequestError=function(mes){console.log(mes);alert(I18n.resource.debugTools.sitePoint.SERVER_REQUEST_FAILED);};single_generate=function(timeFrom,timeTo,generateType){stateMap.onlineTestType=configMap.isWriteToRealTimeDb.WRITE;jqueryMap.$insert_info_result_box.empty();online_test_request().done(function(resultDict){if(resultDict.error=='0'){var url=stateMap.operateType==configMap.operateType.NEW?'/point_tool/addCloudPoint/':'/point_tool/editCloudPoint/';var pointModel=jqueryMap.$pointForm.serializeObject();var id=stateMap.pointId?stateMap.pointId:stateMap.sheetData[stateMap.currentPointIndex]._id;$.extend(pointModel,{'id':id,'logic':stateMap.editor.doc.getValue(),'moduleName':getModuleName(jqueryMap.$point_name.val()),'format':jqueryMap.$point_format.val()});$.post(url+stateMap.project_id+'/',pointModel).done(function(result){if(result.success&&result.data){stateMap.operateType=configMap.operateType.EDIT;jqueryMap.$history_generate.addClass('disabled');jqueryMap.$quickGenerateBox.addClass('disabled');stateMap.pointId=result.data._id;stateMap.generateType=generateType;stateMap.moduleName=result.data.params.moduleName;requestRepairData(result.data.value,timeFrom,timeTo);}else{alert(result.msg);}}).always(function(){spinner.stop();});}else{alert(I18n.resource.debugTools.sitePoint.ONLINE_TEST_ERROR);spinner.stop();}});};single_quick_generate_data=function(e){single_generate(getFirstDay($(e.target).attr('dateType')),new Date().format('yyyy-MM-dd HH:00:00'),'quick');};getModuleName=function(str){return'calcpoint_'+stateMap.project_id+'_'+str;};history_generate=function(){var timeFrom=jqueryMap.$dateTimeStart.val().trim(),timeTo=jqueryMap.$dateTimeEnd.val().trim();var timeCheckFlag=dateTimeCheck(timeFrom,timeTo);if(!timeCheckFlag){return;}
if(jqueryMap.$point_format.val()=='d1'){timeFrom+=' 00:00:00';timeTo+=' 00:00:00';}
single_generate(timeFrom,timeTo,'history');};history_generate_delete=function(){if(localStorage.getItem(stateMap.project_id+'_'+jqueryMap.$point_name.val())){spinner.spin(document.body);$.ajax({url:stateMap.ExpertContainerUrl+"repairData/stop/"+localStorage.getItem(stateMap.project_id+'_'+jqueryMap.$point_name.val()),type:"GET"}).done(function(result){if(result.error){alert(I18n.resource.debugTools.sitePoint.STOP_HISTORY_GENERATION_SUCCESS);}else{localStorage.removeItem(stateMap.project_id+'_'+jqueryMap.$point_name.val());stateMap.historyTimer&&clearInterval(stateMap.historyTimer);stateMap.historyWinTimer&&clearInterval(stateMap.historyWinTimer);jqueryMap.$history_generate_delete.hide();refreshRepairStatus();jqueryMap.$point_progress_box.empty().removeClass('progress');jqueryMap.$infoGenerate.text('');alert(I18n.resource.debugTools.sitePoint.STOP_HISTORY_GENERATION_FAILED);}}).fail(function(e){stateMap.historyTimer&&clearInterval(stateMap.historyTimer);serverRequestError(e);}).always(function(){spinner.stop();});}};get_insert_info=function(){if(stateMap.historyInfoList.length){jqueryMap.$insert_info_result_box.empty().append(beopTmpl('tpl_insert_info',{'lists':stateMap.historyInfoList}));}else{alert(I18n.resource.debugTools.sitePoint.NO_INSERT_DATA);}};import_from_template=function(){stateMap.currentEditorText=stateMap.editor.doc.getValue();beop.template.init({'container':jqueryMap.$templateImportWinBox,'opType':'import','confirmCallBack':function(){stateMap.transmitLogic+=beop.template.getLogic();$('.templateWin').modal('hide');refreshEditor();}});};save_as_template=function(){beop.template.init({'container':jqueryMap.$saveAsTemplateWinBox,'opType':'save','logic':stateMap.editor.doc.getValue()});};help=function(){window.open("help.html","BeOP help");};refreshDatePick=function(){if(stateMap.datePickerInstanceStart){stateMap.datePickerInstanceStart=null;stateMap.datePickerInstanceEnd=null;}
setJqueryMap();jqueryMap.$dateTimeStart.datetimepicker(stateMap.dateFormat);jqueryMap.$dateTimeEnd.datetimepicker(stateMap.dateFormat);stateMap.datePickerInstanceStart=jqueryMap.$dateTimeStart.data('datetimepicker');stateMap.datePickerInstanceEnd=jqueryMap.$dateTimeEnd.data('datetimepicker');};onDeletePoint=function(){stateMap.delete_list=[];jqueryMap.$delete_point_list.empty();var data=stateMap.sheetInstance.getData();var delete_list=[],delete_points=[];var selection=stateMap.sheetInstance.getSelected();if(!selection){alert(I18n.resource.debugTools.info.CHOOSE_DELETE_POINTS);return false;}
var startIndex,endIndex;if(selection[0]<=selection[2]){startIndex=selection[0];endIndex=selection[2];}else{startIndex=selection[2];endIndex=selection[0];}
for(var start=startIndex,end=endIndex+1;start<end;start++){delete_list.push({index:start,data:data[start]});delete_points.push(data[start].value);}
jqueryMap.$isDelPointWin.modal();jqueryMap.$delete_point_list.append(beopTmpl('tpl_point_list',{list:delete_list}));stateMap.delete_list=delete_list;stateMap.delete_points=delete_points;};onUndoPoint=function(){stateMap.sheetInstance.undo();};onRedoPoint=function(){stateMap.sheetInstance.redo();};onSearchTextKeyDown=function(e){if(e.keyCode===13){onLoadSheet();}};getPointIndex=function(){stateMap.currentPointIndex=stateMap.sheetInstance.getSelected()?stateMap.sheetInstance.getSelected()[0]:0;};onChangeProject=function(){jqueryMap.$text_search.val('');onLoadSheet();};onChangePointType=function(){if($(this).val()==configMap.cloudPointType.CALC_POINT){jqueryMap.$editPointWin.addClass('calc');refreshEditor();jqueryMap.$codeMirrorBox.show();if(stateMap.operateType===configMap.operateType.NEW){jqueryMap.$point_format.val('m5');stateMap.pointFormat='m5';}
refreshModuleStatusShow();}else{jqueryMap.$editPointWin.removeClass('calc');stateMap.editor=null;jqueryMap.$codeMirrorBox.empty().hide();}
I18n.fillArea(jqueryMap.$editPointWin);};batchHistoryWinHideEvents=function(){stateMap.batchHistoryTimer&&clearInterval(stateMap.batchHistoryTimer);};winHideEvents=function(){stateMap.historyWinTimer&&clearInterval(stateMap.historyWinTimer);stateMap.historyTimer&&clearInterval(stateMap.historyTimer);};winShowEvents=function(){if(stateMap.editor&&stateMap.editor.refresh){stateMap.editor.refresh();}};refreshEditor=function(){stateMap.editor=null;jqueryMap.$codeMirrorBox.empty().append(beopTmpl('tpl_point_related_fun'));if(stateMap.transmitLogic){if(stateMap.currentEditorText==''){stateMap.currentEditorText+=stateMap.transmitLogic;}else{stateMap.currentEditorText+=('\n\n '+stateMap.transmitLogic);}
stateMap.transmitLogic='';}else{if(stateMap.operateType==configMap.operateType.NEW){stateMap.currentEditorText='';}else{var data=stateMap.sheetData[stateMap.currentPointIndex];if(data.params&&data.params.flag){if(data.params.flag==configMap.cloudPointType.CALC_POINT){stateMap.currentEditorText=data.params.logic;}else{stateMap.currentEditorText='';}}}}
$("#codeEditor").text(stateMap.currentEditorText);jqueryMap.$codeMirrorBox.show();CodeMirror.commands.autocomplete=function(cm){cm.showHint({hint:function(editor,options){var WORD=/[\w$]+/;var word=options&&options.word||WORD;var cur=editor.getCursor(),curLine=editor.getLine(cur.line);var end=cur.ch,start=end;while(start&&word.test(curLine.charAt(start-1)))--start;var curWord=start!=end&&curLine.slice(start,end);return{list:configMap.autoCompleteList.filter(function(item){return item.startsWith(curWord);}),from:CodeMirror.Pos(cur.line,start),to:CodeMirror.Pos(cur.line,end)}}});};stateMap.editor=CodeMirror.fromTextArea(document.getElementById('codeEditor'),{mode:"python",lineNumbers:true,indentUnit:4,tabMode:'spaces',autofocus:true});stateMap.editor.setOption("extraKeys",{Tab:function(cm){var spaces=Array(cm.getOption("indentUnit")+1).join(" ");cm.replaceSelection(spaces);},Ctrl:"autocomplete"});stateMap.editor.refresh();};onNewPoint=function(){stateMap.pointId='';jqueryMap.$codeMirrorBox.empty().hide();jqueryMap.$point_name.val('');jqueryMap.$point_notes.val('');jqueryMap.$point_notes_en.val('');jqueryMap.$point_device.val('');jqueryMap.$point_system.val('');jqueryMap.$point_type.val('');jqueryMap.$basicPointType.val(0);stateMap.operateType=configMap.operateType.NEW;jqueryMap.$editTitle.text(i18n_point.ADD_POINTS);if(stateMap.editor){stateMap.editor=null;}
if(stateMap.pointType==configMap.cloudPointType.CALC_POINT){jqueryMap.$basicPointType.val(2);jqueryMap.$editPointWin.addClass('calc');refreshEditor();jqueryMap.$codeMirrorBox.show();if(stateMap.operateType===configMap.operateType.NEW){jqueryMap.$point_format.val('m5');stateMap.pointFormat='m5';}
refreshModuleStatusShow();}else{jqueryMap.$editPointWin.removeClass('calc');jqueryMap.$codeMirrorBox.empty().hide();}
jqueryMap.$editPointWin.addClass('newPoint').removeClass('batch').modal({keyboard:false,backdrop:'static'});jqueryMap.$isBatch.prop('checked',false);I18n.fillArea(jqueryMap.$editPointWin);};onEditPoint=function(){stateMap.editor=null;stateMap.isBatch=false;stateMap.operateType=configMap.operateType.EDIT;stateMap.pointId='';jqueryMap.$codeMirrorBox.empty();jqueryMap.$editPointWin.removeClass('newPoint');jqueryMap.$editPointWin.modal({keyboard:false,backdrop:'static'});var data=stateMap.sheetData[stateMap.currentPointIndex];if(data.params&&data.params.flag=='2'){jqueryMap.$editPointWin.addClass('calc');}
if(data.params.flag==configMap.cloudPointType.CALC_POINT){stateMap.moduleName=getModuleName(data.value);stateMap.currentEditorText=data.params.logic;jqueryMap.$point_format.val(data.params.format);jqueryMap.$basicPointType.val(data.params.flag);stateMap.pointFormat=data.params.format;refreshEditor();setDateFormat();if(localStorage.getItem(stateMap.project_id+'_'+data.value)){stateMap.historyWinTimer=setInterval(function(){$.ajax({url:stateMap.ExpertContainerUrl+"repairData/getInfo/"+localStorage.getItem(stateMap.project_id+'_'+data.value),type:"GET"}).done(function(result){try{if(result===null){localStorage.removeItem(stateMap.project_id+'_'+data.value);stateMap.historyWinTimer&&clearInterval(stateMap.historyWinTimer);}else{if(parseInt(result)=='100'){localStorage.removeItem(stateMap.project_id+'_'+data.value);stateMap.historyWinTimer&&clearInterval(stateMap.historyWinTimer);refreshRepairStatus('finish');}else{refreshRepairStatus('adding');}
refreshPointProgress(parseInt(result));}}catch(e){console.log(e);}}).fail(function(e){stateMap.historyWinTimer&&clearInterval(stateMap.historyWinTimer);serverRequestError(e);}).always(function(){});},1000);}else{refreshModuleStatusShow();}}else{jqueryMap.$basicPointType.val(0);jqueryMap.$codeMirrorBox.empty().hide();}
jqueryMap.$point_id.val(data._id);jqueryMap.$point_name.val(data.value);jqueryMap.$point_notes.val(data.params.remark);jqueryMap.$point_notes_en.val(data.params.remark_en);jqueryMap.$point_device.val(data.params.device);jqueryMap.$point_system.val(data.params.system);jqueryMap.$point_type.val(data.params.type);jqueryMap.$editTitle.text(i18n_point.EDIT_POINTS);I18n.fillArea(jqueryMap.$editPointWin);};onEditPointConfirm=function(){var url,pointModel=jqueryMap.$pointForm.serializeObject();stateMap.onlineTestType=configMap.isWriteToRealTimeDb.WRITE;if(jqueryMap.$basicPointType.val()==configMap.cloudPointType.CALC_POINT){$.extend(pointModel,{'logic':stateMap.editor.doc.getValue(),'moduleName':getModuleName(jqueryMap.$point_name.val())});}
if(stateMap.operateType===configMap.operateType.NEW){url='/point_tool/addCloudPoint/';}else{url='/point_tool/editCloudPoint/';}
if(!pointModel.id){pointModel.id=stateMap.pointId;}
if(jqueryMap.$basicPointType.val()==configMap.cloudPointType.MAPPING_POINT){spinner.spin(document.body);$.post(url+stateMap.project_id+'/',pointModel).done(function(result){if(result.success){Alert.success(document.body,I18n.resource.debugTools.info.MODIFY_SUCCESS).showAtTop(2000);stateMap.sheetInstance=null;jqueryMap.$editPointWin.modal('hide');loadPointTable(stateMap.currentPage);}else{alert(I18n.resource.debugTools.info.MODIFY_FAILED+':'+result.msg);}}).always(function(){spinner.stop();});}else{var points=getPointsHandler();var requestPromises=[];points.forEach(function(point){pointModel['remark']=point['remark'];pointModel['remark_en']=point['remark_en'];$.extend(point,pointModel);point['logic']=point['content'];point['moduleName']=getModuleName(point['name']);point['value']=point['name'];delete point['name'];delete point['content'];var one_point_request=online_test_request(stateMap.project_id,point['logic'],point['value'],point['moduleName']).then(function(resultDict){if(resultDict.error=='0'){return $.post(url+stateMap.project_id+'/',point).then(function(result){if(result.success){stateMap.pointId=result.data._id;}else{alert(I18n.resource.debugTools.info.MODIFY_FAILED+':'+result.msg);}}).always(function(){spinner.stop();});}else{alert(I18n.resource.debugTools.sitePoint.ONLINE_TEST_ERROR);spinner.stop();}});requestPromises.push(one_point_request);});$.when.apply(null,requestPromises).done(function(){Alert.success(document.body,I18n.resource.debugTools.info.MODIFY_SUCCESS).showAtTop(2000);stateMap.sheetInstance=null;jqueryMap.$editPointWin.modal('hide');loadPointTable(stateMap.currentPage);});}
return false;};getBatchHistorySelectedPointInfoList=function(){for(var i=0;i<stateMap.selectedPointList.length;i++){var selectedPoint=stateMap.selectedPointList[i];stateMap.batchHistorySelectedPointValueList.push(selectedPoint.value);stateMap.batchHistorySelectedPointModuleNameList.push(selectedPoint.params.moduleName);stateMap.batchHistorySelectedPointFormatList.push(selectedPoint.params.format);stateMap.batchHistorySelectedPointIdList.push(selectedPoint._id);stateMap.batchHistorySelectedPointLogicList.push(selectedPoint.params.logic);}};getSelectedPointList=function(){stateMap.selectedPointList=[];var data=stateMap.sheetInstance.getData(),selection=stateMap.sheetInstance.getSelected();if(selection){var startIndex,endIndex;if(selection[0]<=selection[2]){startIndex=selection[0];endIndex=selection[2];}else{startIndex=selection[2];endIndex=selection[0];}
for(var start=startIndex,end=endIndex+1;start<end;start++){stateMap.selectedPointList.push(data[start]);}}};dateTimeCheck=function(timeFrom,timeTo){if(timeFrom==''){alert(I18n.resource.debugTools.sitePoint.START_DATE_EMPTY_TIP);return false;}
if(timeTo==''){alert(I18n.resource.debugTools.sitePoint.END_DATE_EMPTY_TIP);return false;}
if(timeFrom>timeTo){alert(I18n.resource.debugTools.sitePoint.DATE_ERROR_TIP);return false;}
return true;};refreshModuleStatusShow=function(){refreshRepairStatus();setJqueryMap();setDateFormat();};refreshRepairStatus=function(status){if(status=='adding'){jqueryMap.$infoGenerate.text(I18n.resource.debugTools.sitePoint.MENDING_DATA);if(stateMap.generateType==='quick'){jqueryMap.$history_generate.hide();}else{jqueryMap.$quickGenerateBox.hide();}
jqueryMap.$history_generate_delete.show();}else{if(status=='finish'){jqueryMap.$infoGenerate.text(I18n.resource.debugTools.sitePoint.COMPLEMENT_HAS_BEEN_COMPLETED);jqueryMap.$history_generate.removeClass('disabled').show();jqueryMap.$quickGenerateBox.removeClass('disabled').show();}else{jqueryMap.$infoGenerate.text('');jqueryMap.$history_generate.removeClass('disabled').show();jqueryMap.$quickGenerateBox.removeClass('disabled').show();}
jqueryMap.$history_generate_delete.hide();}};onLoadSheet=function(page){spinner.spin(jqueryMap.$container.get(0));var project_id=jqueryMap.$select_project.val();var search_text=jqueryMap.$text_search.val().trim()===''?'all':jqueryMap.$text_search.val().trim();page=typeof(page)=="object"||typeof(page)==typeof(undefined)?1:page;stateMap.currentPage=parseInt(page);stateMap.project_id=project_id;configMap.sheetModel.getCloudSheet(project_id,page,configMap.page_size,search_text,stateMap.pointType).done(function(result){if(!result.success){return false;}
stateMap.pointTotal=result.data.pointTotal;renderSheet(result.data.pointTable);paginationRefresh(result.data.pointTotal);storage.setItem("current_project",project_id);projectCheckDataSync(project_id);}).always(function(){spinner.stop();});jqueryMap.$point_export.attr('href','/point_tool/export/cloud/'+project_id);};projectCheckDataSync=function(project_id){if(!window.localStorage.getItem("dataSyncCheckNotNotification")){WebAPI.get('dataSyncCheck/'+project_id).done(function(result){if(result.success){if(!result.data&&result.data.dataSync){infoBox.prompt(I18n.resource.debugTools.sitePoint.THE_PROJECT_DATA_NOT_CONNEDTED_WITH_THE_REAL_TIME_PROJECT_DATA,function(value){if($.trim(value)){WebAPI.post("setPJRealityTable",{"mysqlname":value,"projectId":project_id}).fail(function(){alert(I18n.resource.debugTools.sitePoint.FAILED_TO_SYNCHRONIZE_DATA);}).done(function(){alert(I18n.resource.debugTools.sitePoint.SYNCHRONIZE_DATA_SUCCESSFULLY);})}},{buttons:{cancel:{callback:function(){window.localStorage.setItem("dataSyncCheckNotNotification",true);}}}});}else{}}else{alert("project_data_synchronization_check failed");}}).fail(function(){alert("project_data_synchronization_check failed");})}};onPointTypeSelected=function(){stateMap.pointType=$(this).val();if(stateMap.pointType){jqueryMap.$buttonGroup.addClass('pointType');if(stateMap.pointType==configMap.cloudPointType.CALC_POINT){jqueryMap.$batch_history.removeClass('dn');}else{jqueryMap.$batch_history.addClass('dn');}}else{jqueryMap.$buttonGroup.removeClass('pointType');}
onLoadSheet();};importSheet=function(event){var fileData=event.target.files[0];var formData=new FormData();formData.append('file',fileData);formData.append('projectId',stateMap.project_id);formData.append('userId',68);var _this=$(this);spinner.spin(document.body);$.ajax({url:"/point_tool/cloudPoint/import/",type:"POST",data:formData,enctype:'multipart/form-data',processData:false,contentType:false}).done(function(result){if(!result.success){spinner.stop();alert(result.msg);}else{stateMap.pointTotal=result.data.pointTotal;renderSheet(result.data.pointTable);}}).always(function(){spinner.stop();_this.val(null);});return false;};onRefreshCloudPoint=function(){confirm(I18n.resource.debugTools.sitePoint.SYNCHRONIZE_ALL_POINTS_OR_NOT,function(){spinner.spin(document.body);WebAPI.post('/point_tool/syncCloudPoint',{projectId:stateMap.project_id}).done(function(result){alert(I18n.resource.debugTools.sitePoint.SYNCHRONIZATION_SUCCESSFUL+result.data+I18n.resource.debugTools.sitePoint.POINTS);onLoadSheet();}).always(function(){spinner.stop();});});};beop.view=beop.view||{};beop.view.cloudSheet={configModel:configModel,init:init,destroy:destroy,sheetInstance:stateMap.sheetInstance,onLoadSheet:onLoadSheet};}(beop||(beop={})));(function(beop){var configMap={htmlURL:'/static/app/CxTool/views/pointTypeSet.html',settable_map:{sheetModel:true},sheetModel:null},stateMap={},jqueryMap={},setJqueryMap,configModel,init,getPointEditParamsInfo,refreshSourceTypeSelector,onAddPointSourceTypeSubmit,onUpdatePointSourceTypeSubmit,onDeletePointType;setJqueryMap=function(){var $container=stateMap.$container;jqueryMap={$container:$container,$point_set_edit:$container.find('#point_set_edit'),$point_set_source:$container.find('#point_set_source'),$add_source_form:$container.find('.add-source-form'),$update_source_form:$container.find('.update-source-form'),$del_point_type:$container.find('#del-point-type')};};configModel=function(input_map){beop.util.setConfigMap({input_map:input_map,settable_map:configMap.settable_map,config_map:configMap});return true;};init=function($container){stateMap.$container=$container;$.when($.get('/point_tool/pointSourceType/getAll'),$.get('/static/app/CxTool/views/pointTypeSet.html')).done(function(sourceTypesResult,resultHtml){if(sourceTypesResult[0].success){stateMap.sourceTypes=sourceTypesResult[0].data;}else{stateMap.sourceTypes={};}
stateMap.$container.html(resultHtml[0]);setJqueryMap();jqueryMap.$point_set_source.change(getPointEditParamsInfo);jqueryMap.$add_source_form.submit(onAddPointSourceTypeSubmit);jqueryMap.$update_source_form.submit(onUpdatePointSourceTypeSubmit);jqueryMap.$del_point_type.click(onDeletePointType);refreshSourceTypeSelector();});};refreshSourceTypeSelector=function(){jqueryMap.$point_set_source.empty().append(beopTmpl('tpl_source_type_options',{sourceTypes:stateMap.sourceTypes}));};beop.view=beop.view||{};beop.view.point_type={configModel:configModel,init:init};}(beop||(beop={})));(function(beop){var i18n_point=I18n.resource.debugTools.sitePoint,i18n_info=I18n.resource.debugTools.info;var configMap={htmlURL:'/static/app/CxTool/views/standardPointNameSet.html',settable_map:{}},stateMap={sheetSystemName:[{"id":"xxxx01","en":"Ch","zh":""},{"id":"xxxx02","en":"PCHWP","zh":""},{"id":"xxxx03","en":"SCHWP","zh":""},{"id":"xxxx04","en":"CWP","zh":""},{"id":"xxxx05","en":"CT","zh":""},{"id":"xxxx06","en":"GWP","zh":""},{"id":"xxxx07","en":"MKP","zh":""},{"id":"xxxx08","en":"HX","zh":""},{"id":"xxxx09","en":"ChCHWV","zh":""},{"id":"xxxx10","en":"ChCWV","zh":""},{"id":"xxxx11","en":"ICE","zh":""},{"id":"xxxx12","en":"IceTank","zh":""},{"id":"xxxx13","en":"SCHW","zh":""},{"id":"xxxx14","en":"PCHW","zh":""},{"id":"xxxx15","en":"CHW","zh":""},{"id":"xxxx16","en":"CW","zh":""},{"id":"xxxx17","en":"HW","zh":""}],sheetPointName:[{id:"cccc001",name:'',child:[{id:"yyyy001",zh:'',en:'SeasonMode'},{id:"yyyy002",zh:'',en:'CoolingorHeatingMode'}]},{id:"cccc002",name:'',child:[{id:"yyyy003",zh:'',en:'ChAmpLmtSetPointFeedback'},{id:"yyyy004",zh:'',en:'ChAMPS'},{id:"yyyy005",zh:'',en:'ChChWTempSupplySetPoint'},{id:"yyyy033",zh:'',en:'ChChWTempSupplyActiveSetPoint'},{id:"yyyy034",zh:'',en:'ChLeaveEvapTemp'},{id:"yyyy035",zh:'',en:'ChEnterEvapTemp'}]},{id:"cccc003",name:'',child:[{id:"yyyy006",zh:'',en:'PumpRemoteMode'},{id:"yyyy007",zh:'',en:'PumpAutoMode'},{id:"yyyy008",zh:'',en:'PumpRunHour'},{id:"yyyy009",zh:'',en:'PumpOnOff'},{id:"yyyy010",zh:'',en:'PumpEnable'},{id:"yyyy011",zh:'',en:'PumpErr'},{id:"yyyy012",zh:'',en:'PumpOnOffSet'},{id:"yyyy013",zh:'',en:'PumpVSDFreq'}]}],sheetPointNameSystemList:[]},jqueryMap={},setJqueryMap,configModel,init,refreshSettingSystemName,refreshSettingPointName,refreshSystemNameSelect,isHasChecked,getNameId,delSystemId,delPointId,getSheetPointNameParentList,getZhAndEnlist,getRandom,onEditSystemName,onSaveSystemName,onAddSystemNameWin,onDeleteSystemNameWin,onDeleteSystemNameItems,onAddSystemNameItems,onAddPointNameWin,onDeletePointNameWin,onSavePointName,onEditPointName,onChangeSystemName,onChangeTabName,onAddPointParamConfirm,onAddPointSystemConfirm,onAddNameInput,onDeletePointNameItems;setJqueryMap=function(){var $container=stateMap.$container;jqueryMap={$container:$container,$system_name_tbody:$("#systemNameSheetTbody"),$point_name_tbody:$("#pointNameSheetTbody"),$system_name_add:$("#system_name_add"),$system_name_edit:$("#system_name_edit"),$system_name_delete:$("#system_name_delete"),$system_name_save:$("#system_name_save"),$isDelSystemNameWin:$("#isDelSystemNameWin"),$addSystemNameWin:$("#addSystemNameWin"),$deleteSystemConfirm:$("#deleteSystemConfirm"),$addSystemConfirm:$("#addSystemConfirm"),$systemNameInput:$("#systemNameInput"),$systemStandardNameInput:$("#systemStandardNameInput"),$standard_name_add:$("#standard_name_add"),$standard_name_edit:$("#standard_name_edit"),$standard_name_delete:$("#standard_name_delete"),$standard_name_save:$("#standard_name_save"),$addPointNameWin:$("#addPointNameWin"),$systemNameSelect:$("#systemNameSelect"),$paramNameInputWrapper:$("#paramNameInputWrapper"),$paramSystemNameInputWrapper:$("#paramSystemNameInputWrapper"),$addStandardNameTab:$("#addStandardNameTab"),$addPointNameWrapper:$("#addPointNameWrapper"),$addSystemNameWrapper:$("#addSystemNameWrapper"),$pointNameContentWrapper:$("#pointNameContentWrapper"),$addPointParamConfirmBtn:$("#addPointParamConfirmBtn"),$addPointSystemConfirmBtn:$("#addPointSystemConfirmBtn"),$addSystemParamNameInput:$("#addSystemParamNameInput"),$paramAddInput:$("#paramAddInput"),$systemAddInput:$("#systemAddInput"),$isDelStandardNameWin:$("#isDelStandardNameWin"),$pointNameSheetTbody:$("#pointNameSheetTbody"),$deleteStandardConfirm:$("#deleteStandardConfirm")};};configModel=function(input_map){beop.util.setConfigMap({input_map:input_map,settable_map:configMap.settable_map,config_map:configMap});return true;};init=function($container){stateMap.$container=$container;$.when($.get(configMap.htmlURL)).done(function(resultHtml){stateMap.$container.html(resultHtml);I18n.fillArea(stateMap.$container);setJqueryMap();jqueryMap.$system_name_add.off().on('click',onAddSystemNameWin);jqueryMap.$system_name_delete.off().on('click',onDeleteSystemNameWin);jqueryMap.$system_name_save.off().on('click',onSaveSystemName);jqueryMap.$system_name_edit.off().on('click',onEditSystemName);jqueryMap.$deleteSystemConfirm.off().on('click',onDeleteSystemNameItems);jqueryMap.$addSystemConfirm.off().on('click',onAddSystemNameItems);jqueryMap.$standard_name_add.off().on('click',onAddPointNameWin);jqueryMap.$standard_name_delete.off().on('click',onDeletePointNameWin);jqueryMap.$standard_name_save.off().on('click',onSavePointName);jqueryMap.$standard_name_edit.off().on('click',onEditPointName);jqueryMap.$systemNameSelect.off().on('change',onChangeSystemName);jqueryMap.$addStandardNameTab.off().on('click','li',onChangeTabName);jqueryMap.$addPointParamConfirmBtn.off().on('click',onAddPointParamConfirm);jqueryMap.$addPointSystemConfirmBtn.off().on('click',onAddPointSystemConfirm);jqueryMap.$paramAddInput.off().on('click',onAddNameInput);jqueryMap.$systemAddInput.off().on('click',onAddNameInput);jqueryMap.$deleteStandardConfirm.off().on('click',onDeletePointNameItems);$('#standardNameTab a[href="#systemNameWrapper"]').tab('show');refreshSettingSystemName();refreshSettingPointName();getSheetPointNameParentList();});};isHasChecked=function($box){var flag=0;$box.find("input[type=checkbox]").each(function(index,item){if($(item).is(':checked')){flag=1;return false;}});if(flag){return true;}else{return false;}};getNameId=function($box){var idList=[];$box.find("input[type=checkbox]").each(function(index,item){var $item=$(item);if($item.is(':checked')){idList.push($item.attr("itemId"));}});return idList;};getRandom=function(){return"xyz"+Math.random()*900000};delSystemId=function(targetList,delList){for(var i=0;i<targetList.length;i++){var target=targetList[i];for(var j=0;j<delList.length;j++){if(target.id==delList[j]){targetList.splice(i,1);i--;}}}};delPointId=function(targetList,delList){for(var i=0;i<targetList.length;i++){var target=targetList[i];for(var k=0;k<target.child.length;k++){var child=target.child[k];for(var j=0;j<delList.length;j++){if(child.id==delList[j]){target.child.splice(k,1);k--;}}}
if(!target.child.length){targetList.splice(i,1);i--;}}};getSheetPointNameParentList=function(){stateMap.sheetPointNameSystemList=[];for(var i=0;i<stateMap.sheetPointName.length;i++){var item=stateMap.sheetPointName[i];var obj={};obj.name=item.name;obj.id=item.id;stateMap.sheetPointNameSystemList.push(obj);}};getZhAndEnlist=function($Wrapper){var nameZhList=[];var nameEnList=[];var $input_params=$Wrapper.find(".addParamName");var $input_standards=$Wrapper.find(".addStandardName");for(var i=0;i<$input_params.length;i++){var $input_paramVal=$.trim($input_params.eq(i).val());var $input_standardVal=$.trim($input_standards.eq(i).val());if($input_paramVal!=""&&$input_standardVal!=""){nameZhList.push($input_paramVal);nameEnList.push($input_standardVal);}else if($input_paramVal!=""&&$input_standardVal==""){i18n_point
alert(i18n_point.ADD_NAME_INFO1);return false;}else if($input_paramVal==""&&$input_standardVal!=""){alert(i18n_point.ADD_NAME_INFO1);return false;}}
return{'nameZhList':nameZhList,'nameEnList':nameEnList}};refreshSystemNameSelect=function(){var list=stateMap.sheetPointNameSystemList;var optionHtml="";for(var i=0;i<list.length;i++){var item=list[i];optionHtml+='<option value="'+item.id+'">'+item.name+'</option>';}
jqueryMap.$systemNameSelect.empty().html(optionHtml);};refreshSettingSystemName=function(){jqueryMap.$system_name_tbody.empty().append(beopTmpl('tpl_system_name_list',{systemNameList:stateMap.sheetSystemName}));};refreshSettingPointName=function(){jqueryMap.$point_name_tbody.empty().append(beopTmpl('tpl_point_name_list',{pointNameList:stateMap.sheetPointName}));};onEditSystemName=function(){var $nameEdit=jqueryMap.$system_name_tbody.find(".nameEdit");$nameEdit.addClass("editOk").attr("contenteditable",true);$nameEdit.eq(0).focus();};onSaveSystemName=function(){stateMap.sheetSystemName=[];var $trs=jqueryMap.$system_name_tbody.find("tr");for(var i=0;i<$trs.length;i++){var $tr=$trs.eq(i);var item={};item.id=$tr.attr("pointId");item.en=$tr.find(".systemNameEn").text();item.zh=$tr.find(".systemNameZh").text();stateMap.sheetSystemName.push(item);}
jqueryMap.$system_name_tbody.find(".nameEdit").removeClass("editOk").attr("contenteditable",false);alert(I18n.resource.common.SAVE_SUCCESS);};onAddSystemNameWin=function(){jqueryMap.$addSystemNameWin.modal();jqueryMap.$systemNameInput.val("");jqueryMap.$systemStandardNameInput.val("");};onDeleteSystemNameWin=function(){if(isHasChecked(jqueryMap.$system_name_tbody)){jqueryMap.$isDelSystemNameWin.modal();}else{alert(i18n_info.CHOOSE_DELETE_POINTS);return false;}};onAddSystemNameItems=function(){if(jqueryMap.$systemNameInput.val()==""){alert(i18n_point.ENTER_EQUIPMENT_NAME);return false;}
if(jqueryMap.$systemStandardNameInput.val()==""){alert(i18n_point.ENTER_STANDARD_NAME);return false;}
var createObj={};createObj.id=getRandom();createObj.en=jqueryMap.$systemNameInput.val();createObj.zh=jqueryMap.$systemStandardNameInput.val();stateMap.sheetSystemName.push(createObj);refreshSettingSystemName();};onDeleteSystemNameItems=function(){var idList=getNameId(jqueryMap.$system_name_tbody);delSystemId(stateMap.sheetSystemName,idList);refreshSettingSystemName();jqueryMap.$isDelSystemNameWin.modal("hide");};onEditPointName=function(){var $nameEdit=jqueryMap.$point_name_tbody.find(".nameEdit");$nameEdit.addClass("editOk").attr("contenteditable",true);$nameEdit.eq(0).focus();};onSavePointName=function(){stateMap.sheetPointName=[];var $trs=jqueryMap.$point_name_tbody.find("tr");var trNo=0;var $systemTds=jqueryMap.$point_name_tbody.find("td[rowspan]");for(var i=0;i<$systemTds.length;i++){var $systemTd=$systemTds.eq(i);var parent={};var rowpanLen=parseInt($systemTd.attr("rowspan"));parent.id=stateMap.sheetPointNameSystemList[i].id;parent.name=$systemTd.text();parent.child=[];for(var j=0;j<rowpanLen;j++){var child={};var index=j+trNo;child.id=$trs.find("input[type='checkbox']").eq(index).attr("itemid");child.zh=$trs.find(".systemNameZh").eq(index).text();child.en=$trs.find(".systemNameEn").eq(index).text();parent.child.push(child);}
trNo+=rowpanLen;stateMap.sheetPointName.push(parent);}
jqueryMap.$point_name_tbody.find(".nameEdit").removeClass("editOk").attr("contenteditable",false);alert(I18n.resource.common.SAVE_SUCCESS);};onAddPointNameWin=function(){$('#addPointNameWin a[href="#addPointNameWrapper"]').tab('show');jqueryMap.$addPointNameWrapper.show();jqueryMap.$addSystemNameWrapper.hide();jqueryMap.$pointNameContentWrapper.find("input[type='text']").val("");jqueryMap.$addPointNameWin.modal();jqueryMap.$paramNameInputWrapper.html(beopTmpl('tpl_add_name_inputs'));jqueryMap.$paramSystemNameInputWrapper.html(beopTmpl('tpl_add_name_inputs'));getSheetPointNameParentList();refreshSystemNameSelect();};onDeletePointNameWin=function(){if(isHasChecked(jqueryMap.$pointNameSheetTbody)){jqueryMap.$isDelStandardNameWin.modal();}else{alert(i18n_info.CHOOSE_DELETE_POINTS);return false;}};onDeletePointNameItems=function(){var idList=getNameId(jqueryMap.$point_name_tbody);delPointId(stateMap.sheetPointName,idList);refreshSettingPointName();jqueryMap.$isDelStandardNameWin.modal("hide");};onChangeSystemName=function(){jqueryMap.$paramNameInputWrapper.find("input[type='text']").val("");};onChangeTabName=function(){if($(this).attr("targetObj")=="addPointNameWrapper"){jqueryMap.$addPointNameWrapper.show();jqueryMap.$addSystemNameWrapper.hide();}else{jqueryMap.$addPointNameWrapper.hide();jqueryMap.$addSystemNameWrapper.show();}};onAddPointParamConfirm=function(){var $wrapper=jqueryMap.$paramNameInputWrapper;var list=getZhAndEnlist($wrapper);if(list){if(list.nameZhList.length){var $input_params=$wrapper.find(".addParamName");var $input_standards=$wrapper.find(".addStandardName");var systemId=jqueryMap.$systemNameSelect.find("option:selected").val();for(var i=0;i<stateMap.sheetPointName.length;i++){var item=stateMap.sheetPointName[i];if(systemId==item.id){for(var j=0;j<list.nameZhList.length;j++){var obj={};obj.id=getRandom();obj.zh=list.nameZhList[j];obj.en=list.nameEnList[j];item.child.push(obj);}
break;}}
$input_params.val("");$input_standards.val("");refreshSettingPointName();}else{alert(i18n_point.ADD_NAME_INFO2);return;}}};onAddPointSystemConfirm=function(){var systemNameVal=$.trim(jqueryMap.$addSystemParamNameInput.val());if(systemNameVal!=""){var $wrapper=jqueryMap.$paramSystemNameInputWrapper;var list=getZhAndEnlist($wrapper);if(list){if(list.nameZhList.length){var $input_params=$wrapper.find(".addParamName");var $input_standards=$wrapper.find(".addStandardName");var item={};item.id=getRandom();item.name=systemNameVal;item.child=[];for(var j=0;j<list.nameZhList.length;j++){var obj={};obj.id=getRandom();obj.zh=list.nameZhList[j];obj.en=list.nameEnList[j];item.child.push(obj);}
stateMap.sheetPointName.push(item);getSheetPointNameParentList();jqueryMap.$addSystemParamNameInput.val("");$input_params.val("");$input_standards.val("");refreshSettingPointName();refreshSystemNameSelect();}else{alert(i18n_point.ADD_NAME_INFO2);return;}}}else{alert(i18n_point.ADD_SYSTEM_NAME);}};onAddNameInput=function(){if($(this).attr("id")=="paramAddInput"){jqueryMap.$paramNameInputWrapper.append(beopTmpl('tpl_add_name_input'));}else{jqueryMap.$paramSystemNameInputWrapper.append(beopTmpl('tpl_add_name_input'));}};beop.view=beop.view||{};beop.view.standardName={configModel:configModel,init:init};}(beop||(beop={})));(function(beop){var pageSize=10;if($(window).height()>800){pageSize=15;}
var configMap={htmlURL:'/point_tool/html/server',serverDetailURL:'/static/app/CxTool/views/serverManage.html',settable_map:{dtuModel:true,dtu_server_host:''},dtu_server_host:'',dtuModel:null,statusRefreshTime:60000,pageSize:pageSize},stateMap={currentPage:1,pointTotal:0,dtuId:'',selectRemarkDom:null,selectRecordDom:null},jqueryMap={},setJqueryMap,configModel,loadServerStatus,enterProject,loadServerDetail,getServerDetail,restartCore,destroyServerDetail,getCoreVersion,synUnit01,onClickEditIcon,onMoveOutCell,onMoveOverCell,onClickCancelIcon,onClickSureIcon,onUploadCore,onModifySettings,freshParamTable,paginationRefresh,returnCheckboxValue,itemRecordsWin,addRecords,remarkEdit,remarkSave,remarkClose,itemRemarksBox,init;setJqueryMap=function(){var $container=stateMap.$container;jqueryMap={$container:$container,$serverContainer:$container.find('#serverContainer'),$serverRestartBtn:$container.find('#serverRestartBtn'),$statusDisk:$container.find('#status-disk'),$statusCpu:$container.find('#status-cpu'),$statusMemory:$container.find('#status-memory'),$statusTime:$container.find('#status-time'),$coreUpdateTime:$container.find('#coreUpdateTime'),$coreVersion:$container.find('#coreVersion'),$unitTable:$container.find('#unitTable'),$uploadCore:$container.find('#uploadCore'),$formBox:$container.find('#formBox'),$serverPaginationWrapper:$container.find('#serverPaginationWrapper'),$itemRecordsWin:$container.find('#itemRecordsWin'),$addRecords:$container.find('#addRecords'),$remarksBox:$container.find('#remarksBox'),$remarkEdit:$container.find('#remarkEdit'),$remarkSave:$container.find('#remarkSave'),$remarkText:$container.find('#remarkText'),$remarkClose:$container.find('#remarkClose'),$remarkHtml:$container.find('#remarkHtml'),$serversRecordUl:$container.find('#serversRecordUl'),$writeRecord:$container.find('#writeRecord')};};configModel=function(input_map){beop.util.setConfigMap({input_map:input_map,settable_map:configMap.settable_map,config_map:configMap});return true;};init=function($container){stateMap.$container=$container;$.get(configMap.htmlURL).done(function(resultHtml){stateMap.$container.html(resultHtml);setJqueryMap();loadServerStatus();jqueryMap.$serverContainer.on('click','#servers_table .enterProject',enterProject);jqueryMap.$container.off('click.itemRecords').on('click.itemRecords','#servers_table .itemRecords',itemRecordsWin);jqueryMap.$container.on('click','#servers_table .tooltipTxt',itemRemarksBox);jqueryMap.$addRecords.on('click',addRecords);jqueryMap.$remarkEdit.on('click',remarkEdit);jqueryMap.$remarkSave.on('click',remarkSave);jqueryMap.$remarkClose.on('click',remarkClose);I18n.fillArea(stateMap.$container);});};paginationRefresh=function(totalNum){var totalPages=Math.ceil(totalNum/configMap.pageSize);if(!totalNum){return;}
$("#mappingPaginationWrapper").empty().html('<ul id="serverPagination" class="pagination fr"></ul>');while(totalPages<stateMap.currentPage&&stateMap.currentPage>1){stateMap.currentPage=stateMap.currentPage-1;}
var pageOption={first:'&laquo;&laquo',prev:'&laquo;',next:'&raquo;',last:'&raquo;&raquo;',startPage:stateMap.currentPage?stateMap.currentPage:1,totalPages:!totalPages?1:totalPages,onPageClick:function(event,page){stateMap.currentPage=page;loadServerStatus();}};if(stateMap.currentPage){pageOption['startPage']=stateMap.currentPage?stateMap.currentPage:1;}
$("#serverPaginationWrapper").twbsPagination(pageOption);};loadServerStatus=function(){spinner.spin(document.body);jqueryMap.$remarksBox.hide();stateMap.currentPage=stateMap.currentPage?stateMap.currentPage:1;configMap.dtuModel.loadServerStatus(stateMap.currentPage,configMap.pageSize).done(function(result){if(result.success){var result_data=result.data,result_list=result_data.list,result_total=result_data.total;if(result_data.list.length){jqueryMap.$serverContainer.empty().html(beopTmpl('tpl_server_status',{statues:result_list}));paginationRefresh(result_total);I18n.fillArea(stateMap.$container);}}}).always(function(){spinner.stop();});};itemRemarksBox=function(){jqueryMap.$remarkSave.hide();var $this=$(this),offset=$this.offset(),$remarkTextDom=$this.parents('td').find('.remark_text');var left=offset.left-300,top=offset.top+20;stateMap.selectRemarkDom=$remarkTextDom;jqueryMap.$remarkHtml.html($remarkTextDom.data('text')).show();jqueryMap.$remarkEdit.show();jqueryMap.$remarkText.val('');jqueryMap.$remarksBox.css({'left':left+'px','top':top+'px'}).show();};remarkEdit=function(){jqueryMap.$remarkSave.show();jqueryMap.$remarkEdit.hide();jqueryMap.$remarkText.val(jqueryMap.$remarkHtml.html()).show();jqueryMap.$remarkHtml.hide();};remarkSave=function(){return WebAPI.post("./updateServerRemark/"+stateMap.projectId,{'remark':jqueryMap.$remarkText.val()}).done(function(result){if(result.success){var text=jqueryMap.$remarkText.val();jqueryMap.$remarkSave.hide();jqueryMap.$remarkEdit.show();jqueryMap.$remarkHtml.html(text).show();stateMap.selectRemarkDom.text(text).data('text',text).attr('title',text);jqueryMap.$remarkText.val('').hide();}}).fail(function(){alert(I18n.resource.common.SAVE_FAIL);}).always(function(){});};remarkClose=function(){jqueryMap.$remarkHtml.html('').hide();jqueryMap.$remarkText.val('').hide();jqueryMap.$remarksBox.hide();};enterProject=function(){var $parents=$(this).parents('tr');stateMap.projectId=$parents.attr('project-id');location.hash='#server/'+stateMap.projectId+'/';};itemRecordsWin=function(){var $this=$(this);stateMap.selectRecordDom=$this.parents('td').find('.record_text');stateMap.projectId=$this.parents('tr').attr('dtu-id');jqueryMap.$remarksBox.hide();return WebAPI.get("./getServerRecords/"+stateMap.projectId).done(function(result){if(result.success){jqueryMap.$serversRecordUl.empty().html(beopTmpl('tpl_server_records',{record_list:result.data.record_list}));jqueryMap.$writeRecord.val('');jqueryMap.$itemRecordsWin.modal();}}).fail(function(){}).always(function(){});};addRecords=function(){var info=jqueryMap.$writeRecord.val().trim();if(info){spinner.spin(jqueryMap.$itemRecordsWin.find('.modal-dialog').get(0));return WebAPI.post("/addServerRecords/"+stateMap.projectId,{'info':info}).done(function(result){if(result.success){var userName=$("#tools_user_name").text(),update_time=result.data.update_time;var recordInfo=userName+' '+info+' '+update_time;jqueryMap.$serversRecordUl.prepend(beopTmpl('tpl_server_record',{recordInfo:{'user':userName,'info':info,'update_time':update_time}}));jqueryMap.$writeRecord.val("");jqueryMap.$serversRecordUl.scrollTop(0);stateMap.selectRecordDom.text(recordInfo).attr('title',recordInfo);}}).fail(function(){alert(I18n.resource.common.SAVE_FAIL);}).always(function(){spinner.stop();});}else{alert(I18n.resource.debugTools.servers.RECORD_CANNOT_EMPTY);}};loadServerDetail=function(project_id,$container){stateMap.projectId=project_id;$.get(configMap.serverDetailURL).done(function(resultHtml){if(!stateMap.$container){stateMap.$container=$container;}
stateMap.$container.html(resultHtml);setJqueryMap();$('#currentProject').text(configMap.currentProjectName);jqueryMap.$container.find('[data-toggle="tooltip"]').tooltip();I18n.fillArea(stateMap.$container);stateMap.serverDetailTimeoutId=0;getServerDetail();jqueryMap.$serverRestartBtn.click(restartCore);getCoreVersion();jqueryMap.$unitTable.on('mouseover','.unit-value',onMoveOverCell).on('mouseout','.unit-value',onMoveOutCell).on('click','.edit-icon',onClickEditIcon).on('click','.cancel',onClickCancelIcon).on('click','.ok',onClickSureIcon).on('click','.modify-settings',onModifySettings);jqueryMap.$uploadCore.change(onUploadCore);});};onClickSureIcon=function(){var $this=$(this),$unitTD=$this.closest('.unit-value');$unitTD.removeClass('editing');var key=$unitTD.data('key');var value=$unitTD.find('input').val().trim();if((stateMap.unit01[key]+'')===(value+'')){$unitTD.find('.unit-text').html(stateMap.unit01[key]);$unitTD.find('.icons').hide();}else{$.ajax({type:'POST',url:'/updateUnit/'+stateMap.dtu_name,crossDomain:true,data:{'data':JSON.stringify({name:key,value:value})},dataType:'json'}).done(function(result){if(result.success){stateMap.unit01[key]=value;$unitTD.find('.unit-text').html(stateMap.unit01[key]);$unitTD.find('.icons').hide();}})}};returnCheckboxValue=function($form){var obj={};$form.find("input[type='checkbox']").each(function(index,item){var $item=$(item),name=$item.attr('name'),oldValue=$item.closest(".form-group-type").find("input[type='hidden']").val();if($item.is(':checked')){$item.val("1");if(oldValue!=$item.val()){obj[name]='1';}}else{if(oldValue=='1'){obj[name]='0';}}});return obj;};onModifySettings=function(){var $this=$(this),$form=$this.parents("form"),jsonData=$form.serializeObject();var changeData=returnCheckboxValue($form);spinner.spin(document.body);WebAPI.ajaxForDebugTool({type:'POST',data:{'data':JSON.stringify($.extend(jsonData,changeData))}},configMap.dtu_server_host,stateMap.dtu_name,'updateUnit').done(function(result){if(result.success){alert(I18n.resource.common.SAVE_SUCCESS);}else{alert(I18n.resource.common.SAVE_FAIL);}}).always(function(){spinner.stop();});};onUploadCore=function(event){var fileData=event.target.files[0];var formData=new FormData();formData.append('file',fileData);var _this=$(this);spinner.spin(document.body);$.ajax({url:'/updateCore/'+stateMap.dtu_name,crossDomain:true,type:"POST",data:formData,enctype:'multipart/form-data',processData:false,contentType:false}).done(function(result){if(!result.success){spinner.stop();alert(result.msg);}else{}}).always(function(){spinner.stop();_this.val(null);});};onClickCancelIcon=function(){var $this=$(this),$unitTD=$this.closest('.unit-value');$unitTD.removeClass('editing');var key=$unitTD.data('key');$unitTD.find('.unit-text').html(stateMap.unit01[key]);$unitTD.find('.icons').hide();};onMoveOverCell=function(){var $this=$(this);if($this.hasClass('editing')){$this.find('.icons.action').show();}else{$this.find('.icons.edit').show();}};onMoveOutCell=function(){$(this).find('.icons').hide();};onClickEditIcon=function(){var $this=$(this),$unitTD=$this.closest('.unit-value');$unitTD.addClass('editing');var key=$unitTD.data('key');$unitTD.find('.unit-text').html('<input value="'+stateMap.unit01[key]+'"/>');$unitTD.find('.icons').hide();};getServerDetail=function(){return $.ajax({type:'GET',url:'/serverDetail/'+stateMap.projectId}).done(function(result){if(result.success){if(!result.data){return;}
var disk_info='';if(result.data.disk){var disk_info_list=result.data.disk.split('/');disk_info=Math.floor(disk_info_list[0]/1024)+'G/'+Math.floor(disk_info_list[1]/1024)+'G';}
jqueryMap.$statusDisk.text(disk_info);jqueryMap.$statusCpu.text(result.data.cpu+'%');jqueryMap.$statusMemory.text(result.data.memory+'%');jqueryMap.$statusTime.text(result.data.time);if(result.data.version){jqueryMap.$coreVersion.text(result.data.version.core_version);jqueryMap.$coreUpdateTime.text(result.data.version.core_update_time);}}}).fail(function(){I18n.fillArea(stateMap.$container);}).always(function(){stateMap.serverDetailTimeoutId=setTimeout(function(){getServerDetail();},configMap.statusRefreshTime);});};freshParamTable=function($targetForm){var formElements=$targetForm.find(".form-value");for(var i=0;i<formElements.length;i++){var $item=formElements.eq(i);for(var prop in stateMap.unit01){if($item.attr("name")===prop){if($item.attr("type")==='checkbox'){if(stateMap.unit01[prop]==='1'){$item.attr("checked",true);}else{$item.attr("checked",false);}}
if($item[0].nodeName==="SPAN"){$item.text(stateMap.unit01[prop]);}else{$item.val(stateMap.unit01[prop]);$item.closest(".form-group-type").find("input[type='hidden']").val(stateMap.unit01[prop]);}
break;}}}};getCoreVersion=function(){return $.ajax({type:'GET',url:'/getCoreVersion/'+stateMap.projectId}).done(function(result){if(result.success){jqueryMap.$coreUpdateTime.text(result.data?result.data:'');}}).fail(function(){})};synUnit01=function(){spinner.spin(jqueryMap.$container.get(0));return WebAPI.ajaxForDebugTool({type:'GET'},configMap.dtu_server_host,stateMap.dtu_name,'synUnit01').done(function(result){if(result.success){stateMap.unit01=result.data.unit01?result.data.unit01:{};freshParamTable(jqueryMap.$formBox);}}).fail(function(){I18n.fillArea(stateMap.$container);}).always(function(){spinner.stop();});};restartCore=function(){spinner.spin(jqueryMap.$container.get(0));WebAPI.ajaxForDebugTool({type:'POST'},configMap.dtu_server_host,stateMap.dtu_name,'restartCore').done(function(result){if(result.success){Alert.success(document.body,I18n.resource.debugTools.info.RESTART_CORE_SUCCESSFUL).showAtTop(2000);}else{Alert.danger(document.body,result.msg).showAtTop(2000);}}).always(function(){spinner.stop();});};destroyServerDetail=function(){clearTimeout(stateMap.serverDetailTimeoutId);};beop.view=beop.view||{};beop.view.server_manage={configModel:configModel,loadServerDetail:loadServerDetail,destroyServerDetail:destroyServerDetail,init:init};}(beop||(beop={})));(function(beop){var configMap={htmlURL:'/static/app/CxTool/views/engineDebugging.html',settable_map:{sheetModel:true},sheetModel:null},stateMap={},jqueryMap={},setJqueryMap,configModel,init;setJqueryMap=function(){var $container=stateMap.$container;jqueryMap={$container:$container};};configModel=function(input_map){beop.util.setConfigMap({input_map:input_map,settable_map:configMap.settable_map,config_map:configMap});return true;};init=function($container){stateMap.$container=$container;$.when($.get(configMap.htmlURL)).done(function(resultHtml){stateMap.$container.html(resultHtml);setJqueryMap();})};beop.view=beop.view||{};beop.view.engine_debugging={configModel:configModel,init:init};}(beop||(beop={})));(function(beop){var i18n=I18n.resource.common;var configMap={htmlURL:'/static/app/CxTool/views/operationRecord.html',settable_map:{sheetModel:true},sheetModel:null},stateMap={op_record_project_list:[{"id":"project001","name":""}],op_record_list:[{"time":"2015-11-20 11:24:56","username":"owen","project":"project1","equipment":"mac","ip":"192.168.1.98","attribution":"","operation":""},{"time":"2015-11-20 11:24:56","username":"owen","project":"project7","equipment":"mac","ip":"192.168.1.98","attribution":"","operation":""}]},jqueryMap={},setJqueryMap,configModel,init,refreshOpRecordList,validateTime,onSearchRecord;setJqueryMap=function(){var $container=stateMap.$container;jqueryMap={$container:$container,$op_record_project_type:$("#op_record_project_type"),$op_record_tbody:$("#op_record_tbody"),$op_record_submit_btn:$("#op_record_submit_btn"),$op_record_begin_time:$("#op_record_begin_time"),$op_record_end_time:$("#op_record_end_time"),$op_record_error_info:$("#op_record_error_info")};};configModel=function(input_map){beop.util.setConfigMap({input_map:input_map,settable_map:configMap.settable_map,config_map:configMap});return true;};init=function($container){stateMap.$container=$container;$.when($.get(configMap.htmlURL)).done(function(resultHtml){stateMap.$container.html(resultHtml);setJqueryMap();jqueryMap.$op_record_submit_btn.off().on('click',onSearchRecord);jqueryMap.$op_record_project_type.empty().html(beopTmpl('tpl_op_record_project_list',{list:stateMap.op_record_project_list}));refreshOpRecordList();jqueryMap.$op_record_begin_time.datetimepicker({minView:2,format:"yyyy-mm-dd",autoclose:true,endDate:new Date()});jqueryMap.$op_record_end_time.datetimepicker({minView:2,format:"yyyy-mm-dd",autoclose:true});})};refreshOpRecordList=function(){jqueryMap.$op_record_tbody.empty().html(beopTmpl('tpl_op_record_list',{list:stateMap.op_record_list}));};validateTime=function($startTime,$endTime,$msg){var flag=false;var startTimeVal=$startTime.val();var endTimeVal=$endTime.val();if(startTimeVal==""){$msg.text(i18n.START_TIME_REQUIRED).show();flag=false;}else if(endTimeVal==""){$msg.text(i18n.END_TIME_REQUIRED).show();flag=false;}else if(startTimeVal>endTimeVal){$msg.text(i18n.TIME_COMPARE).show();flag=false;}else{flag=true;}
if(flag){$msg.hide();}else{$msg.show();}
return flag;};onSearchRecord=function(){var flag=validateTime(jqueryMap.$op_record_begin_time,jqueryMap.$op_record_end_time,jqueryMap.$op_record_error_info);if(flag){refreshOpRecordList();}};beop.view=beop.view||{};beop.view.operation_record={configModel:configModel,init:init};}(beop||(beop={})));(function(beop){var i18n_sheetHeaders=I18n.resource.debugTools.sheetHeaders;var isSmallScreen=Math.max(document.documentElement.clientHeight,window.innerHeight||0)<=768;var configMap={htmlURL:'/point_tool/html/pointMapping',settable_map:{sheetModel:true},sheetModel:null,page_size:isSmallScreen?20:25,enginePointSearchSize:isSmallScreen?8:10},stateMap={sheetInstance:null,sheetHeaders:Math.max(document.documentElement.clientHeight,window.innerHeight||0)<=768?[i18n_sheetHeaders.CLOUD_POINT,i18n_sheetHeaders.COMMENT,i18n_sheetHeaders.SITE_POINT,i18n_sheetHeaders.MAPPING,i18n_sheetHeaders.SITE_POINT_NOTES,i18n_sheetHeaders.REAL_TIME_DATA,i18n_sheetHeaders.DATA_TIME]:[i18n_sheetHeaders.CLOUD_POINT,i18n_sheetHeaders.COMMENT,i18n_sheetHeaders.SITE_POINT,i18n_sheetHeaders.SITE_POINT_NOTES,i18n_sheetHeaders.REAL_TIME_DATA,i18n_sheetHeaders.DATA_TIME,i18n_sheetHeaders.MAPPING],changedList:{},currentPage:1,enginePointSearchPage:1,pointTotal:0,mappingPoint:null,mappedType:'all'},jqueryMap={},storage,setJqueryMap,configModel,init,loadSheet,renderSheet,onSelectEnginePoint,onDisplaySelected,onPointMapping,onUndoPoint,onRedoPoint,onSearchTextKeyDown,onImportMapping,importSheet,onPointSearchKeyDown,getPointIndex,refreshMappingInfo,doSearchPointInEngine,loadPointTable,autoSave,destroy,paginationRefresh,paginationStatic,doSearchHighlight;storage=window.localStorage;setJqueryMap=function(){var $container=stateMap.$container;jqueryMap={$container:$container,$sheet:$container.find('.sheet'),$point_undo_btn:$container.find('#point_undo'),$point_redo_btn:$container.find('#point_redo'),$select_project:$container.find('#select_project'),$text_search:$container.find('#text_search'),$point_search:$container.find('#point_search'),$search_result:$container.find('#search_result'),$energy_section:$container.find('.energy-section'),$count:$container.find('.count'),$mappingPagination:$container.find('#mappingPagination'),$enginePointPagination:$container.find('#enginePointPagination'),$display_type:$container.find('#display_type'),$point_mapping:$container.find('#point_mapping'),$export_mapping:$container.find('#export_mapping'),$import_mapping:$container.find('#import_mapping')};};configModel=function(input_map){beop.util.setConfigMap({input_map:input_map,settable_map:configMap.settable_map,config_map:configMap});return true;};init=function($container,text,page){stateMap.$container=$container;stateMap.currentPage=parseInt(page);stateMap.searchText=text?text.trim():'';loadPointTable();};refreshMappingInfo=function(row,point){var mapping=point['params']['mapping'];for(var prop in mapping){if(mapping.hasOwnProperty(prop)){stateMap.sheetInstance.setDataAtRowProp(row,'params.mapping.'+prop,mapping[prop]);}}};autoSave=function(){stateMap.intervalID=setInterval(function(){if(!$.isEmptyObject(stateMap.changedList)){clearInterval(stateMap.intervalID);WebAPI.post('/point_tool/mappingAutoSave/'+stateMap.project_id+'/',stateMap.changedList).done(function(result){if(result.success){for(var row in result.data){if(result.data.hasOwnProperty(row)){refreshMappingInfo(row,result.data[row]);}}
stateMap.changedList={};}}).always(function(){autoSave();})}},2000)};destroy=function(){if(stateMap.sheetInstance){stateMap.sheetInstance.destroy();stateMap.sheetInstance=null;}
clearInterval(stateMap.intervalID);};renderSheet=function(data){if(!data){alert(I18n.resource.debugTools.info.DATA_IS_EMPTY);return false;}
if(stateMap.sheetInstance){stateMap.sheetInstance.loadData(data);}else{var bigScreenColumns=[{data:"value",type:'text',readOnly:true},{data:"params.remark",type:'text',width:"200px",readOnly:true},{data:"params.mapping.point",type:'text',width:"200px"},{data:"params.mapping.remark",type:'text',width:"150px",readOnly:true},{data:"params.mapping.val",type:'text',width:"100px",readOnly:true},{data:"params.mapping.val_time",type:'text',width:"100px",readOnly:true},{data:function(data){return!!(data&&!$.isEmptyObject(data.params.mapping)&&data.params.mapping.point);},type:'checkbox',width:"50px"}];var smallScreenColumns=[{data:"value",type:'text',readOnly:true},{data:"params.remark",type:'text',width:"200px",readOnly:true},{data:"params.mapping.point",type:'text',width:"200px"},{data:function(data){return!!(data&&data.params&&!$.isEmptyObject(data.params.mapping)&&data.params.mapping.point);},type:'checkbox',width:"50px"},{data:"params.mapping.remark",type:'text',width:"250px",readOnly:true},{data:"params.mapping.val",type:'text',width:"100px",readOnly:true},{data:"params.mapping.val_time",type:'text',width:"100px",readOnly:true}];stateMap.sheetInstance=new Handsontable(jqueryMap.$sheet.get(0),{data:data,colHeaders:stateMap.sheetHeaders,rowHeaders:true,manualColumnResize:true,manualRowResize:true,stretchH:'all',persistentState:true,autoWrapCol:true,autoWrapRow:true,search:true,minSpareRows:0,minSpareCols:0,outsideClickDeselects:false,fixedColumnsLeft:1,afterRender:function(isForced){if(isForced){jqueryMap.$count.text(stateMap.pointTotal);}},beforeValidate:function(value,row,prop,source){if(stateMap.sheetData[row].value===value){return false;}else{return value;}},afterChange:function(changes,source){if(source==='loadData'){return false;}
for(var m=0;m<changes.length;m++){var row=changes[m][0],prop=changes[m][1],newVal=changes[m][3];if(typeof prop==='function'){var data=stateMap.sheetInstance.getData();var item=data[row];if(!item.params){item.params={};}
if(newVal===true){if(stateMap.mappingPoint){item.params.mapping={'point':stateMap.mappingPoint.point_value,'point_id':stateMap.mappingPoint.point_id}}else{alert(I18n.resource.debugTools.info.NOT_BIND);continue;}}else{if(item['params']){delete item['params']['mapping'];}}
stateMap.changedList[row]=item;stateMap.sheetInstance.render(data);}else if(prop==='mapping.point'){stateMap.changedList[row]=stateMap.sheetInstance.getData()[row];}}},currentRowClassName:'currentRow',columns:isSmallScreen?smallScreenColumns:bigScreenColumns});}
stateMap.sheetData=stateMap.sheetInstance.getData();jqueryMap.$sheet.off("click").on('click',"tbody td",getPointIndex);};loadPointTable=function(){var initPointTable=function(resultHtml){stateMap.$container.html(resultHtml);setJqueryMap();jqueryMap.$point_undo_btn.on('click',onUndoPoint);jqueryMap.$point_redo_btn.on('click',onRedoPoint);jqueryMap.$text_search.on('keydown',onSearchTextKeyDown);jqueryMap.$point_search.on('keydown',onPointSearchKeyDown);jqueryMap.$select_project.change(function(){loadSheet();doSearchPointInEngine();});jqueryMap.$search_result.on('click','.point_selector',onSelectEnginePoint);jqueryMap.$display_type.on('click','.mapped_type',onDisplaySelected);jqueryMap.$point_mapping.click(onPointMapping);jqueryMap.$import_mapping.change(importSheet);jqueryMap.$export_mapping.attr('href','/point_tool/export/mapping/'+storage.getItem('current_project'));if(storage.getItem("current_project")){var $option=jqueryMap.$select_project.find("option");var hasOptionFlag=false;for(var i=0;i<$option.length;i++){if($option.eq(i).val()==storage.getItem("current_project")){hasOptionFlag=true;break;}}
if(hasOptionFlag){jqueryMap.$select_project.val(storage.getItem("current_project"));}else{var firstVal=$option.eq(1).val();jqueryMap.$select_project.val(firstVal);storage.setItem("current_project",firstVal);}
jqueryMap.$select_project.val(storage.getItem("current_project"));loadSheet();doSearchPointInEngine();}};$.get(configMap.htmlURL).done(function(result){initPointTable(result);autoSave();I18n.fillArea(stateMap.$container);});};onSelectEnginePoint=function(){var $this=$(this);stateMap.mappingPoint={point_value:$this.val(),point_id:$this.attr('point-id')}};onImportMapping=function(){};onUndoPoint=function(){stateMap.sheetInstance.undo();};onRedoPoint=function(){stateMap.sheetInstance.redo();};onDisplaySelected=function(){stateMap.mappedType=$(this).val();stateMap.currentPage=1;loadSheet();};onPointSearchKeyDown=function(e){if(e.keyCode===13){var text=jqueryMap.$point_search.val().trim();stateMap.enginePointSearchPage=1;doSearchPointInEngine(text);}};importSheet=function(){var fileData=event.target.files[0];var formData=new FormData();formData.append('file',fileData);formData.append('projectId',stateMap.project_id);spinner.spin(document.body);var _this=$(this);$.ajax({url:"/point_tool/mapping/import/",type:"POST",data:formData,enctype:'multipart/form-data',processData:false,contentType:false}).done(function(result){if(!result.success){alert(result.msg);}else{window.location.reload()}}).always(function(){spinner.stop();_this.val(null);});return false;};doSearchPointInEngine=function(searchText){if(!searchText){searchText='';}
configMap.sheetModel.searchEnginePoint(stateMap.project_id,searchText,stateMap.enginePointSearchPage,configMap.enginePointSearchSize).done(function(result){if(result.success){for(var m=0;m<result.data.pointTable.length;m++){var point=result.data.pointTable[m];point.value_text=doSearchHighlight(point.value,searchText);if(point.params){point.params.remark_text=doSearchHighlight(point.params.remark,searchText);}else{point.params={};point.params.remark_text='';}}
jqueryMap.$search_result.html(beopTmpl('tpl_search_result',{list:result.data.pointTable}));I18n.fillArea(stateMap.$container);paginationStatic(result.data.total,1);}});};onSearchTextKeyDown=function(e){if(e.keyCode===13){stateMap.mappingPoint=null;stateMap.searchText=$(this).val().trim();if(stateMap.searchText){location.hash='#pointMapping/'+(stateMap.searchText?stateMap.searchText:'')+'/1';}else{location.hash='#pointMapping/1';}}};getPointIndex=function(){stateMap.currentPointIndex=stateMap.sheetInstance.getSelected()?stateMap.sheetInstance.getSelected()[0]:0;};loadSheet=function(){var project_id=jqueryMap.$select_project.val();stateMap.project_id=project_id;jqueryMap.$text_search.val(stateMap.searchText);configMap.sheetModel.getMappingSheet(project_id,stateMap.currentPage,configMap.page_size,stateMap.searchText,stateMap.mappedType).done(function(result){if(!result.success){return false;}
stateMap.pointTotal=result.data.pointTotal;renderSheet(result.data.pointTable);paginationRefresh(result.data.pointTotal);storage.setItem("current_project",project_id);});};paginationStatic=function(totalNum,currentPage){var totalPages=Math.ceil(totalNum/configMap.enginePointSearchSize);var pageOption={first:'&laquo;&laquo',prev:'&laquo;',next:'&raquo;',last:'&raquo;&raquo;',startPage:currentPage,totalPages:!totalPages?1:totalPages,onPageClick:function(event,page){if(stateMap.enginePointSearchPage===page){return;}
stateMap.enginePointSearchPage=page;var text=jqueryMap.$point_search.val().trim();configMap.sheetModel.searchEnginePoint(stateMap.project_id,text,stateMap.enginePointSearchPage,configMap.enginePointSearchSize).done(function(result){if(result.success){for(var m=0;m<result.data.pointTable.length;m++){var point=result.data.pointTable[m];point.value_text=doSearchHighlight(point.value,text);if(point.params){point.params.remark_text=doSearchHighlight(point.params.remark,text);}else{point.params={};point.params.remark_text='';}}
jqueryMap.$search_result.html(beopTmpl('tpl_search_result',{list:result.data.pointTable}));I18n.fillArea(stateMap.$container);jqueryMap.$enginePointPagination.twbsPagination('show',stateMap.enginePointSearchPage);}});}};if(jqueryMap.$enginePointPagination.data('twbs-pagination')){jqueryMap.$enginePointPagination.twbsPagination('destroy');}
jqueryMap.$enginePointPagination.twbsPagination(pageOption);};paginationRefresh=function(totalNum){var totalPages=Math.ceil(totalNum/configMap.page_size);if(!totalNum){return;}
while(totalPages<stateMap.currentPage&&stateMap.currentPage>1){stateMap.currentPage=stateMap.currentPage-1;}
var href='';if(stateMap.searchText){href='#pointMapping/'+(stateMap.searchText?stateMap.searchText:'')+'/{{number}}';}else{href='#pointMapping/{{number}}';}
var pageOption={first:'&laquo;&laquo',prev:'&laquo;',next:'&raquo;',last:'&raquo;&raquo;',startPage:stateMap.currentPage?stateMap.currentPage:1,totalPages:!totalPages?1:totalPages,onPageClick:function(event,page){stateMap.currentPage=page;}};if(href){pageOption['href']=href;}
if(jqueryMap.$mappingPagination.data('twbs-pagination')){jqueryMap.$mappingPagination.twbsPagination('destroy');}
stateMap.pagination=jqueryMap.$mappingPagination.twbsPagination(pageOption);};doSearchHighlight=function(bodyText,searchTerm){return bodyText;};beop.view=beop.view||{};beop.view.pointMapping={configModel:configModel,init:init,destroy:destroy,sheetInstance:stateMap.sheetInstance,loadSheet:loadSheet};}(beop||(beop={})));(function(beop){var pageSize=10;if($(window).height()>800){pageSize=15;}
var configMap={htmlURL:'/point_tool/html/realTimeData',settable_map:{sheetModel:true},sheetModel:null,page_size:pageSize,order:undefined},stateMap={currentPage:1,pointInfoList:null,chart:{},pointCurveList:[],refreshMonitorList:[],watchList:[]},jqueryMap={},setJqueryMap,configModel,init,destroy,refreshPointList,loadPointList,initProjectPointList,loadMonitorList,searchList,joinCurve,addCurve,joinMonitoring,tableWatchOrder,delWatchPoint,delWatchPointsSelect,delAllCurves,changeProject,onSearchDel,onSearchPointName,onIsDelWatchPoints,onIsDelCurves,onManualAddPointWin,onManualAddPointBtn,paginationRefresh,initialValueReset,onChartZoomIn,zoomInChartWinHide,refreshMonitorIcon,refreshCurveIcon,uniqueRefreshMonitorList,storage=window.localStorage;setJqueryMap=function(){var $container=stateMap.$container;jqueryMap={$container:$container,$tableWatch:$container.find("#tableWatch"),$tableWatchOrder:$container.find(".tableWatchOrder"),$tableMonitor:$container.find("#tableMonitor"),$tableWatchTbody:$container.find("#tableWatchTbody"),$tableMonitorTbody:$container.find("#tableMonitorTbody"),$select_project:$container.find("#select_project"),$searchPointName:$container.find("#searchPointName"),$searchDel:$container.find("#searchDel"),$divPointManagerPage:$container.find("#divPointManagerPage"),$delSelect:$container.find("#delSelect"),$isDelPointsBtnWin:$container.find("#isDelPointsBtnWin"),$delPointsBtn:$container.find("#delPointsBtn"),$manualAddPoint:$container.find("#manualAddPoint"),$manualAddPointWin:$container.find("#manualAddPointWin"),$manualAddPointBtn:$container.find("#manualAddPointBtn"),$pointsContent:$container.find("#pointsContent"),$realTimePagination:$container.find("#realTimePagination"),$realTimePaginationWrapper:$container.find("#realTimePaginationWrapper"),$tableOperatingRecord:$container.find("#tableOperatingRecord"),$dialogContent:$container.find("#dialogContent"),$dialogContentPrompt:$container.find("#dialogContentPrompt"),$chartZoomIn:$container.find("#chartZoomIn"),$zoomInChartBox:$container.find("#zoomInChartBox"),$zoomInChartWin:$container.find("#zoomInChartWin"),$delAllCurve:$container.find("#delAllCurve"),$delCurvesBtn:$container.find("#delCurvesBtn"),$isDelCurvesBtnWin:$container.find("#isDelCurvesBtnWin")};};configModel=function(input_map){beop.util.setConfigMap({input_map:input_map,settable_map:configMap.settable_map,config_map:configMap});return true;};init=function($container,page){stateMap.$container=$container;$.get(configMap.htmlURL).done(function(resultHtml){stateMap.$container.html(resultHtml);setJqueryMap();jqueryMap.$searchPointName.on('keyup',onSearchPointName);jqueryMap.$searchDel.on('click',onSearchDel);jqueryMap.$tableWatchOrder.on('click',tableWatchOrder);jqueryMap.$divPointManagerPage.on('click','.delWatchPoint',delWatchPoint);jqueryMap.$divPointManagerPage.on('click','.joinMonitoring',joinMonitoring);jqueryMap.$divPointManagerPage.on('click','.joinCurve',addCurve);jqueryMap.$delSelect.on('click',onIsDelWatchPoints);jqueryMap.$delAllCurve.on('click',onIsDelCurves);jqueryMap.$delCurvesBtn.on('click',delAllCurves);jqueryMap.$delPointsBtn.on('click',delWatchPointsSelect);jqueryMap.$manualAddPoint.on('click',onManualAddPointWin);jqueryMap.$manualAddPointBtn.on('click',onManualAddPointBtn);jqueryMap.$chartZoomIn.on('click',onChartZoomIn);jqueryMap.$zoomInChartWin.on('hidden.bs.modal',zoomInChartWinHide);jqueryMap.$select_project.change(changeProject);if(storage.getItem("current_project")){jqueryMap.$select_project.val(storage.getItem("current_project"));loadPointList(page);}
I18n.fillArea(jqueryMap.$container);})};destroy=function(){if(!(/^#realTimeData(\/|\/\d+)?$/.test(location.hash))){initialValueReset();}};initialValueReset=function(){clearInterval(chartTimer);if(stateMap.chart&&stateMap.chart.historyChart){stateMap.chart.historyChart.dispose();stateMap.chart={};}
stateMap.refreshMonitorList=[];stateMap.pointCurveList=[];stateMap.watchList=[];stateMap.currentPage=1;jqueryMap.$searchPointName.val("");};paginationRefresh=function(totalNum){var totalPages=Math.ceil(totalNum/configMap.page_size);if(!totalNum){return;}
jqueryMap.$realTimePaginationWrapper.empty().html('<ul id="realTimePagination" class="pagination"></ul>');while(totalPages<stateMap.currentPage&&stateMap.currentPage>1){stateMap.currentPage=stateMap.currentPage-1;}
var pageOption={first:'&laquo;&laquo',prev:'&laquo;',next:'&raquo;',last:'&raquo;&raquo;',startPage:stateMap.currentPage?stateMap.currentPage:1,totalPages:!totalPages?1:totalPages,onPageClick:function(event,page){stateMap.currentPage=page;location.hash="#realTimeData/"+page;}};if(stateMap.currentPage){pageOption['startPage']=stateMap.currentPage?stateMap.currentPage:1;}
stateMap.pagination=$("#realTimePagination").twbsPagination(pageOption);};searchList=function(){var keyWordVal=$.trim(jqueryMap.$searchPointName.val());var pointHtml='',pointInfo;var reg=new RegExp("("+keyWordVal+")","gi");for(var i=0;i<stateMap.pointInfoList.length;i++){pointInfo=stateMap.pointInfoList[i];var remark=pointInfo.remark?pointInfo.remark:" --- ";var keyWordName=pointInfo.name.replace(reg,'<span class="keyword">$1</span>');pointHtml+='<tr data-point="'+pointInfo.name+'" data-value="'+pointInfo.value+'" data-time="'+pointInfo.time+'" data-remark="'+remark+'">'+'<td class="point_'+pointInfo.name+'"><span class="db">'+keyWordName+'</span><span class="remark">'+remark+'</span></td>'+'<td class="value_'+pointInfo.value+'">'+pointInfo.value+'</td>'+'<td>'+'<span>'+pointInfo.time+'</span>'+'<span class="iconGroup">'+'<span class="svg-icon addToCurve ml10 cp joinCurve" aria-hidden="true" i18n="title=debugTools.realTimeData.ADD_TO_CURVE"></span>'+'<span class="svg-icon addToMonitor cp joinMonitoring" aria-hidden="true" i18n="title=debugTools.realTimeData.ADD_TO_WATCH"></span>'+'</td></tr>';}
jqueryMap.$tableWatchTbody.html(pointHtml);I18n.fillArea(jqueryMap.$container);};changeProject=function(){initialValueReset();storage.setItem("current_project",jqueryMap.$select_project.val());loadPointList(stateMap.currentPage);$("#tableOperatingRecord").remove();location.hash="#realTimeData/"+1;};loadPointList=function(page){refreshPointList(page);initProjectPointList();};refreshPointList=function(page){if(!page){page=1;}
var project_id=jqueryMap.$select_project.val();var search_val=jqueryMap.$searchPointName.val().trim();if(!search_val){search_val='';}
if(project_id){return WebAPI.post("/admin/dataPointManager/search/",{projectId:project_id,current_page:page,page_size:configMap.page_size,text:search_val,order:configMap.order}).done(function(result){var total=result.total,list=result.list;if(!total){stateMap.currentPage=1;jqueryMap.$tableWatchTbody.html("");paginationRefresh(1);return;}
list.sort(function(a,b){if(a.name.toLowerCase()<b.name.toLowerCase())return-1;if(a.name.toLowerCase()>b.name.toLowerCase())return 1;return 0;});stateMap.pointInfoList=list;var pointListHtml='';for(var i=0;i<list.length;i++){var point=list[i];var remark=point.remark?point.remark:" --- ";pointListHtml+='<tr data-point="'+point.name+'" data-value="'+point.value+'" data-time="'+point.time+'" data-remark="'+remark+'">'+'<td class="point_'+point.name+'"><span class="db">'+point.name+'</span><span class="remark">'+remark+'</span></td>'+'<td class="value_'+point.value+'">'+point.value+'</td>'+'<td>'+'<span>'+point.time+'</span>'+'<span class="iconGroup">'+'<span class="svg-icon addToCurve ml10 cp joinCurve" aria-hidden="true" i18n="title=debugTools.realTimeData.ADD_TO_CURVE"></span>'+'<span class="svg-icon addToMonitor cp joinMonitoring" aria-hidden="true" i18n="title=debugTools.realTimeData.ADD_TO_WATCH"></span>'+'</td>'+'</tr>';}
jqueryMap.$tableWatchTbody.html(pointListHtml);paginationRefresh(total);if(search_val){searchList(search_val);}
I18n.fillArea(jqueryMap.$tableWatchTbody);refreshCurveIcon();refreshMonitorIcon();}).fail(function(){}).always(function(){});}};tableWatchOrder=function(){var $this=$(this),icon=$this.find('.glyphicon');var decline=icon.hasClass('glyphicon-sort-by-attributes-alt');var rise=icon.hasClass('glyphicon-sort-by-attributes');if(!rise&&!decline){configMap.order=$this.data('value')==='pointValue'?'pointvalue asc':'time asc';icon.addClass('glyphicon-sort-by-attributes');}else if(decline){configMap.order=$this.data('value')==='pointValue'?'pointvalue asc':'time asc';icon.removeClass('glyphicon-sort-by-attributes-alt').addClass('glyphicon-sort-by-attributes');}else if(rise){configMap.order=$this.data('value')==='pointValue'?'pointvalue desc':'time desc';icon.removeClass('glyphicon-sort-by-attributes').addClass('glyphicon-sort-by-attributes-alt');}
refreshPointList();};initProjectPointList=function(){spinner.spin(stateMap.$container.get(0));var project_id=jqueryMap.$select_project.val();var savedPointsPromise;savedPointsPromise=WebAPI.get('/admin/dataPointManager/loadData/'+project_id);$.when(refreshPointList(),savedPointsPromise).done(function(pointListResult,savedPointsResult){if(savedPointsResult[1]){stateMap.refreshMonitorList=savedPointsResult[0].list;loadMonitorList(savedPointsResult[0].list);}}).always(function(){spinner.stop();});};loadMonitorList=function(pointList){jqueryMap.$tableMonitorTbody.empty();var html='';for(var i=0;i<pointList.length;i++){var point=pointList[i];var remark=point.remark?point.remark:" --- ";html+='<tr class="pointItem" data-point="'+point.name+'" data-value="'+point.value+'" data-time="'+point.time+'" data-remark="'+remark+'">'+'<td class="point_'+point.name+'"><span class="db">'+point.name+'</span><span class="remark">'+remark+'</span></td>'+'<td class="value_'+point.value+'">'+point.value+'</td>'+'<td>'+'<span>'+point.time+'</span>'+'<span class="iconGroup">'+'<span class="svg-icon addToCurve ml10 cp joinCurve" aria-hidden="true" i18n="title=debugTools.realTimeData.ADD_TO_CURVE"></span>'+'<span class="glyphicon glyphicon-trash cp delWatchPoint" aria-hidden="true" i18n="title=common.DELETE"></span>'+'</td>'+'</tr>';}
jqueryMap.$tableMonitorTbody.append(html);refreshMonitorIcon();I18n.fillArea(jqueryMap.$container);};refreshMonitorIcon=function(){var pointNameList=[];for(var i=0;i<stateMap.refreshMonitorList.length;i++){pointNameList.push(stateMap.refreshMonitorList[i].name);}
jqueryMap.$tableWatchTbody.find(".addToMonitor").each(function(index,item){var $item=$(item),$tr=$item.parents("tr"),name=$tr.data('point');if($.inArray(name,pointNameList)!==-1){$item.addClass('selected').attr("i18n",'title=debugTools.realTimeData.ADD_WATCH_ALREADY');}else{$item.removeClass('selected').attr("i18n",'title=debugTools.realTimeData.ADD_TO_WATCH');}});I18n.fillArea(jqueryMap.$container);};refreshCurveIcon=function(){jqueryMap.$divPointManagerPage.find(".joinCurve").each(function(index,item){var $item=$(item),$tr=$item.parents("tr"),name=$tr.data('point');if($.inArray(name,stateMap.pointCurveList)!==-1){$item.addClass('selected').attr("i18n",'title=debugTools.realTimeData.ADD_CURVE_ALREADY');}else{$item.removeClass('selected').attr("i18n",'title=debugTools.realTimeData.ADD_TO_CURVE');}});I18n.fillArea(jqueryMap.$container);};uniqueRefreshMonitorList=function(){var uniqueList=[],pointList=[];for(var i=0;i<stateMap.refreshMonitorList.length;i++){if($.inArray(stateMap.refreshMonitorList[i].name,pointList)===-1){uniqueList.push(stateMap.refreshMonitorList[i]);pointList.push(stateMap.refreshMonitorList[i].name);}}
stateMap.refreshMonitorList=uniqueList;};joinMonitoring=function(){var $this=$(this),$tr=$this.parents("tr"),pointList=[];if($this.hasClass('selected')){return;}else{$this.addClass("selected");stateMap.refreshMonitorList.push({name:$tr.data('point'),value:$tr.data('value'),time:$tr.data('time'),remark:$tr.data('remark')});uniqueRefreshMonitorList();for(var i=0;i<stateMap.refreshMonitorList.length;i++){pointList.push(stateMap.refreshMonitorList[i].name);}
WebAPI.post('/admin/dataPointManager/update/',{projectId:jqueryMap.$select_project.val(),points:pointList.join(',')}).done(function(result){if(result.success){loadMonitorList(stateMap.refreshMonitorList);refreshCurveIcon();}});}};addCurve=function(){var $this=$(this),$tr=$this.closest('tr'),point=$tr.data('point');if($this.hasClass('selected')){return;}else{$this.addClass("selected");stateMap.pointCurveList.push(point);refreshCurveIcon();joinCurve(jqueryMap.$dialogContent);}};joinCurve=function($targetBox){var date_start=new Date(),data_end=new Date();date_start.setDate(date_start.getDate()-1);data_end.setDate(data_end.getDate());WebAPI.post("/get_history_data_padded_reduce",{projectId:jqueryMap.$select_project.val(),pointList:stateMap.pointCurveList,timeStart:date_start.format("yyyy-MM-dd HH:mm:ss"),timeEnd:data_end.format("yyyy-MM-dd HH:mm:ss"),timeFormat:"m5"}).done(function(data){if(data&&(!$.isEmptyObject(data))){var chart=new HistoryChart(data,date_start,data_end,$targetBox);chart.init();stateMap.chart=chart;jqueryMap.$dialogContent.removeAttr("i18n");}});};delAllCurves=function(){stateMap.pointCurveList=[];$("#tableOperatingRecord").remove();clearInterval(chartTimer);if(stateMap.chart&&stateMap.chart.historyChart){stateMap.chart.historyChart.dispose();stateMap.chart={};}
refreshCurveIcon();jqueryMap.$isDelCurvesBtnWin.modal('hide');};delWatchPoint=function(){var $this=$(this),$tr=$this.parents("tr"),point=$tr.data('point'),pointList=[];uniqueRefreshMonitorList();for(var i=0;i<stateMap.refreshMonitorList.length;i++){if(point==stateMap.refreshMonitorList[i].name){stateMap.refreshMonitorList.splice(i,1);break;}}
for(var i=0;i<stateMap.refreshMonitorList.length;i++){pointList.push(stateMap.refreshMonitorList[i].name);}
WebAPI.post('/admin/dataPointManager/update/',{projectId:jqueryMap.$select_project.val(),points:pointList.join(',')}).done(function(result){if(result.success){$tr.remove();refreshMonitorIcon();}});};delWatchPointsSelect=function(){WebAPI.post('/admin/dataPointManager/update/',{projectId:jqueryMap.$select_project.val(),points:''}).done(function(result){if(result.success){stateMap.refreshMonitorList=[];jqueryMap.$tableMonitorTbody.find("tr").remove();refreshMonitorIcon();jqueryMap.$isDelPointsBtnWin.modal("hide");}});};zoomInChartWinHide=function(){joinCurve(jqueryMap.$dialogContent);};onSearchPointName=function(e){if(e.keyCode==13){stateMap.currentPage=1;refreshPointList(1);}};onSearchDel=function(){jqueryMap.$searchPointName.val("");};onIsDelWatchPoints=function(){jqueryMap.$isDelPointsBtnWin.modal();};onIsDelCurves=function(){jqueryMap.$isDelCurvesBtnWin.modal();};onChartZoomIn=function(e){setJqueryMap();if(jqueryMap.$tableOperatingRecord.length>0){jqueryMap.$zoomInChartWin.modal();joinCurve(jqueryMap.$zoomInChartBox);}};onManualAddPointWin=function(){jqueryMap.$manualAddPointWin.modal();};onManualAddPointBtn=function(){var list=jqueryMap.$pointsContent.val().split("\n");var pointNameList=[];var $watchTr=jqueryMap.$tableMonitor.find('tr.pointItem');for(var i=0;i<$watchTr.length;i++){pointNameList.push($watchTr.eq(i).data('point'));}
for(var i=0;i<list.length;i++){pointNameList.push(list[i]);}
stateMap.watchList=$.unique(pointNameList);WebAPI.post('/admin/dataPointManager/update/',{projectId:jqueryMap.$select_project.val(),points:stateMap.watchList.join(',')}).done(function(result){if(result.success){WebAPI.get('/admin/dataPointManager/loadData/'+jqueryMap.$select_project.val()).done(function(result){stateMap.refreshMonitorList=result.list;stateMap.watchList=[];loadMonitorList(result.list);refreshMonitorIcon();jqueryMap.$manualAddPointWin.modal("hide");});}});};beop.view=beop.view||{};beop.view.real_time_data={configModel:configModel,init:init,destroy:destroy,refreshPointList:refreshPointList};}(beop||(beop={})));(function(beop){var pageSize=9;if($(window).height()>800){pageSize=12;}
var configMap={htmlURL:'/static/app/CxTool/views/autoMapping.html',settable_map:{},pageSize:pageSize},stateMap={currentPage:1,pointTotal:0,allResults:null},jqueryMap={},storage,setJqueryMap,configModel,init,destroy,renderMappingFields,saveFields,doAutoMapping,closeMappingResult,paginationRefresh,renderTable;storage=window.localStorage;setJqueryMap=function(){var $container=stateMap.$container;jqueryMap={$container:$container,$mappingFieldsContainer:$container.find('#mappingFieldsContainer'),$saveFields:$container.find('#saveFields'),$autoMapping:$container.find('#autoMapping'),$mappingResultWrapper:$container.find('#mappingResultWrapper'),$mappingResult:$container.find('#mappingResult'),$close_mapping_result:$container.find('#closeMappingResult'),$paginationWrapper:$container.find('#mappingPaginationWrapper')};};configModel=function(input_map){beop.util.setConfigMap({input_map:input_map,settable_map:configMap.settable_map,config_map:configMap});return true;};init=function($container){stateMap.$container=$container;WebAPI.get(configMap.htmlURL).done(function(resultHtml){stateMap.$container.html(resultHtml);setJqueryMap();renderMappingFields();jqueryMap.$saveFields.click(saveFields);jqueryMap.$autoMapping.click(doAutoMapping);jqueryMap.$close_mapping_result.click(closeMappingResult);});};closeMappingResult=function(){jqueryMap.$mappingResultWrapper.slideDown();jqueryMap.$mappingResult.empty();};renderMappingFields=function(){spinner.spin(document.body);WebAPI.get('/point_tool/pointMappingFields/'+storage.getItem('current_project')).done(function(result){if(result.success){stateMap.currentPage=1;stateMap.allResults=result.data;if(stateMap.allResults.length){renderTable();}
$('[data-toggle="tooltip"]').tooltip();}}).always(function(){spinner.stop();})};renderTable=function(){var startIndex,endIndex,allPage,allNum=stateMap.allResults.length;startIndex=(stateMap.currentPage-1)*(configMap.pageSize);allPage=allNum%configMap.pageSize==0?parseInt(allNum/configMap.pageSize):parseInt(allNum/configMap.pageSize)+1;if(allPage==stateMap.currentPage){if(allNum%configMap.pageSize==0){endIndex=startIndex+configMap.pageSize;}else{endIndex=startIndex+allNum%configMap.pageSize;}}else{endIndex=startIndex+configMap.pageSize;}
var currentPointList=[];for(var i=startIndex;i<endIndex;i++){currentPointList.push(stateMap.allResults[i]);}
jqueryMap.$mappingFieldsContainer.html(beopTmpl('tpl_fields_table',{fields:currentPointList}));paginationRefresh(allNum);};destroy=function(){if(stateMap.sheetInstance){stateMap.sheetInstance.destroy();stateMap.sheetInstance=null;}
clearInterval(stateMap.intervalID);};saveFields=function(){var allFields=[];jqueryMap.$mappingFieldsContainer.find('.fields').each(function(){var $this=$(this);allFields.push({word:$this.data('field'),example:$this.data('example'),value:$this.val(),frequency:$this.data('frequency')})});spinner.spin(document.body);WebAPI.post('/point_tool/savePointMappingFields/'+storage.getItem("current_project"),{fields:allFields}).done(function(result){}).fail(function(){alert('save failed')}).always(function(){spinner.stop();})};doAutoMapping=function(){spinner.spin(document.body);WebAPI.get('/point_tool/autoPointMapping/'+storage.getItem("current_project")).done(function(result){if(result.success){location.hash='#autoMapping/result';}}).always(function(){spinner.stop();})};paginationRefresh=function(totalNum){var totalPages=Math.ceil(totalNum/configMap.pageSize);if(!totalNum){return;}
jqueryMap.$paginationWrapper.empty().html('<ul id="mappingPagination" class="pagination fr"></ul>');while(totalPages<stateMap.currentPage&&stateMap.currentPage>1){stateMap.currentPage=stateMap.currentPage-1;}
var pageOption={first:'&laquo;&laquo',prev:'&laquo;',next:'&raquo;',last:'&raquo;&raquo;',startPage:stateMap.currentPage?stateMap.currentPage:1,totalPages:!totalPages?1:totalPages,onPageClick:function(event,page){stateMap.currentPage=page;renderTable();}};if(stateMap.currentPage){pageOption['startPage']=stateMap.currentPage?stateMap.currentPage:1;}
$("#mappingPagination").twbsPagination(pageOption);};beop.view=beop.view||{};beop.view.autoMapping={configModel:configModel,init:init,destroy:destroy};}(beop||(beop={})));(function(beop){var pageSize=8;if($(window).height()>800){pageSize=11;}
var configMap={htmlURL:'/static/app/CxTool/views/autoMappingResult.html',settable_map:{},sortIconClass:'glyphicon glyphicon-sort-by-attributes',sortAltIconClass:'glyphicon glyphicon-sort-by-attributes-alt',scoreSort:false,pageSize:pageSize},stateMap={currentPage:1,pointTotal:0,mappingResult:[],applyMatchResult:{}},jqueryMap={},storage,setJqueryMap,configModel,init,destroy,renderMappingResult,sortByScore,submitMatchResult,applyMatch,paginationRefresh,renderTable;storage=window.localStorage;setJqueryMap=function(){var $container=stateMap.$container;jqueryMap={$container:$container,$mappingResultContainer:$container.find('#mappingResultContainer'),$submitMappingResult:$container.find('#submitMappingResult'),$paginationWrapper:$container.find('#mappingResultPaginationWrapper')};};configModel=function(input_map){beop.util.setConfigMap({input_map:input_map,settable_map:configMap.settable_map,config_map:configMap});return true;};init=function($container){stateMap.$container=$container;WebAPI.get(configMap.htmlURL).done(function(resultHtml){stateMap.$container.html(resultHtml);setJqueryMap();renderMappingResult();jqueryMap.$mappingResultContainer.on('click','.apply-checkbox',applyMatch);jqueryMap.$submitMappingResult.click(submitMatchResult)});};paginationRefresh=function(totalNum){var totalPages=Math.ceil(totalNum/configMap.pageSize);if(!totalNum){return;}
jqueryMap.$paginationWrapper.empty().html('<ul id="mappingResultPagination" class="pagination fr" style="margin: 5px;"></ul>');while(totalPages<stateMap.currentPage&&stateMap.currentPage>1){stateMap.currentPage=stateMap.currentPage-1;}
var pageOption={first:'&laquo;&laquo',prev:'&laquo;',next:'&raquo;',last:'&raquo;&raquo;',startPage:stateMap.currentPage?stateMap.currentPage:1,totalPages:!totalPages?1:totalPages,onPageClick:function(event,page){stateMap.currentPage=page;renderTable();}};if(stateMap.currentPage){pageOption['startPage']=stateMap.currentPage?stateMap.currentPage:1;}
$("#mappingResultPagination").twbsPagination(pageOption);};renderTable=function(){var startIndex,endIndex,allPage,allNum=stateMap.mappingResult[0];startIndex=(stateMap.currentPage-1)*(configMap.pageSize);allPage=allNum%configMap.pageSize==0?parseInt(allNum/configMap.pageSize):parseInt(allNum/configMap.pageSize)+1;if(allPage==stateMap.currentPage){if(allNum%configMap.pageSize==0){endIndex=startIndex+configMap.pageSize;}else{endIndex=startIndex+allNum%configMap.pageSize;}}else{endIndex=startIndex+configMap.pageSize;}
var mappingResultList=Object.keys(stateMap.mappingResult[1]);var currentPointList=[];for(var i=startIndex;i<endIndex;i++){for(var prop in stateMap.mappingResult[1]){if(prop==mappingResultList[i]){currentPointList.push(stateMap.mappingResult[1][prop]);break;}}}
jqueryMap.$mappingResultContainer.html(beopTmpl('tpl_mapping_result_table',{mapping:currentPointList,scoreSort:'',total:stateMap.mappingResult[2],matched:stateMap.mappingResult[0]}));paginationRefresh(allNum);};sortByScore=function(){jqueryMap.$scoreOrder=$('#scoreOrder');if(stateMap.scoreSort){stateMap.mappingResult=stateMap.mappingResult.sort(function(a,b){return parseInt(a.score)>parseInt(b.score);})}else{stateMap.mappingResult=stateMap.mappingResult.sort(function(a,b){return parseInt(a.score)<parseInt(b.score);})}
stateMap.scoreSort=!stateMap.scoreSort;jqueryMap.$mappingResultContainer.html(beopTmpl('tpl_mapping_result_table',{mapping:stateMap.mappingResult,scoreSort:stateMap.scoreSort}));};applyMatch=function(){var $this=$(this);var point=$this.val();var suggest=$this.data('suggest');if($this.is(':checked')){stateMap.applyMatchResult[point]=suggest;}else{if(stateMap.applyMatchResult[point]){delete stateMap.applyMatchResult[point];}}};destroy=function(){if(stateMap.sheetInstance){stateMap.sheetInstance.destroy();stateMap.sheetInstance=null;}};renderMappingResult=function(){WebAPI.get('/point_tool/getSuggests/'+storage.getItem("current_project")).done(function(result){if(result.success){stateMap.currentPage=1;stateMap.applyMatchResult={};stateMap.mappingResult=[];for(var prop in result.data){stateMap.mappingResult.push(result.data[prop]);}
if(stateMap.mappingResult[0]){renderTable();}}})};submitMatchResult=function(){spinner.spin(document.body);WebAPI.post('/point_tool/submitMatchResult/'+storage.getItem("current_project"),stateMap.applyMatchResult).done(function(result){if(result.success){alert('Apply Successfully.');location.hash='#pointMapping';}}).always(function(){spinner.stop();})};beop.view=beop.view||{};beop.view.autoMappingResult={configModel:configModel,init:init,destroy:destroy,renderMappingResult:renderMappingResult};}(beop||(beop={})));(function(){var stateMap,jqueryMap,configMap,init,show,define_routes,setJqueryMap;stateMap={$container:$(".page-content")};configMap={dtu_server_host:null};setJqueryMap=function(){jqueryMap={$sideMenu:$('#side-menu')};};show=function(){beop.main.prototype.init($('.page-content'));};init=function($container){stateMap.$container=$container;beop.ctModel.init();beop.view.sheet.configModel({sheetModel:beop.ctModel.sheetModel,dtu_server_host:configMap.dtu_server_host});beop.view.cloudSheet.configModel({sheetModel:beop.ctModel.sheetModel});beop.view.real_time_data.configModel({sheetModel:beop.ctModel.sheetModel});beop.view.pointMapping.configModel({sheetModel:beop.ctModel.sheetModel});beop.view.server_manage.configModel({dtuModel:beop.ctModel.dtuModel,dtu_server_host:configMap.dtu_server_host});setJqueryMap();define_routes();Permission.check(document.body);};define_routes=function(){var last_route='';var enterFunc=function(route){jqueryMap.$sideMenu.children('li').removeClass('active');jqueryMap.$sideMenu.find('li a[href="'+route+'"]').parents('li').addClass('active');};var exitFunc=function(route){last_route=route;};Path.map("#pointTable(/:page)").enter(function(){enterFunc("#pointTable");}).to(function(){var page=typeof this.params['page']==='undefined'?1:this.params['page'];if(last_route==='#pointTable(/:page)'){beop.view.sheet.loadSheet(page);}else if(last_route==='#pointTable'){beop.view.sheet.loadSheet(page);}else{beop.view.sheet.init(stateMap.$container,page);}}).exit(function(){beop.view.sheet.destroy();exitFunc("#pointTable");});Path.map("#log").enter(function(){enterFunc("#log");}).to(function(){beop.view.operation_record.init(stateMap.$container);}).exit(function(){exitFunc("#log");});Path.map("#cloud(/:page)").enter(function(){enterFunc("#cloud");}).to(function(){var page=typeof this.params['page']==='undefined'?1:this.params['page'];if(last_route==='#cloud(/:page)'){beop.view.cloudSheet.onLoadSheet(page);}else if(last_route==='#cloud'){beop.view.cloudSheet.onLoadSheet(page);}else{beop.view.cloudSheet.init(stateMap.$container,page);}}).exit(function(){beop.view.cloudSheet.destroy();stateMap.editor=null;exitFunc("#cloud(/:page)");});Path.map("#server").enter(function(){enterFunc("#server");}).to(function(){beop.view.server_manage.init(stateMap.$container);}).exit(function(){exitFunc("#server");beop.view.server_manage.destroyServerDetail();});Path.map("#server/:projectId/").enter(function(){enterFunc("#server");}).to(function(){beop.view.server_manage.loadServerDetail(this.params['projectId'],stateMap.$container);}).exit(function(){exitFunc("#server");beop.view.server_manage.destroyServerDetail();});Path.map("#engine").enter(function(){enterFunc("#engine");}).to(function(){beop.view.engine_debugging.init(stateMap.$container);}).exit(function(){exitFunc("#engine");});Path.map("#realTimeData").enter(function(){enterFunc("#realTimeData");}).to(function(){beop.view.real_time_data.init(stateMap.$container,1);}).exit(function(){beop.view.real_time_data.destroy();exitFunc("#realTimeData");});Path.map("#realTimeData(/:page)").enter(function(){enterFunc("#realTimeData");}).to(function(){var page=typeof this.params['page']==='undefined'?1:this.params['page'];if(last_route==='#realTimeData(/:page)'){beop.view.real_time_data.refreshPointList(page);}else if(last_route==='#realTimeData'){beop.view.real_time_data.refreshPointList(page);}else{location.hash="#realTimeData";}}).exit(function(){beop.view.real_time_data.destroy();exitFunc("#realTimeData(/:page)");});Path.map("#pointMapping(/:page)").enter(function(){enterFunc("#pointMapping");}).to(function(){var page=typeof this.params['page']==='undefined'?1:this.params['page'];if(last_route==='#pointMapping(/:page)'){beop.view.pointMapping.loadSheet();}else{beop.view.pointMapping.init(stateMap.$container,'',page);}}).exit(function(){beop.view.pointMapping.destroy();exitFunc("#pointMapping(/:page)");});Path.map("#pointMapping/:text/:page").enter(function(){enterFunc("#pointMapping");}).to(function(){var page=typeof this.params['page']==='undefined'?1:this.params['page'];var text=typeof this.params['text']==='undefined'?'':this.params['text'];if(last_route==='#pointMapping/:text/:page'){beop.view.pointMapping.loadSheet();}else{beop.view.pointMapping.init(stateMap.$container,text,page);}}).exit(function(){beop.view.pointMapping.destroy();exitFunc("#pointMapping/:text/:page");});Path.map("#autoMapping").enter(function(){enterFunc("#pointMapping");}).to(function(){beop.view.autoMapping.init(stateMap.$container);}).exit(function(){beop.view.autoMapping.destroy();exitFunc("#autoMapping");});Path.map("#autoMapping/result").enter(function(){enterFunc("#pointMapping");}).to(function(){beop.view.autoMappingResult.init(stateMap.$container);}).exit(function(){beop.view.autoMappingResult.destroy();exitFunc("#autoMapping");});Path.root("#server");Path.listen();};var _main=function(){};_main.prototype={init:init,show:show};beop.main=_main;}(beop||(beop={})));var beop=beop||{};beop.main.prototype.show();var spinner=new LoadingSpinner({color:'#00FFFF'});