{% block content %}
<style>
    #batchHistoryProgress {
        border-radius: 50px;
    }

    #online_test_result.pre {
        border: none;
        background: #fff;
        color: #a94442;
    }

    #editPointWin .modal-body {
        padding-bottom: 45px;
    }
</style>
    <!--批量历史窗口开始-->
    <article id="batchHistoryWin" class="modal fade">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title"><span i18n="debugTools.sitePoint.BULK_ADD_HISTORICAL_DATA"></span>：</h4>
                </div>
                <div class="modal-body">
                    <div class="input-group">
                      <input id="batchHistoryPointValue" class="form-control" type="text" i18n="placeholder=debugTools.sitePoint.ENTER_POINT_VALUE"/>
                      <span class="input-group-btn">
                        <button id="batchHistoryPointValueAdd" class="btn btn-primary" type="button" i18n="debugTools.sitePoint.ADD"></button>
                      </span>
                    </div>
                    <div id="batchHistoryPointsBox">
                        <ul id="batchHistoryPointsUl" class="ul oh" i18n="debugTools.sitePoint.NO_POINT_VALUE"></ul>
                    </div>
                    <div id="batchHistoryFilterBox">
                        <div class="input-group fl">
                            <input class="form-control" type="text" value="" id="batchHistoryTimeStart"
                                   style="border-radius:5px 0 0 5px;"
                                   readonly="true" i18n="placeholder=debugTools.sitePoint.PLEASE_SELECT_THE_START_TIME">
                        </div>
                        <div class="m8 fl" i18n="admin.panelManagement.TO"></div>
                        <div class="input-group fl mr10">
                            <input class="form-control" type="text" value="" id="batchHistoryTimeEnd"
                                   style="border-radius:0 5px 5px 0;"
                                   readonly="true" i18n="placeholder=debugTools.sitePoint.PLEASE_SELECT_THE_END_TIME">
                        </div>
                        <button id="batchHistoryGenerate" type="button" class="btn btn-primary" i18n="debugTools.sitePoint.GENERATE"></button>
                        <div id="batchHistoryQuickGenerateBox" class="btn-group">
                            <button class="btn btn-primary" i18n="debugTools.sitePoint.QUICK_GENERATION"></button>
                            <button class="btn btn-primary dropdown-toggle" data-toggle="dropdown"
                                    aria-haspopup="true" aria-expanded="false">
                                <span class="caret"></span>
                                <span class="sr-only">Toggle Dropdown</span>
                            </button>
                            <ul class="dropdown-menu">
                                <li><a class="batch_history_quick_generate_data" dateType="today" i18n="debugTools.sitePoint.GENERATE_DATA_OF_THIS_DATE"></a></li>
                                <li><a class="batch_history_quick_generate_data" dateType="week" i18n="debugTools.sitePoint.GENERATE_DATA_OF_THIS_WEEK"></a></li>
                                <li><a class="batch_history_quick_generate_data" dateType="month" i18n="debugTools.sitePoint.GENERATE_DATA_OF_THIS_MONTH"></a></li>
                            </ul>
                        </div>
                    </div>
                    <div id="batchHistoryProgressBox">
                        <div id="batchHistoryProgress" class="progress">
                            <span i18n="debugTools.sitePoint.NO_PROGRESS"></span>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal" i18n="common.CANCEL"></button>
                </div>
            </div>
        </div>
    </article>
    <!--批量历史窗口结束-->

    <!--确认是否转为云点浮动窗口开始-->
    <article id="isConvertPointWin" class="modal fade confirmWin">
        <div class="modal-dialog" style="width: 400px;">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title"><span i18n="common.PROMPT"></span>：</h4>
                </div>
                <div class="modal-body">
                    <p class="infoPrompt" i18n="debugTools.info.TURN_POINT"></p>
                    <br>

                    <p><span i18n="debugTools.info.TRANSFORMATION_MODE"></span><span>:</span></p>

                    <div class="radio">
                        <label>
                            <input type="radio" name="convertType" value="1" checked>
                            merge
                        </label>
                    </div>
                    <div class="radio">
                        <label>
                            <input type="radio" name="convertType" value="0">
                            <span i18n="debugTools.info.COVER"></span><span>:</span>
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal" i18n="common.CANCEL"></button>
                    <button id="convertConfirm" type="button" class="btn btn-primary" i18n="common.CONFIRM"></button>
                </div>
            </div>
        </div>
    </article>
    <!--确认是否转为云点浮动窗口结束-->

    <!-- 从模板导入窗口外框开始 -->
    <article id="templateImportWinBox" class="dn"></article>
    <!-- 从模板导入窗口外框结束 -->

    <!-- 存为模板窗口外框开始 -->
    <article id="saveAsTemplateWinBox" class="dn"></article>
    <!-- 存为模板窗口外框结束 -->

    <!--编辑点浮动窗口开始-->
    <article id="editPointWin" class="modal fade confirmWin cloudPointWin">
        <div class="modal-dialog">
            <div class="modal-content">
                <form id="pointForm">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                aria-hidden="true">&times;</span></button>
                        <h4 id="editTitle" class="modal-title" i18n="debugTools.btnNav.ADD_POINT"></h4>
                    </div>
                    <div class="modal-body oh">
                        <section id="pointInfoUpWrapper" class="oh">
                            <section class="fl mr25" id="pointBasicWrapper">
                                <input type="hidden" id="point_id" class="form-control" name="id"/>

                                <div>
                                    <p>
                                    <span class="basicParameterName"><span
                                            i18n="debugTools.sitePoint.CLOUD_POINT"></span>：</span>
                                        <input type="text" id="point_name" class="form-control" name="value" value=""
                                               required/>
                                    </p>

                                    <p>
                                    <span class="basicParameterName"><span
                                            i18n="debugTools.sitePoint.NOTE"></span>：</span>
                                        <input type="text" id="point_notes" class="form-control" name="remark"
                                               value=""/>
                                    </p>

                                    <p>
                                    <span class="basicParameterName"><span
                                            i18n="debugTools.sitePoint.NOTE_EN"></span>：</span>
                                        <input type="text" id="point_notes_en" class="form-control" name="remark_en"
                                               value=""/>
                                    </p>
                                </div>
                                <div>
                                    <p>
                                        <span class="basicParameterName"><span i18n="debugTools.sitePoint.POINT_TYPE"></span>：</span>
                                        <select id="basicPointType" name="flag" class="form-control">
                                            <option selected="selected" value="0" i18n="debugTools.info.MAPPING_TYPE"></option>
                                            <option value="2" i18n="debugTools.info.CALC_TYPE"></option>
                                        </select>
                                    </p>
                                    <p class="calcItem">
                                        <span class="basicParameterName"><span>Format</span>：</span>
                                        <select id="point_format" name="format" class="form-control fl">
                                            <option value="-1" disabled="disabled"
                                                    i18n="debugTools.sitePoint.PLEASE_SELECT_TYPE"></option>
                                            <option value="m5">m5</option>
                                            <option value="m1">m1</option>
                                            <option value="h1">h1</option>
                                            <option value="d1">d1</option>
                                        </select>
                                    </p>
                                    <p class="batchItem">
                                        <span class="basicParameterName"><span i18n="debugTools.sitePoint.BATCH"></span>：</span>
                                        <label style="top: 5px;position: relative;">
                                            <input type="checkbox" id="isBatch">
                                        </label>
                                    </p>
                                </div>
                                <div>
                                    <p class="batchValItem" style="width: 700px;">
                                        <span class="basicParameterName"><span i18n="debugTools.sitePoint.VARIABLE"></span>：</span>
                                        <label>
                                            <input type="text" id="pt_batchModal" style="width: 600px" class="form-control" placeholder="{x:['1','a']} or {x: {min: 2, max: 10, step: 1, pad:2}}">
                                        </label>
                                    </p>
                                </div>

                            </section>
                        </section>
                        <article id="codeMirrorBox" class="dn"></article>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal"
                                i18n="common.CANCEL"></button>
                        <button type="submit" id="editPointConfirm" class="btn btn-primary"
                                i18n="common.CONFIRM"></button>
                    </div>
                </form>
            </div>
        </div>
    </article>
    <!--编辑点浮动窗口结束-->

    <div class="oh">
        <div class="fl">
            <select id="select_project" class="form-control" name="select_project">
                <option disabled selected i18n="debugTools.sitePoint.PLEASE_SELECT_PROJECT"></option>
            </select>
            <script>
                var projects = {{ projects|safe }};
                var optionHtml = '';
                for (var i = 0; i < projects.length; i++) {
                    var name, project = projects[i];
                    if (localStorage.language == 'en') {
                        name = project.name_en;
                    } else {
                        name = project.name_cn;
                    }
                    optionHtml += '<option value="' + project.id + '">' + name + '</option>';
                }
                $('#select_project').append(optionHtml);
            </script>
        </div>
    </div>
    <div class="btn-group btn-group-sm btnGroup" role="group" id="buttonGroup">
        <button id="point_edit" type="button" class="btn btn-default">
            <span class="glyphicon glyphicon-edit db" aria-hidden="true"></span>
            <span i18n="debugTools.btnNav.EDIT_POINT"></span>
        </button>
        <button id="point_add" type="button" class="btn btn-default">
            <span class="glyphicon glyphicon-plus db" aria-hidden="true"></span>
            <span i18n="debugTools.btnNav.ADD_POINT"></span>
        </button>

        <button id="batch_history" type="button" class="btn btn-default dn">
            <span class="glyphicon glyphicon-plus db" aria-hidden="true"></span>
            <span i18n="debugTools.btnNav.BATCH_HISTORY"></span>
        </button>

        <button id="point_delete" type="button" class="btn btn-default">
            <span class="glyphicon glyphicon-remove db" aria-hidden="true"></span>
            <span i18n="debugTools.btnNav.DELETE_POINT"></span>
        </button>

        <button id="point_clear" type="button" class="btn btn-default">
            <span class="glyphicon glyphicon-trash db" aria-hidden="true"></span>
            <span i18n="debugTools.btnNav.CLEAR_POINT"></span>
        </button>
    </div>
    <div class="btn-group btn-group-sm btnGroup" role="group">
        <button id="point_refresh" type="button" class="btn btn-default">
            <span class="glyphicon glyphicon-refresh db" aria-hidden="true"></span>
            <span i18n="debugTools.btnNav.REFRESH_CLOUD_POINT"></span>
        </button>
        <button id="point_convert" type="button" class="btn btn-default">
            <span class="glyphicon glyphicon-cloud db" aria-hidden="true"></span>
            <span i18n="debugTools.btnNav.REFRESH_MAPPING_POINT"></span>
        </button>
    </div>
    <div class="btn-group btn-group-sm btnGroup" role="group">
        <button type="button" class="btn btn-default">
            <a id="point_template_export" target="_blank" style="color: #333;"
               href="/static/app/CxTool/templates/cloud point list.xlsx">
                <span class="glyphicon glyphicon-export db" aria-hidden="true"></span>
                <span i18n="debugTools.btnNav.EXPORT_POINT_TEMPLATE_LIST"></span>
            </a>
        </button>
        <button id="point_import" type="button" class="btn btn-default">
            <span class="glyphicon glyphicon-import db" aria-hidden="true"></span>
            <span i18n="debugTools.btnNav.IMPORT_POINT_LIST"></span>
            <input type="file" id="uploadInput"
                   accept=".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel">
        </button>
        <button type="button" class="btn btn-default">
            <a id="point_export" target="_blank" style="color: #333;">
                <span class="glyphicon glyphicon-export db" aria-hidden="true"></span>
                <span i18n="debugTools.btnNav.EXPORT_POINT_LIST"></span>
            </a>
        </button>
    </div>
    <div id="pointManageWrapper">
        <input type="text" id="text_search" class="form-control mr10 fl" value=""
               i18n="placeholder=debugTools.sitePoint.SEARCH"/>

        <p class="fl mt10">
            <span i18n="debugTools.sitePoint.ALTOGETHER"></span>
            <span class="count"></span><span i18n="debugTools.sitePoint.POINTS"></span>
        </p>

        <div>
            <div id="display_type" class="fl" style="margin-left: 10px;">
                <div class="radio mr10 vi" style="display: inline-block">
                    <label style="-webkit-user-select: none;">
                        <input type="radio" value="" checked name="display-type" class="point_type">
                        <span i18n="debugTools.pointMapping.MAPPING_ALL"></span>
                    </label>
                </div>
                <div class="radio mr10 vi" style="display: inline-block">
                    <label style="-webkit-user-select: none;">
                        <input type="radio" value="0" name="display-type" class="point_type">
                        <span i18n="debugTools.info.MAPPING_TYPE"></span>
                    </label>
                </div>
                <div class="radio mr10 vi" style="display: inline-block">
                    <label style="-webkit-user-select: none;">
                        <input type="radio" value="1" name="display-type" class="point_type">
                        <span i18n="debugTools.info.VIRTUAL_TYPE"></span>
                    </label>
                </div>
                <div class="radio mr10 vi" style="display: inline-block">
                    <label style="-webkit-user-select: none;">
                        <input type="radio" value="2" name="display-type" class="point_type">
                        <span i18n="debugTools.info.CALC_TYPE"></span>
                    </label>
                </div>
            </div>
            <div id="cloudPointEditMessage" class="fr dn" i18n="debugTools.sitePoint.SAVING"></div>
        </div>

        <div class="sheet"></div>
    </div>
    <div class="tr" id="paginationWrapper">
        <ul id="cloudPagination" class="pagination"></ul>
    </div>

    <script type="text/html" id="tpl_point_related_fun">
        <textarea id="codeEditor" class="form-control dn"></textarea>
        <div class="mt10">
            <div class="oh">
                <span id="online_test" class="btn btn-success fl mr5" i18n="debugTools.sitePoint.ONLINE_TEST"></span>
                <span id="import_from_template" class="btn btn-success fl mr5" i18n="debugTools.sitePoint.IMPORTING_FROM_THE_REPOSITORY"></span>
                <span id="save_as_template" class="btn btn-success fl mr5" i18n="debugTools.sitePoint.SAVE_TO_CODE_LIBRARY"></span>
                <span id="help" class="btn btn-success fl mr5"  i18n="debugTools.sitePoint.HELP"></span>
            </div>
            <div id="statusBox" class="fl mt10">
                <div id="datePickBox" class="fl">
                    <div class="input-group fl">
                        <input class="form-control" type="text" value="" id="dateTimeStart"
                               style="border-radius:5px 0 0 5px;"
                               readonly="true"  i18n="placeholder=debugTools.sitePoint.PLEASE_SELECT_THE_START_TIME">
                    </div>
                    <div class="m8 fl" i18n="admin.panelManagement.TO"></div>
                    <div class="input-group fl mr10">
                        <input class="form-control" type="text" value="" id="dateTimeEnd"
                               style="border-radius:0 5px 5px 0;"
                               readonly="true" i18n="placeholder=debugTools.sitePoint.PLEASE_SELECT_THE_END_TIME" >
                    </div>
                </div>
                <span id="history_generate" class="btn btn-success fl mr10"  i18n="debugTools.sitePoint.HISTORICAL_GENERATION"></span>

                <div id="quickGenerateBox" class="btn-group fl">
                    <button type="button" class="btn btn-success"  i18n="debugTools.sitePoint.QUICK_GENERATION"></button>
                    <button type="button" class="btn btn-success dropdown-toggle" data-toggle="dropdown"
                            aria-haspopup="true" aria-expanded="false">
                        <span class="caret"></span>
                        <span class="sr-only">Toggle Dropdown</span>
                    </button>
                    <ul class="dropdown-menu">
                        <li><a class="single_quick_generate_data" dateType="today" i18n="debugTools.sitePoint.GENERATE_DATA_OF_THIS_DATE"></a></li>
                        <li><a class="single_quick_generate_data" dateType="week" i18n="debugTools.sitePoint.GENERATE_DATA_OF_THIS_WEEK"></a></li>
                        <li><a class="single_quick_generate_data" dateType="month" i18n="debugTools.sitePoint.GENERATE_DATA_OF_THIS_MONTH"></a></li>
                    </ul>
                </div>
                <div id="history_generate_delete" class="btn btn-success fl mr10"  i18n="debugTools.sitePoint.STOP_GENERATING"></div>
                <div id="get_insert_info" class="btn btn-success fl mr10 dn" i18n="debugTools.sitePoint.INSERT_DATA_VIEW"></div>
                <div id="point_progress_box" class="fl mr10"></div>
            </div>
        </div>
        <div id="online_test_result_box" class="mt50 oh cb">
            <span class="fl">
                <span id="onlineTestReturnInfo" i18n="debugTools.sitePoint.POINT_VALUE_IS"></span>
                <span>: </span>
            </span>
            <pre id="online_test_result" class="pre fl"></pre>
            <div id="infoGenerate" class="fr mt10"></div>
        </div>
        <div class="insert_result_wrapper">
            <table id="insert_info_result_box"></table>
        </div>
    </script>

    <script type="text/html" id="tpl_date_item_refresh">
        <div class="input-group fl">
            <input class="form-control" type="text" value="" id="dateTimeStart" style="border-radius:5px 0 0 5px;"
                   readonly="true" i18n="placeholder=debugTools.sitePoint.PLEASE_SELECT_THE_START_TIME">
        </div>
        <div class="m8 fl" i18n="admin.panelManagement.TO"></div>
        <div class="input-group fl mr10">
            <input class="form-control" type="text" value="" id="dateTimeEnd" style="border-radius:0 5px 5px 0;"
                   readonly="true" i18n="placeholder=debugTools.sitePoint.PLEASE_SELECT_THE_END_TIME">
        </div>
    </script>

    <script type="text/html" id="tpl_insert_info">
        <thead>
        <tr>
            <th width="50%" i18n="debugTools.sitePoint.TIME"></th>
            <th width="50%" i18n="debugTools.sitePoint.POINT_VALUE"></th>
        </tr>
        </thead>
        <tbody id="insert_info_result">
        <!for(var m=0; m < lists.length; m++){!>
        <!var list=lists[m];!>
        <tr>
            <td><!=list.time!></td>
            <td><!=list.value!></td>
        </tr>
        <!}!>
        </tbody>
    </script>

    <script type="text/html" id="tpl_point_list">
        <table class="table table-striped">
            <thead>
            <tr>
                <th></th>
                <th></th>
                <th></th>
            </tr>
            </thead>
            <tbody>
            <!for(var m=0; m < list.length; m++){!>
            <!var data=list[m].data;!>
            <tr>
                <th scope="row"><!=m+1!></th>
                <td><!=data.value!></td>
                <td><!=data.params.source!></td>
            </tr>
            <!}!>
            </tbody>
        </table>
    </script>

    <script type="text/html" id="tpl_batch_history_add_point">
        <!for(var m=0; m < valueList.length; m++){!>
        <!var pointName=valueList[m];!>
        <li class="oh fl">
            <div class="input-group w180 batchHistoryPoint">
                <input type="text" value="<!=pointName!>" title="<!=pointName!>" class="form-control batchHistoryPointName" disabled/>
                <span class="input-group-addon">
                    <span class="glyphicon glyphicon-remove-circle cp batchHistoryPointDelete"></span>
                </span>
            </div>
        </li>
        <!}!>
    </script>

    <script type="text/html" id="tpl_point_progress">
        <!var percentRate=percent+"%";!>
        <div class="progress-bar progress-bar-success progress-bar-striped active fl"
             role="progressbar" aria-valuenow="<!=percent!>" aria-valuemin="0" aria-valuemax="100"
             style="width: <!=percentRate!>">
            <!=percent!>%
        </div>
    </script>
{% endblock %}
