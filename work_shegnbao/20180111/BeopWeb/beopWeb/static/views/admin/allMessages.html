<link href="static/content/allMessage.css" rel="stylesheet">
<script src="/static/scripts/workflow2.0/jquery.twbsPagination.min.js"></script>
<div id="all_messages_box" class="">
    <div class="nav-bar">
        <div class="nav-bar-title" i18n="message.MESSAGE"></div>
        <div class="nav-bar-list">
            <ul>
                <li class="active">
                    <div>
                        <a class="switch-msg-type" href="javascript:void (0)" data-msg-type="all">
                            <div class="nav-title" i18n="message.ALL"></div>
                        </a>
                    </div>
                </li>
                <li>
                    <div>
                        <a class="switch-msg-type" href="javascript:void (0)" data-msg-type="notRead">
                            <div class="nav-title" i18n="message.UNREAD"></div>
                            <div class="nav-extend">
                                <span class="unread-messages-count"></span>
                            </div>
                        </a>
                    </div>
                </li>
                <li>
                    <div>
                        <a class="switch-msg-type" href="javascript:void (0)" data-msg-type="read">
                            <div class="nav-title" i18n="message.READ"></div>
                        </a>
                    </div>
                </li>
            </ul>
        </div>
    </div>
    <div class="allMessage-navBar-transform">
        <span class="glyphicon glyphicon-chevron-left"></span>
    </div>
    <div class="allMessage-body">
        <div class="body-content">
            <div id="message-kind">
                <ul class="clearfix">
                    <li class="active"><a class="switch-msg-type" data-msg-sub-type="all" i18n="message.ALL_TYPES"></a>
                    </li>
                    <li><a class="switch-msg-type" data-msg-sub-type="workflow" i18n="message.WORK_ORDER"></a></li>
                    <li><a class="switch-msg-type" data-msg-sub-type="diagnosis" i18n="message.DIAGNOSIS"></a></li>
                    <li><a class="switch-msg-type" data-msg-sub-type="versionHistory" i18n="message.VERSION"></a></li>
                    <li><a class="switch-msg-type" data-msg-sub-type="alarm" i18n="message.ALARM"></a></li>
                </ul>
            </div>
            <div id="message-list-container"></div>
        </div>
    </div>
</div>
<!--@formatter:off-->
<script type="text/html" id="tpl_message_table_list">
    <table style="margin-bottom:50px;">
        <thead class="message_table_headers">
            <tr>
                <th class="state-column" style="padding-top: 7px;"><input class="message-check message-check-all" type="checkbox"></th>
                <th class="state-column">&nbsp;</th>
                <th class="content-column"><!=I18n.resource.message.TITLE!></th>
                <th class="col-sm-2"><!=I18n.resource.message.SUBMIT_DATE!></th>
                <th class="col-sm-2"><!=I18n.resource.message.TYPE!></th>
                <th class="col-sm-2"><!=I18n.resource.message.PROJECT!></th>
            </tr>
        </thead>
        <tbody>
        <!messageList.forEach(function(item,index){!>
            <!var message=item.messageInfo || {};!>
            <tr class="col-sm-12 message-row" data-user-msg-id="<!=item._id!>" data-msg-description-id="<!=item.msgId!>" data-tags="<!=item.tags.toString()!>">
                <td class="state-column">
                    <input class="message-check message-check-item" type="checkbox">
                </td>
                <!if(item.isRead){!>
                    <td class="isRead state-column msg-read-state">·</td>
                <!}else{!>
                    <td class="state-column msg-read-state">·</td>
                <!}!>
                <td class="content-column">
                    <!if(item.tags[0] == 'workflow'){!>
                        <a href="#page=workflow&type=transaction&transactionId=<!=item.messageInfo.task.id!>">
                             <span><!=message.content!></span>
                        </a>
                    <!}else{!>
                        <!=message.content!>
                    <!}!>
                </td>
                <td class="col-sm-2"><!=message.time!></td>
                <td class="col-sm-2"><!=item.tags.toString()!></td>
                <td class="col-sm-2"><!=item._projectId!></td>
            </tr>
        <!});!>
        </tbody>
    </table>

    <table class="message-footer" style="background:#fff;z-index:99">
        <tfoot>
        <tr>
            <td class="state-column">
                <input class="message-check message-check-all" type="checkbox">
            </td>
            <td class="col-sm-3 msg-user-face-control">
                <a class="btn btn-default msg-delete"><!=I18n.resource.message.DELETE!></a>
                <a class="btn btn-default msg-mark-as-read"><!=I18n.resource.message.MARK_READ!></a></td>
            <td class="col-sm-7 pagination-container"></td>
        </tr>
        </tfoot>
    </table>

</script>
<!--@formatter:on-->
