import pytestfrom beopWeb.mod_admin import reportControllersfrom flask import current_appfrom beopWeb.mod_oss.ossapi import *from beopWeb.mod_common.Utils import *import osimport json@pytest.mark.p0@pytest.mark.usefixtures("removeReport")@pytest.mark.parametrize(('project_id','project_code','report_folder','report_name','user_id'), [    (72,'shhuawei','KPIReport','test_pdf',2265),])def test_del_report_pdf(project_id,project_code,report_folder,report_name, user_id):    folder = os.getcwd() + '/beopWeb/static/projectReports/reports/{0}/{1}/'.format(project_code,report_folder)    if not os.path.exists(folder):        os.makedirs(folder)    pdf=report_name+'.pdf'    folder_pdf=folder + pdf    f = open(folder_pdf, 'w')    f.close()    rt = reportControllers.del_report_pdf(project_id, report_folder, report_name, user_id)    rt = json.loads(bytes.decode(rt.data))    assert rt.get('success'),'get report list fail'    flag= os.path.exists(folder_pdf)    assert not flag,'remove report fail'@pytest.fixture(scope='function')def removeReport(request):    def fin():        folder1 = os.getcwd() + '/beopWeb/static/projectReports/reports/shhuawei/KPIReport'        os.rmdir(folder1)        folder2 = os.getcwd() + '/beopWeb/static/projectReports/reports/shhuawei'        os.rmdir(folder2)    request.addfinalizer(fin)