<style>
    #feedbackCommentsModal .modal-content {
        width: 800px;
    }

    .fault-feedback-curve {
        height: 300px;
        width: 700px;
        margin: 0 auto;

    }

    .modal-header {
        background-color: #fafafa;
        border-radius: 6px 6px 0 0;
        border-bottom: 1px solid #dedede;
        color: #333333;
    }

    .modal-header .modal-title {
        padding-left: 16px;
    }

    #temp_user_comments_form {
        background-color: #ffffff;
        border-radius: 0 0 6px 6px;
    }

    #temp_user_comments_form .modal-body {
        padding-bottom: 0;
        overflow: hidden;
    }

    #temp_user_comments_form .form-group {
        margin-top: 20px;
        margin-right: -15px;
        margin-left: -55px;
    }

    .modal-footer {
        border-top: 1px solid #dedede;
        background-color: #fafafa;
        border-radius: 0 0 6px 6px;
    }

    button[type='submit'] {
        background-color: #248efe;
        margin-right: 15px;
    }

    #feedbackTitle,
    #feedbackCritical,
    #feedbackDetail {
        background-color: #ffffff !important;
    }

    #temp_user_comments_form .handleStatus {
        background-color: #5cb85c;
        color: #fff;
        display: inline-block;
        padding: 3px 12px;
        border-radius: 3px;
    }

    #fb-comment-list {
        margin: 0 30px 0 60px;
    }

    #temp_user_comments_form .modal-body {
        max-height: 80vh;
        overflow: auto;
    }
</style>
<div class="modal fade" role="document" tabindex="-1"
     data-keyboard="false" aria-labelledby="myModalLabel" style="overflow-y: auto;" id="feedbackCommentsModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span
                        class="sr-only">Close</span></button>
                <h4 class="modal-title" id="myModalLabel" i18n="workflow.main.YOURS_FEEDBACK"></h4>
            </div>
            <form class="form-horizontal" role="form" id="temp_user_comments_form"
                  action="javascript:void(0);">
                <div class="modal-body gray-scrollbar">
                    <div class="form-group">
                        <label class="control-label col-lg-2" i18n="workflow.mine.FEEDBACK_WORK_ORDER_NAME"></label>
                        <div class="col-lg-4">
                            <span id="feedbackTitle"></span>
                        </div>
                        <label class="control-label col-lg-2" i18n="workflow.urgencyLevel.URGENCY_LEVEL"></label>
                        <div class="col-lg-4">
                            <span id="feedbackCritical"></span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-lg-2" i18n="workflow.main.FAULT_INFO"></label>
                        <div class="col-lg-10">
                            <span id="feedbackDetail"></span>
                        </div>
                    </div>

                    <div class="form-group" style="margin-top: 25px; margin-bottom: 25px;">
                        <div class="fault-feedback-curve"></div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-lg-2" style="padding-top:3px" i18n="diagnosis.historyLog.PROGRESS"></label>
                        <div class="col-lg-10">
                            <span class="handleStatus"></span>
                        </div>
                    </div>
                    <div class="form-group">
                        <div id="fb-comment-list"></div>
                    </div>
                </div>
                <div id="feedback_prompt_msg" i18n="workflow.main.FEEDBACK_SUCCESS"></div>
            </form>
        </div>
    </div>
</div>
<!--@formatter:off-->
<script type="text/html" id="tpl_comment_list">
    <table class="pr">
        <tbody>
        <!for(var n=0; n < comment.length; n++){!>
            <!var reply = comment[n]; userInfo=reply.userInfo;!>
            <tr>
                <td class="vt">
                    <dl class="pr wf-detail-userInfo"
                        title="<!=userInfo.userfullname +'\n' +(userInfo.useremail && userInfo.useremail!='undefined' ? userInfo.useremail : '')!>">
                        <dt class="wf-detail-userPic">
                            <img src="<!=userInfo.userpic!>" class="wf-person-pic">
                        </dt>
                        <dd class="pa wf-detail-userName ellipsis dn">
                            <!=userInfo.userfullname!>
                        </dd>
                    </dl>
                    <div class="wf-reply-info-content fl" style="width: 80%">
                        <div class="wf-reply-user-name"><!=userInfo.userfullname!></div>
                        <div class="wf-reply-time">
                            <!var replyTime = moment(reply.time);!>
                            <!if(replyTime.diff(new Date, 'days') < 5){!>
                                <!=replyTime.fromNow()!>
                            <!}else{!>
                                <!=reply.replyTime!>
                            <!}!>
                        </div>
                        <div class="wf-reply-info"><!=reply.content!></div>
                    </div>
                    <!if(beop.model.stateMap.cur_trans || reply.dm){!>
                        <!if( reply.userId == AppConfig.userId){!>
                            <span class="pull-right delete-btn" data-reply-id="<!=reply.id!>">
                            <button class="btn btn-xs btn-danger" title="<!=I18n.resource.message.DELETE!>">
                                <!=I18n.resource.message.DELETE!>
                            </button>
                            </span>
                        <!}!>
                    <!}!>
                </td>
            </tr>
        <!}!>
    </tbody>
    </table>
</script>
<!--@formatter:on-->