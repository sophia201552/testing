# coding=utf-8__author__ = 'angelia'from tests import TestSpecificfrom tests.utils import TestCommonimport pytest#updateProjectInfo , /updateProjectLocateMap ,/memcache/show 测试用例各一个#总测试用例：3个@pytest.mark.p0def test_startWorkspaceDataGenHistogramIncrement_v2_realPoint():    rt = TestCommon.StartWorkspaceDataGenHistogramIncrement_v2.run({        "dsItemIds":["@674|MiamiRCC_ElecUse","@674|MiamiRCC_Cost_Accum"],        "timeStart":"2017-01-01 00:00:00",        "timeEnd":"2017-11-01 00:00:00",        "timeFormat":"M1"    })    expected = {    "list": [        {            "dsItemId": "@674|MiamiRCC_ElecUse",            "errorFlag": [                0,                0,                0,                0,                0,                0,                0,                0,                0,                0            ],            "data": [                0,                0,                0,                0,                0,                0,                0,                0,                0,                123169.024            ]        },        {            "dsItemId": "@674|MiamiRCC_Cost_Accum",            "errorFlag": [                1,                1,                1,                1,                1,                1,                1,                1,                0,                0            ],            "data": [                0,                0,                0,                0,                0,                0,                0,                0,                0,                11212.46            ]        }    ],    "timeShaft": [        "2017-01-01 00:00:00",        "2017-02-01 00:00:00",        "2017-03-01 00:00:00",        "2017-04-01 00:00:00",        "2017-05-01 00:00:00",        "2017-06-01 00:00:00",        "2017-07-01 00:00:00",        "2017-08-01 00:00:00",        "2017-09-01 00:00:00",        "2017-10-01 00:00:00",        "2017-11-01 00:00:00"    ]}    TestCommon.StartWorkspaceDataGenHistogramIncrement_v2.assert_result_equals(expected, rt)@pytest.mark.p0def test_startWorkspaceDataGenHistogramIncrement_v2_id():    rt = TestCommon.StartWorkspaceDataGenHistogramIncrement_v2.run({        "timeStart":"2017-11-14 00:00:00",        "timeEnd":"2017-11-22 00:00:00",        "timeFormat":"d1",        "dsItemIds":["58b7f547833c9723b53637e2","58b7f547833c9723b53637df"]    })    expected = {    "list": [        {            "dsItemId": "58b7f547833c9723b53637e2",            "errorFlag": [                1,                0,                0,                0,                0,                0,                0,                0            ],            "data": [                0,                98.23,                112.67,                98.9,                76.94,                51.1,                97.21,                97.51            ]        },        {            "dsItemId": "58b7f547833c9723b53637df",            "errorFlag": [                1,                0,                0,                0,                0,                0,                0,                0            ],            "data": [                0,                0,                0,                0,                0,                0,                0,                0            ]        }    ],    "timeShaft": [        "2017-11-14 00:00:00",        "2017-11-15 00:00:00",        "2017-11-16 00:00:00",        "2017-11-17 00:00:00",        "2017-11-18 00:00:00",        "2017-11-19 00:00:00",        "2017-11-20 00:00:00",        "2017-11-21 00:00:00",        "2017-11-22 00:00:00"    ]}    TestCommon.StartWorkspaceDataGenHistogramIncrement_v2.assert_result_equals(expected, rt)@pytest.mark.p0def test_startWorkspaceDataGenHistogramIncrement_v2_mixPoint():    rt = TestCommon.StartWorkspaceDataGenHistogramIncrement_v2.run({        "dsItemIds":["@674|MiamiRCC_ElecUse01","@674|MiamiRCC_Cost_Accum"],        "timeStart":"2017-01-01 00:00:00",        "timeEnd":"2017-11-01 00:00:00",        "timeFormat":"M1"    })    expected = {    "list": [        {            "dsItemId": "@674|MiamiRCC_ElecUse01",            "error": [],            "data": []        },        {            "dsItemId": "@674|MiamiRCC_Cost_Accum",            "errorFlag": [                1,                1,                1,                1,                1,                1,                1,                1,                0,                0            ],            "data": [                0,                0,                0,                0,                0,                0,                0,                0,                0,                11212.46            ]        }    ],    "timeShaft": [        "2017-01-01 00:00:00",        "2017-02-01 00:00:00",        "2017-03-01 00:00:00",        "2017-04-01 00:00:00",        "2017-05-01 00:00:00",        "2017-06-01 00:00:00",        "2017-07-01 00:00:00",        "2017-08-01 00:00:00",        "2017-09-01 00:00:00",        "2017-10-01 00:00:00",        "2017-11-01 00:00:00"    ]}    TestCommon.StartWorkspaceDataGenHistogramIncrement_v2.assert_result_equals(expected, rt)@pytest.mark.p0def test_startWorkspaceDataGenHistogramIncrement_v2_wrongPoint():    rt = TestCommon.StartWorkspaceDataGenHistogramIncrement_v2.run({        "dsItemIds":["@674|MiamiRCC_ElecUse01"],        "timeStart":"2017-01-01 00:00:00",        "timeEnd":"2017-11-01 00:00:00",        "timeFormat":"M1"    })    expected = {    "list": [        {            "dsItemId": "@674|MiamiRCC_ElecUse01",            "error": [],            "data": []        }    ],    "timeShaft": []}    TestCommon.StartWorkspaceDataGenHistogramIncrement_v2.assert_result_equals(expected, rt)