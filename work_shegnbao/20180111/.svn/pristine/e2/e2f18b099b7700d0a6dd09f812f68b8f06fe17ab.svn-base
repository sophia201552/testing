<style>
    #createDeviceFailMsg {
        color: #d9534f;
        text-align: center;
    }
</style>
<div class="mb-dtu-container">
    <div id="dataTerminalProjectBox">
        <span>
            <span i18n="modBus.dtuTree.PROJECT_NAME"></span>
            <span>ï¼š</span>
        </span>
        <span id="interfaceProject"></span>
    </div>
    <ul id="mb_dtu_list_ul" class="ztree gray-scrollbar"></ul>
    <div id="dtuOpBtnGroup">
        <span class="col-lg-2 iconfont icon-shanchu button treeCustomIcon removeNode" i18n="title=common.DELETE"></span>
        <span class="col-lg-2 iconfont icon-bianji icon-bianjibutton treeCustomIcon edit" i18n="title=common.EDIT"></span>
        <span class="col-lg-2 iconfont icon-fuzhihuihua button treeCustomIcon copy" i18n="title=common.COPY"></span>
        <span class="col-lg-2 iconfont icon-shezhi11 button treeCustomIcon debugger" i18n="title=common.DEBUG"></span>
        <span class="col-lg-2 iconfont icon-kaishi button treeCustomIcon startUp" i18n="title=common.ENABLE"></span>
        <span class="col-lg-2 iconfont icon-zanting button treeCustomIcon endDown dn active" i18n="title=common.STOP"></span>
    </div>
</div>

<!--@formatter:off-->
<article id="mbPointAddWin" class="modal fade gray-scrollbar">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span>&times;</span>
            </button>
            <h4 class="modal-title"><span id="updateNodeTitle" class="title"></span></h4>
        </div>
        <div class="modal-body oh">
            <form id="mbPointAddForm">
                <div class="col-sm-6">
                    <label>
                        <span class="md-text" i18n="modBus.pointHeader.NAME"></span>
                        <input type="text" class="form-control fl ml10" name="pointName"/>
                    </label>
                    <label>
                        <span class="md-text" i18n="modBus.pointHeader.SLAVE_ID"></span>
                        <input type="number" class="form-control fl ml10" name="slaveId"/>
                    </label>
                    <label>
                        <span class="md-text" i18n="modBus.pointHeader.REMARK"></span>
                        <input type="text" class="form-control fl ml10" name="note"/>
                    </label>
                    <label>
                        <span class="md-text" i18n="modBus.pointHeader.ADDRESS"></span>
                        <input type="number" class="form-control fl ml10" name="address"/>
                    </label>
                    <label>
                        <span class="md-text" i18n="modBus.pointHeader.MULTIPLE"></span>
                        <input type="number" class="form-control fl ml10" name="multiple"/>
                    </label>
                </div>
                <div class="col-sm-6">
                    <label>
                        <span class="md-text" i18n="modBus.pointHeader.TYPE"></span>
                        <span class="ml10">modbus</span>
                    </label>
                    <label>
                        <span class="md-text" i18n="modBus.pointHeader.FUNCTION_CODE"></span>
                        <select class="form-control fl ml10" name="functionCode">
                            <option value="1">01 Read Coils (0x)</option>
                            <option value="2">02 Read Discrete Inputs(1x)</option>
                            <option value="3" selected>03 Read Holding Registers(4x)</option>
                            <option value="4">04 Read Input Registers(3x)</option>
                            <option value="5">05 Write Single Coil</option>
                            <option value="6">06 Write Single Register</option>
                            <option value="15">15 Write Multiple Coils</option>
                            <option value="16">16 Write Multiple Registers</option>
                        </select>
                    </label>
                    <label>
                        <span class="md-text" i18n="modBus.pointHeader.REFRESH_CYCLE"></span>
                        <select class="form-control fl ml10" name="refreshCycle">
                            <option value="0" i18n="modBus.info.DO_NOT_STORE"></option>
                            <option value="1">5s</option>
                            <option value="2">1min</option>
                            <option value="3" selected>5min</option>
                            <option value="4">0.5h</option>
                            <option value="5">1h</option>
                            <option value="6">1day</option>
                            <option value="7">1week</option>
                            <option value="8">1month</option>
                            <option value="9">1year</option>
                        </select>
                    </label>
                    <label>
                        <span class="md-text" i18n="modBus.pointHeader.DATA_TYPE"></span>
                        <select id="mbDataType" class="form-control fl ml10" name="dataType">
                            <option value="0">Signed</option>
                            <option value="1">UnSigned</option>
                            <option value="2">Bite</option>
                            <option value="3">Long</option>
                            <option value="4">Long Inverse</option>
                            <option value="5">Float</option>
                            <option value="6">Float Inverse</option>
                            <option value="7">Double</option>
                            <option value="8">Double Inverse</option>
                            <option value="9">String</option>
                            <option value="10">String Inverse</option>
                        </select>
                    </label>
                    <label>
                        <span class="md-text" i18n="modBus.pointHeader.DATA_LENGTH"></span>
                        <input type="number" class="form-control fl ml10" name="dataLength" id="dataLengthInput"
                               value="1" readonly/>
                    </label>
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <button type="button" id="mbPointAddConfirm" class="btn btn-primary"
                    i18n="common.CONFIRM"></button>
        </div>
    </div>
</article>
<article id="debugger" class="modal fade">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body">
            <div id="debuggerContent" class="debugger-content"></div>
        </div>
    </div>
</article>

<article id="modbus_tree_copy" class="modal fade">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
            <h4 class="modal-title">
                <span i18n="modBus.info.COPY_TO_SELECTED_DEVICE"></span>
            </h4>
        </div>
        <div class="modal-body">
            <div id="copy_content" class="gray-scrollbar"></div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            <button id="copyToOthers" type="button" class="btn btn-primary">Ok</button>
        </div>
    </div>
</article>

<article id="copyFromOtherTpl" class="modal fade">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
            <h4 class="modal-title">
                <span i18n="modBus.info.COPY_FROM_LIST"></span>
            </h4>
        </div>
        <div class="modal-body">
            <div id="copyFromOtherBox" class="gray-scrollbar"></div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            <button id="copyFromOther" type="button" class="btn btn-primary">Ok</button>
        </div>
    </div>
</article>

<article id="modbus_tree_edit" class="modal fade">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span>&times;</span>
            </button>
            <h4 class="modal-title"><span i18n="modBus.info.CREATE_A_TERMINAL"></span></h4>
        </div>
        <div class="modal-body">
            <div id="edit_content"></div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal" i18n="common.CANCEL"></button>
            <button id="addDtuNode" type="button" class="btn btn-primary" i18n="common.CONFIRM"></button>
        </div>
    </div>
</article>

<article id="export_point_modal" class="modal fade">
    <div class="modal-content">
        <div class="modal-body">
            <div id="export-container">
                <div id="exportLocalFileBox">
                    <input class="pa" id="exportLocalFile" type="file" accept=".xlsx,.csv" />
                    <div id="exportLocalFileMod">
                        <button type="button" id="exportLocalFileBtn" class="btn btn-primary cp" i18n='modBus.info.SELECT_FILE'></button>
                        <div id="exportLocalFileText" class="mt5"></div>
                    </div>
                </div>
                <span class="errorMsg"></span>
                <span class="note-help" i18n='modBus.info.EXPORT_FORMAT'></span>
                <span id="namePrefixTextBox" class="mt5">
                    <span i18n='modBus.info.AUTO_ADD_NAME_PREFIX'></span>
                    <span id="namePrefixText"></span>
                </span>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary" id="sureExportLocal">Ok</button>
        </div>
    </div>
</article>

<article id="editTerminalPrefixWin" class="modal fade">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span>&times;</span>
            </button>
            <h4 class="modal-title"><span i18n="modBus.info.MODIFY_EQUIPMENT_INFO"></span></h4>
        </div>
        <div class="modal-body">
            <div id="terminalPrefixWinContent" class="form-horizontal">
                <div class="form-group">
                    <label class="control-label col-lg-4 mt5" i18n="modBus.info.DEVICE_NAME"></label>
                    <div class="col-lg-7">
                        <input type="text" class="form-control col-lg-12 dtuName" />
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label col-lg-4 mt5">
                        <span i18n="modBus.info.DATA_PREFIX"></span>
                    </label>
                    <div class="col-lg-7">
                        <input type="text" class="form-control col-lg-12 dtuPrefix" />
                    </div>
                </div>
                <div id="editObixInfoBox" class="dn">
                    <div class="form-group">
                        <label class="control-label col-lg-4 mt5">
                            <span i18n="dataTerminal.obix.DOMAIN"></span>
                        </label>
                        <div class="col-lg-7">
                            <input type="text" class="form-control col-lg-12 url" name="url" value="" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-lg-4 mt5">
                            <span i18n="dataTerminal.obix.USERNAME"></span>
                        </label>
                        <div class="col-lg-7">
                            <input type="text" class="form-control col-lg-12 userName" name="userName" value="" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-lg-4 mt5">
                            <span i18n="dataTerminal.obix.PASSWORD"></span>
                        </label>
                        <div class="col-lg-7">
                            <input type="text" class="form-control col-lg-12 pwd" name="pwd" value="" />
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary" id="updateDtuNode">Ok</button>
        </div>
    </div>
</article>

<script type="text/html" id="mb_projectPanel_nav">
    <div id="terminalPointsTableBox" class="terminal-table-box">
        <div id="panel-nav">
            <h4 class="tl">Data point</h4>
            <a class="panel-shortcut" id="download-template" target="_blank" href="/static/scripts/modbus/templates/modbus data list.xlsx" nothash>
                <div class="icon-container">
                    <span class="icon iconfont icon-shujuguanli-5"></span>
                </div>
                <div class="panel-nav-text" i18n="modBus.info.DOWNLOAD_DATA_TEMPLATE"></div>
            </a>

            <div class="panel-shortcut" id="copy-already">
                <div class="icon-container">
                    <span class="icon iconfont icon-fuzhihuihua"></span>
                </div>
                <div class="panel-nav-text" i18n="modBus.info.COPY_FROM_EXISTING"></div>
            </div>

            <div class="panel-shortcut" id="export-point">
                <div class="icon-container">
                    <span class="icon iconfont icon-daoru"></span>
                </div>
                <div class="panel-nav-text" i18n="modBus.info.IMPORT_EXISTING_TABLE"></div>
            </div>

            <div class="panel-shortcut" id="handle-type">
                <div class="icon-container">
                    <span class="icon iconfont icon-shuru"></span>
                </div>
                <div class="panel-nav-text" i18n="modBus.info.MANUAL_INPUT"></div>
            </div>
        </div>
    </div>
</script>

<script id="mod_copy_tree_content" type="text/html">
    <table class="table-bordered copy-point-table">
        <thead>
            <tr>
                <th i18n="modBus.info.DTU_NAME"></th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            <!for(var i = 0; i< dtuList.length; i++){!>
                <tr>
                    <td class="dtu-name-text"><!=dtuList[i].name!></td>
                    <th>
                        <input type="checkbox" name="dtuName" class="dtu-name" dtuId="<!=dtuList[i].id!>" />
                    </th>
                </tr>
            <!}!>
        </tbody>
    </table>
</script>

<script id="mb_copy_form_one" type="text/html">
    <table class="table-bordered copy-point-table">
        <thead>
            <tr>
                <th i18n="modBus.info.DTU_NAME"></th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            <!for(var i = 0; i< dtuList.length; i++){!>
                <tr>
                    <td class="dtu-name-text"><!=dtuList[i].name!></td>
                    <th>
                        <input type="radio" name="dtuName" class="dtu-name" dtuId="<!=dtuList[i].id!>"/>
                    </th>
                </tr>
            <!}!>
        </tbody>
    </table>
</script>

<script type="text/html" id="mod_edit_tree_content">
    <div class="row">
        <div class="col-lg-10">
            <div class="form-horizontal">
                <div class="form-group">
                    <label class="control-label col-lg-5 mt5">
                        <span class="required-icon">*</span>
                        <span i18n="dataTerminal.obix.DRIVER_TYPE"></span>
                    </label>
                    <div class="col-lg-7">
                        <select id="selectDtuType" class="form-control">
                            <option value="modbus">Modbus</option>
                            <option value="obix" selected>Obix</option>
                        </select>
                    </div>
                </div>
            </div>
            <form id="createDeviceForModbusForm" class="form-horizontal dn" formType="modbus">
                <div class="form-group">
                    <label class="control-label col-lg-5 mt5">
                        <span class="required-icon">*</span>
                        <span i18n="modBus.info.DEVICE_NAME_NOTE"></span>
                    </label>
                    <div class="col-lg-7">
                        <input type="text" class="form-control col-lg-12 equipName" />
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label col-lg-5 mt5">
                        <span class="required-icon">*</span>
                        <span i18n="modBus.info.DATA_PREFIX"></span>
                    </label>
                    <div class="col-lg-7">
                        <input type="text" class="form-control col-lg-12 dtuPrefix" />
                    </div>
                </div>
            </form>
            <form id="createDeviceForObixForm" class="form-horizontal dn" formType="obix">
                <div class="form-group">
                    <label class="control-label col-lg-5 mt5">
                        <span class="required-icon">*</span>
                        <span i18n="dataTerminal.obix.DOMAIN"></span>
                    </label>
                    <div class="col-lg-7">
                        <input type="text" class="form-control col-lg-12" name="url" value="" />
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label col-lg-5 mt5">
                        <span class="required-icon">*</span>
                        <span i18n="dataTerminal.obix.USERNAME"></span>
                    </label>
                    <div class="col-lg-7">
                        <input type="text" class="form-control col-lg-12" name="userName" value="" />
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label col-lg-5 mt5">
                        <span class="required-icon">*</span>
                        <span i18n="dataTerminal.obix.PASSWORD"></span>
                    </label>
                    <div class="col-lg-7">
                        <input type="text" class="form-control col-lg-12" name="pwd" value="" />
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label col-lg-5 mt5">
                        <span class="required-icon">*</span>
                        <span i18n="modBus.info.DEVICE_NAME_NOTE"></span>
                    </label>
                    <div class="col-lg-7">
                        <input type="text" class="form-control col-lg-12 equipName" name="equipName" />
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label col-lg-5 mt5">
                        <span class="required-icon">*</span>
                        <span i18n="modBus.info.DATA_PREFIX"></span>
                    </label>
                    <div class="col-lg-7">
                        <input type="text" class="form-control col-lg-12 dtuPrefix" name="dtuPrefix" />
                    </div>
                </div>
            </form>
        </div>
    </div>
    <div id="createDeviceFailMsg"></div>
</script>

<script type="text/html" id="mod_update_tree_content">
    <div class="row">
        <div class="col-lg-8 col-lg-offset-2">
            <form class="form-horizontal">
                <div class="form-group">
                    <label class="control-label col-lg-5" i18n="modBus.pointHeader.DTU_NAME"></label>
                    <div class="col-lg-7" id="dtuName"></div>
                </div>
                <div class="form-group">
                    <label class="control-label col-lg-5">
                        <span i18n='modBus.info.DATA_TRANSMISSION_TERMINAL_ID'></span>
                        <br>
                        <span i18n='modBus.info.DATA_PREFIX'></span>
                    </label>
                    <div class="col-lg-7">
                        <input id="dtuPrefix" type="text" class="form-control col-lg-12"
                                i18n='placeholder=modBus.info.CREATE_EQUIPMENT_NOTE' />
                    </div>
                </div>
            </form>
        </div>
    </div>
</script>

<!-------------------------------------------  obix begin   ------------------------------------------------------------->
<article id="obixPointUpdateWin" class="modal fade gray-scrollbar">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span>&times;</span>
            </button>
            <h4 class="modal-title"><span id="obixUpdateNodeTitle" class="title"></span></h4>
        </div>
        <div class="modal-body oh">
            <form id="obixPointUpdateForm">
                <div class="col-sm-12">
                    <label class="col-sm-12">
                        <span class="col-sm-3 mt5 tr">
                            <span class="required-icon">*</span>
                            <span i18n="modBus.pointHeader.NAME"></span>
                        </span>
                        <div class="col-sm-9">
                            <input type="text" class="form-control" name="pointName"/>
                        </div>
                    </label>
                    <label class="col-sm-12">
                        <span class="col-sm-3 mt5 tr">
                            <span i18n="modBus.pointHeader.REMARK"></span>
                        </span>
                        <div class="col-sm-9">
                            <input type="text" class="form-control" name="note"/>
                        </div>
                    </label>
                    <label class="col-sm-12">
                        <span class="col-sm-3 mt5 tr">
                            <span class="required-icon">*</span>
                            <span i18n="modBus.pointHeader.ADDRESS"></span>
                        </span>
                        <div class="col-sm-9">
                            <textarea name="address" class="form-control"></textarea>
                        </div>
                    </label>
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <button type="button" id="obixPointUpdateFormConfirm" class="btn btn-primary" i18n="common.CONFIRM"></button>
        </div>
    </div>
</article>

<article id="obixDebugWin" class="modal fade gray-scrollbar">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span>&times;</span>
            </button>
            <h4 class="modal-title"><span id="obixDebugTitle" class="title" i18n="common.CONFIRM">debug</span></h4>
        </div>
        <div class="modal-body">
            <form id="obixDebugForm" class="mb20 oh">
                <div class="col-sm-12">
                    <label class="col-sm-12">
                        <span class="col-sm-3 tr">
                            <span i18n="modBus.pointHeader.NAME"></span>
                        </span>
                        <div class="col-sm-9">
                            <span id="obixDebugPointName"></span>
                        </div>
                    </label>
                    <label class="col-sm-12 mt10">
                        <span class="col-sm-3 mt10 tr">
                            <span class="required-icon">*</span>
                            <span i18n="dataTerminal.obix.ADDRESS_REQUIRE"></span>
                        </span>
                        <div class="col-sm-9">
                            <textarea id="enterObixPointAddress" name="address" class="form-control"></textarea>
                        </div>
                    </label>
                    <label class="col-sm-12 mt10">
                        <span class="col-sm-3 tr">
                            <span i18n="dataTerminal.obix.POINT_VALUE"></span>
                        </span>
                        <div class="col-sm-9">
                            <span id="obixDebugPointValue"></span>
                        </div>
                    </label>
                    <div class="col-sm-12 mt20 mb20 tc">
                        <button type="button" id="obixDebugClear" class="btn btn-default mr20" i18n="dataTerminal.obix.CLEAR_POINT_ADDRESS"></button>
                        <button type="button" id="obixDebugTest" class="btn btn-primary" i18n="dataTerminal.obix.TEST"></button>
                    </div>
                </div>
            </form>
            <div id="obixDebugInfo" class="tc dn mb10"></div>
        </div>
    </div>
</article>
<!-------------------------------------------  obix end   ------------------------------------------------------------->
<!--@formatter:on-->