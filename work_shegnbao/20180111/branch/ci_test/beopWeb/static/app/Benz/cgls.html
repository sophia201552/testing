<link rel="stylesheet" type="text/css" href="/static/scripts/lib/bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="/static/content/index.css">
<link rel="stylesheet" type="text/css" href="/static/content/index-black.css">
<link rel="stylesheet" type="text/css" href="/static/content/index-black.css">
<link rel="stylesheet" type="text/css" href="/static/app/Benz/env.css">
<script src="/static/scripts/lib/jquery-2.1.4.min.js"></script>
<script src="/static/scripts/lib/bootstrap/js/bootstrap.min.js"></script>
<script src="/static/scripts/lib/bootstrap/js/bootstrap.min.js"></script>
<script src="/static/scripts/lib/bootstrap/bootstrap-datetimepicker/bootstrap-datetimepicker.js"></script>


<body class="gray-scrollbar">

    <style>
        .xungeng {
            margin: 10px;
            width: 100%;
            height: 100%;
        }
        /*.trPurchase{
            position: relative;
        }*/
        .trPurchase .imgContact{
            position: absolute;
            max-width: 400px;
            max-height: 600px;
            border-radius: 4px;
            top: 50%;
            left: 50%;
        }
        .trPurchase .imgContact img{
            box-shadow: 0 0 6px 6px #666;
        }
        .viewDetail{
            margin-left: 10px;
        }
        .tbPage {
            display: none;
        }
        .tbPage.active{
            display: table-row-group;
        }
        .datetimepicker table{
            color: #666;
        }
    </style>

    <div class="xungeng">
        <div class="input-group date form_datetime col-sm-offset-1 col-sm-10" id="datePickerLog" data-date-format="yyyy-mm-dd">
            <span class="input-group-addon spanArrowDataPicker" id="btnLogPre"><span class="glyphicon glyphicon-chevron-left"></span></span>
            <input class="form-control" size="16" type="text" value="2016-02" id="txtLogDate" style="cursor: pointer;" readonly="">
            <span class="input-group-addon"><span class="glyphicon glyphicon-th"></span></span>
            <span class="input-group-addon spanArrowDataPicker" id="btnLogNext"><span class="glyphicon glyphicon-chevron-right"></span></span>
        </div>

        <div style="height: calc(100% - 100px); overflow-x: hidden; overflow-y: auto;">
            <div class="table-responsive">
                <table class="table  table-hover">
                    <caption></caption>
                    <thead>
                        <!--
                        <tr>
                            <th>采购申请单编号</th>
                            <th>采购申请描述</th>
                            <th>申请人</th>
                            <th>状态</th>
                            <th>审核人</th>
                        </tr>
                        -->
                        <tr>
                            <th>采购申请单编号</th>
                            <th>描述</th>
                            <th>审批状态</th>
                            <th>仓库</th>
                            <th>审核人</th>
                            <th>管理部门</th>
                            <th>申请分类名称</th>
                            <th>完成日期</th>
                            <th>合同</th>
                        </tr>
                    </thead>
                    <tbody id="tbPurchaseList_1" class="tbPage active">
                    </tbody>
                    <tbody id="tbPurchaseList_2" class="tbPage">
                    </tbody>
                    <tbody id="tbPurchaseList_3" class="tbPage">
                    </tbody>
                    <tbody id="tbPurchaseList_4" class="tbPage">
                    </tbody>
                </table>
            </div>
        </div>

        <nav>
            <ul class="pagination">
                <li>
                    <a href="javascript:void(0)" aria-label="Previous">
                        <span aria-hidden="true">&laquo;</span>
                    </a>
                </li>
                <li data-target="1"><a>1</a></li>
                <li data-target="2"><a>2</a></li>
                <li data-target="1"><a>3</a></li>
                <li data-target="2"><a>4</a></li>
                <li data-target="1"><a>5</a></li>
                <li>
                    <a href="javascript:void(0)" aria-label="Next">
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            </ul>
        </nav>
    </div>

<script>
    //2016-01
    var data1 = [{"_id":31,"采购申请号":"2836","描述":"VAV风阀检修","审批状态":"采购完成","仓库":"SH-B-01","申请人":"贾远","管理部门":"行政部","申请分类名称":"普通申请","完成日期":"2015-12-23"},
        {"_id":32,"采购申请号":"2835","描述":"餐厅西北侧顶棚玻璃及结构伸缩防水维修","审批状态":"采购完成","仓库":"SH-A-03","申请人":"白杜","管理部门":"工程部","申请分类名称":"普通申请","完成日期":"2015-12-23"},
        {"_id":33,"采购申请号":"2834","描述":"采购电能表","审批状态":"采购完成","仓库":"SH-A-03","申请人":"袁晓磊","管理部门":"仓管部","申请分类名称":"普通申请","完成日期":"2015-12-23"},
        {"_id":34,"采购申请号":"2833","描述":"基地红枫补植","审批状态":"采购完成","仓库":"SH-A-01","申请人":"范东","管理部门":"仓管部","申请分类名称":"普通申请","完成日期":"2015-12-22"},
        {"_id":35,"采购申请号":"2832","描述":"消防检测问题整改","审批状态":"采购完成","仓库":"SH-B-01","申请人":"祝胜春","管理部门":"仓管部","申请分类名称":"普通申请","完成日期":"2015-12-21"},
        {"_id":36,"采购申请号":"2831","描述":"酒窖玻璃门的玻璃漏气更换","审批状态":"采购完成","仓库":"SH-B-02","申请人":"褚丽琴","管理部门":"工程部","申请分类名称":"普通申请","完成日期":"2015-12-21"},
        {"_id":37,"采购申请号":"2830","描述":"酒窖区域方桌茶几漆面维修","审批状态":"采购完成","仓库":"SH-B-01","申请人":"岳森","管理部门":"仓管部","申请分类名称":"普通申请","完成日期":"2015-12-21"},
        {"_id":38,"采购申请号":"2829","描述":"7号冷机冷凝器趋近温度高，需清洗","审批状态":"采购完成","仓库":"SH-B-02","申请人":"任石峰","管理部门":"工程部","申请分类名称":"普通申请","完成日期":"2015-12-20"},
        {"_id":39,"采购申请号":"2828","描述":"厨房区探测器烟感维修","审批状态":"采购完成","仓库":"SH-A-03","申请人":"贾远","管理部门":"行政部","申请分类名称":"普通申请","完成日期":"2015-12-19"},
        {"_id":40,"采购申请号":"2827","描述":"食堂部分排油烟系统改造","审批状态":"采购完成","仓库":"SH-A-03","申请人":"白杜","管理部门":"工程部","申请分类名称":"普通申请","完成日期":"2015-12-19"},
        {"_id":41,"采购申请号":"2826","描述":"消防喷淋增补","审批状态":"采购完成","仓库":"SH-A-01","申请人":"袁晓磊","管理部门":"仓管部","申请分类名称":"普通申请","完成日期":"2015-12-18"},
        {"_id":42,"采购申请号":"2825","描述":"消火栓泵流量计采购","审批状态":"采购完成","仓库":"SH-A-03","申请人":"范东","管理部门":"仓管部","申请分类名称":"普通申请","完成日期":"2015-12-18"},
        {"_id":43,"采购申请号":"2824","描述":"电制冷主机月度包养","审批状态":"采购完成","仓库":"SH-A-01","申请人":"李林峰","管理部门":"仓管部","申请分类名称":"普通申请","完成日期":"2015-12-17"},
        {"_id":44,"采购申请号":"2823","描述":"B和C区通风口清洁","审批状态":"采购完成","仓库":"SH-B-01","申请人":"钱睿斌","管理部门":"维修部","申请分类名称":"普通申请","完成日期":"2015-12-17"},
        {"_id":45,"采购申请号":"2822","描述":"16#电线采购","审批状态":"采购完成","仓库":"SH-B-02","申请人":"邓悠悠","管理部门":"维修部","申请分类名称":"普通申请","完成日期":"2015-12-17"},
        {"_id":46,"采购申请号":"2821","描述":"隔断玻璃及隔断玻璃支架","审批状态":"采购完成","仓库":"SH-B-01","申请人":"彭兵","管理部门":"维修部","申请分类名称":"普通申请","完成日期":"2015-12-16"},
        {"_id":47,"采购申请号":"2820","描述":"厨房用具采购","审批状态":"采购完成","仓库":"SH-B-02","申请人":"岳森","管理部门":"仓管部","申请分类名称":"普通申请","完成日期":"2015-12-16"},
        {"_id":48,"采购申请号":"2819","描述":"会议室桌面补漆","审批状态":"采购完成","仓库":"SH-B-02","申请人":"朱杰","管理部门":"仓管部","申请分类名称":"普通申请","完成日期":"2015-12-15"},
        {"_id":49,"采购申请号":"2818","描述":"风管清洗","审批状态":"采购完成","仓库":"SH-B-01","申请人":"宋怀安","管理部门":"维修部","申请分类名称":"普通申请","完成日期":"2015-12-15"},
        {"_id":50,"采购申请号":"2817","描述":"排烟系统问题整改","审批状态":"采购完成","仓库":"SH-B-02","申请人":"阮小倩","管理部门":"维修部","申请分类名称":"普通申请","完成日期":"2015-12-14"},
        {"_id":51,"采购申请号":"2816","描述":"3号冷机冷凝器需清洗","审批状态":"采购完成","仓库":"SH-A-03","申请人":"宋佳佳","管理部门":"维修部","申请分类名称":"普通申请","完成日期":"2015-12-14"},
        {"_id":52,"采购申请号":"2815","描述":"变频水泵检修","审批状态":"采购完成","仓库":"SH-A-03","申请人":"顾峰","管理部门":"仓管部","申请分类名称":"普通申请","完成日期":"2015-12-12"},
        {"_id":53,"采购申请号":"2814","描述":"F区吊顶维修配件采购","审批状态":"采购完成","仓库":"SH-B-01","申请人":"徐林","管理部门":"仓管部","申请分类名称":"普通申请","完成日期":"2015-12-11"},
        {"_id":54,"采购申请号":"2813","描述":"办公区办公桌购买备用","审批状态":"采购完成","仓库":"SH-B-02","申请人":"沈春华","管理部门":"维修部","申请分类名称":"普通申请","完成日期":"2015-12-11"},
        {"_id":55,"采购申请号":"2812","描述":"生产车间部分电路改造","审批状态":"采购完成","仓库":"SH-B-02","申请人":"林倩茹","管理部门":"工程部","申请分类名称":"普通申请","完成日期":"2015-12-08"},
        {"_id":56,"采购申请号":"2811","描述":"展示区大屏幕整修","审批状态":"采购完成","仓库":"SH-B-01","申请人":"范东","管理部门":"仓管部","申请分类名称":"普通申请","完成日期":"2015-12-07"},
        {"_id":57,"采购申请号":"2810","描述":"办公区打印纸采购","审批状态":"采购完成","仓库":"SH-B-02","申请人":"祝胜春","管理部门":"仓管部","申请分类名称":"普通申请","完成日期":"2015-12-07"},
        {"_id":58,"采购申请号":"2809","描述":"后勤部工作服采购","审批状态":"采购完成","仓库":"SH-A-03","申请人":"李林峰","管理部门":"仓管部","申请分类名称":"普通申请","完成日期":"2015-12-06"},
        {"_id":59,"采购申请号":"2808","描述":"饮水机采购","审批状态":"采购完成","仓库":"SH-B-02","申请人":"钱睿斌","管理部门":"维修部","申请分类名称":"普通申请","完成日期":"2015-12-03"},
        {"_id":60,"采购申请号":"2807","描述":"对讲机采购","审批状态":"采购完成","仓库":"SH-A-03","申请人":"阮小倩","管理部门":"维修部","申请分类名称":"普通申请","完成日期":"2015-12-01"}];

    //2016-02
    var data2 = [{"_id": 1 ,"采购申请号":" 2876 ","描述":" 服务区厨房去部分灭火栓箱更换 ","审批状态":" 采购完成 ","仓库":" SH-A-03 ","申请人":" 窦天鹏 ","管理部门":" 仓管部 ","申请分类名称":" 普通申请 ","完成日期":" 2016-02-17"},
{"_id": 2 ,"采购申请号":" 2874 ","描述":" 冷机配件采购做备品 ","审批状态":" 采购完成 ","仓库":" SH-A-01 ","申请人":" 朱杰 ","管理部门":" 仓管部 ","申请分类名称":" 普通申请 ","完成日期":" 2016-02-13"},
{"_id": 3 ,"采购申请号":" 2872 ","描述":" H区活体轿厢内立柱维修 ","审批状态":" 采购完成 ","仓库":" SH-B-01 ","申请人":" 宋怀安 ","管理部门":" 维修部 ","申请分类名称":" 普通申请 ","完成日期":" 2016-02-13"},
{"_id": 4 ,"采购申请号":" 2871 ","描述":" 采购实验室电脑2台 ","审批状态":" 采购完成 ","仓库":" SH-A-03 ","申请人":" 阮小倩 ","管理部门":" 维修部 ","申请分类名称":" 普通申请 ","完成日期":" 2016-02-12"},
{"_id": 5 ,"采购申请号":" 2868 ","描述":" 采购三通阀8个做备品 ","审批状态":" 采购完成 ","仓库":" SH-A-03 ","申请人":" 宋佳佳 ","管理部门":" 维修部 ","申请分类名称":" 普通申请 ","完成日期":" 2016-01-31"},
{"_id": 6 ,"采购申请号":" 2867 ","描述":" C区会议室投影仪+幕布采购 ","审批状态":" 采购完成 ","仓库":" SH-A-01 ","申请人":" 顾峰 ","管理部门":" 仓管部 ","申请分类名称":" 普通申请 ","完成日期":" 2016-01-28"},
{"_id": 7 ,"采购申请号":" 2866 ","描述":" 办公区彩色喷墨打印机采购 ","审批状态":" 采购完成 ","仓库":" SH-B-01 ","申请人":" 徐林 ","管理部门":" 仓管部 ","申请分类名称":" 普通申请 ","完成日期":" 2016-01-27"},
{"_id": 8 ,"采购申请号":" 2864 ","描述":" 数据哭服务器 ","审批状态":" 采购完成 ","仓库":" SH-B-02 ","申请人":" 沈春华 ","管理部门":" 维修部 ","申请分类名称":" 普通申请 ","完成日期":" 2016-01-27"},
{"_id": 9 ,"采购申请号":" 2863 ","描述":" 圆型太阳能灯7盏 ","审批状态":" 采购完成 ","仓库":" SH-B-01 ","申请人":" 林倩茹 ","管理部门":" 工程部 ","申请分类名称":" 普通申请 ","完成日期":" 2016-01-26"},
{"_id": 10 ,"采购申请号":" 2862 ","描述":" 缆线及配件采购 ","审批状态":" 采购完成 ","仓库":" SH-B-02 ","申请人":" 贾远 ","管理部门":" 行政部 ","申请分类名称":" 普通申请 ","完成日期":" 2016-01-24"},
{"_id": 11 ,"采购申请号":" 2861 ","描述":" H区雨水污水管疏通探测物品采购 ","审批状态":" 采购完成 ","仓库":" SH-A-03 ","申请人":" 白杜 ","管理部门":" 工程部 ","申请分类名称":" 普通申请 ","完成日期":" 2016-01-13"},
{"_id": 12 ,"采购申请号":" 2860 ","描述":" 电脑椅子30把 ","审批状态":" 采购完成 ","仓库":" SH-A-03 ","申请人":" 袁晓磊 ","管理部门":" 仓管部 ","申请分类名称":" 普通申请 ","完成日期":" 2016-01-11"},
{"_id": 13 ,"采购申请号":" 2859 ","描述":" 网线采购做备品 ","审批状态":" 采购完成 ","仓库":" SH-A-01 ","申请人":" 范东 ","管理部门":" 仓管部 ","申请分类名称":" 普通申请 ","完成日期":" 2016-01-10"},
{"_id": 14 ,"采购申请号":" 2858 ","描述":" 展厅屏幕采购 ","审批状态":" 采购完成 ","仓库":" SH-B-01 ","申请人":" 祝胜春 ","管理部门":" 仓管部 ","申请分类名称":" 普通申请 ","完成日期":" 2016-01-10"},
{"_id": 15 ,"采购申请号":" 2857 ","描述":" 实验室灯控维修 ","审批状态":" 采购完成 ","仓库":" SH-B-02 ","申请人":" 李林峰 ","管理部门":" 仓管部 ","申请分类名称":" 普通申请 ","完成日期":" 2016-01-10"},
{"_id": 16 ,"采购申请号":" 2856 ","描述":" 高压球阀采购 ","审批状态":" 采购完成 ","仓库":" SH-B-01 ","申请人":" 钱睿斌 ","管理部门":" 维修部 ","申请分类名称":" 普通申请 ","完成日期":" 2016-01-09"},
{"_id": 17 ,"采购申请号":" 2855 ","描述":" VAV风阀维修物品采购 ","审批状态":" 采购完成 ","仓库":" SH-B-02 ","申请人":" 邓悠悠 ","管理部门":" 维修部 ","申请分类名称":" 普通申请 ","完成日期":" 2016-01-07"},
{"_id": 18 ,"采购申请号":" 2854 ","描述":" J区变电器故障维修 ","审批状态":" 采购完成 ","仓库":" SH-A-03 ","申请人":" 彭兵 ","管理部门":" 维修部 ","申请分类名称":" 普通申请 ","完成日期":" 2016-01-05"},
{"_id": 19 ,"采购申请号":" 2853 ","描述":" 无线数字对讲机12台 ","审批状态":" 采购完成 ","仓库":" SH-A-01 ","申请人":" 何山 ","管理部门":" 仓管部 ","申请分类名称":" 普通申请 ","完成日期":" 2016-01-05"},
{"_id": 20 ,"采购申请号":" 2852 ","描述":" 财务软件 ","审批状态":" 采购完成 ","仓库":" SH-B-01 ","申请人":" 田嘉怡 ","管理部门":" 仓管部 ","申请分类名称":" 普通申请 ","完成日期":" 2016-01-05"},
{"_id": 21 ,"采购申请号":" 2851 ","描述":" A区通风口清洁 ","审批状态":" 采购完成 ","仓库":" SH-B-02 ","申请人":" 刘人仁 ","管理部门":" 维修部 ","申请分类名称":" 其他类服务申请 ","完成日期":" 2015-12-30"},
{"_id": 22 ,"采购申请号":" 2549 ","描述":" 16#铁线 ","审批状态":" 采购完成 ","仓库":" SH-B-01 ","申请人":" 苏小强 ","管理部门":" 维修部 ","申请分类名称":" 普通申请 ","完成日期":" 2015-12-30"},
{"_id": 23 ,"采购申请号":" 2848 ","描述":" 隔断玻璃及隔断玻璃支架 ","审批状态":" 采购完成 ","仓库":" SH-B-02 ","申请人":" 金林 ","管理部门":" 维修部 ","申请分类名称":" 普通申请 ","完成日期":" 2015-12-29"},
{"_id": 24 ,"采购申请号":" 2846 ","描述":" 脚手架1台 ","审批状态":" 采购完成 ","仓库":" SH-A-01 ","申请人":" 孔德玉 ","管理部门":" 仓管部 ","申请分类名称":" 普通申请 ","完成日期":" 2015-12-27"},
{"_id": 25 ,"采购申请号":" 2844 ","描述":" 网络视频设备 ","审批状态":" 采购完成 ","仓库":" SH-A-03 ","申请人":" 何春发 ","管理部门":" 维修部 ","申请分类名称":" 普通申请 ","完成日期":" 2015-12-24"},
{"_id": 26 ,"采购申请号":" 2841 ","描述":" 压缩机一台 ","审批状态":" 采购完成 ","仓库":" SH-A-01 ","申请人":" 于叶军 ","管理部门":" 工程部 ","申请分类名称":" 普通申请 ","完成日期":" 2015-12-20"},
{"_id": 27 ,"采购申请号":" 2840 ","描述":" 采购推车 ","审批状态":" 采购完成 ","仓库":" SH-B-01 ","申请人":" 沈兰花 ","管理部门":" 行政部 ","申请分类名称":" 普通申请 ","完成日期":" 2015-12-19"},
{"_id": 28 ,"采购申请号":" 2839 ","描述":" 电磁阀3个 ","审批状态":" 采购完成 ","仓库":" SH-B-02 ","申请人":" 褚丽琴 ","管理部门":" 工程部 ","申请分类名称":" 普通申请 ","完成日期":" 2015-12-10"},
{"_id": 29 ,"采购申请号":" 2838 ","描述":" 变频水泵采购备用 ","审批状态":" 采购完成 ","仓库":" SH-B-01 ","申请人":" 岳森 ","管理部门":" 仓管部 ","申请分类名称":" 普通申请 ","完成日期":" 2015-12-10"},
{"_id": 30 ,"采购申请号":" 2837 ","描述":" F区吊顶维修配件采购 ","审批状态":" 采购完成 ","仓库":" SH-B-02 ","申请人":" 任石峰 ","管理部门":" 工程部 ","申请分类名称":" 普通申请 ","完成日期":" 2015-12-07"}];


    renderPurchaseData(data2);
    attachEvent();

    function renderPurchaseData(data){
        var $tbPurchaseList1 = $('#tbPurchaseList_1');
        var $tbPurchaseList2 = $('#tbPurchaseList_2');
        var $tbPurchaseList3 = $('#tbPurchaseList_3');
        var $tbPurchaseList4 = $('#tbPurchaseList_4');
        var strHtml = '';
        var dicImg = {
            0: "https://beopweb.oss-cn-hangzhou.aliyuncs.com/static/images/workflow/1.jpg",
            1: "https://beopweb.oss-cn-hangzhou.aliyuncs.com/static/images/workflow/2.jpg",
            2: "https://beopweb.oss-cn-hangzhou.aliyuncs.com/static/images/workflow/3.jpg",
            3: "https://beopweb.oss-cn-hangzhou.aliyuncs.com/static/images/workflow/4.jpg",
            4: "https://beopweb.oss-cn-hangzhou.aliyuncs.com/static/images/workflow/5.jpg"
        }
        for(var i = 0; i < data.length; i++){
            strHtml += ('<tr class="trPurchase" data-id="'+ data[i]["_id"] +'">\
                            <td>'+ data[i]["采购申请号"] +'</td>\
                            <td>'+ data[i]["描述"] +'</td>\
                            <td>'+ data[i]["审批状态"] +'</td>\
                            <td>'+ data[i]["仓库"] +'</td>\
                            <td>'+ data[i]["申请人"] +'</td>\
                            <td>'+ data[i]["管理部门"] +'</td>\
                            <td>'+ data[i]["申请分类名称"] +'</td>\
                            <td>'+ data[i]["完成日期"] +'</td>\
                            <td><button class="btn btn-default btn-xs viewImg" data-imgurl="'+ dicImg[i%5] +'">图片</button><button class="btn btn-primary btn-xs viewDetail">详细</button></td>\
                        </tr>');
            if(i == 14){
                $tbPurchaseList1.html(strHtml);
                strHtml = '';
            }
            if(i == 29){
                $tbPurchaseList2.html(strHtml);
                strHtml = '';
            }
            if(i == 44){
                $tbPurchaseList3.html(strHtml);
                strHtml = '';
            }
            if(i == 59){
                $tbPurchaseList4.html(strHtml);
                strHtml = '';
            }
        }
    }

    function attachEvent(){
        //显示合同图片
        $('.viewImg').hover(function(){
            $(this).parent().append('<div class="imgContact"><img src="'+ this.dataset.imgurl +'"/></div>');
            var $imgContact = $('.imgContact img');
            $imgContact[0].onload = function(){
                $imgContact.css({marginTop: -$imgContact.height()/2, marginLeft: -$imgContact.width()/2});
            }
        }, function(){
            $('.imgContact').remove();
        });

        //分页
        $('.pagination li[data-target]').off('click').on('click', function(){
            var pageNum = this.dataset.target;
            $('#tbPurchaseList_' + pageNum).addClass('active').siblings().removeClass('active');
        });

        //日历初始化
        $(".form_datetime").datetimepicker({
            format: "yyyy-mm",
            autoclose: true,
            todayBtn: true,
            pickerPosition: "bottom-left",
            minView: 'year'
        });

        //查看上个月的数据
        $('.glyphicon-chevron-left').off('click').on('click', function(){
            $('#txtLogDate').val('2016-01');
            renderPurchaseData(data1);
            attachEvent();
        });
        $('.glyphicon-chevron-right').off('click').on('click', function(){
            $('#txtLogDate').val('2016-02');
            renderPurchaseData(data2);
            attachEvent();
        });
    }

</script>



</body>