FROM ubuntu:16.04

WORKDIR /project

COPY sources.list /etc/apt/sources.list

COPY . /project

RUN apt-get update && apt-get install -y \
	python3 \
    python3-setuptools \
    python3-pip && \
    pip3 install -r /project/requirements/requirements-main.txt --index http://pypi.doubanio.com/simple --trusted-host pypi.doubanio.com && \
    pip3 install -r /project/requirements/requirements-dev.txt --index http://pypi.doubanio.com/simple --trusted-host pypi.doubanio.com && \
    # pip3 install -r /project/requirements/requirements-main.txt --index http://mirrors.aliyun.com/pypi/simple --trusted-host mirrors.aliyun.com && \
    # pip3 install -r /project/requirements/requirements-dev.txt --index http://mirrors.aliyun.com/pypi/simple --trusted-host mirrors.aliyun.com && \
    pip3 install -e /project/requirements/additional/mysql-connector-python-2.0.3

EXPOSE 80
